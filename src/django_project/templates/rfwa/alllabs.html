{% extends "rfwa/base.html" %}
{% load staticfiles %}

{% block extra_head %}

<link href="{% static 'css/button.css' %}" rel="stylesheet">

<style>
  /* .fileDirectory {
    visibility: hidden;
  } */
</style>
{% endblock %}

{% block body_block %}

<div class="container-fluid">
  <h1 class="mt-4">Select a lab exercise to begin working on!</h1>

  <a href="./theia-iframe.html" id="sw1">Sample Workspace 1</a><br />
  <a href="./theia-iframe.html.html" id="sw2">Sample Workspace 2</a><br />
  <a href="#" id="cw">Check workspace by clicking here</a> <br />
  {% if labs %}
  <div class="container-fluid mt-5">
    {% for lab in labs %}
    {% cycle 'row' '' as row silent %}
    {% if row %}
    <div class="row justify-content-around">
      {% endif %}
      <div class="col-sm-10 col-md-10 col-lg-4 mb-5">
        <div class="card bg-dark text-white mx-auto">
          <div class="card-body text-center">
            <h3 class="card-title">{{lab.name}}</h3>
            <p class="card-text text-left">{{lab.description}}</p>
            <p class="card-text text-left">Deadline: {{lab.close_Date}}</p>
            <!-- invisible -->
            <!-- <p class="card-text text-left fileDirectory" value = "{{ lab.lab_Files.path }}">Zipped files name: {{lab.lab_Files.path}}</p> -->
            <!-- invisible -->
            <div class="row pb-2 justify-content-around mt-4">
              <button class="btn btn-primary font-weight-bold loadProjectButton test"
                value="{{ lab.lab_Files.path }}">Load lab</button>
              <!-- onclick=" window.open('/rfwa/devpage', '_self')" -->
            </div>
          </div>
        </div>
      </div>
      {% if not row %}
    </div>
    {% endif %}
    {% endfor %}
    {% else %}
    <h2 class="text-center mt-5">There are currently no projects to show.</h2>
    {% endif %}
  </div>

  <!-- <button onclick="location.href='/rfwa/lectureslides/'" type="button" class="lab-button"> -->
  <!-- Lab Week 1</button> -->


</div>

<script>

  var fileURI = '';
  function init() {
    var sw1_element = document.getElementById('sw1');
    sw1_element.onclick = function () {
      fileURI = 'file:///home/nicholas/Documents/theia%20switch%20workspace/sample-workspace-1/';
      sessionStorage.setItem("Workspace", fileURI)

      return false;
    }

    var sw2_element = document.getElementById('sw2');
    sw2_element.onclick = function () {
      fileURI = 'file:///home/nicholas/Documents/theia%20switch%20workspace/sample-workspace-2/';
      sessionStorage.setItem("Workspace", fileURI)
      return false;
    }

    var cw_element = document.getElementById('cw');
    cw_element.onclick = function () {
      alert(fileURI);
      return false;
    }
  }

  window.onload = init;

  function addSessionStorage() {
    var selected = document.getElementsByClassName('test');
    selected.onclick = function () {
      fileURI = document.getElementsByClassName('fileDirectory').value;;
      sessionStorage.setItem("Workspace", fileURI)
      return false;
    }
  }

  $(function(){
    $("button").click(function() {
        var fired_button = $(this).val();
        // remove .zip from file uri
        var newValue =  fired_button.replace('.zip', '');
        alert(newValue);
    });
});


</script>

{% endblock %}