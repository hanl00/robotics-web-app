{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@theia/plugin-ext/src/plugin/types-impl.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-api-rpc.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/type-converters.ts","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/@theia/core/src/common/event.ts","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/graceful-fs/graceful-fs.js","webpack:///./node_modules/vscode-uri/lib/esm/index.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/universalify/index.js","webpack:///./node_modules/fs-extra/lib/mkdirs/index.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/main.js","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/messages.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/@theia/core/src/common/disposable.ts","webpack:///./node_modules/fs-extra/lib/path-exists/index.js","webpack:///./node_modules/readable-stream/lib/_stream_duplex.js","webpack:///./node_modules/@theia/plugin-ext/src/common/types.ts","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///./node_modules/@theia/core/src/common/promise-util.ts","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/is.js","webpack:///./node_modules/core-util-is/lib/util.js","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/util.ts","webpack:///./node_modules/vscode-jsonrpc/lib/is.js","webpack:///./node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:///./node_modules/vscode-jsonrpc/lib/events.js","webpack:///./node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/events.js","webpack:///./node_modules/os-browserify/browser.js","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-api-rpc-model.ts","webpack:///./node_modules/process-nextick-args/index.js","webpack:///./node_modules/fs-extra/lib/remove/index.js","webpack:///./node_modules/@theia/core/src/common/cancellation.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-protocol.ts","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@theia/core/src/common/path.ts","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:///./node_modules/@babel/runtime/helpers/get.js","webpack:///./node_modules/vscode-languageserver-types/lib/esm/main.js","webpack:///./node_modules/@phosphor/coreutils/lib/uuid.js","webpack:///./node_modules/@theia/plugin-ext/src/common/paths.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/strings.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/markdown-string.ts","webpack:///./node_modules/events/events.js","webpack:///./node_modules/readable-stream/readable-browser.js","webpack:///./node_modules/readable-stream/node_modules/safe-buffer/index.js","webpack:///./node_modules/readable-stream/lib/_stream_writable.js","webpack:///./node_modules/fs-extra/lib/json/jsonfile.js","webpack:///./node_modules/@theia/plugin-ext/src/common/uri-components.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/assert.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/object-identifier.ts","webpack:///./node_modules/vscode-jsonrpc/lib/main.js","webpack:///./node_modules/@theia/plugin-ext/src/common/rpc-protocol.ts","webpack:///./node_modules/@theia/core/src/common/uri.ts","webpack:///./node_modules/vscode-languageserver-protocol/lib/main.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/@theia/plugin-ext/src/common/errors.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/paths-util.ts","webpack:///./node_modules/@theia/core/src/common/os.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/disposable-util.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-storage.ts","webpack:///./node_modules/fs-extra/lib/fs/index.js","webpack:///./node_modules/readable-stream/lib/_stream_readable.js","webpack:///./node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack:///./node_modules/readable-stream/lib/internal/streams/destroy.js","webpack:///./node_modules/node-libs-browser/node_modules/string_decoder/lib/string_decoder.js","webpack:///./node_modules/readable-stream/lib/_stream_transform.js","webpack:///./node_modules/util/util.js","webpack:///./node_modules/assert/assert.js","webpack:///./node_modules/fs-extra/lib/copy/ncp.js","webpack:///./node_modules/fs-extra/lib/mkdirs/win32.js","webpack:///./node_modules/fs-extra/lib/copy-sync/index.js","webpack:///./node_modules/fs-extra/lib/util/buffer.js","webpack:///./node_modules/@theia/plugin-ext/src/common/known-commands.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/async-util.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/document-data.ts","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/@theia/plugin-ext/src/common/index.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-icon-path.ts","webpack:///./node_modules/vscode-jsonrpc/lib/messages.js","webpack:///./node_modules/vscode-ws-jsonrpc/src/socket/index.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/socket/reader.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/socket/writer.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/logger.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/connection.ts","webpack:///./node_modules/lodash.clonedeep/index.js","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/worker-main.ts","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack:///./node_modules/@babel/runtime/helpers/construct.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messages.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:///./node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/utils/is.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.progress.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js","webpack:///./node_modules/@phosphor/coreutils/lib/random.js","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-manager.ts","webpack:///./node_modules/fs-extra/lib/index.js","webpack:///./node_modules/fs-extra/lib/util/assign.js","webpack:///./node_modules/graceful-fs/polyfills.js","webpack:///./node_modules/graceful-fs/legacy-streams.js","webpack:///./node_modules/stream-browserify/index.js","webpack:///./node_modules/readable-stream/lib/internal/streams/BufferList.js","webpack:///./node_modules/util-deprecate/browser.js","webpack:///./node_modules/safe-buffer/index.js","webpack:///./node_modules/readable-stream/lib/_stream_passthrough.js","webpack:///./node_modules/readable-stream/writable-browser.js","webpack:///./node_modules/readable-stream/duplex-browser.js","webpack:///./node_modules/readable-stream/transform.js","webpack:///./node_modules/readable-stream/passthrough.js","webpack:///./node_modules/graceful-fs/clone.js","webpack:///./node_modules/util/support/isBufferBrowser.js","webpack:///./node_modules/util/node_modules/inherits/inherits_browser.js","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/fs-extra/lib/copy/index.js","webpack:///./node_modules/fs-extra/lib/copy/copy.js","webpack:///./node_modules/fs-extra/lib/util/utimes.js","webpack:///./node_modules/fs-extra/lib/mkdirs/mkdirs.js","webpack:///./node_modules/fs-extra/lib/mkdirs/mkdirs-sync.js","webpack:///./node_modules/fs-extra/lib/copy-sync/copy-sync.js","webpack:///./node_modules/fs-extra/lib/copy-sync/copy-file-sync.js","webpack:///./node_modules/fs-extra/lib/remove/rimraf.js","webpack:///./node_modules/fs-extra/lib/json/index.js","webpack:///./node_modules/jsonfile/index.js","webpack:///./node_modules/fs-extra/lib/json/output-json.js","webpack:///./node_modules/fs-extra/lib/json/output-json-sync.js","webpack:///./node_modules/fs-extra/lib/move/index.js","webpack:///./node_modules/fs-extra/lib/move-sync/index.js","webpack:///./node_modules/fs-extra/lib/empty/index.js","webpack:///./node_modules/fs-extra/lib/ensure/index.js","webpack:///./node_modules/fs-extra/lib/ensure/file.js","webpack:///./node_modules/fs-extra/lib/ensure/link.js","webpack:///./node_modules/fs-extra/lib/ensure/symlink.js","webpack:///./node_modules/fs-extra/lib/ensure/symlink-paths.js","webpack:///./node_modules/fs-extra/lib/ensure/symlink-type.js","webpack:///./node_modules/fs-extra/lib/output/index.js","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-context.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/command-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/objects.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/quick-open.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/status-bar-message-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/status-bar/status-bar-item.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/status-bar/vscolor-const.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/window-state.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/text-editors.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/id-generator.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/documents.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/prefix-sum-computer.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/word-helper.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/editor-options.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/output-channel-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/output-channel/output-channel-item.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/terminal-ext.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages.ts","webpack:///./node_modules/vscode-uri/lib/umd/index.js","webpack:///./node_modules/@theia/plugin-ext/src/common/glob.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/completion.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/diagnostics.ts","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/signature.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/hover.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/document-highlight.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/document-formatting.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/range-formatting.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/on-type-formatting.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/definition.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/implementation.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/type-definition.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/code-action.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/link-provider.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/lens.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/outline.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/reference.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/workspace-symbol.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/folding.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/color.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/rename.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/declaration.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/dialogs.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/notification.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tree/tree-views.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-ext-api-contribution.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages-contribution-ext.ts","webpack:///./node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:///./node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:///./node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:///./node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack:///./node_modules/vscode-ws-jsonrpc/src/index.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/disposable.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/socket/connection.ts","webpack:///./node_modules/vscode-ws-jsonrpc/src/connection.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/connection-ext.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-message-reader.ts","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-message-writer.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tasks/tasks.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tasks/task-provider.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/file-system.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/scm.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/decorations.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/preference-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/preferences/configuration.ts","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/debug-stub.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/debug.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-executable-resolver.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-session.ts","webpack:///./node_modules/@theia/debug/src/node/debug-adapter-session.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-starter.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-debug-adapter-tracker.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/editors-and-documents.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/text-editor.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/workspace.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/in-plugin-filesystem-watcher-proxy.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/message-registry.ts","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/worker-env-ext.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/env.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/clipboard-ext.ts","webpack:///./node_modules/@theia/plugin-ext/src/plugin/webviews.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","func","this","disposable","from","Disposable","disposables","dispose","undefined","StatusBarAlignment","TextEditorLineNumbersStyle","ViewColumn","TextEditorSelectionChangeKind","fromValue","Keyboard","Mouse","Command","line","char","Error","_line","_character","isBefore","other","isBeforeOrEqual","isAfter","isAfterOrEqual","isEqual","compareTo","translate","lineDeltaOrChange","characterDelta","illegalArgument","lineDelta","Position","character","with","lineOrChange","Min","result","positions","pop","Max","isPosition","startLineOrStart","startColumnOrEnd","endLine","endColumn","start","end","_start","_end","contains","positionOrRange","Range","intersection","union","startOrChange","isRange","thing","anchorLineOrAnchor","anchorColumnOrActive","activeLine","activeColumn","anchor","active","_anchor","_active","Selection","EndOfLine","_tabstop","isSnippetString","SnippetString","_escape","replace","appendText","string","appendTabstop","number","appendPlaceholder","nested","appendVariable","defaultValue","id","ThemeColor","File","ThemeIcon","Folder","TextEditorRevealType","DecorationRangeBehavior","OverviewRulerLane","ConfigurationTarget","base","pattern","isUri","uri","fsPath","pathToRelative","to","relative","RelativePattern","IndentAction","range","newText","_range","_newText","_newEol","isTextEdit","TextEdit","insert","position","delete","setEndOfLine","eol","ret","newEol","CompletionTriggerKind","CompletionItemKind","label","kind","CompletionItem","DiagnosticSeverity","items","isIncomplete","CompletionList","location","message","DiagnosticRelatedInformation","rangeOrPosition","isLocation","Location","DiagnosticTag","severity","Diagnostic","MarkerSeverity","MarkerTag","documentation","ParameterInformation","parameters","SignatureInformation","SignatureHelpTriggerKind","signatures","SignatureHelp","contents","Array","isArray","isMarkdownString","Hover","DocumentHighlightKind","DocumentHighlight","target","isEmpty","DocumentLink","command","CodeLens","CodeActionTrigger","append","parts","CodeActionKind","sep","startsWithIgnoreCase","intersects","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","TextDocumentSaveReason","title","CodeAction","_edits","renameFile","options","push","_type","createFile","deleteFile","edit","resource","has","toString","set","edits","length","element","filter","e","res","candidate","entries","textEdits","Map","textEdit","forEach","v","_allEntries","toJSON","WorkspaceEdit","TreeItemCollapsibleState","arg1","collapsibleState","None","resourceUri","TreeItem","rangeOrContainer","locationOrUri","containerName","SymbolInformation","validate","SymbolKind","detail","selectionRange","children","DocumentSymbol","FileChangeType","CommentThreadCollapsibleState","Back","iconPath","tooltip","QuickInputButtons","CommentMode","uriOrMessage","code","terminator","setPrototypeOf","FileSystemError","captureStackTrace","FileExists","messageOrUri","FileNotFound","FileNotADirectory","FileIsADirectory","NoPermissions","Unavailable","FileType","cancellable","ProgressOptions","report","Progress","ProgressLocation","process","varg1","varg2","executionProcess","arguments","executionOptions","computeId","hash","crypto","createHash","update","arg","digest","is","ProcessExecution","ShellQuoting","TaskPanelKind","TaskRevealKind","arg0","arg2","shellCommand","shellOptions","shellCommandLine","commandLine","ShellExecution","groupId","TaskGroup","Clean","Build","Rebuild","Test","TaskScope","taskDefinition","scope","source","execution","problemMatchers","args","definition","taskProblemMatchers","hasTaskProblemMatchers","isTaskBackground","taskScope","taskName","taskExecution","updateDefinitionBasedOnExecution","taskSource","taskGroup","taskPresentationOptions","assign","type","taskType","Task","DebugAdapterExecutable","port","host","DebugAdapterServer","enabled","condition","hitCondition","logMessage","_id","UUID","uuid4","Breakpoint","SourceBreakpoint","functionName","FunctionBreakpoint","red","green","blue","alpha","Color","color","ColorInformation","ColorPresentation","ColorFormat","FoldingRange","FoldingRangeKind","OperatingSystem","WebviewPanelTargetArea","emptyPlugin","lifecycle","startMethod","stopMethod","model","publisher","version","displayName","description","engine","packagePath","entryPoint","pluginPath","pluginFolder","rawModel","engines","MainMessageType","TreeViewSelection","TreeViewItemCollapsibleState","ScmCommandArg","EditorPosition","TrackedRangeStickiness","ResourceTextEditDto","LanguagesMainFactory","OutputChannelRegistryFactory","PLUGIN_RPC_CONTEXT","COMMAND_REGISTRY_MAIN","createProxyIdentifier","QUICK_OPEN_MAIN","DIALOGS_MAIN","WORKSPACE_MAIN","MESSAGE_REGISTRY_MAIN","TEXT_EDITORS_MAIN","DOCUMENTS_MAIN","STATUS_BAR_MESSAGE_REGISTRY_MAIN","ENV_MAIN","NOTIFICATION_MAIN","TERMINAL_MAIN","TREE_VIEWS_MAIN","PREFERENCE_REGISTRY_MAIN","OUTPUT_CHANNEL_REGISTRY_MAIN","LANGUAGES_MAIN","CONNECTION_MAIN","WEBVIEWS_MAIN","STORAGE_MAIN","TASKS_MAIN","LANGUAGES_CONTRIBUTION_MAIN","DEBUG_MAIN","FILE_SYSTEM_MAIN","SCM_MAIN","DECORATIONS_MAIN","WINDOW_MAIN","CLIPBOARD_MAIN","MAIN_RPC_CONTEXT","HOSTED_PLUGIN_MANAGER_EXT","COMMAND_REGISTRY_EXT","QUICK_OPEN_EXT","WINDOW_STATE_EXT","NOTIFICATION_EXT","WORKSPACE_EXT","TEXT_EDITORS_EXT","EDITORS_AND_DOCUMENTS_EXT","DOCUMENTS_EXT","TERMINAL_EXT","OUTPUT_CHANNEL_REGISTRY_EXT","TREE_VIEWS_EXT","PREFERENCE_REGISTRY_EXT","LANGUAGES_EXT","CONNECTION_EXT","WEBVIEWS_EXT","STORAGE_EXT","TASKS_EXT","LANGUAGES_CONTRIBUTION_EXT","DEBUG_EXT","FILE_SYSTEM_EXT","SCM_EXT","DECORATIONS_EXT","ThemableDecorationRenderOptions","ThemableDecorationAttachmentRenderOptions","fromViewColumn","column","types","One","Beside","toRange","startLineNumber","startColumn","endLineNumber","fromRange","isDecorationOptionsArr","something","isDecorationOptions","fromManyMarkdown","markup","map","fromMarkdown","language","toMarkdown","MarkdownString","isTrusted","fromGlobPattern","rp","fromTextEdit","text","convertCode","String","convertSeverity","Warning","Information","Info","Hint","convertRelatedInformation","diagnosticsRelatedInformation","relatedInformation","item","convertTags","tags","markerTags","Unnecessary","fromDocumentHighlightKind","Text","Read","Write","fromProcessExecution","taskDto","fromShellExecution","getShellExecutionOptions","getShellArgs","getProcessExecution","getShellExecution","env","executable","shellQuoting","shellArgs","cwd","fromFoldingRangeKind","Comment","Imports","Region","pathOrURIToURI","file","ep","ONE","TWO","Two","THREE","Three","FOUR","Four","FIVE","Five","SIX","Six","SEVEN","Seven","EIGHT","Eight","NINE","Nine","showOptions","area","Main","viewColumn","preserveFocus","selection","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","lineNumber","ranges","hoverMessage","renderOptions","fromDocumentSelector","selector","scheme","Method","Function","Constructor","Field","Variable","Class","Interface","Struct","Module","Property","Unit","Value","Constant","Enum","EnumMember","Keyword","Snippet","Reference","Event","Operator","TypeParameter","fromLanguageSelector","diagnostic","hover","definitionLink","targetUri","targetRange","origin","originSelectionRange","targetSelectionRange","url","documentHighlight","info","help","activeSignature","activeParameter","documents","entry","uriOrEdits","doc","getDocument","modelVersionId","oldUri","newUri","fromMapping","Namespace","Package","Number","Boolean","Key","Null","fromSymbolKind","toSymbolKind","k","fromDocumentSymbol","toDocumentSymbol","symbol","folder","revive","index","task","properties","windows","parse","symbolInformation","p1","p2","foldingRange","colorPresentation","additionalTextEdits","pickItems","handle","picked","groupLabel","showBorder","DecorationRenderOptions","isWholeLine","rangeBehavior","overviewRulerLane","light","dark","backgroundColor","outline","outlineColor","outlineStyle","outlineWidth","border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth","fontStyle","fontWeight","textDecoration","cursor","opacity","letterSpacing","gutterIconPath","gutterIconSize","overviewRulerColor","before","after","OpenOpen","rpc","AlwaysGrowsWhenTypingAtEdges","ClosedClosed","NeverGrowsWhenTypingAtEdges","OpenClosed","GrowsOnlyWhenTypingBefore","ClosedOpen","GrowsOnlyWhenTypingAfter","contentText","contentIconPath","margin","width","height","plugin","normalizeArray","allowAboveRoot","up","last","splice","unshift","xs","f","resolve","resolvedPath","resolvedAbsolute","path","TypeError","charAt","split","join","normalize","isAbsolute","trailingSlash","substr","paths","slice","trim","arr","fromParts","toParts","Math","min","samePartsLength","outputParts","concat","delimiter","dirname","charCodeAt","hasRoot","matchedSlash","basename","ext","extname","startDot","startPart","preDotState","str","len","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","nextTick","apply","browser","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","chdir","dir","umask","_disposable","maxListeners","event","mapFunc","listener","thisArgs","_callbacks","add","callback","context","bucket","_contexts","remove","foundCallbackWithDifferentContext","iterator","callbacks","contexts","invoke","console","error","_options","_disposed","_event","CallbackList","onFirstListenerAdd","checkMaxListeners","Emitter","_noop","onLastListenerRemove","count","warn","fire","sequence","processor","WaitUntilEvent","emitter","waitables","asyncEvent","waitUntil","thenable","isFrozen","freeze","Promise","race","all","instance","gracefulQueue","previousSymbol","polyfills","legacy","clone","util","for","debug","debuglog","test","NODE_DEBUG","format","global","fs","close","fs$close","fd","cb","err","retry","closeSync","fs$closeSync","equal","patch","gracefulify","createReadStream","ReadStream","createWriteStream","WriteStream","fs$readFile","readFile","go$readFile","enqueue","fs$writeFile","writeFile","data","go$writeFile","fs$appendFile","appendFile","go$appendFile","fs$readdir","readdir","go$readdir","files","sort","legStreams","fs$ReadStream","open","that","flags","autoClose","destroy","read","fs$WriteStream","val","configurable","FileReadStream","FileWriteStream","fs$open","go$open","elem","shift","TEST_GRACEFUL_FS_GLOBAL_PATCH","__patched","extendStatics","isWindows","__extends","__proto__","b","__","constructor","platform","navigator","userAgent","indexOf","_schemePattern","_singleSlashStart","_doubleSlashStart","_throwOnMissingSchema","setUriThrowOnMissingScheme","old","_empty","_slash","_regexp","URI","schemeOrData","authority","query","fragment","_strict","_schemeFix","_referenceResolution","_validateUri","_makeFsPath","change","_URI","match","exec","decodeURIComponent","idx","substring","components","skipEncoding","_asFormatted","_formatted","external","_fsPath","_sep","_pathSepMarker","_a","_super","_this","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","pos","encodeURIComponent","escaped","encodeURIComponentMinimal","toLowerCase","encoder","userinfo","fromCharCode","_defineProperties","props","descriptor","writable","protoProps","staticProps","_getPrototypeOf","getPrototypeOf","fromCallback","fn","reject","fromPromise","then","mkdirs","u","mkdirsSync","mkdirp","mkdirpSync","ensureDir","ensureDirSync","__export","Is","require","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","events_1","cancellation_1","CancellationTokenSource","CancellationToken","CancelNotification","ProgressNotification","linkedMap_1","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ProgressType","NullLogger","log","fromString","Off","Messages","Verbose","JSON","ConnectionState","ConnectionError","_createMessageConnection","messageReader","messageWriter","logger","strategy","timer","tracer","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","messageQueue","LinkedMap","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","addMessageToQueue","isRequestMessage","isResponseMessage","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","size","setImmediate","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","traceSendingResponse","write","replyError","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","handler","Date","now","cancellationSource","tokenKey","handlerResult","promise","numberOfParams","token","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","cancel","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","toCancel","response","traceSendingRequest","traceSendingNotification","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","throwIfNotListening","undefinedToNull","param","computeMessageParams","connection","sendNotification","messageParams","notificationMessage","onNotification","onProgress","sendProgress","onUnhandledProgress","sendRequest","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","keys","listen","AlreadyListening","throwIfListening","inspect","verbose","ConnectionStrategy","createMessageConnection","input","output","isMessageWriter","_typeof","assertThisInitialized","self","subClass","superClass","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","RangeError","Uint8Array","encodingOrOffset","allocUnsafe","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","obj","isBuffer","checked","copy","buffer","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","parseInt","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","fill","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","swap16","swap32","swap64","equals","max","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","src","dst","vscode_jsonrpc_1","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","g","window","NULL","onDisposeEmitter","disposingElements","toDispose","checkDisposed","disposed","originalDispose","toRemove","pushAll","DisposableCollection","pathExists","access","catch","pathExistsSync","existsSync","pna","objectKeys","Duplex","inherits","Readable","Writable","readable","allowHalfOpen","onend","_writableState","ended","onEndNT","highWaterMark","_readableState","destroyed","_destroy","isObject","RegExp","mixin","destination","overwrite","LogType","_","Reflect","construct","getOwnPropertyDescriptor","isUndefined","ctor","superCtor","super_","TempCtor","Deferred","ReferenceError","stringArray","every","objectToString","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isRegExp","re","isDate","isError","isFunction","isPrimitive","CR","LF","MessageBuffer","chunk","toAppend","bufferLen","newSize","ceil","current","header","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","onData","fireError","fireClose","headers","tryReadHeaders","contentLength","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","firePartialMessage","waitingTime","eventEmitter","socket","AbstractMessageWriter","errorCount","sending","doWriteMessage","send","handleError","Timeout","clearFn","_clearFn","setInterval","clearInterval","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","clearImmediate","isNativeFunction","_wrapNativeSuper","_cache","Wrapper","endianness","hostname","loadavg","uptime","freemem","MAX_VALUE","totalmem","cpus","release","appVersion","networkInterfaces","getNetworkInterfaces","arch","tmpdir","tmpDir","EOL","homedir","CompletionItemInsertTextRule","IdObject","arg3","rimraf","removeSync","sync","shortcutEvent","isCancellationRequested","Cancelled","_isCancelled","_emitter","_token","MutableToken","cancelled","getPluginId","hostedServicePath","PluginPackage","toPluginUrl","pck","relativePath","PluginScanner","PluginDeployer","PluginDeployerResolver","PluginDeployerDirectoryHandler","PluginDeployerFileHandler","PluginDeployerEntryType","MetadataProcessor","HostedPluginClient","PluginDeployerHandler","HostedPluginServer","pluginServerJsonRpcPath","PluginServer","ServerPluginRunner","PluginHostEnvironmentVariable","v1","v4","uuid","raw","Path","normalizeDrive","firstIndex","separator","lastIndex","isRoot","isDrive","root","computeRoot","extIndex","segment","endsWith","_dir","computeDir","hasDir","startsWith","isEqualOrParent","relativity","relativeStr","pathArray","resultArray","_setPrototypeOf","superPropBase","_get","receiver","desc","LocationLink","TextDocumentEdit","CreateFile","RenameFile","DeleteFile","objectLiteral","one","two","three","four","defined","typedArray","startLine","startCharacter","endCharacter","Deprecated","_i","del","textDocument","VersionedTextDocumentIdentifier","ignoreIfExists","recursive","ignoreIfNotExists","changes","documentChanges","TextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","InsertTextFormat","CompletionItemTag","MarkedString","SymbolTag","CodeActionContext","FormattingOptions","SelectionRange","TextEditChangeImpl","clear","WorkspaceChange","workspaceEdit","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","checkDocumentChanges","languageId","PlainText","Markdown","fromPlainText","plainText","deprecated","diagnostics","only","commandOrEdit","isPreferred","tabSize","insertSpaces","parent","TextDocument","content","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","document","sortedEdits","mergeSort","left","right","leftIdx","rightIdx","diff","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","ch","low","high","mid","lineOffset","nextLineOffset","check","random_1","lut","Random","getRandomValues","nativeSep","_posixBadPath","_winBadPath","streql","getRoot","toOSPath","wantsBackslash","win","_isNormal","skip","prev_start","prev_part","part","ignoreCase","sepOffset","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","doEqualsIgnoreCase","stopAt","codeA","codeB","abs","haystack","needle","candidateLength","appendMarkdown","appendCodeblock","ReflectOwnKeys","R","ReflectApply","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","EventEmitter","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","_getMaxListeners","_addListener","prepend","events","existing","warning","newListener","warned","w","onceWrapper","fired","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","setMaxListeners","getMaxListeners","doError","er","originalListener","spliceOne","rawListeners","eventNames","Stream","Transform","PassThrough","copyProps","SafeBuffer","CorkedRequest","next","finish","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","WritableState","internalUtil","deprecate","OurUint8Array","realHasInstance","destroyImpl","nop","stream","isDuplex","objectMode","writableObjectMode","hwm","writableHwm","writableHighWaterMark","defaultHwm","finalCalled","needDrain","ending","finished","noDecode","decodeStrings","defaultEncoding","writing","corked","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","errorEmitted","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","_write","writev","_writev","final","_final","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","prefinish","getBuffer","hasInstance","pipe","_uint8ArrayToBuffer","writeAfterEnd","valid","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","_undestroy","undestroy","jsonFile","readJson","readJsonSync","readFileSync","writeJson","writeJsonSync","writeFileSync","Schemes","FILE","UNTITLED","HTTP","HTTPS","MAILTO","DATA","IN_MEMORY","VSCODE","INTERNAL","COMMAND","ObjectIdentifier","of","RPCProtocol","isMain","ProxyIdentifier","identifier","remoteHostID","locals","proxies","lastMessageId","cancellationTokenSources","pendingRPCReplies","multiplexor","RPCMultiplexer","receiveOneMessage","values","getProxy","proxyId","proxy","createProxy","remoteCall","myArgs","Proxy","methodName","cancellationToken","callId","MessageFactory","messageToSendHostId","request","rawmsg","ObjectsTransferrer","reviver","setHostID","hostID","receiveRequest","receiveReply","receiveReplyErr","receiveCancel","cancellationTokenSource","tokenSource","invokeHandler","replyOK","replyErr","pendingReply","$isError","stack","doInvokeHandler","actor","RPCProtocolImpl","SerializedObjectType","onMessage","remoteHostId","sendAccumulatedBound","sendAccumulated","messagesToSend","tmp","req","prefix","rpcId","replacer","transformErrorForSerialization","$type","THEIA_URI","serializedValue","THEIA_RANGE","VSCODE_URI","isSerializedObject","stacktrace","codeUri","locations","withPath","withScheme","withAuthority","withoutAuthority","withoutPath","withQuery","withoutQuery","withFragment","withoutFragment","normalizePath","_path","getDistinctParents","uris","some","otherUri","createClientPipeTransport","createServerPipeTransport","generateRandomPipeName","createClientSocketTransport","createServerSocketTransport","callHierarchy","Proposed","CallHierarchyPrepareRequest","CallHierarchyIncomingCallsRequest","resultType","CallHierarchyOutgoingCallsRequest","createProtocolConnection","reader","writer","arrayWithoutHoles","iterableToArray","nonIterableSpread","what","replaceRegex","processed","resolved","absolute","removeDuplicateSeparators","goodComponents","fromSegments","toSegments","upCount","downSegments","rv","isOSX","OS","Type","Windows","OSX","Linux","first","rest","pluginId","isPluginGlobalData","storage","cache","getPerPluginData","storageDataChangedEvent","setPerPluginData","Memento","storageDataChangedEmitter","initGlobalData","initWorkspaceData","globalDataCache","workspaceDataCache","isGlobal","$set","$updatePluginsWorkspaceData","workspaceData","KeyValueStorageProxy","api","exists","filename","bytesRead","bytesWritten","ReadableState","EElistenerCount","debugUtil","StringDecoder","BufferList","kProxyEvents","readableObjectMode","readableHwm","readableHighWaterMark","pipes","pipesCount","flowing","endEmitted","reading","needReadable","emittedReadable","readableListening","resumeScheduled","awaitDrain","readingMore","decoder","_read","readableAddChunk","addToFront","skipChunkCheck","emitReadable","onEofChunk","chunkInvalid","addChunk","maybeReadMore","needMoreData","isPaused","setEncoding","enc","howMuchToRead","head","computeNewHighWaterMark","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","hasStrings","nb","tail","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","nOrig","doRead","dest","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onclose","onfinish","ondrain","onerror","ondata","cleanedUp","pipeOnDrain","increasedAwaitDrain","pause","resume","dests","ev","wrap","paused","_fromList","emitErrorNT","readableDestroyed","writableDestroyed","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","total","utf8CheckIncomplete","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","transform","_transform","flush","_flush","done","_this2","err2","getOwnPropertyDescriptors","descriptors","formatRegExp","objects","noDeprecation","throwDeprecation","traceDeprecation","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","style","styles","recurseTimes","primitive","simple","formatPrimitive","visibleKeys","arrayToHash","formatError","braces","toUTCString","formatProperty","formatArray","reduce","prev","cur","numLinesEst","reduceToSingleString","ar","pad","toUpperCase","pid","months","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","newReason","promisify","original","promiseResolve","promiseReject","defineProperties","custom","callbackify","callbackified","maybeCb","rej","objectAssign","hasOwn","pSlice","functionsHaveNames","pToString","arrbuf","DataView","assert","ok","regex","getName","truncate","rawname","fail","expected","operator","stackStartFunction","AssertionError","_deepEqual","strict","memos","getTime","multiline","Float32Array","Float64Array","actualIndex","actualVisitedObjects","aIsArgs","isArguments","bIsArgs","ka","kb","objEquiv","expectedException","isPrototypeOf","_throws","shouldThrow","block","_tryBlock","userProvidedMessage","isUnexpectedException","generatedMessage","getMessage","fn_name","next_line","notEqual","deepEqual","deepStrictEqual","notDeepEqual","notDeepStrictEqual","strictEqual","notStrictEqual","throws","doesNotThrow","ifError","utimes","basePath","currentPath","targetPath","clobber","errorOnExist","dereference","preserveTimestamps","started","running","errored","startCopy","doneOne","stat","lstat","stats","mtime","atime","isDirectory","isFile","isCharacterDevice","isBlockDevice","isWritable","copyFile","rmFile","onFile","isSymbolicLink","link","readlink","makeLink","targetDest","checkLink","onLink","mkdir","chmod","copyDir","mkDir","getStats","readStream","writeStream","utimesMillis","unlink","linkPath","symlink","skipped","getRootPath","INVALID_PATH_CHARS","invalidWin32Path","copySync","KnownCommands","mappings","createConversionFunction","fromPositionToP","MONACO_CONVERSION_IDENTITY","argStack","cloneAndChange","fromPosition","fromLocation","monacoArgsConverter","conversions","conversion","toDo","mapped","promises","_modeId2WordDefinition","getWordDefinitionFor","modeId","wordDefinition","lines","versionId","isDirty","textLines","dirty","onEvents","lineStarts","acceptDeleteRange","acceptInsertText","acceptIsDirty","acceptLanguageId","langId","_document","save","getTextInRange","CRLF","lineAt","lineOrPos","validateRange","ran","validatePosition","getWordRangeAtPosition","regexp","insertText","insertLines","setLineText","newLengths","Uint32Array","insertValues","removeValues","lineIndex","newValue","changeValue","$trySaveDocument","isSingleLine","lineEnding","startLineIndex","endLineIndex","resultLines","hasChanged","maxCharacter","lineOrPosition","firstNonWhitespaceCharacterIndex","rangeIncludingLineBreak","isEmptyOrWhitespace","ensureLineStarts","getAccumulatedValue","eolLength","linesLength","lineStartValues","PrefixSumComputer","getIndexOf","lineLength","remainder","_position","regExpLeadsToEndlessLoop","wordAtText","getWordAtText","ensureValidWordDefinition","DocumentDataExt","msCrypto","rnds8","rnds","random","byteToHex","bth","PluginIconPath","asString","absolutePath","normalizedPath","toUrl","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","readMessage","forward","PluginConnection","PluginWebSocketChannel","argsTag","funcTag","genTag","mapTag","setTag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","freeExports","nodeType","freeModule","moduleExports","addMapEntry","pair","addSetEntry","arrayReduce","iteratee","accumulator","initAccum","isHostObject","mapToArray","overArg","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","reIsNative","getPrototype","objectCreate","propertyIsEnumerable","nativeGetSymbols","nativeIsBuffer","nativeKeys","getNative","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","ListCache","MapCache","Stack","__data__","arrayLikeKeys","inherited","isObjectLike","isArrayLike","isArrayLikeObject","baseTimes","skipIndexes","isIndex","assignValue","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","isArr","initCloneArray","copyArray","tag","getTag","isFunc","cloneBuffer","isPrototype","proto","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","cloneDataView","cloneTypedArray","cloneMap","cloneRegExp","cloneSet","initCloneByTag","stacked","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","baseIsNative","arrayBuffer","getMapData","getValue","pairs","LARGE_ARRAY_SIZE","ctorString","isLength","baseKeys","pluginsApiImpl","pluginsModulesNames","postMessage","addEventListener","defaultApi","envExt","WorkerEnvExtImpl","storageProxy","editorsAndDocuments","EditorsAndDocumentsExtImpl","messageRegistryExt","MessageRegistryExt","workspaceExt","WorkspaceExtImpl","preferenceRegistryExt","PreferenceRegistryExtImpl","debugExt","createDebugExtStub","clipboardExt","ClipboardExt","webviewExt","WebviewsExtImpl","pluginManager","PluginManagerExtImpl","loadPlugin","isElectron","importScripts","frontendModuleName","rawPluginData","contextPath","foreign","plg","pluginModel","pluginLifecycle","frontend","frontendInitPath","apiImpl","apiFactory","backend","initExtApi","extApi","frontendExtApi","initPath","initVariable","initFunction","createAPIFactory","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","attachTo","runIfPresent","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","createElement","documentElement","script","onreadystatechange","removeChild","appendChild","attachEvent","arr2","iter","isNativeReflectConstruct","sham","_construct","Parent","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","num","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","Touch","First","Last","_map","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","path_1","os_1","crypto_1","net_1","randomSuffix","randomBytes","pipeName","connectResolve","connected","_reject","server","createServer","onConnected","createConnection","protocol_implementation_1","ImplementationRequest","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","ConfigurationRequest","protocol_colorProvider_1","DocumentColorRequest","ColorPresentationRequest","protocol_foldingRange_1","FoldingRangeRequest","protocol_declaration_1","DeclarationRequest","protocol_selectionRange_1","SelectionRangeRequest","DocumentFilter","DocumentSelector","protocol_progress_1","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","RegistrationRequest","UnregistrationRequest","ResourceOperationKind","Create","Rename","Delete","FailureHandlingKind","Abort","Transactional","TextOnlyTransactional","Undo","StaticRegistrationOptions","hasId","TextDocumentRegistrationOptions","documentSelector","WorkDoneProgressOptions","workDoneProgress","hasWorkDoneProgress","InitializeRequest","InitializeError","unknownProtocolVersion","InitializedNotification","ShutdownRequest","ExitNotification","DidChangeConfigurationNotification","MessageType","Log","ShowMessageNotification","ShowMessageRequest","LogMessageNotification","TelemetryEventNotification","TextDocumentSyncKind","Full","Incremental","DidOpenTextDocumentNotification","DidChangeTextDocumentNotification","DidCloseTextDocumentNotification","DidSaveTextDocumentNotification","Manual","AfterDelay","FocusOut","WillSaveTextDocumentNotification","WillSaveTextDocumentWaitUntilRequest","DidChangeWatchedFilesNotification","Created","Changed","Deleted","WatchKind","Change","PublishDiagnosticsNotification","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","CompletionRequest","CompletionResolveRequest","HoverRequest","ContentChange","SignatureHelpRequest","DefinitionRequest","ReferencesRequest","DocumentHighlightRequest","DocumentSymbolRequest","CodeActionRequest","WorkspaceSymbolRequest","CodeLensRequest","CodeLensResolveRequest","DocumentLinkRequest","DocumentLinkResolveRequest","DocumentFormattingRequest","DocumentRangeFormattingRequest","DocumentOnTypeFormattingRequest","RenameRequest","PrepareRenameRequest","ExecuteCommandRequest","ApplyWorkspaceEditRequest","randomFillSync","pluginContext","stopFn","preferencesManager","webview","registry","activations","loadedPlugins","activatedPlugins","pluginActivationPromises","pluginContextsMap","onDidChangeEmitter","messageRegistryProxy","fireOnDidChange","$stop","stopPlugin","stopAll","subscriptions","$init","globalState","workspaceState","setQueryParameters","queryParams","setLanguage","setShell","shell","preferences","$start","plugins","foreignPlugins","registerPlugin","configStorage","$activateByEvent","activationEvents","activationEvent","loadTests","activation","setActivation","unsupportedActivationEvents","SUPPORTED_ACTIVATION_EVENTS","visited","loading","extensionDependencies","dependencyId","dependency","depId","$showMessage","pluginMain","startPlugin","$updateStoragePath","storagePath","defaultGlobalStorage","globalStorage","os","asAbsolutePath","logPath","hostLogPath","hostStoragePath","hostGlobalStoragePath","globalStoragePath","extensionPath","pluginExport","ActivatedPlugin","getAllPlugins","getPluginExport","activePlugin","getPluginById","isRunning","isActive","activatePlugin","deferred","origCwd","GRACEFUL_FS_PLATFORM","constants","lchmod","O_WRONLY","O_SYMLINK","fchmod","lchmodSync","openSync","threw","fchmodSync","patchLchmod","lutimes","at","mt","futimes","er2","lutimesSync","futimesSync","_b","_c","patchLutimes","chown","chownFix","fchown","lchown","chmodFix","chownSync","chownFixSync","fchownSync","lchownSync","chmodSync","chmodFixSync","statFix","fstat","statSync","statFixSync","fstatSync","lstatSync","gid","rename","fs$rename","backoff","CB","stater","st","orig","chownErOk","getuid","fs$read","callback_","eagCounter","readSync","fs$readSync","bufferSize","busy","_queue","_open","EE","_isStdio","didOnEnd","cleanup","_classCallCheck","config","localStorage","propIsEnumerable","toObject","test1","test2","test3","letter","shouldUseNative","symbols","ncp","dirExists","hasMillisRes","tmpfile","hasMillisResSync","timeRemoveMillis","futimesErr","closeErr","o777","made","errInval","xfs","mkdirSync","err0","err1","copyFileSync","destFolder","destFolderExists","performCopy","readdirSync","srcPath","readlinkSync","symlinkSync","_buff","srcFile","destFile","unlinkSync","fdr","fdw","writeSync","defaults","maxBusyTries","busyTries","rimraf_","fixWinEPERM","rmdir","er3","fixWinEPERMSync","rmdirSync","originalEr","errState","rmkids","rimrafSync","retries","rmkidsSync","outputJson","outputJsonSync","outputJSON","outputJSONSync","writeJSON","writeJSONSync","readJSON","readJSONSync","_fs","spaces","stripBom","jsonfile","itDoes","moveAcrossDevice","moveDirAcrossDevice","ins","outs","moveFileAcrossDevice","startNcp","move","baseDir","destBasename","isSrcSubdir","itIs","moveSyncAcrossDevice","tryCopySync","moveDirSyncAcrossDevice","moveFileSyncAcrossDevice","moveSync","accessSync","renameSync","linkSync","tryRenameSync","emptyDir","deleteItem","emptyDirSync","emptydirSync","emptydir","createFileSync","ensureFile","ensureFileSync","createLink","createLinkSync","ensureLink","ensureLinkSync","createSymlink","createSymlinkSync","ensureSymlink","ensureSymlinkSync","makeFile","srcpath","dstpath","destinationExists","_mkdirs","_symlinkPaths","symlinkPaths","symlinkPathsSync","_symlinkType","symlinkType","symlinkTypeSync","toDst","toCwd","dstdir","relativeToDst","outputFile","outputFileSync","editorsAndDocumentsExt","clipboard","commandRegistry","CommandRegistryImpl","quickOpenExt","QuickOpenExtImpl","dialogsExt","DialogsExtImpl","windowStateExt","WindowStateExtImpl","notificationExt","NotificationExtImpl","editors","TextEditorsExtImpl","DocumentsExtImpl","statusBarMessageRegistryExt","StatusBarMessageRegistryExt","terminalExt","TerminalServiceExtImpl","outputChannelRegistryExt","OutputChannelRegistryExtImpl","languagesExt","LanguagesExtImpl","treeViewsExt","TreeViewsExtImpl","tasksExt","TasksExtImpl","connectionExt","ConnectionExtImpl","languagesContributionExt","LanguagesContributionExtImpl","fileSystemExt","FileSystemExtImpl","scmExt","ScmExtImpl","decorationsExt","DecorationsExtImpl","commands","registerCommand","executeCommand","commandId","registerTextEditorCommand","activeTextEditor","getActiveEditor","registerHandler","getKeyBinding","getCommands","filterInternal","registerDiffInformationCommand","onDidChangeActiveTerminal","onDidCloseTerminal","onDidOpenTerminal","activeTerminal","getVisibleTextEditors","terminals","onDidChangeActiveTextEditor","onDidChangeVisibleTextEditors","onDidChangeTextEditorSelection","onDidChangeTextEditorOptions","onDidChangeTextEditorViewColumn","onDidChangeTextEditorVisibleRanges","showTextDocument","documentArg","optionsArg","optionsAny","preview","documentOptions","showDocument","textEditor","find","editor","showQuickPick","coreEvent","coreCancellationToken","createQuickPick","showWorkspaceFolderPick","pickWorkspaceFolder","showInformationMessage","showMessage","showWarningMessage","showErrorMessage","showOpenDialog","showSaveDialog","showUploadDialog","setStatusBarMessage","showInputBox","showInput","createStatusBarItem","alignment","priority","createOutputChannel","pluginToPluginInfo","createWebviewPanel","viewType","createWebview","registerWebviewPanelSerializer","serializer","getWindowState","onDidChangeWindowState","createTerminal","nameOrOptions","shellPath","createTextEditorDecorationType","registerTreeDataProvider","viewId","treeDataProvider","createTreeView","withProgress","registerDecorationProvider","provider","registerUriHandler","createInputBox","workspace","rootPath","workspaceFolders","onDidChangeWorkspaceFolders","getAllDocumentData","onDidChangeTextDocument","onDidChangeDocument","onDidCloseTextDocument","onDidRemoveDocument","onDidOpenTextDocument","onDidAddDocument","onWillSaveTextDocument","onDidSaveTextDocument","getConfiguration","section","onDidChangeConfiguration","openTextDocument","uriOrFileNameOrOptions","createDocumentData","openDocument","createFileSystemWatcher","globPattern","ignoreCreateEvents","ignoreChangeEvents","ignoreDeleteEvents","findFiles","include","exclude","maxResults","saveAll","includeUntitled","applyEdit","applyWorkspaceEdit","registerTextDocumentContentProvider","registerFileSystemProvider","getWorkspaceFolder","asRelativePath","pathOrUri","includeWorkspace","getRelativePath","updateWorkspaceFolders","deleteCount","workspaceFoldersToAdd","registerTaskProvider","tasks","onDidRenameFile","onWillRenameFile","appName","appRoot","machineId","sessionId","uriScheme","getEnvVariable","envVarName","getQueryParameter","queryParamName","getQueryParameters","getClientOperatingSystem","openExternal","openUri","asExternalUri","languageServer","registerLanguageServerProvider","languageServerInfo","stop","languages","getLanguages","setTextDocumentLanguage","changeLanguage","score","onDidChangeDiagnostics","getDiagnostics","createDiagnosticCollection","setLanguageConfiguration","configuration","registerCompletionItemProvider","triggerCharacters","registerDefinitionProvider","registerDeclarationProvider","registerSignatureHelpProvider","metadata","retriggerCharacters","registerTypeDefinitionProvider","registerImplementationProvider","registerHoverProvider","registerDocumentHighlightProvider","registerWorkspaceSymbolProvider","registerDocumentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","firstTriggerCharacter","moreTriggerCharacters","registerDocumentLinkProvider","registerLinkProvider","registerCodeActionsProvider","registerCodeLensProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerColorProvider","registerFoldingRangeProvider","registerRenameProvider","Plugin","getPlugin","onDidChange","debuggersContributions","contributes","debuggers","assistedInject","registerDebuggersContributions","activeDebugSession","activeDebugConsole","breakpoints","onDidChangeActiveDebugSession","onDidStartDebugSession","onDidReceiveDebugSessionCustomEvent","onDidTerminateDebugSession","onDidChangeBreakpoints","registerDebugAdapterDescriptorFactory","debugType","factory","registerDebugConfigurationProvider","registerDebugAdapterTrackerFactory","startDebugging","nameOrConfiguration","addBreakpoints","removeBreakpoints","fetchTasks","executeTask","taskExecutions","onDidStartTask","onDidEndTask","onDidStartTaskProcess","onDidEndTaskProcess","scm","inputBox","getLastInputBox","createSourceControl","rootUri","comment","createCommentController","createCommentThread","commentId","comments","Uri","TextEditorCursorStyle","TreeItem2","packageJSON","pluginType","activate","handlers","argumentProcessors","commandsConverter","CommandsConverter","$registerCommand","$unregisterCommand","$registerHandler","$unregisterHandler","$executeCommand","executeLocalCommand","mappedId","mappedArgs","$getKeyBinding","processArgument","filterUnderscoreCommands","$getCommands","registerArgumentProcessor","commandsMap","safeCommandId","isSafeCommandRegistered","toSafeCommand","toInternalCommand","executeSafeCommand","_hasOwnProperty","changer","_cloneAndChange","isUndefinedOrNull","changed","r1","r2","i2","createdQuickInputs","currentQuickInputs","$onItemSelected","selectItemHandler","$validateInput","validateInputHandler","promiseOrItems","itemPromise","widgetPromise","$show","canSelectMany","canPickMany","placeHolder","autoFocus","autoFocusFirstEntry","matchOnDescription","matchOnDetail","ignoreFocusLost","ignoreFocusOut","anyPromise","quickPickItemToPickOpenItem","onDidSelectItem","$setItems","h","$setError","hookCancellationToken","showCustomQuickPick","$showCustomQuickPick","newQuickInput","QuickPickExt","validateInput","$input","hide","$hide","$showInputBox","InputBoxExt","$acceptOnDidAccept","createdQuickInputNumber","currentQuickInput","_fireAccept","$acceptDidChangeValue","changedValue","_fireChangedValue","$acceptOnDidHide","_fireHide","$acceptOnDidTriggerButton","btn","thisQuickInput","_fireButtonTrigger","btnFromIndex","buttons","$acceptDidChangeActive","changedItems","_fireChangedActiveItem","$acceptDidChangeSelection","findMatchingItem","_fireChangedSelection","quickOpen","quickOpenMain","step","totalSteps","visible","disposableCollection","onDidAcceptEmitter","onDidChangeValueEmitter","onDidHideEmitter","onDidTriggerButtonEmitter","_title","_step","_totalSteps","_enabled","_busy","_ignoreFocusOut","show","$setQuickInputChanged","convertURL","QuickInputExt","quickInputIndex","password","_buttons","_password","_placeholder","placeholder","_prompt","prompt","_validationMessage","validationMessage","$refreshQuickInput","_items","_activeItems","onDidChangeActiveEmitter","onDidChangeSelectionEmitter","activeItems","selections","selectedItems","statusMessage","StatusBarMessage","timeoutOrThenable","setMessage","StatusBarItemImpl","statusBar","_messages","_item","Left","MIN_VALUE","_update","_proxy","nextId","_alignment","_priority","_text","_tooltip","_color","_command","_isVisible","_timeoutHandle","$dispose","$setMessage","getColor","colorId","VS_COLORS","ID_PREFIX","windowStateChangedEmitter","windowStateCached","focused","$onWindowStateChanged","$openUri","$asExternalUri","_onDidChangeTextEditorSelection","_onDidChangeTextEditorOptions","_onDidChangeTextEditorVisibleRanges","_onDidChangeTextEditorViewColumn","_onDidChangeActiveTextEditor","_onDidChangeVisibleTextEditors","$acceptEditorPropertiesChanged","getEditor","acceptOptions","Converters","toSelection","acceptSelections","visibleRanges","acceptVisibleRanges","$acceptEditorPositionData","toViewColumn","acceptViewColumn","activeEditor","allEditors","TextEditorDecorationType","dto","fromWorkspaceEdit","$tryApplyWorkspaceEdit","$saveAll","Keys","$registerTextEditorDecorationType","$removeTextEditorDecorationType","IdGenerator","lastId","_onDidAddDocument","_onDidRemoveDocument","_onDidChangeDocument","_onDidSaveTextDocument","_onWillSaveTextDocument","loadingDocuments","onDidAddDocuments","onDidRemoveDocuments","$acceptModelModeChanged","startUrl","oldModeId","newModeId","uriString","$acceptModelSaved","strUrl","$acceptDirtyStateChanged","$acceptModelWillSave","saveTimeout","operations","didTimeout","didTimeoutHandle","fireEvent","documentData","fireTextDocumentWillSaveEvent","accept","operation","allEdits","Converter","contentChanges","$acceptModelChanged","rangeOffset","rangeLength","allDocuments","getDocumentData","loadingDocument","loadDocument","cached","$tryOpenDocument","$tryShowDocument","$tryCreateDocument","setWordDefinitionFor","toUint32","PrefixSumIndexOfResult","prefixSum","prefixSumValidIndex","Int32Array","getCount","insertIndex","oldValues","oldPrefixSum","insertValuesLen","startIndex","cnt","maxCnt","getTotalValue","_getAccumulatedValue","accumulatedValue","midStop","midStart","USUAL_WORD_SEPARATORS","DEFAULT_WORD_REGEXP","allowInWords","createWordRegExp","textOffset","word","getWordAtPosSlow","getWordAtPosFast","cursorStyle","Line","Block","Underline","LineThin","BlockOutline","UnderlineThin","pluginInfo","OutputChannelImpl","$append","appendLine","$clear","$reveal","$close","_terminals","onDidCloseTerminalEmitter","onDidOpenTerminalEmitter","onDidChangeActiveTerminalEmitter","$createTerminal","obtainTerminal","terminal","TerminalExtImpl","$terminalCreated","$terminalNameChanged","$terminalOpened","processId","deferredProcessId","$terminalClosed","activeTerminalId","$currentTerminalChanged","sendText","addNewLine","$sendText","adaptersMap","Diagnostics","$getLanguages","$changeLanguage","wordPattern","nextCallId","brackets","onEnterRules","serializeEnterRules","serializeRegExp","indentationRules","serializeIndentation","$setLanguageConfiguration","createDisposable","$unregister","addNewAdapter","adapter","withAdapter","transformDocumentSelector","sel","doTransformDocumentSelector","$serialized","$provideCompletionItems","CompletionAdapter","provideCompletionItems","$resolveCompletionItem","completion","resolveCompletionItem","$releaseCompletionItems","releaseCompletionItems","$registerCompletionSupport","hasResolveSupport","$provideDefinition","DefinitionAdapter","provideDefinition","$registerDefinitionProvider","$provideDeclaration","DeclarationAdapter","provideDeclaration","$registerDeclarationProvider","$provideSignatureHelp","SignatureHelpAdapter","provideSignatureHelp","$releaseSignatureHelp","releaseSignatureHelp","$registerSignatureHelpProvider","$provideImplementation","ImplementationAdapter","provideImplementation","$registerImplementationProvider","$provideTypeDefinition","TypeDefinitionAdapter","provideTypeDefinition","$registerTypeDefinitionProvider","HoverAdapter","$registerHoverProvider","$provideHover","provideHover","DocumentHighlightAdapter","$registerDocumentHighlightProvider","$provideDocumentHighlights","provideDocumentHighlights","WorkspaceSymbolAdapter","$registerWorkspaceSymbolProvider","$provideWorkspaceSymbols","provideWorkspaceSymbols","$resolveWorkspaceSymbol","resolveWorkspaceSymbol","DocumentFormattingAdapter","$registerDocumentFormattingSupport","$provideDocumentFormattingEdits","provideDocumentFormattingEdits","RangeFormattingAdapter","$registerRangeFormattingProvider","$provideDocumentRangeFormattingEdits","provideDocumentRangeFormattingEdits","OnTypeFormattingAdapter","$registerOnTypeFormattingProvider","$provideOnTypeFormattingEdits","provideOnTypeFormattingEdits","$provideDocumentLinks","LinkProviderAdapter","provideLinks","$resolveDocumentLink","resolveLink","$registerDocumentLinkProvider","CodeActionAdapter","$registerQuickFixProvider","providedCodeActionKinds","$provideCodeActions","rangeOrSelection","provideCodeAction","CodeLensAdapter","eventHandle","onDidChangeCodeLenses","$registerCodeLensSupport","subscription","$emitCodeLensEvent","$provideCodeLenses","provideCodeLenses","$resolveCodeLens","resolveCodeLens","$provideReferences","ReferenceAdapter","provideReferences","$registerReferenceProvider","OutlineAdapter","$registerOutlineSupport","$provideDocumentSymbols","provideDocumentSymbols","ColorProviderAdapter","$registerDocumentColorProvider","$provideDocumentColors","provideColors","$provideColorPresentations","colorInfo","provideColorPresentations","FoldingProviderAdapter","$registerFoldingRangeProvider","$provideFoldingRange","provideFoldingRanges","RenameAdapter","$registerRenameProvider","supportsResolving","$provideRenameEdits","newName","provideRenameEdits","$resolveRenameLocation","resolveRenameLocation","rules","action","beforeText","afterText","increaseIndentPattern","decreaseIndentPattern","indentNextLinePattern","unIndentedLinePattern","candidateUri","candidateLanguage","candidateIsSynchronized","hasAccessToAllModels","default","ALL_FORWARD_SLASHES","starsToRegExp","starCount","NO_PATH_REGEX","splitGlobAware","splitChar","segments","inBraces","inBrackets","curVal","T1","T2","T3","T3_2","T4","T5","CACHE","FALSE","parsePattern","patternKey","trimForExclusions","parsedPattern","wrapRelativePattern","strings","originalPattern","slashBase","backslashBase","basenames","patterns","allBasenames","trivia2","parsedPatterns","aggregateBasenameMatches","withBasenames","allPaths","trivia3","trivia4and5","parseRegExp","regEx","braceVal","bracketVal","braceRegExp","escapeRegExpCharacters","toRegExp","matchPathEnds","nativePath","nativePathEnd","isRelativePattern","resultPattern","expression","when","hasSibling","matched","requiresSiblings","parseExpressionPattern","resultExpression","parsedExpression","listToMap","basenamePatterns","aggregate","aggregatedPatterns","siblingsFn","siblings","patternOrExpression","delegate","cacheId","toPosition","completions","incomplete","wordRangeBeforePos","suggestion","convertCompletionItem","parentId","resolvedItem","newCompletion","defaultRange","insertTextRules","keepWhitespace","KeepWhitespace","InsertAsSnippet","fromCompletionItemKind","filterText","sortText","preselect","converter","commitCharacters","maxCountPerFile","onDidChangeDiagnosticsEmitter","collectionName","diagnosticsLimitPerResource","onDisposeCallback","ensureNotDisposed","setDiagnosticsForUri","setDiagnostics","fireDiagnosticChangeEvent","sendChangesToEditor","delta","existedDiagnostics","$changeDiagnostics","getAllResourcesUris","$clearDiagnostics","getDiagnosticsByUri","setOnDisposeCallback","resourcesUris","toUrisArray","markers","uriMarkers","uriDiagnostics","DiagnosticCollection","DIAGNOSTICS_PRIORITY","convertDiagnosticToMarkerData","lastMarker","nextUri","diagnosticsChangedEmitter","diagnosticCollections","getAllDiagnisticsForResource","getAllDiagnostics","GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX","getNextId","diagnosticCollection","MAX_DIAGNOSTICS_PER_FILE","urisIndexes","nextIndex","diagnosticsCollection","uriIndex","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","node","clockseq","seedBytes","nsecs","dt","tl","tmh","ii","idSequence","zeroBasedPosition","pluginHelpContext","reviveContext","activeSignatureHelp","revivedSignatureHelp","saved","fromHover","documentHighlights","isDocumentHighlightArray","highlights","highlight","fromDocumentHighlight","isLocationArray","isDefinitionLinkArray","definitionLinks","fromDefinitionLink","_isSelection","allDiagnostics","codeActionContext","provideCodeActions","commandsOrActions","_isCommand","smth","provideDocumentLinks","links","fromDocumentLink","resolveDocumentLink","lenses","lensSymbol","isResolved","newLens","BAD_CMD","asDocumentSymbolTree","parentStack","containsRange","equalsRange","otherRange","reference","workspaceSymbols","newSymbols","sym","convertedSymbol","fromSymbolInformation","theiaSymbol","toSymbolInformation","workspaceSymbol","converted","fromFoldingRange","provideDocumentColors","fromColor","toColor","fromColorPresentation","prepareRename","rejectReason","asMessage","rangeOrLocation","optionsMain","openLabel","defaultUri","canSelectFiles","canSelectFolders","filters","$showOpenDialog","saveLabel","$showSaveDialog","$showUploadDialog","progress","$updateProgress","mapLocation","$startProgress","$stopProgress","pluginLocation","Notification","SourceControl","Window","treeViews","treeViewId","treeItemId","treeView","getTreeItem","TreeViewExtImpl","onDidExpandElement","onDidCollapseElement","selectedElements","onDidChangeSelection","onDidChangeVisibility","reveal","selectionOptions","$getChildren","getChildren","$setExpanded","expanded","onExpanded","onCollapsed","$setSelection","treeItemIds","setSelection","$setVisible","isVisible","setVisible","onDidExpandElementEmitter","onDidCollapseElementEmitter","onDidChangeVisibilityEmitter","nodes","clearAll","selectedItemIds","_visible","$registerTreeDataProvider","$unregisterTreeDataProvider","onDidChangeTreeData","$refresh","el","elementId","parentNode","clearChildren","treeItem","treeItemLabel","toDisposeElement","icon","themeIconId","iconUrl","treeViewItem","contextValue","child","cachedElement","toDelete","doSetSelection","selectedItemIts","ExtPluginApiProvider","MainPluginApiProvider","serverConnections","$registerLanguageServerProvider","ensureConnection","clientConnection","childProcess","spawnProcess","serverConnection","spawn","stdin","kill","WebSocketMessageReader","WebSocketMessageWriter","webSocket","onConnection","ConsoleLogger","onopen","toSocket","createWebSocketConnection","connections","$sendMessage","$createConnection","doEnsureConnection","$deleteConnection","doCreateConnection","PluginMessageReader","PluginMessageWriter","es5ClassCompat","executions","onDidExecuteTask","onDidTerminateTask","onDidExecuteTaskProcess","onDidTerminateTaskProcess","fetchTaskExecutions","$onDidStartTask","getTaskExecution","$onDidEndTask","$onDidStartTaskProcess","executionDto","$onDidEndTaskProcess","exitCode","taskId","TaskProviderAdapter","$registerTaskProvider","taskVersion","$fetchTasks","toTask","fromTask","$executeTask","$provideTasks","provideTasks","$resolveTask","resolveTask","$taskExecutions","executionId","terminate","$terminateTask","usedSchemes","fsProviders","handlePool","$registerFileSystemProvider","$unregisterProvider","checkProviderExists","$readFile","$writeFile","sourceControlMap","sourceControlsByPluginMap","sourceControl","sourceControlHandle","resourceGroupHandle","resourceGroup","getResourceGroup","resourceStateHandle","getResourceState","SourceControlImpl","sourceControls","$executeResourceCommand","groupHandle","resourceHandle","group","executeResourceCommand","$provideOriginalResource","quickDiffProvider","provideOriginalResource","$updateInputBox","$updateValue","$setSourceControlSelection","selected","$setInputBoxValue","$setInputBoxPlaceholder","_label","_rootUri","resourceGroupsMap","_selected","toDisposeOnAcceptInputCommand","toDisposeOnStatusBarCommands","_inputBox","InputBoxImpl","$registerSourceControl","$unregisterSourceControl","createResourceGroup","sourceControlResourceGroup","SourceControlResourceGroupImpl","_count","$updateSourceControl","_quickDiffProvider","hasQuickDiffProvider","_commitTemplate","commitTemplate","_acceptInputCommand","acceptInputCommand","_statusBarCommands","statusBarCommands","safeStatusBarCommands","statusBarCommand","_hideWhenEmpty","_resourceStates","resourceStatesMap","$registerGroup","$updateGroupLabel","hideWhenEmpty","$updateGroup","resources","$updateResourceState","resourceState","resourceCommand","decorations","strikeThrough","faded","theme","stateHandle","$unregisterGroup","providersMap","PROVIDER_ID","onDidChangeDecorations","argument","$fireDidChangeDecorations","providerMain","provideDecoration","CancelationTokenImpl","ob","bubble","$registerDecorationProvider","$provideDecoration","PreferenceScope","lookUp","tree","_onDidChangeConfiguration","OVERRIDE_PROPERTY","OVERRIDE_PROPERTY_PATTERN","_preferences","$acceptConfigurationChanged","eventData","toConfigurationChangeEvent","extensionId","toReadonlyValue","accessor","clonedTarget","cloneTarget","cloneDeep","targ","deleteProperty","descr","resourceStr","$updateConfigurationOption","$removeConfigurationOption","configInspect","user","globalValue","workspaceValue","workspaceFolder","workspaceFolderValue","readonlyProxy","isExtensible","preventExtensions","defaultConfiguration","getConfigurationModel","Default","userConfiguration","User","workspaceConfiguration","Workspace","folderConfigurations","Configuration","ConfigurationModel","parseConfigurationData","branch","affectsConfiguration","preferenceName","reverse","prevValue","curValue","folderCombinedConfigs","getCombinedResourceConfig","combinedConfiguration","folderConfiguration","getFolderResourceConfig","combinedConfig","getCombinedConfig","getFolderCombinedConfig","merge","folderConfig","folderCombinedConfig","allKeys","others","mergeContents","mergeKeys","webpackPolyfill","DebugExtImpl","sessions","configurationProviders","descriptorFactories","trackerFactories","contributionPaths","onDidChangeBreakpointsEmitter","onDidChangeActiveDebugSessionEmitter","onDidTerminateDebugSessionEmitter","onDidStartDebugSessionEmitter","onDidReceiveDebugSessionCustomEmitter","$appendToDebugConsole","$appendLineToDebugConsole","commandRegistryExt","contributions","contribution","$registerDebuggerContribution","$addBreakpoints","$removeBreakpoints","$startDebugging","tuple","providers","$onSessionCustomEvent","body","session","$sessionDidCreate","$sessionDidDestroy","$sessionDidChange","$breakpointsDidChange","added","removed","$createDebugSession","debugConfiguration","theiaSession","customRequest","$customRequest","createDebugAdapterTracker","tracker","createCommunicationProvider","communicationProvider","debugAdapterSession","PluginDebugAdapterSession","$terminateDebugSession","$getTerminalCreationOptions","doGetTerminalCreationOptions","$provideDebugConfigurations","workspaceFolderUri","provideDebugConfigurations","toWorkspaceFolder","$resolveDebugConfigurations","resolveDebugConfiguration","PluginDebugAdapterTracker","resolveDebugAdapterExecutable","descriptorFactory","createDebugAdapterDescriptor","connectDebugAdapter","startDebugAdapter","debugServer","adapterExecutableCommand","contributionPath","debuggerContribution","winx86","osx","linux","toPlatformInfo","program","programArgs","runtime","runtimeArgs","onWillStartSession","onWillStopSession","onDebugAdapterError","onDidSendMessage","onWillReceiveMessage","onDebugAdapterExit","signal","onExit","DebugAdapterSessionImpl","seq","handleData","CONTENT_LENGTH","TWO_CRLF","stdio","forkExecutable","modulePath","fork","net","trackers","factories","_onDidAddDocuments","_onDidRemoveDocuments","_onDidChangeActiveTextEditors","$acceptEditorsAndDocumentsDelta","removedDocuments","addedDocuments","removedEditors","addedEditors","documentUri","TextEditorExt","editorPosition","activeEditorId","newActiveEditor","_selections","_visibleRanges","TextEditorOptionsExt","_viewColumn","readonly","trySetSelection","fromSelection","runOnProxy","$trySetSelections","_acceptViewColumn","undoStopBefore","undoStopAfter","TextEditorEdit","insertSnippet","snippet","posOrRange","$tryInsertSnippet","setDecorations","decorationType","rangesOrOptions","$trySetDecorations","fromRangeOrRangeWithMessage","$trySetDecorationsFast","revealRange","revealType","$tryRevealRange","editData","finalize","editRanges","rangeEnd","forceMoveMarkers","$tryApplyEdits","documentVersionId","_tabSize","_insertSpace","_cursorStyle","_lineNumbers","lineNumbers","validateTabSize","warnOnError","$trySetOptions","validateInsertSpaces","newOptions","configurationUpdate","hasUpdate","collectedEdits","addEdit","endOfLine","moveMarkers","validatedRange","messageService","workspaceFoldersChangedEmitter","documentContentProviders","workspaceWillRenameFileEmitter","workspaceDidRenameFileEmitter","fileSystemWatcherManager","InPluginFileSystemWatcherProxy","folders","$onWorkspaceFoldersChanged","newFolders","roots","deltaFolders","currentFolders","foldersDiff","folder1","folder2","$pickWorkspaceFolder","includePattern","includeFolderUri","excludePatternOrDisregardExcludes","$startFileSearch","$fileChanged","onFileSystemEvent","subscriberId","onDidChangeSubscription","$registerTextDocumentContentProvider","$provideTextDocumentContent","$onTextDocumentContentChange","$unregisterTextDocumentContentProvider","documentURI","provideTextDocumentContent","resolveParent","hasFolder","resourcePath","folderPath","rootsToAdd","folderToAdd","currentWorkspaceFolders","newWorkspaceFolders","otherFolder","$updateWorkspaceFolders","$onFileRename","$onWillRename","subscribers","perSubscriberEventEmitter","subscriberPrivateData","fileWatcherSubscriberOptions","$registerFileSystemWatcher","unsubscribe","$unregisterFileSystemWatcher","FileSystemWatcher","subscriberData","isIgnoreCreateEvents","isIgnoreChangeEvents","isIgnoreDeleteEvents","onDidCreateEmitter","onDidDeleteEmitter","optionsOrFirstItem","actions","pushItem","isCloseAffordance","onCloseActionHandle","modal","actionHandle","EnvExtImpl","envSessionId","envMachineId","$getEnvVariable","queryParameters","lang","defaultShell","$getClientOperatingSystem","APP_NAME","readText","$readText","writeText","$writeText","webviewPanels","serializers","initData","$onMessage","panel","getWebviewPanel","onMessageEmitter","$onDidChangeWebviewPanelViewState","newState","setActive","setViewColumn","onDidChangeViewStateEmitter","webviewPanel","$onDidDisposeWebviewPanel","$deserializeWebviewPanel","viewState","WebviewImpl","revivedPanel","WebviewPanelImpl","deserializeWebviewPanel","webviewShowOptions","toWebviewPanelShowOptions","$createWebviewPanel","toWebviewOptions","$registerSerializer","$unregisterSerializer","onDidReceiveMessage","asWebviewUri","webviewResourceRoot","webviewCspSource","checkIsDisposed","_html","$setHtml","$setOptions","$postMessage","localResourceRoots","_viewType","_webview","onDidDispose","onDidChangeViewState","_showOptions","$disposeWebview","newTitle","$setTitle","_iconPath","$setIconPath","setShowOptions"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,K,24BC7DrD,YACA,QAEA,QACA,OACA,QACA,QACA,QACA,QAEA,aAgBI,WAAYC,GACRC,KAAKC,WAAaF,EAe1B,OA5BW,EAAAG,KAAP,W,IAAY,sDACR,OAAO,IAAIC,GAAW,W,QAClB,GAAIC,E,IACA,IAAyB,QAAAA,GAAW,8BAAE,CAAjC,IAAMH,EAAU,QACbA,GAA4C,mBAAvBA,EAAWI,SAChCJ,EAAWI,W,sGAa/B,YAAAA,QAAA,WACQL,KAAKC,aACLD,KAAKC,aACLD,KAAKC,gBAAaK,IAInB,EAAAjB,OAAP,SAAcU,GACV,OAAO,IAAII,EAAWJ,IAE9B,EAhCA,GAAa,EAAAI,aAkCb,SAAYI,GACR,mBACA,qBAFJ,CAAY,EAAAA,qBAAA,EAAAA,mBAAkB,KAK9B,SAAYC,GACR,iBACA,eACA,2BAHJ,CAAY,EAAAA,6BAAA,EAAAA,2BAA0B,KAUtC,SAAYC,GACR,wBACA,wBACA,iBACA,iBACA,qBACA,mBACA,mBACA,iBACA,qBACA,qBACA,mBAXJ,CAAY,EAAAA,aAAA,EAAAA,WAAU,KAiBtB,SAAYC,GACR,2BAEA,qBAEA,yBALJ,CAAY,EAAAA,gCAAA,EAAAA,8BAA6B,KAQzC,SAAiBA,GACG,EAAAC,UAAhB,SAA0Bb,GACtB,OAAQA,GACJ,IAAK,WAAY,OAAOY,EAA8BE,SACtD,IAAK,QAAS,OAAOF,EAA8BG,MACnD,IAAK,MAAO,OAAOH,EAA8BI,UAL7D,CAAiB,EAAAJ,gCAAA,EAAAA,8BAA6B,KAW9C,iBAGI,WAAYK,EAAcC,GACtB,GAAID,EAAO,EACP,MAAM,IAAIE,MAAM,kCAEpB,GAAID,EAAO,EACP,MAAM,IAAIC,MAAM,kCAEpBjB,KAAKkB,MAAQH,EACbf,KAAKmB,WAAaH,EAgJ1B,OA7II,sBAAI,mBAAI,C,IAAR,WACI,OAAOhB,KAAKkB,O,gCAGhB,sBAAI,wBAAS,C,IAAb,WACI,OAAOlB,KAAKmB,Y,gCAGhB,YAAAC,SAAA,SAASC,GACL,OAAIrB,KAAKkB,MAAQG,EAAMH,SAGnBG,EAAMH,MAAQlB,KAAKkB,QAGhBlB,KAAKmB,WAAaE,EAAMF,YAGnC,YAAAG,gBAAA,SAAgBD,GACZ,OAAIrB,KAAKkB,MAAQG,EAAMH,SAGnBG,EAAMH,MAAQlB,KAAKkB,QAGhBlB,KAAKmB,YAAcE,EAAMF,YAGpC,YAAAI,QAAA,SAAQF,GACJ,OAAQrB,KAAKsB,gBAAgBD,IAGjC,YAAAG,eAAA,SAAeH,GACX,OAAQrB,KAAKoB,SAASC,IAG1B,YAAAI,QAAA,SAAQJ,GACJ,OAAOrB,KAAKkB,QAAUG,EAAMH,OAASlB,KAAKmB,aAAeE,EAAMF,YAGnE,YAAAO,UAAA,SAAUL,GACN,OAAIrB,KAAKkB,MAAQG,EAAMH,OACX,EACDlB,KAAKkB,MAAQG,EAAMN,KACnB,EAGHf,KAAKmB,WAAaE,EAAMF,YAChB,EACDnB,KAAKmB,WAAaE,EAAMF,WACxB,EAGA,GAOnB,YAAAQ,UAAA,SAAUC,EAA0FC,GAEhG,QAFgG,IAAAA,MAAA,GAEtE,OAAtBD,GAAiD,OAAnBC,EAC9B,MAAM,EAAAC,kBAGV,IAAIC,EAUJ,YATiC,IAAtBH,EACPG,EAAY,EACwB,iBAAtBH,EACdG,EAAYH,GAEZG,EAAmD,iBAAhCH,EAAkBG,UAAyBH,EAAkBG,UAAY,EAC5FF,EAA6D,iBAArCD,EAAkBC,eAA8BD,EAAkBC,eAAiB,GAG7F,IAAdE,GAAsC,IAAnBF,EACZ7B,KAEJ,IAAIgC,EAAShC,KAAKe,KAAOgB,EAAW/B,KAAKiC,UAAYJ,IAKhE,YAAAK,KAAA,SAAKC,EAA2EF,GAE5E,QAF4E,IAAAA,MAAoBjC,KAAKiC,WAEhF,OAAjBE,GAAuC,OAAdF,EACzB,MAAM,EAAAH,kBAGV,IAAIf,EAYJ,YAX4B,IAAjBoB,EACPpB,EAAOf,KAAKe,KAEmB,iBAAjBoB,EACdpB,EAAOoB,GAGPpB,EAAoC,iBAAtBoB,EAAapB,KAAoBoB,EAAapB,KAAOf,KAAKe,KACxEkB,EAA8C,iBAA3BE,EAAaF,UAAyBE,EAAaF,UAAYjC,KAAKiC,WAGvFlB,IAASf,KAAKe,MAAQkB,IAAcjC,KAAKiC,UAClCjC,KAEJ,IAAIgC,EAASjB,EAAMkB,IAGvB,EAAAG,IAAP,W,YAAW,kDACP,IAAIC,EAASC,EAAUC,M,IACvB,IAAgB,QAAAD,GAAS,8BAAE,CAAtB,IAAMzC,EAAC,QACJA,EAAEuB,SAASiB,KACXA,EAASxC,I,iGAGjB,OAAOwC,GAGJ,EAAAG,IAAP,W,YAAW,kDACP,IAAIH,EAASC,EAAUC,M,IACvB,IAAgB,QAAAD,GAAS,8BAAE,CAAtB,IAAMzC,EAAC,QACJA,EAAE0B,QAAQc,KACVA,EAASxC,I,iGAGjB,OAAOwC,GAGJ,EAAAI,WAAP,SAAkBpB,GACd,IAAKA,EACD,OAAO,EAEX,GAAIA,aAAiBW,EACjB,OAAO,EAEL,QAAEjB,EAAA,EAAAA,KAAMkB,EAAA,EAAAA,UACd,MAAoB,iBAATlB,GAA0C,iBAAdkB,GAK/C,EA3JA,GAAa,EAAAD,WA6Jb,iBAMI,WAAYU,EAAqCC,EAAqCC,EAAkBC,GACpG,IAAIC,OAA8BxC,EAC9ByC,OAA4BzC,EAUhC,GARgC,iBAArBoC,GAA6D,iBAArBC,GAAoD,iBAAZC,GAA6C,iBAAdC,GACtHC,EAAQ,IAAId,EAASU,EAAkBC,GACvCI,EAAM,IAAIf,EAASY,EAASC,IACrBH,aAA4BV,GAAYW,aAA4BX,IAC3Ec,EAAQJ,EACRK,EAAMJ,IAGLG,IAAUC,EACX,MAAM,IAAI9B,MAAM,qBAGhB6B,EAAM1B,SAAS2B,IACf/C,KAAKgD,OAASF,EACd9C,KAAKiD,KAAOF,IAEZ/C,KAAKgD,OAASD,EACd/C,KAAKiD,KAAOH,GAqGxB,OAjGI,sBAAI,oBAAK,C,IAAT,WACI,OAAO9C,KAAKgD,Q,gCAGhB,sBAAI,kBAAG,C,IAAP,WACI,OAAOhD,KAAKiD,M,gCAGhB,YAAAC,SAAA,SAASC,GACL,OAAIA,aAA2BC,EACpBpD,KAAKkD,SAASC,EAAgBH,SAC9BhD,KAAKkD,SAASC,EAAgBF,MAE9BE,aAA2BnB,KAC9BmB,EAAgB/B,SAASpB,KAAKgD,UAG9BhD,KAAKiD,KAAK7B,SAAS+B,KAQ/B,YAAA1B,QAAA,SAAQJ,GACJ,OAAOrB,KAAKgD,OAAOvB,QAAQJ,EAAM2B,SAAWhD,KAAKiD,KAAKxB,QAAQJ,EAAM4B,OAGxE,YAAAI,aAAA,SAAahC,GACT,IAAMyB,EAAQd,EAASQ,IAAInB,EAAMyB,MAAO9C,KAAKgD,QACvCD,EAAMf,EAASI,IAAIf,EAAM0B,IAAK/C,KAAKiD,MACzC,IAAIH,EAAMvB,QAAQwB,GAMlB,OAAO,IAAIK,EAAMN,EAAOC,IAG5B,YAAAO,MAAA,SAAMjC,GACF,OAAIrB,KAAKkD,SAAS7B,GACPrB,KACAqB,EAAM6B,SAASlD,MACfqB,EAIJ,IAAI+B,EAFGpB,EAASI,IAAIf,EAAMyB,MAAO9C,KAAKgD,QACjChB,EAASQ,IAAInB,EAAM0B,IAAK/C,KAAK+C,OAI7C,sBAAI,sBAAO,C,IAAX,WACI,OAAO/C,KAAKgD,OAAOvB,QAAQzB,KAAKiD,O,gCAGpC,sBAAI,2BAAY,C,IAAhB,WACI,OAAOjD,KAAKgD,OAAOjC,OAASf,KAAKiD,KAAKlC,M,gCAK1C,YAAAmB,KAAA,SAAKqB,EAA4ER,GAE7E,QAF6E,IAAAA,MAAgB/C,KAAK+C,KAE5E,OAAlBQ,GAAkC,OAARR,EAC1B,MAAM,EAAAjB,kBAGV,IAAIgB,EAYJ,OAXKS,EAGMvB,EAASS,WAAWc,GAC3BT,EAAQS,GAGRT,EAAQS,EAAcT,OAAS9C,KAAK8C,MACpCC,EAAMQ,EAAcR,KAAO/C,KAAK+C,KAPhCD,EAAQ9C,KAAK8C,MAUbA,EAAMrB,QAAQzB,KAAKgD,SAAWD,EAAItB,QAAQzB,KAAK+C,KACxC/C,KAEJ,IAAIoD,EAAMN,EAAOC,IAGrB,EAAAS,QAAP,SAAeC,GACX,OAAIA,aAAiBL,KAGhBK,IAGEzB,EAASS,WAAmBgB,EAAOX,QACnCd,EAASS,WAAmBgB,EAAOV,OAGlD,EAhIA,GAAa,EAAAK,QAkIb,kBAKI,WAAYM,EAAuCC,EAAyCC,EAAqBC,GAAjH,WACQC,OAA+BxD,EAC/ByD,OAA+BzD,EAUnC,GARkC,iBAAvBoD,GAAmE,iBAAzBC,GAA2D,iBAAfC,GAAmD,iBAAjBC,GAC/HC,EAAS,IAAI9B,EAAS0B,EAAoBC,GAC1CI,EAAS,IAAI/B,EAAS4B,EAAYC,IAC3BH,aAA8B1B,GAAY2B,aAAgC3B,IACjF8B,EAASJ,EACTK,EAASJ,IAGRG,IAAWC,EACZ,MAAM,IAAI9C,MAAM,qB,OAGpB,cAAM6C,EAAQC,IAAO,MAEhBC,QAAUF,EACf,EAAKG,QAAUF,E,EAcvB,OAtC+B,OA2B3B,sBAAI,qBAAM,C,IAAV,WACI,OAAO/D,KAAKiE,S,gCAGhB,sBAAI,qBAAM,C,IAAV,WACI,OAAOjE,KAAKgE,S,gCAGhB,sBAAI,yBAAU,C,IAAd,WACI,OAAOhE,KAAKgE,UAAYhE,KAAKiD,M,gCAErC,EAtCA,CAA+BG,GAAlB,EAAAc,YAwCb,SAAYC,GACR,eACA,mBAFJ,CAAY,EAAAA,YAAA,EAAAA,UAAS,KAKrB,iBAoBI,WAAYnF,GAJJ,KAAAoF,SAAmB,EAKvBpE,KAAKhB,MAAQA,GAAS,GA0D9B,OA7EW,EAAAqF,gBAAP,SAAuBZ,GACnB,OAAIA,aAAiBa,KAGhBb,GAG0C,iBAAjBA,EAAOzE,OAG1B,EAAAuF,QAAf,SAAuBvF,GACnB,OAAOA,EAAMwF,QAAQ,WAAY,SAWrC,YAAAC,WAAA,SAAWC,GAEP,OADA1E,KAAKhB,OAASsF,EAAcC,QAAQG,GAC7B1E,MAGX,YAAA2E,cAAA,SAAcC,GAGV,YAHU,IAAAA,MAAiB5E,KAAKoE,YAChCpE,KAAKhB,OAAS,IACdgB,KAAKhB,OAAS4F,EACP5E,MAGX,YAAA6E,kBAAA,SAAkB7F,EAAoD4F,GAElE,QAFkE,IAAAA,MAAiB5E,KAAKoE,YAEnE,mBAAVpF,EAAsB,CAC7B,IAAM8F,EAAS,IAAIR,EACnBQ,EAAOV,SAAWpE,KAAKoE,SACvBpF,EAAM8F,GACN9E,KAAKoE,SAAWU,EAAOV,SACvBpF,EAAQ8F,EAAO9F,WAEfA,EAAQsF,EAAcC,QAAQvF,GASlC,OANAgB,KAAKhB,OAAS,KACdgB,KAAKhB,OAAS4F,EACd5E,KAAKhB,OAAS,IACdgB,KAAKhB,OAASA,EACdgB,KAAKhB,OAAS,IAEPgB,MAGX,YAAA+E,eAAA,SAAezG,EAAc0G,GAEzB,GAA4B,mBAAjBA,EAA6B,CACpC,IAAMF,EAAS,IAAIR,EACnBQ,EAAOV,SAAWpE,KAAKoE,SACvBY,EAAaF,GACb9E,KAAKoE,SAAWU,EAAOV,SACvBY,EAAeF,EAAO9F,UAES,iBAAjBgG,IACdA,EAAeA,EAAaR,QAAQ,QAAS,SAWjD,OARAxE,KAAKhB,OAAS,KACdgB,KAAKhB,OAASV,EACV0G,IACAhF,KAAKhB,OAAS,IACdgB,KAAKhB,OAASgG,GAElBhF,KAAKhB,OAAS,IAEPgB,MAEf,EA/EA,GAAa,EAAAsE,gBAiFb,MACI,SAAmBW,GAAA,KAAAA,MADV,EAAAC,aAKb,iBAMI,WAA2BD,GAAA,KAAAA,KAG/B,OAPoB,EAAAE,KAAkB,IAAIC,EAAU,QAEhC,EAAAC,OAAoB,IAAID,EAAU,UAKtD,EATA,GAAa,EAAAA,YAWb,SAAYE,GACR,yBACA,2BACA,6DACA,qBAJJ,CAAY,EAAAA,uBAAA,EAAAA,qBAAoB,KAUhC,SAAYC,GAIR,2BAIA,mCAIA,+BAIA,+BAhBJ,CAAY,EAAAA,0BAAA,EAAAA,wBAAuB,KAsBnC,SAAYC,GACR,mBACA,uBACA,qBACA,mBAJJ,CAAY,EAAAA,oBAAA,EAAAA,kBAAiB,KAO7B,SAAYC,GACR,uBACA,6BACA,yCACA,yBACA,uBALJ,CAAY,EAAAA,sBAAA,EAAAA,oBAAmB,KAQ/B,iBAII,WAAYC,EAA6CC,GACrD,GADqD,KAAAA,YACjC,iBAATD,GACFA,GAAS,UAAIE,MAAMF,EAAKG,MACzB,MAAM,EAAA/D,gBAAgB,QAI9B,GAAuB,iBAAZ6D,EACP,MAAM,EAAA7D,gBAAgB,WAG1B9B,KAAK0F,KAAuB,iBAATA,EAAoBA,EAAOA,EAAKG,IAAIC,OAM/D,OAHI,YAAAC,eAAA,SAAe7F,EAAc8F,GACzB,OAAO,EAAAC,SAAS/F,EAAM8F,IAE9B,EArBA,GAAa,EAAAE,kBAuBb,SAAYC,GACR,mBACA,uBACA,qCACA,yBAJJ,CAAY,EAAAA,eAAA,EAAAA,aAAY,KAOxB,iBAuCI,WAAYC,EAA0BC,GAClCrG,KAAKoG,MAAQA,EACbpG,KAAKqG,QAAUA,EA+BvB,OAlEI,sBAAI,oBAAK,C,IAAT,WACI,OAAOrG,KAAKsG,Q,IAGhB,SAAUtH,GACN,GAAIA,IAAUoE,EAAMI,QAAQxE,GACxB,MAAM,EAAA8C,gBAAgB,SAE1B9B,KAAKsG,OAAStH,G,gCAGlB,sBAAI,sBAAO,C,IAAX,WACI,OAAOgB,KAAKuG,UAAY,I,IAG5B,SAAYvH,GACR,GAAIA,GAA0B,iBAAVA,EAChB,MAAM,EAAA8C,gBAAgB,WAE1B9B,KAAKuG,SAAWvH,G,gCAGpB,sBAAI,qBAAM,C,IAAV,WACI,OAAOgB,KAAKwG,S,IAGhB,SAAWxH,GACP,GAAIA,GAA0B,iBAAVA,EAChB,MAAM,EAAA8C,gBAAgB,UAE1B9B,KAAKwG,QAAUxH,G,gCAQZ,EAAAyH,WAAP,SAAkBhD,GACd,OAAIA,aAAiBiD,KAGhBjD,IAGEL,EAAMI,QAAmBC,EAAO2C,QACK,iBAAnB3C,EAAO4C,UAG7B,EAAA7B,QAAP,SAAe4B,EAAcC,GACzB,OAAO,IAAIK,EAASN,EAAOC,IAGxB,EAAAM,OAAP,SAAcC,EAAoBP,GAC9B,OAAOK,EAASlC,QAAQ,IAAIpB,EAAMwD,EAAUA,GAAWP,IAGpD,EAAAQ,OAAP,SAAcT,GACV,OAAOM,EAASlC,QAAQ4B,EAAO,KAG5B,EAAAU,aAAP,SAAoBC,GAChB,IAAMC,EAAM,IAAIN,OAASpG,OAAWA,GAEpC,OADA0G,EAAIC,OAASF,EACNC,GAEf,EAxEA,GAAa,EAAAN,WA0Eb,SAAYQ,GACR,uBACA,2CACA,yEAHJ,CAAY,EAAAA,wBAAA,EAAAA,sBAAqB,KAMjC,SAAYC,GACR,mBACA,uBACA,2BACA,iCACA,qBACA,2BACA,qBACA,6BACA,uBACA,2BACA,oBACA,sBACA,oBACA,0BACA,0BACA,sBACA,oBACA,8BACA,wBACA,gCACA,4BACA,wBACA,sBACA,4BACA,sCAzBJ,CAAY,EAAAA,qBAAA,EAAAA,mBAAkB,KA4B9B,MAeI,SAAYC,EAAeC,GACvBrH,KAAKoH,MAAQA,EACbpH,KAAKqH,KAAOA,GAjBP,EAAAC,iBAqBb,IAYYC,EAZZ,EAMI,SAAYC,EAAoCC,QAApC,IAAAD,MAAA,SAAoC,IAAAC,OAAA,GAC5CzH,KAAKwH,MAAQA,EACbxH,KAAKyH,aAAeA,GARf,EAAAC,iBAYb,SAAYH,GACR,qBACA,yBACA,iCACA,mBAJJ,CAAYA,EAAA,EAAAA,qBAAA,EAAAA,mBAAkB,KAO9B,MAII,SAAYI,EAAoBC,GAC5B5H,KAAK2H,SAAWA,EAChB3H,KAAK4H,QAAUA,GANV,EAAAC,+BAUb,iBAII,WAAYhC,EAAUiC,GAClB9H,KAAK6F,IAAMA,EACPiC,aAA2B1E,EAC3BpD,KAAKoG,MAAQ0B,EACNA,aAA2B9F,IAClChC,KAAKoG,MAAQ,IAAIhD,EAAM0E,EAAiBA,IAcpD,OAVW,EAAAC,WAAP,SAAkBtE,GACd,OAAIA,aAAiBuE,KAGhBvE,IAGEL,EAAMI,QAAmBC,EAAO2C,QAChC,UAAIR,MAAiBnC,EAAOoC,OAE3C,EAvBA,GAAa,EAAAmC,WAyBb,SAAYC,GACR,iCADJ,CAAY,EAAAA,gBAAA,EAAAA,cAAa,KAIzB,MASI,SAAY7B,EAAcwB,EAAiBM,QAAA,IAAAA,MAA+BX,EAAmBtG,OACzFjB,KAAKoG,MAAQA,EACbpG,KAAK4H,QAAUA,EACf5H,KAAKkI,SAAWA,GAZX,EAAAC,aAgBb,SAAYC,GACR,mBACA,mBACA,yBACA,qBAJJ,CAAY,EAAAA,iBAAA,EAAAA,eAAc,KAO1B,SAAYC,GACR,iCADJ,CAAY,EAAAA,YAAA,EAAAA,UAAS,KAIrB,MAII,SAAYjB,EAAkCkB,GAC1CtI,KAAKoH,MAAQA,EACbpH,KAAKsI,cAAgBA,GANhB,EAAAC,uBAUb,MAKI,SAAYnB,EAAekB,GACvBtI,KAAKoH,MAAQA,EACbpH,KAAKsI,cAAgBA,EACrBtI,KAAKwI,WAAa,IARb,EAAAC,uBAYb,SAAYC,GACR,uBACA,2CACA,qCAHJ,CAAY,EAAAA,2BAAA,EAAAA,yBAAwB,KAMpC,MAKI,WACI1I,KAAK2I,WAAa,IANb,EAAAC,gBAUb,MAKI,SACIC,EACAzC,GAEKyC,GACD,EAAA/G,gBAAgB,4BAEhBgH,MAAMC,QAAQF,GACd7I,KAAK6I,SAAoDA,GAClD,EAAAG,iBAAiBH,GACxB7I,KAAK6I,SAAW,CAACA,IAIrB7I,KAAKoG,MAAQA,GAnBR,EAAA6C,QAuBb,SAAYC,GACR,mBACA,mBACA,qBAHJ,CAAY,EAAAA,wBAAA,EAAAA,sBAAqB,KAMjC,MAKI,SACI9C,EACAiB,GAEArH,KAAKoG,MAAQA,EACbpG,KAAKqH,KAAOA,GAVP,EAAA8B,oBAgBb,MAII,SAAY/C,EAAcgD,GACtB,GAAIA,KAAYA,aAAkB,WAC9B,MAAM,EAAAtH,gBAAgB,UAE1B,IAAKsB,EAAMI,QAAQ4C,IAAUA,EAAMiD,QAC/B,MAAM,EAAAvH,gBAAgB,SAE1B9B,KAAKoG,MAAQA,EACbpG,KAAKoJ,OAASA,GAZT,EAAAE,eAgBb,iBAUI,WAAYlD,EAAcmD,GACtBvJ,KAAKoG,MAAQA,EACbpG,KAAKuJ,QAAUA,EAEvB,OARI,sBAAI,yBAAU,C,IAAd,WACI,QAASvJ,KAAKuJ,S,gCAOtB,EAdA,GAAa,EAAAC,WAgBb,SAAYC,GACR,6BACA,uBAFJ,CAAY,EAAAA,oBAAA,EAAAA,kBAAiB,KAK7B,iBAaI,WACoBzK,GAAA,KAAAA,QAcxB,OAXW,YAAA0K,OAAP,SAAcC,GACV,OAAO,IAAIC,EAAe5J,KAAKhB,MAAQgB,KAAKhB,MAAQ4K,EAAeC,IAAMF,EAAQA,IAG9E,YAAAzG,SAAP,SAAgB7B,GACZ,OAAOrB,KAAKhB,QAAUqC,EAAMrC,OAAS,EAAA8K,qBAAqBzI,EAAMrC,MAAOgB,KAAKhB,MAAQ4K,EAAeC,MAGhG,YAAAE,WAAP,SAAkB1I,GACd,OAAOrB,KAAKkD,SAAS7B,IAAUA,EAAM6B,SAASlD,OAzB1B,EAAA6J,IAAM,IAEP,EAAAG,MAAQ,IAAIJ,EAAe,IAC3B,EAAAK,SAAWL,EAAeI,MAAMN,OAAO,YACvC,EAAAQ,SAAWN,EAAeI,MAAMN,OAAO,YACvC,EAAAS,gBAAkBP,EAAeM,SAASR,OAAO,WACjD,EAAAU,eAAiBR,EAAeM,SAASR,OAAO,UAChD,EAAAW,gBAAkBT,EAAeM,SAASR,OAAO,WACjD,EAAAY,OAASV,EAAeI,MAAMN,OAAO,UACrC,EAAAa,sBAAwBX,EAAeU,OAAOZ,OAAO,mBACrD,EAAAc,aAAeZ,EAAeU,OAAOZ,OAAO,UAiBvE,EA5BA,GAAa,EAAAE,iBA8Bb,SAAYa,GACR,uBACA,+BACA,2BAHJ,CAAY,EAAAA,yBAAA,EAAAA,uBAAsB,KAMlC,MAWI,SAAYC,EAAerD,GACvBrH,KAAK0K,MAAQA,EACb1K,KAAKqH,KAAOA,GAbP,EAAAsD,aAoCb,8BAEY,KAAAC,OAAS,IAAI9B,MA4GzB,OA1GI,YAAA+B,WAAA,SAAW3K,EAAiB8F,EAAe8E,GACvC9K,KAAK4K,OAAOG,KAAK,CAAEC,MAAO,EAAG9K,KAAI,EAAE8F,GAAE,EAAE8E,QAAO,KAGlD,YAAAG,WAAA,SAAWpF,EAAgBiF,GACvB9K,KAAK4K,OAAOG,KAAK,CAAEC,MAAO,EAAG9K,UAAMI,EAAW0F,GAAIH,EAAKiF,QAAO,KAGlE,YAAAI,WAAA,SAAWrF,EAAgBiF,GACvB9K,KAAK4K,OAAOG,KAAK,CAAEC,MAAO,EAAG9K,KAAM2F,EAAKG,QAAI1F,EAAWwK,QAAO,KAGlE,YAAAtG,QAAA,SAAQqB,EAAUO,EAAcC,GAC5BrG,KAAK4K,OAAOG,KAAK,CAAEC,MAAO,EAAGnF,IAAG,EAAEsF,KAAM,IAAIzE,EAASN,EAAOC,MAGhE,YAAAM,OAAA,SAAOyE,EAAexE,EAAoBP,GACtCrG,KAAKwE,QAAQ4G,EAAU,IAAIhI,EAAMwD,EAAUA,GAAWP,IAG1D,YAAAQ,OAAA,SAAOuE,EAAehF,GAClBpG,KAAKwE,QAAQ4G,EAAUhF,EAAO,KAGlC,YAAAiF,IAAA,SAAIxF,G,YACA,IAAmB,QAAA7F,KAAK4K,QAAM,8BAAE,CAA3B,IAAMO,EAAI,QACX,GAAIA,GAAuB,IAAfA,EAAKH,OAAeG,EAAKtF,IAAIyF,aAAezF,EAAIyF,WACxD,OAAO,G,iGAGf,OAAO,GAGX,YAAAC,IAAA,SAAI1F,EAAU2F,G,QACV,GAAKA,E,IAWD,IAAmB,QAAAA,GAAK,8BAAE,CAArB,IAAML,EAAI,QACPA,GACAnL,KAAK4K,OAAOG,KAAK,CAAEC,MAAO,EAAGnF,IAAG,EAAEsF,KAAI,K,qGAbtC,CAER,IAAK,IAAIpN,EAAI,EAAGA,EAAIiC,KAAK4K,OAAOa,OAAQ1N,IAAK,CACzC,IAAM2N,EAAU1L,KAAK4K,OAAO7M,GACxB2N,GAA6B,IAAlBA,EAAQV,OAAeU,EAAQ7F,IAAIyF,aAAezF,EAAIyF,aACjEtL,KAAK4K,OAAO7M,QAAKuC,GAGzBN,KAAK4K,OAAS5K,KAAK4K,OAAOe,QAAO,SAAAC,GAAK,QAAEA,OAWhD,YAAAhN,IAAA,SAAIiH,G,QACMgG,EAAkB,G,IACxB,IAAwB,QAAA7L,KAAK4K,QAAM,8BAAE,CAAhC,IAAMkB,EAAS,QACZA,GAAiC,IAApBA,EAAUd,OAAec,EAAUjG,IAAIyF,aAAezF,EAAIyF,YACvEO,EAAId,KAAKe,EAAUX,O,iGAG3B,GAAmB,IAAfU,EAAIJ,OAGR,OAAOI,GAGX,YAAAE,QAAA,W,QACUC,EAAY,IAAIC,I,IACtB,IAAwB,QAAAjM,KAAK4K,QAAM,8BAAE,CAAhC,IAAMkB,EAAS,QAChB,GAAIA,GAAiC,IAApBA,EAAUd,MAAa,CACpC,IAAIkB,EAAWF,EAAUpN,IAAIkN,EAAUjG,IAAIyF,YACtCY,IACDA,EAAW,CAACJ,EAAUjG,IAAK,IAC3BmG,EAAUT,IAAIO,EAAUjG,IAAIyF,WAAYY,IAE5CA,EAAS,GAAGnB,KAAKe,EAAUX,Q,iGAGnC,IAAM9I,EAA8B,GAEpC,OADA2J,EAAUG,SAAQ,SAAAC,GAAK,OAAA/J,EAAO0I,KAAKqB,MAC5B/J,GAGX,YAAAgK,YAAA,W,QACUR,EAAgE,G,IACtE,IAAmB,QAAA7L,KAAK4K,QAAM,8BAAE,CAA3B,IAAMO,EAAI,QACNA,IAGc,IAAfA,EAAKH,MACLa,EAAId,KAAK,CAACI,EAAKjL,KAAOiL,EAAKnF,GAAKmF,EAAKL,UAErCe,EAAId,KAAK,CAACI,EAAKtF,IAAK,CAACsF,EAAKA,U,iGAGlC,OAAOU,GAGX,sBAAI,mBAAI,C,IAAR,WACI,OAAO7L,KAAK+L,UAAUN,Q,gCAI1B,YAAAa,OAAA,WACI,OAAOtM,KAAK+L,WAEpB,EA9GA,GAAa,EAAAQ,gBAgHb,IA2BYC,EA3BZ,EAkBI,SAAYC,EAAiDC,QAAA,IAAAA,MAAmDF,EAAyBG,MAA5E,KAAAD,mBACrDD,aAAgB,UAChBzM,KAAK4M,YAAcH,EAEnBzM,KAAKoH,MAAQqF,GAtBZ,EAAAI,WA2Bb,SAAYL,GACR,mBACA,6BACA,2BAHJ,CAAYA,EAAA,EAAAA,2BAAA,EAAAA,yBAAwB,KAMpC,iBAcI,WAAYlO,EAAc+I,EAAkByF,EAAkCC,EAAgCC,GAC1GhN,KAAK1B,KAAOA,EACZ0B,KAAKqH,KAAOA,EACZrH,KAAKgN,cAAgBA,EAEW,iBAArBF,IACP9M,KAAKgN,cAAgBF,GAGrBC,aAAyB/E,EACzBhI,KAAK2H,SAAWoF,EACTD,aAA4B1J,IACnCpD,KAAK2H,SAAW,IAAIK,EAAS+E,EAAgBD,IAGjDG,EAAkBC,SAASlN,MAYnC,OAvCW,EAAAkN,SAAP,SAAgBpB,GACZ,IAAKA,EAAUxN,KACX,MAAM,IAAI2C,MAAM,iDA6BxB,YAAAqL,OAAA,WACI,MAAO,CACHhO,KAAM0B,KAAK1B,KACX+I,KAAM,EAAA8F,WAAWnN,KAAKqH,MACtBM,SAAU3H,KAAK2H,SACfqF,cAAehN,KAAKgN,gBAGhC,EAzCA,GAAa,EAAAC,oBA2Cb,iBAqBI,WAAY3O,EAAc8O,EAAgB/F,EAAkBjB,EAAciH,GACtErN,KAAK1B,KAAOA,EACZ0B,KAAKoN,OAASA,EACdpN,KAAKqH,KAAOA,EACZrH,KAAKoG,MAAQA,EACbpG,KAAKqN,eAAiBA,EACtBrN,KAAKsN,SAAW,GAEhBC,EAAeL,SAASlN,MAEhC,OA7BW,EAAAkN,SAAP,SAAgBpB,GACZ,IAAKA,EAAUxN,KACX,MAAM,IAAI2C,MAAM,gDAEpB,IAAK6K,EAAU1F,MAAMlD,SAAS4I,EAAUuB,gBACpC,MAAM,IAAIpM,MAAM,iDAEhB6K,EAAUwB,UACVxB,EAAUwB,SAASnB,QAAQoB,EAAeL,WAqBtD,EA/BA,GAAa,EAAAK,iBAiCb,SAAYC,GACR,yBACA,yBACA,yBAHJ,CAAY,EAAAA,iBAAA,EAAAA,eAAc,KAM1B,SAAYC,GACR,6BACA,2BAFJ,CAAY,EAAAA,gCAAA,EAAAA,8BAA6B,KAUzC,+BAOA,OANoB,EAAAC,KAAyB,CACrCC,SAAU,CACN1I,GAAI,QAER2I,QAAS,QAEjB,EAPA,GAAa,EAAAC,oBASb,SAAYC,GACR,yBACA,yBAFJ,CAAY,EAAAA,cAAA,EAAAA,YAAW,KAKvB,kBAqBI,WAAYC,EAA6BC,EAAeC,GAAxD,MACI,YAAM,UAAIrI,MAAMmI,GAAgBA,EAAazC,UAAS,GAAQyC,IAAa,K,OAC3E,EAAKzP,KAAO0P,EAAUA,EAAI,qBAAuB,kBAEZ,mBAA1BvP,OAAOyP,gBACdzP,OAAOyP,eAAe,EAAMC,EAAgBxO,WAGT,mBAA5BsB,MAAMmN,mBAA0D,mBAAfH,GACxDhN,MAAMmN,kBAAkB,EAAMH,G,EAG1C,OAjCqC,OAE1B,EAAAI,WAAP,SAAkBC,GACd,OAAO,IAAIH,EAAgBG,EAAc,cAAeH,EAAgBE,aAErE,EAAAE,aAAP,SAAoBD,GAChB,OAAO,IAAIH,EAAgBG,EAAc,gBAAiBH,EAAgBI,eAEvE,EAAAC,kBAAP,SAAyBF,GACrB,OAAO,IAAIH,EAAgBG,EAAc,qBAAsBH,EAAgBK,oBAE5E,EAAAC,iBAAP,SAAwBH,GACpB,OAAO,IAAIH,EAAgBG,EAAc,oBAAqBH,EAAgBM,mBAE3E,EAAAC,cAAP,SAAqBJ,GACjB,OAAO,IAAIH,EAAgBG,EAAc,gBAAiBH,EAAgBO,gBAEvE,EAAAC,YAAP,SAAmBL,GACf,OAAO,IAAIH,EAAgBG,EAAc,cAAeH,EAAgBQ,cAehF,EAjCA,CAAqC1N,OAAxB,EAAAkN,kBAmCb,SAAYS,GACR,yBACA,mBACA,6BACA,oCAJJ,CAAY,EAAAA,WAAA,EAAAA,SAAQ,KAOpB,MAiBI,SAAYjH,EAA4B+C,EAAgBmE,GACpD7O,KAAK2H,SAAWA,GAlBX,EAAAmH,kBAqBb,+BAQA,OAFI,YAAAC,OAAA,SAAO/P,KAEX,EARA,GAAa,EAAAgQ,WASb,SAAYC,GAKR,qCAIA,wBAIA,oCAbJ,CAAY,EAAAA,mBAAA,EAAAA,iBAAgB,KAgB5B,iBAOI,WAAYC,EAAiBC,EAAkDC,GAC3E,GAAuB,iBAAZF,EACP,MAAM,EAAApN,gBAAgB,WAE1B9B,KAAKqP,iBAAmBH,OACV5O,IAAV6O,IACIrG,MAAMC,QAAQoG,IACdnP,KAAKsP,UAAYH,EACjBnP,KAAKuP,iBAAmBH,GAExBpP,KAAKuP,iBAAmBJ,QAGT7O,IAAnBN,KAAKsP,YACLtP,KAAKsP,UAAY,IAoD7B,OAhDI,sBAAI,sBAAO,C,IAAX,WACI,OAAOtP,KAAKqP,kB,IAGhB,SAAYrQ,GACR,GAAqB,iBAAVA,EACP,MAAM,EAAA8C,gBAAgB,WAE1B9B,KAAKqP,iBAAmBrQ,G,gCAG5B,sBAAI,mBAAI,C,IAAR,WACI,OAAOgB,KAAKsP,W,IAGhB,SAAStQ,GACA8J,MAAMC,QAAQ/J,KACfA,EAAQ,IAEZgB,KAAKsP,UAAYtQ,G,gCAGrB,sBAAI,sBAAO,C,IAAX,WACI,OAAOgB,KAAKuP,kB,IAGhB,SAAYvQ,GACRgB,KAAKuP,iBAAmBvQ,G,gCAGrB,YAAAwQ,UAAP,W,QACUC,EAAOC,EAAOC,WAAW,OAK/B,GAJAF,EAAKG,OAAO,gBACkBtP,IAA1BN,KAAKqP,kBACLI,EAAKG,OAAO5P,KAAKqP,kBAEjBrP,KAAKsP,WAAatP,KAAKsP,UAAU7D,OAAS,E,IAC1C,IAAkB,QAAAzL,KAAKsP,WAAS,8BAAE,CAA7B,IAAMO,EAAG,QACVJ,EAAKG,OAAOC,I,iGAGpB,OAAOJ,EAAKK,OAAO,QAGT,EAAAC,GAAd,SAAiB/Q,GAEb,OADkBA,OACckQ,SAExC,EAzEA,GAAa,EAAAc,mBA2Eb,SAAYC,GACR,uBACA,uBACA,mBAHJ,CAAY,EAAAA,eAAA,EAAAA,aAAY,KAMxB,SAAYC,GACR,uBACA,6BACA,iBAHJ,CAAY,EAAAA,gBAAA,EAAAA,cAAa,KAMzB,SAAYC,GACR,uBACA,uBACA,qBAHJ,CAAY,EAAAA,iBAAA,EAAAA,eAAc,KAM1B,iBASI,WAAYC,EAAwC3D,EAA2E4D,GAC3H,GAAIvH,MAAMC,QAAQ0D,IAAyB,iBAATA,EAAmB,CACjD,IAAK2D,EACD,MAAM,EAAAtO,gBAAgB,sCAE1B,GAAoB,iBAATsO,GAA2C,iBAAfA,EAAKpR,MACxC,MAAM,EAAA8C,gBAAgB,WAE1B9B,KAAKsQ,aAAeF,EACpBpQ,KAAKsP,UAAY7C,EACjBzM,KAAKuQ,aAAeF,MACjB,CACH,GAAoB,iBAATD,EACP,MAAM,EAAAtO,gBAAgB,eAE1B9B,KAAKwQ,iBAAmBJ,EACxBpQ,KAAKuQ,aAAe9D,GA+DhC,OA3DI,sBAAI,0BAAW,C,IAAf,WACI,OAAOzM,KAAKwQ,kB,IAGhB,SAAgBxR,GACZ,GAAqB,iBAAVA,EACP,MAAM,EAAA8C,gBAAgB,eAE1B9B,KAAKwQ,iBAAmBxR,G,gCAG5B,sBAAI,sBAAO,C,IAAX,WACI,OAAOgB,KAAKsQ,c,IAGhB,SAAYtR,GACR,GAAqB,iBAAVA,GAA6C,iBAAhBA,EAAMA,MAC1C,MAAM,EAAA8C,gBAAgB,WAE1B9B,KAAKsQ,aAAetR,G,gCAGxB,sBAAI,mBAAI,C,IAAR,WACI,OAAOgB,KAAKsP,W,IAGhB,SAAStQ,GACLgB,KAAKsP,UAAYtQ,GAAS,I,gCAG9B,sBAAI,sBAAO,C,IAAX,WACI,OAAOgB,KAAKuQ,c,IAGhB,SAAYvR,GACRgB,KAAKuQ,aAAevR,G,gCAGjB,YAAAwQ,UAAP,W,QACUC,EAAOC,EAAOC,WAAW,OAQ/B,GAPAF,EAAKG,OAAO,cACkBtP,IAA1BN,KAAKwQ,kBACLf,EAAKG,OAAO5P,KAAKwQ,uBAEKlQ,IAAtBN,KAAKsQ,cACLb,EAAKG,OAAoC,iBAAtB5P,KAAKsQ,aAA4BtQ,KAAKsQ,aAAetQ,KAAKsQ,aAAatR,OAE1FgB,KAAKsP,WAAatP,KAAKsP,UAAU7D,OAAS,E,IAC1C,IAAkB,QAAAzL,KAAKsP,WAAS,8BAAE,CAA7B,IAAMO,EAAG,QACVJ,EAAKG,OAAsB,iBAARC,EAAmBA,EAAMA,EAAI7Q,Q,iGAGxD,OAAOyQ,EAAKK,OAAO,QAGT,EAAAC,GAAd,SAAiB/Q,GACb,IAAM8M,EAAY9M,EAClB,OAAO8M,MAAgBA,EAAU2E,eAAiB3E,EAAUvC,UAEpE,EAxFA,GAAa,EAAAmH,iBA0Fb,iBAuBI,WAAYzL,EAAYmC,GACpB,GAAkB,iBAAPnC,EACP,MAAM,EAAAnD,gBAAgB,MAE1B,GAAqB,iBAAVsF,EACP,MAAM,EAAAtF,gBAAgB,QAE1B9B,KAAK2Q,QAAU1L,EAMvB,OA5BkB,EAAA/E,KAAd,SAAmBlB,GACf,OAAQA,GACJ,IAAK,QACD,OAAO4R,EAAUC,MACrB,IAAK,QACD,OAAOD,EAAUE,MACrB,IAAK,UACD,OAAOF,EAAUG,QACrB,IAAK,OACD,OAAOH,EAAUI,KACrB,QACI,SAcZ,sBAAI,iBAAE,C,IAAN,WACI,OAAOhR,KAAK2Q,S,gCA/BF,EAAAE,MAAmB,IAAID,EAAU,QAAS,SAC1C,EAAAE,MAAmB,IAAIF,EAAU,QAAS,SAC1C,EAAAG,QAAqB,IAAIH,EAAU,UAAW,WAC9C,EAAAI,KAAkB,IAAIJ,EAAU,OAAQ,QA8B1D,EApCA,GAAa,EAAAA,YAsCb,SAAYK,GACR,uBACA,6BAFJ,CAAY,EAAAA,YAAA,EAAAA,UAAS,KAKrB,iBA8BI,a,YACQC,EACAC,EACA7S,EACA8S,EACAC,EACAC,EANI,kDAQe,iBAAZC,EAAK,IAERL,GADJ,UACI,GACA5S,EAAA,KACA8S,EAAA,KACAC,EAAA,KACAC,EAAA,OAIAJ,GADJ,UACI,GACAC,EAAA,KACA7S,EAAA,KACA8S,EAAA,KACAC,EAAA,KACAC,EAAA,MAIRtR,KAAKwR,WAAaN,EAClBlR,KAAKmR,MAAQA,EACbnR,KAAK1B,KAAOA,EACZ0B,KAAKoR,OAASA,EACdpR,KAAKqR,UAAYA,EAEc,iBAApBC,GACPtR,KAAKyR,oBAAsB,CAACH,GAC5BtR,KAAK0R,wBAAyB,GACvB5I,MAAMC,QAAQuI,IACrBtR,KAAKyR,oBAAsBH,EAC3BtR,KAAK0R,wBAAyB,IAE9B1R,KAAKyR,oBAAsB,GAC3BzR,KAAK0R,wBAAyB,GAElC1R,KAAK2R,kBAAmB,EA8HhC,OA3HI,sBAAI,yBAAU,C,IAAd,WACI,OAAO3R,KAAKkR,gB,IAGhB,SAAelS,GACX,GAAIA,QACA,MAAM,EAAA8C,gBAAgB,mCAE1B9B,KAAKkR,eAAiBlS,G,gCAG1B,sBAAI,oBAAK,C,IAAT,WACI,OAAOgB,KAAK4R,W,IAGhB,SAAU5S,GACQ,OAAVA,IACAA,OAAQsB,GAEZN,KAAK4R,UAAY5S,G,gCAGrB,sBAAI,mBAAI,C,IAAR,WACI,OAAOgB,KAAK6R,U,IAGhB,SAAS7S,GACL,GAAqB,iBAAVA,EACP,MAAM,EAAA8C,gBAAgB,QAE1B9B,KAAK6R,SAAW7S,G,gCAGpB,sBAAI,wBAAS,C,IAAb,WACI,OAAOgB,KAAK8R,e,IAGhB,SAAc9S,GACI,OAAVA,IACAA,OAAQsB,GAEZN,KAAK8R,cAAgB9S,EACrBgB,KAAK+R,oC,gCAGT,sBAAI,8BAAe,C,IAAnB,WACI,OAAO/R,KAAKyR,qB,IAGhB,SAAoBzS,GAChB,IAAK8J,MAAMC,QAAQ/J,GAGf,OAFAgB,KAAKyR,oBAAsB,QAC3BzR,KAAK0R,wBAAyB,GAGlC1R,KAAKyR,oBAAsBzS,EAC3BgB,KAAK0R,wBAAyB,G,gCAGlC,sBAAI,iCAAkB,C,IAAtB,WACI,OAAO1R,KAAK0R,wB,gCAGhB,sBAAI,2BAAY,C,IAAhB,WACI,OAAO1R,KAAK2R,kB,IAGhB,SAAiB3S,IACC,IAAVA,IAA4B,IAAVA,IAClBA,GAAQ,GAEZgB,KAAK2R,iBAAmB3S,G,gCAG5B,sBAAI,qBAAM,C,IAAV,WACI,OAAOgB,KAAKgS,Y,IAGhB,SAAWhT,GACP,GAAqB,iBAAVA,GAAuC,IAAjBA,EAAMyM,OACnC,MAAM,EAAA3J,gBAAgB,yCAE1B9B,KAAKgS,WAAahT,G,gCAGtB,sBAAI,oBAAK,C,IAAT,WACI,OAAOgB,KAAKiS,W,IAGhB,SAAUjT,GAKNgB,KAAKiS,UAJDjT,QAIaA,OAHIsB,G,gCAMzB,sBAAI,kCAAmB,C,IAAvB,WACI,OAAON,KAAKkS,yB,IAGhB,SAAwBlT,GACN,OAAVA,IACAA,OAAQsB,GAEZN,KAAKkS,wBAA0BlT,G,gCAG3B,YAAA+S,iCAAR,WACQ/R,KAAK8R,yBAAyB9B,EAC9BvR,OAAO0T,OAAOnS,KAAKkR,eAAgB,CAC/BkB,KAAM,UACNnN,GAAIjF,KAAK8R,cAActC,YACvB6C,SAAUrS,KAAKkR,eAAgBkB,OAE5BpS,KAAK8R,yBAAyBpB,GACrCjS,OAAO0T,OAAOnS,KAAKkR,eAAgB,CAC/BkB,KAAM,QACNnN,GAAIjF,KAAK8R,cAActC,YACvB6C,SAAUrS,KAAKkR,eAAgBkB,QAI/C,EAvMA,GAAa,EAAAE,OAyMb,MA0BI,SAAY/I,EAAiBgI,EAAiBzG,GAC1C9K,KAAKuJ,QAAUA,EACfvJ,KAAKuR,KAAOA,EACZvR,KAAK8K,QAAUA,GA7BV,EAAAyH,yBAoCb,MAeI,SAAYC,EAAcC,GACtBzS,KAAKwS,KAAOA,EACZxS,KAAKyS,KAAOA,GAjBP,EAAAC,qBAwBb,kBAkBI,WAAsBC,EAAmBC,EAAoBC,EAAuBC,GAChF9S,KAAK2S,QAAUA,IAAW,EAC1B3S,KAAK4S,UAAYA,EACjB5S,KAAK6S,aAAeA,EACpB7S,KAAK8S,WAAaA,EAc1B,OAPI,sBAAI,iBAAE,C,IAAN,WAII,OAHK9S,KAAK+S,MACN/S,KAAK+S,IAAM,EAAAC,KAAKC,SAEbjT,KAAK+S,K,gCAGpB,EApCA,GAAa,EAAAG,cAyCb,mBASI,WAAYvL,EAAoBgL,EAAmBC,EAAoBC,EAAuBC,GAA9F,MACI,YAAMH,EAASC,EAAWC,EAAcC,IAAW,K,OACnD,EAAKnL,SAAWA,E,EAExB,OAbsC,OAatC,EAbA,CAAsCuL,IAAzB,EAAAC,oBAkBb,mBASI,WAAYC,EAAsBT,EAAmBC,EAAoBC,EAAuBC,GAAhG,MACI,YAAMH,EAASC,EAAWC,EAAcC,IAAW,K,OACnD,EAAKM,aAAeA,E,EAE5B,OAbwC,OAaxC,EAbA,CAAwCF,IAA3B,EAAAG,sBAeb,OAMI,SAAYC,EAAaC,EAAeC,EAAcC,GAClDzT,KAAKsT,IAAMA,EACXtT,KAAKuT,MAAQA,EACbvT,KAAKwT,KAAOA,EACZxT,KAAKyT,MAAQA,GAVR,EAAAC,SAcb,OAII,SAAYtN,EAAcuN,GACtB,GAAIA,KAAWA,aAAiBD,IAC5B,MAAM,EAAA5R,gBAAgB,SAE1B,IAAKsB,EAAMI,QAAQ4C,GACf,MAAM,EAAAtE,gBAAgB,SAE1B9B,KAAKoG,MAAQA,EACbpG,KAAK2T,MAAQA,GAZR,EAAAC,oBAgBb,OAKI,SAAYxM,GACR,IAAKA,GAA0B,iBAAVA,EACjB,MAAM,EAAAtF,gBAAgB,SAE1B9B,KAAKoH,MAAQA,GATR,EAAAyM,qBAab,SAAYC,GACR,iBACA,iBACA,iBAHJ,CAAY,EAAAA,cAAA,EAAAA,YAAW,KAMvB,OAKI,SAAYhR,EAAeC,EAAasE,GACpCrH,KAAK8C,MAAQA,EACb9C,KAAK+C,IAAMA,EACX/C,KAAKqH,KAAOA,GARP,EAAA0M,gBAYb,SAAYC,GACR,yBACA,yBACA,uBAHJ,CAAY,EAAAA,mBAAA,EAAAA,iBAAgB,KAS5B,SAAYC,GACR,oBACA,gBACA,YAHJ,CAAY,EAAAA,kBAAA,EAAAA,gBAAe,KAO3B,SAAYC,GACR,cACA,cACA,gBACA,kBAJJ,CAAY,EAAAA,yBAAA,EAAAA,uBAAsB,M,8ECn8DlC,YAwGa,EAAAC,YAAsB,CAC/BC,UAAW,CACPC,YAAa,QACbC,WAAY,SAEhBC,MAAO,CACHtP,GAAI,cACJ3G,KAAM,cACNkW,UAAW,QACXC,QAAS,QACTC,YAAa,QACbC,YAAa,QACbC,OAAQ,CACJxC,KAAM,QACNqC,QAAS,SAEbI,YAAa,QACbC,WAAY,IAIhBC,WAAY,QACZC,aAAc,QACdC,SAAU,CACN3W,KAAM,cACNkW,UAAW,QACXC,QAAS,QACTC,YAAa,QACbC,YAAa,QACbO,QAAS,CACL9C,KAAM,QACNqC,QAAS,SAEbI,YAAa,UA+IrB,SAAYM,GACR,qBACA,yBACA,mBAHJ,CAAY,EAAAA,kBAAA,EAAAA,gBAAe,KA+P3B,SAAiBC,GACG,EAAArF,GAAhB,SAAmBF,GACf,QAASA,GAAsB,iBAARA,GAAoB,eAAgBA,GAAO,eAAgBA,GAF1F,CAAiB,EAAAuF,oBAAA,EAAAA,kBAAiB,KASlC,SAAYC,GAIR,mBAIA,6BAIA,2BAZJ,CAAY,EAAAA,+BAAA,EAAAA,6BAA4B,KAoCxC,SAAiBC,GACG,EAAAvF,GAAhB,SAAmBF,GACf,QAASA,GAAsB,iBAARA,GAAoB,wBAAyBA,GAF5E,CAAiB,EAAAyF,gBAAA,EAAAA,cAAa,KAuI9B,SAAYC,GACR,iBACA,iBACA,qBACA,mBACA,mBACA,iBACA,qBACA,qBACA,mBATJ,CAAY,EAAAA,iBAAA,EAAAA,eAAc,KAkD1B,SAAYjQ,GACR,yBACA,2BACA,6DACA,qBAJJ,CAAY,EAAAA,uBAAA,EAAAA,qBAAoB,KAiDhC,SAAYkQ,GACR,mEACA,iEACA,6DACA,2DAJJ,CAAY,EAAAA,yBAAA,EAAAA,uBAAsB,KAmQlC,SAAiBC,GACG,EAAA1F,GAAhB,SAAmBF,GACf,QAASA,GAAsB,iBAARA,GAAoB,aAAcA,GAAO,UAAWA,GAFnF,CAAiB,EAAA4F,sBAAA,EAAAA,oBAAmB,KA0GvB,EAAAC,qBAAuB5W,OAAO,wBAK9B,EAAA6W,6BAA+B7W,OAAO,gCA8HtC,EAAA8W,mBAAqB,CAC9BC,sBAA6D,EAAAC,sBAA2C,uBACxGC,gBAAiB,EAAAD,sBAAqC,iBACtDE,aAAc,EAAAF,sBAAmC,eACjDG,eAAgB,EAAAH,sBAAqC,iBACrDI,sBAA6D,EAAAJ,sBAA2C,uBACxGK,kBAAmB,EAAAL,sBAAuC,mBAC1DM,eAAgB,EAAAN,sBAAqC,iBACrDO,iCAAiF,EAAAP,sBAAoD,gCACrIQ,SAAU,EAAAR,sBAA+B,WACzCS,kBAAmB,EAAAT,sBAAwC,oBAC3DU,cAAe,EAAAV,sBAA2C,uBAC1DW,gBAAiB,EAAAX,sBAAqC,iBACtDY,yBAA0B,EAAAZ,sBAA8C,0BACxEa,6BAA0E,EAAAb,sBAAiD,6BAC3Hc,eAAgB,EAAAd,sBAAqC,iBACrDe,gBAAiB,EAAAf,sBAAsC,kBACvDgB,cAAe,EAAAhB,sBAAoC,gBACnDiB,aAAc,EAAAjB,sBAAmC,eACjDkB,WAAY,EAAAlB,sBAAiC,aAC7CmB,4BAA6B,EAAAnB,sBAAiD,6BAC9EoB,WAAY,EAAApB,sBAAiC,aAC7CqB,iBAAkB,EAAArB,sBAAsC,kBACxDsB,SAAU,EAAAtB,sBAA+B,WACzCuB,iBAAkB,EAAAvB,sBAAuC,mBACzDwB,YAAa,EAAAxB,sBAAkC,cAC/CyB,eAAgD,EAAAzB,sBAAqC,kBAG5E,EAAA0B,iBAAmB,CAC5BC,0BAA2B,EAAA3B,sBAAwC,oBACnE4B,qBAAsB,EAAA5B,sBAA0C,sBAChE6B,eAAgB,EAAA7B,sBAAoC,gBACpD8B,iBAAkB,EAAA9B,sBAAsC,kBACxD+B,iBAAkB,EAAA/B,sBAAuC,mBACzDgC,cAAe,EAAAhC,sBAAoC,gBACnDiC,iBAAkB,EAAAjC,sBAAsC,kBACxDkC,0BAA2B,EAAAlC,sBAA8C,0BACzEmC,cAAe,EAAAnC,sBAAoC,gBACnDoC,aAAc,EAAApC,sBAA0C,sBACxDqC,4BAA6B,EAAArC,sBAAgD,4BAC7EsC,eAAgB,EAAAtC,sBAAoC,gBACpDuC,wBAAyB,EAAAvC,sBAA6C,yBACtEwC,cAAe,EAAAxC,sBAAoC,gBACnDyC,eAAgB,EAAAzC,sBAAqC,iBACrD0C,aAAc,EAAA1C,sBAAmC,eACjD2C,YAAa,EAAA3C,sBAAkC,cAC/C4C,UAAW,EAAA5C,sBAAgC,YAC3C6C,2BAA4B,EAAA7C,sBAAgD,4BAC5E8C,UAAW,EAAA9C,sBAAgC,YAC3C+C,gBAAiB,EAAA/C,sBAAqC,iBACtDgD,QAAS,EAAAhD,sBAA8B,UACvCiD,gBAAiB,EAAAjD,sBAAsC,oB,45BCn1C3D,IA0aiBvN,EAeAE,EA0DA0E,EA4ZA5H,EAkBAyT,EAiCAC,EAl8BjB,QACA,OACA,OACA,OACA,QAEA,QAEA,OAiCA,SAAgBC,EAAeC,GAC3B,MAAsB,iBAAXA,GAAuBA,GAAUC,EAAM3Y,WAAW4Y,IAClDF,EAAS,EAGhBA,IAAoBC,EAAM3Y,WAAW6Y,QApC1B,GACE,EA4ErB,SAAgBC,EAAQnT,GAKZ,IAAAoT,EAAA,EAAAA,gBAAiBC,EAAA,EAAAA,YAAaC,EAAA,EAAAA,cAAe7W,EAAA,EAAAA,UACrD,OAAO,IAAIuW,EAAMhW,MAAMoW,EAAkB,EAAGC,EAAc,EAAGC,EAAgB,EAAG7W,EAAY,GAMhG,SAAgB8W,EAAUvT,GACtB,GAAKA,EAAL,CAGQ,IAAAtD,EAAA,EAAAA,MAAOC,EAAA,EAAAA,IACf,MAAO,CACHyW,gBAAiB1W,EAAM/B,KAAO,EAC9B0Y,YAAa3W,EAAMb,UAAY,EAC/ByX,cAAe3W,EAAIhC,KAAO,EAC1B8B,UAAWE,EAAId,UAAY,IAiBnC,SAAgB2X,EAAuBC,GACnC,OAAyB,IAArBA,EAAUpO,UALlB,SAA6BoO,GACzB,YAAmC,IAApBA,EAAUzT,MAOlB0T,CAAoBD,EAAU,IA8BzC,SAAgBE,EAAiBC,GAC7B,OAAOA,EAAOC,IAAIC,GAetB,SAAgBA,EAAaF,GAEb,IARKvW,EAOjB,OAPiBA,EAODuW,IANiB,iBAAVvW,GACuB,iBAApBA,EAAO0W,UACU,iBAAjB1W,EAAOzE,MAMtB,CAAEA,MAAO,MADR,EAAAmb,SAC2B,KADjB,EAAAnb,MACgC,WAC3C,EAAAgK,iBAAiBgR,GACjBA,EACkB,iBAAXA,EACP,CAAEhb,MAAegb,GAEjB,CAAEhb,MAAO,IAIxB,SAAgBob,EAAWpb,GACvB,IAAMgI,EAAM,IAAI,EAAAqT,eAAerb,EAAMA,OAErC,OADAgI,EAAIsT,UAAYtb,EAAMsb,UACftT,EAoBX,SAAgBuT,EAAgB5U,GAC5B,MAAuB,iBAAZA,EACAA,GAWL6U,EARgB7U,IASU,iBAAZ6U,EAAG9U,MAA2C,iBAAf8U,EAAG7U,QAR3C,IAAIyT,EAAMlT,gBAAgBP,EAAQD,KAAMC,EAAQA,SAGpDA,EAGX,IACU6U,EAkEV,SAAgBC,EAAatP,GACzB,MAAO,CACHuP,KAAMvP,EAAK9E,QACXD,MAAOuT,EAAUxO,EAAK/E,QAqC9B,SAASuU,EAAY3M,GACjB,MAAoB,iBAATA,EACA4M,OAAO5M,GAEPA,EAIf,SAAS6M,EAAgB3S,GACrB,OAAQA,GACJ,KAAKkR,EAAM7R,mBAAmBtG,MAAO,OAAOmY,EAAMhR,eAAenH,MACjE,KAAKmY,EAAM7R,mBAAmBuT,QAAS,OAAO1B,EAAMhR,eAAe0S,QACnE,KAAK1B,EAAM7R,mBAAmBwT,YAAa,OAAO3B,EAAMhR,eAAe4S,KACvE,KAAK5B,EAAM7R,mBAAmB0T,KAAM,OAAO7B,EAAMhR,eAAe6S,MAIxE,SAASC,EAA0BC,G,QAC/B,GAAKA,EAAL,CAIA,IAAMC,EAAiD,G,IACvD,IAAmB,QAAAD,GAA6B,8BAAE,CAA7C,IAAME,EAAI,QACXD,EAAmBrQ,KAAK,CACpBK,SAAUiQ,EAAK1T,SAAS9B,IAAIyF,WAC5B1D,QAASyT,EAAKzT,QACd4R,gBAAiB6B,EAAK1T,SAASvB,MAAMtD,MAAM/B,KAAO,EAClD0Y,YAAa4B,EAAK1T,SAASvB,MAAMtD,MAAMb,UAAY,EACnDyX,cAAe2B,EAAK1T,SAASvB,MAAMrD,IAAIhC,KAAO,EAC9C8B,UAAWwY,EAAK1T,SAASvB,MAAMrD,IAAId,UAAY,K,iGAGvD,OAAOmZ,GAGX,SAASE,EAAYC,G,QACjB,GAAKA,EAAL,CAIA,IAAMC,EAAgC,G,IACtC,IAAkB,QAAAD,GAAI,8BAAE,CACpB,OADU,SAEN,KAAKnC,EAAMnR,cAAcwT,YAAaD,EAAWzQ,KAAKqO,EAAM/Q,UAAUoT,e,iGAG9E,OAAOD,GAiCX,SAAgBE,EAA0BrU,GACtC,OAAQA,GACJ,KAAK+R,EAAMlQ,sBAAsByS,KAAM,OAAOpH,EAAMrL,sBAAsByS,KAC1E,KAAKvC,EAAMlQ,sBAAsB0S,KAAM,OAAOrH,EAAMrL,sBAAsB0S,KAC1E,KAAKxC,EAAMlQ,sBAAsB2S,MAAO,OAAOtH,EAAMrL,sBAAsB2S,MAE/E,OAAOtH,EAAMrL,sBAAsByS,KAsPvC,SAAgBG,EAAqBzK,EAAmC0K,GACpEA,EAAQxS,QAAU8H,EAAUnC,QAC5B6M,EAAQxK,KAAOF,EAAUE,KAEzB,IAAMzG,EAAUuG,EAAUvG,QAI1B,OAHIA,IACAiR,EAAQjR,QAAUA,GAEfiR,EAGX,SAAgBC,EAAmB3K,EAAiC0K,GAChE,IAAMjR,EAAUuG,EAAUvG,QACtBA,IACAiR,EAAQjR,QAAUmR,EAAyBnR,IAG/C,IAAM2F,EAAcY,EAAUZ,YAC9B,GAAIA,EAEA,OADAsL,EAAQxS,QAAUkH,EACXsL,EAGX,IAAMxS,EAAU8H,EAAU9H,QAC1B,GAAuB,iBAAZA,EAGP,OAFAwS,EAAQxS,QAAUA,EAClBwS,EAAQxK,KAAO2K,EAAa7K,EAAUE,MAC/BwK,EAEP,MAAM,IAAI9a,MAAM,2DAIxB,SAAgBkb,EAAoBJ,GAChC,OAAO,IAAI3C,EAAMpJ,iBACb+L,EAAQxS,QACRwS,EAAQxK,MAAQ,GAChBwK,EAAQjR,SAAW,IAG3B,SAAgBsR,EAAkBL,GAC9B,OAAIA,EAAQxS,SAAWT,MAAMC,QAAQgT,EAAQxK,OAAiC,IAAxBwK,EAAQxK,KAAK9F,OACxD,IAAI2N,EAAM1I,eACbqL,EAAQxS,QACRwS,EAAQxK,KACRwK,EAAQjR,SAAW,IAEpB,IAAIsO,EAAM1I,eACbqL,EAAQxS,SAAWwS,EAAQtL,YAC3BsL,EAAQjR,SAAW,IAG3B,SAAgBoR,EAAa3K,GACzB,IAAKA,GAAwB,IAAhBA,EAAK9F,OACd,MAAO,GAIX,GAAuB,iBADP8F,EAAK,GAEjB,OAAOA,EAGX,IAAMlP,EAAmB,GAOzB,OANwBkP,EAERpF,SAAQ,SAAA0D,GACpBxN,EAAO0I,KAAK8E,EAAI7Q,UAGbqD,EAIX,SAAgB4Z,EAAyBnR,GAErC,IAAMzI,EAAS,GAETga,EAAMvR,EAAQuR,IAChBA,IACAha,EAAY,IAAIga,GAGpB,IAAMC,EAAaxR,EAAQwR,WACvBA,IACAja,EAAmB,WAAIia,GAG3B,IAAMC,EAAezR,EAAQyR,aACzBA,IACAla,EAAqB,aAAIka,GAG7B,IAAMC,EAAY1R,EAAQ0R,UACtBA,IACAna,EAAkB,UAAIma,GAG1B,IAAMC,EAAM3R,EAAQ2R,IAKpB,OAJIA,GACAhe,OAAO0T,OAAO9P,EAAQ,CAAEoa,IAAG,IAGxBpa,EAoDX,SAAgBqa,EAAqBrV,GACjC,GAAIA,EACA,OAAQA,GACJ,KAAK+R,EAAMpF,iBAAiB2I,QACxB,OAAOpI,EAAMP,iBAAiB2I,QAClC,KAAKvD,EAAMpF,iBAAiB4I,QACxB,OAAOrI,EAAMP,iBAAiB4I,QAClC,KAAKxD,EAAMpF,iBAAiB6I,OACxB,OAAOtI,EAAMP,iBAAiB6I,QAgK9C,SAAgBC,EAAe9d,GAC3B,YAAqB,IAAVA,EACAA,EAEU,iBAAVA,EACA,UAAI+d,KAAK/d,GAETA,EAl9Bf,wBAA6Bge,GACzB,GAAkB,iBAAPA,EAIX,OAAIA,IAAO,EAAAzH,eAAe0H,IACP7D,EAAM3Y,WAAW4Y,IACzB2D,IAAO,EAAAzH,eAAe2H,IACd9D,EAAM3Y,WAAW0c,IACzBH,IAAO,EAAAzH,eAAe6H,MACdhE,EAAM3Y,WAAW4c,MACzBL,IAAO,EAAAzH,eAAe+H,KACdlE,EAAM3Y,WAAW8c,KACzBP,IAAO,EAAAzH,eAAeiI,KACdpE,EAAM3Y,WAAWgd,KACzBT,IAAO,EAAAzH,eAAemI,IACdtE,EAAM3Y,WAAWkd,IACzBX,IAAO,EAAAzH,eAAeqI,MACdxE,EAAM3Y,WAAWod,MACzBb,IAAO,EAAAzH,eAAeuI,MACd1E,EAAM3Y,WAAWsd,MACzBf,IAAO,EAAAzH,eAAeyI,KACd5E,EAAM3Y,WAAWwd,UAD7B,GAOX,mBAYA,qCAA0CnT,GACtC,GAAuB,iBAAZA,EAAsB,CAC7B,IAAMoT,EAAcpT,EACpB,MAAO,CACHqT,KAAMD,EAAYC,KAAOD,EAAYC,KAAO/E,EAAMlF,uBAAuBkK,KACzEC,WAAYH,EAAYG,WAAanF,EAAegF,EAAYG,iBAAc/d,EAC9Ege,gBAAeJ,EAAYI,eAAgBJ,EAAYI,eAI/D,MAAO,CACHH,KAAM/E,EAAMlF,uBAAuBkK,KACnCC,WAAYnF,EAAepO,GAC3BwT,eAAe,IAIvB,uBAA4BC,GAChB,IAAAC,EAAAD,EAAAC,yBAA0BC,EAAAF,EAAAE,qBAAsBC,EAAA,EAAAA,mBAAoBC,EAAA,EAAAA,eACtE7b,EAAQ,IAAIsW,EAAMpX,SAASwc,EAA2B,EAAGC,EAAuB,GAChF1b,EAAM,IAAIqW,EAAMpX,SAAS0c,EAAqB,EAAGC,EAAiB,GACxE,OAAO,IAAIvF,EAAMlV,UAAUpB,EAAOC,IAGtC,yBAA8Bwb,GAClB,IAAAxa,EAAA,EAAAA,OAAQD,EAAA,EAAAA,OAChB,MAAO,CACH0a,yBAA0B1a,EAAO/C,KAAO,EACxC0d,qBAAsB3a,EAAO7B,UAAY,EACzCyc,mBAAoB3a,EAAOhD,KAAO,EAClC4d,eAAgB5a,EAAO9B,UAAY,IAI3C,YAYA,cAaA,wBAA6B2E,GACzB,MAAO,CAAEgY,WAAYhY,EAAS7F,KAAO,EAAGoY,OAAQvS,EAAS3E,UAAY,IAGzE,sBAA2B2E,GACvB,OAAO,IAAIwS,EAAMpX,SAAS4E,EAASgY,WAAa,EAAGhY,EAASuS,OAAS,IAQzE,2BAOA,uCAA4C0F,GAExC,OAAIjF,EAAuBiF,GAChBA,EAAO5E,KAAI,SAAApb,GACd,IAAIigB,EAQJ,OANIA,EADAhW,MAAMC,QAAQlK,EAAEigB,cACD/E,EAAiBlb,EAAEigB,cAC3BjgB,EAAEigB,aACM5E,EAAarb,EAAEigB,mBAEfxe,EAEZ,CACH8F,MAAOuT,EAAU9a,EAAEuH,OACnB0Y,aAAcA,EAEdC,cAAqClgB,EAAEkgB,kBAIxCF,EAAO5E,KAAI,SAACpb,GACf,OACIuH,MAAOuT,EAAU9a,QAKjC,qBAgBA,iBAaA,eAMA,gCAAgBmgB,EAAqBC,GACjC,OAAKA,EAEMnW,MAAMC,QAAQkW,GACIA,EAAShF,IAAI+E,GACX,iBAAbC,EACPA,EAEA,CACH9E,SAAU8E,EAAS9E,SACnB+E,OAAQD,EAASC,OACjBvZ,QAAS4U,EAAgB0E,EAAStZ,eATtC,GAeR,oBAiBA,kCAAuC0B,GACnC,OAAQA,GACJ,KAAK+R,EAAMjS,mBAAmBgY,OAAQ,OAAO5K,EAAMpN,mBAAmBgY,OACtE,KAAK/F,EAAMjS,mBAAmBiY,SAAU,OAAO7K,EAAMpN,mBAAmBiY,SACxE,KAAKhG,EAAMjS,mBAAmBkY,YAAa,OAAO9K,EAAMpN,mBAAmBkY,YAC3E,KAAKjG,EAAMjS,mBAAmBmY,MAAO,OAAO/K,EAAMpN,mBAAmBmY,MACrE,KAAKlG,EAAMjS,mBAAmBoY,SAAU,OAAOhL,EAAMpN,mBAAmBoY,SACxE,KAAKnG,EAAMjS,mBAAmBqY,MAAO,OAAOjL,EAAMpN,mBAAmBqY,MACrE,KAAKpG,EAAMjS,mBAAmBsY,UAAW,OAAOlL,EAAMpN,mBAAmBsY,UACzE,KAAKrG,EAAMjS,mBAAmBuY,OAAQ,OAAOnL,EAAMpN,mBAAmBuY,OACtE,KAAKtG,EAAMjS,mBAAmBwY,OAAQ,OAAOpL,EAAMpN,mBAAmBwY,OACtE,KAAKvG,EAAMjS,mBAAmByY,SAAU,OAAOrL,EAAMpN,mBAAmByY,SACxE,KAAKxG,EAAMjS,mBAAmB0Y,KAAM,OAAOtL,EAAMpN,mBAAmB0Y,KACpE,KAAKzG,EAAMjS,mBAAmB2Y,MAAO,OAAOvL,EAAMpN,mBAAmB2Y,MACrE,KAAK1G,EAAMjS,mBAAmB4Y,SAAU,OAAOxL,EAAMpN,mBAAmB4Y,SACxE,KAAK3G,EAAMjS,mBAAmB6Y,KAAM,OAAOzL,EAAMpN,mBAAmB6Y,KACpE,KAAK5G,EAAMjS,mBAAmB8Y,WAAY,OAAO1L,EAAMpN,mBAAmB8Y,WAC1E,KAAK7G,EAAMjS,mBAAmB+Y,QAAS,OAAO3L,EAAMpN,mBAAmB+Y,QACvE,KAAK9G,EAAMjS,mBAAmBgZ,QAAS,OAAO5L,EAAMpN,mBAAmBgZ,QACvE,KAAK/G,EAAMjS,mBAAmBwU,KAAM,OAAOpH,EAAMpN,mBAAmBwU,KACpE,KAAKvC,EAAMjS,mBAAmBuM,MAAO,OAAOa,EAAMpN,mBAAmBuM,MACrE,KAAK0F,EAAMjS,mBAAmBhC,KAAM,OAAOoP,EAAMpN,mBAAmBhC,KACpE,KAAKiU,EAAMjS,mBAAmBiZ,UAAW,OAAO7L,EAAMpN,mBAAmBiZ,UACzE,KAAKhH,EAAMjS,mBAAmB9B,OAAQ,OAAOkP,EAAMpN,mBAAmB9B,OACtE,KAAK+T,EAAMjS,mBAAmBkZ,MAAO,OAAO9L,EAAMpN,mBAAmBkZ,MACrE,KAAKjH,EAAMjS,mBAAmBmZ,SAAU,OAAO/L,EAAMpN,mBAAmBmZ,SACxE,KAAKlH,EAAMjS,mBAAmBoZ,cAAe,OAAOhM,EAAMpN,mBAAmBoZ,cAEjF,OAAOhM,EAAMpN,mBAAmByY,UAGpC,gCAAqCvY,GACjC,OAAQA,GACJ,KAAKkN,EAAMpN,mBAAmBgY,OAAQ,OAAO/F,EAAMjS,mBAAmBgY,OACtE,KAAK5K,EAAMpN,mBAAmBiY,SAAU,OAAOhG,EAAMjS,mBAAmBiY,SACxE,KAAK7K,EAAMpN,mBAAmBkY,YAAa,OAAOjG,EAAMjS,mBAAmBkY,YAC3E,KAAK9K,EAAMpN,mBAAmBmY,MAAO,OAAOlG,EAAMjS,mBAAmBmY,MACrE,KAAK/K,EAAMpN,mBAAmBoY,SAAU,OAAOnG,EAAMjS,mBAAmBoY,SACxE,KAAKhL,EAAMpN,mBAAmBqY,MAAO,OAAOpG,EAAMjS,mBAAmBqY,MACrE,KAAKjL,EAAMpN,mBAAmBsY,UAAW,OAAOrG,EAAMjS,mBAAmBsY,UACzE,KAAKlL,EAAMpN,mBAAmBuY,OAAQ,OAAOtG,EAAMjS,mBAAmBuY,OACtE,KAAKnL,EAAMpN,mBAAmBwY,OAAQ,OAAOvG,EAAMjS,mBAAmBwY,OACtE,KAAKpL,EAAMpN,mBAAmByY,SAAU,OAAOxG,EAAMjS,mBAAmByY,SACxE,KAAKrL,EAAMpN,mBAAmB0Y,KAAM,OAAOzG,EAAMjS,mBAAmB0Y,KACpE,KAAKtL,EAAMpN,mBAAmB2Y,MAAO,OAAO1G,EAAMjS,mBAAmB2Y,MACrE,KAAKvL,EAAMpN,mBAAmB4Y,SAAU,OAAO3G,EAAMjS,mBAAmB4Y,SACxE,KAAKxL,EAAMpN,mBAAmB6Y,KAAM,OAAO5G,EAAMjS,mBAAmB6Y,KACpE,KAAKzL,EAAMpN,mBAAmB8Y,WAAY,OAAO7G,EAAMjS,mBAAmB8Y,WAC1E,KAAK1L,EAAMpN,mBAAmB+Y,QAAS,OAAO9G,EAAMjS,mBAAmB+Y,QACvE,KAAK3L,EAAMpN,mBAAmBgZ,QAAS,OAAO/G,EAAMjS,mBAAmBgZ,QACvE,KAAK5L,EAAMpN,mBAAmBwU,KAAM,OAAOvC,EAAMjS,mBAAmBwU,KACpE,KAAKpH,EAAMpN,mBAAmBuM,MAAO,OAAO0F,EAAMjS,mBAAmBuM,MACrE,KAAKa,EAAMpN,mBAAmBhC,KAAM,OAAOiU,EAAMjS,mBAAmBhC,KACpE,KAAKoP,EAAMpN,mBAAmBiZ,UAAW,OAAOhH,EAAMjS,mBAAmBiZ,UACzE,KAAK7L,EAAMpN,mBAAmB9B,OAAQ,OAAO+T,EAAMjS,mBAAmB9B,OACtE,KAAKkP,EAAMpN,mBAAmBkZ,MAAO,OAAOjH,EAAMjS,mBAAmBkZ,MACrE,KAAK9L,EAAMpN,mBAAmBmZ,SAAU,OAAOlH,EAAMjS,mBAAmBmZ,SACxE,KAAK/L,EAAMpN,mBAAmBoZ,cAAe,OAAOnH,EAAMjS,mBAAmBoZ,cAEjF,OAAOnH,EAAMjS,mBAAmByY,UAGpC,iBASA,gCAAgBY,EAAqBvB,GACjC,OAAKA,EAEMnW,MAAMC,QAAQkW,GACIA,EAAShF,IAAIuG,GACX,iBAAbvB,EACPA,EAEgB,CACnB9E,SAAU8E,EAAS9E,SACnB+E,OAAQD,EAASC,OACjBvZ,QAAS4U,EAAgB0E,EAAStZ,eATtC,GAcR,yCAA8C8a,GAC1C,MAAO,CACHzS,KAAM2M,EAAY8F,EAAWzS,MAC7B9F,SAAU2S,EAAgB4F,EAAWvY,UACrCN,QAAS6Y,EAAW7Y,QACpBwJ,OAAQqP,EAAWrP,OACnBoI,gBAAiBiH,EAAWra,MAAMtD,MAAM/B,KAAO,EAC/C0Y,YAAagH,EAAWra,MAAMtD,MAAMb,UAAY,EAChDyX,cAAe+G,EAAWra,MAAMrD,IAAIhC,KAAO,EAC3C8B,UAAW4d,EAAWra,MAAMrD,IAAId,UAAY,EAC5CmZ,mBAAoBF,EAA0BuF,EAAWrF,oBACzDG,KAAMD,EAAYmF,EAAWlF,QAsDrC,qBAA0BmF,GACtB,MAAoB,CAChBta,MAAOuT,EAAU+G,EAAMta,OACvByC,SAAUkR,EAAiB2G,EAAM7X,YAIzC,wBAA6BlB,GACzB,MAAuB,CACnB9B,IAAK8B,EAAS9B,IACdO,MAAOuT,EAAUhS,EAASvB,SAIlC,8BAAmCua,GAC/B,MAA6B,CACzB9a,IAAK8a,EAAeC,UACpBxa,MAAOuT,EAAUgH,EAAeE,aAChCC,OAAQH,EAAeI,qBAAuBpH,EAAUgH,EAAeI,2BAAwBzgB,EAC/F+M,eAAgBsT,EAAeK,qBAAuBrH,EAAUgH,EAAeK,2BAAwB1gB,IAI/G,4BAAiCqgB,GAC7B,MAA2B,CACvBva,MAAOuT,EAAUgH,EAAeva,OAChC6a,IAAKN,EAAevX,QAAUuX,EAAevX,OAAOkC,aAI5D,8BASA,iCAAsC4V,GAClC,MAAgC,CAC5B9a,MAAOuT,EAAUuH,EAAkB9a,OACnCiB,KAAMqU,EAA0BwF,EAAkB7Z,QAI1D,SAAiBkB,GACG,EAAArI,KAAhB,SAAqBihB,GACjB,MAAO,CACH/Z,MAAO+Z,EAAK/Z,MACZkB,cAAe6Y,EAAK7Y,cAAgB4R,EAAaiH,EAAK7Y,oBAAiBhI,IAG/D,EAAA0F,GAAhB,SAAmBmb,GACf,MAAO,CACH/Z,MAAO+Z,EAAK/Z,MACZkB,cAAe,EAAAU,iBAAiBmY,EAAK7Y,eAAiB8R,EAAW+G,EAAK7Y,eAAiB6Y,EAAK7Y,gBAVxG,CAAiBC,EAAA,EAAAA,uBAAA,EAAAA,qBAAoB,KAerC,SAAiBE,GAEG,EAAAvI,KAAhB,SAAqBihB,GACjB,MAAO,CACH/Z,MAAO+Z,EAAK/Z,MACZkB,cAAe6Y,EAAK7Y,cAAgB4R,EAAaiH,EAAK7Y,oBAAiBhI,EACvEkI,WAAY2Y,EAAK3Y,YAAc2Y,EAAK3Y,WAAWyR,IAAI1R,EAAqBrI,QAIhE,EAAA8F,GAAhB,SAAmBmb,GACf,MAAO,CACH/Z,MAAO+Z,EAAK/Z,MACZkB,cAAe,EAAAU,iBAAiBmY,EAAK7Y,eAAiB8R,EAAW+G,EAAK7Y,eAAiB6Y,EAAK7Y,cAC5FE,WAAY2Y,EAAK3Y,YAAc2Y,EAAK3Y,WAAWyR,IAAI1R,EAAqBvC,MAdpF,CAAiByC,EAAA,EAAAA,uBAAA,EAAAA,qBAAoB,KAmBrC,SAAiBG,GAEG,EAAA1I,KAAhB,SAAqB+E,EAAYmc,GAC7B,MAAO,CACHnc,GAAE,EACFoc,gBAAiBD,EAAKC,gBACtBC,gBAAiBF,EAAKE,gBACtB3Y,WAAYyY,EAAKzY,YAAcyY,EAAKzY,WAAWsR,IAAIxR,EAAqBvI,QAIhE,EAAA8F,GAAhB,SAAmBob,GACf,MAAO,CACHC,gBAAiBD,EAAKC,gBACtBC,gBAAiBF,EAAKE,gBACtB3Y,WAAYyY,EAAKzY,YAAcyY,EAAKzY,WAAWsR,IAAIxR,EAAqBzC,MAfpF,CAAiB,EAAA4C,gBAAA,EAAAA,cAAa,KAqB9B,6BAAkC5J,EAA4BuiB,G,QACpDlf,EAA2B,CAC7BmJ,MAAO,I,IAEX,IAAoB,QAACxM,EAA8BqN,eAAa,8BAAE,CAA7D,IAAMmV,EAAK,QACN,SAAC3b,EAAA,KAAK4b,EAAA,KACZ,GAAI3Y,MAAMC,QAAQ0Y,GAAa,CAE3B,IAAMC,EAAMH,EAAYA,EAAUI,YAAY9b,EAAIyF,iBAAchL,EAChE+B,EAAOmJ,MAAMT,KAA0B,CAAEK,SAAUvF,EAAK+b,eAAgBF,GAAOA,EAAIjN,QAASjJ,MAAOiW,EAAWxH,IAAIQ,UAGlHpY,EAAOmJ,MAAMT,KAA0B,CAAE8W,OAAQhc,EAAKic,OAAQL,EAAY3W,QAAS0W,EAAM,M,iGAGjG,OAAOnf,GAGX,SAAiB8K,GAEb,IAAM4U,EAAoDtjB,OAAOY,OAAO,MACxE0iB,EAAYxN,EAAMpH,WAAWhI,MAAQoP,EAAMpH,WAAWhI,KACtD4c,EAAYxN,EAAMpH,WAAWwS,QAAUpL,EAAMpH,WAAWwS,OACxDoC,EAAYxN,EAAMpH,WAAW6U,WAAazN,EAAMpH,WAAW6U,UAC3DD,EAAYxN,EAAMpH,WAAW8U,SAAW1N,EAAMpH,WAAW8U,QACzDF,EAAYxN,EAAMpH,WAAWqS,OAASjL,EAAMpH,WAAWqS,MACvDuC,EAAYxN,EAAMpH,WAAWgS,QAAU5K,EAAMpH,WAAWgS,OACxD4C,EAAYxN,EAAMpH,WAAWyS,UAAYrL,EAAMpH,WAAWyS,SAC1DmC,EAAYxN,EAAMpH,WAAWmS,OAAS/K,EAAMpH,WAAWmS,MACvDyC,EAAYxN,EAAMpH,WAAWkS,aAAe9K,EAAMpH,WAAWkS,YAC7D0C,EAAYxN,EAAMpH,WAAW6S,MAAQzL,EAAMpH,WAAW6S,KACtD+B,EAAYxN,EAAMpH,WAAWsS,WAAalL,EAAMpH,WAAWsS,UAC3DsC,EAAYxN,EAAMpH,WAAWiS,UAAY7K,EAAMpH,WAAWiS,SAC1D2C,EAAYxN,EAAMpH,WAAWoS,UAAYhL,EAAMpH,WAAWoS,SAC1DwC,EAAYxN,EAAMpH,WAAW4S,UAAYxL,EAAMpH,WAAW4S,SAC1DgC,EAAYxN,EAAMpH,WAAWyN,QAAUrG,EAAMpH,WAAWyN,OACxDmH,EAAYxN,EAAMpH,WAAW+U,QAAU3N,EAAMpH,WAAW+U,OACxDH,EAAYxN,EAAMpH,WAAWgV,SAAW5N,EAAMpH,WAAWgV,QACzDJ,EAAYxN,EAAMpH,WAAWrE,OAASyL,EAAMpH,WAAWrE,MACvDiZ,EAAYxN,EAAMpH,WAAW1O,QAAU8V,EAAMpH,WAAW1O,OACxDsjB,EAAYxN,EAAMpH,WAAWiV,KAAO7N,EAAMpH,WAAWiV,IACrDL,EAAYxN,EAAMpH,WAAWkV,MAAQ9N,EAAMpH,WAAWkV,KACtDN,EAAYxN,EAAMpH,WAAW8S,YAAc1L,EAAMpH,WAAW8S,WAC5D8B,EAAYxN,EAAMpH,WAAWuS,QAAUnL,EAAMpH,WAAWuS,OACxDqC,EAAYxN,EAAMpH,WAAWkT,OAAS9L,EAAMpH,WAAWkT,MACvD0B,EAAYxN,EAAMpH,WAAWmT,UAAY/L,EAAMpH,WAAWmT,SAC1DyB,EAAYxN,EAAMpH,WAAWoT,eAAiBhM,EAAMpH,WAAWoT,cAE/C,EAAA+B,eAAhB,SAA+Bjb,GAC3B,OAAO0a,EAAY1a,IAASkN,EAAMpH,WAAWyS,UAGjC,EAAA2C,aAAhB,SAA6Blb,GACzB,IAAK,IAAMmb,KAAKT,EACZ,GAAIA,EAAYS,KAAOnb,EACnB,OAAO6a,OAAOM,GAGtB,OAAOjO,EAAMpH,WAAWyS,UAxChC,CAAiBzS,EAAA,EAAAA,aAAA,EAAAA,WAAU,KA4C3B,8BAAgBsV,EAAmBtB,GAC/B,IAAM9e,EAA+B,CACjC/D,KAAM6iB,EAAK7iB,KACX8O,OAAQ+T,EAAK/T,OACbhH,MAAOuT,EAAUwH,EAAK/a,OACtBiH,eAAgBsM,EAAUwH,EAAK9T,gBAC/BhG,KAAM8F,EAAWmV,eAAenB,EAAK9Z,OAKzC,OAHI8Z,EAAK7T,WACLjL,EAAOiL,SAAW6T,EAAK7T,SAAS2M,IAAIwI,IAEjCpgB,GAGX,4BAAgBqgB,EAAiBC,GAC7B,MAAO,CACHrkB,KAAMqkB,EAAOrkB,KACb8O,OAAQuV,EAAOvV,OACfhH,MAAOmT,EAAQoJ,EAAOvc,OACtBiH,eAAgBkM,EAAQoJ,EAAOtV,gBAC/BC,SAAUqV,EAAOrV,SAAWqV,EAAOrV,SAAS2M,IAAIyI,GAAoB,GACpErb,KAAM8F,EAAWoV,aAAaI,EAAOtb,QAI7C,6BAAkCub,GAC9B,MAAO,CACH/c,IAAK,UAAIgd,OAAOD,EAAO/c,KACvBvH,KAAMskB,EAAOtkB,KACbwkB,MAAOF,EAAOE,QAItB,oBAAyBC,GACrB,GAAKA,EAAL,CAIA,IAAMhH,EAAU,GAChBA,EAAQ3U,MAAQ2b,EAAKzkB,KACrByd,EAAQ3K,OAAS2R,EAAK3R,OACtB2K,EAAQ5K,MAA8B,iBAAf4R,EAAK5R,MAAqB4R,EAAK5R,MAAMtL,IAAIyF,gBAAahL,EAE7E,IAAM4Q,EAAiB6R,EAAKvR,WAC5B,IAAKN,EACD,OAAO6K,EAGXA,EAAQ3J,KAAOlB,EAAekB,KACtB,EAAAA,KAAA,IAAM,gBACd,IAAK,IAAM9S,KAAO0jB,EACVA,EAAWpjB,eAAeN,KAC1Byc,EAAQzc,GAAO0jB,EAAW1jB,IAIlC,IAAM+R,EAAY0R,EAAK1R,UACvB,OAAKA,EAIuB,UAAxBH,EAAekB,MAAoBgH,EAAM1I,eAAeX,GAAGsB,GACpD2K,EAAyC3K,EAAW0K,GAGnC,YAAxB7K,EAAekB,MAAsBgH,EAAMpJ,iBAAiBD,GAAGsB,GACxDyK,EAA6CzK,EAAW0K,GAG5DA,EAXIA,IAcf,kBAAuBA,GACnB,IAAKA,EACD,MAAM,IAAI9a,MAAM,0CAGZ,IAAAmR,EAAA,EAAAA,KAAMhL,EAAA,EAAAA,MAAOgK,EAAA,EAAAA,OAAQD,EAAA,EAAAA,MAAO5H,EAAA,EAAAA,QAASgI,EAAA,EAAAA,KAAMzG,EAAA,EAAAA,QAAkB,GAAT,EAAAmY,QAAS,6EAC/D5gB,EAAS,GAGf,GAFAA,EAAO/D,KAAO8I,EACd/E,EAAO+O,OAASA,EACZD,EAAO,CACP,IAAMtL,EAAM,UAAIqd,MAAM/R,GACtB9O,EAAO8O,MAAQ,CACXtL,IAAG,EACHvH,KAAMuH,EAAIyF,WACVwX,MAAO,GAIf,IAAMzQ,EAAWD,EACXlB,EAAuC,CACzCkB,KAAMC,GAGVhQ,EAAOmP,WAAaN,EAEH,YAAbmB,IACAhQ,EAAOgP,UAAY8K,EAAoBJ,IAG3C,IAAM1K,EAAY,CAAE9H,QAAO,EAAEgI,KAAI,EAAEzG,QAAO,GAK1C,IAJiB,UAAbuH,GAAwB+G,EAAM1I,eAAeX,GAAGsB,MAChDhP,EAAOgP,UAAY+K,EAAkBL,KAGpCiH,EACD,OAAO3gB,EAGX,IAAK,IAAM/C,KAAO0jB,EACVA,EAAWpjB,eAAeN,KAC1B4R,EAAe5R,GAAO0jB,EAAW1jB,IAIzC,OAAO+C,GAGX,yBAWA,uBAsBA,wBAOA,sBAYA,iBAqBA,6BAgCA,iCAAsC8gB,GAClC,GAAKA,EAAL,CAIA,GAAIA,EAAkBxb,UAAYwb,EAAkBxb,SAASvB,MAAO,CAChE,IAAMgd,EAAK,WAAE/jB,OAAO8jB,EAAkBxb,SAASvB,MAAMtD,MAAM/B,KAAMoiB,EAAkBxb,SAASvB,MAAMtD,MAAMb,WAClGohB,EAAK,WAAEhkB,OAAO8jB,EAAkBxb,SAASvB,MAAMrD,IAAIhC,KAAMoiB,EAAkBxb,SAASvB,MAAMrD,IAAId,WACpG,OAAO,EAAAgL,kBAAkB5N,OAAO8jB,EAAkB7kB,KAAM6kB,EAAkB9b,OAAa,QAAEhI,OAAO+jB,EAAIC,GAChGF,EAAkBxb,SAAS9B,IAAIyF,WAAY6X,EAAkBnW,eAGrE,MAA0B,CACtB1O,KAAM6kB,EAAkB7kB,KACxB0O,cAAemW,EAAkBnW,cACjC3F,KAAM8b,EAAkB9b,OACxBM,SAAU,CACN9B,IAAKsd,EAAkBxb,SAAS9B,IAAIyF,eAKhD,+BAAoC6X,GAChC,GAAKA,EAIL,MAAgC,CAC5B7kB,KAAM6kB,EAAkB7kB,KACxB0O,cAAemW,EAAkBnW,cACjC3F,KAAM8b,EAAkB9b,KACxBM,SAAU,CACN9B,IAAK,UAAIqd,MAAMC,EAAkBxb,SAAS9B,KAC1CO,MAAO+c,EAAkBxb,SAASvB,SAK9C,4BAAiCkd,GAC7B,IAAMld,EAA4B,CAC9BtD,MAAOwgB,EAAaxgB,MAAQ,EAC5BC,IAAKugB,EAAavgB,IAAM,GAK5B,OAHIugB,EAAajc,OACbjB,EAAMiB,KAAOqV,EAAqB4G,EAAajc,OAE5CjB,GAGX,yBAcA,qBAA0BuN,GACtB,MAAO,CAACA,EAAML,IAAKK,EAAMJ,MAAOI,EAAMH,KAAMG,EAAMF,QAGtD,mBAAwBE,GACpB,OAAO,IAAIyF,EAAM1F,MAAMC,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAIA,EAAM,KAG/D,iCAAsC4P,GAClC,MAAO,CACHnc,MAAOmc,EAAkBnc,MACzB8E,SAAUqX,EAAkBrX,SAAWuO,EAAa8I,EAAkBrX,eAAY5L,EAClFkjB,oBAAqBD,EAAkBC,oBAAsBD,EAAkBC,oBAAoBvJ,KAAI,SAAAjb,GAAS,OAAAyb,EAAazb,WAAUsB,IAI/I,uCAA4CkH,GAExC,IADA,IAAMic,EAA4B,GACzBC,EAAS,EAAGA,EAASlc,EAAMiE,OAAQiY,IAAU,CAClD,IAAMrI,EAAO7T,EAAMkc,GACftc,OAAK,EACLuN,OAAW,EACXvH,OAAM,EACNuW,OAAM,EACNC,OAAU,EACVC,OAAU,EACM,iBAATxI,EACPjU,EAAQiU,GAELjU,EAAA,EAAAA,MAAOuN,EAAA,EAAAA,YAAavH,EAAA,EAAAA,OAAQuW,EAAA,EAAAA,OAAQC,EAAA,EAAAA,WAAYC,EAAA,EAAAA,YAGvDJ,EAAU1Y,KAAK,CACX3D,MAAK,EACLuN,YAAW,EACX+O,OAAM,EACNtW,OAAM,EACNuW,OAAM,EACNC,WAAU,EACVC,WAAU,IAGlB,OAAOJ,GAGX,SAAiBK,GACG,EAAA5jB,KAAhB,SAAqB4K,GACjB,MAAO,CACHiZ,YAAajZ,EAAQiZ,YACrBC,cAAelZ,EAAQkZ,cAAgBze,EAAwBrF,KAAK4K,EAAQkZ,oBAAiB1jB,EAC7F2jB,kBAAmBnZ,EAAQmZ,kBAC3BC,MAAOpZ,EAAQoZ,MAAQlL,EAAgC9Y,KAAK4K,EAAQoZ,YAAS5jB,EAC7E6jB,KAAMrZ,EAAQqZ,KAAOnL,EAAgC9Y,KAAK4K,EAAQqZ,WAAQ7jB,EAE1E8jB,gBAA4CtZ,EAAQsZ,gBACpDC,QAASvZ,EAAQuZ,QACjBC,aAAyCxZ,EAAQwZ,aACjDC,aAAczZ,EAAQyZ,aACtBC,aAAc1Z,EAAQ0Z,aACtBC,OAAQ3Z,EAAQ2Z,OAChBC,YAAwC5Z,EAAQ4Z,YAChDC,aAAc7Z,EAAQ6Z,aACtBC,cAAe9Z,EAAQ8Z,cACvBC,YAAa/Z,EAAQ+Z,YACrBC,YAAaha,EAAQga,YACrBC,UAAWja,EAAQia,UACnBC,WAAYla,EAAQka,WACpBC,eAAgBna,EAAQma,eACxBC,OAAQpa,EAAQoa,OAChBvR,MAAkC7I,EAAQ6I,MAC1CwR,QAASra,EAAQqa,QACjBC,cAAeta,EAAQsa,cACvBC,eAAgBva,EAAQua,eAAiBvI,EAAehS,EAAQua,qBAAkB/kB,EAClFglB,eAAgBxa,EAAQwa,eACxBC,mBAA+Cza,EAAQya,mBACvDC,OAAQ1a,EAAQ0a,OAASvM,EAA0C/Y,KAAK4K,EAAQ0a,aAAUllB,EAC1FmlB,MAAO3a,EAAQ2a,MAAQxM,EAA0C/Y,KAAK4K,EAAQ2a,YAASnlB,IA/BnG,CAAiB,EAAAwjB,0BAAA,EAAAA,wBAAuB,KAoCxC,SAAiBve,GACG,EAAArF,KAAhB,SAAqBlB,GACjB,QAAqB,IAAVA,EACP,OAAOA,EAEX,OAAQA,GACJ,KAAKoa,EAAM7T,wBAAwBmgB,SAC/B,OAAOC,EAAInQ,uBAAuBoQ,6BACtC,KAAKxM,EAAM7T,wBAAwBsgB,aAC/B,OAAOF,EAAInQ,uBAAuBsQ,4BACtC,KAAK1M,EAAM7T,wBAAwBwgB,WAC/B,OAAOJ,EAAInQ,uBAAuBwQ,0BACtC,KAAK5M,EAAM7T,wBAAwB0gB,WAC/B,OAAON,EAAInQ,uBAAuB0Q,2BAblD,CAAiB3gB,EAAA,EAAAA,0BAAA,EAAAA,wBAAuB,KAkBxC,SAAiByT,GACG,EAAA9Y,KAAhB,SAAqB4K,GACjB,YAAuB,IAAZA,EACAA,EAEJ,CACHsZ,gBAA4CtZ,EAAQsZ,gBACpDC,QAASvZ,EAAQuZ,QACjBC,aAAyCxZ,EAAQwZ,aACjDC,aAAczZ,EAAQyZ,aACtBC,aAAc1Z,EAAQ0Z,aACtBC,OAAQ3Z,EAAQ2Z,OAChBC,YAAwC5Z,EAAQ4Z,YAChDC,aAAc7Z,EAAQ6Z,aACtBC,cAAe9Z,EAAQ8Z,cACvBC,YAAa/Z,EAAQ+Z,YACrBC,YAAaha,EAAQga,YACrBC,UAAWja,EAAQia,UACnBC,WAAYla,EAAQka,WACpBC,eAAgBna,EAAQma,eACxBC,OAAQpa,EAAQoa,OAChBvR,MAAkC7I,EAAQ6I,MAC1CwR,QAASra,EAAQqa,QACjBC,cAAeta,EAAQsa,cACvBC,eAAgBva,EAAQua,eAAiBvI,EAAehS,EAAQua,qBAAkB/kB,EAClFglB,eAAgBxa,EAAQwa,eACxBC,mBAA+Cza,EAAQya,mBACvDC,OAAQ1a,EAAQ0a,OAASvM,EAA0C/Y,KAAK4K,EAAQ0a,aAAUllB,EAC1FmlB,MAAO3a,EAAQ2a,MAAQxM,EAA0C/Y,KAAK4K,EAAQ2a,YAASnlB,IA5BnG,CAAiB0Y,EAAA,EAAAA,kCAAA,EAAAA,gCAA+B,KAiChD,SAAiBC,GACG,EAAA/Y,KAAhB,SAAqB4K,GACjB,YAAuB,IAAZA,EACAA,EAEJ,CACHqb,YAAarb,EAAQqb,YACrBC,gBAAiBtb,EAAQsb,gBAAkBtJ,EAAehS,EAAQsb,sBAAmB9lB,EACrFmkB,OAAQ3Z,EAAQ2Z,OAChBC,YAAwC5Z,EAAQ4Z,YAChDK,UAAWja,EAAQia,UACnBC,WAAYla,EAAQka,WACpBC,eAAgBna,EAAQma,eACxBtR,MAAkC7I,EAAQ6I,MAC1CyQ,gBAA4CtZ,EAAQsZ,gBACpDiC,OAAQvb,EAAQub,OAChBC,MAAOxb,EAAQwb,MACfC,OAAQzb,EAAQyb,SAjB5B,CAAiBtN,EAAA,EAAAA,4CAAA,EAAAA,0CAAyC,KAsB1D,mBAWA,8BAAmCuN,GAC/B,MAAO,CACHvhB,GAAIuhB,EAAOjS,MAAMtP,GACjB3G,KAAMkoB,EAAOjS,MAAMjW,Q,iBCv/B3B,YA4BA,SAASmoB,EAAe9c,EAAO+c,GAG7B,IADA,IAAIC,EAAK,EACA5oB,EAAI4L,EAAM8B,OAAS,EAAG1N,GAAK,EAAGA,IAAK,CAC1C,IAAI6oB,EAAOjd,EAAM5L,GACJ,MAAT6oB,EACFjd,EAAMkd,OAAO9oB,EAAG,GACE,OAAT6oB,GACTjd,EAAMkd,OAAO9oB,EAAG,GAChB4oB,KACSA,IACThd,EAAMkd,OAAO9oB,EAAG,GAChB4oB,KAKJ,GAAID,EACF,KAAOC,IAAMA,EACXhd,EAAMmd,QAAQ,MAIlB,OAAOnd,EA0OT,SAASgC,EAAQob,EAAIC,GACjB,GAAID,EAAGpb,OAAQ,OAAOob,EAAGpb,OAAOqb,GAEhC,IADA,IAAInb,EAAM,GACD9N,EAAI,EAAGA,EAAIgpB,EAAGtb,OAAQ1N,IACvBipB,EAAED,EAAGhpB,GAAIA,EAAGgpB,IAAKlb,EAAId,KAAKgc,EAAGhpB,IAErC,OAAO8N,EA3OXhO,EAAQopB,QAAU,WAIhB,IAHA,IAAIC,EAAe,GACfC,GAAmB,EAEdppB,EAAIuR,UAAU7D,OAAS,EAAG1N,IAAM,IAAMopB,EAAkBppB,IAAK,CACpE,IAAIqpB,EAAQrpB,GAAK,EAAKuR,UAAUvR,GAAKmR,EAAQuN,MAG7C,GAAoB,iBAAT2K,EACT,MAAM,IAAIC,UAAU,6CACVD,IAIZF,EAAeE,EAAO,IAAMF,EAC5BC,EAAsC,MAAnBC,EAAKE,OAAO,IAWjC,OAASH,EAAmB,IAAM,KAJlCD,EAAeT,EAAe9a,EAAOub,EAAaK,MAAM,MAAM,SAAS1nB,GACrE,QAASA,MACNsnB,GAAkBK,KAAK,OAE6B,KAK3D3pB,EAAQ4pB,UAAY,SAASL,GAC3B,IAAIM,EAAa7pB,EAAQ6pB,WAAWN,GAChCO,EAAqC,MAArBC,EAAOR,GAAO,GAclC,OAXAA,EAAOX,EAAe9a,EAAOyb,EAAKG,MAAM,MAAM,SAAS1nB,GACrD,QAASA,MACN6nB,GAAYF,KAAK,OAERE,IACZN,EAAO,KAELA,GAAQO,IACVP,GAAQ,MAGFM,EAAa,IAAM,IAAMN,GAInCvpB,EAAQ6pB,WAAa,SAASN,GAC5B,MAA0B,MAAnBA,EAAKE,OAAO,IAIrBzpB,EAAQ2pB,KAAO,WACb,IAAIK,EAAQ/e,MAAMnJ,UAAUmoB,MAAM5pB,KAAKoR,UAAW,GAClD,OAAOzR,EAAQ4pB,UAAU9b,EAAOkc,GAAO,SAAShoB,EAAGijB,GACjD,GAAiB,iBAANjjB,EACT,MAAM,IAAIwnB,UAAU,0CAEtB,OAAOxnB,KACN2nB,KAAK,OAMV3pB,EAAQoI,SAAW,SAAS/F,EAAM8F,GAIhC,SAAS+hB,EAAKC,GAEZ,IADA,IAAIllB,EAAQ,EACLA,EAAQklB,EAAIvc,QACE,KAAfuc,EAAIllB,GADiBA,KAK3B,IADA,IAAIC,EAAMilB,EAAIvc,OAAS,EAChB1I,GAAO,GACK,KAAbilB,EAAIjlB,GADOA,KAIjB,OAAID,EAAQC,EAAY,GACjBilB,EAAIF,MAAMhlB,EAAOC,EAAMD,EAAQ,GAfxC5C,EAAOrC,EAAQopB,QAAQ/mB,GAAM0nB,OAAO,GACpC5hB,EAAKnI,EAAQopB,QAAQjhB,GAAI4hB,OAAO,GAsBhC,IALA,IAAIK,EAAYF,EAAK7nB,EAAKqnB,MAAM,MAC5BW,EAAUH,EAAK/hB,EAAGuhB,MAAM,MAExB9b,EAAS0c,KAAKC,IAAIH,EAAUxc,OAAQyc,EAAQzc,QAC5C4c,EAAkB5c,EACb1N,EAAI,EAAGA,EAAI0N,EAAQ1N,IAC1B,GAAIkqB,EAAUlqB,KAAOmqB,EAAQnqB,GAAI,CAC/BsqB,EAAkBtqB,EAClB,MAIJ,IAAIuqB,EAAc,GAClB,IAASvqB,EAAIsqB,EAAiBtqB,EAAIkqB,EAAUxc,OAAQ1N,IAClDuqB,EAAYvd,KAAK,MAKnB,OAFAud,EAAcA,EAAYC,OAAOL,EAAQJ,MAAMO,KAE5Bb,KAAK,MAG1B3pB,EAAQgM,IAAM,IACdhM,EAAQ2qB,UAAY,IAEpB3qB,EAAQ4qB,QAAU,SAAUrB,GAE1B,GADoB,iBAATA,IAAmBA,GAAc,IACxB,IAAhBA,EAAK3b,OAAc,MAAO,IAK9B,IAJA,IAAIuC,EAAOoZ,EAAKsB,WAAW,GACvBC,EAAmB,KAAT3a,EACVjL,GAAO,EACP6lB,GAAe,EACV7qB,EAAIqpB,EAAK3b,OAAS,EAAG1N,GAAK,IAAKA,EAEtC,GAAa,MADbiQ,EAAOoZ,EAAKsB,WAAW3qB,KAEnB,IAAK6qB,EAAc,CACjB7lB,EAAMhF,EACN,YAIJ6qB,GAAe,EAInB,OAAa,IAAT7lB,EAAmB4lB,EAAU,IAAM,IACnCA,GAAmB,IAAR5lB,EAGN,IAEFqkB,EAAKU,MAAM,EAAG/kB,IAiCvBlF,EAAQgrB,SAAW,SAAUzB,EAAM0B,GACjC,IAAI9B,EA/BN,SAAkBI,GACI,iBAATA,IAAmBA,GAAc,IAE5C,IAGIrpB,EAHA+E,EAAQ,EACRC,GAAO,EACP6lB,GAAe,EAGnB,IAAK7qB,EAAIqpB,EAAK3b,OAAS,EAAG1N,GAAK,IAAKA,EAClC,GAA2B,KAAvBqpB,EAAKsB,WAAW3qB,IAGhB,IAAK6qB,EAAc,CACjB9lB,EAAQ/E,EAAI,EACZ,YAEgB,IAATgF,IAGX6lB,GAAe,EACf7lB,EAAMhF,EAAI,GAId,OAAa,IAATgF,EAAmB,GAChBqkB,EAAKU,MAAMhlB,EAAOC,GAMjB8lB,CAASzB,GAIjB,OAHI0B,GAAO9B,EAAEY,QAAQ,EAAIkB,EAAIrd,UAAYqd,IACvC9B,EAAIA,EAAEY,OAAO,EAAGZ,EAAEvb,OAASqd,EAAIrd,SAE1Bub,GAGTnpB,EAAQkrB,QAAU,SAAU3B,GACN,iBAATA,IAAmBA,GAAc,IAQ5C,IAPA,IAAI4B,GAAY,EACZC,EAAY,EACZlmB,GAAO,EACP6lB,GAAe,EAGfM,EAAc,EACTnrB,EAAIqpB,EAAK3b,OAAS,EAAG1N,GAAK,IAAKA,EAAG,CACzC,IAAIiQ,EAAOoZ,EAAKsB,WAAW3qB,GAC3B,GAAa,KAATiQ,GASS,IAATjL,IAGF6lB,GAAe,EACf7lB,EAAMhF,EAAI,GAEC,KAATiQ,GAEkB,IAAdgb,EACFA,EAAWjrB,EACY,IAAhBmrB,IACPA,EAAc,IACK,IAAdF,IAGTE,GAAe,QArBb,IAAKN,EAAc,CACjBK,EAAYlrB,EAAI,EAChB,OAuBR,OAAkB,IAAdirB,IAA4B,IAATjmB,GAEH,IAAhBmmB,GAEgB,IAAhBA,GAAqBF,IAAajmB,EAAM,GAAKimB,IAAaC,EAAY,EACjE,GAEF7B,EAAKU,MAAMkB,EAAUjmB,IAa9B,IAAI6kB,EAA6B,MAApB,KAAKA,QAAQ,GACpB,SAAUuB,EAAKrmB,EAAOsmB,GAAO,OAAOD,EAAIvB,OAAO9kB,EAAOsmB,IACtD,SAAUD,EAAKrmB,EAAOsmB,GAEpB,OADItmB,EAAQ,IAAGA,EAAQqmB,EAAI1d,OAAS3I,GAC7BqmB,EAAIvB,OAAO9kB,EAAOsmB,M,+BC1SjC,IAOIC,EACAC,EARApa,EAAUpR,EAAOD,QAAU,GAU/B,SAAS0rB,IACL,MAAM,IAAItoB,MAAM,mCAEpB,SAASuoB,IACL,MAAM,IAAIvoB,MAAM,qCAsBpB,SAASwoB,EAAWC,GAChB,GAAIL,IAAqBM,WAErB,OAAOA,WAAWD,EAAK,GAG3B,IAAKL,IAAqBE,IAAqBF,IAAqBM,WAEhE,OADAN,EAAmBM,WACZA,WAAWD,EAAK,GAE3B,IAEI,OAAOL,EAAiBK,EAAK,GAC/B,MAAM9d,GACJ,IAEI,OAAOyd,EAAiBnrB,KAAK,KAAMwrB,EAAK,GAC1C,MAAM9d,GAEJ,OAAOyd,EAAiBnrB,KAAK8B,KAAM0pB,EAAK,MAvCnD,WACG,IAEQL,EADsB,mBAAfM,WACYA,WAEAJ,EAEzB,MAAO3d,GACLyd,EAAmBE,EAEvB,IAEQD,EADwB,mBAAjBM,aACcA,aAEAJ,EAE3B,MAAO5d,GACL0d,EAAqBE,GAjB7B,GAwEA,IAEIK,EAFAC,EAAQ,GACRC,GAAW,EAEXC,GAAc,EAElB,SAASC,IACAF,GAAaF,IAGlBE,GAAW,EACPF,EAAape,OACbqe,EAAQD,EAAatB,OAAOuB,GAE5BE,GAAc,EAEdF,EAAMre,QACNye,KAIR,SAASA,IACL,IAAIH,EAAJ,CAGA,IAAII,EAAUV,EAAWQ,GACzBF,GAAW,EAGX,IADA,IAAIX,EAAMU,EAAMre,OACV2d,GAAK,CAGP,IAFAS,EAAeC,EACfA,EAAQ,KACCE,EAAaZ,GACdS,GACAA,EAAaG,GAAYI,MAGjCJ,GAAc,EACdZ,EAAMU,EAAMre,OAEhBoe,EAAe,KACfE,GAAW,EAnEf,SAAyBM,GACrB,GAAIf,IAAuBM,aAEvB,OAAOA,aAAaS,GAGxB,IAAKf,IAAuBE,IAAwBF,IAAuBM,aAEvE,OADAN,EAAqBM,aACdA,aAAaS,GAExB,IAEWf,EAAmBe,GAC5B,MAAOze,GACL,IAEI,OAAO0d,EAAmBprB,KAAK,KAAMmsB,GACvC,MAAOze,GAGL,OAAO0d,EAAmBprB,KAAK8B,KAAMqqB,KAgD7CC,CAAgBH,IAiBpB,SAASI,EAAKb,EAAKc,GACfxqB,KAAK0pB,IAAMA,EACX1pB,KAAKwqB,MAAQA,EAYjB,SAASC,KA5BTvb,EAAQwb,SAAW,SAAUhB,GACzB,IAAInY,EAAO,IAAIzI,MAAMwG,UAAU7D,OAAS,GACxC,GAAI6D,UAAU7D,OAAS,EACnB,IAAK,IAAI1N,EAAI,EAAGA,EAAIuR,UAAU7D,OAAQ1N,IAClCwT,EAAKxT,EAAI,GAAKuR,UAAUvR,GAGhC+rB,EAAM/e,KAAK,IAAIwf,EAAKb,EAAKnY,IACJ,IAAjBuY,EAAMre,QAAiBse,GACvBN,EAAWS,IASnBK,EAAK5qB,UAAUyqB,IAAM,WACjBpqB,KAAK0pB,IAAIiB,MAAM,KAAM3qB,KAAKwqB,QAE9Btb,EAAQxE,MAAQ,UAChBwE,EAAQ0b,SAAU,EAClB1b,EAAQmN,IAAM,GACdnN,EAAQ2b,KAAO,GACf3b,EAAQuF,QAAU,GAClBvF,EAAQ4b,SAAW,GAInB5b,EAAQ6b,GAAKN,EACbvb,EAAQ8b,YAAcP,EACtBvb,EAAQ+b,KAAOR,EACfvb,EAAQgc,IAAMT,EACdvb,EAAQic,eAAiBV,EACzBvb,EAAQkc,mBAAqBX,EAC7Bvb,EAAQmc,KAAOZ,EACfvb,EAAQoc,gBAAkBb,EAC1Bvb,EAAQqc,oBAAsBd,EAE9Bvb,EAAQsc,UAAY,SAAUltB,GAAQ,MAAO,IAE7C4Q,EAAQuc,QAAU,SAAUntB,GACxB,MAAM,IAAI2C,MAAM,qCAGpBiO,EAAQuN,IAAM,WAAc,MAAO,KACnCvN,EAAQwc,MAAQ,SAAUC,GACtB,MAAM,IAAI1qB,MAAM,mCAEpBiO,EAAQ0c,MAAQ,WAAa,OAAO,I,2gEC7IpC,SAAiBvL,GACb,IAAMwL,EAAc,CAAExrB,QAAA,cACT,EAAAsM,KAAmBlO,OAAO0T,QAAO,WAAmC,OAAO0Z,IAAgB,CACpG,mBAA6B,OAAO,GACpC,iBAAiBC,OAOL,EAAA7R,IAAhB,SAA0B8R,EAAiBC,GACvC,OAAOvtB,OAAO0T,QAAO,SAAC8Z,EAAyBC,EAAgB9rB,GAC3D,OAAA2rB,GAAM,SAAAhuB,GAAK,OAAAkuB,EAAS/tB,KAAKguB,EAAUF,EAAQjuB,WAAKuC,EAAWF,KACzD,CACE0rB,aAAc,KAf9B,CAAiB,EAAAzL,QAAA,EAAAA,MAAK,KAsBtB,+BA+EA,OA1EI,sBAAI,qBAAM,C,IAAV,WACI,OAAOrgB,KAAKmsB,YAAcnsB,KAAKmsB,WAAW1gB,QAAU,G,gCAGjD,YAAA2gB,IAAP,SAAWC,EAAoBC,EAA0BC,GAAzD,gBAA+B,IAAAD,WAAA,GACtBtsB,KAAKmsB,aACNnsB,KAAKmsB,WAAa,GAClBnsB,KAAKwsB,UAAY,IAErBxsB,KAAKmsB,WAAWphB,KAAKshB,GACrBrsB,KAAKwsB,UAAWzhB,KAAKuhB,GAEjBxjB,MAAMC,QAAQwjB,IACdA,EAAOxhB,KAAK,CAAE1K,QAAS,WAAM,SAAKosB,OAAOJ,EAAUC,OAIpD,YAAAG,OAAP,SAAcJ,EAAoBC,GAC9B,QAD8B,IAAAA,WAAA,GACzBtsB,KAAKmsB,WAAV,CAKA,IADA,IAAIO,GAAoC,EAC/B3uB,EAAI,EAAGA,EAAIiC,KAAKmsB,WAAW1gB,OAAQ1N,IACxC,GAAIiC,KAAKmsB,WAAWpuB,KAAOsuB,EAAU,CACjC,GAAIrsB,KAAKwsB,UAAWzuB,KAAOuuB,EAIvB,OAFAtsB,KAAKmsB,WAAWtF,OAAO9oB,EAAG,QAC1BiC,KAAKwsB,UAAW3F,OAAO9oB,EAAG,GAG1B2uB,GAAoC,EAKhD,GAAIA,EACA,MAAM,IAAIzrB,MAAM,uFAKjB,YAACnC,OAAO6tB,UAAf,WACI,IAAK3sB,KAAKmsB,WACN,MAAO,GAAGrtB,OAAO6tB,YAErB,IAAMC,EAAY5sB,KAAKmsB,WAAWrE,MAAM,GAClC+E,EAAW7sB,KAAKwsB,UAAW1E,MAAM,GAEvC,OAAO8E,EAAU3S,KAAI,SAACoS,EAAUtuB,GAC5B,kB,IAAC,sDAAmB,OAAAsuB,EAAS1B,MAAMkC,EAAS9uB,GAAIwT,OAClDzS,OAAO6tB,aAGN,YAAAG,OAAP,W,YAAc,kDACV,IAAM9lB,EAAa,G,IACnB,IAAuB,QAAAhH,MAAI,8BAAE,CAAxB,IAAMqsB,EAAQ,QACf,IACIrlB,EAAI+D,KAAKshB,EAAQ,eAAI9a,KACvB,MAAO3F,GACLmhB,QAAQC,MAAMphB,K,iGAGtB,OAAO5E,GAGJ,YAAAqC,QAAP,WACI,OAAQrJ,KAAKmsB,YAAyC,IAA3BnsB,KAAKmsB,WAAW1gB,QAGxC,YAAApL,QAAP,WACIL,KAAKmsB,gBAAa7rB,EAClBN,KAAKwsB,eAAYlsB,GAEzB,EA/EA,GAsFA,aAQI,WACY2sB,GAAA,KAAAA,WAHJ,KAAAC,WAAY,EAyFxB,OA/EI,sBAAI,oBAAK,C,IAAT,sBAmCI,OAlCKltB,KAAKmtB,SACNntB,KAAKmtB,OAAS1uB,OAAO0T,QAAO,SAAC8Z,EAAyBC,EAAgB9rB,GAUlE,IAAIiC,EAiBJ,OA1BK,EAAK8pB,aACN,EAAKA,WAAa,IAAIiB,GAEtB,EAAKH,UAAY,EAAKA,SAASI,oBAAsB,EAAKlB,WAAW9iB,WACrE,EAAK4jB,SAASI,mBAAmB,GAErC,EAAKlB,WAAWC,IAAIH,EAAUC,GAC9B,EAAKoB,kBAAkB,EAAKH,OAAOrB,cAGnCzpB,EAAS,CACLhC,QAAS,WACLgC,EAAOhC,QAAUktB,EAAQC,MACpB,EAAKN,YACN,EAAKf,WAAYM,OAAOR,EAAUC,GAClC7pB,EAAOhC,QAAUktB,EAAQC,MACrB,EAAKP,UAAY,EAAKA,SAASQ,sBAAwB,EAAKtB,WAAY9iB,WACxE,EAAK4jB,SAASQ,qBAAqB,MAK/C3kB,MAAMC,QAAQ3I,IACdA,EAAY2K,KAAK1I,GAGdA,IACR,CACCypB,aAAc,MAIf9rB,KAAKmtB,Q,gCAGN,YAAAG,kBAAV,SAA4BxB,GACxB,GAAqB,IAAjBA,GAAuB9rB,KAAKmsB,WAAhC,CAGA,IAAMuB,EAAQ1tB,KAAKmsB,WAAW1gB,OAC1BiiB,EAAQ5B,GACRiB,QAAQY,KAAK,IAAI1sB,MAAM,0CAA0CysB,EAAK,mEAAmE5B,EAAY,QAQ7J,YAAA8B,KAAA,SAAK7B,GACG/rB,KAAKmsB,YACLnsB,KAAKmsB,WAAWW,OAAOf,IAQzB,YAAA8B,SAAN,SAAeC,G,8GACP9tB,KAAKmsB,WAAL,Y,wCACuB,IAAAnsB,KAAKmsB,YAAU,W,sCAA3BF,EAAQ,QACV,GAAM6B,EAAU7B,K,OAArB,IAAK,SACD,Y,oNAMhB,YAAA5rB,QAAA,WACQL,KAAKmsB,aACLnsB,KAAKmsB,WAAW9rB,UAChBL,KAAKmsB,gBAAa7rB,GAEtBN,KAAKktB,WAAY,GA3FN,EAAAM,MAAQ,aA6F3B,EA/FA,GAAa,EAAAD,UA6Gb,SAAiBQ,GACS,EAAAH,KAAtB,SACII,EACAjC,EACA5B,G,YAAA,IAAAA,WAAA,G,2FAEM8D,EAA6B,GAC7BC,EAAazvB,OAAO0T,OAAO4Z,EAAO,CAEpCoC,UAAW,SAACC,GACR,GAAI3vB,OAAO4vB,SAASJ,GAChB,MAAM,IAAIhtB,MAAM,8CAEpBgtB,EAAUljB,KAAKqjB,MAGvB,IACIJ,EAAQJ,KAAKM,GAEbzvB,OAAO6vB,OAAOL,G,eAEPC,EAAsB,UAEjC,OAAKD,EAAUxiB,YAGCnL,IAAZ6pB,EAAA,MACA,GAAMoE,QAAQC,KAAK,CAACD,QAAQE,IAAIR,GAAY,IAAIM,SAAQ,SAAAtH,GAAW,OAAA0C,WAAW1C,EAASkD,SAHvF,I,cAGA,S,aAEA,SAAMoE,QAAQE,IAAIR,I,OAAlB,S,mCA7BZ,CAAiB,EAAAF,iBAAA,EAAAA,eAAc,M,cC7P/BjwB,EAAOD,QANP,SAAyB6wB,EAAUrP,GACjC,KAAMqP,aAAoBrP,GACxB,MAAM,IAAIgI,UAAU,uC,iBCFxB,kBAQIsH,EACAC,EATJ,EAAS,EAAQ,IACbC,EAAY,EAAQ,KACpBC,EAAS,EAAQ,KACjBC,EAAQ,EAAQ,KAEhBC,EAAO,EAAQ,IAOG,mBAAXlwB,QAA+C,mBAAfA,OAAOmwB,KAChDN,EAAgB7vB,OAAOmwB,IAAI,qBAE3BL,EAAiB9vB,OAAOmwB,IAAI,0BAE5BN,EAAgB,uBAChBC,EAAiB,2BAKnB,IAAIM,EAFJ,aAaA,GAVIF,EAAKG,SACPD,EAAQF,EAAKG,SAAS,QACf,YAAYC,KAAKlgB,EAAQmN,IAAIgT,YAAc,MAClDH,EAAQ,WACN,IAAI/wB,EAAI6wB,EAAKM,OAAO3E,MAAMqE,EAAM1f,WAChCnR,EAAI,SAAWA,EAAEopB,MAAM,MAAMC,KAAK,YAClCuF,QAAQC,MAAM7uB,MAIboxB,EAAOZ,GAAgB,CAE1B,IAAI7E,EAAQ,GACZrrB,OAAOC,eAAe6wB,EAAQZ,EAAe,CAC3C/vB,IAAK,WACH,OAAOkrB,KAQX0F,EAAGC,MAAQ,SAAWC,GACpB,SAASD,EAAOE,EAAIC,GAClB,OAAOF,EAASxxB,KAAKsxB,EAAIG,GAAI,SAAUE,GAEhCA,GACHC,IAGgB,mBAAPF,GACTA,EAAGjF,MAAM3qB,KAAMsP,cAOrB,OAHA7Q,OAAOC,eAAe+wB,EAAOb,EAAgB,CAC3C5vB,MAAO0wB,IAEFD,EAhBE,CAiBRD,EAAGC,OAEND,EAAGO,UAAY,SAAWC,GACxB,SAASD,EAAWJ,GAElBK,EAAarF,MAAM6E,EAAIlgB,WACvBwgB,IAMF,OAHArxB,OAAOC,eAAeqxB,EAAWnB,EAAgB,CAC/C5vB,MAAOgxB,IAEFD,EAVM,CAWZP,EAAGO,WAEF,YAAYX,KAAKlgB,EAAQmN,IAAIgT,YAAc,KAC7CngB,EAAQ6b,GAAG,QAAQ,WACjBmE,EAAMK,EAAOZ,IACb,EAAQ,IAAUsB,MAAMV,EAAOZ,GAAeljB,OAAQ,MAW5D,SAASykB,EAAOV,GAEdX,EAAUW,GACVA,EAAGW,YAAcD,EAEjBV,EAAGY,iBA4MH,SAA2BhJ,EAAMtc,GAC/B,OAAO,IAAI0kB,EAAGa,WAAWjJ,EAAMtc,IA5MjC0kB,EAAGc,kBA+MH,SAA4BlJ,EAAMtc,GAChC,OAAO,IAAI0kB,EAAGe,YAAYnJ,EAAMtc,IA/MlC,IAAI0lB,EAAchB,EAAGiB,SACrBjB,EAAGiB,SACH,SAAmBrJ,EAAMtc,EAAS8kB,GACT,mBAAZ9kB,IACT8kB,EAAK9kB,EAASA,EAAU,MAE1B,OAEA,SAAS4lB,EAAatJ,EAAMtc,EAAS8kB,GACnC,OAAOY,EAAYpJ,EAAMtc,GAAS,SAAU+kB,IACtCA,GAAqB,WAAbA,EAAI7hB,MAAkC,WAAb6hB,EAAI7hB,MAGrB,mBAAP4hB,GACTA,EAAGjF,MAAM3qB,KAAMsP,WACjBwgB,KAJAa,EAAQ,CAACD,EAAa,CAACtJ,EAAMtc,EAAS8kB,QALrCc,CAAYtJ,EAAMtc,EAAS8kB,IAepC,IAAIgB,EAAepB,EAAGqB,UACtBrB,EAAGqB,UACH,SAAoBzJ,EAAM0J,EAAMhmB,EAAS8kB,GAChB,mBAAZ9kB,IACT8kB,EAAK9kB,EAASA,EAAU,MAE1B,OAEA,SAASimB,EAAc3J,EAAM0J,EAAMhmB,EAAS8kB,GAC1C,OAAOgB,EAAaxJ,EAAM0J,EAAMhmB,GAAS,SAAU+kB,IAC7CA,GAAqB,WAAbA,EAAI7hB,MAAkC,WAAb6hB,EAAI7hB,MAGrB,mBAAP4hB,GACTA,EAAGjF,MAAM3qB,KAAMsP,WACjBwgB,KAJAa,EAAQ,CAACI,EAAc,CAAC3J,EAAM0J,EAAMhmB,EAAS8kB,QAL5CmB,CAAa3J,EAAM0J,EAAMhmB,EAAS8kB,IAe3C,IAAIoB,EAAgBxB,EAAGyB,WACnBD,IACFxB,EAAGyB,WACL,SAAqB7J,EAAM0J,EAAMhmB,EAAS8kB,GACjB,mBAAZ9kB,IACT8kB,EAAK9kB,EAASA,EAAU,MAE1B,OAEA,SAASomB,EAAe9J,EAAM0J,EAAMhmB,EAAS8kB,GAC3C,OAAOoB,EAAc5J,EAAM0J,EAAMhmB,GAAS,SAAU+kB,IAC9CA,GAAqB,WAAbA,EAAI7hB,MAAkC,WAAb6hB,EAAI7hB,MAGrB,mBAAP4hB,GACTA,EAAGjF,MAAM3qB,KAAMsP,WACjBwgB,KAJAa,EAAQ,CAACO,EAAe,CAAC9J,EAAM0J,EAAMhmB,EAAS8kB,QAL7CsB,CAAc9J,EAAM0J,EAAMhmB,EAAS8kB,KAe5C,IAAIuB,EAAa3B,EAAG4B,QA4BpB,SAASC,EAAY9f,GACnB,OAAO4f,EAAWxG,MAAM6E,EAAIje,GAG9B,GA/BAie,EAAG4B,QACH,SAAkBhK,EAAMtc,EAAS8kB,GAC/B,IAAIre,EAAO,CAAC6V,GACW,mBAAZtc,EACTyG,EAAKxG,KAAKD,GAEV8kB,EAAK9kB,EAIP,OAFAyG,EAAKxG,MAIL,SAAwB8kB,EAAKyB,GACvBA,GAASA,EAAMC,MACjBD,EAAMC,QAEJ1B,GAAqB,WAAbA,EAAI7hB,MAAkC,WAAb6hB,EAAI7hB,MAIrB,mBAAP4hB,GACTA,EAAGjF,MAAM3qB,KAAMsP,WACjBwgB,KALAa,EAAQ,CAACU,EAAY,CAAC9f,QAPnB8f,EAAW9f,IAqBiB,SAAjCrC,EAAQuF,QAAQmT,OAAO,EAAG,GAAe,CAC3C,IAAI4J,EAAa1C,EAAOU,GACxBa,EAAamB,EAAWnB,WACxBE,EAAciB,EAAWjB,YAG3B,IAAIkB,EAAgBjC,EAAGa,WACnBoB,IACFpB,EAAW1wB,UAAYlB,OAAOY,OAAOoyB,EAAc9xB,WACnD0wB,EAAW1wB,UAAU+xB,KA6DvB,WACE,IAAIC,EAAO3xB,KACX0xB,EAAKC,EAAKvK,KAAMuK,EAAKC,MAAOD,EAAKzyB,MAAM,SAAU2wB,EAAKF,GAChDE,GACE8B,EAAKE,WACPF,EAAKG,UAEPH,EAAKtG,KAAK,QAASwE,KAEnB8B,EAAKhC,GAAKA,EACVgC,EAAKtG,KAAK,OAAQsE,GAClBgC,EAAKI,aArEX,IAAIC,EAAiBxC,EAAGe,YACpByB,IACFzB,EAAY5wB,UAAYlB,OAAOY,OAAO2yB,EAAeryB,WACrD4wB,EAAY5wB,UAAU+xB,KA8ExB,WACE,IAAIC,EAAO3xB,KACX0xB,EAAKC,EAAKvK,KAAMuK,EAAKC,MAAOD,EAAKzyB,MAAM,SAAU2wB,EAAKF,GAChDE,GACF8B,EAAKG,UACLH,EAAKtG,KAAK,QAASwE,KAEnB8B,EAAKhC,GAAKA,EACVgC,EAAKtG,KAAK,OAAQsE,SAnFxBlxB,OAAOC,eAAe8wB,EAAI,aAAc,CACtC5wB,IAAK,WACH,OAAOyxB,GAET9kB,IAAK,SAAU0mB,GACb5B,EAAa4B,GAEftzB,YAAY,EACZuzB,cAAc,IAEhBzzB,OAAOC,eAAe8wB,EAAI,cAAe,CACvC5wB,IAAK,WACH,OAAO2xB,GAEThlB,IAAK,SAAU0mB,GACb1B,EAAc0B,GAEhBtzB,YAAY,EACZuzB,cAAc,IAIhB,IAAIC,EAAiB9B,EACrB5xB,OAAOC,eAAe8wB,EAAI,iBAAkB,CAC1C5wB,IAAK,WACH,OAAOuzB,GAET5mB,IAAK,SAAU0mB,GACbE,EAAiBF,GAEnBtzB,YAAY,EACZuzB,cAAc,IAEhB,IAAIE,EAAkB7B,EAYtB,SAASF,EAAYjJ,EAAMtc,GACzB,OAAI9K,gBAAgBqwB,GACXoB,EAAc9G,MAAM3qB,KAAMsP,WAAYtP,MAEtCqwB,EAAW1F,MAAMlsB,OAAOY,OAAOgxB,EAAW1wB,WAAY2P,WAmBjE,SAASihB,EAAanJ,EAAMtc,GAC1B,OAAI9K,gBAAgBuwB,GACXyB,EAAerH,MAAM3qB,KAAMsP,WAAYtP,MAEvCuwB,EAAY5F,MAAMlsB,OAAOY,OAAOkxB,EAAY5wB,WAAY2P,WAtCnE7Q,OAAOC,eAAe8wB,EAAI,kBAAmB,CAC3C5wB,IAAK,WACH,OAAOwzB,GAET7mB,IAAK,SAAU0mB,GACbG,EAAkBH,GAEpBtzB,YAAY,EACZuzB,cAAc,IAsDhB,IAAIG,EAAU7C,EAAGkC,KAEjB,SAASA,EAAMtK,EAAMwK,EAAO1yB,EAAM0wB,GAIhC,MAHoB,mBAAT1wB,IACT0wB,EAAK1wB,EAAMA,EAAO,MAIpB,SAASozB,EAASlL,EAAMwK,EAAO1yB,EAAM0wB,GACnC,OAAOyC,EAAQjL,EAAMwK,EAAO1yB,GAAM,SAAU2wB,EAAKF,IAC3CE,GAAqB,WAAbA,EAAI7hB,MAAkC,WAAb6hB,EAAI7hB,MAGrB,mBAAP4hB,GACTA,EAAGjF,MAAM3qB,KAAMsP,WACjBwgB,KAJAa,EAAQ,CAAC2B,EAAS,CAAClL,EAAMwK,EAAO1yB,EAAM0wB,QALrC0C,CAAQlL,EAAMwK,EAAO1yB,EAAM0wB,GAepC,OApBAJ,EAAGkC,KAAOA,EAoBHlC,EAGT,SAASmB,EAAS4B,GAChBrD,EAAM,UAAWqD,EAAK,GAAGj0B,KAAMi0B,EAAK,IACpChD,EAAOZ,GAAe5jB,KAAKwnB,GAG7B,SAASzC,IACP,IAAIyC,EAAOhD,EAAOZ,GAAe6D,QAC7BD,IACFrD,EAAM,QAASqD,EAAK,GAAGj0B,KAAMi0B,EAAK,IAClCA,EAAK,GAAG5H,MAAM,KAAM4H,EAAK,KAhQ7Bz0B,EAAOD,QAAUqyB,EAAMnB,EAAMS,IACzBtgB,EAAQmN,IAAIoW,gCAAkCjD,EAAGkD,YACjD50B,EAAOD,QAAUqyB,EAAMV,GACvBA,EAAGkD,WAAY,K,oDC1FnB,8EAKA,IACQC,EASJC,EAVAC,GACIF,EAAgBl0B,OAAOyP,gBACtB,CAAE4kB,UAAW,cAAgBhqB,OAAS,SAAUzK,EAAG00B,GAAK10B,EAAEy0B,UAAYC,IACvE,SAAU10B,EAAG00B,GAAK,IAAK,IAAIlzB,KAAKkzB,EAAOA,EAAEnzB,eAAeC,KAAIxB,EAAEwB,GAAKkzB,EAAElzB,KAClE,SAAUxB,EAAG00B,GAEhB,SAASC,IAAOhzB,KAAKizB,YAAc50B,EADnCs0B,EAAct0B,EAAG00B,GAEjB10B,EAAEsB,UAAkB,OAANozB,EAAat0B,OAAOY,OAAO0zB,IAAMC,EAAGrzB,UAAYozB,EAAEpzB,UAAW,IAAIqzB,KAIvF,GAAuB,iBAAZ9jB,EACP0jB,EAAiC,UAArB1jB,EAAQgkB,cAEnB,GAAyB,iBAAdC,UAAwB,CACpC,IAAIC,EAAYD,UAAUC,UAC1BR,EAAYQ,EAAUC,QAAQ,YAAc,EAGhD,IAAIC,EAAiB,iBACjBC,EAAoB,MACpBC,EAAoB,QACpBC,GAAwB,EAIrB,SAASC,EAA2B10B,GACvC,IAAI20B,EAAMF,EAEV,OADAA,EAAwBz0B,EACjB20B,EAoEX,IAAIC,EAAS,GACTC,EAAS,IACTC,EAAU,+DAeVC,EAAO,WAIP,SAASA,EAAIC,EAAcC,EAAW7M,EAAM8M,EAAOC,EAAUC,QACzC,IAAZA,IAAsBA,GAAU,GACR,iBAAjBJ,GACPh0B,KAAKkf,OAAS8U,EAAa9U,QAAU0U,EACrC5zB,KAAKi0B,UAAYD,EAAaC,WAAaL,EAC3C5zB,KAAKonB,KAAO4M,EAAa5M,MAAQwM,EACjC5zB,KAAKk0B,MAAQF,EAAaE,OAASN,EACnC5zB,KAAKm0B,SAAWH,EAAaG,UAAYP,IAMzC5zB,KAAKkf,OAhEjB,SAAoBA,EAAQkV,GACxB,OAAIA,GAAWX,EACJvU,GAAU0U,GAEhB1U,IAEDA,EAAS,QAENA,GAwDemV,CAAWL,EAAcI,GACvCp0B,KAAKi0B,UAAYA,GAAaL,EAC9B5zB,KAAKonB,KAvDjB,SAA8BlI,EAAQkI,GAKlC,OAAQlI,GACJ,IAAK,QACL,IAAK,OACL,IAAK,OACIkI,EAGIA,EAAK,KAAOyM,IACjBzM,EAAOyM,EAASzM,GAHhBA,EAAOyM,EAOnB,OAAOzM,EAsCakN,CAAqBt0B,KAAKkf,OAAQkI,GAAQwM,GACtD5zB,KAAKk0B,MAAQA,GAASN,EACtB5zB,KAAKm0B,SAAWA,GAAYP,EAxGxC,SAAsB5sB,EAAKotB,GAEvB,IAAKptB,EAAIkY,SACDkV,GAAWX,GACX,MAAM,IAAIxyB,MAAM,2DAAgE+F,EAAIitB,UAAY,aAAiBjtB,EAAIogB,KAAO,cAAkBpgB,EAAIktB,MAAQ,iBAAqBltB,EAAImtB,SAAW,MAOtM,GAAIntB,EAAIkY,SAAWoU,EAAelE,KAAKpoB,EAAIkY,QACvC,MAAM,IAAIje,MAAM,mDAOpB,GAAI+F,EAAIogB,KACJ,GAAIpgB,EAAIitB,WACJ,IAAKV,EAAkBnE,KAAKpoB,EAAIogB,MAC5B,MAAM,IAAInmB,MAAM,iJAIpB,GAAIuyB,EAAkBpE,KAAKpoB,EAAIogB,MAC3B,MAAM,IAAInmB,MAAM,6HA8EpBszB,CAAav0B,KAAMo0B,IAkM3B,OA/LAL,EAAInuB,MAAQ,SAAUnC,GAClB,OAAIA,aAAiBswB,KAGhBtwB,IAG6B,iBAApBA,EAAMwwB,WACa,iBAAnBxwB,EAAM0wB,UACS,iBAAf1wB,EAAM2jB,MACU,iBAAhB3jB,EAAMywB,OACW,iBAAjBzwB,EAAMyb,QACW,mBAAjBzb,EAAMqC,QACS,mBAAfrC,EAAMvB,MACa,mBAAnBuB,EAAM6H,WAExB7M,OAAOC,eAAeq1B,EAAIp0B,UAAW,SAAU,CA0B3Cf,IAAK,WAID,OAAO41B,EAAYx0B,OAEvBrB,YAAY,EACZuzB,cAAc,IAGlB6B,EAAIp0B,UAAUuC,KAAO,SAAUuyB,GAC3B,IAAKA,EACD,OAAOz0B,KAEX,IAAIkf,EAASuV,EAAOvV,OAAQ+U,EAAYQ,EAAOR,UAAW7M,EAAOqN,EAAOrN,KAAM8M,EAAQO,EAAOP,MAAOC,EAAWM,EAAON,SA+BtH,YA9Be7zB,IAAX4e,EACAA,EAASlf,KAAKkf,OAEE,OAAXA,IACLA,EAAS0U,QAEKtzB,IAAd2zB,EACAA,EAAYj0B,KAAKi0B,UAEE,OAAdA,IACLA,EAAYL,QAEHtzB,IAAT8mB,EACAA,EAAOpnB,KAAKonB,KAEE,OAATA,IACLA,EAAOwM,QAEGtzB,IAAV4zB,EACAA,EAAQl0B,KAAKk0B,MAEE,OAAVA,IACLA,EAAQN,QAEKtzB,IAAb6zB,EACAA,EAAWn0B,KAAKm0B,SAEE,OAAbA,IACLA,EAAWP,GAEX1U,IAAWlf,KAAKkf,QACb+U,IAAcj0B,KAAKi0B,WACnB7M,IAASpnB,KAAKonB,MACd8M,IAAUl0B,KAAKk0B,OACfC,IAAan0B,KAAKm0B,SACdn0B,KAEJ,IAAI00B,EAAKxV,EAAQ+U,EAAW7M,EAAM8M,EAAOC,IASpDJ,EAAI7Q,MAAQ,SAAUlkB,EAAOo1B,QACT,IAAZA,IAAsBA,GAAU,GACpC,IAAIO,EAAQb,EAAQc,KAAK51B,GACzB,OAAK21B,EAGE,IAAID,EAAKC,EAAM,IAAMf,EAAQiB,mBAAmBF,EAAM,IAAMf,GAASiB,mBAAmBF,EAAM,IAAMf,GAASiB,mBAAmBF,EAAM,IAAMf,GAASiB,mBAAmBF,EAAM,IAAMf,GAASQ,GAFzL,IAAIM,EAAKd,EAAQA,EAAQA,EAAQA,EAAQA,IAyBxDG,EAAIhX,KAAO,SAAUqK,GACjB,IAAI6M,EAAYL,EAShB,GALIhB,IACAxL,EAAOA,EAAK5iB,QAAQ,MAAOqvB,IAI3BzM,EAAK,KAAOyM,GAAUzM,EAAK,KAAOyM,EAAQ,CAC1C,IAAIiB,EAAM1N,EAAKiM,QAAQQ,EAAQ,IAClB,IAATiB,GACAb,EAAY7M,EAAK2N,UAAU,GAC3B3N,EAAOyM,IAGPI,EAAY7M,EAAK2N,UAAU,EAAGD,GAC9B1N,EAAOA,EAAK2N,UAAUD,IAAQjB,GAGtC,OAAO,IAAIa,EAAK,OAAQT,EAAW7M,EAAMwM,EAAQA,IAErDG,EAAI7zB,KAAO,SAAU80B,GACjB,OAAO,IAAIN,EAAKM,EAAW9V,OAAQ8V,EAAWf,UAAWe,EAAW5N,KAAM4N,EAAWd,MAAOc,EAAWb,WAc3GJ,EAAIp0B,UAAU2L,SAAW,SAAU2pB,GAE/B,YADqB,IAAjBA,IAA2BA,GAAe,GACvCC,EAAal1B,KAAMi1B,IAE9BlB,EAAIp0B,UAAU2M,OAAS,WACnB,OAAOtM,MAEX+zB,EAAIlR,OAAS,SAAUiO,GACnB,GAAKA,EAGA,IAAIA,aAAgBiD,EACrB,OAAOjD,EAGP,IAAIzuB,EAAS,IAAIqyB,EAAK5D,GAGtB,OAFAzuB,EAAO8yB,WAAarE,EAAKsE,SACzB/yB,EAAOgzB,QAAUvE,EAAKwE,OAASC,EAAiBzE,EAAKhrB,OAAS,KACvDzD,EATP,OAAOyuB,GAYRiD,EAxND,GA0NK,YACf,IA6PIyB,EA7PAD,EAAiB3C,EAAY,OAAItyB,EAEjCo0B,EAAQ,SAAUe,GAElB,SAASf,IACL,IAAIgB,EAAmB,OAAXD,GAAmBA,EAAO9K,MAAM3qB,KAAMsP,YAActP,KAGhE,OAFA01B,EAAMP,WAAa,KACnBO,EAAML,QAAU,KACTK,EAuDX,OA5DA7C,EAAU6B,EAAMe,GAOhBh3B,OAAOC,eAAeg2B,EAAK/0B,UAAW,SAAU,CAC5Cf,IAAK,WAID,OAHKoB,KAAKq1B,UACNr1B,KAAKq1B,QAAUb,EAAYx0B,OAExBA,KAAKq1B,SAEhB12B,YAAY,EACZuzB,cAAc,IAElBwC,EAAK/0B,UAAU2L,SAAW,SAAU2pB,GAEhC,YADqB,IAAjBA,IAA2BA,GAAe,GACzCA,EAQMC,EAAal1B,MAAM,IAPrBA,KAAKm1B,aACNn1B,KAAKm1B,WAAaD,EAAal1B,MAAM,IAElCA,KAAKm1B,aAOpBT,EAAK/0B,UAAU2M,OAAS,WACpB,IAAIT,EAAM,CACN8pB,KAAM,GA0BV,OAvBI31B,KAAKq1B,UACLxpB,EAAI/F,OAAS9F,KAAKq1B,QAClBxpB,EAAIypB,KAAOC,GAEXv1B,KAAKm1B,aACLtpB,EAAIupB,SAAWp1B,KAAKm1B,YAGpBn1B,KAAKonB,OACLvb,EAAIub,KAAOpnB,KAAKonB,MAEhBpnB,KAAKkf,SACLrT,EAAIqT,OAASlf,KAAKkf,QAElBlf,KAAKi0B,YACLpoB,EAAIooB,UAAYj0B,KAAKi0B,WAErBj0B,KAAKk0B,QACLroB,EAAIqoB,MAAQl0B,KAAKk0B,OAEjBl0B,KAAKm0B,WACLtoB,EAAIsoB,SAAWn0B,KAAKm0B,UAEjBtoB,GAEJ6oB,EA7DA,CA8DTX,GAEE6B,IAAeJ,EAAK,IACjB,IAAkB,MACrBA,EAAG,IAAkB,MACrBA,EAAG,IAAyB,MAC5BA,EAAG,IAAiB,MACpBA,EAAG,IAA8B,MACjCA,EAAG,IAA+B,MAClCA,EAAG,IAAmB,MACtBA,EAAG,IAA4B,MAC/BA,EAAG,IAAuB,MAC1BA,EAAG,IAAsB,MACzBA,EAAG,IAAwB,MAC3BA,EAAG,IAAsB,MACzBA,EAAG,IAAuB,MAC1BA,EAAG,IAAqB,MACxBA,EAAG,IAAiB,MACpBA,EAAG,IAAkB,MACrBA,EAAG,IAAsB,MACzBA,EAAG,IAAmB,MACtBA,EAAG,IAAkB,MACrBA,GACJ,SAASK,EAAuBC,EAAcC,GAG1C,IAFA,IAAIlqB,OAAMvL,EACN01B,GAAmB,EACdC,EAAM,EAAGA,EAAMH,EAAarqB,OAAQwqB,IAAO,CAChD,IAAIjoB,EAAO8nB,EAAapN,WAAWuN,GAEnC,GAAKjoB,GAAQ,IAAcA,GAAQ,KAC3BA,GAAQ,IAAcA,GAAQ,IAC9BA,GAAQ,IAAmBA,GAAQ,IAC3B,KAATA,GACS,KAATA,GACS,KAATA,GACS,MAATA,GACC+nB,GAAuB,KAAT/nB,GAEO,IAArBgoB,IACAnqB,GAAOqqB,mBAAmBJ,EAAaf,UAAUiB,EAAiBC,IAClED,GAAmB,QAGX11B,IAARuL,IACAA,GAAOiqB,EAAaxO,OAAO2O,QAG9B,MAEW31B,IAARuL,IACAA,EAAMiqB,EAAalO,OAAO,EAAGqO,IAGjC,IAAIE,EAAUP,EAAY5nB,QACV1N,IAAZ61B,IAEyB,IAArBH,IACAnqB,GAAOqqB,mBAAmBJ,EAAaf,UAAUiB,EAAiBC,IAClED,GAAmB,GAGvBnqB,GAAOsqB,IAEmB,IAArBH,IAELA,EAAkBC,IAO9B,OAHyB,IAArBD,IACAnqB,GAAOqqB,mBAAmBJ,EAAaf,UAAUiB,UAEtC11B,IAARuL,EAAoBA,EAAMiqB,EAErC,SAASM,EAA0BhP,GAE/B,IADA,IAAIvb,OAAMvL,EACD21B,EAAM,EAAGA,EAAM7O,EAAK3b,OAAQwqB,IAAO,CACxC,IAAIjoB,EAAOoZ,EAAKsB,WAAWuN,GACd,KAATjoB,GAAmC,KAATA,QACd1N,IAARuL,IACAA,EAAMub,EAAKQ,OAAO,EAAGqO,IAEzBpqB,GAAO+pB,EAAY5nB,SAGP1N,IAARuL,IACAA,GAAOub,EAAK6O,IAIxB,YAAe31B,IAARuL,EAAoBA,EAAMub,EAKrC,SAASoN,EAAY3uB,GACjB,IAAI7G,EAkBJ,OAfIA,EAFA6G,EAAIouB,WAAapuB,EAAIuhB,KAAK3b,OAAS,GAAoB,SAAf5F,EAAIqZ,OAEpC,KAAOrZ,EAAIouB,UAAYpuB,EAAIuhB,KAEH,KAA3BvhB,EAAIuhB,KAAKsB,WAAW,KACrB7iB,EAAIuhB,KAAKsB,WAAW,IAAM,IAAc7iB,EAAIuhB,KAAKsB,WAAW,IAAM,IAAc7iB,EAAIuhB,KAAKsB,WAAW,IAAM,IAAc7iB,EAAIuhB,KAAKsB,WAAW,IAAM,MACxH,KAA3B7iB,EAAIuhB,KAAKsB,WAAW,GAEf7iB,EAAIuhB,KAAK,GAAGiP,cAAgBxwB,EAAIuhB,KAAKQ,OAAO,GAI5C/hB,EAAIuhB,KAEZwL,IACA5zB,EAAQA,EAAMwF,QAAQ,MAAO,OAE1BxF,EAKX,SAASk2B,EAAarvB,EAAKovB,GACvB,IAAIqB,EAAWrB,EAETmB,EADAP,EAEFhqB,EAAM,GACNqT,EAASrZ,EAAIqZ,OAAQ+U,EAAYpuB,EAAIouB,UAAW7M,EAAOvhB,EAAIuhB,KAAM8M,EAAQruB,EAAIquB,MAAOC,EAAWtuB,EAAIsuB,SASvG,GARIjV,IACArT,GAAOqT,EACPrT,GAAO,MAEPooB,GAAwB,SAAX/U,KACbrT,GAAOgoB,EACPhoB,GAAOgoB,GAEPI,EAAW,CACX,IAAIa,EAAMb,EAAUZ,QAAQ,KAC5B,IAAa,IAATyB,EAAY,CAEZ,IAAIyB,EAAWtC,EAAUrM,OAAO,EAAGkN,GACnCb,EAAYA,EAAUrM,OAAOkN,EAAM,IAEtB,KADbA,EAAMyB,EAASlD,QAAQ,MAEnBxnB,GAAOyqB,EAAQC,GAAU,IAIzB1qB,GAAOyqB,EAAQC,EAAS3O,OAAO,EAAGkN,IAAM,GACxCjpB,GAAO,IACPA,GAAOyqB,EAAQC,EAAS3O,OAAOkN,EAAM,IAAI,IAE7CjpB,GAAO,KAIE,KADbipB,GADAb,EAAYA,EAAUoC,eACNhD,QAAQ,MAEpBxnB,GAAOyqB,EAAQrC,GAAW,IAI1BpoB,GAAOyqB,EAAQrC,EAAUrM,OAAO,EAAGkN,IAAM,GACzCjpB,GAAOooB,EAAUrM,OAAOkN,IAGhC,GAAI1N,EAAM,CAEN,GAAIA,EAAK3b,QAAU,GAA4B,KAAvB2b,EAAKsB,WAAW,IAAgD,KAAvBtB,EAAKsB,WAAW,IACzE1a,EAAOoZ,EAAKsB,WAAW,KACf,IAAc1a,GAAQ,KAC9BoZ,EAAO,IAAMxM,OAAO4b,aAAaxoB,EAAO,IAAM,IAAMoZ,EAAKQ,OAAO,SAGnE,GAAIR,EAAK3b,QAAU,GAA4B,KAAvB2b,EAAKsB,WAAW,GAAuB,CAChE,IAAI1a,KAAOoZ,EAAKsB,WAAW,KACf,IAAc1a,GAAQ,KAC9BoZ,EAAOxM,OAAO4b,aAAaxoB,EAAO,IAAM,IAAMoZ,EAAKQ,OAAO,IAIlE/b,GAAOyqB,EAAQlP,GAAM,GAUzB,OARI8M,IACAroB,GAAO,IACPA,GAAOyqB,EAAQpC,GAAO,IAEtBC,IACAtoB,GAAO,IACPA,GAAQopB,EAAyDd,EAA1C0B,EAAuB1B,GAAU,IAErDtoB,I,+BC7kBX,SAAS4qB,EAAkBrtB,EAAQstB,GACjC,IAAK,IAAI34B,EAAI,EAAGA,EAAI24B,EAAMjrB,OAAQ1N,IAAK,CACrC,IAAI44B,EAAaD,EAAM34B,GACvB44B,EAAWh4B,WAAag4B,EAAWh4B,aAAc,EACjDg4B,EAAWzE,cAAe,EACtB,UAAWyE,IAAYA,EAAWC,UAAW,GACjDn4B,OAAOC,eAAe0K,EAAQutB,EAAWr3B,IAAKq3B,IAUlD74B,EAAOD,QANP,SAAsBwhB,EAAawX,EAAYC,GAG7C,OAFID,GAAYJ,EAAkBpX,EAAY1f,UAAWk3B,GACrDC,GAAaL,EAAkBpX,EAAayX,GACzCzX,I,8BCbT,SAAS0X,EAAgBv4B,GAIvB,OAHAV,EAAOD,QAAUk5B,EAAkBt4B,OAAOyP,eAAiBzP,OAAOu4B,eAAiB,SAAyBx4B,GAC1G,OAAOA,EAAEs0B,WAAar0B,OAAOu4B,eAAex4B,IAEvCu4B,EAAgBv4B,GAGzBV,EAAOD,QAAUk5B,G,6BCLjBl5B,EAAQo5B,aAAe,SAAUC,GAC/B,OAAOz4B,OAAOC,gBAAe,WAC3B,GAA+C,mBAApC4Q,UAAUA,UAAU7D,OAAS,GAEtC,OAAO,IAAI8iB,QAAQ,CAACtH,EAASkQ,KAC3B7nB,UAAUA,UAAU7D,QAAU,CAACokB,EAAKhkB,KAClC,GAAIgkB,EAAK,OAAOsH,EAAOtH,GACvB5I,EAAQpb,IAEVyD,UAAU7D,SACVyrB,EAAGvM,MAAM3qB,KAAMsP,aARwC4nB,EAAGvM,MAAM3qB,KAAMsP,aAWzE,OAAQ,CAAEtQ,MAAOk4B,EAAG54B,QAGzBT,EAAQu5B,YAAc,SAAUF,GAC9B,OAAOz4B,OAAOC,gBAAe,WAC3B,MAAMkxB,EAAKtgB,UAAUA,UAAU7D,OAAS,GACxC,GAAkB,mBAAPmkB,EAAmB,OAAOsH,EAAGvM,MAAM3qB,KAAMsP,WAC/C4nB,EAAGvM,MAAM3qB,KAAMsP,WAAW+nB,KAAKx4B,GAAK+wB,EAAG,KAAM/wB,GAAI+wB,KACrD,OAAQ,CAAE5wB,MAAOk4B,EAAG54B,S,6BCtBzB,MACMg5B,GAASC,EADL,EAAQ,IAAgBN,cACjB,EAAQ,MACnBO,EAAa,EAAQ,KAE3B15B,EAAOD,QAAU,CACfy5B,OAAQA,EACRE,WAAYA,EAEZC,OAAQH,EACRI,WAAYF,EACZG,UAAWL,EACXM,cAAeJ,I,8BCZjB,Y,2DAMA,SAASK,EAAS15B,GACd,IAAK,IAAI0B,KAAK1B,EAAQN,EAAQ+B,eAAeC,KAAIhC,EAAQgC,GAAK1B,EAAE0B,IAEpEpB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAM84B,EAAKC,EAAQ,IACbC,EAAaD,EAAQ,KAC3Bl6B,EAAQo6B,YAAcD,EAAWC,YACjCp6B,EAAQq6B,aAAeF,EAAWE,aAClCr6B,EAAQs6B,aAAeH,EAAWG,aAClCt6B,EAAQu6B,aAAeJ,EAAWI,aAClCv6B,EAAQw6B,aAAeL,EAAWK,aAClCx6B,EAAQy6B,aAAeN,EAAWM,aAClCz6B,EAAQ06B,aAAeP,EAAWO,aAClC16B,EAAQ26B,aAAeR,EAAWQ,aAClC36B,EAAQ46B,aAAeT,EAAWS,aAClC56B,EAAQ66B,aAAeV,EAAWU,aAClC76B,EAAQ86B,aAAeX,EAAWW,aAClC96B,EAAQ+6B,cAAgBZ,EAAWY,cACnC/6B,EAAQg7B,WAAab,EAAWa,WAChCh7B,EAAQi7B,iBAAmBd,EAAWc,iBACtCj7B,EAAQk7B,kBAAoBf,EAAWe,kBACvCl7B,EAAQm7B,kBAAoBhB,EAAWgB,kBACvCn7B,EAAQo7B,kBAAoBjB,EAAWiB,kBACvCp7B,EAAQq7B,kBAAoBlB,EAAWkB,kBACvCr7B,EAAQs7B,kBAAoBnB,EAAWmB,kBACvCt7B,EAAQu7B,kBAAoBpB,EAAWoB,kBACvCv7B,EAAQw7B,kBAAoBrB,EAAWqB,kBACvCx7B,EAAQy7B,kBAAoBtB,EAAWsB,kBACvCz7B,EAAQ07B,kBAAoBvB,EAAWuB,kBACvC17B,EAAQ27B,kBAAoBxB,EAAWwB,kBACvC,IAAMC,EAAkB1B,EAAQ,IAChCl6B,EAAQ67B,cAAgBD,EAAgBC,cACxC77B,EAAQ87B,oBAAsBF,EAAgBE,oBAC9C97B,EAAQ+7B,iBAAmBH,EAAgBG,iBAC3C/7B,EAAQg8B,oBAAsBJ,EAAgBI,oBAC9C,IAAMC,EAAkB/B,EAAQ,IAChCl6B,EAAQk8B,cAAgBD,EAAgBC,cACxCl8B,EAAQm8B,oBAAsBF,EAAgBE,oBAC9Cn8B,EAAQo8B,iBAAmBH,EAAgBG,iBAC3Cp8B,EAAQq8B,oBAAsBJ,EAAgBI,oBAC9C,IAAMC,EAAWpC,EAAQ,IACzBl6B,EAAQsC,WAAag6B,EAASh6B,WAC9BtC,EAAQwiB,MAAQ8Z,EAAS9Z,MACzBxiB,EAAQ0vB,QAAU4M,EAAS5M,QAC3B,IAAM6M,EAAiBrC,EAAQ,KAC/Bl6B,EAAQw8B,wBAA0BD,EAAeC,wBACjDx8B,EAAQy8B,kBAAoBF,EAAeE,kBAC3C,IAGIC,EAIAC,EAPEC,EAAc1C,EAAQ,KAC5BF,EAASE,EAAQ,MACjBF,EAASE,EAAQ,MAEjB,SAAWwC,GACPA,EAAmBnoB,KAAO,IAAI4lB,EAAWc,iBAAiB,mBAD9D,CAEGyB,IAAuBA,EAAqB,KAE/C,SAAWC,GACPA,EAAqBpoB,KAAO,IAAI4lB,EAAWc,iBAAiB,cADhE,CAEG0B,IAAyBA,EAAuB,K,IAY/CE,EAsCAC,EAiBAC,EAIAC,EAIAC,EAtEJj9B,EAAQk9B,aAHJ,aAAc,WAIlBl9B,EAAQm9B,WAAav8B,OAAO6vB,OAAO,CAC/BtB,MAAO,aACPW,KAAM,aACNxM,KAAM,aACN8Z,IAAK,eAGT,SAAWP,GACPA,EAAMA,EAAK,IAAU,GAAK,MAC1BA,EAAMA,EAAK,SAAe,GAAK,WAC/BA,EAAMA,EAAK,QAAc,GAAK,UAHlC,CAIGA,EAAQ78B,EAAQ68B,QAAU78B,EAAQ68B,MAAQ,KAC7C,SAAWA,GAiBPA,EAAMQ,WAhBN,SAAoBl8B,GAChB,IAAK84B,EAAGpzB,OAAO1F,GACX,OAAO07B,EAAMS,IAGjB,OADAn8B,EAAQA,EAAMq3B,eAEV,IAAK,MACD,OAAOqE,EAAMS,IACjB,IAAK,WACD,OAAOT,EAAMU,SACjB,IAAK,UACD,OAAOV,EAAMW,QACjB,QACI,OAAOX,EAAMS,MAgBzBT,EAAMpvB,SAZN,SAAkBtM,GACd,OAAQA,GACJ,KAAK07B,EAAMS,IACP,MAAO,MACX,KAAKT,EAAMU,SACP,MAAO,WACX,KAAKV,EAAMW,QACP,MAAO,UACX,QACI,MAAO,QA3BvB,CA+BGX,EAAQ78B,EAAQ68B,QAAU78B,EAAQ68B,MAAQ,KAE7C,SAAWC,GACPA,EAAW,KAAW,OACtBA,EAAW,KAAW,OAF1B,CAGiB98B,EAAQ88B,cAAgB98B,EAAQ88B,YAAc,KAC/D,SAAWA,GAUPA,EAAYO,WATZ,SAAoBl8B,GAEhB,MAAc,UADdA,EAAQA,EAAMq3B,eAEHsE,EAAYW,KAGZX,EAAYhf,MAP/B,CAWGgf,EAAc98B,EAAQ88B,cAAgB98B,EAAQ88B,YAAc,KAE/D,SAAWC,GACPA,EAAqBxoB,KAAO,IAAI4lB,EAAWc,iBAAiB,0BADhE,CAEG8B,EAAuB/8B,EAAQ+8B,uBAAyB/8B,EAAQ+8B,qBAAuB,KAE1F,SAAWC,GACPA,EAAqBzoB,KAAO,IAAI4lB,EAAWc,iBAAiB,0BADhE,CAEG+B,EAAuBh9B,EAAQg9B,uBAAyBh9B,EAAQg9B,qBAAuB,KAE1F,SAAWC,GAIPA,EAAiBA,EAAgB,OAAa,GAAK,SAInDA,EAAiBA,EAAgB,SAAe,GAAK,WAIrDA,EAAiBA,EAAgB,iBAAuB,GAAK,mBAZjE,CAaGA,EAAmBj9B,EAAQi9B,mBAAqBj9B,EAAQi9B,iBAAmB,K,IAiB1ES,EAhBEC,E,YACF,WAAYxtB,EAAMpG,GAAS,wBACvB,wBAAMA,KACDoG,KAAOA,EACZvP,OAAOyP,eAAP,KAA4BstB,EAAgB77B,WAHrB,E,mBADDsB,QAuB9B,SAASw6B,EAAyBC,EAAeC,EAAeC,EAAQC,GACpE,IASIC,EAMAC,EAfAC,EAAiB,EACjBC,EAA4B,EAC5BC,EAA+B,EAE/BC,OAAqB77B,EACrB87B,EAAkB39B,OAAOY,OAAO,MAChCg9B,OAA0B/7B,EAC1Bg8B,EAAuB79B,OAAOY,OAAO,MACrCk9B,EAAmB,IAAItwB,IAEvBuwB,EAAe,IAAI/B,EAAYgC,UAC/BC,EAAmBj+B,OAAOY,OAAO,MACjCs9B,EAAgBl+B,OAAOY,OAAO,MAC9Bu9B,EAAQlC,EAAMS,IACd0B,EAAclC,EAAYhf,KAE1BmhB,EAAQvB,EAAgBwB,IACxBC,EAAe,IAAI7C,EAAS5M,QAC5B0P,EAAe,IAAI9C,EAAS5M,QAC5B2P,EAA+B,IAAI/C,EAAS5M,QAC5C4P,EAA2B,IAAIhD,EAAS5M,QACxC6P,EAAiB,IAAIjD,EAAS5M,QAClC,SAAS8P,EAAsBp4B,GAC3B,MAAO,OAASA,EAAGqG,WAavB,SAASgyB,EAAkBxT,EAAOliB,GAXlC,IAAgC3C,EAYxB+yB,EAAWuF,iBAAiB31B,GAC5BkiB,EAAMve,IAAI8xB,EAAsBz1B,EAAQ3C,IAAK2C,GAExCowB,EAAWwF,kBAAkB51B,GAClCkiB,EAAMve,IAfC,QADiBtG,EAgBS2C,EAAQ3C,IAdlC,kBAAoBi3B,GAA8B5wB,WAGlD,OAASrG,EAAGqG,WAW2B1D,GAG9CkiB,EAAMve,IAVH,UAAY0wB,GAA2B3wB,WAUF1D,GAGhD,SAAS61B,EAAmBC,IAG5B,SAASC,IACL,OAAOb,IAAUvB,EAAgBqC,UAErC,SAASC,IACL,OAAOf,IAAUvB,EAAgBuC,OAErC,SAASC,IACL,OAAOjB,IAAUvB,EAAgByC,SAErC,SAASC,IACDnB,IAAUvB,EAAgBwB,KAAOD,IAAUvB,EAAgBqC,YAC3Dd,EAAQvB,EAAgBuC,OACxBb,EAAarP,UAAKttB,IAc1B,SAAS49B,IACDpC,GAA+B,IAAtBU,EAAa2B,OAG1BrC,EAAQsC,GAAa,WACjBtC,OAAQx7B,EAIhB,WACI,GAA0B,IAAtBk8B,EAAa2B,KACb,OAEJ,IAAIv2B,EAAU40B,EAAahK,QAC3B,IACQwF,EAAWuF,iBAAiB31B,GAyCxC,SAAuBy2B,GACnB,GAAIN,IAGA,OAEJ,SAASO,EAAMC,EAAeC,EAAQC,GAClC,IAAI72B,EAAU,CACV82B,QAzII,MA0IJz5B,GAAIo5B,EAAep5B,IAEnBs5B,aAAyBvG,EAAWY,cACpChxB,EAAQolB,MAAQuR,EAAcI,SAG9B/2B,EAAQvF,YAA2B,IAAlBk8B,EAA2B,KAAOA,EAEvDK,EAAqBh3B,EAAS42B,EAAQC,GACtC9C,EAAckD,MAAMj3B,GAExB,SAASk3B,EAAW9R,EAAOwR,EAAQC,GAC/B,IAAI72B,EAAU,CACV82B,QAvJI,MAwJJz5B,GAAIo5B,EAAep5B,GACnB+nB,MAAOA,EAAM2R,UAEjBC,EAAqBh3B,EAAS42B,EAAQC,GACtC9C,EAAckD,MAAMj3B,IAiQ5B,SAA8BA,GAC1B,GAAIg1B,IAAUlC,EAAMS,MAAQY,EACxB,OAEJ,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,SAAWzzB,EAAQm3B,SACnCjO,EAAO,WAAH,OAAcwK,KAAK0D,UAAUp3B,EAAQm3B,OAAQ,KAAM,GAAnD,SAERhD,EAAOd,IAAP,4BAAgCrzB,EAAQ42B,OAAxC,eAAqD52B,EAAQ3C,GAA7D,OAAsE6rB,QAGtEmO,EAAc,kBAAmBr3B,GA7PrCs3B,CAAqBb,GACrB,IACIjsB,EACA+sB,EAFAzzB,EAAU0wB,EAAgBiC,EAAeG,QAGzC9yB,IACA0G,EAAO1G,EAAQ0G,KACf+sB,EAAiBzzB,EAAQ0zB,SAE7B,IAAIX,EAAYY,KAAKC,MACrB,GAAIH,GAAkBhD,EAAoB,CACtC,IAAIoD,EAAqB,IAAInF,EAAeC,wBACxCmF,EAAW5kB,OAAOyjB,EAAep5B,IACrC03B,EAAc6C,GAAYD,EAC1B,IACI,IAAIE,EAgBAC,EAdAD,OAD0B,IAA1BpB,EAAeU,aAA+B,IAAT3sB,GAA2C,IAAxBA,EAAKutB,eAC7CR,EACVA,EAAeI,EAAmBK,OAClCzD,EAAmBkC,EAAeG,OAAQe,EAAmBK,OAE9D9H,EAAGtN,MAAM6T,EAAeU,eAAqB,IAAT3sB,GAAmBA,EAAKutB,eAAiB,GAClER,EACVA,EAAc,WAAd,IAAkBd,EAAeU,QAAjC,QAAyCQ,EAAmBK,SAC5DzD,EAAkB,WAAlB,GAAmBkC,EAAeG,QAAlC,SAA6CH,EAAeU,QAA5D,CAAoEQ,EAAmBK,SAG7ET,EACVA,EAAed,EAAeU,OAAQQ,EAAmBK,OACzDzD,EAAmBkC,EAAeG,OAAQH,EAAeU,OAAQQ,EAAmBK,OAGzFH,EAIIC,EAAQrI,KACbqI,EAAQrI,MAAK,SAACkH,UACH5B,EAAc6C,GACrBlB,EAAMC,EAAeF,EAAeG,OAAQC,MAC7C,SAAAzR,UACQ2P,EAAc6C,GACjBxS,aAAiBgL,EAAWY,cAC5BkG,EAAW9R,EAAOqR,EAAeG,OAAQC,GAEpCzR,GAAS8K,EAAGpzB,OAAOsoB,EAAMplB,SAC9Bk3B,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWgH,cAAnD,kBAA6ExB,EAAeG,OAA5F,iCAA2HxR,EAAMplB,UAAYy2B,EAAeG,OAAQC,GAG/KK,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWgH,cAAnD,kBAA6ExB,EAAeG,OAA5F,wDAA0JH,EAAeG,OAAQC,cAK7L9B,EAAc6C,GACrBlB,EAAMmB,EAAepB,EAAeG,OAAQC,YAtBrC9B,EAAc6C,GA9CjC,SAAsBn9B,EAAQm8B,EAAQC,QAGnB,IAAXp8B,IACAA,EAAS,MAEb,IAAIuF,EAAU,CACV82B,QArKI,MAsKJz5B,GAAIo5B,EAAep5B,GACnB5C,OAAQA,GAEZu8B,EAAqBh3B,EAAS42B,EAAQC,GACtC9C,EAAckD,MAAMj3B,GAmCZk4B,CAAaL,EAAepB,EAAeG,OAAQC,IAwB3D,MAAOzR,UACI2P,EAAc6C,GACjBxS,aAAiBgL,EAAWY,cAC5B0F,EAAMtR,EAAOqR,EAAeG,OAAQC,GAE/BzR,GAAS8K,EAAGpzB,OAAOsoB,EAAMplB,SAC9Bk3B,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWgH,cAAnD,kBAA6ExB,EAAeG,OAA5F,iCAA2HxR,EAAMplB,UAAYy2B,EAAeG,OAAQC,GAG/KK,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWgH,cAAnD,kBAA6ExB,EAAeG,OAA5F,wDAA0JH,EAAeG,OAAQC,SAKpMK,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWkH,eAAnD,2BAAuF1B,EAAeG,SAAWH,EAAeG,OAAQC,GA1J/IuB,CAAcp4B,GAETowB,EAAWiI,sBAAsBr4B,GAqMlD,SAA4BA,GACxB,GAAIm2B,IAEA,OAEJ,IACImC,EADA9tB,OAAO9R,EAEX,GAAIsH,EAAQ42B,SAAWjE,EAAmBnoB,KAAKosB,OAC3C0B,EAAsB,SAACnB,GACnB,IAAI95B,EAAK85B,EAAO95B,GACZmM,EAASurB,EAAc/hB,OAAO3V,IAC9BmM,GACAA,EAAO+uB,cAId,CACD,IAAIz0B,EAAU4wB,EAAqB10B,EAAQ42B,QACvC9yB,IACAw0B,EAAsBx0B,EAAQ0zB,QAC9BhtB,EAAO1G,EAAQ0G,MAGvB,GAAI8tB,GAAuB7D,EACvB,KAoHR,SAAmCz0B,GAC/B,GAAIg1B,IAAUlC,EAAMS,MAAQY,GAAUn0B,EAAQ42B,SAAW3D,EAAqBzoB,KAAKosB,OAC/E,OAEJ,GAAI3B,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,UAEZvK,EADAlpB,EAAQm3B,OACD,WAAH,OAAczD,KAAK0D,UAAUp3B,EAAQm3B,OAAQ,KAAM,GAAnD,QAGG,+BAGfhD,EAAOd,IAAP,iCAAqCrzB,EAAQ42B,OAA7C,MAAyD1N,QAGzDmO,EAAc,uBAAwBr3B,GApIlCw4B,CAA0Bx4B,QACH,IAAnBA,EAAQm3B,aAA+B,IAAT3sB,GAA2C,IAAxBA,EAAKutB,eACtDO,EAAsBA,IAAwB7D,EAAwBz0B,EAAQ42B,QAEzE1G,EAAGtN,MAAM5iB,EAAQm3B,eAAqB,IAAT3sB,GAAmBA,EAAKutB,eAAiB,GAC3EO,EAAsBA,EAAmB,WAAnB,IAAuBt4B,EAAQm3B,SAAU1C,EAAuB,WAAvB,GAAwBz0B,EAAQ42B,QAAhC,SAA2C52B,EAAQm3B,UAGlHmB,EAAsBA,EAAoBt4B,EAAQm3B,QAAU1C,EAAwBz0B,EAAQ42B,OAAQ52B,EAAQm3B,QAGpH,MAAO/R,GACCA,EAAMplB,QACNg0B,EAAO5O,MAAP,gCAAsCplB,EAAQ42B,OAA9C,kCAA8ExR,EAAMplB,UAGpFg0B,EAAO5O,MAAP,gCAAsCplB,EAAQ42B,OAA9C,gCAKRtB,EAA6BtP,KAAKhmB,GAlP9By4B,CAAmBz4B,GAEdowB,EAAWwF,kBAAkB51B,GAwJ9C,SAAwB04B,GACpB,GAAIvC,IAEA,OAEJ,GAA2B,OAAvBuC,EAAgBr7B,GACZq7B,EAAgBtT,MAChB4O,EAAO5O,MAAP,4DAAkEsO,KAAK0D,UAAUsB,EAAgBtT,WAAO1sB,EAAW,KAGnHs7B,EAAO5O,MAAP,oFAGH,CACD,IAAI1tB,EAAMsb,OAAO0lB,EAAgBr7B,IAC7Bs7B,EAAkB7D,EAAiBp9B,GAEvC,GAyLR,SAA+BsI,EAAS24B,GACpC,GAAI3D,IAAUlC,EAAMS,MAAQY,EACxB,OAEJ,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EAcX,GAbIs8B,IAAUlC,EAAMW,UACZzzB,EAAQolB,OAASplB,EAAQolB,MAAM8D,KAC/BA,EAAO,eAAH,OAAkBwK,KAAK0D,UAAUp3B,EAAQolB,MAAM8D,KAAM,KAAM,GAA3D,QAGAlpB,EAAQvF,OACRyuB,EAAO,WAAH,OAAcwK,KAAK0D,UAAUp3B,EAAQvF,OAAQ,KAAM,GAAnD,aAEmB,IAAlBuF,EAAQolB,QACb8D,EAAO,4BAIfyP,EAAiB,CACjB,IAAIvT,EAAQplB,EAAQolB,MAAR,2BAAoCplB,EAAQolB,MAAMplB,QAAlD,aAA8DA,EAAQolB,MAAMhf,KAA5E,MAAuF,GACnG+tB,EAAOd,IAAP,6BAAiCsF,EAAgB/B,OAAjD,eAA8D52B,EAAQ3C,GAAtE,iBAAiFo6B,KAAKC,MAAQiB,EAAgBC,WAA9G,cAA8HxT,GAAS8D,QAGvIiL,EAAOd,IAAP,4BAAgCrzB,EAAQ3C,GAAxC,qCAA+E6rB,QAInFmO,EAAc,mBAAoBr3B,GAtNlC64B,CAAsBH,EAAiBC,GACnCA,EAAiB,QACV7D,EAAiBp9B,GACxB,IACI,GAAIghC,EAAgBtT,MAAO,CACvB,IAAIA,EAAQsT,EAAgBtT,MAC5BuT,EAAgBpJ,OAAO,IAAIa,EAAWY,cAAc5L,EAAMhf,KAAMgf,EAAMplB,QAASolB,EAAM8D,WAEpF,SAA+B,IAA3BwP,EAAgBj+B,OAIrB,MAAM,IAAIpB,MAAM,wBAHhBs/B,EAAgBtZ,QAAQqZ,EAAgBj+B,SAMhD,MAAO2qB,GACCA,EAAMplB,QACNg0B,EAAO5O,MAAP,4BAAkCuT,EAAgB/B,OAAlD,kCAAkFxR,EAAMplB,UAGxFg0B,EAAO5O,MAAP,4BAAkCuT,EAAgB/B,OAAlD,8BA3LRkC,CAAe94B,GAkP3B,SAA8BA,GAC1B,IAAKA,EAED,YADAg0B,EAAO5O,MAAM,2BAGjB4O,EAAO5O,MAAP,oFAA0FsO,KAAK0D,UAAUp3B,EAAS,KAAM,KAExH,IAAI04B,EAAkB14B,EACtB,GAAIkwB,EAAGpzB,OAAO47B,EAAgBr7B,KAAO6yB,EAAGlzB,OAAO07B,EAAgBr7B,IAAK,CAChE,IAAI3F,EAAMsb,OAAO0lB,EAAgBr7B,IAC7B07B,EAAkBjE,EAAiBp9B,GACnCqhC,GACAA,EAAgBxJ,OAAO,IAAIl2B,MAAM,uEA3PjC2/B,CAAqBh5B,GAX7B,QAeIs2B,KAvBA2C,OAVRnF,EAAcoF,QAAQ7C,GACtBvC,EAAcqF,SAPd,SAA0B/T,GACtBgQ,EAAapP,KAAK,CAACZ,OAAO1sB,OAAWA,OAOzCq7B,EAAcmF,QAAQ7C,GACtBtC,EAAcoF,SANd,SAA2BjQ,GACvBkM,EAAapP,KAAKkD,MAsCtB,IAAIzE,EAAW,SAACzkB,GACZ,IAGI,GAAIowB,EAAWiI,sBAAsBr4B,IAAYA,EAAQ42B,SAAWjE,EAAmBnoB,KAAKosB,OAAQ,CAChG,IAAIl/B,EAAM+9B,EAAsBz1B,EAAQm3B,OAAO95B,IAC3C+7B,EAAWxE,EAAa59B,IAAIU,GAChC,GAAI04B,EAAWuF,iBAAiByD,GAAW,CACvC,IAAIC,EAAWpF,GAAYA,EAAS4B,mBAAqB5B,EAAS4B,mBAAmBuD,EAAUvD,QAAsBA,EACrH,GAAIwD,SAAgC,IAAnBA,EAASjU,YAAwC,IAApBiU,EAAS5+B,QAKnD,OAJAm6B,EAAY,OAAQl9B,GACpB2hC,EAASh8B,GAAK+7B,EAAS/7B,GACvB25B,EAAqBqC,EAAUr5B,EAAQ42B,OAAQa,KAAKC,YACpD3D,EAAckD,MAAMoC,IAKhC3D,EAAkBd,EAAc50B,GAjBpC,QAoBIs2B,MAmOR,SAASgD,EAAoBt5B,GACzB,GAAIg1B,IAAUlC,EAAMS,KAAQY,EAG5B,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,SAAWzzB,EAAQm3B,SACnCjO,EAAO,WAAH,OAAcwK,KAAK0D,UAAUp3B,EAAQm3B,OAAQ,KAAM,GAAnD,SAERhD,EAAOd,IAAP,2BAA+BrzB,EAAQ42B,OAAvC,eAAoD52B,EAAQ3C,GAA5D,OAAqE6rB,QAGrEmO,EAAc,eAAgBr3B,GAGtC,SAASu5B,EAAyBv5B,GAC9B,GAAIg1B,IAAUlC,EAAMS,KAAQY,EAG5B,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,UAEZvK,EADAlpB,EAAQm3B,OACD,WAAH,OAAczD,KAAK0D,UAAUp3B,EAAQm3B,OAAQ,KAAM,GAAnD,QAGG,+BAGfhD,EAAOd,IAAP,gCAAoCrzB,EAAQ42B,OAA5C,MAAwD1N,QAGxDmO,EAAc,oBAAqBr3B,GAG3C,SAASg3B,EAAqBh3B,EAAS42B,EAAQC,GAC3C,GAAI7B,IAAUlC,EAAMS,KAAQY,EAG5B,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,UACZzzB,EAAQolB,OAASplB,EAAQolB,MAAM8D,KAC/BA,EAAO,eAAH,OAAkBwK,KAAK0D,UAAUp3B,EAAQolB,MAAM8D,KAAM,KAAM,GAA3D,QAGAlpB,EAAQvF,OACRyuB,EAAO,WAAH,OAAcwK,KAAK0D,UAAUp3B,EAAQvF,OAAQ,KAAM,GAAnD,aAEmB,IAAlBuF,EAAQolB,QACb8D,EAAO,4BAInBiL,EAAOd,IAAP,4BAAgCuD,EAAhC,eAA6C52B,EAAQ3C,GAArD,uCAAsFo6B,KAAKC,MAAQb,EAAnG,MAAkH3N,QAGlHmO,EAAc,gBAAiBr3B,GAqEvC,SAASq3B,EAAc7sB,EAAMxK,GACzB,GAAKm0B,GAAUa,IAAUlC,EAAMS,IAA/B,CAGA,IAAMiG,EAAa,CACfC,cAAc,EACdjvB,OACAxK,UACA05B,UAAWjC,KAAKC,OAEpBvD,EAAOd,IAAImG,IAEf,SAASG,KACL,GAAI1D,IACA,MAAM,IAAIrC,EAAgBV,EAAiBgD,OAAQ,yBAEvD,GAAIC,IACA,MAAM,IAAIvC,EAAgBV,EAAiBkD,SAAU,2BAQ7D,SAASwD,KACL,IAAK7D,IACD,MAAM,IAAI18B,MAAM,wBAGxB,SAASwgC,GAAgBC,GACrB,YAAc,IAAVA,EACO,KAGAA,EAGf,SAASC,GAAqBvvB,EAAM2sB,GAChC,IAAI18B,EACAs9B,EAAiBvtB,EAAKutB,eAC1B,OAAQA,GACJ,KAAK,EACDt9B,EAAS,KACT,MACJ,KAAK,EACDA,EAASo/B,GAAgB1C,EAAO,IAChC,MACJ,QACI18B,EAAS,GACT,IAAK,IAAItE,EAAI,EAAGA,EAAIghC,EAAOtzB,QAAU1N,EAAI4hC,EAAgB5hC,IACrDsE,EAAO0I,KAAK02B,GAAgB1C,EAAOhhC,KAEvC,GAAIghC,EAAOtzB,OAASk0B,EAChB,IAAK,IAAI5hC,EAAIghC,EAAOtzB,OAAQ1N,EAAI4hC,EAAgB5hC,IAC5CsE,EAAO0I,KAAK,MAK5B,OAAO1I,EAEX,IAAIu/B,GAAa,CACbC,iBAAkB,SAACzvB,GAEf,IAAIosB,EACAsD,EAFJP,KADmC,2BAAXxC,EAAW,iCAAXA,EAAW,kBAInC,GAAIjH,EAAGpzB,OAAO0N,GAEV,OADAosB,EAASpsB,EACD2sB,EAAOtzB,QACX,KAAK,EACDq2B,EAAgB,KAChB,MACJ,KAAK,EACDA,EAAgB/C,EAAO,GACvB,MACJ,QACI+C,EAAgB/C,OAKxBP,EAASpsB,EAAKosB,OACdsD,EAAgBH,GAAqBvvB,EAAM2sB,GAE/C,IAAIgD,EAAsB,CACtBrD,QArjBI,MAsjBJF,OAAQA,EACRO,OAAQ+C,GAEZX,EAAyBY,GACzBpG,EAAckD,MAAMkD,IAExBC,eAAgB,SAAC5vB,EAAMgtB,GACnBmC,KACIzJ,EAAG/3B,KAAKqS,GACRiqB,EAA0BjqB,EAErBgtB,IACDtH,EAAGpzB,OAAO0N,GACVkqB,EAAqBlqB,GAAQ,CAAEA,UAAM9R,EAAW8+B,WAGhD9C,EAAqBlqB,EAAKosB,QAAU,CAAEpsB,OAAMgtB,aAIxD6C,WAAY,SAACj3B,EAAO40B,EAAOR,GACvB,GAAI7C,EAAiBlxB,IAAIu0B,GACrB,MAAM,IAAI3+B,MAAJ,qCAAwC2+B,EAAxC,wBAGV,OADArD,EAAiBhxB,IAAIq0B,EAAOR,GACrB,CACH/+B,QAAS,WACLk8B,EAAgB,OAAQqD,MAIpCsC,aAAc,SAACl3B,EAAO40B,EAAO5gC,GACzB4iC,GAAWC,iBAAiBrH,EAAqBpoB,KAAM,CAAEwtB,QAAO5gC,WAEpEmjC,oBAAqBhF,EAAyBpR,MAC9CqW,YAAa,SAAChwB,GAGV,IAAIosB,EACAsD,EAHJP,KACAC,KAF8B,IAK9B,IAAI5B,OAAQt/B,EALkB,mBAAXy+B,EAAW,iCAAXA,EAAW,kBAM9B,GAAIjH,EAAGpzB,OAAO0N,GAEV,OADAosB,EAASpsB,EACD2sB,EAAOtzB,QACX,KAAK,EACDq2B,EAAgB,KAChB,MACJ,KAAK,EAEG1H,EAAeE,kBAAkBvqB,GAAGgvB,EAAO,KAC3C+C,EAAgB,KAChBlC,EAAQb,EAAO,IAGf+C,EAAgBL,GAAgB1C,EAAO,IAE3C,MACJ,QACI,IAAMnY,EAAOmY,EAAOtzB,OAAS,EACzB2uB,EAAeE,kBAAkBvqB,GAAGgvB,EAAOnY,KAC3CgZ,EAAQb,EAAOnY,GAEXkb,EADkB,IAAlB/C,EAAOtzB,OACSg2B,GAAgB1C,EAAO,IAGvBA,EAAOjX,MAAM,EAAGlB,GAAM3M,KAAI,SAAAjb,GAAK,OAAIyiC,GAAgBziC,OAIvE8iC,EAAgB/C,EAAO9kB,KAAI,SAAAjb,GAAK,OAAIyiC,GAAgBziC,UAK/D,CACDw/B,EAASpsB,EAAKosB,OACdsD,EAAgBH,GAAqBvvB,EAAM2sB,GAC3C,IAAIY,EAAiBvtB,EAAKutB,eAC1BC,EAAQxF,EAAeE,kBAAkBvqB,GAAGgvB,EAAOY,IAAmBZ,EAAOY,QAAkBr/B,EAEnG,IAAI2E,EAAK+2B,IACL35B,EAAS,IAAIksB,SAAQ,SAACtH,EAASkQ,GAC/B,IAAIkH,EAAiB,CACjBK,QAzoBA,MA0oBAz5B,GAAIA,EACJu5B,OAAQA,EACRO,OAAQ+C,GAERvB,EAAkB,CAAE/B,OAAQA,EAAQgC,WAAYnB,KAAKC,MAAOrY,UAASkQ,UACzE+J,EAAoB7C,GACpB,IACI1C,EAAckD,MAAMR,GAExB,MAAOzyB,GAEH20B,EAAgBpJ,OAAO,IAAIa,EAAWY,cAAcZ,EAAWa,WAAWwJ,kBAAmBz2B,EAAEhE,QAAUgE,EAAEhE,QAAU,mBACrH24B,EAAkB,KAElBA,IACA7D,EAAiB9hB,OAAO3V,IAAOs7B,MAQvC,OALIX,GACAA,EAAM0C,yBAAwB,WAC1BV,GAAWC,iBAAiBtH,EAAmBnoB,KAAM,CAAEnN,UAGxD5C,GAEXkgC,UAAW,SAACnwB,EAAMgtB,GACdmC,KACIzJ,EAAG/3B,KAAKqS,GACR+pB,EAAqB/pB,EAEhBgtB,IACDtH,EAAGpzB,OAAO0N,GACVgqB,EAAgBhqB,GAAQ,CAAEA,UAAM9R,EAAW8+B,WAG3ChD,EAAgBhqB,EAAKosB,QAAU,CAAEpsB,OAAMgtB,aAInDxC,MAAO,SAAC4F,EAAQC,EAASC,GACrB,IAAIC,GAAoB,EACpBC,EAAejI,EAAYhf,UACQ,IAAnC+mB,IACI5K,EAAE,QAAS4K,GACXC,EAAoBD,GAGpBC,EAAoBD,EAA+Bb,mBAAoB,EACvEe,EAAeF,EAA+B7F,aAAelC,EAAYhf,OAIjFkhB,EAAc+F,EAEV7G,GAHJa,EAAQ4F,KAEM9H,EAAMS,SACP76B,EAGAmiC,GAETE,GAAsB9E,KAAeE,KACrC6D,GAAWC,iBAAiBjH,EAAqBxoB,KAAM,CAAEpT,MAAO07B,EAAMpvB,SAASk3B,MAGvFzB,QAAS/D,EAAajR,MACtB+U,QAAS7D,EAAalR,MACtB8W,wBAAyB3F,EAA6BnR,MACtD+W,UAAW1F,EAAerR,MAC1B1rB,QAAS,WACL,IAAI09B,IAAJ,CAGAjB,EAAQvB,EAAgByC,SACxBZ,EAAexP,UAAKttB,GACpB,IAAI0sB,EAAQ,IAAI/rB,MAAM,4BACtBxC,OAAOskC,KAAKrG,GAAkBvwB,SAAQ,SAAC7M,GACnCo9B,EAAiBp9B,GAAK63B,OAAOnK,MAEjC0P,EAAmBj+B,OAAOY,OAAO,MACjCs9B,EAAgBl+B,OAAOY,OAAO,MAC9Bm9B,EAAe,IAAI/B,EAAYgC,UAE3B3E,EAAG/3B,KAAK47B,EAAct7B,UACtBs7B,EAAct7B,UAEdy3B,EAAG/3B,KAAK27B,EAAcr7B,UACtBq7B,EAAcr7B,YAGtB2iC,OAAQ,WACJzB,KAhPR,WACI,GAAI5D,IACA,MAAM,IAAInC,EAAgBV,EAAiBmI,iBAAkB,mCA+O7DC,GACApG,EAAQvB,EAAgBqC,UACxBlC,EAAcsH,OAAO3W,IAEzB8W,QAAS,WAELpW,QAAQkO,IAAI,aAkBpB,OAfA2G,GAAWI,eAAenH,EAAqBzoB,MAAM,SAAC2sB,GAC9CnC,IAAUlC,EAAMS,KAAQY,GAG5BA,EAAOd,IAAI8D,EAAOn3B,QAASg1B,IAAUlC,EAAMW,QAAU0D,EAAOqE,aAAU9iC,MAE1EshC,GAAWI,eAAexH,EAAqBpoB,MAAM,SAAC2sB,GAClD,IAAMK,EAAU7C,EAAiB39B,IAAImgC,EAAOa,OACxCR,EACAA,EAAQL,EAAO//B,OAGfm+B,EAAyBvP,KAAKmR,MAG/B6C,GAhxBX/jC,EAAQ29B,gBAAkBA,EAE1B,SAAW6H,GAKPA,EAAmBtzB,GAJnB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAagsB,EAAG/3B,KAAK+L,EAAU2xB,qBAH9C,CAMwB5/B,EAAQwlC,qBAAuBxlC,EAAQwlC,mBAAqB,KAEpF,SAAW9H,GACPA,EAAgBA,EAAe,IAAU,GAAK,MAC9CA,EAAgBA,EAAe,UAAgB,GAAK,YACpDA,EAAgBA,EAAe,OAAa,GAAK,SACjDA,EAAgBA,EAAe,SAAe,GAAK,WAJvD,CAKGA,IAAoBA,EAAkB,KAixBzC19B,EAAQylC,wBARR,SAAiCC,EAAOC,EAAQ5H,EAAQC,GAIpD,IAVqB78B,EAYrB,OALK48B,IACDA,EAAS/9B,EAAQm9B,YAIdS,OAXiB,KADHz8B,EAUQukC,GAThBP,aAAoC,IAAfhkC,EAAM+yB,KASFwR,EAAQ,IAAI9J,EAAgBE,oBAAoB4J,GAP1F,SAAyBvkC,GACrB,YAAuB,IAAhBA,EAAM6/B,YAAkC,IAAd7/B,EAAM+D,IAO1B0gC,CAAgBD,GAAUA,EAAS,IAAI1J,EAAgBE,oBAAoBwJ,GACxC5H,EAAQC,M,+CC97B5D,IAAI6H,EAAU,EAAQ,IAElBC,EAAwB,EAAQ,IAUpC7lC,EAAOD,QARP,SAAoC+lC,EAAM1lC,GACxC,OAAIA,GAA2B,WAAlBwlC,EAAQxlC,IAAsC,mBAATA,EAI3CylC,EAAsBC,GAHpB1lC,I,gBCNX,IAAIgQ,EAAiB,EAAQ,IAiB7BpQ,EAAOD,QAfP,SAAmBgmC,EAAUC,GAC3B,GAA0B,mBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIzc,UAAU,sDAGtBwc,EAASlkC,UAAYlB,OAAOY,OAAOykC,GAAcA,EAAWnkC,UAAW,CACrEszB,YAAa,CACXj0B,MAAO6kC,EACPjN,UAAU,EACV1E,cAAc,KAGd4R,GAAY51B,EAAe21B,EAAUC,K,8BCd3C;;;;;;;AAUA,IAAIC,EAAS,EAAQ,KACjBC,EAAU,EAAQ,KAClBj7B,EAAU,EAAQ,IAmDtB,SAASk7B,IACP,OAAOC,EAAOC,oBACV,WACA,WAGN,SAASC,EAAczS,EAAMlmB,GAC3B,GAAIw4B,IAAex4B,EACjB,MAAM,IAAI44B,WAAW,8BAcvB,OAZIH,EAAOC,qBAETxS,EAAO,IAAI2S,WAAW74B,IACjBqnB,UAAYoR,EAAOvkC,WAGX,OAATgyB,IACFA,EAAO,IAAIuS,EAAOz4B,IAEpBkmB,EAAKlmB,OAASA,GAGTkmB,EAaT,SAASuS,EAAQr0B,EAAK00B,EAAkB94B,GACtC,KAAKy4B,EAAOC,qBAAyBnkC,gBAAgBkkC,GACnD,OAAO,IAAIA,EAAOr0B,EAAK00B,EAAkB94B,GAI3C,GAAmB,iBAARoE,EAAkB,CAC3B,GAAgC,iBAArB00B,EACT,MAAM,IAAItjC,MACR,qEAGJ,OAAOujC,EAAYxkC,KAAM6P,GAE3B,OAAO3P,EAAKF,KAAM6P,EAAK00B,EAAkB94B,GAW3C,SAASvL,EAAMyxB,EAAM3yB,EAAOulC,EAAkB94B,GAC5C,GAAqB,iBAAVzM,EACT,MAAM,IAAIqoB,UAAU,yCAGtB,MAA2B,oBAAhBod,aAA+BzlC,aAAiBylC,YA6H7D,SAA0B9S,EAAMnH,EAAOka,EAAYj5B,GAGjD,GAFA+e,EAAMma,WAEFD,EAAa,GAAKla,EAAMma,WAAaD,EACvC,MAAM,IAAIL,WAAW,6BAGvB,GAAI7Z,EAAMma,WAAaD,GAAcj5B,GAAU,GAC7C,MAAM,IAAI44B,WAAW,6BAIrB7Z,OADiBlqB,IAAfokC,QAAuCpkC,IAAXmL,EACtB,IAAI64B,WAAW9Z,QACHlqB,IAAXmL,EACD,IAAI64B,WAAW9Z,EAAOka,GAEtB,IAAIJ,WAAW9Z,EAAOka,EAAYj5B,GAGxCy4B,EAAOC,qBAETxS,EAAOnH,GACFsI,UAAYoR,EAAOvkC,UAGxBgyB,EAAOiT,EAAcjT,EAAMnH,GAE7B,OAAOmH,EAvJEkT,CAAgBlT,EAAM3yB,EAAOulC,EAAkB94B,GAGnC,iBAAVzM,EAwFb,SAAqB2yB,EAAMjtB,EAAQogC,GACT,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAKZ,EAAOa,WAAWD,GACrB,MAAM,IAAIzd,UAAU,8CAGtB,IAAI5b,EAAwC,EAA/Bk5B,EAAWjgC,EAAQogC,GAG5BE,GAFJrT,EAAOyS,EAAazS,EAAMlmB,IAERozB,MAAMn6B,EAAQogC,GAE5BE,IAAWv5B,IAIbkmB,EAAOA,EAAK7J,MAAM,EAAGkd,IAGvB,OAAOrT,EA5GEuJ,CAAWvJ,EAAM3yB,EAAOulC,GAsJnC,SAAqB5S,EAAMsT,GACzB,GAAIf,EAAOgB,SAASD,GAAM,CACxB,IAAI7b,EAA4B,EAAtB+b,EAAQF,EAAIx5B,QAGtB,OAAoB,KAFpBkmB,EAAOyS,EAAazS,EAAMvI,IAEjB3d,OACAkmB,GAGTsT,EAAIG,KAAKzT,EAAM,EAAG,EAAGvI,GACduI,GAGT,GAAIsT,EAAK,CACP,GAA4B,oBAAhBR,aACRQ,EAAII,kBAAkBZ,aAAgB,WAAYQ,EACpD,MAA0B,iBAAfA,EAAIx5B,SA+8CLwmB,EA/8CkCgT,EAAIx5B,SAg9CrCwmB,EA/8CFmS,EAAazS,EAAM,GAErBiT,EAAcjT,EAAMsT,GAG7B,GAAiB,WAAbA,EAAI7yB,MAAqBrJ,EAAQk8B,EAAInU,MACvC,OAAO8T,EAAcjT,EAAMsT,EAAInU,MAw8CrC,IAAgBmB,EAp8Cd,MAAM,IAAI5K,UAAU,sFA9Kbie,CAAW3T,EAAM3yB,GA4B1B,SAASumC,EAAYpH,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAI9W,UAAU,oCACf,GAAI8W,EAAO,EAChB,MAAM,IAAIkG,WAAW,wCA4BzB,SAASG,EAAa7S,EAAMwM,GAG1B,GAFAoH,EAAWpH,GACXxM,EAAOyS,EAAazS,EAAMwM,EAAO,EAAI,EAAoB,EAAhBgH,EAAQhH,KAC5C+F,EAAOC,oBACV,IAAK,IAAIpmC,EAAI,EAAGA,EAAIogC,IAAQpgC,EAC1B4zB,EAAK5zB,GAAK,EAGd,OAAO4zB,EAwCT,SAASiT,EAAejT,EAAMnH,GAC5B,IAAI/e,EAAS+e,EAAM/e,OAAS,EAAI,EAA4B,EAAxB05B,EAAQ3a,EAAM/e,QAClDkmB,EAAOyS,EAAazS,EAAMlmB,GAC1B,IAAK,IAAI1N,EAAI,EAAGA,EAAI0N,EAAQ1N,GAAK,EAC/B4zB,EAAK5zB,GAAgB,IAAXysB,EAAMzsB,GAElB,OAAO4zB,EA+DT,SAASwT,EAAS15B,GAGhB,GAAIA,GAAUw4B,IACZ,MAAM,IAAII,WAAW,0DACaJ,IAAa34B,SAAS,IAAM,UAEhE,OAAgB,EAATG,EAsFT,SAASk5B,EAAYjgC,EAAQogC,GAC3B,GAAIZ,EAAOgB,SAASxgC,GAClB,OAAOA,EAAO+G,OAEhB,GAA2B,oBAAhBg5B,aAA6D,mBAAvBA,YAAYe,SACxDf,YAAYe,OAAO9gC,IAAWA,aAAkB+/B,aACnD,OAAO//B,EAAOigC,WAEM,iBAAXjgC,IACTA,EAAS,GAAKA,GAGhB,IAAI0kB,EAAM1kB,EAAO+G,OACjB,GAAY,IAAR2d,EAAW,OAAO,EAItB,IADA,IAAIqc,GAAc,IAEhB,OAAQX,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAO1b,EACT,IAAK,OACL,IAAK,QACL,UAAK9oB,EACH,OAAOolC,EAAYhhC,GAAQ+G,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAAN2d,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOuc,EAAcjhC,GAAQ+G,OAC/B,QACE,GAAIg6B,EAAa,OAAOC,EAAYhhC,GAAQ+G,OAC5Cq5B,GAAY,GAAKA,GAAUzO,cAC3BoP,GAAc,GAMtB,SAASG,EAAcd,EAAUhiC,EAAOC,GACtC,IAAI0iC,GAAc,EAclB,SALcnlC,IAAVwC,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQ9C,KAAKyL,OACf,MAAO,GAOT,SAJYnL,IAARyC,GAAqBA,EAAM/C,KAAKyL,UAClC1I,EAAM/C,KAAKyL,QAGT1I,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACTD,KAAW,GAGT,MAAO,GAKT,IAFKgiC,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOe,EAAS7lC,KAAM8C,EAAOC,GAE/B,IAAK,OACL,IAAK,QACH,OAAO+iC,EAAU9lC,KAAM8C,EAAOC,GAEhC,IAAK,QACH,OAAOgjC,EAAW/lC,KAAM8C,EAAOC,GAEjC,IAAK,SACL,IAAK,SACH,OAAOijC,EAAYhmC,KAAM8C,EAAOC,GAElC,IAAK,SACH,OAAOkjC,EAAYjmC,KAAM8C,EAAOC,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOmjC,EAAalmC,KAAM8C,EAAOC,GAEnC,QACE,GAAI0iC,EAAa,MAAM,IAAIpe,UAAU,qBAAuByd,GAC5DA,GAAYA,EAAW,IAAIzO,cAC3BoP,GAAc,GAStB,SAASU,EAAMpT,EAAGvzB,EAAGrB,GACnB,IAAIJ,EAAIg1B,EAAEvzB,GACVuzB,EAAEvzB,GAAKuzB,EAAE50B,GACT40B,EAAE50B,GAAKJ,EAmIT,SAASqoC,EAAsBf,EAAQpT,EAAKyS,EAAYI,EAAUnZ,GAEhE,GAAsB,IAAlB0Z,EAAO55B,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAfi5B,GACTI,EAAWJ,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAEhBA,GAAcA,EACV2B,MAAM3B,KAERA,EAAa/Y,EAAM,EAAK0Z,EAAO55B,OAAS,GAItCi5B,EAAa,IAAGA,EAAaW,EAAO55B,OAASi5B,GAC7CA,GAAcW,EAAO55B,OAAQ,CAC/B,GAAIkgB,EAAK,OAAQ,EACZ+Y,EAAaW,EAAO55B,OAAS,OAC7B,GAAIi5B,EAAa,EAAG,CACzB,IAAI/Y,EACC,OAAQ,EADJ+Y,EAAa,EAUxB,GALmB,iBAARzS,IACTA,EAAMiS,EAAOhkC,KAAK+xB,EAAK6S,IAIrBZ,EAAOgB,SAASjT,GAElB,OAAmB,IAAfA,EAAIxmB,QACE,EAEH66B,EAAajB,EAAQpT,EAAKyS,EAAYI,EAAUnZ,GAClD,GAAmB,iBAARsG,EAEhB,OADAA,GAAY,IACRiS,EAAOC,qBACiC,mBAAjCG,WAAW3kC,UAAU0zB,QAC1B1H,EACK2Y,WAAW3kC,UAAU0zB,QAAQn1B,KAAKmnC,EAAQpT,EAAKyS,GAE/CJ,WAAW3kC,UAAU4mC,YAAYroC,KAAKmnC,EAAQpT,EAAKyS,GAGvD4B,EAAajB,EAAQ,CAAEpT,GAAOyS,EAAYI,EAAUnZ,GAG7D,MAAM,IAAItE,UAAU,wCAGtB,SAASif,EAActe,EAAKiK,EAAKyS,EAAYI,EAAUnZ,GACrD,IA0BI5tB,EA1BAyoC,EAAY,EACZC,EAAYze,EAAIvc,OAChBi7B,EAAYzU,EAAIxmB,OAEpB,QAAiBnL,IAAbwkC,IAEe,UADjBA,EAAWlqB,OAAOkqB,GAAUzO,gBACY,UAAbyO,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAI9c,EAAIvc,OAAS,GAAKwmB,EAAIxmB,OAAS,EACjC,OAAQ,EAEV+6B,EAAY,EACZC,GAAa,EACbC,GAAa,EACbhC,GAAc,EAIlB,SAAS3S,EAAM4U,EAAK5oC,GAClB,OAAkB,IAAdyoC,EACKG,EAAI5oC,GAEJ4oC,EAAIC,aAAa7oC,EAAIyoC,GAKhC,GAAI7a,EAAK,CACP,IAAIkb,GAAc,EAClB,IAAK9oC,EAAI2mC,EAAY3mC,EAAI0oC,EAAW1oC,IAClC,GAAIg0B,EAAK/J,EAAKjqB,KAAOg0B,EAAKE,GAAqB,IAAhB4U,EAAoB,EAAI9oC,EAAI8oC,IAEzD,IADoB,IAAhBA,IAAmBA,EAAa9oC,GAChCA,EAAI8oC,EAAa,IAAMH,EAAW,OAAOG,EAAaL,OAEtC,IAAhBK,IAAmB9oC,GAAKA,EAAI8oC,GAChCA,GAAc,OAKlB,IADInC,EAAagC,EAAYD,IAAW/B,EAAa+B,EAAYC,GAC5D3oC,EAAI2mC,EAAY3mC,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAI+oC,GAAQ,EACHC,EAAI,EAAGA,EAAIL,EAAWK,IAC7B,GAAIhV,EAAK/J,EAAKjqB,EAAIgpC,KAAOhV,EAAKE,EAAK8U,GAAI,CACrCD,GAAQ,EACR,MAGJ,GAAIA,EAAO,OAAO/oC,EAItB,OAAQ,EAeV,SAASipC,EAAUL,EAAKjiC,EAAQuiC,EAAQx7B,GACtCw7B,EAAS/kB,OAAO+kB,IAAW,EAC3B,IAAIC,EAAYP,EAAIl7B,OAASw7B,EACxBx7B,GAGHA,EAASyW,OAAOzW,IACHy7B,IACXz7B,EAASy7B,GAJXz7B,EAASy7B,EASX,IAAIC,EAASziC,EAAO+G,OACpB,GAAI07B,EAAS,GAAM,EAAG,MAAM,IAAI9f,UAAU,sBAEtC5b,EAAS07B,EAAS,IACpB17B,EAAS07B,EAAS,GAEpB,IAAK,IAAIppC,EAAI,EAAGA,EAAI0N,IAAU1N,EAAG,CAC/B,IAAIqpC,EAASC,SAAS3iC,EAAOkjB,OAAW,EAAJ7pB,EAAO,GAAI,IAC/C,GAAIsoC,MAAMe,GAAS,OAAOrpC,EAC1B4oC,EAAIM,EAASlpC,GAAKqpC,EAEpB,OAAOrpC,EAGT,SAASupC,EAAWX,EAAKjiC,EAAQuiC,EAAQx7B,GACvC,OAAO87B,EAAW7B,EAAYhhC,EAAQiiC,EAAIl7B,OAASw7B,GAASN,EAAKM,EAAQx7B,GAG3E,SAAS+7B,EAAYb,EAAKjiC,EAAQuiC,EAAQx7B,GACxC,OAAO87B,EAq6BT,SAAuBpe,GAErB,IADA,IAAIse,EAAY,GACP1pC,EAAI,EAAGA,EAAIorB,EAAI1d,SAAU1N,EAEhC0pC,EAAU18B,KAAyB,IAApBoe,EAAIT,WAAW3qB,IAEhC,OAAO0pC,EA36BWC,CAAahjC,GAASiiC,EAAKM,EAAQx7B,GAGvD,SAASk8B,EAAahB,EAAKjiC,EAAQuiC,EAAQx7B,GACzC,OAAO+7B,EAAWb,EAAKjiC,EAAQuiC,EAAQx7B,GAGzC,SAASm8B,EAAajB,EAAKjiC,EAAQuiC,EAAQx7B,GACzC,OAAO87B,EAAW5B,EAAcjhC,GAASiiC,EAAKM,EAAQx7B,GAGxD,SAASo8B,EAAWlB,EAAKjiC,EAAQuiC,EAAQx7B,GACvC,OAAO87B,EAk6BT,SAAyBpe,EAAK2e,GAG5B,IAFA,IAAI1pC,EAAG2pC,EAAIC,EACPP,EAAY,GACP1pC,EAAI,EAAGA,EAAIorB,EAAI1d,WACjBq8B,GAAS,GAAK,KADa/pC,EAGhCK,EAAI+qB,EAAIT,WAAW3qB,GACnBgqC,EAAK3pC,GAAK,EACV4pC,EAAK5pC,EAAI,IACTqpC,EAAU18B,KAAKi9B,GACfP,EAAU18B,KAAKg9B,GAGjB,OAAON,EA/6BWQ,CAAevjC,EAAQiiC,EAAIl7B,OAASw7B,GAASN,EAAKM,EAAQx7B,GAkF9E,SAASw6B,EAAaU,EAAK7jC,EAAOC,GAChC,OAAc,IAAVD,GAAeC,IAAQ4jC,EAAIl7B,OACtBs4B,EAAOmE,cAAcvB,GAErB5C,EAAOmE,cAAcvB,EAAI7e,MAAMhlB,EAAOC,IAIjD,SAAS+iC,EAAWa,EAAK7jC,EAAOC,GAC9BA,EAAMolB,KAAKC,IAAIue,EAAIl7B,OAAQ1I,GAI3B,IAHA,IAAI8I,EAAM,GAEN9N,EAAI+E,EACD/E,EAAIgF,GAAK,CACd,IAQMolC,EAAYC,EAAWC,EAAYC,EARrCC,EAAY5B,EAAI5oC,GAChByqC,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,EAEJ,GAAIxqC,EAAI0qC,GAAoB1lC,EAG1B,OAAQ0lC,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EAEyB,MAAV,KADlBJ,EAAaxB,EAAI5oC,EAAI,OAEnBuqC,GAA6B,GAAZC,IAAqB,EAAoB,GAAbJ,GACzB,MAClBK,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAaxB,EAAI5oC,EAAI,GACrBqqC,EAAYzB,EAAI5oC,EAAI,GACQ,MAAV,IAAboqC,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZC,IAAoB,IAAoB,GAAbJ,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEE,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAaxB,EAAI5oC,EAAI,GACrBqqC,EAAYzB,EAAI5oC,EAAI,GACpBsqC,EAAa1B,EAAI5oC,EAAI,GACO,MAAV,IAAboqC,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZC,IAAoB,IAAqB,GAAbJ,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CE,EAAYF,GAMJ,OAAdE,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACb38B,EAAId,KAAKy9B,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvB38B,EAAId,KAAKy9B,GACTzqC,GAAK0qC,EAGP,OAQF,SAAgCC,GAC9B,IAAItf,EAAMsf,EAAWj9B,OACrB,GAAI2d,GAJqB,KAKvB,OAAOxO,OAAO4b,aAAa7L,MAAM/P,OAAQ8tB,GAI3C,IAAI78B,EAAM,GACN9N,EAAI,EACR,KAAOA,EAAIqrB,GACTvd,GAAO+O,OAAO4b,aAAa7L,MACzB/P,OACA8tB,EAAW5gB,MAAM/pB,EAAGA,GAdC,OAiBzB,OAAO8N,EAvBA88B,CAAsB98B,GA98B/BhO,EAAQqmC,OAASA,EACjBrmC,EAAQ+qC,WAoTR,SAAqBn9B,IACdA,GAAUA,IACbA,EAAS,GAEX,OAAOy4B,EAAO2E,OAAOp9B,IAvTvB5N,EAAQirC,kBAAoB,GA0B5B5E,EAAOC,yBAAqD7jC,IAA/BivB,EAAO4U,oBAChC5U,EAAO4U,oBAQX,WACE,IACE,IAAInc,EAAM,IAAIsc,WAAW,GAEzB,OADAtc,EAAI8K,UAAY,CAACA,UAAWwR,WAAW3kC,UAAWopC,IAAK,WAAc,OAAO,KACvD,KAAd/gB,EAAI+gB,OACiB,mBAAjB/gB,EAAIghB,UACuB,IAAlChhB,EAAIghB,SAAS,EAAG,GAAGrE,WACvB,MAAO/4B,GACP,OAAO,GAfPq9B,GAKJprC,EAAQomC,WAAaA,IAkErBC,EAAOgF,SAAW,KAGlBhF,EAAOiF,SAAW,SAAUnhB,GAE1B,OADAA,EAAI8K,UAAYoR,EAAOvkC,UAChBqoB,GA2BTkc,EAAOhkC,KAAO,SAAUlB,EAAOulC,EAAkB94B,GAC/C,OAAOvL,EAAK,KAAMlB,EAAOulC,EAAkB94B,IAGzCy4B,EAAOC,sBACTD,EAAOvkC,UAAUmzB,UAAYwR,WAAW3kC,UACxCukC,EAAOpR,UAAYwR,WACG,oBAAXxlC,QAA0BA,OAAOsqC,SACxClF,EAAOplC,OAAOsqC,WAAalF,GAE7BzlC,OAAOC,eAAewlC,EAAQplC,OAAOsqC,QAAS,CAC5CpqC,MAAO,KACPkzB,cAAc,KAiCpBgS,EAAO2E,MAAQ,SAAU1K,EAAMkL,EAAMvE,GACnC,OArBF,SAAgBnT,EAAMwM,EAAMkL,EAAMvE,GAEhC,OADAS,EAAWpH,GACPA,GAAQ,EACHiG,EAAazS,EAAMwM,QAEf79B,IAAT+oC,EAIyB,iBAAbvE,EACVV,EAAazS,EAAMwM,GAAMkL,KAAKA,EAAMvE,GACpCV,EAAazS,EAAMwM,GAAMkL,KAAKA,GAE7BjF,EAAazS,EAAMwM,GAQnB0K,CAAM,KAAM1K,EAAMkL,EAAMvE,IAiBjCZ,EAAOM,YAAc,SAAUrG,GAC7B,OAAOqG,EAAY,KAAMrG,IAK3B+F,EAAOoF,gBAAkB,SAAUnL,GACjC,OAAOqG,EAAY,KAAMrG,IAiH3B+F,EAAOgB,SAAW,SAAmBnS,GACnC,QAAe,MAALA,IAAaA,EAAEwW,YAG3BrF,EAAOsF,QAAU,SAAkBC,EAAG1W,GACpC,IAAKmR,EAAOgB,SAASuE,KAAOvF,EAAOgB,SAASnS,GAC1C,MAAM,IAAI1L,UAAU,6BAGtB,GAAIoiB,IAAM1W,EAAG,OAAO,EAKpB,IAHA,IAAI2W,EAAID,EAAEh+B,OACNk+B,EAAI5W,EAAEtnB,OAED1N,EAAI,EAAGqrB,EAAMjB,KAAKC,IAAIshB,EAAGC,GAAI5rC,EAAIqrB,IAAOrrB,EAC/C,GAAI0rC,EAAE1rC,KAAOg1B,EAAEh1B,GAAI,CACjB2rC,EAAID,EAAE1rC,GACN4rC,EAAI5W,EAAEh1B,GACN,MAIJ,OAAI2rC,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GAGTxF,EAAOa,WAAa,SAAqBD,GACvC,OAAQlqB,OAAOkqB,GAAUzO,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,IAIb6N,EAAO3b,OAAS,SAAiBqhB,EAAMn+B,GACrC,IAAK1C,EAAQ6gC,GACX,MAAM,IAAIviB,UAAU,+CAGtB,GAAoB,IAAhBuiB,EAAKn+B,OACP,OAAOy4B,EAAO2E,MAAM,GAGtB,IAAI9qC,EACJ,QAAeuC,IAAXmL,EAEF,IADAA,EAAS,EACJ1N,EAAI,EAAGA,EAAI6rC,EAAKn+B,SAAU1N,EAC7B0N,GAAUm+B,EAAK7rC,GAAG0N,OAItB,IAAI45B,EAASnB,EAAOM,YAAY/4B,GAC5BwqB,EAAM,EACV,IAAKl4B,EAAI,EAAGA,EAAI6rC,EAAKn+B,SAAU1N,EAAG,CAChC,IAAI4oC,EAAMiD,EAAK7rC,GACf,IAAKmmC,EAAOgB,SAASyB,GACnB,MAAM,IAAItf,UAAU,+CAEtBsf,EAAIvB,KAAKC,EAAQpP,GACjBA,GAAO0Q,EAAIl7B,OAEb,OAAO45B,GA8CTnB,EAAOS,WAAaA,EA0EpBT,EAAOvkC,UAAU4pC,WAAY,EAQ7BrF,EAAOvkC,UAAUkqC,OAAS,WACxB,IAAIzgB,EAAMppB,KAAKyL,OACf,GAAI2d,EAAM,GAAM,EACd,MAAM,IAAIib,WAAW,6CAEvB,IAAK,IAAItmC,EAAI,EAAGA,EAAIqrB,EAAKrrB,GAAK,EAC5BooC,EAAKnmC,KAAMjC,EAAGA,EAAI,GAEpB,OAAOiC,MAGTkkC,EAAOvkC,UAAUmqC,OAAS,WACxB,IAAI1gB,EAAMppB,KAAKyL,OACf,GAAI2d,EAAM,GAAM,EACd,MAAM,IAAIib,WAAW,6CAEvB,IAAK,IAAItmC,EAAI,EAAGA,EAAIqrB,EAAKrrB,GAAK,EAC5BooC,EAAKnmC,KAAMjC,EAAGA,EAAI,GAClBooC,EAAKnmC,KAAMjC,EAAI,EAAGA,EAAI,GAExB,OAAOiC,MAGTkkC,EAAOvkC,UAAUoqC,OAAS,WACxB,IAAI3gB,EAAMppB,KAAKyL,OACf,GAAI2d,EAAM,GAAM,EACd,MAAM,IAAIib,WAAW,6CAEvB,IAAK,IAAItmC,EAAI,EAAGA,EAAIqrB,EAAKrrB,GAAK,EAC5BooC,EAAKnmC,KAAMjC,EAAGA,EAAI,GAClBooC,EAAKnmC,KAAMjC,EAAI,EAAGA,EAAI,GACtBooC,EAAKnmC,KAAMjC,EAAI,EAAGA,EAAI,GACtBooC,EAAKnmC,KAAMjC,EAAI,EAAGA,EAAI,GAExB,OAAOiC,MAGTkkC,EAAOvkC,UAAU2L,SAAW,WAC1B,IAAIG,EAAuB,EAAdzL,KAAKyL,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArB6D,UAAU7D,OAAqBq6B,EAAU9lC,KAAM,EAAGyL,GAC/Cm6B,EAAajb,MAAM3qB,KAAMsP,YAGlC40B,EAAOvkC,UAAUqqC,OAAS,SAAiBjX,GACzC,IAAKmR,EAAOgB,SAASnS,GAAI,MAAM,IAAI1L,UAAU,6BAC7C,OAAIrnB,OAAS+yB,GACsB,IAA5BmR,EAAOsF,QAAQxpC,KAAM+yB,IAG9BmR,EAAOvkC,UAAUwjC,QAAU,WACzB,IAAIha,EAAM,GACN8gB,EAAMpsC,EAAQirC,kBAKlB,OAJI9oC,KAAKyL,OAAS,IAChB0d,EAAMnpB,KAAKsL,SAAS,MAAO,EAAG2+B,GAAKtV,MAAM,SAASnN,KAAK,KACnDxnB,KAAKyL,OAASw+B,IAAK9gB,GAAO,UAEzB,WAAaA,EAAM,KAG5B+a,EAAOvkC,UAAU6pC,QAAU,SAAkBpgC,EAAQtG,EAAOC,EAAKmnC,EAAWC,GAC1E,IAAKjG,EAAOgB,SAAS97B,GACnB,MAAM,IAAIie,UAAU,6BAgBtB,QAbc/mB,IAAVwC,IACFA,EAAQ,QAEExC,IAARyC,IACFA,EAAMqG,EAASA,EAAOqC,OAAS,QAEfnL,IAAd4pC,IACFA,EAAY,QAEE5pC,IAAZ6pC,IACFA,EAAUnqC,KAAKyL,QAGb3I,EAAQ,GAAKC,EAAMqG,EAAOqC,QAAUy+B,EAAY,GAAKC,EAAUnqC,KAAKyL,OACtE,MAAM,IAAI44B,WAAW,sBAGvB,GAAI6F,GAAaC,GAAWrnC,GAASC,EACnC,OAAO,EAET,GAAImnC,GAAaC,EACf,OAAQ,EAEV,GAAIrnC,GAASC,EACX,OAAO,EAQT,GAAI/C,OAASoJ,EAAQ,OAAO,EAS5B,IAPA,IAAIsgC,GAJJS,KAAa,IADbD,KAAe,GAMXP,GAPJ5mC,KAAS,IADTD,KAAW,GASPsmB,EAAMjB,KAAKC,IAAIshB,EAAGC,GAElBS,EAAWpqC,KAAK8nB,MAAMoiB,EAAWC,GACjCE,EAAajhC,EAAO0e,MAAMhlB,EAAOC,GAE5BhF,EAAI,EAAGA,EAAIqrB,IAAOrrB,EACzB,GAAIqsC,EAASrsC,KAAOssC,EAAWtsC,GAAI,CACjC2rC,EAAIU,EAASrsC,GACb4rC,EAAIU,EAAWtsC,GACf,MAIJ,OAAI2rC,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GA6HTxF,EAAOvkC,UAAU2qC,SAAW,SAAmBrY,EAAKyS,EAAYI,GAC9D,OAAoD,IAA7C9kC,KAAKqzB,QAAQpB,EAAKyS,EAAYI,IAGvCZ,EAAOvkC,UAAU0zB,QAAU,SAAkBpB,EAAKyS,EAAYI,GAC5D,OAAOsB,EAAqBpmC,KAAMiyB,EAAKyS,EAAYI,GAAU,IAG/DZ,EAAOvkC,UAAU4mC,YAAc,SAAsBtU,EAAKyS,EAAYI,GACpE,OAAOsB,EAAqBpmC,KAAMiyB,EAAKyS,EAAYI,GAAU,IAkD/DZ,EAAOvkC,UAAUk/B,MAAQ,SAAgBn6B,EAAQuiC,EAAQx7B,EAAQq5B,GAE/D,QAAexkC,IAAX2mC,EACFnC,EAAW,OACXr5B,EAASzL,KAAKyL,OACdw7B,EAAS,OAEJ,QAAe3mC,IAAXmL,GAA0C,iBAAXw7B,EACxCnC,EAAWmC,EACXx7B,EAASzL,KAAKyL,OACdw7B,EAAS,MAEJ,KAAIsD,SAAStD,GAWlB,MAAM,IAAIhmC,MACR,2EAXFgmC,GAAkB,EACdsD,SAAS9+B,IACXA,GAAkB,OACDnL,IAAbwkC,IAAwBA,EAAW,UAEvCA,EAAWr5B,EACXA,OAASnL,GASb,IAAI4mC,EAAYlnC,KAAKyL,OAASw7B,EAG9B,SAFe3mC,IAAXmL,GAAwBA,EAASy7B,KAAWz7B,EAASy7B,GAEpDxiC,EAAO+G,OAAS,IAAMA,EAAS,GAAKw7B,EAAS,IAAOA,EAASjnC,KAAKyL,OACrE,MAAM,IAAI44B,WAAW,0CAGlBS,IAAUA,EAAW,QAG1B,IADA,IAAIW,GAAc,IAEhB,OAAQX,GACN,IAAK,MACH,OAAOkC,EAAShnC,KAAM0E,EAAQuiC,EAAQx7B,GAExC,IAAK,OACL,IAAK,QACH,OAAO67B,EAAUtnC,KAAM0E,EAAQuiC,EAAQx7B,GAEzC,IAAK,QACH,OAAO+7B,EAAWxnC,KAAM0E,EAAQuiC,EAAQx7B,GAE1C,IAAK,SACL,IAAK,SACH,OAAOk8B,EAAY3nC,KAAM0E,EAAQuiC,EAAQx7B,GAE3C,IAAK,SAEH,OAAOm8B,EAAY5nC,KAAM0E,EAAQuiC,EAAQx7B,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOo8B,EAAU7nC,KAAM0E,EAAQuiC,EAAQx7B,GAEzC,QACE,GAAIg6B,EAAa,MAAM,IAAIpe,UAAU,qBAAuByd,GAC5DA,GAAY,GAAKA,GAAUzO,cAC3BoP,GAAc,IAKtBvB,EAAOvkC,UAAU2M,OAAS,WACxB,MAAO,CACL8F,KAAM,SACN0e,KAAMhoB,MAAMnJ,UAAUmoB,MAAM5pB,KAAK8B,KAAKwqC,MAAQxqC,KAAM,KA4GxD,SAAS+lC,EAAYY,EAAK7jC,EAAOC,GAC/B,IAAIiE,EAAM,GACVjE,EAAMolB,KAAKC,IAAIue,EAAIl7B,OAAQ1I,GAE3B,IAAK,IAAIhF,EAAI+E,EAAO/E,EAAIgF,IAAOhF,EAC7BiJ,GAAO4T,OAAO4b,aAAsB,IAATmQ,EAAI5oC,IAEjC,OAAOiJ,EAGT,SAASg/B,EAAaW,EAAK7jC,EAAOC,GAChC,IAAIiE,EAAM,GACVjE,EAAMolB,KAAKC,IAAIue,EAAIl7B,OAAQ1I,GAE3B,IAAK,IAAIhF,EAAI+E,EAAO/E,EAAIgF,IAAOhF,EAC7BiJ,GAAO4T,OAAO4b,aAAamQ,EAAI5oC,IAEjC,OAAOiJ,EAGT,SAAS6+B,EAAUc,EAAK7jC,EAAOC,GAC7B,IAAIqmB,EAAMud,EAAIl7B,SAET3I,GAASA,EAAQ,KAAGA,EAAQ,KAC5BC,GAAOA,EAAM,GAAKA,EAAMqmB,KAAKrmB,EAAMqmB,GAGxC,IADA,IAAIqhB,EAAM,GACD1sC,EAAI+E,EAAO/E,EAAIgF,IAAOhF,EAC7B0sC,GAAOC,EAAM/D,EAAI5oC,IAEnB,OAAO0sC,EAGT,SAASvE,EAAcS,EAAK7jC,EAAOC,GAGjC,IAFA,IAAI4nC,EAAQhE,EAAI7e,MAAMhlB,EAAOC,GACzB8I,EAAM,GACD9N,EAAI,EAAGA,EAAI4sC,EAAMl/B,OAAQ1N,GAAK,EACrC8N,GAAO+O,OAAO4b,aAAamU,EAAM5sC,GAAoB,IAAf4sC,EAAM5sC,EAAI,IAElD,OAAO8N,EA0CT,SAAS++B,EAAa3D,EAAQne,EAAKrd,GACjC,GAAKw7B,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAI5C,WAAW,sBAC3D,GAAI4C,EAASne,EAAMrd,EAAQ,MAAM,IAAI44B,WAAW,yCA+JlD,SAASwG,EAAUlE,EAAK3nC,EAAOioC,EAAQne,EAAKmhB,EAAK7hB,GAC/C,IAAK8b,EAAOgB,SAASyB,GAAM,MAAM,IAAItf,UAAU,+CAC/C,GAAIroB,EAAQirC,GAAOjrC,EAAQopB,EAAK,MAAM,IAAIic,WAAW,qCACrD,GAAI4C,EAASne,EAAM6d,EAAIl7B,OAAQ,MAAM,IAAI44B,WAAW,sBAkDtD,SAASyG,EAAmBnE,EAAK3nC,EAAOioC,EAAQ8D,GAC1C/rC,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,GACxC,IAAK,IAAIjB,EAAI,EAAGgpC,EAAI5e,KAAKC,IAAIue,EAAIl7B,OAASw7B,EAAQ,GAAIlpC,EAAIgpC,IAAKhpC,EAC7D4oC,EAAIM,EAASlpC,IAAMiB,EAAS,KAAS,GAAK+rC,EAAehtC,EAAI,EAAIA,MAClC,GAA5BgtC,EAAehtC,EAAI,EAAIA,GA8B9B,SAASitC,EAAmBrE,EAAK3nC,EAAOioC,EAAQ8D,GAC1C/rC,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C,IAAK,IAAIjB,EAAI,EAAGgpC,EAAI5e,KAAKC,IAAIue,EAAIl7B,OAASw7B,EAAQ,GAAIlpC,EAAIgpC,IAAKhpC,EAC7D4oC,EAAIM,EAASlpC,GAAMiB,IAAuC,GAA5B+rC,EAAehtC,EAAI,EAAIA,GAAU,IAmJnE,SAASktC,EAActE,EAAK3nC,EAAOioC,EAAQne,EAAKmhB,EAAK7hB,GACnD,GAAI6e,EAASne,EAAM6d,EAAIl7B,OAAQ,MAAM,IAAI44B,WAAW,sBACpD,GAAI4C,EAAS,EAAG,MAAM,IAAI5C,WAAW,sBAGvC,SAAS6G,EAAYvE,EAAK3nC,EAAOioC,EAAQ8D,EAAcI,GAKrD,OAJKA,GACHF,EAAatE,EAAK3nC,EAAOioC,EAAQ,GAEnCjD,EAAQnF,MAAM8H,EAAK3nC,EAAOioC,EAAQ8D,EAAc,GAAI,GAC7C9D,EAAS,EAWlB,SAASmE,EAAazE,EAAK3nC,EAAOioC,EAAQ8D,EAAcI,GAKtD,OAJKA,GACHF,EAAatE,EAAK3nC,EAAOioC,EAAQ,GAEnCjD,EAAQnF,MAAM8H,EAAK3nC,EAAOioC,EAAQ8D,EAAc,GAAI,GAC7C9D,EAAS,EA/clB/C,EAAOvkC,UAAUmoB,MAAQ,SAAgBhlB,EAAOC,GAC9C,IAoBIsoC,EApBAjiB,EAAMppB,KAAKyL,OAqBf,IApBA3I,IAAUA,GAGE,GACVA,GAASsmB,GACG,IAAGtmB,EAAQ,GACdA,EAAQsmB,IACjBtmB,EAAQsmB,IANVrmB,OAAczC,IAARyC,EAAoBqmB,IAAQrmB,GASxB,GACRA,GAAOqmB,GACG,IAAGrmB,EAAM,GACVA,EAAMqmB,IACfrmB,EAAMqmB,GAGJrmB,EAAMD,IAAOC,EAAMD,GAGnBohC,EAAOC,qBACTkH,EAASrrC,KAAKgpC,SAASlmC,EAAOC,IACvB+vB,UAAYoR,EAAOvkC,cACrB,CACL,IAAI2rC,EAAWvoC,EAAMD,EACrBuoC,EAAS,IAAInH,EAAOoH,OAAUhrC,GAC9B,IAAK,IAAIvC,EAAI,EAAGA,EAAIutC,IAAYvtC,EAC9BstC,EAAOttC,GAAKiC,KAAKjC,EAAI+E,GAIzB,OAAOuoC,GAWTnH,EAAOvkC,UAAU4rC,WAAa,SAAqBtE,EAAQtC,EAAYwG,GACrElE,GAAkB,EAClBtC,GAA0B,EACrBwG,GAAUP,EAAY3D,EAAQtC,EAAY3kC,KAAKyL,QAKpD,IAHA,IAAIwmB,EAAMjyB,KAAKinC,GACXuE,EAAM,EACNztC,EAAI,IACCA,EAAI4mC,IAAe6G,GAAO,MACjCvZ,GAAOjyB,KAAKinC,EAASlpC,GAAKytC,EAG5B,OAAOvZ,GAGTiS,EAAOvkC,UAAU8rC,WAAa,SAAqBxE,EAAQtC,EAAYwG,GACrElE,GAAkB,EAClBtC,GAA0B,EACrBwG,GACHP,EAAY3D,EAAQtC,EAAY3kC,KAAKyL,QAKvC,IAFA,IAAIwmB,EAAMjyB,KAAKinC,IAAWtC,GACtB6G,EAAM,EACH7G,EAAa,IAAM6G,GAAO,MAC/BvZ,GAAOjyB,KAAKinC,IAAWtC,GAAc6G,EAGvC,OAAOvZ,GAGTiS,EAAOvkC,UAAU+rC,UAAY,SAAoBzE,EAAQkE,GAEvD,OADKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QACpCzL,KAAKinC,IAGd/C,EAAOvkC,UAAUgsC,aAAe,SAAuB1E,EAAQkE,GAE7D,OADKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QACpCzL,KAAKinC,GAAWjnC,KAAKinC,EAAS,IAAM,GAG7C/C,EAAOvkC,UAAUinC,aAAe,SAAuBK,EAAQkE,GAE7D,OADKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QACnCzL,KAAKinC,IAAW,EAAKjnC,KAAKinC,EAAS,IAG7C/C,EAAOvkC,UAAUisC,aAAe,SAAuB3E,EAAQkE,GAG7D,OAFKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,SAElCzL,KAAKinC,GACTjnC,KAAKinC,EAAS,IAAM,EACpBjnC,KAAKinC,EAAS,IAAM,IACD,SAAnBjnC,KAAKinC,EAAS,IAGrB/C,EAAOvkC,UAAUksC,aAAe,SAAuB5E,EAAQkE,GAG7D,OAFKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QAEpB,SAAfzL,KAAKinC,IACTjnC,KAAKinC,EAAS,IAAM,GACrBjnC,KAAKinC,EAAS,IAAM,EACrBjnC,KAAKinC,EAAS,KAGlB/C,EAAOvkC,UAAUmsC,UAAY,SAAoB7E,EAAQtC,EAAYwG,GACnElE,GAAkB,EAClBtC,GAA0B,EACrBwG,GAAUP,EAAY3D,EAAQtC,EAAY3kC,KAAKyL,QAKpD,IAHA,IAAIwmB,EAAMjyB,KAAKinC,GACXuE,EAAM,EACNztC,EAAI,IACCA,EAAI4mC,IAAe6G,GAAO,MACjCvZ,GAAOjyB,KAAKinC,EAASlpC,GAAKytC,EAM5B,OAFIvZ,IAFJuZ,GAAO,OAESvZ,GAAO9J,KAAK4jB,IAAI,EAAG,EAAIpH,IAEhC1S,GAGTiS,EAAOvkC,UAAUqsC,UAAY,SAAoB/E,EAAQtC,EAAYwG,GACnElE,GAAkB,EAClBtC,GAA0B,EACrBwG,GAAUP,EAAY3D,EAAQtC,EAAY3kC,KAAKyL,QAKpD,IAHA,IAAI1N,EAAI4mC,EACJ6G,EAAM,EACNvZ,EAAMjyB,KAAKinC,IAAWlpC,GACnBA,EAAI,IAAMytC,GAAO,MACtBvZ,GAAOjyB,KAAKinC,IAAWlpC,GAAKytC,EAM9B,OAFIvZ,IAFJuZ,GAAO,OAESvZ,GAAO9J,KAAK4jB,IAAI,EAAG,EAAIpH,IAEhC1S,GAGTiS,EAAOvkC,UAAUssC,SAAW,SAAmBhF,EAAQkE,GAErD,OADKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QACtB,IAAfzL,KAAKinC,IAC0B,GAA5B,IAAOjnC,KAAKinC,GAAU,GADKjnC,KAAKinC,IAI3C/C,EAAOvkC,UAAUusC,YAAc,SAAsBjF,EAAQkE,GACtDA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QAC3C,IAAIwmB,EAAMjyB,KAAKinC,GAAWjnC,KAAKinC,EAAS,IAAM,EAC9C,OAAc,MAANhV,EAAsB,WAANA,EAAmBA,GAG7CiS,EAAOvkC,UAAUwsC,YAAc,SAAsBlF,EAAQkE,GACtDA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QAC3C,IAAIwmB,EAAMjyB,KAAKinC,EAAS,GAAMjnC,KAAKinC,IAAW,EAC9C,OAAc,MAANhV,EAAsB,WAANA,EAAmBA,GAG7CiS,EAAOvkC,UAAUysC,YAAc,SAAsBnF,EAAQkE,GAG3D,OAFKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QAEnCzL,KAAKinC,GACVjnC,KAAKinC,EAAS,IAAM,EACpBjnC,KAAKinC,EAAS,IAAM,GACpBjnC,KAAKinC,EAAS,IAAM,IAGzB/C,EAAOvkC,UAAU0sC,YAAc,SAAsBpF,EAAQkE,GAG3D,OAFKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QAEnCzL,KAAKinC,IAAW,GACrBjnC,KAAKinC,EAAS,IAAM,GACpBjnC,KAAKinC,EAAS,IAAM,EACpBjnC,KAAKinC,EAAS,IAGnB/C,EAAOvkC,UAAU2sC,YAAc,SAAsBrF,EAAQkE,GAE3D,OADKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QACpCu4B,EAAQjS,KAAK/xB,KAAMinC,GAAQ,EAAM,GAAI,IAG9C/C,EAAOvkC,UAAU4sC,YAAc,SAAsBtF,EAAQkE,GAE3D,OADKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QACpCu4B,EAAQjS,KAAK/xB,KAAMinC,GAAQ,EAAO,GAAI,IAG/C/C,EAAOvkC,UAAU6sC,aAAe,SAAuBvF,EAAQkE,GAE7D,OADKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QACpCu4B,EAAQjS,KAAK/xB,KAAMinC,GAAQ,EAAM,GAAI,IAG9C/C,EAAOvkC,UAAU8sC,aAAe,SAAuBxF,EAAQkE,GAE7D,OADKA,GAAUP,EAAY3D,EAAQ,EAAGjnC,KAAKyL,QACpCu4B,EAAQjS,KAAK/xB,KAAMinC,GAAQ,EAAO,GAAI,IAS/C/C,EAAOvkC,UAAU+sC,YAAc,SAAsB1tC,EAAOioC,EAAQtC,EAAYwG,IAC9EnsC,GAASA,EACTioC,GAAkB,EAClBtC,GAA0B,EACrBwG,IAEHN,EAAS7qC,KAAMhB,EAAOioC,EAAQtC,EADfxc,KAAK4jB,IAAI,EAAG,EAAIpH,GAAc,EACO,GAGtD,IAAI6G,EAAM,EACNztC,EAAI,EAER,IADAiC,KAAKinC,GAAkB,IAARjoC,IACNjB,EAAI4mC,IAAe6G,GAAO,MACjCxrC,KAAKinC,EAASlpC,GAAMiB,EAAQwsC,EAAO,IAGrC,OAAOvE,EAAStC,GAGlBT,EAAOvkC,UAAUgtC,YAAc,SAAsB3tC,EAAOioC,EAAQtC,EAAYwG,IAC9EnsC,GAASA,EACTioC,GAAkB,EAClBtC,GAA0B,EACrBwG,IAEHN,EAAS7qC,KAAMhB,EAAOioC,EAAQtC,EADfxc,KAAK4jB,IAAI,EAAG,EAAIpH,GAAc,EACO,GAGtD,IAAI5mC,EAAI4mC,EAAa,EACjB6G,EAAM,EAEV,IADAxrC,KAAKinC,EAASlpC,GAAa,IAARiB,IACVjB,GAAK,IAAMytC,GAAO,MACzBxrC,KAAKinC,EAASlpC,GAAMiB,EAAQwsC,EAAO,IAGrC,OAAOvE,EAAStC,GAGlBT,EAAOvkC,UAAUitC,WAAa,SAAqB5tC,EAAOioC,EAAQkE,GAMhE,OALAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,IAAM,GACjD/C,EAAOC,sBAAqBnlC,EAAQmpB,KAAK0kB,MAAM7tC,IACpDgB,KAAKinC,GAAmB,IAARjoC,EACTioC,EAAS,GAWlB/C,EAAOvkC,UAAUmtC,cAAgB,SAAwB9tC,EAAOioC,EAAQkE,GAUtE,OATAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,MAAQ,GACpD/C,EAAOC,qBACTnkC,KAAKinC,GAAmB,IAARjoC,EAChBgB,KAAKinC,EAAS,GAAMjoC,IAAU,GAE9B8rC,EAAkB9qC,KAAMhB,EAAOioC,GAAQ,GAElCA,EAAS,GAGlB/C,EAAOvkC,UAAUotC,cAAgB,SAAwB/tC,EAAOioC,EAAQkE,GAUtE,OATAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,MAAQ,GACpD/C,EAAOC,qBACTnkC,KAAKinC,GAAWjoC,IAAU,EAC1BgB,KAAKinC,EAAS,GAAc,IAARjoC,GAEpB8rC,EAAkB9qC,KAAMhB,EAAOioC,GAAQ,GAElCA,EAAS,GAUlB/C,EAAOvkC,UAAUqtC,cAAgB,SAAwBhuC,EAAOioC,EAAQkE,GAYtE,OAXAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,WAAY,GACxD/C,EAAOC,qBACTnkC,KAAKinC,EAAS,GAAMjoC,IAAU,GAC9BgB,KAAKinC,EAAS,GAAMjoC,IAAU,GAC9BgB,KAAKinC,EAAS,GAAMjoC,IAAU,EAC9BgB,KAAKinC,GAAmB,IAARjoC,GAEhBgsC,EAAkBhrC,KAAMhB,EAAOioC,GAAQ,GAElCA,EAAS,GAGlB/C,EAAOvkC,UAAUstC,cAAgB,SAAwBjuC,EAAOioC,EAAQkE,GAYtE,OAXAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,WAAY,GACxD/C,EAAOC,qBACTnkC,KAAKinC,GAAWjoC,IAAU,GAC1BgB,KAAKinC,EAAS,GAAMjoC,IAAU,GAC9BgB,KAAKinC,EAAS,GAAMjoC,IAAU,EAC9BgB,KAAKinC,EAAS,GAAc,IAARjoC,GAEpBgsC,EAAkBhrC,KAAMhB,EAAOioC,GAAQ,GAElCA,EAAS,GAGlB/C,EAAOvkC,UAAUutC,WAAa,SAAqBluC,EAAOioC,EAAQtC,EAAYwG,GAG5E,GAFAnsC,GAASA,EACTioC,GAAkB,GACbkE,EAAU,CACb,IAAIgC,EAAQhlB,KAAK4jB,IAAI,EAAG,EAAIpH,EAAa,GAEzCkG,EAAS7qC,KAAMhB,EAAOioC,EAAQtC,EAAYwI,EAAQ,GAAIA,GAGxD,IAAIpvC,EAAI,EACJytC,EAAM,EACN4B,EAAM,EAEV,IADAptC,KAAKinC,GAAkB,IAARjoC,IACNjB,EAAI4mC,IAAe6G,GAAO,MAC7BxsC,EAAQ,GAAa,IAARouC,GAAsC,IAAzBptC,KAAKinC,EAASlpC,EAAI,KAC9CqvC,EAAM,GAERptC,KAAKinC,EAASlpC,IAAOiB,EAAQwsC,GAAQ,GAAK4B,EAAM,IAGlD,OAAOnG,EAAStC,GAGlBT,EAAOvkC,UAAU0tC,WAAa,SAAqBruC,EAAOioC,EAAQtC,EAAYwG,GAG5E,GAFAnsC,GAASA,EACTioC,GAAkB,GACbkE,EAAU,CACb,IAAIgC,EAAQhlB,KAAK4jB,IAAI,EAAG,EAAIpH,EAAa,GAEzCkG,EAAS7qC,KAAMhB,EAAOioC,EAAQtC,EAAYwI,EAAQ,GAAIA,GAGxD,IAAIpvC,EAAI4mC,EAAa,EACjB6G,EAAM,EACN4B,EAAM,EAEV,IADAptC,KAAKinC,EAASlpC,GAAa,IAARiB,IACVjB,GAAK,IAAMytC,GAAO,MACrBxsC,EAAQ,GAAa,IAARouC,GAAsC,IAAzBptC,KAAKinC,EAASlpC,EAAI,KAC9CqvC,EAAM,GAERptC,KAAKinC,EAASlpC,IAAOiB,EAAQwsC,GAAQ,GAAK4B,EAAM,IAGlD,OAAOnG,EAAStC,GAGlBT,EAAOvkC,UAAU2tC,UAAY,SAAoBtuC,EAAOioC,EAAQkE,GAO9D,OANAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,KAAO,KAClD/C,EAAOC,sBAAqBnlC,EAAQmpB,KAAK0kB,MAAM7tC,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCgB,KAAKinC,GAAmB,IAARjoC,EACTioC,EAAS,GAGlB/C,EAAOvkC,UAAU4tC,aAAe,SAAuBvuC,EAAOioC,EAAQkE,GAUpE,OATAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,OAAS,OACrD/C,EAAOC,qBACTnkC,KAAKinC,GAAmB,IAARjoC,EAChBgB,KAAKinC,EAAS,GAAMjoC,IAAU,GAE9B8rC,EAAkB9qC,KAAMhB,EAAOioC,GAAQ,GAElCA,EAAS,GAGlB/C,EAAOvkC,UAAU6tC,aAAe,SAAuBxuC,EAAOioC,EAAQkE,GAUpE,OATAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,OAAS,OACrD/C,EAAOC,qBACTnkC,KAAKinC,GAAWjoC,IAAU,EAC1BgB,KAAKinC,EAAS,GAAc,IAARjoC,GAEpB8rC,EAAkB9qC,KAAMhB,EAAOioC,GAAQ,GAElCA,EAAS,GAGlB/C,EAAOvkC,UAAU8tC,aAAe,SAAuBzuC,EAAOioC,EAAQkE,GAYpE,OAXAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,YAAa,YACzD/C,EAAOC,qBACTnkC,KAAKinC,GAAmB,IAARjoC,EAChBgB,KAAKinC,EAAS,GAAMjoC,IAAU,EAC9BgB,KAAKinC,EAAS,GAAMjoC,IAAU,GAC9BgB,KAAKinC,EAAS,GAAMjoC,IAAU,IAE9BgsC,EAAkBhrC,KAAMhB,EAAOioC,GAAQ,GAElCA,EAAS,GAGlB/C,EAAOvkC,UAAU+tC,aAAe,SAAuB1uC,EAAOioC,EAAQkE,GAapE,OAZAnsC,GAASA,EACTioC,GAAkB,EACbkE,GAAUN,EAAS7qC,KAAMhB,EAAOioC,EAAQ,EAAG,YAAa,YACzDjoC,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxCklC,EAAOC,qBACTnkC,KAAKinC,GAAWjoC,IAAU,GAC1BgB,KAAKinC,EAAS,GAAMjoC,IAAU,GAC9BgB,KAAKinC,EAAS,GAAMjoC,IAAU,EAC9BgB,KAAKinC,EAAS,GAAc,IAARjoC,GAEpBgsC,EAAkBhrC,KAAMhB,EAAOioC,GAAQ,GAElCA,EAAS,GAgBlB/C,EAAOvkC,UAAUguC,aAAe,SAAuB3uC,EAAOioC,EAAQkE,GACpE,OAAOD,EAAWlrC,KAAMhB,EAAOioC,GAAQ,EAAMkE,IAG/CjH,EAAOvkC,UAAUiuC,aAAe,SAAuB5uC,EAAOioC,EAAQkE,GACpE,OAAOD,EAAWlrC,KAAMhB,EAAOioC,GAAQ,EAAOkE,IAWhDjH,EAAOvkC,UAAUkuC,cAAgB,SAAwB7uC,EAAOioC,EAAQkE,GACtE,OAAOC,EAAYprC,KAAMhB,EAAOioC,GAAQ,EAAMkE,IAGhDjH,EAAOvkC,UAAUmuC,cAAgB,SAAwB9uC,EAAOioC,EAAQkE,GACtE,OAAOC,EAAYprC,KAAMhB,EAAOioC,GAAQ,EAAOkE,IAIjDjH,EAAOvkC,UAAUylC,KAAO,SAAeh8B,EAAQ2kC,EAAajrC,EAAOC,GAQjE,GAPKD,IAAOA,EAAQ,GACfC,GAAe,IAARA,IAAWA,EAAM/C,KAAKyL,QAC9BsiC,GAAe3kC,EAAOqC,SAAQsiC,EAAc3kC,EAAOqC,QAClDsiC,IAAaA,EAAc,GAC5BhrC,EAAM,GAAKA,EAAMD,IAAOC,EAAMD,GAG9BC,IAAQD,EAAO,OAAO,EAC1B,GAAsB,IAAlBsG,EAAOqC,QAAgC,IAAhBzL,KAAKyL,OAAc,OAAO,EAGrD,GAAIsiC,EAAc,EAChB,MAAM,IAAI1J,WAAW,6BAEvB,GAAIvhC,EAAQ,GAAKA,GAAS9C,KAAKyL,OAAQ,MAAM,IAAI44B,WAAW,6BAC5D,GAAIthC,EAAM,EAAG,MAAM,IAAIshC,WAAW,2BAG9BthC,EAAM/C,KAAKyL,SAAQ1I,EAAM/C,KAAKyL,QAC9BrC,EAAOqC,OAASsiC,EAAchrC,EAAMD,IACtCC,EAAMqG,EAAOqC,OAASsiC,EAAcjrC,GAGtC,IACI/E,EADAqrB,EAAMrmB,EAAMD,EAGhB,GAAI9C,OAASoJ,GAAUtG,EAAQirC,GAAeA,EAAchrC,EAE1D,IAAKhF,EAAIqrB,EAAM,EAAGrrB,GAAK,IAAKA,EAC1BqL,EAAOrL,EAAIgwC,GAAe/tC,KAAKjC,EAAI+E,QAEhC,GAAIsmB,EAAM,MAAS8a,EAAOC,oBAE/B,IAAKpmC,EAAI,EAAGA,EAAIqrB,IAAOrrB,EACrBqL,EAAOrL,EAAIgwC,GAAe/tC,KAAKjC,EAAI+E,QAGrCwhC,WAAW3kC,UAAU4L,IAAIrN,KACvBkL,EACApJ,KAAKgpC,SAASlmC,EAAOA,EAAQsmB,GAC7B2kB,GAIJ,OAAO3kB,GAOT8a,EAAOvkC,UAAU0pC,KAAO,SAAepX,EAAKnvB,EAAOC,EAAK+hC,GAEtD,GAAmB,iBAAR7S,EAAkB,CAS3B,GARqB,iBAAVnvB,GACTgiC,EAAWhiC,EACXA,EAAQ,EACRC,EAAM/C,KAAKyL,QACa,iBAAR1I,IAChB+hC,EAAW/hC,EACXA,EAAM/C,KAAKyL,QAEM,IAAfwmB,EAAIxmB,OAAc,CACpB,IAAIuC,EAAOikB,EAAIvJ,WAAW,GACtB1a,EAAO,MACTikB,EAAMjkB,GAGV,QAAiB1N,IAAbwkC,GAA8C,iBAAbA,EACnC,MAAM,IAAIzd,UAAU,6BAEtB,GAAwB,iBAAbyd,IAA0BZ,EAAOa,WAAWD,GACrD,MAAM,IAAIzd,UAAU,qBAAuByd,OAErB,iBAAR7S,IAChBA,GAAY,KAId,GAAInvB,EAAQ,GAAK9C,KAAKyL,OAAS3I,GAAS9C,KAAKyL,OAAS1I,EACpD,MAAM,IAAIshC,WAAW,sBAGvB,GAAIthC,GAAOD,EACT,OAAO9C,KAQT,IAAIjC,EACJ,GANA+E,KAAkB,EAClBC,OAAczC,IAARyC,EAAoB/C,KAAKyL,OAAS1I,IAAQ,EAE3CkvB,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAKl0B,EAAI+E,EAAO/E,EAAIgF,IAAOhF,EACzBiC,KAAKjC,GAAKk0B,MAEP,CACL,IAAI0Y,EAAQzG,EAAOgB,SAASjT,GACxBA,EACAyT,EAAY,IAAIxB,EAAOjS,EAAK6S,GAAUx5B,YACtC8d,EAAMuhB,EAAMl/B,OAChB,IAAK1N,EAAI,EAAGA,EAAIgF,EAAMD,IAAS/E,EAC7BiC,KAAKjC,EAAI+E,GAAS6nC,EAAM5sC,EAAIqrB,GAIhC,OAAOppB,MAMT,IAAIguC,EAAoB,qBAmBxB,SAAStD,EAAOlrC,GACd,OAAIA,EAAI,GAAW,IAAMA,EAAE8L,SAAS,IAC7B9L,EAAE8L,SAAS,IAGpB,SAASo6B,EAAahhC,EAAQojC,GAE5B,IAAIU,EADJV,EAAQA,GAASmG,IAMjB,IAJA,IAAIxiC,EAAS/G,EAAO+G,OAChByiC,EAAgB,KAChBvD,EAAQ,GAEH5sC,EAAI,EAAGA,EAAI0N,IAAU1N,EAAG,CAI/B,IAHAyqC,EAAY9jC,EAAOgkB,WAAW3qB,IAGd,OAAUyqC,EAAY,MAAQ,CAE5C,IAAK0F,EAAe,CAElB,GAAI1F,EAAY,MAAQ,EAEjBV,GAAS,IAAM,GAAG6C,EAAM5/B,KAAK,IAAM,IAAM,KAC9C,SACK,GAAIhN,EAAI,IAAM0N,EAAQ,EAEtBq8B,GAAS,IAAM,GAAG6C,EAAM5/B,KAAK,IAAM,IAAM,KAC9C,SAIFmjC,EAAgB1F,EAEhB,SAIF,GAAIA,EAAY,MAAQ,EACjBV,GAAS,IAAM,GAAG6C,EAAM5/B,KAAK,IAAM,IAAM,KAC9CmjC,EAAgB1F,EAChB,SAIFA,EAAkE,OAArD0F,EAAgB,OAAU,GAAK1F,EAAY,YAC/C0F,IAEJpG,GAAS,IAAM,GAAG6C,EAAM5/B,KAAK,IAAM,IAAM,KAMhD,GAHAmjC,EAAgB,KAGZ1F,EAAY,IAAM,CACpB,IAAKV,GAAS,GAAK,EAAG,MACtB6C,EAAM5/B,KAAKy9B,QACN,GAAIA,EAAY,KAAO,CAC5B,IAAKV,GAAS,GAAK,EAAG,MACtB6C,EAAM5/B,KACJy9B,GAAa,EAAM,IACP,GAAZA,EAAmB,UAEhB,GAAIA,EAAY,MAAS,CAC9B,IAAKV,GAAS,GAAK,EAAG,MACtB6C,EAAM5/B,KACJy9B,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,MAAIA,EAAY,SASrB,MAAM,IAAIvnC,MAAM,sBARhB,IAAK6mC,GAAS,GAAK,EAAG,MACtB6C,EAAM5/B,KACJy9B,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,OAAOmC,EA4BT,SAAShF,EAAexc,GACtB,OAAO4a,EAAOoK,YAhIhB,SAAsBhlB,GAIpB,IAFAA,EAUF,SAAqBA,GACnB,OAAIA,EAAIpB,KAAaoB,EAAIpB,OAClBoB,EAAI3kB,QAAQ,aAAc,IAZ3B4pC,CAAWjlB,GAAK3kB,QAAQwpC,EAAmB,KAEzCviC,OAAS,EAAG,MAAO,GAE3B,KAAO0d,EAAI1d,OAAS,GAAM,GACxB0d,GAAY,IAEd,OAAOA,EAuHmBklB,CAAYllB,IAGxC,SAASoe,EAAY+G,EAAKC,EAAKtH,EAAQx7B,GACrC,IAAK,IAAI1N,EAAI,EAAGA,EAAI0N,KACb1N,EAAIkpC,GAAUsH,EAAI9iC,QAAY1N,GAAKuwC,EAAI7iC,UADhB1N,EAE5BwwC,EAAIxwC,EAAIkpC,GAAUqH,EAAIvwC,GAExB,OAAOA,K,kFClvDTU,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3B0W,E,YACF,WAAYjQ,GAAQ,uCACVA,I,iBAFqBgQ,EAAiBtW,cAKpDr6B,EAAQ4wC,qBAAuBA,E,IACzBC,E,YACF,WAAYlQ,GAAQ,uCACVA,I,iBAFoBgQ,EAAiBvW,aAKnDp6B,EAAQ6wC,oBAAsBA,E,IACxBC,E,YACF,WAAYnQ,GAAQ,uCACVA,I,iBAFyBgQ,EAAiB1V,kBAKxDj7B,EAAQ8wC,yBAA2BA,E,IAC7BC,E,YACF,WAAYpQ,GAAQ,uCACVA,I,iBAF0BgQ,EAAiBzV,mBAKzDl7B,EAAQ+wC,0BAA4BA,G,cC9BpC,IAAIC,EAGJA,EAAI,WACH,OAAO7uC,KADJ,GAIJ,IAEC6uC,EAAIA,GAAK,IAAIzvB,SAAS,cAAb,GACR,MAAOxT,GAEc,iBAAXkjC,SAAqBD,EAAIC,QAOrChxC,EAAOD,QAAUgxC,G,8ECJjB,IASiB1uC,EATjB,QASA,SAAiBA,GAKb,SAAgBd,EAAOU,GACnB,MAAO,CACHM,QAASN,GALD,EAAAgQ,GAAhB,SAAmBF,GACf,QAASA,GAAsB,iBAARA,GAAoB,YAAaA,GAAiC,mBAAnBA,EAAa,SAEvE,EAAAxQ,OAAM,EAKT,EAAA0vC,KAAO1vC,GAAO,eAV/B,CAAiBc,EAAA,EAAAA,aAAA,EAAAA,WAAU,KAa3B,iBAKI,a,IAAA,WAAY,kDAHO,KAAAC,YAA4B,GAC5B,KAAA4uC,iBAAmB,IAAI,EAAAzhB,QAoBlC,KAAA0hB,mBAAoB,EAjBxBC,EAAU/iC,SAAQ,SAAA9N,GAAK,SAAK0M,KAAK1M,MA0DzC,OAvDI,sBAAI,wBAAS,C,IAAb,WACI,OAAO2B,KAAKgvC,iBAAiBjjB,O,gCAGvB,YAAAojB,cAAV,WACQnvC,KAAKovC,WAAapvC,KAAKivC,mBACvBjvC,KAAKgvC,iBAAiBphB,UAAKttB,IAInC,sBAAI,uBAAQ,C,IAAZ,WACI,OAAmC,IAA5BN,KAAKI,YAAYqL,Q,gCAI5B,YAAApL,QAAA,WACI,IAAIL,KAAKovC,WAAYpvC,KAAKivC,kBAA1B,CAIA,IADAjvC,KAAKivC,mBAAoB,GACjBjvC,KAAKovC,UACT,IACIpvC,KAAKI,YAAYmC,MAAOlC,UAC1B,MAAOuL,GACLmhB,QAAQC,MAAMphB,GAGtB5L,KAAKivC,mBAAoB,EACzBjvC,KAAKmvC,kBAGT,YAAApkC,KAAA,SAAK9K,GAAL,WACUG,EAAcJ,KAAKI,YACzBA,EAAY2K,KAAK9K,GACjB,IAAMovC,EAAkBpvC,EAAWI,QAAQd,KAAKU,GAC1CqvC,EAAWnvC,EAAWd,QAAO,WAC/B,IAAMyjB,EAAQ1iB,EAAYizB,QAAQpzB,IACnB,IAAX6iB,GACA1iB,EAAYymB,OAAO/D,EAAO,GAE9B,EAAKqsB,mBAMT,OAJAlvC,EAAWI,QAAU,WACjBivC,EAASjvC,UACTgvC,KAEGC,GAGX,YAAAC,QAAA,SAAQnvC,GAAR,WACI,OAAOA,EAAY6Z,KAAI,SAAAha,GACnB,SAAK8K,KAAK9K,OAItB,EAhEA,GAAa,EAAAuvC,wB,6BCpCb,MAAMjY,EAAI,EAAQ,IAAgBH,YAC5B5H,EAAK,EAAQ,IAMnB1xB,EAAOD,QAAU,CACf4xC,WAAYlY,GALd,SAAqBnQ,GACnB,OAAOoI,EAAGkgB,OAAOtoB,GAAMiQ,KAAK,KAAM,GAAMsY,MAAM,KAAM,MAKpDC,eAAgBpgB,EAAGqgB,a,6BCoBrB,IAAIC,EAAM,EAAQ,IAIdC,EAAatxC,OAAOskC,MAAQ,SAAUkC,GACxC,IAAIlC,EAAO,GACX,IAAK,IAAIzjC,KAAO2lC,EACdlC,EAAKh4B,KAAKzL,GACX,OAAOyjC,GAIVjlC,EAAOD,QAAUmyC,EAGjB,IAAIhhB,EAAOvwB,OAAOY,OAAO,EAAQ,KACjC2vB,EAAKihB,SAAW,EAAQ,IAGxB,IAAIC,EAAW,EAAQ,IACnBC,EAAW,EAAQ,IAEvBnhB,EAAKihB,SAASD,EAAQE,GAKpB,IADA,IAAInN,EAAOgN,EAAWI,EAASxwC,WACtByM,EAAI,EAAGA,EAAI22B,EAAKt3B,OAAQW,IAAK,CACpC,IAAIoyB,EAASuE,EAAK32B,GACb4jC,EAAOrwC,UAAU6+B,KAASwR,EAAOrwC,UAAU6+B,GAAU2R,EAASxwC,UAAU6+B,IAIjF,SAASwR,EAAOllC,GACd,KAAM9K,gBAAgBgwC,GAAS,OAAO,IAAIA,EAAOllC,GAEjDolC,EAAShyC,KAAK8B,KAAM8K,GACpBqlC,EAASjyC,KAAK8B,KAAM8K,GAEhBA,IAAgC,IAArBA,EAAQslC,WAAoBpwC,KAAKowC,UAAW,GAEvDtlC,IAAgC,IAArBA,EAAQ8rB,WAAoB52B,KAAK42B,UAAW,GAE3D52B,KAAKqwC,eAAgB,EACjBvlC,IAAqC,IAA1BA,EAAQulC,gBAAyBrwC,KAAKqwC,eAAgB,GAErErwC,KAAKirB,KAAK,MAAOqlB,GAcnB,SAASA,IAGHtwC,KAAKqwC,eAAiBrwC,KAAKuwC,eAAeC,OAI9CV,EAAIplB,SAAS+lB,EAASzwC,MAGxB,SAASywC,EAAQ7M,GACfA,EAAK7gC,MAtBPtE,OAAOC,eAAesxC,EAAOrwC,UAAW,wBAAyB,CAI/DhB,YAAY,EACZC,IAAK,WACH,OAAOoB,KAAKuwC,eAAeG,iBAmB/BjyC,OAAOC,eAAesxC,EAAOrwC,UAAW,YAAa,CACnDf,IAAK,WACH,YAA4B0B,IAAxBN,KAAK2wC,qBAAwDrwC,IAAxBN,KAAKuwC,iBAGvCvwC,KAAK2wC,eAAeC,WAAa5wC,KAAKuwC,eAAeK,YAE9DrlC,IAAK,SAAUvM,QAGesB,IAAxBN,KAAK2wC,qBAAwDrwC,IAAxBN,KAAKuwC,iBAM9CvwC,KAAK2wC,eAAeC,UAAY5xC,EAChCgB,KAAKuwC,eAAeK,UAAY5xC,MAIpCgxC,EAAOrwC,UAAUkxC,SAAW,SAAUhhB,EAAKD,GACzC5vB,KAAK+K,KAAK,MACV/K,KAAK+C,MAEL+sC,EAAIplB,SAASkF,EAAIC,K,6BCxGnB,SAAgBihB,EAAS7L,GACrB,QAAsB,iBAARA,GACC,OAARA,GACCn8B,MAAMC,QAAQk8B,IACbA,aAAe8L,QACf9L,aAAe5F,M,iDAL5B,aASA,iBAAgB2R,EAAMC,EAAkB7/B,EAAa8/B,GACjD,YADiD,IAAAA,OAAA,GAC5CJ,EAASG,IAIVH,EAAS1/B,IACT3S,OAAOskC,KAAK3xB,GAAQjF,SAAQ,SAAA7M,GACpBA,KAAO2xC,EACHC,IACIJ,EAASG,EAAY3xC,KAASwxC,EAAS1/B,EAAO9R,IAC9C0xC,EAAMC,EAAY3xC,GAAM8R,EAAO9R,GAAM4xC,GAErCD,EAAY3xC,GAAO8R,EAAO9R,IAIlC2xC,EAAY3xC,GAAO8R,EAAO9R,MAI/B2xC,GAlBI7/B,GAqBf,SAAY+/B,GACR,mBACA,qBAFJ,CAAY,EAAAA,UAAA,EAAAA,QAAO,KAgBnB,0BAAmD/nC,GAE/C,SAASgoC,IAAW,OAAOC,QAAQC,UAAUloC,EAAQkG,UAAWtP,KAAKizB,aAIrE,OAHAx0B,OAAOC,eAAe0yC,EAAG,OAAQ3yC,OAAO8yC,yBAAyBnoC,EAAQ,SACzE3K,OAAOyP,eAAekjC,EAAGhoC,GACzB3K,OAAOyP,eAAekjC,EAAEzxC,UAAWyJ,EAAOzJ,WACnCyxC,GAGX,IAAM1N,EACM,SADNA,EAGS,YAuBf,SAAgB8N,EAAYvM,GACxB,cAAc,IAAUvB,EAhB5B,mBAAwBlZ,GACpB,OAAI1hB,MAAMC,QACCD,MAAMC,QAAQyhB,MAGrBA,UAAiBA,EAAY,SAAMkZ,GAAkBlZ,EAAMyI,cAAgBnqB,QAUnF,gBAOA,6BAAkCm8B,GAC9B,OAAOuM,EAAYvM,IAAgB,OAARA,I,cCpHF,mBAAlBxmC,OAAOY,OAEhBvB,EAAOD,QAAU,SAAkB4zC,EAAMC,GACnCA,IACFD,EAAKE,OAASD,EACdD,EAAK9xC,UAAYlB,OAAOY,OAAOqyC,EAAU/xC,UAAW,CAClDszB,YAAa,CACXj0B,MAAOyyC,EACP9yC,YAAY,EACZi4B,UAAU,EACV1E,cAAc,OAOtBp0B,EAAOD,QAAU,SAAkB4zC,EAAMC,GACvC,GAAIA,EAAW,CACbD,EAAKE,OAASD,EACd,IAAIE,EAAW,aACfA,EAASjyC,UAAY+xC,EAAU/xC,UAC/B8xC,EAAK9xC,UAAY,IAAIiyC,EACrBH,EAAK9xC,UAAUszB,YAAcwe,K,8ECHnC,4BAII,KAAA/R,QAAU,IAAInR,SAAW,SAACtH,EAASkQ,GAC/B,EAAKlQ,QAAUA,EACf,EAAKkQ,OAASA,MANT,EAAA0a,Y,cCZb/zC,EAAOD,QARP,SAAgC+lC,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIkO,eAAe,6DAG3B,OAAOlO,I,6BCKT,SAASl/B,EAAO1F,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiB4b,OAezD,SAAS4P,EAAMxrB,GACX,OAAO8J,MAAMC,QAAQ/J,GAtBzBP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAItDnB,EAAO,QAHP,SAAiBmB,GACb,OAAiB,IAAVA,IAA4B,IAAVA,GAM7BnB,EAAQ6G,OAASA,EAIjB7G,EAAQ+G,OAHR,SAAgB5F,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBkjB,QAMzDrkB,EAAQmvB,MAHR,SAAehuB,GACX,OAAOA,aAAiBiC,OAM5BpD,EAAQkC,KAHR,SAAcf,GACV,MAAwB,mBAAVA,GAMlBnB,EAAQ2sB,MAAQA,EAIhB3sB,EAAQk0C,YAHR,SAAqB/yC,GACjB,OAAOwrB,EAAMxrB,IAAUA,EAAMgzC,OAAM,SAAAzf,GAAI,OAAI7tB,EAAO6tB,Q,iBC/BtD,YAwGA,SAAS0f,EAAezzC,GACtB,OAAOC,OAAOkB,UAAU2L,SAASpN,KAAKM,GA3ExCX,EAAQkL,QANR,SAAiB8G,GACf,OAAI/G,MAAMC,QACDD,MAAMC,QAAQ8G,GAEQ,mBAAxBoiC,EAAepiC,IAOxBhS,EAAQq0C,UAHR,SAAmBriC,GACjB,MAAsB,kBAARA,GAOhBhS,EAAQs0C,OAHR,SAAgBtiC,GACd,OAAe,OAARA,GAOThS,EAAQu0C,kBAHR,SAA2BviC,GACzB,OAAc,MAAPA,GAOThS,EAAQw0C,SAHR,SAAkBxiC,GAChB,MAAsB,iBAARA,GAOhBhS,EAAQy0C,SAHR,SAAkBziC,GAChB,MAAsB,iBAARA,GAOhBhS,EAAQ00C,SAHR,SAAkB1iC,GAChB,MAAsB,iBAARA,GAOhBhS,EAAQ2zC,YAHR,SAAqB3hC,GACnB,YAAe,IAARA,GAOThS,EAAQ20C,SAHR,SAAkBC,GAChB,MAA8B,oBAAvBR,EAAeQ,IAOxB50C,EAAQizC,SAHR,SAAkBjhC,GAChB,MAAsB,iBAARA,GAA4B,OAARA,GAOpChS,EAAQ60C,OAHR,SAAgBr0C,GACd,MAA6B,kBAAtB4zC,EAAe5zC,IAOxBR,EAAQ80C,QAHR,SAAiB/mC,GACf,MAA8B,mBAAtBqmC,EAAermC,IAA2BA,aAAa3K,OAOjEpD,EAAQ+0C,WAHR,SAAoB/iC,GAClB,MAAsB,mBAARA,GAYhBhS,EAAQg1C,YARR,SAAqBhjC,GACnB,OAAe,OAARA,GACe,kBAARA,GACQ,iBAARA,GACQ,iBAARA,GACQ,iBAARA,QACQ,IAARA,GAIhBhS,EAAQqnC,SAAWhB,EAAOgB,W,uGCrF1B,WAGA,2BAAgC1a,GAC5B,OAAO1hB,MAAMC,QAAQyhB,IAAUA,EAAM/e,OAAS,GAAK+e,EAAM,aAAcpR,EAAMpR,UAIjF,iCAAsCwiB,GAClC,OAAO1hB,MAAMC,QAAQyhB,IAAUA,EAAM/e,OAAS,GAAK+e,EAAM,GAAG5qB,eAAe,cAAgB4qB,EAAM,GAAG5qB,eAAe,iB,6BChBvH,SAAS8E,EAAO1F,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiB4b,OAezD,SAAS4P,EAAMxrB,GACX,OAAO8J,MAAMC,QAAQ/J,GAtBzBP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAItDnB,EAAO,QAHP,SAAiBmB,GACb,OAAiB,IAAVA,IAA4B,IAAVA,GAM7BnB,EAAQ6G,OAASA,EAIjB7G,EAAQ+G,OAHR,SAAgB5F,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBkjB,QAMzDrkB,EAAQmvB,MAHR,SAAehuB,GACX,OAAOA,aAAiBiC,OAM5BpD,EAAQkC,KAHR,SAAcf,GACV,MAAwB,mBAAVA,GAMlBnB,EAAQ2sB,MAAQA,EAIhB3sB,EAAQk0C,YAHR,SAAqB/yC,GACjB,OAAOwrB,EAAMxrB,IAAUA,EAAMgzC,OAAM,SAAAzf,GAAI,OAAI7tB,EAAO6tB,Q,8BC/BtD,Y,0CAKA9zB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMm7B,EAAWpC,EAAQ,IACnBD,EAAKC,EAAQ,IAEf+a,EAAK5O,EAAOhkC,KAAK,KAAM,SAAS,GAChC6yC,EAAK7O,EAAOhkC,KAAK,KAAM,SAAS,GAE9B8yC,E,WACF,aAA+B,IAAnBlO,EAAmB,uDAAR,OAAQ,UAC3B9kC,KAAK8kC,SAAWA,EAChB9kC,KAAK8iB,MAAQ,EACb9iB,KAAKqlC,OAASnB,EAAOM,YARX,M,yCAUPyO,GACH,IAAIC,EAAWD,EACf,GAAuB,iBAAXA,EAAqB,CAC7B,IAAI9pB,EAAM8pB,EACNE,EAAYjP,EAAOS,WAAWxb,EAAKnpB,KAAK8kC,WAC5CoO,EAAWhP,EAAOM,YAAY2O,IACrBtU,MAAM1V,EAAK,EAAGgqB,EAAWnzC,KAAK8kC,UAE3C,GAAI9kC,KAAKqlC,OAAO55B,OAASzL,KAAK8iB,OAASowB,EAASznC,OAC5CynC,EAAS9N,KAAKplC,KAAKqlC,OAAQrlC,KAAK8iB,MAAO,EAAGowB,EAASznC,YAElD,CACD,IAAI2nC,EAtBE,MAsBSjrB,KAAKkrB,MAAMrzC,KAAK8iB,MAAQowB,EAASznC,QAtB1C,MAsBmE,GACtD,IAAfzL,KAAK8iB,OACL9iB,KAAKqlC,OAASnB,EAAOM,YAAY4O,GACjCF,EAAS9N,KAAKplC,KAAKqlC,OAAQ,EAAG,EAAG6N,EAASznC,SAG1CzL,KAAKqlC,OAASnB,EAAO3b,OAAO,CAACvoB,KAAKqlC,OAAOvd,MAAM,EAAG9nB,KAAK8iB,OAAQowB,GAAWE,GAGlFpzC,KAAK8iB,OAASowB,EAASznC,S,uCAKvB,IAFA,IAAIpJ,OAAS/B,EACTgzC,EAAU,EACPA,EAAU,EAAItzC,KAAK8iB,QAAU9iB,KAAKqlC,OAAOiO,KAAaR,GAAM9yC,KAAKqlC,OAAOiO,EAAU,KAAOP,GAAM/yC,KAAKqlC,OAAOiO,EAAU,KAAOR,GAAM9yC,KAAKqlC,OAAOiO,EAAU,KAAOP,IAClKO,IAGJ,GAAIA,EAAU,GAAKtzC,KAAK8iB,MACpB,OAAOzgB,EAEXA,EAAS5D,OAAOY,OAAO,MACTW,KAAKqlC,OAAO/5B,SAAS,QAAS,EAAGgoC,GAAS/rB,MAzCrD,QA0CKpb,SAAQ,SAAConC,GACb,IAAIzwB,EAAQywB,EAAOlgB,QAAQ,KAC3B,IAAe,IAAXvQ,EACA,MAAM,IAAI7hB,MAAM,sDAEpB,IAAI3B,EAAMi0C,EAAO3rB,OAAO,EAAG9E,GACvB9jB,EAAQu0C,EAAO3rB,OAAO9E,EAAQ,GAAGiF,OACrC1lB,EAAO/C,GAAON,KAElB,IAAIw0C,EAAYF,EAAU,EAG1B,OAFAtzC,KAAKqlC,OAASrlC,KAAKqlC,OAAOvd,MAAM0rB,GAChCxzC,KAAK8iB,MAAQ9iB,KAAK8iB,MAAQ0wB,EACnBnxC,I,qCAEIoJ,GACX,GAAIzL,KAAK8iB,MAAQrX,EACb,OAAO,KAEX,IAAIpJ,EAASrC,KAAKqlC,OAAO/5B,SAAStL,KAAK8kC,SAAU,EAAGr5B,GAChD+nC,EAAY/nC,EAGhB,OAFAzL,KAAKqlC,OAAOD,KAAKplC,KAAKqlC,OAAQ,EAAGmO,GACjCxzC,KAAK8iB,MAAQ9iB,KAAK8iB,MAAQ0wB,EACnBnxC,I,oCAGP,OAAOrC,KAAK8iB,U,MAIpB,SAAW4W,GAMPA,EAAc3pB,GALd,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAagsB,EAAG/3B,KAAK+L,EAAUk3B,SAAWlL,EAAG/3B,KAAK+L,EAAUzL,UAC/Dy3B,EAAG/3B,KAAK+L,EAAUi1B,UAAYjJ,EAAG/3B,KAAK+L,EAAUg1B,UAAYhJ,EAAG/3B,KAAK+L,EAAU2nC,mBAJ1F,CAOmB51C,EAAQ67B,gBAAkB77B,EAAQ67B,cAAgB,K,IAC/Dga,E,WACF,aAAc,UACV1zC,KAAKg9B,aAAe,IAAI7C,EAAS5M,QACjCvtB,KAAKi9B,aAAe,IAAI9C,EAAS5M,QACjCvtB,KAAK2zC,sBAAwB,IAAIxZ,EAAS5M,Q,4CAG1CvtB,KAAKg9B,aAAa38B,UAClBL,KAAKi9B,aAAa58B,Y,gCAKZ2sB,GACNhtB,KAAKg9B,aAAapP,KAAK5tB,KAAK4zC,QAAQ5mB,M,kCAMpChtB,KAAKi9B,aAAarP,UAAKttB,K,yCAKR6gB,GACfnhB,KAAK2zC,sBAAsB/lB,KAAKzM,K,8BAE5B6L,GACJ,OAAIA,aAAiB/rB,MACV+rB,EAGA,IAAI/rB,MAAJ,yCAA4C62B,EAAGpzB,OAAOsoB,EAAMplB,SAAWolB,EAAMplB,QAAU,c,8BAtBlG,OAAO5H,KAAKg9B,aAAajR,Q,8BAMzB,OAAO/rB,KAAKi9B,aAAalR,Q,uCAMzB,OAAO/rB,KAAK2zC,sBAAsB5nB,U,KAc1CluB,EAAQ61C,sBAAwBA,E,IAC1B/Z,E,YACF,WAAYyW,GAA6B,MAAnBtL,EAAmB,uDAAR,OAAQ,kBACrC,2BACKsL,SAAWA,EAChB,EAAK/K,OAAS,IAAI2N,EAAclO,GAChC,EAAK+O,uBAAyB,IAJO,E,gDAYlCxnB,GAAU,WACbrsB,KAAK8zC,mBAAqB,EAC1B9zC,KAAK+zC,aAAe,EACpB/zC,KAAKg0C,yBAAsB1zC,EAC3BN,KAAKqsB,SAAWA,EAChBrsB,KAAKowC,SAASrlB,GAAG,QAAQ,SAAC+F,GACtB,EAAKmjB,OAAOnjB,MAEhB9wB,KAAKowC,SAASrlB,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MACpDhtB,KAAKowC,SAASrlB,GAAG,SAAS,kBAAM,EAAKopB,iB,6BAElCrjB,GAEH,IADA9wB,KAAKqlC,OAAO37B,OAAOonB,KACN,CACT,IAAgC,IAA5B9wB,KAAK8zC,kBAA0B,CAC/B,IAAIM,EAAUp0C,KAAKqlC,OAAOgP,iBAC1B,IAAKD,EACD,OAEJ,IAAIE,EAAgBF,EAAQ,kBAC5B,IAAKE,EACD,MAAM,IAAIrzC,MAAM,kDAEpB,IAAIwK,EAAS47B,SAASiN,GACtB,GAAIjO,MAAM56B,GACN,MAAM,IAAIxK,MAAM,0CAEpBjB,KAAK8zC,kBAAoBroC,EAI7B,IAAI8oC,EAAMv0C,KAAKqlC,OAAOmP,eAAex0C,KAAK8zC,mBAC1C,GAAY,OAARS,EAGA,YADAv0C,KAAKy0C,yBAGTz0C,KAAK00C,2BACL10C,KAAK8zC,mBAAqB,EAC1B9zC,KAAK+zC,eACL,IAAIY,EAAOrZ,KAAKpY,MAAMqxB,GACtBv0C,KAAKqsB,SAASsoB,M,iDAId30C,KAAKg0C,sBACLpqB,aAAa5pB,KAAKg0C,qBAClBh0C,KAAKg0C,yBAAsB1zC,K,+CAGV,WACrBN,KAAK00C,2BACD10C,KAAK6zC,wBAA0B,IAGnC7zC,KAAKg0C,oBAAsBrqB,YAAW,SAACiW,EAAOzV,GAC1C,EAAK6pB,yBAAsB1zC,EACvBs/B,IAAU,EAAKmU,eACf,EAAKa,mBAAmB,CAAEb,aAAcnU,EAAOiV,YAAa1qB,IAC5D,EAAKsqB,4BAEVz0C,KAAK6zC,uBAAwB7zC,KAAK+zC,aAAc/zC,KAAK6zC,2B,0CAnElC1pB,GACtBnqB,KAAK6zC,uBAAyB1pB,G,eAG9B,OAAOnqB,KAAK6zC,2B,GAXcH,GA6ElC71C,EAAQ87B,oBAAsBA,E,IACxBC,E,YACF,WAAY1qB,GAAS,iBACjB,2BACKA,QAAUA,EACf,IAAI4lC,EAAe,EAAK5lC,QAHP,OAIjB4lC,EAAa/pB,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MACnD8nB,EAAa/pB,GAAG,SAAS,kBAAM,EAAKopB,eALnB,E,gDAOd9nB,GACHrsB,KAAKkP,QAAQ6b,GAAG,UAAWsB,O,GATJqnB,GAY/B71C,EAAQ+7B,iBAAmBA,E,IACrBC,E,YACF,WAAYkb,GAA4B,IAApBjQ,EAAoB,uDAAT,QAAS,uCAC9BiQ,EAAQjQ,I,iBAFYnL,GAKlC97B,EAAQg8B,oBAAsBA,I,wEC3N9Bp7B,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAEtD,SAAWmB,GAMPA,EAAWd,OALX,SAAgBU,GACZ,MAAO,CACHM,QAASN,IAHrB,CAOgBlC,EAAQsC,aAAetC,EAAQsC,WAAa,KAE5D,SAAWkgB,GACP,IAAMwL,EAAc,CAAExrB,QAAF,cACpBggB,EAAM1T,KAAO,WAAc,OAAOkf,GAFtC,CAGWhuB,EAAQwiB,QAAUxiB,EAAQwiB,MAAQ,K,IACvC+M,E,wEACEf,GAAkC,WAAxBC,EAAwB,uDAAd,KAAMC,EAAQ,uCAC7BvsB,KAAKmsB,aACNnsB,KAAKmsB,WAAa,GAClBnsB,KAAKwsB,UAAY,IAErBxsB,KAAKmsB,WAAWphB,KAAKshB,GACrBrsB,KAAKwsB,UAAUzhB,KAAKuhB,GAChBxjB,MAAMC,QAAQwjB,IACdA,EAAOxhB,KAAK,CAAE1K,QAAS,kBAAM,EAAKosB,OAAOJ,EAAUC,Q,6BAGpDD,GAA0B,IAAhBC,EAAgB,uDAAN,KACvB,GAAKtsB,KAAKmsB,WAAV,CAIA,IADA,IAAIO,GAAoC,EAC/B3uB,EAAI,EAAGqrB,EAAMppB,KAAKmsB,WAAW1gB,OAAQ1N,EAAIqrB,EAAKrrB,IACnD,GAAIiC,KAAKmsB,WAAWpuB,KAAOsuB,EAAU,CACjC,GAAIrsB,KAAKwsB,UAAUzuB,KAAOuuB,EAItB,OAFAtsB,KAAKmsB,WAAWtF,OAAO9oB,EAAG,QAC1BiC,KAAKwsB,UAAU3F,OAAO9oB,EAAG,GAIzB2uB,GAAoC,EAIhD,GAAIA,EACA,MAAM,IAAIzrB,MAAM,wF,+BAIpB,IAAKjB,KAAKmsB,WACN,MAAO,GAFC,IAIZ,IAAInlB,EAAM,GAAI4lB,EAAY5sB,KAAKmsB,WAAWrE,MAAM,GAAI+E,EAAW7sB,KAAKwsB,UAAU1E,MAAM,GAJxE,mBAANvW,EAAM,yBAANA,EAAM,gBAKZ,IAAK,IAAIxT,EAAI,EAAGqrB,EAAMwD,EAAUnhB,OAAQ1N,EAAIqrB,EAAKrrB,IAC7C,IACIiJ,EAAI+D,KAAK6hB,EAAU7uB,GAAG4sB,MAAMkC,EAAS9uB,GAAIwT,IAE7C,MAAO3F,GACHmhB,QAAQC,MAAMphB,GAGtB,OAAO5E,I,gCAGP,OAAQhH,KAAKmsB,YAAyC,IAA3BnsB,KAAKmsB,WAAW1gB,S,gCAG3CzL,KAAKmsB,gBAAa7rB,EAClBN,KAAKwsB,eAAYlsB,M,KAGnBitB,E,WACF,WAAYN,GAAU,UAClBjtB,KAAKitB,SAAWA,E,uCAsCflB,GACG/rB,KAAKmsB,YACLnsB,KAAKmsB,WAAWW,OAAO5uB,KAAK8B,KAAKmsB,WAAYJ,K,gCAI7C/rB,KAAKmsB,aACLnsB,KAAKmsB,WAAW9rB,UAChBL,KAAKmsB,gBAAa7rB,K,4BAxCd,WA0BR,OAzBKN,KAAKmtB,SACNntB,KAAKmtB,OAAS,SAAClB,EAAUC,EAAU9rB,GAQ/B,IAAIiC,EAaJ,OApBK,EAAK8pB,aACN,EAAKA,WAAa,IAAIiB,GAEtB,EAAKH,UAAY,EAAKA,SAASI,oBAAsB,EAAKlB,WAAW9iB,WACrE,EAAK4jB,SAASI,mBAAmB,GAErC,EAAKlB,WAAWC,IAAIH,EAAUC,GAE9B7pB,EAAS,CACLhC,QAAS,WACL,EAAK8rB,WAAWM,OAAOR,EAAUC,GACjC7pB,EAAOhC,QAAUktB,EAAQC,MACrB,EAAKP,UAAY,EAAKA,SAASQ,sBAAwB,EAAKtB,WAAW9iB,WACvE,EAAK4jB,SAASQ,qBAAqB,KAI3C3kB,MAAMC,QAAQ3I,IACdA,EAAY2K,KAAK1I,GAEdA,IAGRrC,KAAKmtB,W,KAkBpBI,EAAQC,MAAQ,aAChB3vB,EAAQ0vB,QAAUA,G,8BClIlB,Y,kDAKA9uB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMm7B,EAAWpC,EAAQ,IACnBD,EAAKC,EAAQ,KAInB,SAAWgC,GAMPA,EAAchqB,GALd,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAagsB,EAAG/3B,KAAK+L,EAAUzL,UAAYy3B,EAAG/3B,KAAK+L,EAAUg1B,UAChEhJ,EAAG/3B,KAAK+L,EAAUi1B,UAAYjJ,EAAG/3B,KAAK+L,EAAU+yB,QAJ5D,CAOmBhhC,EAAQk8B,gBAAkBl8B,EAAQk8B,cAAgB,K,IAC/Dib,E,WACF,aAAc,UACVh1C,KAAKg9B,aAAe,IAAI7C,EAAS5M,QACjCvtB,KAAKi9B,aAAe,IAAI9C,EAAS5M,Q,4CAGjCvtB,KAAKg9B,aAAa38B,UAClBL,KAAKi9B,aAAa58B,Y,gCAKZ2sB,EAAOplB,EAAS8lB,GACtB1tB,KAAKg9B,aAAapP,KAAK,CAAC5tB,KAAK4zC,QAAQ5mB,GAAQplB,EAAS8lB,M,kCAMtD1tB,KAAKi9B,aAAarP,UAAKttB,K,8BAEnB0sB,GACJ,OAAIA,aAAiB/rB,MACV+rB,EAGA,IAAI/rB,MAAJ,yCAA4C62B,EAAGpzB,OAAOsoB,EAAMplB,SAAWolB,EAAMplB,QAAU,c,8BAhBlG,OAAO5H,KAAKg9B,aAAajR,Q,8BAMzB,OAAO/rB,KAAKi9B,aAAalR,U,KAcjCluB,EAAQm3C,sBAAwBA,E,IAC1Bhb,E,YACF,WAAYpD,GAA6B,MAAnBkO,EAAmB,uDAAR,OAAQ,kBACrC,2BACKlO,SAAWA,EAChB,EAAKkO,SAAWA,EAChB,EAAKmQ,WAAa,EAClB,EAAKre,SAAS7L,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MACpD,EAAK4J,SAAS7L,GAAG,SAAS,kBAAM,EAAKopB,eANA,E,+CAQnCI,GACF,IAAII,EAAOrZ,KAAK0D,UAAUuV,GAEtBH,EAAU,CAtDF,mBAqDQlQ,EAAOS,WAAWgQ,EAAM30C,KAAK8kC,UAEhBx5B,WAtD9B,eAyDH,IAEItL,KAAK42B,SAASiI,MAAMuV,EAAQ5sB,KAAK,IAAK,SAEtCxnB,KAAK42B,SAASiI,MAAM8V,EAAM30C,KAAK8kC,UAC/B9kC,KAAKi1C,WAAa,EAEtB,MAAOjoB,GACHhtB,KAAKi1C,aACLj1C,KAAKk0C,UAAUlnB,EAAOunB,EAAKv0C,KAAKi1C,iB,GAzBVD,GA6BlCn3C,EAAQm8B,oBAAsBA,E,IACxBC,E,YACF,WAAY/qB,GAAS,iBACjB,2BACKA,QAAUA,EACf,EAAK+lC,WAAa,EAClB,EAAKnrB,MAAQ,GACb,EAAKorB,SAAU,EACf,IAAIJ,EAAe,EAAK5lC,QANP,OAOjB4lC,EAAa/pB,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MACnD8nB,EAAa/pB,GAAG,SAAS,kBAAM,EAAKopB,aARnB,E,+CAUfI,GACGv0C,KAAKk1C,SAAiC,IAAtBl1C,KAAK8pB,MAAMre,OAK5BzL,KAAK8pB,MAAM/e,KAAKwpC,GAHhBv0C,KAAKm1C,eAAeZ,K,qCAMbA,GAAK,WAChB,IACQv0C,KAAKkP,QAAQkmC,OACbp1C,KAAKk1C,SAAU,EACfl1C,KAAKkP,QAAQkmC,KAAKb,OAAKj0C,OAAWA,GAAW,SAAC0sB,GAC1C,EAAKkoB,SAAU,EACXloB,GACA,EAAKioB,aACL,EAAKf,UAAUlnB,EAAOunB,EAAK,EAAKU,aAGhC,EAAKA,WAAa,EAElB,EAAKnrB,MAAMre,OAAS,GACpB,EAAK0pC,eAAe,EAAKrrB,MAAM0I,aAK/C,MAAOxF,GACHhtB,KAAKi1C,aACLj1C,KAAKk0C,UAAUlnB,EAAOunB,EAAKv0C,KAAKi1C,iB,GAzCbD,GA6C/Bn3C,EAAQo8B,iBAAmBA,E,IACrBC,E,YACF,WAAY6a,GAA2B,MAAnBjQ,EAAmB,uDAAR,OAAQ,kBACnC,2BACKiQ,OAASA,EACd,EAAKjrB,MAAQ,GACb,EAAKorB,SAAU,EACf,EAAKpQ,SAAWA,EAChB,EAAKmQ,WAAa,EAClB,EAAKF,OAAOhqB,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MAClD,EAAK+nB,OAAOhqB,GAAG,SAAS,kBAAM,EAAKopB,eARA,E,mDAWnC,4CACAn0C,KAAK+0C,OAAOjjB,Y,4BAEVyiB,GACGv0C,KAAKk1C,SAAiC,IAAtBl1C,KAAK8pB,MAAMre,OAK5BzL,KAAK8pB,MAAM/e,KAAKwpC,GAHhBv0C,KAAKm1C,eAAeZ,K,qCAMbA,GAAK,WACZI,EAAOrZ,KAAK0D,UAAUuV,GAEtBH,EAAU,CAjJF,mBAgJQlQ,EAAOS,WAAWgQ,EAAM30C,KAAK8kC,UAEhBx5B,WAjJ9B,eAoJH,IAEItL,KAAKk1C,SAAU,EACfl1C,KAAK+0C,OAAOlW,MAAMuV,EAAQ5sB,KAAK,IAAK,SAAS,SAACwF,GACtCA,GACA,EAAKqoB,YAAYroB,EAAOunB,GAE5B,IAEI,EAAKQ,OAAOlW,MAAM8V,EAAM,EAAK7P,UAAU,SAAC9X,GACpC,EAAKkoB,SAAU,EACXloB,EACA,EAAKqoB,YAAYroB,EAAOunB,GAGxB,EAAKU,WAAa,EAElB,EAAKnrB,MAAMre,OAAS,GACpB,EAAK0pC,eAAe,EAAKrrB,MAAM0I,YAI3C,MAAOxF,GACH,EAAKqoB,YAAYroB,EAAOunB,OAIpC,MAAOvnB,GACHhtB,KAAKq1C,YAAYroB,EAAOunB,M,kCAGpBvnB,EAAOunB,GACfv0C,KAAKi1C,aACLj1C,KAAKk0C,UAAUlnB,EAAOunB,EAAKv0C,KAAKi1C,gB,GAhEND,GAmElCn3C,EAAQq8B,oBAAsBA,I,0CCjM9B,iCAC6B,oBAAT0J,MAAwBA,MAChCkL,OACRnkB,EAAQvL,SAASzf,UAAUgrB,MAiB/B,SAAS2qB,EAAQrwC,EAAIswC,GACnBv1C,KAAK+S,IAAM9N,EACXjF,KAAKw1C,SAAWD,EAflB13C,EAAQ8rB,WAAa,WACnB,OAAO,IAAI2rB,EAAQ3qB,EAAMzsB,KAAKyrB,WAAYxY,EAAO7B,WAAYsa,eAE/D/rB,EAAQ43C,YAAc,WACpB,OAAO,IAAIH,EAAQ3qB,EAAMzsB,KAAKu3C,YAAatkC,EAAO7B,WAAYomC,gBAEhE73C,EAAQ+rB,aACR/rB,EAAQ63C,cAAgB,SAASvrB,GAC3BA,GACFA,EAAQsF,SAQZ6lB,EAAQ31C,UAAUg2C,MAAQL,EAAQ31C,UAAUi2C,IAAM,aAClDN,EAAQ31C,UAAU8vB,MAAQ,WACxBzvB,KAAKw1C,SAASt3C,KAAKiT,EAAOnR,KAAK+S,MAIjClV,EAAQg4C,OAAS,SAASx6B,EAAMy6B,GAC9BlsB,aAAavO,EAAK06B,gBAClB16B,EAAK26B,aAAeF,GAGtBj4C,EAAQo4C,SAAW,SAAS56B,GAC1BuO,aAAavO,EAAK06B,gBAClB16B,EAAK26B,cAAgB,GAGvBn4C,EAAQq4C,aAAer4C,EAAQkG,OAAS,SAASsX,GAC/CuO,aAAavO,EAAK06B,gBAElB,IAAID,EAAQz6B,EAAK26B,aACbF,GAAS,IACXz6B,EAAK06B,eAAiBpsB,YAAW,WAC3BtO,EAAK86B,YACP96B,EAAK86B,eACNL,KAKP,EAAQ,KAIRj4C,EAAQugC,aAAgC,oBAATwF,MAAwBA,KAAKxF,mBAClB,IAAX7O,GAA0BA,EAAO6O,cACxCp+B,MAAQA,KAAKo+B,aACrCvgC,EAAQu4C,eAAkC,oBAATxS,MAAwBA,KAAKwS,qBAClB,IAAX7mB,GAA0BA,EAAO6mB,gBACxCp2C,MAAQA,KAAKo2C,iB,kCC9DvC,IAAIpf,EAAiB,EAAQ,IAEzB9oB,EAAiB,EAAQ,IAEzBmoC,EAAmB,EAAQ,KAE3B/E,EAAY,EAAQ,KAExB,SAASgF,EAAiB92B,GACxB,IAAI+2B,EAAwB,mBAARtqC,IAAqB,IAAIA,SAAQ3L,EA8BrD,OA5BAxC,EAAOD,QAAUy4C,EAAmB,SAA0B92B,GAC5D,GAAc,OAAVA,IAAmB62B,EAAiB72B,GAAQ,OAAOA,EAEvD,GAAqB,mBAAVA,EACT,MAAM,IAAI6H,UAAU,sDAGtB,QAAsB,IAAXkvB,EAAwB,CACjC,GAAIA,EAAOlrC,IAAImU,GAAQ,OAAO+2B,EAAO33C,IAAI4gB,GAEzC+2B,EAAOhrC,IAAIiU,EAAOg3B,GAGpB,SAASA,IACP,OAAOlF,EAAU9xB,EAAOlQ,UAAW0nB,EAAeh3B,MAAMizB,aAW1D,OARAujB,EAAQ72C,UAAYlB,OAAOY,OAAOmgB,EAAM7f,UAAW,CACjDszB,YAAa,CACXj0B,MAAOw3C,EACP73C,YAAY,EACZi4B,UAAU,EACV1E,cAAc,KAGXhkB,EAAesoC,EAASh3B,IAG1B82B,EAAiB92B,GAG1B1hB,EAAOD,QAAUy4C,G,+CCrCjB73C,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAEtD,SAAWmB,GAMPA,EAAWd,OALX,SAAgBU,GACZ,MAAO,CACHM,QAASN,IAHrB,CAOgBlC,EAAQsC,aAAetC,EAAQsC,WAAa,KAE5D,SAAWkgB,GACP,IAAMwL,EAAc,CAAExrB,QAAF,cACpBggB,EAAM1T,KAAO,WAAc,OAAOkf,GAFtC,CAGWhuB,EAAQwiB,QAAUxiB,EAAQwiB,MAAQ,K,IACvC+M,E,wEACEf,GAAkC,WAAxBC,EAAwB,uDAAd,KAAMC,EAAQ,uCAC7BvsB,KAAKmsB,aACNnsB,KAAKmsB,WAAa,GAClBnsB,KAAKwsB,UAAY,IAErBxsB,KAAKmsB,WAAWphB,KAAKshB,GACrBrsB,KAAKwsB,UAAUzhB,KAAKuhB,GAChBxjB,MAAMC,QAAQwjB,IACdA,EAAOxhB,KAAK,CAAE1K,QAAS,kBAAM,EAAKosB,OAAOJ,EAAUC,Q,6BAGpDD,GAA0B,IAAhBC,EAAgB,uDAAN,KACvB,GAAKtsB,KAAKmsB,WAAV,CAIA,IADA,IAAIO,GAAoC,EAC/B3uB,EAAI,EAAGqrB,EAAMppB,KAAKmsB,WAAW1gB,OAAQ1N,EAAIqrB,EAAKrrB,IACnD,GAAIiC,KAAKmsB,WAAWpuB,KAAOsuB,EAAU,CACjC,GAAIrsB,KAAKwsB,UAAUzuB,KAAOuuB,EAItB,OAFAtsB,KAAKmsB,WAAWtF,OAAO9oB,EAAG,QAC1BiC,KAAKwsB,UAAU3F,OAAO9oB,EAAG,GAIzB2uB,GAAoC,EAIhD,GAAIA,EACA,MAAM,IAAIzrB,MAAM,wF,+BAIpB,IAAKjB,KAAKmsB,WACN,MAAO,GAFC,IAIZ,IAAInlB,EAAM,GAAI4lB,EAAY5sB,KAAKmsB,WAAWrE,MAAM,GAAI+E,EAAW7sB,KAAKwsB,UAAU1E,MAAM,GAJxE,mBAANvW,EAAM,yBAANA,EAAM,gBAKZ,IAAK,IAAIxT,EAAI,EAAGqrB,EAAMwD,EAAUnhB,OAAQ1N,EAAIqrB,EAAKrrB,IAC7C,IACIiJ,EAAI+D,KAAK6hB,EAAU7uB,GAAG4sB,MAAMkC,EAAS9uB,GAAIwT,IAE7C,MAAO3F,GAEHmhB,QAAQC,MAAMphB,GAGtB,OAAO5E,I,gCAGP,OAAQhH,KAAKmsB,YAAyC,IAA3BnsB,KAAKmsB,WAAW1gB,S,gCAG3CzL,KAAKmsB,gBAAa7rB,EAClBN,KAAKwsB,eAAYlsB,M,KAGnBitB,E,WACF,WAAYN,GAAU,UAClBjtB,KAAKitB,SAAWA,E,uCAsCflB,GACG/rB,KAAKmsB,YACLnsB,KAAKmsB,WAAWW,OAAO5uB,KAAK8B,KAAKmsB,WAAYJ,K,gCAI7C/rB,KAAKmsB,aACLnsB,KAAKmsB,WAAW9rB,UAChBL,KAAKmsB,gBAAa7rB,K,4BAxCd,WA0BR,OAzBKN,KAAKmtB,SACNntB,KAAKmtB,OAAS,SAAClB,EAAUC,EAAU9rB,GAQ/B,IAAIiC,EAaJ,OApBK,EAAK8pB,aACN,EAAKA,WAAa,IAAIiB,GAEtB,EAAKH,UAAY,EAAKA,SAASI,oBAAsB,EAAKlB,WAAW9iB,WACrE,EAAK4jB,SAASI,mBAAmB,GAErC,EAAKlB,WAAWC,IAAIH,EAAUC,GAE9B7pB,EAAS,CACLhC,QAAS,WACL,EAAK8rB,WAAWM,OAAOR,EAAUC,GACjC7pB,EAAOhC,QAAUktB,EAAQC,MACrB,EAAKP,UAAY,EAAKA,SAASQ,sBAAwB,EAAKtB,WAAW9iB,WACvE,EAAK4jB,SAASQ,qBAAqB,KAI3C3kB,MAAMC,QAAQ3I,IACdA,EAAY2K,KAAK1I,GAEdA,IAGRrC,KAAKmtB,W,KAkBpBtvB,EAAQ0vB,QAAUA,EAClBA,EAAQC,MAAQ,c,cCnIhB3vB,EAAQ44C,WAAa,WAAc,MAAO,MAE1C54C,EAAQ64C,SAAW,WACf,MAAwB,oBAAb/uC,SACAA,SAAS+uC,SAER,IAGhB74C,EAAQ84C,QAAU,WAAc,MAAO,IAEvC94C,EAAQ+4C,OAAS,WAAc,OAAO,GAEtC/4C,EAAQg5C,QAAU,WACd,OAAO30B,OAAO40B,WAGlBj5C,EAAQk5C,SAAW,WACf,OAAO70B,OAAO40B,WAGlBj5C,EAAQm5C,KAAO,WAAc,MAAO,IAEpCn5C,EAAQuU,KAAO,WAAc,MAAO,WAEpCvU,EAAQo5C,QAAU,WACd,MAAyB,oBAAd9jB,UACAA,UAAU+jB,WAEd,IAGXr5C,EAAQs5C,kBACNt5C,EAAQu5C,qBACR,WAAc,MAAO,IAEvBv5C,EAAQw5C,KAAO,WAAc,MAAO,cAEpCx5C,EAAQq1B,SAAW,WAAc,MAAO,WAExCr1B,EAAQy5C,OAASz5C,EAAQ05C,OAAS,WAC9B,MAAO,QAGX15C,EAAQ25C,IAAM,KAEd35C,EAAQ45C,QAAU,WACjB,MAAO,M,8ECiER,SAAYvwC,GACR,uBACA,2CACA,yEAHJ,CAAY,EAAAA,wBAAA,EAAAA,sBAAqB,KAWjC,SAAYwwC,GACR,uCACA,yCAFJ,CAAY,EAAAA,+BAAA,EAAAA,6BAA4B,KAuCxC,SAAYvwC,GACR,uBACA,2BACA,iCACA,qBACA,2BACA,qBACA,uBACA,6BACA,uBACA,2BACA,sBACA,4BACA,oBACA,sBACA,4BACA,oBACA,gCACA,0BACA,oBACA,sBACA,oBACA,8BACA,kCACA,wBACA,sCACA,0BA1BJ,CAAY,EAAAA,qBAAA,EAAAA,mBAAkB,KA6B9B,mBAAa,EAAAwwC,WAoCb,SAAYvvC,GACR,mBACA,mBACA,yBACA,qBAJJ,CAAY,EAAAA,iBAAA,EAAAA,eAAc,KAO1B,SAAYC,GACR,iCADJ,CAAY,EAAAA,YAAA,EAAAA,UAAS,KAqCrB,SAAYa,GACR,mBACA,mBACA,qBAHJ,CAAY,EAAAA,wBAAA,EAAAA,sBAAqB,KAoHjC,SAAYiE,GACR,mBACA,uBACA,6BACA,yBACA,qBACA,uBACA,2BACA,qBACA,iCACA,mBACA,8BACA,4BACA,4BACA,4BACA,wBACA,wBACA,0BACA,sBACA,wBACA,kBACA,oBACA,gCACA,wBACA,sBACA,4BACA,sCA1BJ,CAAY,EAAAA,aAAA,EAAAA,WAAU,KA6EtB,iBAII,WAA0BnO,GAAA,KAAAA,QAC9B,OAJoB,EAAA2d,QAAU,IAAI3I,EAAiB,WAC/B,EAAA4I,QAAU,IAAI5I,EAAiB,WAC/B,EAAA6I,OAAS,IAAI7I,EAAiB,UAElD,EALA,GAAa,EAAAA,oB,8BChdb,iBAEuB,IAAZ9E,IACNA,EAAQuF,SAC0B,IAAnCvF,EAAQuF,QAAQ4e,QAAQ,QACW,IAAnCnkB,EAAQuF,QAAQ4e,QAAQ,QAAqD,IAArCnkB,EAAQuF,QAAQ4e,QAAQ,SAClEv1B,EAAOD,QAAU,CAAE6sB,SAKrB,SAAkBwM,EAAIzqB,EAAM4D,EAAMunC,GAChC,GAAkB,mBAAP1gB,EACT,MAAM,IAAI7P,UAAU,0CAEtB,IACI9V,EAAMxT,EADNqrB,EAAM9Z,UAAU7D,OAEpB,OAAQ2d,GACR,KAAK,EACL,KAAK,EACH,OAAOla,EAAQwb,SAASwM,GAC1B,KAAK,EACH,OAAOhoB,EAAQwb,UAAS,WACtBwM,EAAGh5B,KAAK,KAAMuO,MAElB,KAAK,EACH,OAAOyC,EAAQwb,UAAS,WACtBwM,EAAGh5B,KAAK,KAAMuO,EAAM4D,MAExB,KAAK,EACH,OAAOnB,EAAQwb,UAAS,WACtBwM,EAAGh5B,KAAK,KAAMuO,EAAM4D,EAAMunC,MAE9B,QAGE,IAFArmC,EAAO,IAAIzI,MAAMsgB,EAAM,GACvBrrB,EAAI,EACGA,EAAIwT,EAAK9F,QACd8F,EAAKxT,KAAOuR,UAAUvR,GAExB,OAAOmR,EAAQwb,UAAS,WACtBwM,EAAGvM,MAAM,KAAMpZ,SAhCnBzT,EAAOD,QAAUqR,I,8CCNnB,MAAMqoB,EAAI,EAAQ,IAAgBN,aAC5B4gB,EAAS,EAAQ,KAEvB/5C,EAAOD,QAAU,CACf4uB,OAAQ8K,EAAEsgB,GACVC,WAAYD,EAAOE,O,8ECarB,IAiBiBzd,EAjBjB,OAYM0d,EAA6Bv5C,OAAO6vB,OAAO7vB,OAAO0T,QAAO,SAAUka,EAAeC,GACpF,IAAM5I,EAASiG,WAAW0C,EAAS9sB,KAAK+sB,GAAU,GAClD,MAAO,CAAEjsB,QAAA,WAAkBupB,aAAalG,OACzC,CAAEoI,aAAc,MAEnB,SAAiBwO,GAEA,EAAA3tB,KAA0BlO,OAAO6vB,OAAO,CACjD2pB,yBAAyB,EACzB3V,wBAAyB,EAAAjiB,MAAM1T,OAGtB,EAAAurC,UAA+Bz5C,OAAO6vB,OAAO,CACtD2pB,yBAAyB,EACzB3V,wBAAyB0V,IATjC,CAAiB1d,EAAA,EAAAA,oBAAA,EAAAA,kBAAiB,KAalC,8BAEY,KAAA6d,cAAwB,EA0BpC,OAvBW,YAAAhY,OAAP,WACSngC,KAAKm4C,eACNn4C,KAAKm4C,cAAe,EAChBn4C,KAAKo4C,WACLp4C,KAAKo4C,SAASxqB,UAAKttB,GACnBN,KAAKo4C,cAAW93C,KAK5B,sBAAI,sCAAuB,C,IAA3B,WACI,OAAON,KAAKm4C,c,gCAGhB,sBAAI,sCAAuB,C,IAA3B,WACI,OAAIn4C,KAAKm4C,aACEH,GAENh4C,KAAKo4C,WACNp4C,KAAKo4C,SAAW,IAAI,EAAA7qB,SAEjBvtB,KAAKo4C,SAASrsB,Q,gCAE7B,EA5BA,GA8BA,2BA2BA,OAvBI,sBAAI,oBAAK,C,IAAT,WAMI,OALK/rB,KAAKq4C,SAGNr4C,KAAKq4C,OAAS,IAAIC,GAEft4C,KAAKq4C,Q,gCAGhB,YAAAlY,OAAA,WACSngC,KAAKq4C,OAKCr4C,KAAKq4C,SAAW/d,EAAkB4d,WAC1Bl4C,KAAKq4C,OAAQlY,SAF5BngC,KAAKq4C,OAAS/d,EAAkB4d,WAMxC,YAAA73C,QAAA,WACIL,KAAKmgC,UAEb,EA3BA,GAAa,EAAA9F,0BA+Bb,SAAgBke,IACZ,OAAO,IAAIt3C,MAHU,aAEzB,cAIA,uBAA4B4uB,GACxB,QAASA,GAPY,cAOLA,EAAIjoB,SAGxB,0BAA+Bg4B,GAC3B,GAAMA,GAASA,EAAMqY,wBACjB,MAAMM,M,6BCged,SAAgBC,EAAYhyB,GACxB,OAAUA,EAAOhS,UAAS,IAAIgS,EAAOloB,MAAOkG,QAAQ,MAAO,K,iDA/jBlD,EAAAi0C,kBAAoB,yBA8BjC,SAAiBC,GACG,EAAAC,YAAhB,SAA4BC,EAAoBC,GAC5C,MAAO,gBAAgBL,EAAYI,GAAI,IAAI1iB,mBAAmB2iB,IAFtE,CAAiB,EAAAH,gBAAA,EAAAA,cAAa,KAsJjB,EAAAI,cAAgBh6C,OAAO,iBAkCvB,EAAAi6C,eAAiBj6C,OAAO,kBAKxB,EAAAk6C,uBAAyBl6C,OAAO,0BAchC,EAAAm6C,+BAAiCn6C,OAAO,kCAOxC,EAAAo6C,0BAA4Bp6C,OAAO,6BA4BhD,SAAYq6C,GAER,2BAEA,yBAJJ,CAAY,EAAAA,0BAAA,EAAAA,wBAAuB,KA6StB,EAAAC,kBAAoBt6C,OAAO,qBAKxC,gBAIA,mCAAwC0nB,GACpC,OAAUA,EAAOhS,UAAS,IAAIgS,EAAOloB,MAAOkG,QAAQ,MAAO,MAGlD,EAAA60C,mBAAqBv6C,OAAO,sBAc5B,EAAAw6C,sBAAwBx6C,OAAO,yBAiB/B,EAAAy6C,mBAAqBz6C,OAAO,sBAuB5B,EAAA06C,wBAA0B,uBAC1B,EAAAC,aAAe36C,OAAO,gBAatB,EAAA46C,mBAAqB56C,OAAO,sBAsB5B,EAAA66C,8BAAgC76C,OAAO,kC,gBC3rBpD,IAAI86C,EAAK,EAAQ,KACbC,EAAK,EAAQ,KAEbC,EAAOD,EACXC,EAAKF,GAAKA,EACVE,EAAKD,GAAKA,EAEV/7C,EAAOD,QAAUi8C,G,cCPjB,SAASpW,EAAQuB,GAWf,MAVsB,mBAAXnmC,QAAoD,iBAApBA,OAAO6tB,SAChD7uB,EAAOD,QAAU6lC,EAAU,SAAiBuB,GAC1C,cAAcA,GAGhBnnC,EAAOD,QAAU6lC,EAAU,SAAiBuB,GAC1C,OAAOA,GAAyB,mBAAXnmC,QAAyBmmC,EAAIhS,cAAgBn0B,QAAUmmC,IAAQnmC,OAAOa,UAAY,gBAAkBslC,GAItHvB,EAAQuB,GAGjBnnC,EAAOD,QAAU6lC,G,8ECmBjB,iBAyCI,WACIqW,GAEA/5C,KAAK+5C,IAAMC,EAAKC,eAAeF,GAC/B,IAAMG,EAAaH,EAAI1mB,QAAQ2mB,EAAKG,WAC9BC,EAAYL,EAAIxT,YAAYyT,EAAKG,WACvCn6C,KAAK0nB,WAA4B,IAAfwyB,EAClBl6C,KAAK0F,MAAsB,IAAf00C,EAAmBL,EAAMA,EAAInyB,OAAOwyB,EAAY,GAC5Dp6C,KAAKq6C,OAASr6C,KAAK0nB,YAAcwyB,IAAeE,KAAep6C,KAAK0F,MAAQs0C,EAAKM,QAAQt6C,KAAK0F,OAC9F1F,KAAKu6C,KAAOv6C,KAAKw6C,cAEjB,IAAMC,EAAWz6C,KAAK0F,KAAK6gC,YAAY,KACvCvmC,KAAK1B,MAAqB,IAAdm8C,EAAkBz6C,KAAK0F,KAAO1F,KAAK0F,KAAKkiB,OAAO,EAAG6yB,GAC9Dz6C,KAAK8oB,KAAoB,IAAd2xB,EAAkB,GAAKz6C,KAAK0F,KAAKkiB,OAAO6yB,GAqI3D,OAxLW,EAAAH,QAAP,SAAeI,GACX,OAAOA,EAAQC,SAAS,MAQrB,EAAAV,eAAP,SAAsB7yB,GAElB,GAAIA,EAAK3b,QAAU,GAA4B,KAAvB2b,EAAKsB,WAAW,IAA8C,KAAvBtB,EAAKsB,WAAW,IACrE1a,EAAOoZ,EAAKsB,WAAW,KACjB,IAAc1a,GAAQ,KAC9BoZ,EAAO,IAAIxM,OAAO4b,aAAaxoB,EAAO,IAAG,IAAIoZ,EAAKQ,OAAO,SAE1D,GAAIR,EAAK3b,QAAU,GAA4B,KAAvB2b,EAAKsB,WAAW,GAAqB,CAChE,IAAM1a,KAAOoZ,EAAKsB,WAAW,KACjB,IAAc1a,GAAQ,KAC9BoZ,EAAUxM,OAAO4b,aAAaxoB,EAAO,IAAG,IAAIoZ,EAAKQ,OAAO,IAGhE,OAAOR,GAgCD,YAAAozB,YAAV,WAGI,GAAIx6C,KAAKq6C,OACL,OAAOr6C,KAGX,GAAKA,KAAK0nB,WAAV,CAGA,IAAM5E,EAAQ9iB,KAAK+5C,IAAI1mB,QAAQ2mB,EAAKG,UAAWH,EAAKG,UAAU1uC,QAC9D,OAAe,IAAXqX,EAEO,IAAIk3B,EAAKA,EAAKG,WAIlB,IAAIH,EAAKh6C,KAAK+5C,IAAInyB,OAAO,EAAG9E,IAAQy3B,OAM/C,sBAAI,kBAAG,C,IAAP,WAII,YAHkBj6C,IAAdN,KAAK46C,OACL56C,KAAK46C,KAAO56C,KAAK66C,cAEd76C,KAAK46C,M,gCAShB,sBAAI,qBAAM,C,IAAV,WACI,OAAQ56C,KAAKq6C,SAAoD,IAA1Cr6C,KAAK+5C,IAAIxT,YAAYyT,EAAKG,Y,gCAG3C,YAAAU,WAAV,WACI,IAAK76C,KAAK86C,OACN,OAAO96C,KAEX,IAAMo6C,EAAYp6C,KAAK+5C,IAAIxT,YAAYyT,EAAKG,WAC5C,GAAIn6C,KAAK0nB,WAAY,CACjB,IAAMwyB,EAAal6C,KAAK+5C,IAAI1mB,QAAQ2mB,EAAKG,WACzC,GAAID,IAAeE,EACf,OAAO,IAAIJ,EAAKh6C,KAAK+5C,IAAInyB,OAAO,EAAGsyB,EAAa,IAGxD,OAAO,IAAIF,EAAKh6C,KAAK+5C,IAAInyB,OAAO,EAAGwyB,KAGvC,YAAA5yB,KAAA,W,IAAK,sDACD,IAAMqxB,EAAehxB,EAAMlc,QAAO,SAAA7L,GAAK,QAAEA,KAAG0nB,KAAKwyB,EAAKG,WACtD,OAAKtB,EAGD74C,KAAK+5C,IAAIY,SAASX,EAAKG,WAChB,IAAIH,EAAKh6C,KAAK+5C,IAAMlB,GAExB,IAAImB,EAAKh6C,KAAK+5C,IAAMC,EAAKG,UAAYtB,GALjC74C,MAQf,YAAAsL,SAAA,WACI,OAAOtL,KAAK+5C,KAGhB,YAAA9zC,SAAA,SAASmhB,GACL,GAAIpnB,KAAK+5C,MAAQ3yB,EAAK2yB,IAClB,OAAO,IAAIC,EAAK,IAEpB,GAAKh6C,KAAK+5C,KAAQ3yB,EAAK2yB,IAAvB,CAGA,IAAMA,EAAM/5C,KAAK0F,KAAO1F,KAAK+5C,IAAMC,EAAKG,UAAYn6C,KAAK+5C,IACzD,GAAK3yB,EAAK2yB,IAAIgB,WAAWhB,GAIzB,OAAO,IAAIC,EADU5yB,EAAK2yB,IAAInyB,OAAOmyB,EAAItuC,WAI7C,YAAAuvC,gBAAA,SAAgB5zB,GACZ,QAASpnB,KAAKiG,SAASmhB,IAG3B,YAAA6zB,WAAA,SAAW7zB,GACP,IAAMnhB,EAAWjG,KAAKiG,SAASmhB,GAC/B,GAAInhB,EAAU,CACV,IAAMi1C,EAAcj1C,EAASqF,WAC7B,MAAoB,KAAhB4vC,EACO,EAEJA,EAAY3zB,MAAMyyB,EAAKG,WAAW1uC,OAE7C,OAAQ,GAMZ,YAAAgc,UAAA,sBACUE,EAAgB3nB,KAAK+5C,IAAIY,SAAS,KAClCQ,EAAYn7C,KAAKsL,WAAWic,MAAM,KAClC6zB,EAAwB,GAe9B,OAdAD,EAAUhvC,SAAQ,SAACnN,EAAO8jB,GACjB9jB,GAAmB,MAAVA,IAGA,OAAVA,EACIo8C,EAAY3vC,QAAkD,OAAxC2vC,EAAYA,EAAY3vC,OAAS,GACvD2vC,EAAY74C,MACJ,EAAKmlB,YACb0zB,EAAYrwC,KAAK,MAGrBqwC,EAAYrwC,KAAK/L,OAGE,IAAvBo8C,EAAY3vC,OACRzL,KAAKq6C,OACE,IAAIL,EAAK,KAET,IAAIA,EAAK,KAGjB,IAAIA,GAAMh6C,KAAK0nB,WAAa,IAAM,IAAM0zB,EAAY5zB,KAAK,MAAQG,EAAgB,IAAM,MAxL3F,EAAAwyB,UAAiB,IA0L5B,EA3LA,GAAa,EAAAH,Q,cCjCb,SAASqB,EAAgB78C,EAAGqB,GAM1B,OALA/B,EAAOD,QAAUw9C,EAAkB58C,OAAOyP,gBAAkB,SAAyB1P,EAAGqB,GAEtF,OADArB,EAAEs0B,UAAYjzB,EACPrB,GAGF68C,EAAgB78C,EAAGqB,GAG5B/B,EAAOD,QAAUw9C,G,8BCTjB,Y,0CAKA58C,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMm7B,EAAWpC,EAAQ,IACnBD,EAAKC,EAAQ,IAEf+a,EAAK5O,EAAOhkC,KAAK,KAAM,SAAS,GAChC6yC,EAAK7O,EAAOhkC,KAAK,KAAM,SAAS,GAE9B8yC,E,WACF,aAA+B,IAAnBlO,EAAmB,uDAAR,OAAQ,UAC3B9kC,KAAK8kC,SAAWA,EAChB9kC,KAAK8iB,MAAQ,EACb9iB,KAAKqlC,OAASnB,EAAOM,YARX,M,yCAUPyO,GACH,IAAIC,EAAWD,EACf,GAAuB,iBAAXA,EAAqB,CAC7B,IAAI9pB,EAAM8pB,EACNE,EAAYjP,EAAOS,WAAWxb,EAAKnpB,KAAK8kC,WAC5CoO,EAAWhP,EAAOM,YAAY2O,IACrBtU,MAAM1V,EAAK,EAAGgqB,EAAWnzC,KAAK8kC,UAE3C,GAAI9kC,KAAKqlC,OAAO55B,OAASzL,KAAK8iB,OAASowB,EAASznC,OAC5CynC,EAAS9N,KAAKplC,KAAKqlC,OAAQrlC,KAAK8iB,MAAO,EAAGowB,EAASznC,YAElD,CACD,IAAI2nC,EAtBE,MAsBSjrB,KAAKkrB,MAAMrzC,KAAK8iB,MAAQowB,EAASznC,QAtB1C,MAsBmE,GACtD,IAAfzL,KAAK8iB,OACL9iB,KAAKqlC,OAASnB,EAAOM,YAAY4O,GACjCF,EAAS9N,KAAKplC,KAAKqlC,OAAQ,EAAG,EAAG6N,EAASznC,SAG1CzL,KAAKqlC,OAASnB,EAAO3b,OAAO,CAACvoB,KAAKqlC,OAAOvd,MAAM,EAAG9nB,KAAK8iB,OAAQowB,GAAWE,GAGlFpzC,KAAK8iB,OAASowB,EAASznC,S,uCAKvB,IAFA,IAAIpJ,OAAS/B,EACTgzC,EAAU,EACPA,EAAU,EAAItzC,KAAK8iB,QAAU9iB,KAAKqlC,OAAOiO,KAAaR,GAAM9yC,KAAKqlC,OAAOiO,EAAU,KAAOP,GAAM/yC,KAAKqlC,OAAOiO,EAAU,KAAOR,GAAM9yC,KAAKqlC,OAAOiO,EAAU,KAAOP,IAClKO,IAGJ,GAAIA,EAAU,GAAKtzC,KAAK8iB,MACpB,OAAOzgB,EAEXA,EAAS5D,OAAOY,OAAO,MACTW,KAAKqlC,OAAO/5B,SAAS,QAAS,EAAGgoC,GAAS/rB,MAzCrD,QA0CKpb,SAAQ,SAAConC,GACb,IAAIzwB,EAAQywB,EAAOlgB,QAAQ,KAC3B,IAAe,IAAXvQ,EACA,MAAM,IAAI7hB,MAAM,sDAEpB,IAAI3B,EAAMi0C,EAAO3rB,OAAO,EAAG9E,GACvB9jB,EAAQu0C,EAAO3rB,OAAO9E,EAAQ,GAAGiF,OACrC1lB,EAAO/C,GAAON,KAElB,IAAIw0C,EAAYF,EAAU,EAG1B,OAFAtzC,KAAKqlC,OAASrlC,KAAKqlC,OAAOvd,MAAM0rB,GAChCxzC,KAAK8iB,MAAQ9iB,KAAK8iB,MAAQ0wB,EACnBnxC,I,qCAEIoJ,GACX,GAAIzL,KAAK8iB,MAAQrX,EACb,OAAO,KAEX,IAAIpJ,EAASrC,KAAKqlC,OAAO/5B,SAAStL,KAAK8kC,SAAU,EAAGr5B,GAChD+nC,EAAY/nC,EAGhB,OAFAzL,KAAKqlC,OAAOD,KAAKplC,KAAKqlC,OAAQ,EAAGmO,GACjCxzC,KAAK8iB,MAAQ9iB,KAAK8iB,MAAQ0wB,EACnBnxC,I,oCAGP,OAAOrC,KAAK8iB,U,MAIpB,SAAW4W,GAMPA,EAAc3pB,GALd,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAagsB,EAAG/3B,KAAK+L,EAAUk3B,SAAWlL,EAAG/3B,KAAK+L,EAAUzL,UAC/Dy3B,EAAG/3B,KAAK+L,EAAUi1B,UAAYjJ,EAAG/3B,KAAK+L,EAAUg1B,UAAYhJ,EAAG/3B,KAAK+L,EAAU2nC,mBAJ1F,CAOmB51C,EAAQ67B,gBAAkB77B,EAAQ67B,cAAgB,K,IAC/Dga,E,WACF,aAAc,UACV1zC,KAAKg9B,aAAe,IAAI7C,EAAS5M,QACjCvtB,KAAKi9B,aAAe,IAAI9C,EAAS5M,QACjCvtB,KAAK2zC,sBAAwB,IAAIxZ,EAAS5M,Q,4CAG1CvtB,KAAKg9B,aAAa38B,UAClBL,KAAKi9B,aAAa58B,Y,gCAKZ2sB,GACNhtB,KAAKg9B,aAAapP,KAAK5tB,KAAK4zC,QAAQ5mB,M,kCAMpChtB,KAAKi9B,aAAarP,UAAKttB,K,yCAKR6gB,GACfnhB,KAAK2zC,sBAAsB/lB,KAAKzM,K,8BAE5B6L,GACJ,OAAIA,aAAiB/rB,MACV+rB,EAGA,IAAI/rB,MAAJ,yCAA4C62B,EAAGpzB,OAAOsoB,EAAMplB,SAAWolB,EAAMplB,QAAU,c,8BAtBlG,OAAO5H,KAAKg9B,aAAajR,Q,8BAMzB,OAAO/rB,KAAKi9B,aAAalR,Q,uCAMzB,OAAO/rB,KAAK2zC,sBAAsB5nB,U,KAc1CluB,EAAQ61C,sBAAwBA,E,IAC1B/Z,E,YACF,WAAYyW,GAA6B,MAAnBtL,EAAmB,uDAAR,OAAQ,kBACrC,2BACKsL,SAAWA,EAChB,EAAK/K,OAAS,IAAI2N,EAAclO,GAChC,EAAK+O,uBAAyB,IAJO,E,gDAYlCxnB,GAAU,WACbrsB,KAAK8zC,mBAAqB,EAC1B9zC,KAAK+zC,aAAe,EACpB/zC,KAAKg0C,yBAAsB1zC,EAC3BN,KAAKqsB,SAAWA,EAChBrsB,KAAKowC,SAASrlB,GAAG,QAAQ,SAAC+F,GACtB,EAAKmjB,OAAOnjB,MAEhB9wB,KAAKowC,SAASrlB,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MACpDhtB,KAAKowC,SAASrlB,GAAG,SAAS,kBAAM,EAAKopB,iB,6BAElCrjB,GAEH,IADA9wB,KAAKqlC,OAAO37B,OAAOonB,KACN,CACT,IAAgC,IAA5B9wB,KAAK8zC,kBAA0B,CAC/B,IAAIM,EAAUp0C,KAAKqlC,OAAOgP,iBAC1B,IAAKD,EACD,OAEJ,IAAIE,EAAgBF,EAAQ,kBAC5B,IAAKE,EACD,MAAM,IAAIrzC,MAAM,kDAEpB,IAAIwK,EAAS47B,SAASiN,GACtB,GAAIjO,MAAM56B,GACN,MAAM,IAAIxK,MAAM,0CAEpBjB,KAAK8zC,kBAAoBroC,EAI7B,IAAI8oC,EAAMv0C,KAAKqlC,OAAOmP,eAAex0C,KAAK8zC,mBAC1C,GAAY,OAARS,EAGA,YADAv0C,KAAKy0C,yBAGTz0C,KAAK00C,2BACL10C,KAAK8zC,mBAAqB,EAC1B9zC,KAAK+zC,eACL,IAAIY,EAAOrZ,KAAKpY,MAAMqxB,GACtBv0C,KAAKqsB,SAASsoB,M,iDAId30C,KAAKg0C,sBACLpqB,aAAa5pB,KAAKg0C,qBAClBh0C,KAAKg0C,yBAAsB1zC,K,+CAGV,WACrBN,KAAK00C,2BACD10C,KAAK6zC,wBAA0B,IAGnC7zC,KAAKg0C,oBAAsBrqB,YAAW,SAACiW,EAAOzV,GAC1C,EAAK6pB,yBAAsB1zC,EACvBs/B,IAAU,EAAKmU,eACf,EAAKa,mBAAmB,CAAEb,aAAcnU,EAAOiV,YAAa1qB,IAC5D,EAAKsqB,4BAEVz0C,KAAK6zC,uBAAwB7zC,KAAK+zC,aAAc/zC,KAAK6zC,2B,0CAnElC1pB,GACtBnqB,KAAK6zC,uBAAyB1pB,G,eAG9B,OAAOnqB,KAAK6zC,2B,GAXcH,GA6ElC71C,EAAQ87B,oBAAsBA,E,IACxBC,E,YACF,WAAY1qB,GAAS,iBACjB,2BACKA,QAAUA,EACf,IAAI4lC,EAAe,EAAK5lC,QAHP,OAIjB4lC,EAAa/pB,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MACnD8nB,EAAa/pB,GAAG,SAAS,kBAAM,EAAKopB,eALnB,E,gDAOd9nB,GACHrsB,KAAKkP,QAAQ6b,GAAG,UAAWsB,O,GATJqnB,GAY/B71C,EAAQ+7B,iBAAmBA,E,IACrBC,E,YACF,WAAYkb,GAA4B,IAApBjQ,EAAoB,uDAAT,QAAS,uCAC9BiQ,EAAQjQ,I,iBAFYnL,GAKlC97B,EAAQg8B,oBAAsBA,I,uDChO9B,Y,kDAKAp7B,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMm7B,EAAWpC,EAAQ,IACnBD,EAAKC,EAAQ,KAInB,SAAWgC,GAMPA,EAAchqB,GALd,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAagsB,EAAG/3B,KAAK+L,EAAUzL,UAAYy3B,EAAG/3B,KAAK+L,EAAUg1B,UAChEhJ,EAAG/3B,KAAK+L,EAAUi1B,UAAYjJ,EAAG/3B,KAAK+L,EAAU+yB,QAJ5D,CAOmBhhC,EAAQk8B,gBAAkBl8B,EAAQk8B,cAAgB,K,IAC/Dib,E,WACF,aAAc,UACVh1C,KAAKg9B,aAAe,IAAI7C,EAAS5M,QACjCvtB,KAAKi9B,aAAe,IAAI9C,EAAS5M,Q,4CAGjCvtB,KAAKg9B,aAAa38B,UAClBL,KAAKi9B,aAAa58B,Y,gCAKZ2sB,EAAOplB,EAAS8lB,GACtB1tB,KAAKg9B,aAAapP,KAAK,CAAC5tB,KAAK4zC,QAAQ5mB,GAAQplB,EAAS8lB,M,kCAMtD1tB,KAAKi9B,aAAarP,UAAKttB,K,8BAEnB0sB,GACJ,OAAIA,aAAiB/rB,MACV+rB,EAGA,IAAI/rB,MAAJ,yCAA4C62B,EAAGpzB,OAAOsoB,EAAMplB,SAAWolB,EAAMplB,QAAU,c,8BAhBlG,OAAO5H,KAAKg9B,aAAajR,Q,8BAMzB,OAAO/rB,KAAKi9B,aAAalR,U,KAcjCluB,EAAQm3C,sBAAwBA,E,IAC1Bhb,E,YACF,WAAYpD,GAA6B,MAAnBkO,EAAmB,uDAAR,OAAQ,kBACrC,2BACKlO,SAAWA,EAChB,EAAKkO,SAAWA,EAChB,EAAKmQ,WAAa,EAClB,EAAKre,SAAS7L,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MACpD,EAAK4J,SAAS7L,GAAG,SAAS,kBAAM,EAAKopB,eANA,E,+CAQnCI,GACF,IAAII,EAAOrZ,KAAK0D,UAAUuV,GAEtBH,EAAU,CAtDF,mBAqDQlQ,EAAOS,WAAWgQ,EAAM30C,KAAK8kC,UAEhBx5B,WAtD9B,eAyDH,IAEItL,KAAK42B,SAASiI,MAAMuV,EAAQ5sB,KAAK,IAAK,SAEtCxnB,KAAK42B,SAASiI,MAAM8V,EAAM30C,KAAK8kC,UAC/B9kC,KAAKi1C,WAAa,EAEtB,MAAOjoB,GACHhtB,KAAKi1C,aACLj1C,KAAKk0C,UAAUlnB,EAAOunB,EAAKv0C,KAAKi1C,iB,GAzBVD,GA6BlCn3C,EAAQm8B,oBAAsBA,E,IACxBC,E,YACF,WAAY/qB,GAAS,iBACjB,2BACKA,QAAUA,EACf,EAAK+lC,WAAa,EAClB,EAAKnrB,MAAQ,GACb,EAAKorB,SAAU,EACf,IAAIJ,EAAe,EAAK5lC,QANP,OAOjB4lC,EAAa/pB,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MACnD8nB,EAAa/pB,GAAG,SAAS,kBAAM,EAAKopB,aARnB,E,+CAUfI,GACGv0C,KAAKk1C,SAAiC,IAAtBl1C,KAAK8pB,MAAMre,OAK5BzL,KAAK8pB,MAAM/e,KAAKwpC,GAHhBv0C,KAAKm1C,eAAeZ,K,qCAMbA,GAAK,WAChB,IACQv0C,KAAKkP,QAAQkmC,OACbp1C,KAAKk1C,SAAU,EACfl1C,KAAKkP,QAAQkmC,KAAKb,OAAKj0C,OAAWA,GAAW,SAAC0sB,GAC1C,EAAKkoB,SAAU,EACXloB,GACA,EAAKioB,aACL,EAAKf,UAAUlnB,EAAOunB,EAAK,EAAKU,aAGhC,EAAKA,WAAa,EAElB,EAAKnrB,MAAMre,OAAS,GACpB,EAAK0pC,eAAe,EAAKrrB,MAAM0I,aAK/C,MAAOxF,GACHhtB,KAAKi1C,aACLj1C,KAAKk0C,UAAUlnB,EAAOunB,EAAKv0C,KAAKi1C,iB,GAzCbD,GA6C/Bn3C,EAAQo8B,iBAAmBA,E,IACrBC,E,YACF,WAAY6a,GAA2B,MAAnBjQ,EAAmB,uDAAR,OAAQ,kBACnC,2BACKiQ,OAASA,EACd,EAAKjrB,MAAQ,GACb,EAAKorB,SAAU,EACf,EAAKpQ,SAAWA,EAChB,EAAKmQ,WAAa,EAClB,EAAKF,OAAOhqB,GAAG,SAAS,SAACiC,GAAD,OAAW,EAAKknB,UAAUlnB,MAClD,EAAK+nB,OAAOhqB,GAAG,SAAS,kBAAM,EAAKopB,eARA,E,mDAWnC,4CACAn0C,KAAK+0C,OAAOjjB,Y,4BAEVyiB,GACGv0C,KAAKk1C,SAAiC,IAAtBl1C,KAAK8pB,MAAMre,OAK5BzL,KAAK8pB,MAAM/e,KAAKwpC,GAHhBv0C,KAAKm1C,eAAeZ,K,qCAMbA,GAAK,WACZI,EAAOrZ,KAAK0D,UAAUuV,GAEtBH,EAAU,CAjJF,mBAgJQlQ,EAAOS,WAAWgQ,EAAM30C,KAAK8kC,UAEhBx5B,WAjJ9B,eAoJH,IAEItL,KAAKk1C,SAAU,EACfl1C,KAAK+0C,OAAOlW,MAAMuV,EAAQ5sB,KAAK,IAAK,SAAS,SAACwF,GACtCA,GACA,EAAKqoB,YAAYroB,EAAOunB,GAE5B,IAEI,EAAKQ,OAAOlW,MAAM8V,EAAM,EAAK7P,UAAU,SAAC9X,GACpC,EAAKkoB,SAAU,EACXloB,EACA,EAAKqoB,YAAYroB,EAAOunB,GAGxB,EAAKU,WAAa,EAElB,EAAKnrB,MAAMre,OAAS,GACpB,EAAK0pC,eAAe,EAAKrrB,MAAM0I,YAI3C,MAAOxF,GACH,EAAKqoB,YAAYroB,EAAOunB,OAIpC,MAAOvnB,GACHhtB,KAAKq1C,YAAYroB,EAAOunB,M,kCAGpBvnB,EAAOunB,GACfv0C,KAAKi1C,aACLj1C,KAAKk0C,UAAUlnB,EAAOunB,EAAKv0C,KAAKi1C,gB,GAhEND,GAmElCn3C,EAAQq8B,oBAAsBA,I,yCCjM9B,IAAIohB,EAAgB,EAAQ,KAE5B,SAASC,EAAKnyC,EAAQ1J,EAAU87C,GAiB9B,MAhBuB,oBAAZnK,SAA2BA,QAAQzyC,IAC5Cd,EAAOD,QAAU09C,EAAOlK,QAAQzyC,IAEhCd,EAAOD,QAAU09C,EAAO,SAAcnyC,EAAQ1J,EAAU87C,GACtD,IAAI91C,EAAO41C,EAAclyC,EAAQ1J,GACjC,GAAKgG,EAAL,CACA,IAAI+1C,EAAOh9C,OAAO8yC,yBAAyB7rC,EAAMhG,GAEjD,OAAI+7C,EAAK78C,IACA68C,EAAK78C,IAAIV,KAAKs9C,GAGhBC,EAAKz8C,QAITu8C,EAAKnyC,EAAQ1J,EAAU87C,GAAYpyC,GAG5CtL,EAAOD,QAAU09C,G,6BCtBjB,uyEASWv5C,EAwBAoB,EA2BA4E,EAwBA0zC,EA4BAhoC,EA8BAE,EAyBAC,EA2BAG,EAmBAD,EAsCAlM,EAwBAN,EAwBAU,EAoBAE,EAyCArH,EA8BA4F,EAwCAi1C,EAiBAC,EAqBAC,EAsBAC,EAqBAvvC,EA/fX,kBAUA,SAAWvK,GASPA,EAAS3C,OAHT,SAAgB0B,EAAMkB,GAClB,MAAO,CAAElB,KAAMA,EAAMkB,UAAWA,IAUpCD,EAAS+N,GAJT,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGikB,cAAcjwC,IAAcgsB,GAAGlzB,OAAOkH,EAAU/K,OAAS+2B,GAAGlzB,OAAOkH,EAAU7J,YAf/F,CAkBGD,IAAaA,EAAW,KAM3B,SAAWoB,GAYPA,EAAM/D,OAXN,SAAgB28C,EAAKC,EAAKC,EAAOC,GAC7B,GAAIrkB,GAAGlzB,OAAOo3C,IAAQlkB,GAAGlzB,OAAOq3C,IAAQnkB,GAAGlzB,OAAOs3C,IAAUpkB,GAAGlzB,OAAOu3C,GAClE,MAAO,CAAEr5C,MAAOd,EAAS3C,OAAO28C,EAAKC,GAAMl5C,IAAKf,EAAS3C,OAAO68C,EAAOC,IAEtE,GAAIn6C,EAAS+N,GAAGisC,IAAQh6C,EAAS+N,GAAGksC,GACrC,MAAO,CAAEn5C,MAAOk5C,EAAKj5C,IAAKk5C,GAG1B,MAAM,IAAIh7C,MAAM,8CAAgD+6C,EAAM,KAAOC,EAAM,KAAOC,EAAQ,KAAOC,EAAO,MAWxH/4C,EAAM2M,GAJN,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGikB,cAAcjwC,IAAc9J,EAAS+N,GAAGjE,EAAUhJ,QAAUd,EAAS+N,GAAGjE,EAAU/I,MAlBpG,CAqBGK,IAAUA,EAAQ,KAMrB,SAAW4E,GASPA,EAAS3I,OAHT,SAAgBwG,EAAKO,GACjB,MAAO,CAAEP,IAAKA,EAAKO,MAAOA,IAU9B4B,EAAS+H,GAJT,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAc1I,EAAM2M,GAAGjE,EAAU1F,SAAW0xB,GAAGpzB,OAAOoH,EAAUjG,MAAQiyB,GAAGx3B,UAAUwL,EAAUjG,OAfzH,CAkBGmC,IAAaA,EAAW,KAM3B,SAAW0zC,GAWPA,EAAar8C,OAHb,SAAgBuhB,EAAWC,EAAaG,EAAsBD,GAC1D,MAAO,CAAEH,UAAWA,EAAWC,YAAaA,EAAaG,qBAAsBA,EAAsBD,qBAAsBA,IAY/H26B,EAAa3rC,GANb,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAc1I,EAAM2M,GAAGjE,EAAU+U,cAAgBiX,GAAGpzB,OAAOoH,EAAU8U,aAC/Exd,EAAM2M,GAAGjE,EAAUkV,uBAAyB8W,GAAGx3B,UAAUwL,EAAUkV,yBACnE5d,EAAM2M,GAAGjE,EAAUiV,uBAAyB+W,GAAGx3B,UAAUwL,EAAUiV,wBAnBnF,CAsBG26B,IAAiBA,EAAe,KAMnC,SAAWhoC,GAYPA,EAAMrU,OARN,SAAgBiU,EAAKC,EAAOC,EAAMC,GAC9B,MAAO,CACHH,IAAKA,EACLC,MAAOA,EACPC,KAAMA,EACNC,MAAOA,IAcfC,EAAM3D,GAPN,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGlzB,OAAOkH,EAAUwH,MACpBwkB,GAAGlzB,OAAOkH,EAAUyH,QACpBukB,GAAGlzB,OAAOkH,EAAU0H,OACpBskB,GAAGlzB,OAAOkH,EAAU2H,QArBnC,CAwBGC,IAAUA,EAAQ,KAMrB,SAAWE,GAUPA,EAAiBvU,OANjB,SAAgB+G,EAAOuN,GACnB,MAAO,CACHvN,MAAOA,EACPuN,MAAOA,IAWfC,EAAiB7D,GAJjB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAOoE,EAAM2M,GAAGjE,EAAU1F,QAAUsN,EAAM3D,GAAGjE,EAAU6H,QAhB/D,CAmBGC,IAAqBA,EAAmB,KAM3C,SAAWC,GAWPA,EAAkBxU,OAPlB,SAAgB+H,EAAO8E,EAAUsX,GAC7B,MAAO,CACHpc,MAAOA,EACP8E,SAAUA,EACVsX,oBAAqBA,IAa7B3P,EAAkB9D,GANlB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGpzB,OAAOoH,EAAU1E,SACnB0wB,GAAGx3B,UAAUwL,EAAUI,WAAaxF,EAASqJ,GAAGjE,MAChDgsB,GAAGx3B,UAAUwL,EAAU0X,sBAAwBsU,GAAGukB,WAAWvwC,EAAU0X,oBAAqB9c,EAASqJ,MAnBrH,CAsBG8D,IAAsBA,EAAoB,KAK7C,SAAWG,GAIPA,EAAgB,QAAc,UAI9BA,EAAgB,QAAc,UAI9BA,EAAgB,OAAa,SAZjC,CAaGA,IAAqBA,EAAmB,KAM3C,SAAWD,GAoBPA,EAAa1U,OAhBb,SAAgBi9C,EAAW15C,EAAS25C,EAAgBC,EAAcn1C,GAC9D,IAAIhF,EAAS,CACTi6C,UAAWA,EACX15C,QAASA,GAWb,OATIk1B,GAAGskB,QAAQG,KACXl6C,EAAOk6C,eAAiBA,GAExBzkB,GAAGskB,QAAQI,KACXn6C,EAAOm6C,aAAeA,GAEtB1kB,GAAGskB,QAAQ/0C,KACXhF,EAAOgF,KAAOA,GAEXhF,GAaX0R,EAAahE,GAPb,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGlzB,OAAOkH,EAAUwwC,YAAcxkB,GAAGlzB,OAAOkH,EAAUwwC,aACrDxkB,GAAGx3B,UAAUwL,EAAUywC,iBAAmBzkB,GAAGlzB,OAAOkH,EAAUywC,mBAC9DzkB,GAAGx3B,UAAUwL,EAAU0wC,eAAiB1kB,GAAGlzB,OAAOkH,EAAU0wC,iBAC5D1kB,GAAGx3B,UAAUwL,EAAUzE,OAASywB,GAAGpzB,OAAOoH,EAAUzE,QA7BpE,CAgCG0M,IAAiBA,EAAe,KAMnC,SAAWlM,GAUPA,EAA6BxI,OAN7B,SAAgBsI,EAAUC,GACtB,MAAO,CACHD,SAAUA,EACVC,QAASA,IAWjBC,EAA6BkI,GAJ7B,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAc9D,EAAS+H,GAAGjE,EAAUnE,WAAamwB,GAAGpzB,OAAOoH,EAAUlE,UAhB/F,CAmBGC,IAAiCA,EAA+B,KAKnE,SAAWN,GAIPA,EAAmBtG,MAAQ,EAI3BsG,EAAmBuT,QAAU,EAI7BvT,EAAmBwT,YAAc,EAIjCxT,EAAmB0T,KAAO,EAhB9B,CAiBG1T,IAAuBA,EAAqB,KAO/C,SAAWU,GAOPA,EAAcwT,YAAc,EAM5BxT,EAAcw0C,WAAa,EAb/B,CAcGx0C,IAAkBA,EAAgB,KAMrC,SAAWE,GAoBPA,EAAW9I,OAhBX,SAAgB+G,EAAOwB,EAASM,EAAU8F,EAAMoD,EAAQgK,GACpD,IAAI/Y,EAAS,CAAE+D,MAAOA,EAAOwB,QAASA,GAatC,OAZIkwB,GAAGskB,QAAQl0C,KACX7F,EAAO6F,SAAWA,GAElB4vB,GAAGskB,QAAQpuC,KACX3L,EAAO2L,KAAOA,GAEd8pB,GAAGskB,QAAQhrC,KACX/O,EAAO+O,OAASA,GAEhB0mB,GAAGskB,QAAQhhC,KACX/Y,EAAO+Y,mBAAqBA,GAEzB/Y,GAgBX8F,EAAW4H,GAVX,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IACX1I,EAAM2M,GAAGjE,EAAU1F,QACnB0xB,GAAGpzB,OAAOoH,EAAUlE,WACnBkwB,GAAGlzB,OAAOkH,EAAU5D,WAAa4vB,GAAGx3B,UAAUwL,EAAU5D,aACxD4vB,GAAGlzB,OAAOkH,EAAUkC,OAAS8pB,GAAGpzB,OAAOoH,EAAUkC,OAAS8pB,GAAGx3B,UAAUwL,EAAUkC,SACjF8pB,GAAGpzB,OAAOoH,EAAUsF,SAAW0mB,GAAGx3B,UAAUwL,EAAUsF,WACtD0mB,GAAGx3B,UAAUwL,EAAUsP,qBAAuB0c,GAAGukB,WAAWvwC,EAAUsP,mBAAoBvT,EAA6BkI,MAhCvI,CAmCG5H,IAAeA,EAAa,KAM/B,SAAWrH,GAePA,EAAQzB,OAXR,SAAgBqL,EAAOnB,GAEnB,IADA,IAAIgI,EAAO,GACFmrC,EAAK,EAAGA,EAAKptC,UAAU7D,OAAQixC,IACpCnrC,EAAKmrC,EAAK,GAAKptC,UAAUotC,GAE7B,IAAIr6C,EAAS,CAAEqI,MAAOA,EAAOnB,QAASA,GAItC,OAHIuuB,GAAGskB,QAAQ7qC,IAASA,EAAK9F,OAAS,IAClCpJ,EAAOiN,UAAYiC,GAEhBlP,GAUXvB,EAAQiP,GAJR,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAcgsB,GAAGpzB,OAAOoH,EAAUpB,QAAUotB,GAAGpzB,OAAOoH,EAAUvC,UArB1F,CAwBGzI,IAAYA,EAAU,KAMzB,SAAW4F,GASPA,EAASlC,QAHT,SAAiB4B,EAAOC,GACpB,MAAO,CAAED,MAAOA,EAAOC,QAASA,IAWpCK,EAASC,OAHT,SAAgBC,EAAUP,GACtB,MAAO,CAAED,MAAO,CAAEtD,MAAO8D,EAAU7D,IAAK6D,GAAYP,QAASA,IAUjEK,EAASi2C,IAHT,SAAav2C,GACT,MAAO,CAAEA,MAAOA,EAAOC,QAAS,KASpCK,EAASqJ,GANT,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGikB,cAAcjwC,IACjBgsB,GAAGpzB,OAAOoH,EAAUzF,UACpBjD,EAAM2M,GAAGjE,EAAU1F,QA/BlC,CAkCGM,IAAaA,EAAW,KAM3B,SAAWi1C,GAOPA,EAAiBt8C,OAHjB,SAAgBu9C,EAAcpxC,GAC1B,MAAO,CAAEoxC,aAAcA,EAAcpxC,MAAOA,IAShDmwC,EAAiB5rC,GANjB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IACX+wC,EAAgC9sC,GAAGjE,EAAU8wC,eAC7C9zC,MAAMC,QAAQ+C,EAAUN,QAZvC,CAeGmwC,IAAqBA,EAAmB,KAE3C,SAAWC,GAWPA,EAAWv8C,OAVX,SAAgBwG,EAAKiF,GACjB,IAAIzI,EAAS,CACTgF,KAAM,SACNxB,IAAKA,GAKT,YAHgB,IAAZiF,QAA6C,IAAtBA,EAAQomC,gBAAmD,IAA3BpmC,EAAQgyC,iBAC/Dz6C,EAAOyI,QAAUA,GAEdzI,GASXu5C,EAAW7rC,GANX,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAgC,WAAnBA,EAAUzE,MAAqBywB,GAAGpzB,OAAOoH,EAAUjG,YAC5C,IAAtBiG,EAAUhB,eAC2B,IAAhCgB,EAAUhB,QAAQomC,WAAwBpZ,GAAE,QAAShsB,EAAUhB,QAAQomC,mBAAqD,IAArCplC,EAAUhB,QAAQgyC,gBAA6BhlB,GAAE,QAAShsB,EAAUhB,QAAQgyC,mBAhBrL,CAmBGlB,IAAeA,EAAa,KAE/B,SAAWC,GAYPA,EAAWx8C,OAXX,SAAgBwiB,EAAQC,EAAQhX,GAC5B,IAAIzI,EAAS,CACTgF,KAAM,SACNwa,OAAQA,EACRC,OAAQA,GAKZ,YAHgB,IAAZhX,QAA6C,IAAtBA,EAAQomC,gBAAmD,IAA3BpmC,EAAQgyC,iBAC/Dz6C,EAAOyI,QAAUA,GAEdzI,GASXw5C,EAAW9rC,GANX,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAgC,WAAnBA,EAAUzE,MAAqBywB,GAAGpzB,OAAOoH,EAAU+V,SAAWiW,GAAGpzB,OAAOoH,EAAUgW,eAC3E,IAAtBhW,EAAUhB,eAC2B,IAAhCgB,EAAUhB,QAAQomC,WAAwBpZ,GAAE,QAAShsB,EAAUhB,QAAQomC,mBAAqD,IAArCplC,EAAUhB,QAAQgyC,gBAA6BhlB,GAAE,QAAShsB,EAAUhB,QAAQgyC,mBAjBrL,CAoBGjB,IAAeA,EAAa,KAE/B,SAAWC,GAWPA,EAAWz8C,OAVX,SAAgBwG,EAAKiF,GACjB,IAAIzI,EAAS,CACTgF,KAAM,SACNxB,IAAKA,GAKT,YAHgB,IAAZiF,QAA6C,IAAtBA,EAAQiyC,gBAAsD,IAA9BjyC,EAAQkyC,oBAC/D36C,EAAOyI,QAAUA,GAEdzI,GASXy5C,EAAW/rC,GANX,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAgC,WAAnBA,EAAUzE,MAAqBywB,GAAGpzB,OAAOoH,EAAUjG,YAC5C,IAAtBiG,EAAUhB,eAC2B,IAAhCgB,EAAUhB,QAAQiyC,WAAwBjlB,GAAE,QAAShsB,EAAUhB,QAAQiyC,mBAAwD,IAAxCjxC,EAAUhB,QAAQkyC,mBAAgCllB,GAAE,QAAShsB,EAAUhB,QAAQkyC,sBAhBxL,CAmBGlB,IAAeA,EAAa,KAE/B,SAAWvvC,GAcPA,EAAcwD,GAbd,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,SACoB,IAAtBA,EAAUmxC,cAAoD,IAA9BnxC,EAAUoxC,wBACZ,IAA9BpxC,EAAUoxC,iBAA8BpxC,EAAUoxC,gBAAgBlL,OAAM,SAAUvd,GAC/E,OAAIqD,GAAGpzB,OAAO+vB,EAAOptB,MACVu0C,EAAW7rC,GAAG0kB,IAAWonB,EAAW9rC,GAAG0kB,IAAWqnB,EAAW/rC,GAAG0kB,GAGhEknB,EAAiB5rC,GAAG0kB,QAV/C,CAeGloB,IAAkBA,EAAgB,KACrC,IA+HW4wC,EAuBAN,EAwBAO,EA6BAC,EAqBAC,EAcAn2C,EAgCAo2C,EAwBAC,EAWAl2C,EAeAI,EAaA+1C,EAoBAx0C,EAiBAV,EAiBAE,EAwBAS,EAmBAC,EAkBAgE,EAiCAuwC,EAOAzwC,EAwBAM,EA2CA3D,EA0EA+zC,EAsBAhzC,EAgCAnB,EA0BAo0C,EAsBAt0C,EAsBAu0C,EAjvBPC,EAAoC,WACpC,SAASA,EAAmBtyC,GACxBxL,KAAKwL,MAAQA,EAoBjB,OAlBAsyC,EAAmBn+C,UAAUgH,OAAS,SAAUC,EAAUP,GACtDrG,KAAKwL,MAAMT,KAAKrE,EAASC,OAAOC,EAAUP,KAE9Cy3C,EAAmBn+C,UAAU6E,QAAU,SAAU4B,EAAOC,GACpDrG,KAAKwL,MAAMT,KAAKrE,EAASlC,QAAQ4B,EAAOC,KAE5Cy3C,EAAmBn+C,UAAnB,OAAsC,SAAUyG,GAC5CpG,KAAKwL,MAAMT,KAAKrE,EAASi2C,IAAIv2C,KAEjC03C,EAAmBn+C,UAAUysB,IAAM,SAAUjhB,GACzCnL,KAAKwL,MAAMT,KAAKI,IAEpB2yC,EAAmBn+C,UAAU8uB,IAAM,WAC/B,OAAOzuB,KAAKwL,OAEhBsyC,EAAmBn+C,UAAUo+C,MAAQ,WACjC/9C,KAAKwL,MAAMqb,OAAO,EAAG7mB,KAAKwL,MAAMC,SAE7BqyC,EAtB6B,GA2BpCE,EAAiC,WACjC,SAASA,EAAgBC,GACrB,IAAIvoB,EAAQ11B,KACZA,KAAKk+C,iBAAmBz/C,OAAOY,OAAO,MAClC4+C,IACAj+C,KAAKm+C,eAAiBF,EAClBA,EAAcf,gBACde,EAAcf,gBAAgB/wC,SAAQ,SAAUsoB,GAC5C,GAAIknB,EAAiB5rC,GAAG0kB,GAAS,CAC7B,IAAI2pB,EAAiB,IAAIN,EAAmBrpB,EAAOjpB,OACnDkqB,EAAMwoB,iBAAiBzpB,EAAOmoB,aAAa/2C,KAAOu4C,MAIrDH,EAAchB,SACnBx+C,OAAOskC,KAAKkb,EAAchB,SAAS9wC,SAAQ,SAAU7M,GACjD,IAAI8+C,EAAiB,IAAIN,EAAmBG,EAAchB,QAAQ39C,IAClEo2B,EAAMwoB,iBAAiB5+C,GAAO8+C,MA4E9C,OAvEA3/C,OAAOC,eAAes/C,EAAgBr+C,UAAW,OAAQ,CAKrDf,IAAK,WACD,OAAOoB,KAAKm+C,gBAEhBx/C,YAAY,EACZuzB,cAAc,IAElB8rB,EAAgBr+C,UAAU0+C,kBAAoB,SAAU/+C,GACpD,GAAIu9C,EAAgC9sC,GAAGzQ,GAAM,CAMzC,GALKU,KAAKm+C,iBACNn+C,KAAKm+C,eAAiB,CAClBjB,gBAAiB,MAGpBl9C,KAAKm+C,eAAejB,gBACrB,MAAM,IAAIj8C,MAAM,0DAEpB,IAAI27C,EAAet9C,EAEnB,KADI+C,EAASrC,KAAKk+C,iBAAiBtB,EAAa/2C,MACnC,CACT,IACIy4C,EAAmB,CACnB1B,aAAcA,EACdpxC,MAHAA,EAAQ,IAKZxL,KAAKm+C,eAAejB,gBAAgBnyC,KAAKuzC,GACzCj8C,EAAS,IAAIy7C,EAAmBtyC,GAChCxL,KAAKk+C,iBAAiBtB,EAAa/2C,KAAOxD,EAE9C,OAAOA,EAQP,GALKrC,KAAKm+C,iBACNn+C,KAAKm+C,eAAiB,CAClBlB,QAASx+C,OAAOY,OAAO,SAG1BW,KAAKm+C,eAAelB,QACrB,MAAM,IAAIh8C,MAAM,kEAEpB,IAAIoB,EACJ,KADIA,EAASrC,KAAKk+C,iBAAiB5+C,IACtB,CACT,IAAIkM,EAAQ,GACZxL,KAAKm+C,eAAelB,QAAQ39C,GAAOkM,EACnCnJ,EAAS,IAAIy7C,EAAmBtyC,GAChCxL,KAAKk+C,iBAAiB5+C,GAAO+C,EAEjC,OAAOA,GAGf27C,EAAgBr+C,UAAUsL,WAAa,SAAUpF,EAAKiF,GAClD9K,KAAKu+C,uBACLv+C,KAAKm+C,eAAejB,gBAAgBnyC,KAAK6wC,EAAWv8C,OAAOwG,EAAKiF,KAEpEkzC,EAAgBr+C,UAAUkL,WAAa,SAAUgX,EAAQC,EAAQhX,GAC7D9K,KAAKu+C,uBACLv+C,KAAKm+C,eAAejB,gBAAgBnyC,KAAK8wC,EAAWx8C,OAAOwiB,EAAQC,EAAQhX,KAE/EkzC,EAAgBr+C,UAAUuL,WAAa,SAAUrF,EAAKiF,GAClD9K,KAAKu+C,uBACLv+C,KAAKm+C,eAAejB,gBAAgBnyC,KAAK+wC,EAAWz8C,OAAOwG,EAAKiF,KAEpEkzC,EAAgBr+C,UAAU4+C,qBAAuB,WAC7C,IAAKv+C,KAAKm+C,iBAAmBn+C,KAAKm+C,eAAejB,gBAC7C,MAAM,IAAIj8C,MAAM,2DAGjB+8C,EA7F0B,IAqGrC,SAAWb,GAQPA,EAAuB99C,OAHvB,SAAgBwG,GACZ,MAAO,CAAEA,IAAKA,IAUlBs3C,EAAuBptC,GAJvB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAcgsB,GAAGpzB,OAAOoH,EAAUjG,MAd5D,CAiBGs3C,IAA2BA,EAAyB,KAMvD,SAAWN,GASPA,EAAgCx9C,OAHhC,SAAgBwG,EAAK4O,GACjB,MAAO,CAAE5O,IAAKA,EAAK4O,QAASA,IAUhCooC,EAAgC9sC,GAJhC,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAcgsB,GAAGpzB,OAAOoH,EAAUjG,OAA+B,OAAtBiG,EAAU2I,SAAoBqjB,GAAGlzB,OAAOkH,EAAU2I,WAfvH,CAkBGooC,IAAoCA,EAAkC,KAMzE,SAAWO,GAWPA,EAAiB/9C,OAHjB,SAAgBwG,EAAK24C,EAAY/pC,EAASiG,GACtC,MAAO,CAAE7U,IAAKA,EAAK24C,WAAYA,EAAY/pC,QAASA,EAASiG,KAAMA,IAUvE0iC,EAAiBrtC,GAJjB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAcgsB,GAAGpzB,OAAOoH,EAAUjG,MAAQiyB,GAAGpzB,OAAOoH,EAAU0yC,aAAe1mB,GAAGlzB,OAAOkH,EAAU2I,UAAYqjB,GAAGpzB,OAAOoH,EAAU4O,OAjB3J,CAoBG0iC,IAAqBA,EAAmB,KAS3C,SAAWC,GAIPA,EAAWoB,UAAY,YAIvBpB,EAAWqB,SAAW,WAR1B,CASGrB,IAAeA,EAAa,KAC/B,SAAWA,GAQPA,EAAWttC,GAJX,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,IAAcuxC,EAAWoB,WAAa3yC,IAAcuxC,EAAWqB,UAN9E,CASGrB,IAAeA,EAAa,KAE/B,SAAWC,GAQPA,EAAcvtC,GAJd,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGikB,cAAc/8C,IAAUq+C,EAAWttC,GAAGjE,EAAUzE,OAASywB,GAAGpzB,OAAOoH,EAAU9M,QAN/F,CASGs+C,IAAkBA,EAAgB,KAKrC,SAAWn2C,GACPA,EAAmBwU,KAAO,EAC1BxU,EAAmBgY,OAAS,EAC5BhY,EAAmBiY,SAAW,EAC9BjY,EAAmBkY,YAAc,EACjClY,EAAmBmY,MAAQ,EAC3BnY,EAAmBoY,SAAW,EAC9BpY,EAAmBqY,MAAQ,EAC3BrY,EAAmBsY,UAAY,EAC/BtY,EAAmBwY,OAAS,EAC5BxY,EAAmByY,SAAW,GAC9BzY,EAAmB0Y,KAAO,GAC1B1Y,EAAmB2Y,MAAQ,GAC3B3Y,EAAmB6Y,KAAO,GAC1B7Y,EAAmB+Y,QAAU,GAC7B/Y,EAAmBgZ,QAAU,GAC7BhZ,EAAmBuM,MAAQ,GAC3BvM,EAAmBhC,KAAO,GAC1BgC,EAAmBiZ,UAAY,GAC/BjZ,EAAmB9B,OAAS,GAC5B8B,EAAmB8Y,WAAa,GAChC9Y,EAAmB4Y,SAAW,GAC9B5Y,EAAmBuY,OAAS,GAC5BvY,EAAmBkZ,MAAQ,GAC3BlZ,EAAmBmZ,SAAW,GAC9BnZ,EAAmBoZ,cAAgB,GAzBvC,CA0BGpZ,IAAuBA,EAAqB,KAM/C,SAAWo2C,GAIPA,EAAiBkB,UAAY,EAW7BlB,EAAiBp9B,QAAU,EAf/B,CAgBGo9B,IAAqBA,EAAmB,KAQ3C,SAAWC,GAIPA,EAAkBf,WAAa,EAJnC,CAKGe,IAAsBA,EAAoB,KAM7C,SAAWl2C,GAQPA,EAAejI,OAHf,SAAgB+H,GACZ,MAAO,CAAEA,MAAOA,IANxB,CASGE,IAAmBA,EAAiB,KAMvC,SAAWI,GAUPA,EAAerI,OAHf,SAAgBmI,EAAOC,GACnB,MAAO,CAAED,MAAOA,GAAgB,GAAIC,eAAgBA,IAR5D,CAWGC,IAAmBA,EAAiB,KAEvC,SAAW+1C,GASPA,EAAakB,cAHb,SAAuBC,GACnB,OAAOA,EAAUp6C,QAAQ,wBAAyB,SAUtDi5C,EAAa1tC,GAJb,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGpzB,OAAOoH,IAAegsB,GAAGikB,cAAcjwC,IAAcgsB,GAAGpzB,OAAOoH,EAAUqO,WAAa2d,GAAGpzB,OAAOoH,EAAU9M,QAf5H,CAkBGy+C,IAAiBA,EAAe,KAEnC,SAAWx0C,GAUPA,EAAM8G,GANN,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,QAAS8M,GAAagsB,GAAGikB,cAAcjwC,KAAewxC,EAAcvtC,GAAGjE,EAAUjD,WAC7E40C,EAAa1tC,GAAGjE,EAAUjD,WAC1BivB,GAAGukB,WAAWvwC,EAAUjD,SAAU40C,EAAa1tC,YAAyB,IAAhB/Q,EAAMoH,OAAoBhD,EAAM2M,GAAG/Q,EAAMoH,SAR7G,CAWG6C,IAAUA,EAAQ,KAMrB,SAAWV,GAUPA,EAAqBlJ,OAHrB,SAAgB+H,EAAOkB,GACnB,OAAOA,EAAgB,CAAElB,MAAOA,EAAOkB,cAAeA,GAAkB,CAAElB,MAAOA,IARzF,CAWGmB,IAAyBA,EAAuB,KAMnD,SAAWE,GAkBPA,EAAqBpJ,OAjBrB,SAAgB+H,EAAOkB,GAEnB,IADA,IAAIE,EAAa,GACRk0C,EAAK,EAAGA,EAAKptC,UAAU7D,OAAQixC,IACpCl0C,EAAWk0C,EAAK,GAAKptC,UAAUotC,GAEnC,IAAIr6C,EAAS,CAAE+E,MAAOA,GAUtB,OATI0wB,GAAGskB,QAAQ9zC,KACXjG,EAAOiG,cAAgBA,GAEvBwvB,GAAGskB,QAAQ5zC,GACXnG,EAAOmG,WAAaA,EAGpBnG,EAAOmG,WAAa,GAEjBnG,GAhBf,CAmBGoG,IAAyBA,EAAuB,KAKnD,SAAWS,GAIPA,EAAsByS,KAAO,EAI7BzS,EAAsB0S,KAAO,EAI7B1S,EAAsB2S,MAAQ,EAZlC,CAaG3S,IAA0BA,EAAwB,KAMrD,SAAWC,GAYPA,EAAkB9J,OAPlB,SAAgB+G,EAAOiB,GACnB,IAAIhF,EAAS,CAAE+D,MAAOA,GAItB,OAHI0xB,GAAGlzB,OAAOyC,KACVhF,EAAOgF,KAAOA,GAEXhF,GAVf,CAaG8G,IAAsBA,EAAoB,KAK7C,SAAWgE,GACPA,EAAWhI,KAAO,EAClBgI,EAAWwS,OAAS,EACpBxS,EAAW6U,UAAY,EACvB7U,EAAW8U,QAAU,EACrB9U,EAAWqS,MAAQ,EACnBrS,EAAWgS,OAAS,EACpBhS,EAAWyS,SAAW,EACtBzS,EAAWmS,MAAQ,EACnBnS,EAAWkS,YAAc,EACzBlS,EAAW6S,KAAO,GAClB7S,EAAWsS,UAAY,GACvBtS,EAAWiS,SAAW,GACtBjS,EAAWoS,SAAW,GACtBpS,EAAW4S,SAAW,GACtB5S,EAAWyN,OAAS,GACpBzN,EAAW+U,OAAS,GACpB/U,EAAWgV,QAAU,GACrBhV,EAAWrE,MAAQ,GACnBqE,EAAW1O,OAAS,GACpB0O,EAAWiV,IAAM,GACjBjV,EAAWkV,KAAO,GAClBlV,EAAW8S,WAAa,GACxB9S,EAAWuS,OAAS,GACpBvS,EAAWkT,MAAQ,GACnBlT,EAAWmT,SAAW,GACtBnT,EAAWoT,cAAgB,GA1B/B,CA2BGpT,IAAeA,EAAa,KAM/B,SAAWuwC,GAIPA,EAAUjB,WAAa,EAJ3B,CAKGiB,IAAcA,EAAY,KAE7B,SAAWzwC,GAqBPA,EAAkB5N,OAXlB,SAAgBf,EAAM+I,EAAMjB,EAAOP,EAAKmH,GACpC,IAAI3K,EAAS,CACT/D,KAAMA,EACN+I,KAAMA,EACNM,SAAU,CAAE9B,IAAKA,EAAKO,MAAOA,IAKjC,OAHI4G,IACA3K,EAAO2K,cAAgBA,GAEpB3K,GAnBf,CAsBG4K,IAAsBA,EAAoB,KAE7C,SAAWM,GAwBPA,EAAelO,OAbf,SAAgBf,EAAM8O,EAAQ/F,EAAMjB,EAAOiH,EAAgBC,GACvD,IAAIjL,EAAS,CACT/D,KAAMA,EACN8O,OAAQA,EACR/F,KAAMA,EACNjB,MAAOA,EACPiH,eAAgBA,GAKpB,YAHiB,IAAbC,IACAjL,EAAOiL,SAAWA,GAEfjL,GAeXkL,EAAewC,GATf,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GACHgsB,GAAGpzB,OAAOoH,EAAUxN,OAASw5B,GAAGlzB,OAAOkH,EAAUzE,OACjDjE,EAAM2M,GAAGjE,EAAU1F,QAAUhD,EAAM2M,GAAGjE,EAAUuB,uBAC1B,IAArBvB,EAAUsB,QAAqB0qB,GAAGpzB,OAAOoH,EAAUsB,gBAC1B,IAAzBtB,EAAU+yC,YAAyB/mB,GAAE,QAAShsB,EAAU+yC,oBACjC,IAAvB/yC,EAAUwB,UAAuBxE,MAAMC,QAAQ+C,EAAUwB,YAnCtE,CAsCGC,IAAmBA,EAAiB,KAKvC,SAAW3D,GAIPA,EAAeI,MAAQ,GAIvBJ,EAAeK,SAAW,WAI1BL,EAAeM,SAAW,WAY1BN,EAAeO,gBAAkB,mBAWjCP,EAAeQ,eAAiB,kBAahCR,EAAeS,gBAAkB,mBAMjCT,EAAeU,OAAS,SAIxBV,EAAeW,sBAAwB,yBASvCX,EAAeY,aAAe,gBAnElC,CAoEGZ,IAAmBA,EAAiB,KAMvC,SAAW+zC,GAWPA,EAAkBt+C,OAPlB,SAAgBy/C,EAAaC,GACzB,IAAI18C,EAAS,CAAEy8C,YAAaA,GAI5B,OAHIC,UACA18C,EAAO08C,KAAOA,GAEX18C,GAUXs7C,EAAkB5tC,GAJlB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAcgsB,GAAGukB,WAAWvwC,EAAUgzC,YAAa32C,EAAW4H,WAA2B,IAAnBjE,EAAUizC,MAAmBjnB,GAAGukB,WAAWvwC,EAAUizC,KAAMjnB,GAAGpzB,UAjB9J,CAoBGi5C,IAAsBA,EAAoB,KAE7C,SAAWhzC,GAcPA,EAAWtL,OAbX,SAAgBqL,EAAOs0C,EAAe33C,GAClC,IAAIhF,EAAS,CAAEqI,MAAOA,GAUtB,OATI5J,EAAQiP,GAAGivC,GACX38C,EAAOkH,QAAUy1C,EAGjB38C,EAAO8I,KAAO6zC,OAEL,IAAT33C,IACAhF,EAAOgF,KAAOA,GAEXhF,GAaXsI,EAAWoF,GAVX,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAagsB,GAAGpzB,OAAOoH,EAAUpB,cACT,IAA1BoB,EAAUgzC,aAA0BhnB,GAAGukB,WAAWvwC,EAAUgzC,YAAa32C,EAAW4H,YACjE,IAAnBjE,EAAUzE,MAAmBywB,GAAGpzB,OAAOoH,EAAUzE,cAC9B,IAAnByE,EAAUX,WAAyC,IAAtBW,EAAUvC,gBACjB,IAAtBuC,EAAUvC,SAAsBzI,EAAQiP,GAAGjE,EAAUvC,iBAC3B,IAA1BuC,EAAUmzC,aAA0BnnB,GAAE,QAAShsB,EAAUmzC,qBACtC,IAAnBnzC,EAAUX,MAAmBoB,EAAcwD,GAAGjE,EAAUX,QAvBrE,CA0BGR,IAAeA,EAAa,KAM/B,SAAWnB,GAWPA,EAASnK,OAPT,SAAgB+G,EAAO0qB,GACnB,IAAIzuB,EAAS,CAAE+D,MAAOA,GAItB,OAHI0xB,GAAGskB,QAAQtrB,KACXzuB,EAAOyuB,KAAOA,GAEXzuB,GAUXmH,EAASuG,GAJT,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAc1I,EAAM2M,GAAGjE,EAAU1F,SAAW0xB,GAAGx3B,UAAUwL,EAAUvC,UAAYzI,EAAQiP,GAAGjE,EAAUvC,WAjB9H,CAoBGC,IAAaA,EAAW,KAM3B,SAAWo0C,GAOPA,EAAkBv+C,OAHlB,SAAgB6/C,EAASC,GACrB,MAAO,CAAED,QAASA,EAASC,aAAcA,IAU7CvB,EAAkB7tC,GAJlB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAcgsB,GAAGlzB,OAAOkH,EAAUozC,UAAYpnB,GAAE,QAAShsB,EAAUqzC,eAb7F,CAgBGvB,IAAsBA,EAAoB,KAM7C,SAAWt0C,GAOPA,EAAajK,OAHb,SAAgB+G,EAAOgD,EAAQ0nB,GAC3B,MAAO,CAAE1qB,MAAOA,EAAOgD,OAAQA,EAAQ0nB,KAAMA,IAUjDxnB,EAAayG,GAJb,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO84B,GAAGskB,QAAQtwC,IAAc1I,EAAM2M,GAAGjE,EAAU1F,SAAW0xB,GAAGx3B,UAAUwL,EAAU1C,SAAW0uB,GAAGpzB,OAAOoH,EAAU1C,UAb5H,CAgBGE,IAAiBA,EAAe,KAMnC,SAAWu0C,GASPA,EAAex+C,OAHf,SAAgB+G,EAAOg5C,GACnB,MAAO,CAAEh5C,MAAOA,EAAOg5C,OAAQA,IAOnCvB,EAAe9tC,GAJf,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,YAAqBsB,IAAdwL,GAA2B1I,EAAM2M,GAAGjE,EAAU1F,cAAgC9F,IAArBwL,EAAUszC,QAAwBvB,EAAe9tC,GAAGjE,EAAUszC,UAZtI,CAeGvB,IAAmBA,EAAiB,KAChC,IAIIwB,GAJA7H,GAAM,CAAC,KAAM,OAAQ,OAKhC,SAAW6H,GAUPA,EAAahgD,OAHb,SAAgBwG,EAAK24C,EAAY/pC,EAAS6qC,GACtC,OAAO,IAAIC,GAAiB15C,EAAK24C,EAAY/pC,EAAS6qC,IAW1DD,EAAatvC,GALb,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,SAAO84B,GAAGskB,QAAQtwC,IAAcgsB,GAAGpzB,OAAOoH,EAAUjG,OAASiyB,GAAGx3B,UAAUwL,EAAU0yC,aAAe1mB,GAAGpzB,OAAOoH,EAAU0yC,cAAgB1mB,GAAGlzB,OAAOkH,EAAU0zC,YACpJ1nB,GAAG/3B,KAAK+L,EAAU2zC,UAAY3nB,GAAG/3B,KAAK+L,EAAU4zC,aAAe5nB,GAAG/3B,KAAK+L,EAAU6zC,YA2B5FN,EAAaO,WAxBb,SAAoBC,EAAUr0C,GAU1B,IATA,IAAIkP,EAAOmlC,EAASJ,UAChBK,EAuBR,SAASC,EAAUjvB,EAAM0Y,GACrB,GAAI1Y,EAAKrlB,QAAU,EAEf,OAAOqlB,EAEX,IAAIjxB,EAAKixB,EAAKrlB,OAAS,EAAK,EACxBu0C,EAAOlvB,EAAKhJ,MAAM,EAAGjoB,GACrBogD,EAAQnvB,EAAKhJ,MAAMjoB,GACvBkgD,EAAUC,EAAMxW,GAChBuW,EAAUE,EAAOzW,GACjB,IAAI0W,EAAU,EACVC,EAAW,EACXpiD,EAAI,EACR,KAAOmiD,EAAUF,EAAKv0C,QAAU00C,EAAWF,EAAMx0C,QAAQ,CACrD,IAAIzE,EAAMwiC,EAAQwW,EAAKE,GAAUD,EAAME,IAGnCrvB,EAAK/yB,KAFLiJ,GAAO,EAEKg5C,EAAKE,KAILD,EAAME,KAG1B,KAAOD,EAAUF,EAAKv0C,QAClBqlB,EAAK/yB,KAAOiiD,EAAKE,KAErB,KAAOC,EAAWF,EAAMx0C,QACpBqlB,EAAK/yB,KAAOkiD,EAAME,KAEtB,OAAOrvB,EArDWivB,CAAUv0C,GAAO,SAAUi+B,EAAG1W,GAC5C,IAAIqtB,EAAO3W,EAAErjC,MAAMtD,MAAM/B,KAAOgyB,EAAE3sB,MAAMtD,MAAM/B,KAC9C,OAAa,IAATq/C,EACO3W,EAAErjC,MAAMtD,MAAMb,UAAY8wB,EAAE3sB,MAAMtD,MAAMb,UAE5Cm+C,KAEPC,EAAqB3lC,EAAKjP,OACrB1N,EAAI+hD,EAAYr0C,OAAS,EAAG1N,GAAK,EAAGA,IAAK,CAC9C,IAAI6N,EAAIk0C,EAAY/hD,GAChBuiD,EAAcT,EAASF,SAAS/zC,EAAExF,MAAMtD,OACxCy9C,EAAYV,EAASF,SAAS/zC,EAAExF,MAAMrD,KAC1C,KAAIw9C,GAAaF,GAIb,MAAM,IAAIp/C,MAAM,oBAHhByZ,EAAOA,EAAKqa,UAAU,EAAGurB,GAAe10C,EAAEvF,QAAUqU,EAAKqa,UAAUwrB,EAAW7lC,EAAKjP,QAKvF40C,EAAqBC,EAEzB,OAAO5lC,GA1Cf,CA6EG2kC,KAAiBA,GAAe,KACnC,IA2GIvnB,GA3GAynB,GAAkC,WAClC,SAASA,EAAiB15C,EAAK24C,EAAY/pC,EAAS6qC,GAChDt/C,KAAKwgD,KAAO36C,EACZ7F,KAAKygD,YAAcjC,EACnBx+C,KAAK0gD,SAAWjsC,EAChBzU,KAAK2gD,SAAWrB,EAChBt/C,KAAK4gD,kBAAetgD,EAmGxB,OAjGA7B,OAAOC,eAAe6gD,EAAiB5/C,UAAW,MAAO,CACrDf,IAAK,WACD,OAAOoB,KAAKwgD,MAEhB7hD,YAAY,EACZuzB,cAAc,IAElBzzB,OAAOC,eAAe6gD,EAAiB5/C,UAAW,aAAc,CAC5Df,IAAK,WACD,OAAOoB,KAAKygD,aAEhB9hD,YAAY,EACZuzB,cAAc,IAElBzzB,OAAOC,eAAe6gD,EAAiB5/C,UAAW,UAAW,CACzDf,IAAK,WACD,OAAOoB,KAAK0gD,UAEhB/hD,YAAY,EACZuzB,cAAc,IAElBqtB,EAAiB5/C,UAAU8/C,QAAU,SAAUr5C,GAC3C,GAAIA,EAAO,CACP,IAAItD,EAAQ9C,KAAK2/C,SAASv5C,EAAMtD,OAC5BC,EAAM/C,KAAK2/C,SAASv5C,EAAMrD,KAC9B,OAAO/C,KAAK2gD,SAAS5rB,UAAUjyB,EAAOC,GAE1C,OAAO/C,KAAK2gD,UAEhBpB,EAAiB5/C,UAAUiQ,OAAS,SAAUmc,EAAOtX,GACjDzU,KAAK2gD,SAAW50B,EAAMrR,KACtB1a,KAAK0gD,SAAWjsC,EAChBzU,KAAK4gD,kBAAetgD,GAExBi/C,EAAiB5/C,UAAUkhD,eAAiB,WACxC,QAA0BvgD,IAAtBN,KAAK4gD,aAA4B,CAIjC,IAHA,IAAIE,EAAc,GACdpmC,EAAO1a,KAAK2gD,SACZI,GAAc,EACThjD,EAAI,EAAGA,EAAI2c,EAAKjP,OAAQ1N,IAAK,CAC9BgjD,IACAD,EAAY/1C,KAAKhN,GACjBgjD,GAAc,GAElB,IAAIC,EAAKtmC,EAAK4M,OAAOvpB,GACrBgjD,EAAsB,OAAPC,GAAsB,OAAPA,EACnB,OAAPA,GAAejjD,EAAI,EAAI2c,EAAKjP,QAAiC,OAAvBiP,EAAK4M,OAAOvpB,EAAI,IACtDA,IAGJgjD,GAAermC,EAAKjP,OAAS,GAC7Bq1C,EAAY/1C,KAAK2P,EAAKjP,QAE1BzL,KAAK4gD,aAAeE,EAExB,OAAO9gD,KAAK4gD,cAEhBrB,EAAiB5/C,UAAU+/C,WAAa,SAAUzY,GAC9CA,EAAS9e,KAAK8hB,IAAI9hB,KAAKC,IAAI6e,EAAQjnC,KAAK2gD,SAASl1C,QAAS,GAC1D,IAAIq1C,EAAc9gD,KAAK6gD,iBACnBI,EAAM,EAAGC,EAAOJ,EAAYr1C,OAChC,GAAa,IAATy1C,EACA,OAAOl/C,EAAS3C,OAAO,EAAG4nC,GAE9B,KAAOga,EAAMC,GAAM,CACf,IAAIC,EAAMh5B,KAAK0kB,OAAOoU,EAAMC,GAAQ,GAChCJ,EAAYK,GAAOla,EACnBia,EAAOC,EAGPF,EAAME,EAAM,EAKpB,IAAIpgD,EAAOkgD,EAAM,EACjB,OAAOj/C,EAAS3C,OAAO0B,EAAMkmC,EAAS6Z,EAAY//C,KAEtDw+C,EAAiB5/C,UAAUggD,SAAW,SAAU/4C,GAC5C,IAAIk6C,EAAc9gD,KAAK6gD,iBACvB,GAAIj6C,EAAS7F,MAAQ+/C,EAAYr1C,OAC7B,OAAOzL,KAAK2gD,SAASl1C,OAEpB,GAAI7E,EAAS7F,KAAO,EACrB,OAAO,EAEX,IAAIqgD,EAAaN,EAAYl6C,EAAS7F,MAClCsgD,EAAkBz6C,EAAS7F,KAAO,EAAI+/C,EAAYr1C,OAAUq1C,EAAYl6C,EAAS7F,KAAO,GAAKf,KAAK2gD,SAASl1C,OAC/G,OAAO0c,KAAK8hB,IAAI9hB,KAAKC,IAAIg5B,EAAax6C,EAAS3E,UAAWo/C,GAAiBD,IAE/E3iD,OAAOC,eAAe6gD,EAAiB5/C,UAAW,YAAa,CAC3Df,IAAK,WACD,OAAOoB,KAAK6gD,iBAAiBp1C,QAEjC9M,YAAY,EACZuzB,cAAc,IAEXqtB,EAzG2B,IA4GtC,SAAWznB,GACP,IAAIxsB,EAAW7M,OAAOkB,UAAU2L,SAIhCwsB,EAAGskB,QAHH,SAAiBp9C,GACb,YAAwB,IAAVA,GAMlB84B,EAAGx3B,UAHH,SAAmBtB,GACf,YAAwB,IAAVA,GAMlB84B,EAAE,QAHF,SAAiB94B,GACb,OAAiB,IAAVA,IAA4B,IAAVA,GAM7B84B,EAAGpzB,OAHH,SAAgB1F,GACZ,MAAgC,oBAAzBsM,EAASpN,KAAKc,IAMzB84B,EAAGlzB,OAHH,SAAgB5F,GACZ,MAAgC,oBAAzBsM,EAASpN,KAAKc,IAMzB84B,EAAG/3B,KAHH,SAAcf,GACV,MAAgC,sBAAzBsM,EAASpN,KAAKc,IASzB84B,EAAGikB,cANH,SAAuB/8C,GAInB,OAAiB,OAAVA,GAAmC,WAAjB,IAAOA,IAMpC84B,EAAGukB,WAHH,SAAoBr9C,EAAOsiD,GACvB,OAAOx4C,MAAMC,QAAQ/J,IAAUA,EAAMgzC,MAAMsP,IAlCnD,CAqCGxpB,KAAOA,GAAK,M,6BCr/Cfr5B,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAQtD,IAAIuiD,EAAW,EAAQ,MAKvB,SAAWvuC,GAaPA,EAAKC,MAAQ,WAMT,IAJA,IAAI03B,EAAQ,IAAIrG,WAAW,IAEvBkd,EAAM,IAAI14C,MAAM,KAEX/K,EAAI,EAAGA,EAAI,KAAMA,EACtByjD,EAAIzjD,GAAK,IAAMA,EAAEuN,SAAS,IAG9B,IAASvN,EAAI,GAAIA,EAAI,MAAOA,EACxByjD,EAAIzjD,GAAKA,EAAEuN,SAAS,IAGxB,OAAO,WAQH,OANAi2C,EAASE,OAAOC,gBAAgB/W,GAEhCA,EAAM,GAAK,GAAmB,GAAXA,EAAM,GAEzBA,EAAM,GAAK,IAAmB,GAAXA,EAAM,GAEjB6W,EAAI7W,EAAM,IACd6W,EAAI7W,EAAM,IACV6W,EAAI7W,EAAM,IACV6W,EAAI7W,EAAM,IACV,IACA6W,EAAI7W,EAAM,IACV6W,EAAI7W,EAAM,IACV,IACA6W,EAAI7W,EAAM,IACV6W,EAAI7W,EAAM,IACV,IACA6W,EAAI7W,EAAM,IACV6W,EAAI7W,EAAM,IACV,IACA6W,EAAI7W,EAAM,KACV6W,EAAI7W,EAAM,KACV6W,EAAI7W,EAAM,KACV6W,EAAI7W,EAAM,KACV6W,EAAI7W,EAAM,KACV6W,EAAI7W,EAAM,MAzCT,GAbjB,CAyDU9sC,EAAQmV,OAASnV,EAAQmV,KAAO,M,8ECjD1C,YACA,QAMa,EAAAnJ,IAAM,IAKN,EAAA83C,UAAY,EAAA/uB,UAAY,KAAO,IAE5C,IAAMgvB,EAAgB,iDAChBC,EAAc,iDAWpB,SAAgBh5B,EAASzB,GACrB,IAAM0N,GAAO1N,EAAKmf,YAAY,OAASnf,EAAKmf,YAAY,MACxD,OAAY,IAARzR,EACO1N,GACC0N,GAAQ1N,EAAK3b,OAAS,EACvBod,EAASzB,EAAK2N,UAAU,EAAG3N,EAAK3b,OAAS,IAEzC2b,EAAKQ,OAAc,GAANkN,GAsE5B,SAASgtB,EAAO9iD,EAAe8D,EAAeC,EAAa1B,GACvD,OAAOyB,EAAQzB,EAAMoK,SAAW1I,GAAO/D,EAAMq0B,QAAQhyB,EAAOyB,KAAWA,EAS3E,SAAgBi/C,EAAQ36B,EAAcvd,GAElC,QAFkC,IAAAA,MAAA,MAE7Bud,EACD,MAAO,GAGX,IAAMgC,EAAMhC,EAAK3b,OACbuC,EAAOoZ,EAAKsB,WAAW,GAC3B,GAAa,KAAT1a,GAAoC,KAATA,EAA6B,CAGxD,IAAa,MADbA,EAAOoZ,EAAKsB,WAAW,KACiB,KAAT1a,IAId,MADbA,EAAOoZ,EAAKsB,WAAW,KACiB,KAAT1a,EAA6B,CAIxD,IAFA,IAAI,EAAM,EACJlL,EAAQ,EACP,EAAMsmB,IAEI,MADbpb,EAAOoZ,EAAKsB,WAAW,KACiB,KAAT1a,GAFjB,KAOlB,GADAA,EAAOoZ,EAAKsB,WAAW,EAAM,GACzB5lB,IAAU,GAAgB,KAATkL,GAAoC,KAATA,EAE5C,IADA,GAAO,EACA,EAAMob,EAAK,IAEd,GAAa,MADbpb,EAAOoZ,EAAKsB,WAAW,KACiB,KAAT1a,EAC3B,OAAOoZ,EAAKU,MAAM,EAAG,EAAM,GACtBtjB,QAAQ,SAAUqF,GAS3C,OAAOA,EAEJ,IAAKmE,GAAQ,IAAcA,GAAQ,IAAgBA,GAAQ,IAAcA,GAAQ,MAGzD,KAAvBoZ,EAAKsB,WAAW,GAEhB,OAAa,MADb1a,EAAOoZ,EAAKsB,WAAW,KACiB,KAAT1a,EAGpBoZ,EAAKU,MAAM,EAAG,GAAKje,EAInBud,EAAKU,MAAM,EAAG,GAQjC,IAAImO,EAAM7O,EAAKiM,QAAQ,OACvB,IAAa,IAAT4C,EAEA,IADAA,GAAO,EACAA,EAAM7M,EAAK6M,IAEd,GAAa,MADbjoB,EAAOoZ,EAAKsB,WAAWuN,KACiB,KAATjoB,EAC3B,OAAOoZ,EAAKU,MAAM,EAAGmO,EAAM,GAKvC,MAAO,GAjKX,aAcA,mBAAwB7O,GAEpB,IAAM0N,IADN1N,EAAOyB,EAASzB,IACEmf,YAAY,KAC9B,OAAOzR,EAAM1N,EAAK2N,WAAWD,GAAO,IAGxC,qBAA0B1N,EAAc46B,GAEpC,GAAI56B,QACA,OAAOA,EAGX,IAAMgC,EAAMhC,EAAK3b,OACjB,GAAY,IAAR2d,EACA,MAAO,IAGX,IAAM64B,EAAiB,EAAArvB,WAAaovB,EACpC,GAzCJ,SAAmB56B,EAAc86B,GAC7B,OAAOA,GACAL,EAAYzyB,KAAKhI,IACjBw6B,EAAcxyB,KAAKhI,GAsCtB+6B,CAAU/6B,EAAM66B,GAChB,OAAO76B,EAYX,IARA,IAAMvd,EAAMo4C,EAAiB,KAAO,IAC9B1H,EAAOwH,EAAQ36B,EAAMvd,GAGvB/G,EAAQy3C,EAAK9uC,OACb22C,GAAO,EACPv2C,EAAM,GAED9I,EAAMw3C,EAAK9uC,OAAQ1I,GAAOqmB,EAAKrmB,IAGpC,GAAIA,IAAQqmB,GAAgC,KAAzBhC,EAAKsB,WAAW3lB,IAAoD,KAAzBqkB,EAAKsB,WAAW3lB,GAA6B,CAEvG,GAAI++C,EAAO16B,EAAMtkB,EAAOC,EAAK,MAAO,CAEhC,IAAMs/C,EAAax2C,EAAI06B,YAAY18B,GAC7By4C,EAAYz2C,EAAIic,MAAMu6B,EAAa,IACpC9H,GAAQ+H,EAAU72C,OAAS,IAAoB,OAAd62C,IAClCz2C,GAAsB,IAAhBw2C,EAAoB,GAAKx2C,EAAIic,MAAM,EAAGu6B,GAC5CD,GAAO,QAEJN,EAAO16B,EAAMtkB,EAAOC,EAAK,OAASw3C,GAAQ1uC,GAAO9I,EAAMqmB,EAAM,KAEpEg5B,GAAO,GAGX,IAAKA,EAAM,CACP,IAAMG,EAAOn7B,EAAKU,MAAMhlB,EAAOC,GACnB,KAAR8I,GAAcA,EAAIA,EAAIJ,OAAS,KAAO5B,IACtCgC,GAAOhC,GAEXgC,GAAO02C,EAEXz/C,EAAQC,EAAM,EACdq/C,GAAO,EAIf,OAAO7H,EAAO1uC,GAYlB,YA6EA,2BAAgCub,EAActb,EAAmB02C,GAC7D,GAAIp7B,IAAStb,EACT,OAAO,EAGX,IAAKsb,IAAStb,EACV,OAAO,EAGX,GAAIA,EAAUL,OAAS2b,EAAK3b,OACxB,OAAO,EAGX,GAAI+2C,EAAY,CAEZ,IADmB,EAAA14C,qBAAqBsd,EAAMtb,GAE1C,OAAO,EAGX,GAAIA,EAAUL,SAAW2b,EAAK3b,OAC1B,OAAO,EAGX,IAAIg3C,EAAY32C,EAAUL,OAK1B,OAJIK,EAAUwb,OAAOxb,EAAUL,OAAS,KAAO,EAAAk2C,WAC3Cc,IAGGr7B,EAAKE,OAAOm7B,KAAe,EAAAd,UAOtC,OAJI71C,EAAUwb,OAAOxb,EAAUL,OAAS,KAAO,EAAAk2C,YAC3C71C,GAAa,EAAA61C,WAGkB,IAA5Bv6B,EAAKiM,QAAQvnB,K,6BCnNxB,SAAgB42C,EAAmB10C,GAC/B,OAAOA,GAAQ,IAAcA,GAAQ,IAGzC,SAAgB20C,EAAmB30C,GAC/B,OAAOA,GAAQ,IAAcA,GAAQ,GAGzC,SAAS40C,EAAc50C,GACnB,OAAO00C,EAAmB10C,IAAS20C,EAAmB30C,GAa1D,SAAS60C,EAAmBpZ,EAAW1W,EAAW+vB,GAC9C,QAD8C,IAAAA,MAASrZ,EAAEh+B,QACxC,iBAANg+B,GAA+B,iBAAN1W,EAChC,OAAO,EAGX,IAAK,IAAIh1B,EAAI,EAAGA,EAAI+kD,EAAQ/kD,IAAK,CAC7B,IAAMglD,EAAQtZ,EAAE/gB,WAAW3qB,GACrBilD,EAAQjwB,EAAErK,WAAW3qB,GAE3B,GAAIglD,IAAUC,EAKd,GAAIJ,EAAcG,IAAUH,EAAcI,GAAQ,CAC9C,IAAM5C,EAAOj4B,KAAK86B,IAAIF,EAAQC,GAC9B,GAAa,IAAT5C,GAAuB,KAATA,EACd,OAAO,OAOX,GAAIxlC,OAAO4b,aAAausB,GAAO1sB,gBAAkBzb,OAAO4b,aAAawsB,GAAO3sB,cACxE,OAAO,EAKnB,OAAO,E,iDA9DX,oBAAyB6sB,EAAkBC,GACvC,IAAM/C,EAAO8C,EAASz3C,OAAS03C,EAAO13C,OACtC,OAAI20C,EAAO,EACA8C,EAAS7vB,QAAQ8vB,EAAQ/C,KAAUA,EAC1B,IAATA,GACA8C,IAAaC,GAK5B,uBAIA,uBAOA,4BAAiC1Z,EAAW1W,GAIxC,OAHa0W,EAAIA,EAAEh+B,OAAS,MACfsnB,EAAIA,EAAEtnB,OAAS,IAMrBo3C,EAAmBpZ,EAAG1W,IAuCjC,kCAAuC/zB,GACnC,OAAOA,EAAMwF,QAAQ,sCAAuC,SAGhE,gCAAqC2kB,EAAard,GAC9C,IAAMs3C,EAAkBt3C,EAAUL,OAClC,QAAIK,EAAUL,OAAS0d,EAAI1d,SAIpBo3C,EAAmB15B,EAAKrd,EAAWs3C,K,8ECtF9C,iBAKI,WAAYpkD,GACRgB,KAAKhB,MAAQA,GAAS,GAsB9B,OAnBI,YAAAyF,WAAA,SAAWzF,GAGP,OADAgB,KAAKhB,OAASA,EAAMwF,QAAQ,wBAAyB,QAC9CxE,MAGX,YAAAqjD,eAAA,SAAerkD,GAEX,OADAgB,KAAKhB,OAASA,EACPgB,MAGX,YAAAsjD,gBAAA,SAAgBt1C,EAAcmM,GAM1B,YAN0B,IAAAA,MAAA,IAC1Bna,KAAKhB,OAAS,QACdgB,KAAKhB,OAASmb,EACdna,KAAKhB,OAAS,KACdgB,KAAKhB,OAASgP,EACdhO,KAAKhB,OAAS,UACPgB,MAEf,EA5BA,GAAa,EAAAqa,iBA+Bb,4BAAiC5W,GAC7B,OAAIA,aAAiB4W,MAEV5W,GAA0B,iBAAVA,KACyB,iBAAjBA,EAAOzE,QACe,kBAArByE,EAAO6W,gBAAiE,IAArB7W,EAAO6W,c,6BC/BlG,IAOIipC,EAPAC,EAAuB,iBAAZnS,QAAuBA,QAAU,KAC5CoS,EAAeD,GAAwB,mBAAZA,EAAE74B,MAC7B64B,EAAE74B,MACF,SAAsBvhB,EAAQoyC,EAAUjqC,GACxC,OAAO6N,SAASzf,UAAUgrB,MAAMzsB,KAAKkL,EAAQoyC,EAAUjqC,IAKzDgyC,EADEC,GAA0B,mBAAdA,EAAEE,QACCF,EAAEE,QACVjlD,OAAOklD,sBACC,SAAwBv6C,GACvC,OAAO3K,OAAOmlD,oBAAoBx6C,GAC/Bmf,OAAO9pB,OAAOklD,sBAAsBv6C,KAGxB,SAAwBA,GACvC,OAAO3K,OAAOmlD,oBAAoBx6C,IAQtC,IAAIy6C,EAAc3hC,OAAOmkB,OAAS,SAAqBrnC,GACrD,OAAOA,GAAUA,GAGnB,SAAS8kD,IACPA,EAAaC,KAAK7lD,KAAK8B,MAEzBlC,EAAOD,QAAUimD,EAGjBA,EAAaA,aAAeA,EAE5BA,EAAankD,UAAUqkD,aAAU1jD,EACjCwjD,EAAankD,UAAUskD,aAAe,EACtCH,EAAankD,UAAUukD,mBAAgB5jD,EAIvC,IAAI6jD,EAAsB,GAE1B,SAASC,EAAcn4B,GACrB,GAAwB,mBAAbA,EACT,MAAM,IAAI5E,UAAU,0EAA4E4E,GAsCpG,SAASo4B,EAAiB1yB,GACxB,YAA2BrxB,IAAvBqxB,EAAKuyB,cACAJ,EAAaK,oBACfxyB,EAAKuyB,cAmDd,SAASI,EAAal7C,EAAQgJ,EAAM6Z,EAAUs4B,GAC5C,IAAIpmD,EACAqmD,EACAC,EAzHsBC,EA+I1B,GApBAN,EAAcn4B,QAGC3rB,KADfkkD,EAASp7C,EAAO46C,UAEdQ,EAASp7C,EAAO46C,QAAUvlD,OAAOY,OAAO,MACxC+J,EAAO66C,aAAe,SAIK3jD,IAAvBkkD,EAAOG,cACTv7C,EAAOiiB,KAAK,cAAejZ,EACf6Z,EAASA,SAAWA,EAASA,SAAWA,GAIpDu4B,EAASp7C,EAAO46C,SAElBS,EAAWD,EAAOpyC,SAGH9R,IAAbmkD,EAEFA,EAAWD,EAAOpyC,GAAQ6Z,IACxB7iB,EAAO66C,kBAeT,GAbwB,mBAAbQ,EAETA,EAAWD,EAAOpyC,GAChBmyC,EAAU,CAACt4B,EAAUw4B,GAAY,CAACA,EAAUx4B,GAErCs4B,EACTE,EAAS39B,QAAQmF,GAEjBw4B,EAAS15C,KAAKkhB,IAIhB9tB,EAAIkmD,EAAiBj7C,IACb,GAAKq7C,EAASh5C,OAAStN,IAAMsmD,EAASG,OAAQ,CACpDH,EAASG,QAAS,EAGlB,IAAIC,EAAI,IAAI5jD,MAAM,+CACEwjD,EAASh5C,OAAS,IAAMmP,OAAOxI,GAAQ,qEAG3DyyC,EAAEvmD,KAAO,8BACTumD,EAAE72B,QAAU5kB,EACZy7C,EAAEzyC,KAAOA,EACTyyC,EAAEn3B,MAAQ+2B,EAASh5C,OA5KGi5C,EA6KHG,EA5KnB93B,SAAWA,QAAQY,MAAMZ,QAAQY,KAAK+2B,GAgL1C,OAAOt7C,EAcT,SAAS07C,IACP,IAAK9kD,KAAK+kD,MAGR,OAFA/kD,KAAKoJ,OAAO+hB,eAAenrB,KAAKoS,KAAMpS,KAAKglD,QAC3ChlD,KAAK+kD,OAAQ,EACY,IAArBz1C,UAAU7D,OACLzL,KAAKisB,SAAS/tB,KAAK8B,KAAKoJ,QAC1BpJ,KAAKisB,SAAStB,MAAM3qB,KAAKoJ,OAAQkG,WAI5C,SAAS21C,EAAU77C,EAAQgJ,EAAM6Z,GAC/B,IAAI6Q,EAAQ,CAAEioB,OAAO,EAAOC,YAAQ1kD,EAAW8I,OAAQA,EAAQgJ,KAAMA,EAAM6Z,SAAUA,GACjFi5B,EAAUJ,EAAYvlD,KAAKu9B,GAG/B,OAFAooB,EAAQj5B,SAAWA,EACnB6Q,EAAMkoB,OAASE,EACRA,EA0HT,SAASC,EAAW/7C,EAAQgJ,EAAMgzC,GAChC,IAAIZ,EAASp7C,EAAO46C,QAEpB,QAAe1jD,IAAXkkD,EACF,MAAO,GAET,IAAIa,EAAab,EAAOpyC,GACxB,YAAmB9R,IAAf+kD,EACK,GAEiB,mBAAfA,EACFD,EAAS,CAACC,EAAWp5B,UAAYo5B,GAAc,CAACA,GAElDD,EAsDT,SAAyBp9B,GAEvB,IADA,IAAIhhB,EAAM,IAAI8B,MAAMkf,EAAIvc,QACf1N,EAAI,EAAGA,EAAIiJ,EAAIyE,SAAU1N,EAChCiJ,EAAIjJ,GAAKiqB,EAAIjqB,GAAGkuB,UAAYjE,EAAIjqB,GAElC,OAAOiJ,EA1DLs+C,CAAgBD,GAAcE,EAAWF,EAAYA,EAAW55C,QAoBpE,SAAS+5C,EAAcpzC,GACrB,IAAIoyC,EAASxkD,KAAKgkD,QAElB,QAAe1jD,IAAXkkD,EAAsB,CACxB,IAAIa,EAAab,EAAOpyC,GAExB,GAA0B,mBAAfizC,EACT,OAAO,EACF,QAAmB/kD,IAAf+kD,EACT,OAAOA,EAAW55C,OAItB,OAAO,EAOT,SAAS85C,EAAWv9B,EAAKxoB,GAEvB,IADA,IAAI4lC,EAAO,IAAIt8B,MAAMtJ,GACZzB,EAAI,EAAGA,EAAIyB,IAAKzB,EACvBqnC,EAAKrnC,GAAKiqB,EAAIjqB,GAChB,OAAOqnC,EApWT3mC,OAAOC,eAAeolD,EAAc,sBAAuB,CACzDnlD,YAAY,EACZC,IAAK,WACH,OAAOulD,GAET54C,IAAK,SAASsE,GACZ,GAAmB,iBAARA,GAAoBA,EAAM,GAAKg0C,EAAYh0C,GACpD,MAAM,IAAIw0B,WAAW,kGAAoGx0B,EAAM,KAEjIs0C,EAAsBt0C,KAI1Bi0C,EAAaC,KAAO,gBAEGzjD,IAAjBN,KAAKgkD,SACLhkD,KAAKgkD,UAAYvlD,OAAOu4B,eAAeh3B,MAAMgkD,UAC/ChkD,KAAKgkD,QAAUvlD,OAAOY,OAAO,MAC7BW,KAAKikD,aAAe,GAGtBjkD,KAAKkkD,cAAgBlkD,KAAKkkD,oBAAiB5jD,GAK7CwjD,EAAankD,UAAU8lD,gBAAkB,SAAyBjmD,GAChE,GAAiB,iBAANA,GAAkBA,EAAI,GAAKqkD,EAAYrkD,GAChD,MAAM,IAAI6kC,WAAW,gFAAkF7kC,EAAI,KAG7G,OADAQ,KAAKkkD,cAAgB1kD,EACdQ,MAST8jD,EAAankD,UAAU+lD,gBAAkB,WACvC,OAAOrB,EAAiBrkD,OAG1B8jD,EAAankD,UAAU0rB,KAAO,SAAcjZ,GAE1C,IADA,IAAIb,EAAO,GACFxT,EAAI,EAAGA,EAAIuR,UAAU7D,OAAQ1N,IAAKwT,EAAKxG,KAAKuE,UAAUvR,IAC/D,IAAI4nD,EAAoB,UAATvzC,EAEXoyC,EAASxkD,KAAKgkD,QAClB,QAAe1jD,IAAXkkD,EACFmB,EAAWA,QAA4BrlD,IAAjBkkD,EAAOx3B,WAC1B,IAAK24B,EACR,OAAO,EAGT,GAAIA,EAAS,CACX,IAAIC,EAGJ,GAFIr0C,EAAK9F,OAAS,IAChBm6C,EAAKr0C,EAAK,IACRq0C,aAAc3kD,MAGhB,MAAM2kD,EAGR,IAAI/1B,EAAM,IAAI5uB,MAAM,oBAAsB2kD,EAAK,KAAOA,EAAGh+C,QAAU,IAAM,KAEzE,MADAioB,EAAIvD,QAAUs5B,EACR/1B,EAGR,IAAIuP,EAAUolB,EAAOpyC,GAErB,QAAgB9R,IAAZ8+B,EACF,OAAO,EAET,GAAuB,mBAAZA,EACTqkB,EAAarkB,EAASp/B,KAAMuR,OAE5B,KAAI6X,EAAMgW,EAAQ3zB,OACd+f,EAAY+5B,EAAWnmB,EAAShW,GACpC,IAASrrB,EAAI,EAAGA,EAAIqrB,IAAOrrB,EACzB0lD,EAAaj4B,EAAUztB,GAAIiC,KAAMuR,GAGrC,OAAO,GAiETuyC,EAAankD,UAAUqrB,YAAc,SAAqB5Y,EAAM6Z,GAC9D,OAAOq4B,EAAatkD,KAAMoS,EAAM6Z,GAAU,IAG5C63B,EAAankD,UAAUorB,GAAK+4B,EAAankD,UAAUqrB,YAEnD84B,EAAankD,UAAU2rB,gBACnB,SAAyBlZ,EAAM6Z,GAC7B,OAAOq4B,EAAatkD,KAAMoS,EAAM6Z,GAAU,IAqBhD63B,EAAankD,UAAUsrB,KAAO,SAAc7Y,EAAM6Z,GAGhD,OAFAm4B,EAAcn4B,GACdjsB,KAAK+qB,GAAG3Y,EAAM6yC,EAAUjlD,KAAMoS,EAAM6Z,IAC7BjsB,MAGT8jD,EAAankD,UAAU4rB,oBACnB,SAA6BnZ,EAAM6Z,GAGjC,OAFAm4B,EAAcn4B,GACdjsB,KAAKsrB,gBAAgBlZ,EAAM6yC,EAAUjlD,KAAMoS,EAAM6Z,IAC1CjsB,MAIb8jD,EAAankD,UAAUwrB,eACnB,SAAwB/Y,EAAM6Z,GAC5B,IAAI2d,EAAM4a,EAAQ59C,EAAU7I,EAAG8nD,EAK/B,GAHAzB,EAAcn4B,QAGC3rB,KADfkkD,EAASxkD,KAAKgkD,SAEZ,OAAOhkD,KAGT,QAAaM,KADbspC,EAAO4a,EAAOpyC,IAEZ,OAAOpS,KAET,GAAI4pC,IAAS3d,GAAY2d,EAAK3d,WAAaA,EACb,KAAtBjsB,KAAKikD,aACTjkD,KAAKgkD,QAAUvlD,OAAOY,OAAO,cAEtBmlD,EAAOpyC,GACVoyC,EAAOr5B,gBACTnrB,KAAKqrB,KAAK,iBAAkBjZ,EAAMw3B,EAAK3d,UAAYA,SAElD,GAAoB,mBAAT2d,EAAqB,CAGrC,IAFAhjC,GAAY,EAEP7I,EAAI6rC,EAAKn+B,OAAS,EAAG1N,GAAK,EAAGA,IAChC,GAAI6rC,EAAK7rC,KAAOkuB,GAAY2d,EAAK7rC,GAAGkuB,WAAaA,EAAU,CACzD45B,EAAmBjc,EAAK7rC,GAAGkuB,SAC3BrlB,EAAW7I,EACX,MAIJ,GAAI6I,EAAW,EACb,OAAO5G,KAEQ,IAAb4G,EACFgjC,EAAKpX,QAiIf,SAAmBoX,EAAM9mB,GACvB,KAAOA,EAAQ,EAAI8mB,EAAKn+B,OAAQqX,IAC9B8mB,EAAK9mB,GAAS8mB,EAAK9mB,EAAQ,GAC7B8mB,EAAKrnC,MAlIGujD,CAAUlc,EAAMhjC,GAGE,IAAhBgjC,EAAKn+B,SACP+4C,EAAOpyC,GAAQw3B,EAAK,SAEQtpC,IAA1BkkD,EAAOr5B,gBACTnrB,KAAKqrB,KAAK,iBAAkBjZ,EAAMyzC,GAAoB55B,GAG1D,OAAOjsB,MAGb8jD,EAAankD,UAAUurB,IAAM44B,EAAankD,UAAUwrB,eAEpD24B,EAAankD,UAAUyrB,mBACnB,SAA4BhZ,GAC1B,IAAIoZ,EAAWg5B,EAAQzmD,EAGvB,QAAeuC,KADfkkD,EAASxkD,KAAKgkD,SAEZ,OAAOhkD,KAGT,QAA8BM,IAA1BkkD,EAAOr5B,eAUT,OATyB,IAArB7b,UAAU7D,QACZzL,KAAKgkD,QAAUvlD,OAAOY,OAAO,MAC7BW,KAAKikD,aAAe,QACM3jD,IAAjBkkD,EAAOpyC,KACY,KAAtBpS,KAAKikD,aACTjkD,KAAKgkD,QAAUvlD,OAAOY,OAAO,aAEtBmlD,EAAOpyC,IAEXpS,KAIT,GAAyB,IAArBsP,UAAU7D,OAAc,CAC1B,IACInM,EADAyjC,EAAOtkC,OAAOskC,KAAKyhB,GAEvB,IAAKzmD,EAAI,EAAGA,EAAIglC,EAAKt3B,SAAU1N,EAEjB,oBADZuB,EAAMyjC,EAAKhlC,KAEXiC,KAAKorB,mBAAmB9rB,GAK1B,OAHAU,KAAKorB,mBAAmB,kBACxBprB,KAAKgkD,QAAUvlD,OAAOY,OAAO,MAC7BW,KAAKikD,aAAe,EACbjkD,KAKT,GAAyB,mBAFzBwrB,EAAYg5B,EAAOpyC,IAGjBpS,KAAKmrB,eAAe/Y,EAAMoZ,QACrB,QAAkBlrB,IAAdkrB,EAET,IAAKztB,EAAIytB,EAAU/f,OAAS,EAAG1N,GAAK,EAAGA,IACrCiC,KAAKmrB,eAAe/Y,EAAMoZ,EAAUztB,IAIxC,OAAOiC,MAoBb8jD,EAAankD,UAAU6rB,UAAY,SAAmBpZ,GACpD,OAAO+yC,EAAWnlD,KAAMoS,GAAM,IAGhC0xC,EAAankD,UAAUomD,aAAe,SAAsB3zC,GAC1D,OAAO+yC,EAAWnlD,KAAMoS,GAAM,IAGhC0xC,EAAa0B,cAAgB,SAASx3B,EAAS5b,GAC7C,MAAqC,mBAA1B4b,EAAQw3B,cACVx3B,EAAQw3B,cAAcpzC,GAEtBozC,EAActnD,KAAK8vB,EAAS5b,IAIvC0xC,EAAankD,UAAU6lD,cAAgBA,EAiBvC1B,EAAankD,UAAUqmD,WAAa,WAClC,OAAOhmD,KAAKikD,aAAe,EAAIV,EAAevjD,KAAKgkD,SAAW,K,iBCvahEnmD,EAAUC,EAAOD,QAAU,EAAQ,KAC3BooD,OAASpoD,EACjBA,EAAQqyC,SAAWryC,EACnBA,EAAQsyC,SAAW,EAAQ,IAC3BtyC,EAAQmyC,OAAS,EAAQ,IACzBnyC,EAAQqoD,UAAY,EAAQ,IAC5BroD,EAAQsoD,YAAc,EAAQ,M,gBCL9B,IAAI9gB,EAAS,EAAQ,IACjBnB,EAASmB,EAAOnB,OAGpB,SAASkiB,EAAW9X,EAAKC,GACvB,IAAK,IAAIjvC,KAAOgvC,EACdC,EAAIjvC,GAAOgvC,EAAIhvC,GAWnB,SAAS+mD,EAAYx2C,EAAK00B,EAAkB94B,GAC1C,OAAOy4B,EAAOr0B,EAAK00B,EAAkB94B,GATnCy4B,EAAOhkC,MAAQgkC,EAAO2E,OAAS3E,EAAOM,aAAeN,EAAOoF,gBAC9DxrC,EAAOD,QAAUwnC,GAGjB+gB,EAAU/gB,EAAQxnC,GAClBA,EAAQqmC,OAASmiB,GAQnBD,EAAUliB,EAAQmiB,GAElBA,EAAWnmD,KAAO,SAAU2P,EAAK00B,EAAkB94B,GACjD,GAAmB,iBAARoE,EACT,MAAM,IAAIwX,UAAU,iCAEtB,OAAO6c,EAAOr0B,EAAK00B,EAAkB94B,IAGvC46C,EAAWxd,MAAQ,SAAU1K,EAAMkL,EAAMvE,GACvC,GAAoB,iBAAT3G,EACT,MAAM,IAAI9W,UAAU,6BAEtB,IAAIsf,EAAMzC,EAAO/F,GAUjB,YATa79B,IAAT+oC,EACsB,iBAAbvE,EACT6B,EAAI0C,KAAKA,EAAMvE,GAEf6B,EAAI0C,KAAKA,GAGX1C,EAAI0C,KAAK,GAEJ1C,GAGT0f,EAAW7hB,YAAc,SAAUrG,GACjC,GAAoB,iBAATA,EACT,MAAM,IAAI9W,UAAU,6BAEtB,OAAO6c,EAAO/F,IAGhBkoB,EAAW/c,gBAAkB,SAAUnL,GACrC,GAAoB,iBAATA,EACT,MAAM,IAAI9W,UAAU,6BAEtB,OAAOge,EAAOuD,WAAWzK,K,8BC5D3B,gBA6BA,IAAI2R,EAAM,EAAQ,IAelB,SAASwW,EAAcxpB,GACrB,IAAIpH,EAAQ11B,KAEZA,KAAKumD,KAAO,KACZvmD,KAAKwhB,MAAQ,KACbxhB,KAAKwmD,OAAS,YAolBhB,SAAwBC,EAAS3pB,EAAOjN,GACtC,IAAIrO,EAAQilC,EAAQjlC,MACpBilC,EAAQjlC,MAAQ,KAChB,KAAOA,GAAO,CACZ,IAAIoO,EAAKpO,EAAM6K,SACfyQ,EAAM4pB,YACN92B,EAAGC,GACHrO,EAAQA,EAAM+kC,KAEZzpB,EAAM6pB,mBACR7pB,EAAM6pB,mBAAmBJ,KAAOE,EAEhC3pB,EAAM6pB,mBAAqBF,EA/lB3BG,CAAelxB,EAAOoH,IAlB1Bh/B,EAAOD,QAAUsyC,EAwBjB,IAIIH,EAJA6W,GAAc33C,EAAQ0b,SAAW,CAAC,QAAS,SAASyI,QAAQnkB,EAAQuF,QAAQqT,MAAM,EAAG,KAAO,EAAIsW,EAAe0R,EAAIplB,SAOvHylB,EAAS2W,cAAgBA,EAGzB,IAAI93B,EAAOvwB,OAAOY,OAAO,EAAQ,KACjC2vB,EAAKihB,SAAW,EAAQ,IAIxB,IAAI8W,EAAe,CACjBC,UAAW,EAAQ,MAKjBf,EAAS,EAAQ,IAKjB/hB,EAAS,EAAQ,IAAeA,OAChC+iB,EAAgB13B,EAAO+U,YAAc,aAUzC,IA2II4iB,EA3IAC,EAAc,EAAQ,IAI1B,SAASC,KAET,SAASN,EAAch8C,EAASu8C,GAC9BrX,EAASA,GAAU,EAAQ,IAE3BllC,EAAUA,GAAW,GAOrB,IAAIw8C,EAAWD,aAAkBrX,EAIjChwC,KAAKunD,aAAez8C,EAAQy8C,WAExBD,IAAUtnD,KAAKunD,WAAavnD,KAAKunD,cAAgBz8C,EAAQ08C,oBAK7D,IAAIC,EAAM38C,EAAQ4lC,cACdgX,EAAc58C,EAAQ68C,sBACtBC,EAAa5nD,KAAKunD,WAAa,GAAK,MAElBvnD,KAAK0wC,cAAvB+W,GAAe,IAARA,EAAgCA,EAAaH,IAAaI,GAA+B,IAAhBA,GAAyCA,EAAsCE,EAGnK5nD,KAAK0wC,cAAgBvoB,KAAK0kB,MAAM7sC,KAAK0wC,eAGrC1wC,KAAK6nD,aAAc,EAGnB7nD,KAAK8nD,WAAY,EAEjB9nD,KAAK+nD,QAAS,EAEd/nD,KAAKwwC,OAAQ,EAEbxwC,KAAKgoD,UAAW,EAGhBhoD,KAAK4wC,WAAY,EAKjB,IAAIqX,GAAqC,IAA1Bn9C,EAAQo9C,cACvBloD,KAAKkoD,eAAiBD,EAKtBjoD,KAAKmoD,gBAAkBr9C,EAAQq9C,iBAAmB,OAKlDnoD,KAAKyL,OAAS,EAGdzL,KAAKooD,SAAU,EAGfpoD,KAAKqoD,OAAS,EAMdroD,KAAK+3C,MAAO,EAKZ/3C,KAAKsoD,kBAAmB,EAGxBtoD,KAAKuoD,QAAU,SAAU3C,IA4R3B,SAAiByB,EAAQzB,GACvB,IAAI9oB,EAAQuqB,EAAO9W,eACfwH,EAAOjb,EAAMib,KACbnoB,EAAKkN,EAAM0rB,QAIf,GAdF,SAA4B1rB,GAC1BA,EAAMsrB,SAAU,EAChBtrB,EAAM0rB,QAAU,KAChB1rB,EAAMrxB,QAAUqxB,EAAM2rB,SACtB3rB,EAAM2rB,SAAW,EAQjBC,CAAmB5rB,GAEf8oB,GAtCN,SAAsByB,EAAQvqB,EAAOib,EAAM6N,EAAIh2B,KAC3CkN,EAAM4pB,UAEJ3O,GAGFjI,EAAIplB,SAASkF,EAAIg2B,GAGjB9V,EAAIplB,SAASi+B,EAAatB,EAAQvqB,GAClCuqB,EAAO9W,eAAeqY,cAAe,EACrCvB,EAAOh8B,KAAK,QAASu6B,KAIrBh2B,EAAGg2B,GACHyB,EAAO9W,eAAeqY,cAAe,EACrCvB,EAAOh8B,KAAK,QAASu6B,GAGrB+C,EAAYtB,EAAQvqB,IAkBd+rB,CAAaxB,EAAQvqB,EAAOib,EAAM6N,EAAIh2B,OAAS,CAErD,IAAIo4B,EAAWc,EAAWhsB,GAErBkrB,GAAalrB,EAAMurB,QAAWvrB,EAAMwrB,mBAAoBxrB,EAAMisB,iBACjEC,EAAY3B,EAAQvqB,GAGlBib,EAEF8O,EAAWoC,EAAY5B,EAAQvqB,EAAOkrB,EAAUp4B,GAGhDq5B,EAAW5B,EAAQvqB,EAAOkrB,EAAUp4B,IA/StC24B,CAAQlB,EAAQzB,IAIlB5lD,KAAKwoD,QAAU,KAGfxoD,KAAKyoD,SAAW,EAEhBzoD,KAAK+oD,gBAAkB,KACvB/oD,KAAKkpD,oBAAsB,KAI3BlpD,KAAK0mD,UAAY,EAIjB1mD,KAAKmpD,aAAc,EAGnBnpD,KAAK4oD,cAAe,EAGpB5oD,KAAKopD,qBAAuB,EAI5BppD,KAAK2mD,mBAAqB,IAAIL,EAActmD,MA0C9C,SAASmwC,EAASrlC,GAUhB,GATAklC,EAASA,GAAU,EAAQ,MAStBkX,EAAgBhpD,KAAKiyC,EAAUnwC,OAAWA,gBAAgBgwC,GAC7D,OAAO,IAAIG,EAASrlC,GAGtB9K,KAAKuwC,eAAiB,IAAIuW,EAAch8C,EAAS9K,MAGjDA,KAAK42B,UAAW,EAEZ9rB,IAC2B,mBAAlBA,EAAQ+zB,QAAsB7+B,KAAKqpD,OAASv+C,EAAQ+zB,OAEjC,mBAAnB/zB,EAAQw+C,SAAuBtpD,KAAKupD,QAAUz+C,EAAQw+C,QAElC,mBAApBx+C,EAAQgnB,UAAwB9xB,KAAK6wC,SAAW/lC,EAAQgnB,SAEtC,mBAAlBhnB,EAAQ0+C,QAAsBxpD,KAAKypD,OAAS3+C,EAAQ0+C,QAGjEvD,EAAO/nD,KAAK8B,MAgJd,SAAS0pD,EAAQrC,EAAQvqB,EAAOwsB,EAAQlgC,EAAK6pB,EAAOnO,EAAUlV,GAC5DkN,EAAM2rB,SAAWr/B,EACjB0T,EAAM0rB,QAAU54B,EAChBkN,EAAMsrB,SAAU,EAChBtrB,EAAMib,MAAO,EACTuR,EAAQjC,EAAOkC,QAAQtW,EAAOnW,EAAMyrB,SAAclB,EAAOgC,OAAOpW,EAAOnO,EAAUhI,EAAMyrB,SAC3FzrB,EAAMib,MAAO,EA2Df,SAASkR,EAAW5B,EAAQvqB,EAAOkrB,EAAUp4B,GACtCo4B,GASP,SAAsBX,EAAQvqB,GACP,IAAjBA,EAAMrxB,QAAgBqxB,EAAMgrB,YAC9BhrB,EAAMgrB,WAAY,EAClBT,EAAOh8B,KAAK,UAZCs+B,CAAatC,EAAQvqB,GACpCA,EAAM4pB,YACN92B,IACA+4B,EAAYtB,EAAQvqB,GActB,SAASksB,EAAY3B,EAAQvqB,GAC3BA,EAAMwrB,kBAAmB,EACzB,IAAI9mC,EAAQsb,EAAMisB,gBAElB,GAAI1B,EAAOkC,SAAW/nC,GAASA,EAAM+kC,KAAM,CAEzC,IAAIvoD,EAAI8+B,EAAMssB,qBACV/jB,EAAS,IAAIv8B,MAAM9K,GACnB4rD,EAAS9sB,EAAM6pB,mBACnBiD,EAAOpoC,MAAQA,EAIf,IAFA,IAAIkM,EAAQ,EACRm8B,GAAa,EACVroC,GACL6jB,EAAO3X,GAASlM,EACXA,EAAMsoC,QAAOD,GAAa,GAC/BroC,EAAQA,EAAM+kC,KACd74B,GAAS,EAEX2X,EAAOwkB,WAAaA,EAEpBH,EAAQrC,EAAQvqB,GAAO,EAAMA,EAAMrxB,OAAQ45B,EAAQ,GAAIukB,EAAOpD,QAI9D1pB,EAAM4pB,YACN5pB,EAAMosB,oBAAsB,KACxBU,EAAOrD,MACTzpB,EAAM6pB,mBAAqBiD,EAAOrD,KAClCqD,EAAOrD,KAAO,MAEdzpB,EAAM6pB,mBAAqB,IAAIL,EAAcxpB,GAE/CA,EAAMssB,qBAAuB,MACxB,CAEL,KAAO5nC,GAAO,CACZ,IAAIyxB,EAAQzxB,EAAMyxB,MACdnO,EAAWtjB,EAAMsjB,SACjBlV,EAAKpO,EAAM6K,SAUf,GAPAq9B,EAAQrC,EAAQvqB,GAAO,EAFbA,EAAMyqB,WAAa,EAAItU,EAAMxnC,OAEJwnC,EAAOnO,EAAUlV,GACpDpO,EAAQA,EAAM+kC,KACdzpB,EAAMssB,uBAKFtsB,EAAMsrB,QACR,MAIU,OAAV5mC,IAAgBsb,EAAMosB,oBAAsB,MAGlDpsB,EAAMisB,gBAAkBvnC,EACxBsb,EAAMwrB,kBAAmB,EAiC3B,SAASQ,EAAWhsB,GAClB,OAAOA,EAAMirB,QAA2B,IAAjBjrB,EAAMrxB,QAA0C,OAA1BqxB,EAAMisB,kBAA6BjsB,EAAMkrB,WAAalrB,EAAMsrB,QAE3G,SAAS2B,EAAU1C,EAAQvqB,GACzBuqB,EAAOoC,QAAO,SAAU55B,GACtBiN,EAAM4pB,YACF72B,GACFw3B,EAAOh8B,KAAK,QAASwE,GAEvBiN,EAAMqsB,aAAc,EACpB9B,EAAOh8B,KAAK,aACZs9B,EAAYtB,EAAQvqB,MAgBxB,SAAS6rB,EAAYtB,EAAQvqB,GAC3B,IAAIktB,EAAOlB,EAAWhsB,GAQtB,OAPIktB,KAfN,SAAmB3C,EAAQvqB,GACpBA,EAAMqsB,aAAgBrsB,EAAM+qB,cACF,mBAAlBR,EAAOoC,QAChB3sB,EAAM4pB,YACN5pB,EAAM+qB,aAAc,EACpB/X,EAAIplB,SAASq/B,EAAW1C,EAAQvqB,KAEhCA,EAAMqsB,aAAc,EACpB9B,EAAOh8B,KAAK,eAQd4+B,CAAU5C,EAAQvqB,GACM,IAApBA,EAAM4pB,YACR5pB,EAAMkrB,UAAW,EACjBX,EAAOh8B,KAAK,YAGT2+B,EAzhBTh7B,EAAKihB,SAASE,EAAU8V,GAmHxBa,EAAcnnD,UAAUuqD,UAAY,WAGlC,IAFA,IAAI5W,EAAUtzC,KAAK+oD,gBACfte,EAAM,GACH6I,GACL7I,EAAI1/B,KAAKuoC,GACTA,EAAUA,EAAQiT,KAEpB,OAAO9b,GAGT,WACE,IACEhsC,OAAOC,eAAeooD,EAAcnnD,UAAW,SAAU,CACvDf,IAAKmoD,EAAaC,WAAU,WAC1B,OAAOhnD,KAAKkqD,cACX,6EAAmF,aAExF,MAAO9Y,KAPX,GAasB,mBAAXtyC,QAAyBA,OAAOqrD,aAAiE,mBAA3C/qC,SAASzf,UAAUb,OAAOqrD,cACzFjD,EAAkB9nC,SAASzf,UAAUb,OAAOqrD,aAC5C1rD,OAAOC,eAAeyxC,EAAUrxC,OAAOqrD,YAAa,CAClDnrD,MAAO,SAAUS,GACf,QAAIynD,EAAgBhpD,KAAK8B,KAAMP,IAC3BO,OAASmwC,IAEN1wC,GAAUA,EAAO8wC,0BAA0BuW,OAItDI,EAAkB,SAAUznD,GAC1B,OAAOA,aAAkBO,MAqC7BmwC,EAASxwC,UAAUyqD,KAAO,WACxBpqD,KAAKqrB,KAAK,QAAS,IAAIpqB,MAAM,+BA8B/BkvC,EAASxwC,UAAUk/B,MAAQ,SAAUoU,EAAOnO,EAAUlV,GACpD,IAnOqBqV,EAmOjBnI,EAAQ98B,KAAKuwC,eACbvpC,GAAM,EACN8iD,GAAShtB,EAAMyqB,aArOEtiB,EAqO0BgO,EApOxC/O,EAAOgB,SAASD,IAAQA,aAAegiB,GAwP9C,OAlBI6C,IAAU5lB,EAAOgB,SAAS+N,KAC5BA,EA3OJ,SAA6BA,GAC3B,OAAO/O,EAAOhkC,KAAK+yC,GA0OToX,CAAoBpX,IAGN,mBAAbnO,IACTlV,EAAKkV,EACLA,EAAW,MAGTglB,EAAOhlB,EAAW,SAAmBA,IAAUA,EAAWhI,EAAMqrB,iBAElD,mBAAPv4B,IAAmBA,EAAKw3B,GAE/BtqB,EAAM0T,MA7CZ,SAAuB6W,EAAQz3B,GAC7B,IAAIg2B,EAAK,IAAI3kD,MAAM,mBAEnBomD,EAAOh8B,KAAK,QAASu6B,GACrB9V,EAAIplB,SAASkF,EAAIg2B,GAyCA0E,CAActqD,KAAM4vB,IAAak6B,GAnCpD,SAAoBzC,EAAQvqB,EAAOmW,EAAOrjB,GACxC,IAAI26B,GAAQ,EACR3E,GAAK,EAYT,OAVc,OAAV3S,EACF2S,EAAK,IAAIv+B,UAAU,uCACO,iBAAV4rB,QAAgC3yC,IAAV2yC,GAAwBnW,EAAMyqB,aACpE3B,EAAK,IAAIv+B,UAAU,oCAEjBu+B,IACFyB,EAAOh8B,KAAK,QAASu6B,GACrB9V,EAAIplB,SAASkF,EAAIg2B,GACjB2E,GAAQ,GAEHA,EAqBoDC,CAAWxqD,KAAM88B,EAAOmW,EAAOrjB,MACxFkN,EAAM4pB,YACN1/C,EAkDJ,SAAuBqgD,EAAQvqB,EAAOgtB,EAAO7W,EAAOnO,EAAUlV,GAC5D,IAAKk6B,EAAO,CACV,IAAIW,EAtBR,SAAqB3tB,EAAOmW,EAAOnO,GAC5BhI,EAAMyqB,aAAsC,IAAxBzqB,EAAMorB,eAA4C,iBAAVjV,IAC/DA,EAAQ/O,EAAOhkC,KAAK+yC,EAAOnO,IAE7B,OAAOmO,EAkBUyX,CAAY5tB,EAAOmW,EAAOnO,GACrCmO,IAAUwX,IACZX,GAAQ,EACRhlB,EAAW,SACXmO,EAAQwX,GAGZ,IAAIrhC,EAAM0T,EAAMyqB,WAAa,EAAItU,EAAMxnC,OAEvCqxB,EAAMrxB,QAAU2d,EAEhB,IAAIpiB,EAAM81B,EAAMrxB,OAASqxB,EAAM4T,cAE1B1pC,IAAK81B,EAAMgrB,WAAY,GAE5B,GAAIhrB,EAAMsrB,SAAWtrB,EAAMurB,OAAQ,CACjC,IAAIzhC,EAAOkW,EAAMosB,oBACjBpsB,EAAMosB,oBAAsB,CAC1BjW,MAAOA,EACPnO,SAAUA,EACVglB,MAAOA,EACPz9B,SAAUuD,EACV22B,KAAM,MAEJ3/B,EACFA,EAAK2/B,KAAOzpB,EAAMosB,oBAElBpsB,EAAMisB,gBAAkBjsB,EAAMosB,oBAEhCpsB,EAAMssB,sBAAwB,OAE9BM,EAAQrC,EAAQvqB,GAAO,EAAO1T,EAAK6pB,EAAOnO,EAAUlV,GAGtD,OAAO5oB,EAtFC2jD,CAAc3qD,KAAM88B,EAAOgtB,EAAO7W,EAAOnO,EAAUlV,IAGpD5oB,GAGTmpC,EAASxwC,UAAUirD,KAAO,WACZ5qD,KAAKuwC,eAEX8X,UAGRlY,EAASxwC,UAAUkrD,OAAS,WAC1B,IAAI/tB,EAAQ98B,KAAKuwC,eAEbzT,EAAMurB,SACRvrB,EAAMurB,SAEDvrB,EAAMsrB,SAAYtrB,EAAMurB,QAAWvrB,EAAMkrB,UAAalrB,EAAMwrB,mBAAoBxrB,EAAMisB,iBAAiBC,EAAYhpD,KAAM88B,KAIlIqT,EAASxwC,UAAUmrD,mBAAqB,SAA4BhmB,GAGlE,GADwB,iBAAbA,IAAuBA,EAAWA,EAASzO,iBAChD,CAAC,MAAO,OAAQ,QAAS,QAAS,SAAU,SAAU,OAAQ,QAAS,UAAW,WAAY,OAAOhD,SAASyR,EAAW,IAAIzO,gBAAkB,GAAI,MAAM,IAAIhP,UAAU,qBAAuByd,GAEpM,OADA9kC,KAAKuwC,eAAe4X,gBAAkBrjB,EAC/B9kC,MAUTvB,OAAOC,eAAeyxC,EAASxwC,UAAW,wBAAyB,CAIjEhB,YAAY,EACZC,IAAK,WACH,OAAOoB,KAAKuwC,eAAeG,iBA8L/BP,EAASxwC,UAAU0pD,OAAS,SAAUpW,EAAOnO,EAAUlV,GACrDA,EAAG,IAAI3uB,MAAM,iCAGfkvC,EAASxwC,UAAU4pD,QAAU,KAE7BpZ,EAASxwC,UAAUoD,IAAM,SAAUkwC,EAAOnO,EAAUlV,GAClD,IAAIkN,EAAQ98B,KAAKuwC,eAEI,mBAAV0C,GACTrjB,EAAKqjB,EACLA,EAAQ,KACRnO,EAAW,MACkB,mBAAbA,IAChBlV,EAAKkV,EACLA,EAAW,MAGTmO,SAAuCjzC,KAAK6+B,MAAMoU,EAAOnO,GAGzDhI,EAAMurB,SACRvrB,EAAMurB,OAAS,EACfroD,KAAK6qD,UAIF/tB,EAAMirB,QAAWjrB,EAAMkrB,UA0C9B,SAAqBX,EAAQvqB,EAAOlN,GAClCkN,EAAMirB,QAAS,EACfY,EAAYtB,EAAQvqB,GAChBlN,IACEkN,EAAMkrB,SAAUlY,EAAIplB,SAASkF,GAASy3B,EAAOp8B,KAAK,SAAU2E,IAElEkN,EAAM0T,OAAQ,EACd6W,EAAOzwB,UAAW,EAjDoBm0B,CAAY/qD,KAAM88B,EAAOlN,IAoEjEnxB,OAAOC,eAAeyxC,EAASxwC,UAAW,YAAa,CACrDf,IAAK,WACH,YAA4B0B,IAAxBN,KAAKuwC,gBAGFvwC,KAAKuwC,eAAeK,WAE7BrlC,IAAK,SAAUvM,GAGRgB,KAAKuwC,iBAMVvwC,KAAKuwC,eAAeK,UAAY5xC,MAIpCmxC,EAASxwC,UAAUmyB,QAAUq1B,EAAYr1B,QACzCqe,EAASxwC,UAAUqrD,WAAa7D,EAAY8D,UAC5C9a,EAASxwC,UAAUkxC,SAAW,SAAUhhB,EAAKD,GAC3C5vB,KAAK+C,MACL6sB,EAAGC,M,uEC3qBL,MAAM0H,EAAI,EAAQ,IAAgBN,aAC5Bi0B,EAAW,EAAQ,KAEzBptD,EAAOD,QAAU,CAEfstD,SAAU5zB,EAAE2zB,EAASz6B,UACrB26B,aAAcF,EAASG,aACvBC,UAAW/zB,EAAE2zB,EAASr6B,WACtB06B,cAAeL,EAASM,gB,8ECkB1B,SAAiBC,GACA,EAAAC,KAAO,OACP,EAAAC,SAAW,WACX,EAAAC,KAAe,OACf,EAAAC,MAAgB,QAChB,EAAAC,OAAiB,SACjB,EAAAC,KAAe,OAKf,EAAAC,UAAoB,WAEpB,EAAAC,OAAiB,SAEjB,EAAAC,SAAmB,UACnB,EAAAC,QAAkB,UAhBnC,CAAiB,EAAAV,UAAA,EAAAA,QAAO,KAmBxB,mCAAwC5lD,GACpC,MAAO,CACHqZ,OAAQrZ,EAAIqZ,OACZ+U,UAAWpuB,EAAIouB,UACf7M,KAAMvhB,EAAIuhB,KAAK9b,WACf4oB,MAAOruB,EAAIquB,MACXC,SAAUtuB,EAAIsuB,Y,8ECnCtB,cAAmBlC,EAAWrqB,GAC1B,IAAKqqB,GAAe,OAARA,EACR,MAAM,IAAIhxB,MAAM2G,EAAU,qBAAqBA,EAAO,IAAM,sB,8ECApE,SAAiBwkD,GACA,EAAA9tD,KAAO,SAEJ,EAAA0yC,MAAhB,SAAyB/L,EAAQhgC,GAE7B,OADAxG,OAAOC,eAAeumC,EAAK,EAAA3mC,KAAM,CAAEU,MAAOiG,EAAItG,YAAY,IAC7BsmC,GAIjB,EAAAonB,GAAhB,SAAmBpnB,GACf,OAAOA,EAAI,EAAA3mC,OAVnB,CAAiB,EAAA8tD,mBAAA,EAAAA,iBAAgB,M,8BCpBjC,Y,2DAMA,SAASv0B,EAAS15B,GACd,IAAK,IAAI0B,KAAK1B,EAAQN,EAAQ+B,eAAeC,KAAIhC,EAAQgC,GAAK1B,EAAE0B,IAEpEpB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAM84B,EAAKC,EAAQ,IACbC,EAAaD,EAAQ,IAC3Bl6B,EAAQo6B,YAAcD,EAAWC,YACjCp6B,EAAQq6B,aAAeF,EAAWE,aAClCr6B,EAAQs6B,aAAeH,EAAWG,aAClCt6B,EAAQu6B,aAAeJ,EAAWI,aAClCv6B,EAAQw6B,aAAeL,EAAWK,aAClCx6B,EAAQy6B,aAAeN,EAAWM,aAClCz6B,EAAQ06B,aAAeP,EAAWO,aAClC16B,EAAQ26B,aAAeR,EAAWQ,aAClC36B,EAAQ46B,aAAeT,EAAWS,aAClC56B,EAAQ66B,aAAeV,EAAWU,aAClC76B,EAAQ86B,aAAeX,EAAWW,aAClC96B,EAAQ+6B,cAAgBZ,EAAWY,cACnC/6B,EAAQg7B,WAAab,EAAWa,WAChCh7B,EAAQi7B,iBAAmBd,EAAWc,iBACtCj7B,EAAQk7B,kBAAoBf,EAAWe,kBACvCl7B,EAAQm7B,kBAAoBhB,EAAWgB,kBACvCn7B,EAAQo7B,kBAAoBjB,EAAWiB,kBACvCp7B,EAAQq7B,kBAAoBlB,EAAWkB,kBACvCr7B,EAAQs7B,kBAAoBnB,EAAWmB,kBACvCt7B,EAAQu7B,kBAAoBpB,EAAWoB,kBACvCv7B,EAAQw7B,kBAAoBrB,EAAWqB,kBACvCx7B,EAAQy7B,kBAAoBtB,EAAWsB,kBACvCz7B,EAAQ07B,kBAAoBvB,EAAWuB,kBACvC17B,EAAQ27B,kBAAoBxB,EAAWwB,kBACvC,IAAMC,EAAkB1B,EAAQ,IAChCl6B,EAAQ67B,cAAgBD,EAAgBC,cACxC77B,EAAQ87B,oBAAsBF,EAAgBE,oBAC9C97B,EAAQ+7B,iBAAmBH,EAAgBG,iBAC3C/7B,EAAQg8B,oBAAsBJ,EAAgBI,oBAC9C,IAAMC,EAAkB/B,EAAQ,IAChCl6B,EAAQk8B,cAAgBD,EAAgBC,cACxCl8B,EAAQm8B,oBAAsBF,EAAgBE,oBAC9Cn8B,EAAQo8B,iBAAmBH,EAAgBG,iBAC3Cp8B,EAAQq8B,oBAAsBJ,EAAgBI,oBAC9C,IAAMC,EAAWpC,EAAQ,IACzBl6B,EAAQsC,WAAag6B,EAASh6B,WAC9BtC,EAAQwiB,MAAQ8Z,EAAS9Z,MACzBxiB,EAAQ0vB,QAAU4M,EAAS5M,QAC3B,IAAM6M,EAAiBrC,EAAQ,KAC/Bl6B,EAAQw8B,wBAA0BD,EAAeC,wBACjDx8B,EAAQy8B,kBAAoBF,EAAeE,kBAC3C,IAGIC,EAIAC,EAPEC,EAAc1C,EAAQ,KAC5BF,EAASE,EAAQ,MACjBF,EAASE,EAAQ,MAEjB,SAAWwC,GACPA,EAAmBnoB,KAAO,IAAI4lB,EAAWc,iBAAiB,mBAD9D,CAEGyB,IAAuBA,EAAqB,KAE/C,SAAWC,GACPA,EAAqBpoB,KAAO,IAAI4lB,EAAWc,iBAAiB,cADhE,CAEG0B,IAAyBA,EAAuB,K,IAa/CE,EAmCAC,EAiBAC,EAIAC,EAIAC,EAnEJj9B,EAAQk9B,aAJJ,aAAc,UACV/6B,KAAKoxC,OAAI9wC,GAIjBzC,EAAQm9B,WAAav8B,OAAO6vB,OAAO,CAC/BtB,MAAO,aACPW,KAAM,aACNxM,KAAM,aACN8Z,IAAK,eAGT,SAAWP,GACPA,EAAMA,EAAK,IAAU,GAAK,MAC1BA,EAAMA,EAAK,SAAe,GAAK,WAC/BA,EAAMA,EAAK,QAAc,GAAK,UAHlC,CAIGA,EAAQ78B,EAAQ68B,QAAU78B,EAAQ68B,MAAQ,KAC7C,SAAWA,GAcPA,EAAMQ,WAbN,SAAoBl8B,GAEhB,OADAA,EAAQA,EAAMq3B,eAEV,IAAK,MACD,OAAOqE,EAAMS,IACjB,IAAK,WACD,OAAOT,EAAMU,SACjB,IAAK,UACD,OAAOV,EAAMW,QACjB,QACI,OAAOX,EAAMS,MAgBzBT,EAAMpvB,SAZN,SAAkBtM,GACd,OAAQA,GACJ,KAAK07B,EAAMS,IACP,MAAO,MACX,KAAKT,EAAMU,SACP,MAAO,WACX,KAAKV,EAAMW,QACP,MAAO,UACX,QACI,MAAO,QAxBvB,CA4BGX,EAAQ78B,EAAQ68B,QAAU78B,EAAQ68B,MAAQ,KAE7C,SAAWC,GACPA,EAAW,KAAW,OACtBA,EAAW,KAAW,OAF1B,CAGiB98B,EAAQ88B,cAAgB98B,EAAQ88B,YAAc,KAC/D,SAAWA,GAUPA,EAAYO,WATZ,SAAoBl8B,GAEhB,MAAc,UADdA,EAAQA,EAAMq3B,eAEHsE,EAAYW,KAGZX,EAAYhf,MAP/B,CAWGgf,EAAc98B,EAAQ88B,cAAgB98B,EAAQ88B,YAAc,KAE/D,SAAWC,GACPA,EAAqBxoB,KAAO,IAAI4lB,EAAWc,iBAAiB,0BADhE,CAEG8B,EAAuB/8B,EAAQ+8B,uBAAyB/8B,EAAQ+8B,qBAAuB,KAE1F,SAAWC,GACPA,EAAqBzoB,KAAO,IAAI4lB,EAAWc,iBAAiB,0BADhE,CAEG+B,EAAuBh9B,EAAQg9B,uBAAyBh9B,EAAQg9B,qBAAuB,KAE1F,SAAWC,GAIPA,EAAiBA,EAAgB,OAAa,GAAK,SAInDA,EAAiBA,EAAgB,SAAe,GAAK,WAIrDA,EAAiBA,EAAgB,iBAAuB,GAAK,mBAZjE,CAaGA,EAAmBj9B,EAAQi9B,mBAAqBj9B,EAAQi9B,iBAAmB,K,IAiB1ES,EAhBEC,E,YACF,WAAYxtB,EAAMpG,GAAS,wBACvB,wBAAMA,KACDoG,KAAOA,EACZvP,OAAOyP,eAAP,KAA4BstB,EAAgB77B,WAHrB,E,mBADDsB,QAuB9B,SAASw6B,EAAyBC,EAAeC,EAAeC,EAAQC,GACpE,IASIC,EAMAC,EAfAC,EAAiB,EACjBC,EAA4B,EAC5BC,EAA+B,EAE/BC,OAAqB77B,EACrB87B,EAAkB39B,OAAOY,OAAO,MAChCg9B,OAA0B/7B,EAC1Bg8B,EAAuB79B,OAAOY,OAAO,MACrCk9B,EAAmB,IAAItwB,IAEvBuwB,EAAe,IAAI/B,EAAYgC,UAC/BC,EAAmBj+B,OAAOY,OAAO,MACjCs9B,EAAgBl+B,OAAOY,OAAO,MAC9Bu9B,EAAQlC,EAAMS,IACd0B,EAAclC,EAAYhf,KAE1BmhB,EAAQvB,EAAgBwB,IACxBC,EAAe,IAAI7C,EAAS5M,QAC5B0P,EAAe,IAAI9C,EAAS5M,QAC5B2P,EAA+B,IAAI/C,EAAS5M,QAC5C4P,EAA2B,IAAIhD,EAAS5M,QACxC6P,EAAiB,IAAIjD,EAAS5M,QAClC,SAAS8P,EAAsBp4B,GAC3B,MAAO,OAASA,EAAGqG,WAavB,SAASgyB,EAAkBxT,EAAOliB,GAXlC,IAAgC3C,EAYxB+yB,EAAWuF,iBAAiB31B,GAC5BkiB,EAAMve,IAAI8xB,EAAsBz1B,EAAQ3C,IAAK2C,GAExCowB,EAAWwF,kBAAkB51B,GAClCkiB,EAAMve,IAfC,QADiBtG,EAgBS2C,EAAQ3C,IAdlC,kBAAoBi3B,GAA8B5wB,WAGlD,OAASrG,EAAGqG,WAW2B1D,GAG9CkiB,EAAMve,IAVH,UAAY0wB,GAA2B3wB,WAUF1D,GAGhD,SAAS61B,EAAmBC,IAG5B,SAASC,IACL,OAAOb,IAAUvB,EAAgBqC,UAErC,SAASC,IACL,OAAOf,IAAUvB,EAAgBuC,OAErC,SAASC,IACL,OAAOjB,IAAUvB,EAAgByC,SAErC,SAASC,IACDnB,IAAUvB,EAAgBwB,KAAOD,IAAUvB,EAAgBqC,YAC3Dd,EAAQvB,EAAgBuC,OACxBb,EAAarP,UAAKttB,IAe1B,SAAS49B,IACDpC,GAA+B,IAAtBU,EAAa2B,OAG1BrC,EAAQsC,GAAa,WACjBtC,OAAQx7B,EAIhB,WACI,GAA0B,IAAtBk8B,EAAa2B,KACb,OAEJ,IAAIv2B,EAAU40B,EAAahK,QAC3B,IACQwF,EAAWuF,iBAAiB31B,GAyCxC,SAAuBy2B,GACnB,GAAIN,IAGA,OAEJ,SAASO,EAAMC,EAAeC,EAAQC,GAClC,IAAI72B,EAAU,CACV82B,QA1II,MA2IJz5B,GAAIo5B,EAAep5B,IAEnBs5B,aAAyBvG,EAAWY,cACpChxB,EAAQolB,MAAQuR,EAAcI,SAG9B/2B,EAAQvF,YAA2B,IAAlBk8B,EAA2B,KAAOA,EAEvDK,EAAqBh3B,EAAS42B,EAAQC,GACtC9C,EAAckD,MAAMj3B,GAExB,SAASk3B,EAAW9R,EAAOwR,EAAQC,GAC/B,IAAI72B,EAAU,CACV82B,QAxJI,MAyJJz5B,GAAIo5B,EAAep5B,GACnB+nB,MAAOA,EAAM2R,UAEjBC,EAAqBh3B,EAAS42B,EAAQC,GACtC9C,EAAckD,MAAMj3B,IAiQ5B,SAA8BA,GAC1B,GAAIg1B,IAAUlC,EAAMS,MAAQY,EACxB,OAEJ,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,SAAWzzB,EAAQm3B,SACnCjO,EAAO,WAAH,OAAcwK,KAAK0D,UAAUp3B,EAAQm3B,OAAQ,KAAM,GAAnD,SAERhD,EAAOd,IAAP,4BAAgCrzB,EAAQ42B,OAAxC,eAAqD52B,EAAQ3C,GAA7D,OAAsE6rB,QAGtEmO,EAAc,kBAAmBr3B,GA7PrCs3B,CAAqBb,GACrB,IACIjsB,EACA+sB,EAFAzzB,EAAU0wB,EAAgBiC,EAAeG,QAGzC9yB,IACA0G,EAAO1G,EAAQ0G,KACf+sB,EAAiBzzB,EAAQ0zB,SAE7B,IAAIX,EAAYY,KAAKC,MACrB,GAAIH,GAAkBhD,EAAoB,CACtC,IAAIoD,EAAqB,IAAInF,EAAeC,wBACxCmF,EAAW5kB,OAAOyjB,EAAep5B,IACrC03B,EAAc6C,GAAYD,EAC1B,IACI,IAAIE,EAgBAC,EAdAD,OAD0B,IAA1BpB,EAAeU,aAA+B,IAAT3sB,GAA2C,IAAxBA,EAAKutB,eAC7CR,EACVA,EAAeI,EAAmBK,OAClCzD,EAAmBkC,EAAeG,OAAQe,EAAmBK,OAE9D9H,EAAGtN,MAAM6T,EAAeU,eAAqB,IAAT3sB,GAAmBA,EAAKutB,eAAiB,GAClER,EACVA,EAAc,WAAd,IAAkBd,EAAeU,QAAjC,QAAyCQ,EAAmBK,SAC5DzD,EAAkB,WAAlB,GAAmBkC,EAAeG,QAAlC,SAA6CH,EAAeU,QAA5D,CAAoEQ,EAAmBK,SAG7ET,EACVA,EAAed,EAAeU,OAAQQ,EAAmBK,OACzDzD,EAAmBkC,EAAeG,OAAQH,EAAeU,OAAQQ,EAAmBK,OAGzFH,EAIIC,EAAQrI,KACbqI,EAAQrI,MAAK,SAACkH,UACH5B,EAAc6C,GACrBlB,EAAMC,EAAeF,EAAeG,OAAQC,MAC7C,SAAAzR,UACQ2P,EAAc6C,GACjBxS,aAAiBgL,EAAWY,cAC5BkG,EAAW9R,EAAOqR,EAAeG,OAAQC,GAEpCzR,GAAS8K,EAAGpzB,OAAOsoB,EAAMplB,SAC9Bk3B,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWgH,cAAnD,kBAA6ExB,EAAeG,OAA5F,iCAA2HxR,EAAMplB,UAAYy2B,EAAeG,OAAQC,GAG/KK,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWgH,cAAnD,kBAA6ExB,EAAeG,OAA5F,wDAA0JH,EAAeG,OAAQC,cAK7L9B,EAAc6C,GACrBlB,EAAMmB,EAAepB,EAAeG,OAAQC,YAtBrC9B,EAAc6C,GA9CjC,SAAsBn9B,EAAQm8B,EAAQC,QAGnB,IAAXp8B,IACAA,EAAS,MAEb,IAAIuF,EAAU,CACV82B,QAtKI,MAuKJz5B,GAAIo5B,EAAep5B,GACnB5C,OAAQA,GAEZu8B,EAAqBh3B,EAAS42B,EAAQC,GACtC9C,EAAckD,MAAMj3B,GAmCZk4B,CAAaL,EAAepB,EAAeG,OAAQC,IAwB3D,MAAOzR,UACI2P,EAAc6C,GACjBxS,aAAiBgL,EAAWY,cAC5B0F,EAAMtR,EAAOqR,EAAeG,OAAQC,GAE/BzR,GAAS8K,EAAGpzB,OAAOsoB,EAAMplB,SAC9Bk3B,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWgH,cAAnD,kBAA6ExB,EAAeG,OAA5F,iCAA2HxR,EAAMplB,UAAYy2B,EAAeG,OAAQC,GAG/KK,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWgH,cAAnD,kBAA6ExB,EAAeG,OAA5F,wDAA0JH,EAAeG,OAAQC,SAKpMK,EAAW,IAAI9G,EAAWY,cAAcZ,EAAWa,WAAWkH,eAAnD,2BAAuF1B,EAAeG,SAAWH,EAAeG,OAAQC,GA1J/IuB,CAAcp4B,GAETowB,EAAWiI,sBAAsBr4B,GAqMlD,SAA4BA,GACxB,GAAIm2B,IAEA,OAEJ,IACImC,EADA9tB,OAAO9R,EAEX,GAAIsH,EAAQ42B,SAAWjE,EAAmBnoB,KAAKosB,OAC3C0B,EAAsB,SAACnB,GACnB,IAAI95B,EAAK85B,EAAO95B,GACZmM,EAASurB,EAAc/hB,OAAO3V,IAC9BmM,GACAA,EAAO+uB,cAId,CACD,IAAIz0B,EAAU4wB,EAAqB10B,EAAQ42B,QACvC9yB,IACAw0B,EAAsBx0B,EAAQ0zB,QAC9BhtB,EAAO1G,EAAQ0G,MAGvB,GAAI8tB,GAAuB7D,EACvB,KAoHR,SAAmCz0B,GAC/B,GAAIg1B,IAAUlC,EAAMS,MAAQY,GAAUn0B,EAAQ42B,SAAW3D,EAAqBzoB,KAAKosB,OAC/E,OAEJ,GAAI3B,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,UAEZvK,EADAlpB,EAAQm3B,OACD,WAAH,OAAczD,KAAK0D,UAAUp3B,EAAQm3B,OAAQ,KAAM,GAAnD,QAGG,+BAGfhD,EAAOd,IAAP,iCAAqCrzB,EAAQ42B,OAA7C,MAAyD1N,QAGzDmO,EAAc,uBAAwBr3B,GApIlCw4B,CAA0Bx4B,QACH,IAAnBA,EAAQm3B,aAA+B,IAAT3sB,GAA2C,IAAxBA,EAAKutB,eACtDO,EAAsBA,IAAwB7D,EAAwBz0B,EAAQ42B,QAEzE1G,EAAGtN,MAAM5iB,EAAQm3B,eAAqB,IAAT3sB,GAAmBA,EAAKutB,eAAiB,GAC3EO,EAAsBA,EAAmB,WAAnB,IAAuBt4B,EAAQm3B,SAAU1C,EAAuB,WAAvB,GAAwBz0B,EAAQ42B,QAAhC,SAA2C52B,EAAQm3B,UAGlHmB,EAAsBA,EAAoBt4B,EAAQm3B,QAAU1C,EAAwBz0B,EAAQ42B,OAAQ52B,EAAQm3B,QAGpH,MAAO/R,GACCA,EAAMplB,QACNg0B,EAAO5O,MAAP,gCAAsCplB,EAAQ42B,OAA9C,kCAA8ExR,EAAMplB,UAGpFg0B,EAAO5O,MAAP,gCAAsCplB,EAAQ42B,OAA9C,gCAKRtB,EAA6BtP,KAAKhmB,GAlP9By4B,CAAmBz4B,GAEdowB,EAAWwF,kBAAkB51B,GAwJ9C,SAAwB04B,GACpB,GAAIvC,IAEA,OAEJ,GAA2B,OAAvBuC,EAAgBr7B,GACZq7B,EAAgBtT,MAChB4O,EAAO5O,MAAP,4DAAkEsO,KAAK0D,UAAUsB,EAAgBtT,WAAO1sB,EAAW,KAGnHs7B,EAAO5O,MAAP,oFAGH,CACD,IAAI1tB,EAAMsb,OAAO0lB,EAAgBr7B,IAC7Bs7B,EAAkB7D,EAAiBp9B,GAEvC,GAyLR,SAA+BsI,EAAS24B,GACpC,GAAI3D,IAAUlC,EAAMS,MAAQY,EACxB,OAEJ,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EAcX,GAbIs8B,IAAUlC,EAAMW,UACZzzB,EAAQolB,OAASplB,EAAQolB,MAAM8D,KAC/BA,EAAO,eAAH,OAAkBwK,KAAK0D,UAAUp3B,EAAQolB,MAAM8D,KAAM,KAAM,GAA3D,QAGAlpB,EAAQvF,OACRyuB,EAAO,WAAH,OAAcwK,KAAK0D,UAAUp3B,EAAQvF,OAAQ,KAAM,GAAnD,aAEmB,IAAlBuF,EAAQolB,QACb8D,EAAO,4BAIfyP,EAAiB,CACjB,IAAIvT,EAAQplB,EAAQolB,MAAR,2BAAoCplB,EAAQolB,MAAMplB,QAAlD,aAA8DA,EAAQolB,MAAMhf,KAA5E,MAAuF,GACnG+tB,EAAOd,IAAP,6BAAiCsF,EAAgB/B,OAAjD,eAA8D52B,EAAQ3C,GAAtE,iBAAiFo6B,KAAKC,MAAQiB,EAAgBC,WAA9G,cAA8HxT,GAAS8D,QAGvIiL,EAAOd,IAAP,4BAAgCrzB,EAAQ3C,GAAxC,qCAA+E6rB,QAInFmO,EAAc,mBAAoBr3B,GAtNlC64B,CAAsBH,EAAiBC,GACnCA,EAAiB,QACV7D,EAAiBp9B,GACxB,IACI,GAAIghC,EAAgBtT,MAAO,CACvB,IAAIA,EAAQsT,EAAgBtT,MAC5BuT,EAAgBpJ,OAAO,IAAIa,EAAWY,cAAc5L,EAAMhf,KAAMgf,EAAMplB,QAASolB,EAAM8D,WAEpF,SAA+B,IAA3BwP,EAAgBj+B,OAIrB,MAAM,IAAIpB,MAAM,wBAHhBs/B,EAAgBtZ,QAAQqZ,EAAgBj+B,SAMhD,MAAO2qB,GACCA,EAAMplB,QACNg0B,EAAO5O,MAAP,4BAAkCuT,EAAgB/B,OAAlD,kCAAkFxR,EAAMplB,UAGxFg0B,EAAO5O,MAAP,4BAAkCuT,EAAgB/B,OAAlD,8BA3LRkC,CAAe94B,GAkP3B,SAA8BA,GAC1B,IAAKA,EAED,YADAg0B,EAAO5O,MAAM,2BAGjB4O,EAAO5O,MAAP,oFAA0FsO,KAAK0D,UAAUp3B,EAAS,KAAM,KAExH,IAAI04B,EAAkB14B,EACtB,GAAIkwB,EAAGpzB,OAAO47B,EAAgBr7B,KAAO6yB,EAAGlzB,OAAO07B,EAAgBr7B,IAAK,CAChE,IAAI3F,EAAMsb,OAAO0lB,EAAgBr7B,IAC7B07B,EAAkBjE,EAAiBp9B,GACnCqhC,GACAA,EAAgBxJ,OAAO,IAAIl2B,MAAM,uEA3PjC2/B,CAAqBh5B,GAX7B,QAeIs2B,KAvBA2C,OAVRnF,EAAcoF,QAAQ7C,GACtBvC,EAAcqF,SAPd,SAA0B/T,GACtBgQ,EAAapP,KAAK,CAACZ,OAAO1sB,OAAWA,OAOzCq7B,EAAcmF,QAAQ7C,GACtBtC,EAAcoF,SANd,SAA2BjQ,GACvBkM,EAAapP,KAAKkD,MAsCtB,IAAIzE,EAAW,SAACzkB,GACZ,IAGI,GAAIowB,EAAWiI,sBAAsBr4B,IAAYA,EAAQ42B,SAAWjE,EAAmBnoB,KAAKosB,OAAQ,CAChG,IAAIl/B,EAAM+9B,EAAsBz1B,EAAQm3B,OAAO95B,IAC3C+7B,EAAWxE,EAAa59B,IAAIU,GAChC,GAAI04B,EAAWuF,iBAAiByD,GAAW,CACvC,IAAIC,EAAWpF,GAAYA,EAAS4B,mBAAqB5B,EAAS4B,mBAAmBuD,EAAUvD,QAAsBA,EACrH,GAAIwD,SAAgC,IAAnBA,EAASjU,YAAwC,IAApBiU,EAAS5+B,QAKnD,OAJAm6B,EAAY,OAAQl9B,GACpB2hC,EAASh8B,GAAK+7B,EAAS/7B,GACvB25B,EAAqBqC,EAAUr5B,EAAQ42B,OAAQa,KAAKC,YACpD3D,EAAckD,MAAMoC,IAKhC3D,EAAkBd,EAAc50B,GAjBpC,QAoBIs2B,MAmOR,SAASgD,EAAoBt5B,GACzB,GAAIg1B,IAAUlC,EAAMS,KAAQY,EAG5B,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,SAAWzzB,EAAQm3B,SACnCjO,EAAO,WAAH,OAAcwK,KAAK0D,UAAUp3B,EAAQm3B,OAAQ,KAAM,GAAnD,SAERhD,EAAOd,IAAP,2BAA+BrzB,EAAQ42B,OAAvC,eAAoD52B,EAAQ3C,GAA5D,OAAqE6rB,QAGrEmO,EAAc,eAAgBr3B,GAGtC,SAASu5B,EAAyBv5B,GAC9B,GAAIg1B,IAAUlC,EAAMS,KAAQY,EAG5B,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,UAEZvK,EADAlpB,EAAQm3B,OACD,WAAH,OAAczD,KAAK0D,UAAUp3B,EAAQm3B,OAAQ,KAAM,GAAnD,QAGG,+BAGfhD,EAAOd,IAAP,gCAAoCrzB,EAAQ42B,OAA5C,MAAwD1N,QAGxDmO,EAAc,oBAAqBr3B,GAG3C,SAASg3B,EAAqBh3B,EAAS42B,EAAQC,GAC3C,GAAI7B,IAAUlC,EAAMS,KAAQY,EAG5B,GAAIc,IAAgBlC,EAAYhf,KAAM,CAClC,IAAImV,OAAOxwB,EACPs8B,IAAUlC,EAAMW,UACZzzB,EAAQolB,OAASplB,EAAQolB,MAAM8D,KAC/BA,EAAO,eAAH,OAAkBwK,KAAK0D,UAAUp3B,EAAQolB,MAAM8D,KAAM,KAAM,GAA3D,QAGAlpB,EAAQvF,OACRyuB,EAAO,WAAH,OAAcwK,KAAK0D,UAAUp3B,EAAQvF,OAAQ,KAAM,GAAnD,aAEmB,IAAlBuF,EAAQolB,QACb8D,EAAO,4BAInBiL,EAAOd,IAAP,4BAAgCuD,EAAhC,eAA6C52B,EAAQ3C,GAArD,uCAAsFo6B,KAAKC,MAAQb,EAAnG,MAAkH3N,QAGlHmO,EAAc,gBAAiBr3B,GAqEvC,SAASq3B,EAAc7sB,EAAMxK,GACzB,GAAKm0B,GAAUa,IAAUlC,EAAMS,IAA/B,CAGA,IAAMiG,EAAa,CACfC,cAAc,EACdjvB,OACAxK,UACA05B,UAAWjC,KAAKC,OAEpBvD,EAAOd,IAAImG,IAEf,SAASG,KACL,GAAI1D,IACA,MAAM,IAAIrC,EAAgBV,EAAiBgD,OAAQ,yBAEvD,GAAIC,IACA,MAAM,IAAIvC,EAAgBV,EAAiBkD,SAAU,2BAQ7D,SAASwD,KACL,IAAK7D,IACD,MAAM,IAAI18B,MAAM,wBAGxB,SAASwgC,GAAgBC,GACrB,YAAc,IAAVA,EACO,KAGAA,EAGf,SAASC,GAAqBvvB,EAAM2sB,GAChC,IAAI18B,EACAs9B,EAAiBvtB,EAAKutB,eAC1B,OAAQA,GACJ,KAAK,EACDt9B,EAAS,KACT,MACJ,KAAK,EACDA,EAASo/B,GAAgB1C,EAAO,IAChC,MACJ,QACI18B,EAAS,GACT,IAAK,IAAItE,EAAI,EAAGA,EAAIghC,EAAOtzB,QAAU1N,EAAI4hC,EAAgB5hC,IACrDsE,EAAO0I,KAAK02B,GAAgB1C,EAAOhhC,KAEvC,GAAIghC,EAAOtzB,OAASk0B,EAChB,IAAK,IAAI5hC,EAAIghC,EAAOtzB,OAAQ1N,EAAI4hC,EAAgB5hC,IAC5CsE,EAAO0I,KAAK,MAK5B,OAAO1I,EAEX,IAAIu/B,GAAa,CACbC,iBAAkB,SAACzvB,GAEf,IAAIosB,EACAsD,EAFJP,KADmC,2BAAXxC,EAAW,iCAAXA,EAAW,kBAInC,GAAIjH,EAAGpzB,OAAO0N,GAEV,OADAosB,EAASpsB,EACD2sB,EAAOtzB,QACX,KAAK,EACDq2B,EAAgB,KAChB,MACJ,KAAK,EACDA,EAAgB/C,EAAO,GACvB,MACJ,QACI+C,EAAgB/C,OAKxBP,EAASpsB,EAAKosB,OACdsD,EAAgBH,GAAqBvvB,EAAM2sB,GAE/C,IAAIgD,EAAsB,CACtBrD,QAtjBI,MAujBJF,OAAQA,EACRO,OAAQ+C,GAEZX,EAAyBY,GACzBpG,EAAckD,MAAMkD,IAExBC,eAAgB,SAAC5vB,EAAMgtB,GACnBmC,KACIzJ,EAAG/3B,KAAKqS,GACRiqB,EAA0BjqB,EAErBgtB,IACDtH,EAAGpzB,OAAO0N,GACVkqB,EAAqBlqB,GAAQ,CAAEA,UAAM9R,EAAW8+B,WAGhD9C,EAAqBlqB,EAAKosB,QAAU,CAAEpsB,OAAMgtB,aAIxD6C,WAAY,SAACj3B,EAAO40B,EAAOR,GACvB,GAAI7C,EAAiBlxB,IAAIu0B,GACrB,MAAM,IAAI3+B,MAAJ,qCAAwC2+B,EAAxC,wBAGV,OADArD,EAAiBhxB,IAAIq0B,EAAOR,GACrB,CACH/+B,QAAS,WACLk8B,EAAgB,OAAQqD,MAIpCsC,aAAc,SAACl3B,EAAO40B,EAAO5gC,GACzB4iC,GAAWC,iBAAiBrH,EAAqBpoB,KAAM,CAAEwtB,QAAO5gC,WAEpEmjC,oBAAqBhF,EAAyBpR,MAC9CqW,YAAa,SAAChwB,GAGV,IAAIosB,EACAsD,EAHJP,KACAC,KAF8B,IAK9B,IAAI5B,OAAQt/B,EALkB,mBAAXy+B,EAAW,iCAAXA,EAAW,kBAM9B,GAAIjH,EAAGpzB,OAAO0N,GAEV,OADAosB,EAASpsB,EACD2sB,EAAOtzB,QACX,KAAK,EACDq2B,EAAgB,KAChB,MACJ,KAAK,EAEG1H,EAAeE,kBAAkBvqB,GAAGgvB,EAAO,KAC3C+C,EAAgB,KAChBlC,EAAQb,EAAO,IAGf+C,EAAgBL,GAAgB1C,EAAO,IAE3C,MACJ,QACI,IAAMnY,EAAOmY,EAAOtzB,OAAS,EACzB2uB,EAAeE,kBAAkBvqB,GAAGgvB,EAAOnY,KAC3CgZ,EAAQb,EAAOnY,GAEXkb,EADkB,IAAlB/C,EAAOtzB,OACSg2B,GAAgB1C,EAAO,IAGvBA,EAAOjX,MAAM,EAAGlB,GAAM3M,KAAI,SAAAjb,GAAK,OAAIyiC,GAAgBziC,OAIvE8iC,EAAgB/C,EAAO9kB,KAAI,SAAAjb,GAAK,OAAIyiC,GAAgBziC,UAK/D,CACDw/B,EAASpsB,EAAKosB,OACdsD,EAAgBH,GAAqBvvB,EAAM2sB,GAC3C,IAAIY,EAAiBvtB,EAAKutB,eAC1BC,EAAQxF,EAAeE,kBAAkBvqB,GAAGgvB,EAAOY,IAAmBZ,EAAOY,QAAkBr/B,EAEnG,IAAI2E,EAAK+2B,IACL35B,EAAS,IAAIksB,SAAQ,SAACtH,EAASkQ,GAC/B,IAAIkH,EAAiB,CACjBK,QA1oBA,MA2oBAz5B,GAAIA,EACJu5B,OAAQA,EACRO,OAAQ+C,GAERvB,EAAkB,CAAE/B,OAAQA,EAAQgC,WAAYnB,KAAKC,MAAOrY,UAASkQ,UACzE+J,EAAoB7C,GACpB,IACI1C,EAAckD,MAAMR,GAExB,MAAOzyB,GAEH20B,EAAgBpJ,OAAO,IAAIa,EAAWY,cAAcZ,EAAWa,WAAWwJ,kBAAmBz2B,EAAEhE,QAAUgE,EAAEhE,QAAU,mBACrH24B,EAAkB,KAElBA,IACA7D,EAAiB9hB,OAAO3V,IAAOs7B,MAQvC,OALIX,GACAA,EAAM0C,yBAAwB,WAC1BV,GAAWC,iBAAiBtH,EAAmBnoB,KAAM,CAAEnN,UAGxD5C,GAEXkgC,UAAW,SAACnwB,EAAMgtB,GACdmC,KACIzJ,EAAG/3B,KAAKqS,GACR+pB,EAAqB/pB,EAEhBgtB,IACDtH,EAAGpzB,OAAO0N,GACVgqB,EAAgBhqB,GAAQ,CAAEA,UAAM9R,EAAW8+B,WAG3ChD,EAAgBhqB,EAAKosB,QAAU,CAAEpsB,OAAMgtB,aAInDxC,MAAO,SAAC4F,EAAQC,EAASC,GACrB,IAAIC,GAAoB,EACpBC,EAAejI,EAAYhf,UACQ,IAAnC+mB,IACI5K,EAAE,QAAS4K,GACXC,EAAoBD,GAGpBC,EAAoBD,EAA+Bb,mBAAoB,EACvEe,EAAeF,EAA+B7F,aAAelC,EAAYhf,OAIjFkhB,EAAc+F,EAEV7G,GAHJa,EAAQ4F,KAEM9H,EAAMS,SACP76B,EAGAmiC,GAETE,GAAsB9E,KAAeE,KACrC6D,GAAWC,iBAAiBjH,EAAqBxoB,KAAM,CAAEpT,MAAO07B,EAAMpvB,SAASk3B,MAGvFzB,QAAS/D,EAAajR,MACtB+U,QAAS7D,EAAalR,MACtB8W,wBAAyB3F,EAA6BnR,MACtD+W,UAAW1F,EAAerR,MAC1B1rB,QAAS,WACL,IAAI09B,IAAJ,CAGAjB,EAAQvB,EAAgByC,SACxBZ,EAAexP,UAAKttB,GACpB,IAAI0sB,EAAQ,IAAI/rB,MAAM,4BACtBxC,OAAOskC,KAAKrG,GAAkBvwB,SAAQ,SAAC7M,GACnCo9B,EAAiBp9B,GAAK63B,OAAOnK,MAEjC0P,EAAmBj+B,OAAOY,OAAO,MACjCs9B,EAAgBl+B,OAAOY,OAAO,MAC9Bm9B,EAAe,IAAI/B,EAAYgC,UAE3B3E,EAAG/3B,KAAK47B,EAAct7B,UACtBs7B,EAAct7B,UAEdy3B,EAAG/3B,KAAK27B,EAAcr7B,UACtBq7B,EAAcr7B,YAGtB2iC,OAAQ,WACJzB,KAhPR,WACI,GAAI5D,IACA,MAAM,IAAInC,EAAgBV,EAAiBmI,iBAAkB,mCA+O7DC,GACApG,EAAQvB,EAAgBqC,UACxBlC,EAAcsH,OAAO3W,IAEzB8W,QAAS,WACLpW,QAAQkO,IAAI,aAkBpB,OAfA2G,GAAWI,eAAenH,EAAqBzoB,MAAM,SAAC2sB,GAC9CnC,IAAUlC,EAAMS,KAAQY,GAG5BA,EAAOd,IAAI8D,EAAOn3B,QAASg1B,IAAUlC,EAAMW,QAAU0D,EAAOqE,aAAU9iC,MAE1EshC,GAAWI,eAAexH,EAAqBpoB,MAAM,SAAC2sB,GAClD,IAAMK,EAAU7C,EAAiB39B,IAAImgC,EAAOa,OACxCR,EACAA,EAAQL,EAAO//B,OAGfm+B,EAAyBvP,KAAKmR,MAG/B6C,GAhxBX/jC,EAAQ29B,gBAAkBA,EAE1B,SAAW6H,GAKPA,EAAmBtzB,GAJnB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,GAAagsB,EAAG/3B,KAAK+L,EAAU2xB,qBAH9C,CAMwB5/B,EAAQwlC,qBAAuBxlC,EAAQwlC,mBAAqB,KAEpF,SAAW9H,GACPA,EAAgBA,EAAe,IAAU,GAAK,MAC9CA,EAAgBA,EAAe,UAAgB,GAAK,YACpDA,EAAgBA,EAAe,OAAa,GAAK,SACjDA,EAAgBA,EAAe,SAAe,GAAK,WAJvD,CAKGA,IAAoBA,EAAkB,KAixBzC19B,EAAQylC,wBARR,SAAiCC,EAAOC,EAAQ5H,EAAQC,GAIpD,IAVqB78B,EAYrB,OALK48B,IACDA,EAAS/9B,EAAQm9B,YAIdS,OAXiB,KADHz8B,EAUQukC,GAThBP,aAAoC,IAAfhkC,EAAM+yB,KASFwR,EAAQ,IAAI9J,EAAgBE,oBAAoB4J,GAP1F,SAAyBvkC,GACrB,YAAuB,IAAhBA,EAAM6/B,YAAkC,IAAd7/B,EAAM+D,IAO1B0gC,CAAgBD,GAAUA,EAAS,IAAI1J,EAAgBE,oBAAoBwJ,GACxC5H,EAAQC,M,4TCn6B5D,YACA,QACA,OACA,QACA,QACA,OAOa,EAAAywB,YAAcxtD,OAAO,eAclC,MAEI,SAA4BytD,EAAiBtnD,GAAjB,KAAAsnD,SAExBvsD,KAAKiF,GAAMA,EAAWqG,YAJjB,EAAAkhD,kBAQb,iCAAyCC,GACrC,OAAO,IAAID,GAAgB,EAAOC,IAGtC,iBAcI,WAAY7qB,EAAwC8qB,GAApD,WAAoD,KAAAA,eAZnC,KAAAC,OAAS,IAAI1gD,IACb,KAAA2gD,QAAU,IAAI3gD,IACvB,KAAA4gD,cAAgB,EACP,KAAAC,yBAA2B,IAAI7gD,IAC/B,KAAA8gD,kBAAoB,IAAI9gD,IAIxB,KAAAijC,UAAY,IAAI,EAAAM,qBAC7B,EAAArvC,WAAWd,QAAO,gBAIlBW,KAAKkvC,UAAUnkC,KACX/K,KAAKgtD,YAAc,IAAIC,EAAerrB,GAAY,SAAA2S,GAAO,SAAK2Y,kBAAkB3Y,KAAMmY,IAE1F1sD,KAAKkvC,UAAUnkC,KAAK,EAAA5K,WAAWd,QAAO,W,QAClC,EAAKutD,QAAQ7O,Q,IACb,IAAoB,UAAKgP,kBAAkBI,UAAQ,8BAAE,CAArC,QACNh2B,OAAO,IAAIl2B,MAAM,0B,iGAE3B,EAAK8rD,kBAAkBhP,YAyLnC,OArLI,sBAAY,yBAAU,C,IAAtB,WACI,OAAO/9C,KAAKkvC,UAAUE,U,gCAG1B,YAAA/uC,QAAA,WACIL,KAAKkvC,UAAU7uC,WAGnB,YAAA+sD,SAAA,SAAYC,GACR,GAAIrtD,KAAK+9B,WACL,MAAM,IAAI98B,MAAM,wBAEpB,IAAIqsD,EAAQttD,KAAK4sD,QAAQhuD,IAAIyuD,EAAQpoD,IAKrC,OAJKqoD,IACDA,EAAQttD,KAAKutD,YAAYF,EAAQpoD,IACjCjF,KAAK4sD,QAAQrhD,IAAI8hD,EAAQpoD,GAAIqoD,IAE1BA,GAGX,YAAA/hD,IAAA,SAAoBkhD,EAAgC/9B,GAApD,WACI,GAAI1uB,KAAK+9B,WACL,MAAM,IAAI98B,MAAM,wBAOpB,OALAjB,KAAK2sD,OAAOphD,IAAIkhD,EAAWxnD,GAAIypB,GAC3B,EAAAvuB,WAAW4P,GAAG2e,IACd1uB,KAAKkvC,UAAUnkC,KAAK2jB,GAExB1uB,KAAKkvC,UAAUnkC,KAAK,EAAA5K,WAAWd,QAAO,WAAM,SAAKstD,OAAO9lD,OAAO4lD,EAAWxnD,QACnEypB,GAGH,YAAA6+B,YAAR,SAAuBF,GAAvB,WACUjuB,EAAU,CACZxgC,IAAK,SAACwK,EAAa9K,GAKf,OAJK8K,EAAO9K,IAAgC,KAAvBA,EAAKoqB,WAAW,KACjCtf,EAAO9K,GAAQ,W,IAAC,sDACZ,SAAKkvD,WAAWH,EAAS/uD,EAAMmvD,KAEhCrkD,EAAO9K,KAItB,OAAO,IAAIovD,MAAMjvD,OAAOY,OAAO,MAAO+/B,IAGlC,YAAAouB,WAAR,SAAmBH,EAAiBM,EAAoBp8C,GAAxD,WACI,GAAIvR,KAAK+9B,WACL,OAAOxP,QAAQ4I,OAAO,IAAIl2B,MAAM,yBAEpC,IAsIE+rB,EAtII4gC,EAAmDr8C,EAAK9F,QAAU,EAAA6uB,kBAAkBvqB,GAAGwB,EAAKA,EAAK9F,OAAS,IAAM8F,EAAKhP,WAAQjC,EACnI,GAAIstD,GAAqBA,EAAkB3V,wBACvC,OAAO1pB,QAAQ4I,SAoIjBnK,EAAQ,IAAI/rB,MAAM,aAClB3C,KAAO0uB,EAAMplB,QACZolB,IAnIH,IAAM6gC,EAASjzC,SAAS5a,KAAK6sD,eACvBxqD,EAAS,IAAI,EAAAwvC,SAWnB,OATI+b,IACAr8C,EAAKxG,KAAK,0BACV6iD,EAAkBtrB,yBAAwB,WACtC,SAAK0qB,YAAY5X,KAAK0Y,EAAe3tB,OAAO0tB,EAAQ,EAAKE,0BAIjE/tD,KAAK+sD,kBAAkBxhD,IAAIsiD,EAAQxrD,GACnCrC,KAAKgtD,YAAY5X,KAAK0Y,EAAeE,QAAQH,EAAQR,EAASM,EAAYp8C,EAAMvR,KAAK+tD,sBAC9E1rD,EAAOq9B,SAGV,YAAAwtB,kBAAR,SAA0Be,GACtB,IAAIjuD,KAAK+9B,WAAT,CAIA,IAAMwW,EAAkBjZ,KAAKpY,MAAM+qC,EAAQC,EAAmBC,SAG9D,GAAU5Z,EAAK6Z,UACXpuD,KAAK+tD,oBAA4BxZ,EAAK6Z,eAK1C,IAAIpuD,KAAK0sD,eAAsBnY,EAAK8Z,QAAUruD,KAAK0sD,eAAuBnY,EAAK8Z,OAI/E,OAAQ9Z,EAAIniC,MACR,KAAK,EACDpS,KAAKsuD,eAAe/Z,GACpB,MACJ,KAAK,EACDv0C,KAAKuuD,aAAaha,GAClB,MACJ,KAAK,EACDv0C,KAAKwuD,gBAAgBja,GACrB,MACJ,KAAK,EACDv0C,KAAKyuD,cAAcla,MAKvB,YAAAka,cAAR,SAAsBla,GAClB,IAAMma,EAA0B1uD,KAAK8sD,yBAAyBluD,IAAI21C,EAAItvC,IAClEypD,GACAA,EAAwBvuB,UAIxB,YAAAmuB,eAAR,SAAuB/Z,GAAvB,WACUsZ,EAAStZ,EAAItvC,GACbooD,EAAU9Y,EAAI8Y,QAEd97C,EAAOgjC,EAAIhjC,KAAK0I,KAAI,SAAApK,GAAO,OAAQ,OAARA,OAAevP,EAAYuP,KAG5D,MADiB0B,EAAK9F,QAAoC,2BAA1B8F,EAAKA,EAAK9F,OAAS,KAAkC8F,EAAKhP,MAC5E,CACV,IAAMosD,EAAc,IAAI,EAAAt0B,wBACxBr6B,KAAK8sD,yBAAyBvhD,IAAIsiD,EAAQc,GAC1Cp9C,EAAKxG,KAAK4jD,EAAY/uB,OAEP5/B,KAAK4uD,cAAcvB,EAAS9Y,EAAI/V,OAAQjtB,GAEhD8lB,MAAK,SAAAh1B,GACZ,EAAKyqD,yBAAyBjmD,OAAOgnD,GACrC,EAAKb,YAAY5X,KAAK0Y,EAAee,QAAQhB,EAAQxrD,EAAQ,EAAK0rD,yBACnE,SAAA/gC,GACC,EAAK8/B,yBAAyBjmD,OAAOgnD,GACrC,EAAKb,YAAY5X,KAAK0Y,EAAegB,SAASjB,EAAQ7gC,EAAO,EAAK+gC,0BAIlE,YAAAQ,aAAR,SAAqBha,GACjB,IAAMsZ,EAAStZ,EAAItvC,GACb8pD,EAAe/uD,KAAK+sD,kBAAkBnuD,IAAIivD,GAC3CkB,IAGL/uD,KAAK+sD,kBAAkBlmD,OAAOgnD,GAC9BkB,EAAa9nC,QAAQstB,EAAI1oC,OAGrB,YAAA2iD,gBAAR,SAAwBja,GACpB,IAAMsZ,EAAStZ,EAAItvC,GACb8pD,EAAe/uD,KAAK+sD,kBAAkBnuD,IAAIivD,GAChD,GAAKkB,EAAL,CAGA/uD,KAAK+sD,kBAAkBlmD,OAAOgnD,GAE9B,IAAIh+B,OAAyBvvB,EACzBi0C,EAAI1kB,KAAO0kB,EAAI1kB,IAAIm/B,YACnBn/B,EAAM,IAAI5uB,OACN3C,KAAOi2C,EAAI1kB,IAAIvxB,KACnBuxB,EAAIjoB,QAAU2sC,EAAI1kB,IAAIjoB,QACtBioB,EAAIo/B,MAAQ1a,EAAI1kB,IAAIo/B,OAExBF,EAAa53B,OAAOtH,KAGhB,YAAA++B,cAAR,SAAsBvB,EAAiBM,EAAoBp8C,GACvD,IACI,OAAOgd,QAAQtH,QAAQjnB,KAAKkvD,gBAAgB7B,EAASM,EAAYp8C,IACnE,MAAOse,GACL,OAAOtB,QAAQ4I,OAAOtH,KAItB,YAAAq/B,gBAAR,SAAwB7B,EAAiBM,EAAoBp8C,GACzD,IAAM49C,EAAQnvD,KAAK2sD,OAAO/tD,IAAIyuD,GAC9B,IAAK8B,EACD,MAAM,IAAIluD,MAAM,iBAAmBosD,GAEvC,IAAM7uB,EAAS2wB,EAAMxB,GACrB,GAAsB,mBAAXnvB,EACP,MAAM,IAAIv9B,MAAM,kBAAoB0sD,EAAa,aAAeN,GAEpE,OAAO7uB,EAAO7T,MAAMwkC,EAAO59C,IAEnC,EAhNA,GAAa,EAAA69C,kBA6Nb,IAwGUlB,EAiELmB,EAzKL,aASI,WAAYztB,EAA+B0tB,EAAkCC,GAA7E,WAFiB,KAAArgB,UAAY,IAAI,EAAAM,qBAG7BxvC,KAAK4hC,WAAaA,EAClB5hC,KAAKwvD,qBAAuBxvD,KAAKyvD,gBAAgBlwD,KAAKS,MAEtDA,KAAKkvC,UAAUnkC,KAAK,EAAA5K,WAAWd,QAAO,WAAM,SAAKqwD,eAAiB,OAClE1vD,KAAKkvC,UAAUnkC,KAAK/K,KAAK4hC,WAAW0tB,WAAU,SAACx+B,GAE3C,IADA,IAAM1H,EAAM0H,EAAKrlB,OACR1N,EAAI,EAAGA,EAAIqrB,EAAKrrB,IACrBuxD,EAAUx+B,EAAK/yB,QAIvBiC,KAAK0vD,eAAiB,GAClBH,GACAvvD,KAAKo1C,KAAK,iBAAiBma,EAAY,MA2BnD,OAvBI,YAAAlvD,QAAA,WACIL,KAAKkvC,UAAU7uC,WAGX,YAAAovD,gBAAR,WACI,IAAME,EAAM3vD,KAAK0vD,eACjB1vD,KAAK0vD,eAAiB,GACtB1vD,KAAK4hC,WAAWwT,KAAKua,IAGlB,YAAAva,KAAP,SAAYb,GACR,GAAIv0C,KAAKkvC,UAAUE,SACf,MAAM,IAAInuC,MAAM,wBAEe,IAA/BjB,KAAK0vD,eAAejkD,cACQ,IAAjB2yB,EACPA,EAAap+B,KAAKwvD,sBAElB7lC,WAAW3pB,KAAKwvD,qBAAsB,IAG9CxvD,KAAK0vD,eAAe3kD,KAAKwpC,IAEjC,EAlDA,GAoDA,2BAwCA,OAtCW,EAAApU,OAAP,SAAcyvB,EAAa7B,GACvB,IAAI8B,EAAS,GAIb,OAHI9B,IACA8B,EAAS,aAAa9B,EAAmB,MAEtC,IAAI8B,EAAM,kBAAsCD,EAAG,MAGhD,EAAA5B,QAAd,SAAsB4B,EAAaE,EAAetxB,EAAgBjtB,EAAaw8C,GAC3E,IAAI8B,EAAS,GAIb,OAHI9B,IACA8B,EAAS,aAAa9B,EAAmB,MAEtC,IAAI8B,EAAM,kBAAuCD,EAAG,gBAAgBE,EAAK,eAAetxB,EAAM,YAAYlD,KAAK0D,UAAUztB,EAAM28C,EAAmB6B,UAAS,KAGxJ,EAAAlB,QAAd,SAAsBe,EAAa/jD,EAAUkiD,GACzC,IAAI8B,EAAS,GAIb,OAHI9B,IACA8B,EAAS,aAAa9B,EAAmB,WAE1B,IAARliD,EACA,IAAIgkD,EAAM,kBAAqCD,EAAG,KAEtD,IAAIC,EAAM,kBAAqCD,EAAG,WAAWt0B,KAAK0D,UAAUnzB,EAAKqiD,EAAmB6B,UAAS,KAG1G,EAAAjB,SAAd,SAAuBc,EAAa//B,EAAUk+B,GAC1C,IAAI8B,EAAS,GAKb,OAJI9B,IACA8B,EAAS,aAAa9B,EAAmB,OAE7Cl+B,EAAqB,iBAARA,EAAmB,IAAI5uB,MAAM4uB,GAAOA,aAC9B5uB,MACR,IAAI4uD,EAAM,kBAAwCD,EAAG,WAAWt0B,KAAK0D,UAAUgxB,EAA+BngC,IAAK,IAEvH,IAAIggC,EAAM,kBAAwCD,EAAG,iBAEpE,EAxCA,IAoDA,SAAU1B,GAGU,EAAA6B,SAAhB,SAAyBzwD,EAAyBN,GAC9C,GAAIA,aAAiB,UACjB,MAAO,CACHixD,MAAOZ,EAAqBa,UAC5Bp/B,KAAM9xB,EAAMsM,YAEb,GAAItM,aAAiB,EAAAoE,MAAO,CAC/B,IAAMgD,EAAQpH,EACRmxD,EAAkB,CACpBrtD,MAAO,CACH/B,KAAMqF,EAAMtD,MAAM/B,KAClBkB,UAAWmE,EAAMtD,MAAMb,WAE3Bc,IAAK,CACDhC,KAAMqF,EAAMrD,IAAIhC,KAChBkB,UAAWmE,EAAMrD,IAAId,YAG7B,MAAO,CACHguD,MAAOZ,EAAqBe,YAC5Bt/B,KAAMwK,KAAK0D,UAAUmxB,IAEtB,GAAInxD,GAA2B,IAAlBA,EAAY,KAAS,CAGrC,IAAM6G,EAAM,UAAUgd,OAAO7jB,GAC7B,MAAO,CACHixD,MAAOZ,EAAqBgB,WAC5Bv/B,KAAMjrB,EAAIyF,YAIlB,OAAOtM,GAIK,EAAAmvD,QAAhB,SAAwB7uD,EAAyBN,GAC7C,GA+BR,SAA4BimC,GACxB,OAAOA,QAAqB3kC,IAAd2kC,EAAIgrB,YAAoC3vD,IAAb2kC,EAAInU,KAhCrCw/B,CAAmBtxD,GACnB,OAAQA,EAAMixD,OACV,KAAKZ,EAAqBa,UACtB,OAAO,IAAI,UAAIlxD,EAAM8xB,MACzB,KAAKu+B,EAAqBgB,WACtB,OAAO,UAAUntC,MAAMlkB,EAAM8xB,MACjC,KAAKu+B,EAAqBe,YAEtB,IAAMnrB,EAAW3J,KAAKpY,MAAMlkB,EAAM8xB,MAC5BhuB,EAAQ,IAAI,EAAAd,SAASijC,EAAIniC,MAAM/B,KAAMkkC,EAAIniC,MAAMb,WAC/Cc,EAAM,IAAI,EAAAf,SAASijC,EAAIliC,IAAIhC,KAAMkkC,EAAIliC,IAAId,WAC/C,OAAO,IAAI,EAAAmB,MAAMN,EAAOC,GAIpC,OAAO/D,GAvDf,CAAUkvD,MAAkB,KAiE5B,SAAKmB,GACD,6BACA,+BACA,iCAHJ,CAAKA,MAAoB,KAmDzB,SAAgBW,EAA+BhjC,GAC3C,OAAIA,aAAiB/rB,MAGV,CACH+tD,UAAU,EACV1wD,KAJI,EAAAA,KAKJsJ,QALU,EAAAA,QAMVqnD,MALwBjiC,EAAOujC,YAAcvjC,EAAMiiC,OAUpDjiC,EAbX,qC,qVCxeA,WACA,OACA,QAGA,EAAA0G,4BAA2B,GAE3B,iBAKI,WAAY7tB,QAAA,IAAAA,MAAA,IACJA,aAAe,UACf7F,KAAKwwD,QAAU3qD,EAEf7F,KAAKwwD,QAAU,UAAIttC,MAAMrd,GAsLrC,OAlLI,sBAAI,0BAAW,C,IAAf,WACI,IAAMH,EAAO1F,KAAKonB,KAAK1hB,KACvB,OAAIA,IAGA1F,KAAKonB,KAAKizB,OACHr6C,KAAKonB,KAAK9b,WAEd,K,gCAMX,sBAAI,2BAAY,C,IAAhB,WAGI,IAFA,IAAMmlD,EAAY,GACd9oD,EAAgB3H,MACZ2H,EAASyf,KAAKizB,QAAU1yC,EAASyf,KAAK0zB,QAC1C2V,EAAU1lD,KAAKpD,GACfA,EAAWA,EAASy3C,OAGxB,OADAqR,EAAU1lD,KAAKpD,GACR8oD,G,gCAGX,sBAAI,qBAAM,C,IAAV,WACI,OAAIzwD,KAAKonB,KAAKizB,OACHr6C,KAEJA,KAAK0wD,SAAS1wD,KAAKonB,KAAKuE,M,gCAGnC,YAAA1lB,SAAA,SAASJ,GACL,GAAI7F,KAAKi0B,YAAcpuB,EAAIouB,WAAaj0B,KAAKkf,SAAWrZ,EAAIqZ,OAG5D,OAAOlf,KAAKonB,KAAKnhB,SAASJ,EAAIuhB,OAGlC,YAAAH,QAAA,SAAQG,GACJ,OAAOpnB,KAAK0wD,SAAS1wD,KAAKonB,KAAKI,KAAKJ,EAAK9b,cAM7C,YAAAqlD,WAAA,SAAWzxC,GAKP,OAAO,IAAI6U,EAJQ,UAAI7zB,KAAK,EAAD,GACpBF,KAAKwwD,QAAQlkD,SAAQ,CACxB4S,OAAM,OAQd,YAAA0xC,cAAA,SAAc38B,GAMV,OAAO,IAAIF,EALQ,UAAI7zB,KAAK,EAAD,GACpBF,KAAKwwD,QAAQlkD,SAAQ,CACxB4S,OAAQlf,KAAKwwD,QAAQtxC,OACrB+U,UAAS,OAQjB,YAAA48B,iBAAA,WACI,OAAO7wD,KAAK4wD,cAAc,KAM9B,YAAAF,SAAA,SAAStpC,GAML,OAAO,IAAI2M,EALQ,UAAI7zB,KAAK,EAAD,GACpBF,KAAKwwD,QAAQlkD,SAAQ,CACxB4S,OAAQlf,KAAKwwD,QAAQtxC,OACrBkI,KAAMA,EAAK9b,gBAQnB,YAAAwlD,YAAA,WACI,OAAO9wD,KAAK0wD,SAAS,KAMzB,YAAAK,UAAA,SAAU78B,GAMN,OAAO,IAAIH,EALQ,UAAI7zB,KAAK,EAAD,GACpBF,KAAKwwD,QAAQlkD,SAAQ,CACxB4S,OAAQlf,KAAKwwD,QAAQtxC,OACrBgV,MAAK,OAQb,YAAA88B,aAAA,WACI,OAAOhxD,KAAK+wD,UAAU,KAM1B,YAAAE,aAAA,SAAa98B,GAMT,OAAO,IAAIJ,EALQ,UAAI7zB,KAAK,EAAD,GACpBF,KAAKwwD,QAAQlkD,SAAQ,CACxB4S,OAAQlf,KAAKwwD,QAAQtxC,OACrBiV,SAAQ,OAQhB,YAAA+8B,gBAAA,WACI,OAAOlxD,KAAKixD,aAAa,KAM7B,YAAAE,cAAA,WACI,OAAOnxD,KAAK0wD,SAAS1wD,KAAKonB,KAAKK,cAGnC,sBAAI,qBAAM,C,IAAV,WACI,OAAOznB,KAAKwwD,QAAQtxC,Q,gCAGxB,sBAAI,wBAAS,C,IAAb,WACI,OAAOlf,KAAKwwD,QAAQv8B,W,gCAGxB,sBAAI,mBAAI,C,IAAR,WAII,YAHmB3zB,IAAfN,KAAKoxD,QACLpxD,KAAKoxD,MAAQ,IAAI,EAAApX,KAAKh6C,KAAKwwD,QAAQppC,OAEhCpnB,KAAKoxD,O,gCAGhB,sBAAI,oBAAK,C,IAAT,WACI,OAAOpxD,KAAKwwD,QAAQt8B,O,gCAGxB,sBAAI,uBAAQ,C,IAAZ,WACI,OAAOl0B,KAAKwwD,QAAQr8B,U,gCAGxB,YAAA7oB,SAAA,SAAS2pB,GACL,OAAOj1B,KAAKwwD,QAAQllD,SAAS2pB,IAGjC,YAAA+lB,gBAAA,SAAgBn1C,GACZ,OAAO7F,KAAKi0B,YAAcpuB,EAAIouB,WAAaj0B,KAAKkf,SAAWrZ,EAAIqZ,QAAUlf,KAAKonB,KAAK4zB,gBAAgBn1C,EAAIuhB,OAGpG,EAAAiqC,mBAAP,SAA0BC,GACtB,IAAMjvD,EAAgB,GAMtB,OALAivD,EAAKnlD,SAAQ,SAACtG,EAAK9H,GACVuzD,EAAKC,MAAK,SAACC,EAAU1uC,GAAU,OAAAA,IAAU/kB,GAAKyzD,EAASxW,gBAAgBn1C,OACxExD,EAAO0I,KAAKlF,MAGbxD,GAGf,EA/LA,G,0CClBA,SAASw1B,EAAS15B,GACd,IAAK,IAAI0B,KAAK1B,EAAQN,EAAQ+B,eAAeC,KAAIhC,EAAQgC,GAAK1B,EAAE0B,IAEpEpB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IACjCl6B,EAAQg7B,WAAa2V,EAAiB3V,WACtCh7B,EAAQ+6B,cAAgB4V,EAAiB5V,cACzC/6B,EAAQy8B,kBAAoBkU,EAAiBlU,kBAC7Cz8B,EAAQw8B,wBAA0BmU,EAAiBnU,wBACnDx8B,EAAQsC,WAAaquC,EAAiBruC,WACtCtC,EAAQwiB,MAAQmuB,EAAiBnuB,MACjCxiB,EAAQ0vB,QAAUihB,EAAiBjhB,QACnC1vB,EAAQ68B,MAAQ8T,EAAiB9T,MACjC78B,EAAQ88B,YAAc6T,EAAiB7T,YACvC98B,EAAQ+8B,qBAAuB4T,EAAiB5T,qBAChD/8B,EAAQg9B,qBAAuB2T,EAAiB3T,qBAChDh9B,EAAQo6B,YAAcuW,EAAiBvW,YACvCp6B,EAAQq6B,aAAesW,EAAiBtW,aACxCr6B,EAAQi7B,iBAAmB0V,EAAiB1V,iBAC5Cj7B,EAAQk7B,kBAAoByV,EAAiBzV,kBAC7Cl7B,EAAQ67B,cAAgB8U,EAAiB9U,cACzC77B,EAAQk8B,cAAgByU,EAAiBzU,cACzCl8B,EAAQwlC,mBAAqBmL,EAAiBnL,mBAC9CxlC,EAAQ87B,oBAAsB6U,EAAiB7U,oBAC/C97B,EAAQm8B,oBAAsBwU,EAAiBxU,oBAC/Cn8B,EAAQ+7B,iBAAmB4U,EAAiB5U,iBAC5C/7B,EAAQo8B,iBAAmBuU,EAAiBvU,iBAC5Cp8B,EAAQ4zD,0BAA4BjjB,EAAiBijB,0BACrD5zD,EAAQ6zD,0BAA4BljB,EAAiBkjB,0BACrD7zD,EAAQ8zD,uBAAyBnjB,EAAiBmjB,uBAClD9zD,EAAQ+zD,4BAA8BpjB,EAAiBojB,4BACvD/zD,EAAQg0D,4BAA8BrjB,EAAiBqjB,4BACvDh0D,EAAQk9B,aAAeyT,EAAiBzT,aACxClD,EAASE,EAAQ,KACjBF,EAASE,EAAQ,MACjB,IAAM+5B,EAAgB/5B,EAAQ,MAE9B,SAAWg6B,IAEP,SAAWC,GACPA,EAA4BxzB,OAASszB,EAAcE,4BAA4BxzB,OAC/EwzB,EAA4B5/C,KAAO0/C,EAAcE,4BAA4B5/C,KAFjF,CAGiC2/C,EAASC,8BAAgCD,EAASC,4BAA8B,KAEjH,SAAWC,GACPA,EAAkCzzB,OAASszB,EAAcG,kCAAkCzzB,OAC3FyzB,EAAkC7/C,KAAO0/C,EAAcG,kCACvDA,EAAkCC,WAAaJ,EAAcG,kCAAkCC,WAHnG,CAIuCH,EAASE,oCAAsCF,EAASE,kCAAoC,KAEnI,SAAWE,GACPA,EAAkC3zB,OAASszB,EAAcK,kCAAkC3zB,OAC3F2zB,EAAkC//C,KAAO0/C,EAAcK,kCACvDA,EAAkCD,WAAaJ,EAAcK,kCAAkCD,WAHnG,CAIuCH,EAASI,oCAAsCJ,EAASI,kCAAoC,KAjBvI,CAkBct0D,EAAQk0D,WAAal0D,EAAQk0D,SAAW,KAItDl0D,EAAQu0D,yBAHR,SAAkCC,EAAQC,EAAQ12B,EAAQC,GACtD,OAAO2S,EAAiBlL,wBAAwB+uB,EAAQC,EAAQ12B,EAAQC,K,gBC9D5E,IAAI02B,EAAoB,EAAQ,KAE5BC,EAAkB,EAAQ,KAE1BC,EAAoB,EAAQ,KAMhC30D,EAAOD,QAJP,SAA4BmqB,GAC1B,OAAOuqC,EAAkBvqC,IAAQwqC,EAAgBxqC,IAAQyqC,M,cCP3D,IAAInnD,EAAW,GAAGA,SAElBxN,EAAOD,QAAUiL,MAAMC,SAAW,SAAUif,GAC1C,MAA6B,kBAAtB1c,EAASpN,KAAK8pB,K,8ECavB,2BAAgCpgB,GAC5B,OAAIA,EACO,IAAI3G,MAAM,qBAAqB2G,GAE/B,IAAI3G,MAAM,qBAIzB,oBAAyB3C,GACrB,OAAIA,EACO,IAAI2C,MAAM,sBAAsB3C,EAAI,uBAEpC,IAAI2C,MAAM,wCAIzB,oBAAyByxD,GACrB,IAAMrwD,EAAS,IAAIpB,MAASyxD,EAAI,sBAEhC,OADArwD,EAAO/D,KAAO,WACP+D,I,gRCSX,YAEMswD,EAAe,IAAI5hB,OAAO,MAAO,KAEvC,SAAgB9pB,I,YAAQ,kDACpB,IAAI2rC,EAAsB,G,IAC1B,IAAgB,QAAA/qC,GAAK,8BAAE,CAAlB,IAAMhoB,EAAC,QACR,GAAiB,iBAANA,EACP,MAAM,IAAIwnB,UAAU,8CAAiDxnB,GACxD,KAANA,IACHA,EAAEynB,OAAO,KAAO,EAAAzd,MAChB+oD,EAAY,IAEhBA,EAAU7nD,KAAKlL,K,iGAIvB,IAAMgzD,EAAWprC,EAAUmrC,EAAUprC,KAAK,EAAA3d,MAC1C,OAAIgpD,EAASpnD,OAAS,GAAKonD,EAASvrC,OAAOurC,EAASpnD,OAAS,KAAO,EAAA5B,IACzDgpD,EAASjrC,OAAO,EAAGirC,EAASpnD,OAAS,GAGzConD,EAgDX,SAAgBprC,EAAU5nB,G,QAEZ,KAANA,IACAA,EAAI,KAGR,IAAMizD,EAAWjzD,EAAEynB,OAAO,KAAO,EAAAzd,IAI3BmrB,GAFNn1B,EAgCJ,SAAmCA,GAE/B,OADAA,EAAIA,EAAE2E,QAAQmuD,EAAc,EAAA9oD,KAjCxBkpD,CAA0BlzD,IAET0nB,MAAM,EAAA1d,KACrBmpD,EAA2B,G,IACjC,IAAgB,QAAAh+B,GAAU,8BAAE,CAAvB,IAAM52B,EAAC,QACE,MAANA,IAEa,OAANA,IAAe00D,IAAcA,GAAYE,EAAevnD,OAAS,GAA2B,OAAtBunD,EAAe,IAC5FA,EAAezwD,MAEfywD,EAAejoD,KAAK3M,K,iGAI5B,IAAK00D,GAAYE,EAAevnD,OAAS,EACrC,OAAQunD,EAAevnD,QACnB,KAAK,EACyB,KAAtBunD,EAAe,IACfA,EAAelsC,QAAQ,KAE3B,MACJ,QACIksC,EAAejoD,KAAK,KAOhC,OAJAlL,EAAImzD,EAAexrC,KAAK,EAAA3d,KACpBipD,GAAYjzD,EAAEynB,OAAO,KAAO,EAAAzd,MAC5BhK,EAAI,EAAAgK,IAAMhK,GAEPA,EAvGX,YAqBA,oBAAyBK,EAAc8F,GACnC,IAAIjI,EAEJmC,EAAO+mB,EAAQ/mB,GACf8F,EAAKihB,EAAQjhB,GACb,IAAMitD,EAAe/yD,EAAKqnB,MAAM,EAAA1d,KAC1BqpD,EAAaltD,EAAGuhB,MAAM,EAAA1d,KAE5BqpD,EAAW1gC,QACXygC,EAAazgC,QAEb,IAAI2gC,EAAU,EACVC,EAAyB,GAE7B,IAAKr1D,EAAI,EAAGA,EAAIk1D,EAAaxnD,OAAQ1N,IAAK,CAEtC,GADYk1D,EAAal1D,KACbm1D,EAAWn1D,GAAvB,CAIAo1D,EAAUF,EAAaxnD,OAAS1N,EAChC,OAGJq1D,EAAeF,EAAWprC,MAAM/pB,GAEJ,IAAxBk1D,EAAaxnD,QAAoC,KAApBwnD,EAAa,KAC1CE,EAAU,GAGVA,EAAUF,EAAaxnD,SACvB0nD,EAAUF,EAAaxnD,QAG3B,IAAI4nD,EAAK,GACT,IAAKt1D,EAAI,EAAGA,EAAIo1D,EAASp1D,IACrBs1D,GAAM,MAOV,OALAA,GAAMD,EAAa5rC,KAAK,EAAA3d,MAEjB4B,OAAS,GAAK4nD,EAAG/rC,OAAO+rC,EAAG5nD,OAAS,KAAO,EAAA5B,MAC9CwpD,EAAKA,EAAGzrC,OAAO,EAAGyrC,EAAG5nD,OAAS,IAE3B4nD,GAEX,e,2cClGA,SAAStjD,EAAGqjB,EAAmBF,GAC3B,SAAyB,oBAAdC,WACHA,UAAUC,WAAaD,UAAUC,UAAUC,QAAQD,IAAc,SAIlD,IAAZlkB,GACCA,EAAQgkB,WAAaA,E,iDAKxB,EAAAN,UAAY7iB,EAAG,UAAW,SAC1B,EAAAujD,MAAQvjD,EAAG,MAAO,UAG/B,eAAoBxG,G,IAAiB,wDACjC,MAAO,CACH,EAAAqpB,UAAY,MAAQrpB,EACpB,EAAAqpB,UAAY,EAAD,CAAE,KAAMrpB,GAAYgI,GAAQA,IAI/C,SAAiBgiD,GAKb,IAAYC,GAAZ,SAAYA,GACR,oBACA,gBACA,YAHJ,CAAYA,EAAA,EAAAA,OAAA,EAAAA,KAAI,KAUA,EAAAphD,KAAhB,WACI,OAAI,EAAAwgB,UACO4gC,EAAKC,QAEZ,EAAAH,MACOE,EAAKE,IAETF,EAAKG,OAtBpB,CAAiB,EAAAJ,KAAA,EAAAA,GAAE,O,+FChBnB,mBAAgBlzD,EAA8BuzD,G,IAAgB,wDAC1D,OAAI9qD,MAAMC,QAAQ6qD,IACdA,EAAMznD,SAAQ,SAAA9N,GAAK,OAAAA,GAAKA,EAAEgC,aACnB,IACgB,IAAhBwzD,EAAKpoD,OACRmoD,GACAA,EAAMvzD,UACCuzD,QAEX,GAEAvzD,EAAQuzD,GACRvzD,EAAQwzD,GACD,M,8ECnBf,WAIA,OAEA,aAII,WACqBC,EACAC,EACAC,GAHrB,WACqB,KAAAF,WACA,KAAAC,qBACA,KAAAC,UAEjBh0D,KAAKi0D,MAAQD,EAAQE,iBAAiBJ,EAAUC,GAE3C/zD,KAAK+zD,oBACN/zD,KAAKg0D,QAAQG,yBAAwB,SAACrjC,GAClC,EAAKmjC,MAAQnjC,EAAK,EAAKgjC,UAAYhjC,EAAK,EAAKgjC,UAAY,MAoBzE,OAbI,YAAAl1D,IAAA,SAAOU,EAAa0F,GAChB,OAAI1F,GAAOU,KAAKi0D,MAAMr0D,eAAeN,GAC1BU,KAAKi0D,MAAM30D,GAEX0F,GAKf,YAAA4K,OAAA,SAAOtQ,EAAaN,GAEhB,OADAgB,KAAKi0D,MAAM30D,GAAON,EACXgB,KAAKg0D,QAAQI,iBAAiBp0D,KAAK8zD,SAAU9zD,KAAKi0D,MAAOj0D,KAAK+zD,oBAAoB18B,MAAK,SAAA+Z,QAEtG,EAjCA,GAAa,EAAAijB,UAuCb,iBAUI,WAAY1uC,GARJ,KAAA2uC,0BAA4B,IAAI,EAAA/mC,QACxB,KAAA4mC,wBAAuDn0D,KAAKs0D,0BAA0BvoC,MAQlG/rB,KAAKstD,MAAQ3nC,EAAIynC,SAAsB,EAAAx3C,mBAAmBmB,cAiClE,OA9BI,YAAAgtC,KAAA,SAAKwQ,EAAsCC,GACvCx0D,KAAKy0D,gBAAkBF,EACvBv0D,KAAK00D,mBAAqBF,GAG9B,YAAAN,iBAAA,SAAiB50D,EAAaq1D,GAC1B,OAAIA,EACgB30D,KAAKy0D,gBAAgBn1D,IACV,GAEXU,KAAK00D,mBAAmBp1D,IACb,IAInC,YAAA80D,iBAAA,SAAiB90D,EAAaN,EAAwB21D,GAOlD,OANIA,EACA30D,KAAKy0D,gBAAgBn1D,GAAON,EAE5BgB,KAAK00D,mBAAmBp1D,GAAON,EAG5BgB,KAAKstD,MAAMsH,KAAKt1D,EAAKN,EAAO21D,IAGvC,YAAAE,4BAAA,SAA4BC,GACxB90D,KAAK00D,mBAAqBI,EAC1B90D,KAAKs0D,0BAA0B1mC,KAAKknC,IAG5C,EA5CA,GAAa,EAAAC,wB,gBC5Db,MAAMx9B,EAAI,EAAQ,IAAgBN,aAC5BzH,EAAK,EAAQ,GAEbwlC,EAAM,CACV,SACA,aACA,QACA,QACA,QACA,WACA,SACA,SACA,YACA,QACA,QACA,YACA,UACA,SACA,OACA,QACA,QACA,UACA,OACA,WACA,UACA,WACA,WACA,SACA,QACA,OACA,UACA,WACA,SACA,SACA,aACArpD,OAAOrM,GAKmB,mBAAZkwB,EAAGlwB,IAInBb,OAAOskC,KAAKvT,GAAIrjB,QAAQ7M,IACtBzB,EAAQyB,GAAOkwB,EAAGlwB,KAIpB01D,EAAI7oD,QAAQqyB,IACV3gC,EAAQ2gC,GAAUjH,EAAE/H,EAAGgP,MAKzB3gC,EAAQo3D,OAAS,SAAUC,EAAU7oC,GACnC,MAAwB,mBAAbA,EACFmD,EAAGylC,OAAOC,EAAU7oC,GAEtB,IAAIkC,QAAQtH,GACVuI,EAAGylC,OAAOC,EAAUjuC,KAM/BppB,EAAQk0B,KAAO,SAAUpC,EAAI0V,EAAQ4B,EAAQx7B,EAAQ7E,EAAUylB,GAC7D,MAAwB,mBAAbA,EACFmD,EAAGuC,KAAKpC,EAAI0V,EAAQ4B,EAAQx7B,EAAQ7E,EAAUylB,GAEhD,IAAIkC,QAAQ,CAACtH,EAASkQ,KAC3B3H,EAAGuC,KAAKpC,EAAI0V,EAAQ4B,EAAQx7B,EAAQ7E,EAAU,CAACipB,EAAKslC,EAAW9vB,KAC7D,GAAIxV,EAAK,OAAOsH,EAAOtH,GACvB5I,EAAQ,CAAEkuC,YAAW9vB,gBAU3BxnC,EAAQghC,MAAQ,SAAUlP,EAAI0V,EAAQoE,EAAG1W,EAAG30B,EAAGiuB,GAC7C,MAA+C,mBAApC/c,UAAUA,UAAU7D,OAAS,GAC/B+jB,EAAGqP,MAAMlP,EAAI0V,EAAQoE,EAAG1W,EAAG30B,EAAGiuB,GAK9B,IAAIkC,QADS,iBAAX8W,EACU,CAACpe,EAASkQ,KAC3B3H,EAAGqP,MAAMlP,EAAI0V,EAAQoE,EAAG1W,EAAG,CAAClD,EAAKulC,EAAc/vB,KAC7C,GAAIxV,EAAK,OAAOsH,EAAOtH,GACvB5I,EAAQ,CAAEmuC,eAAc/vB,cAKX,CAACpe,EAASkQ,KAC3B3H,EAAGqP,MAAMlP,EAAI0V,EAAQoE,EAAG1W,EAAG30B,EAAG,CAACyxB,EAAKulC,EAAc/vB,KAChD,GAAIxV,EAAK,OAAOsH,EAAOtH,GACvB5I,EAAQ,CAAEmuC,eAAc/vB,iB,8BCvG9B,cAyBA,IAAIyK,EAAM,EAAQ,IAGlBhyC,EAAOD,QAAUqyC,EAGjB,IAIIF,EAJAjnC,EAAU,EAAQ,IAOtBmnC,EAASmlB,cAAgBA,EAGhB,EAAQ,IAAUvR,aAA3B,IAEIwR,EAAkB,SAAUtnC,EAAS5b,GACvC,OAAO4b,EAAQxC,UAAUpZ,GAAM3G,QAK7Bw6C,EAAS,EAAQ,IAKjB/hB,EAAS,EAAQ,IAAeA,OAChC+iB,EAAgB13B,EAAO+U,YAAc,aAWzC,IAAItV,EAAOvwB,OAAOY,OAAO,EAAQ,KACjC2vB,EAAKihB,SAAW,EAAQ,IAIxB,IAAIslB,EAAY,EAAQ,KACpBrmC,OAAQ,EAEVA,EADEqmC,GAAaA,EAAUpmC,SACjBomC,EAAUpmC,SAAS,UAEnB,aAIV,IAEIqmC,EAFAC,EAAa,EAAQ,KACrBtO,EAAc,EAAQ,IAG1Bn4B,EAAKihB,SAASC,EAAU+V,GAExB,IAAIyP,EAAe,CAAC,QAAS,QAAS,UAAW,QAAS,UAc1D,SAASL,EAAcvqD,EAASu8C,GAG9Bv8C,EAAUA,GAAW,GAOrB,IAAIw8C,EAAWD,aATfrX,EAASA,GAAU,EAAQ,KAa3BhwC,KAAKunD,aAAez8C,EAAQy8C,WAExBD,IAAUtnD,KAAKunD,WAAavnD,KAAKunD,cAAgBz8C,EAAQ6qD,oBAI7D,IAAIlO,EAAM38C,EAAQ4lC,cACdklB,EAAc9qD,EAAQ+qD,sBACtBjO,EAAa5nD,KAAKunD,WAAa,GAAK,MAElBvnD,KAAK0wC,cAAvB+W,GAAe,IAARA,EAAgCA,EAAaH,IAAasO,GAA+B,IAAhBA,GAAyCA,EAAsChO,EAGnK5nD,KAAK0wC,cAAgBvoB,KAAK0kB,MAAM7sC,KAAK0wC,eAKrC1wC,KAAKqlC,OAAS,IAAIowB,EAClBz1D,KAAKyL,OAAS,EACdzL,KAAK81D,MAAQ,KACb91D,KAAK+1D,WAAa,EAClB/1D,KAAKg2D,QAAU,KACfh2D,KAAKwwC,OAAQ,EACbxwC,KAAKi2D,YAAa,EAClBj2D,KAAKk2D,SAAU,EAMfl2D,KAAK+3C,MAAO,EAIZ/3C,KAAKm2D,cAAe,EACpBn2D,KAAKo2D,iBAAkB,EACvBp2D,KAAKq2D,mBAAoB,EACzBr2D,KAAKs2D,iBAAkB,EAGvBt2D,KAAK4wC,WAAY,EAKjB5wC,KAAKmoD,gBAAkBr9C,EAAQq9C,iBAAmB,OAGlDnoD,KAAKu2D,WAAa,EAGlBv2D,KAAKw2D,aAAc,EAEnBx2D,KAAKy2D,QAAU,KACfz2D,KAAK8kC,SAAW,KACZh6B,EAAQg6B,WACL0wB,IAAeA,EAAgB,EAAQ,IAAmBA,eAC/Dx1D,KAAKy2D,QAAU,IAAIjB,EAAc1qD,EAAQg6B,UACzC9kC,KAAK8kC,SAAWh6B,EAAQg6B,UAI5B,SAASoL,EAASplC,GAGhB,GAFAklC,EAASA,GAAU,EAAQ,MAErBhwC,gBAAgBkwC,GAAW,OAAO,IAAIA,EAASplC,GAErD9K,KAAK2wC,eAAiB,IAAI0kB,EAAcvqD,EAAS9K,MAGjDA,KAAKowC,UAAW,EAEZtlC,IAC0B,mBAAjBA,EAAQinB,OAAqB/xB,KAAK02D,MAAQ5rD,EAAQinB,MAE9B,mBAApBjnB,EAAQgnB,UAAwB9xB,KAAK6wC,SAAW/lC,EAAQgnB,UAGrEm0B,EAAO/nD,KAAK8B,MA2Dd,SAAS22D,EAAiBtP,EAAQpU,EAAOnO,EAAU8xB,EAAYC,GAC7D,IAKMjR,EALF9oB,EAAQuqB,EAAO1W,eACL,OAAVsC,GACFnW,EAAMo5B,SAAU,EA0NpB,SAAoB7O,EAAQvqB,GAC1B,GAAIA,EAAM0T,MAAO,OACjB,GAAI1T,EAAM25B,QAAS,CACjB,IAAIxjB,EAAQnW,EAAM25B,QAAQ1zD,MACtBkwC,GAASA,EAAMxnC,SACjBqxB,EAAMuI,OAAOt6B,KAAKkoC,GAClBnW,EAAMrxB,QAAUqxB,EAAMyqB,WAAa,EAAItU,EAAMxnC,QAGjDqxB,EAAM0T,OAAQ,EAGdsmB,EAAazP,GArOX0P,CAAW1P,EAAQvqB,KAGd+5B,IAAgBjR,EA2CzB,SAAsB9oB,EAAOmW,GAC3B,IAAI2S,EApPiB3gB,EAqPFgO,EApPZ/O,EAAOgB,SAASD,IAAQA,aAAegiB,GAoPA,iBAAVhU,QAAgC3yC,IAAV2yC,GAAwBnW,EAAMyqB,aACtF3B,EAAK,IAAIv+B,UAAU,oCAtPvB,IAAuB4d,EAwPrB,OAAO2gB,EAhDqBoR,CAAal6B,EAAOmW,IAC1C2S,EACFyB,EAAOh8B,KAAK,QAASu6B,GACZ9oB,EAAMyqB,YAActU,GAASA,EAAMxnC,OAAS,GAChC,iBAAVwnC,GAAuBnW,EAAMyqB,YAAc9oD,OAAOu4B,eAAeic,KAAW/O,EAAOvkC,YAC5FszC,EAhNR,SAA6BA,GAC3B,OAAO/O,EAAOhkC,KAAK+yC,GA+MLoX,CAAoBpX,IAG1B2jB,EACE95B,EAAMm5B,WAAY5O,EAAOh8B,KAAK,QAAS,IAAIpqB,MAAM,qCAA0Cg2D,EAAS5P,EAAQvqB,EAAOmW,GAAO,GACrHnW,EAAM0T,MACf6W,EAAOh8B,KAAK,QAAS,IAAIpqB,MAAM,6BAE/B67B,EAAMo5B,SAAU,EACZp5B,EAAM25B,UAAY3xB,GACpBmO,EAAQnW,EAAM25B,QAAQ53B,MAAMoU,GACxBnW,EAAMyqB,YAA+B,IAAjBtU,EAAMxnC,OAAcwrD,EAAS5P,EAAQvqB,EAAOmW,GAAO,GAAYikB,EAAc7P,EAAQvqB,IAE7Gm6B,EAAS5P,EAAQvqB,EAAOmW,GAAO,KAGzB2jB,IACV95B,EAAMo5B,SAAU,IAIpB,OAgCF,SAAsBp5B,GACpB,OAAQA,EAAM0T,QAAU1T,EAAMq5B,cAAgBr5B,EAAMrxB,OAASqxB,EAAM4T,eAAkC,IAAjB5T,EAAMrxB,QAjCnF0rD,CAAar6B,GAGtB,SAASm6B,EAAS5P,EAAQvqB,EAAOmW,EAAO2jB,GAClC95B,EAAMk5B,SAA4B,IAAjBl5B,EAAMrxB,SAAiBqxB,EAAMib,MAChDsP,EAAOh8B,KAAK,OAAQ4nB,GACpBoU,EAAOt1B,KAAK,KAGZ+K,EAAMrxB,QAAUqxB,EAAMyqB,WAAa,EAAItU,EAAMxnC,OACzCmrD,EAAY95B,EAAMuI,OAAOve,QAAQmsB,GAAYnW,EAAMuI,OAAOt6B,KAAKkoC,GAE/DnW,EAAMq5B,cAAcW,EAAazP,IAEvC6P,EAAc7P,EAAQvqB,GAvGxBr+B,OAAOC,eAAewxC,EAASvwC,UAAW,YAAa,CACrDf,IAAK,WACH,YAA4B0B,IAAxBN,KAAK2wC,gBAGF3wC,KAAK2wC,eAAeC,WAE7BrlC,IAAK,SAAUvM,GAGRgB,KAAK2wC,iBAMV3wC,KAAK2wC,eAAeC,UAAY5xC,MAIpCkxC,EAASvwC,UAAUmyB,QAAUq1B,EAAYr1B,QACzCoe,EAASvwC,UAAUqrD,WAAa7D,EAAY8D,UAC5C/a,EAASvwC,UAAUkxC,SAAW,SAAUhhB,EAAKD,GAC3C5vB,KAAK+K,KAAK,MACV6kB,EAAGC,IAOLqgB,EAASvwC,UAAUoL,KAAO,SAAUkoC,EAAOnO,GACzC,IACI+xB,EADA/5B,EAAQ98B,KAAK2wC,eAgBjB,OAbK7T,EAAMyqB,WAUTsP,GAAiB,EATI,iBAAV5jB,KACTnO,EAAWA,GAAYhI,EAAMqrB,mBACZrrB,EAAMgI,WACrBmO,EAAQ/O,EAAOhkC,KAAK+yC,EAAOnO,GAC3BA,EAAW,IAEb+xB,GAAiB,GAMdF,EAAiB32D,KAAMizC,EAAOnO,GAAU,EAAO+xB,IAIxD3mB,EAASvwC,UAAUmnB,QAAU,SAAUmsB,GACrC,OAAO0jB,EAAiB32D,KAAMizC,EAAO,MAAM,GAAM,IAwEnD/C,EAASvwC,UAAUy3D,SAAW,WAC5B,OAAuC,IAAhCp3D,KAAK2wC,eAAeqlB,SAI7B9lB,EAASvwC,UAAU03D,YAAc,SAAUC,GAIzC,OAHK9B,IAAeA,EAAgB,EAAQ,IAAmBA,eAC/Dx1D,KAAK2wC,eAAe8lB,QAAU,IAAIjB,EAAc8B,GAChDt3D,KAAK2wC,eAAe7L,SAAWwyB,EACxBt3D,MAwBT,SAASu3D,EAAc/3D,EAAGs9B,GACxB,OAAIt9B,GAAK,GAAsB,IAAjBs9B,EAAMrxB,QAAgBqxB,EAAM0T,MAAc,EACpD1T,EAAMyqB,WAAmB,EACzB/nD,GAAMA,EAEJs9B,EAAMk5B,SAAWl5B,EAAMrxB,OAAeqxB,EAAMuI,OAAOmyB,KAAK1mC,KAAKrlB,OAAmBqxB,EAAMrxB,QAGxFjM,EAAIs9B,EAAM4T,gBAAe5T,EAAM4T,cA3BrC,SAAiClxC,GAc/B,OAbIA,GAFQ,QAGVA,EAHU,SAOVA,IACAA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,GACXA,KAEKA,EAa4Ci4D,CAAwBj4D,IACvEA,GAAKs9B,EAAMrxB,OAAejM,EAEzBs9B,EAAM0T,MAIJ1T,EAAMrxB,QAHXqxB,EAAMq5B,cAAe,EACd,IA4HX,SAASW,EAAazP,GACpB,IAAIvqB,EAAQuqB,EAAO1W,eACnB7T,EAAMq5B,cAAe,EAChBr5B,EAAMs5B,kBACTlnC,EAAM,eAAgB4N,EAAMk5B,SAC5Bl5B,EAAMs5B,iBAAkB,EACpBt5B,EAAMib,KAAMjI,EAAIplB,SAASgtC,EAAerQ,GAAaqQ,EAAcrQ,IAI3E,SAASqQ,EAAcrQ,GACrBn4B,EAAM,iBACNm4B,EAAOh8B,KAAK,YACZssC,EAAKtQ,GASP,SAAS6P,EAAc7P,EAAQvqB,GACxBA,EAAM05B,cACT15B,EAAM05B,aAAc,EACpB1mB,EAAIplB,SAASktC,EAAgBvQ,EAAQvqB,IAIzC,SAAS86B,EAAevQ,EAAQvqB,GAE9B,IADA,IAAI1T,EAAM0T,EAAMrxB,QACRqxB,EAAMo5B,UAAYp5B,EAAMk5B,UAAYl5B,EAAM0T,OAAS1T,EAAMrxB,OAASqxB,EAAM4T,gBAC9ExhB,EAAM,wBACNm4B,EAAOt1B,KAAK,GACR3I,IAAQ0T,EAAMrxB,SAEL2d,EAAM0T,EAAMrxB,OAE3BqxB,EAAM05B,aAAc,EAyOtB,SAASqB,EAAiBj0B,GACxB1U,EAAM,4BACN0U,EAAK7R,KAAK,GAsBZ,SAAS+lC,EAAQzQ,EAAQvqB,GAClBA,EAAMo5B,UACThnC,EAAM,iBACNm4B,EAAOt1B,KAAK,IAGd+K,EAAMw5B,iBAAkB,EACxBx5B,EAAMy5B,WAAa,EACnBlP,EAAOh8B,KAAK,UACZssC,EAAKtQ,GACDvqB,EAAMk5B,UAAYl5B,EAAMo5B,SAAS7O,EAAOt1B,KAAK,GAanD,SAAS4lC,EAAKtQ,GACZ,IAAIvqB,EAAQuqB,EAAO1W,eAEnB,IADAzhB,EAAM,OAAQ4N,EAAMk5B,SACbl5B,EAAMk5B,SAA6B,OAAlB3O,EAAOt1B,UAmFjC,SAASgmC,EAASv4D,EAAGs9B,GAEnB,OAAqB,IAAjBA,EAAMrxB,OAAqB,MAG3BqxB,EAAMyqB,WAAYvgD,EAAM81B,EAAMuI,OAAO7S,SAAkBhzB,GAAKA,GAAKs9B,EAAMrxB,QAEtDzE,EAAf81B,EAAM25B,QAAe35B,EAAMuI,OAAO7d,KAAK,IAAqC,IAAxBsV,EAAMuI,OAAO55B,OAAoBqxB,EAAMuI,OAAOmyB,KAAK1mC,KAAgBgM,EAAMuI,OAAO9c,OAAOuU,EAAMrxB,QACrJqxB,EAAMuI,OAAO0Y,SAGb/2C,EASJ,SAAyBxH,EAAGoqC,EAAMouB,GAChC,IAAIhxD,EACAxH,EAAIoqC,EAAK4tB,KAAK1mC,KAAKrlB,QAErBzE,EAAM4iC,EAAK4tB,KAAK1mC,KAAKhJ,MAAM,EAAGtoB,GAC9BoqC,EAAK4tB,KAAK1mC,KAAO8Y,EAAK4tB,KAAK1mC,KAAKhJ,MAAMtoB,IAGtCwH,EAFSxH,IAAMoqC,EAAK4tB,KAAK1mC,KAAKrlB,OAExBm+B,EAAKpX,QAGLwlC,EASV,SAA8Bx4D,EAAGoqC,GAC/B,IAAI/pC,EAAI+pC,EAAK4tB,KACTp5D,EAAI,EACJ4I,EAAMnH,EAAEixB,KACZtxB,GAAKwH,EAAIyE,OACT,KAAO5L,EAAIA,EAAE0mD,MAAM,CACjB,IAAIp9B,EAAMtpB,EAAEixB,KACRmnC,EAAKz4D,EAAI2pB,EAAI1d,OAAS0d,EAAI1d,OAASjM,EAGvC,GAFIy4D,IAAO9uC,EAAI1d,OAAQzE,GAAOmiB,EAASniB,GAAOmiB,EAAIrB,MAAM,EAAGtoB,GAEjD,KADVA,GAAKy4D,GACQ,CACPA,IAAO9uC,EAAI1d,UACXrN,EACEyB,EAAE0mD,KAAM3c,EAAK4tB,KAAO33D,EAAE0mD,KAAU3c,EAAK4tB,KAAO5tB,EAAKsuB,KAAO,OAE5DtuB,EAAK4tB,KAAO33D,EACZA,EAAEixB,KAAO3H,EAAIrB,MAAMmwC,IAErB,QAEA75D,EAGJ,OADAwrC,EAAKn+B,QAAUrN,EACR4I,EAhCcmxD,CAAqB34D,EAAGoqC,GAsC/C,SAAwBpqC,EAAGoqC,GACzB,IAAI5iC,EAAMk9B,EAAOM,YAAYhlC,GACzBK,EAAI+pC,EAAK4tB,KACTp5D,EAAI,EACRyB,EAAEixB,KAAKsU,KAAKp+B,GACZxH,GAAKK,EAAEixB,KAAKrlB,OACZ,KAAO5L,EAAIA,EAAE0mD,MAAM,CACjB,IAAI5f,EAAM9mC,EAAEixB,KACRmnC,EAAKz4D,EAAImnC,EAAIl7B,OAASk7B,EAAIl7B,OAASjM,EAGvC,GAFAmnC,EAAIvB,KAAKp+B,EAAKA,EAAIyE,OAASjM,EAAG,EAAGy4D,GAEvB,KADVz4D,GAAKy4D,GACQ,CACPA,IAAOtxB,EAAIl7B,UACXrN,EACEyB,EAAE0mD,KAAM3c,EAAK4tB,KAAO33D,EAAE0mD,KAAU3c,EAAK4tB,KAAO5tB,EAAKsuB,KAAO,OAE5DtuB,EAAK4tB,KAAO33D,EACZA,EAAEixB,KAAO6V,EAAI7e,MAAMmwC,IAErB,QAEA75D,EAGJ,OADAwrC,EAAKn+B,QAAUrN,EACR4I,EA9D8CoxD,CAAe54D,EAAGoqC,GAEvE,OAAO5iC,EAtBCqxD,CAAgB74D,EAAGs9B,EAAMuI,OAAQvI,EAAM25B,SAGxCzvD,GAVP,IAAIA,EA4FN,SAASsxD,EAAYjR,GACnB,IAAIvqB,EAAQuqB,EAAO1W,eAInB,GAAI7T,EAAMrxB,OAAS,EAAG,MAAM,IAAIxK,MAAM,8CAEjC67B,EAAMm5B,aACTn5B,EAAM0T,OAAQ,EACdV,EAAIplB,SAAS6tC,EAAez7B,EAAOuqB,IAIvC,SAASkR,EAAcz7B,EAAOuqB,GAEvBvqB,EAAMm5B,YAA+B,IAAjBn5B,EAAMrxB,SAC7BqxB,EAAMm5B,YAAa,EACnB5O,EAAOjX,UAAW,EAClBiX,EAAOh8B,KAAK,QAIhB,SAASgI,EAAQtM,EAAI2iB,GACnB,IAAK,IAAI3rC,EAAI,EAAGC,EAAI+oB,EAAGtb,OAAQ1N,EAAIC,EAAGD,IACpC,GAAIgpB,EAAGhpB,KAAO2rC,EAAG,OAAO3rC,EAE1B,OAAQ,EApoBVmyC,EAASvwC,UAAUoyB,KAAO,SAAUvyB,GAClC0vB,EAAM,OAAQ1vB,GACdA,EAAI6nC,SAAS7nC,EAAG,IAChB,IAAIs9B,EAAQ98B,KAAK2wC,eACb6nB,EAAQh5D,EAOZ,GALU,IAANA,IAASs9B,EAAMs5B,iBAAkB,GAK3B,IAAN52D,GAAWs9B,EAAMq5B,eAAiBr5B,EAAMrxB,QAAUqxB,EAAM4T,eAAiB5T,EAAM0T,OAGjF,OAFAthB,EAAM,qBAAsB4N,EAAMrxB,OAAQqxB,EAAM0T,OAC3B,IAAjB1T,EAAMrxB,QAAgBqxB,EAAM0T,MAAO8nB,EAAYt4D,MAAW82D,EAAa92D,MACpE,KAMT,GAAU,KAHVR,EAAI+3D,EAAc/3D,EAAGs9B,KAGNA,EAAM0T,MAEnB,OADqB,IAAjB1T,EAAMrxB,QAAc6sD,EAAYt4D,MAC7B,KA0BT,IA4BIgH,EA5BAyxD,EAAS37B,EAAMq5B,aAiDnB,OAhDAjnC,EAAM,gBAAiBupC,IAGF,IAAjB37B,EAAMrxB,QAAgBqxB,EAAMrxB,OAASjM,EAAIs9B,EAAM4T,gBAEjDxhB,EAAM,6BADNupC,GAAS,GAMP37B,EAAM0T,OAAS1T,EAAMo5B,QAEvBhnC,EAAM,mBADNupC,GAAS,GAEAA,IACTvpC,EAAM,WACN4N,EAAMo5B,SAAU,EAChBp5B,EAAMib,MAAO,EAEQ,IAAjBjb,EAAMrxB,SAAcqxB,EAAMq5B,cAAe,GAE7Cn2D,KAAK02D,MAAM55B,EAAM4T,eACjB5T,EAAMib,MAAO,EAGRjb,EAAMo5B,UAAS12D,EAAI+3D,EAAciB,EAAO17B,KAMnC,QAFD91B,EAAPxH,EAAI,EAASu4D,EAASv4D,EAAGs9B,GAAkB,OAG7CA,EAAMq5B,cAAe,EACrB32D,EAAI,GAEJs9B,EAAMrxB,QAAUjM,EAGG,IAAjBs9B,EAAMrxB,SAGHqxB,EAAM0T,QAAO1T,EAAMq5B,cAAe,GAGnCqC,IAAUh5D,GAAKs9B,EAAM0T,OAAO8nB,EAAYt4D,OAGlC,OAARgH,GAAchH,KAAKqrB,KAAK,OAAQrkB,GAE7BA,GAkETkpC,EAASvwC,UAAU+2D,MAAQ,SAAUl3D,GACnCQ,KAAKqrB,KAAK,QAAS,IAAIpqB,MAAM,gCAG/BivC,EAASvwC,UAAUyqD,KAAO,SAAUsO,EAAMC,GACxC,IAAIrqB,EAAMtuC,KACN88B,EAAQ98B,KAAK2wC,eAEjB,OAAQ7T,EAAMi5B,YACZ,KAAK,EACHj5B,EAAMg5B,MAAQ4C,EACd,MACF,KAAK,EACH57B,EAAMg5B,MAAQ,CAACh5B,EAAMg5B,MAAO4C,GAC5B,MACF,QACE57B,EAAMg5B,MAAM/qD,KAAK2tD,GAGrB57B,EAAMi5B,YAAc,EACpB7mC,EAAM,wBAAyB4N,EAAMi5B,WAAY4C,GAEjD,IAEIC,IAFUD,IAA6B,IAAjBA,EAAS51D,MAAkB21D,IAASxpD,EAAQ2pD,QAAUH,IAASxpD,EAAQ4pD,OAE7ExoB,EAAQyoB,EAI5B,SAASC,EAAS5oB,EAAU6oB,GAC1B/pC,EAAM,YACFkhB,IAAa9B,GACX2qB,IAAwC,IAA1BA,EAAWC,aAC3BD,EAAWC,YAAa,EAoB5BhqC,EAAM,WAENwpC,EAAKvtC,eAAe,QAASguC,GAC7BT,EAAKvtC,eAAe,SAAUiuC,GAC9BV,EAAKvtC,eAAe,QAASkuC,GAC7BX,EAAKvtC,eAAe,QAASmuC,GAC7BZ,EAAKvtC,eAAe,SAAU6tC,GAC9B1qB,EAAInjB,eAAe,MAAOmlB,GAC1BhC,EAAInjB,eAAe,MAAO4tC,GAC1BzqB,EAAInjB,eAAe,OAAQouC,GAE3BC,GAAY,GAOR18B,EAAMy5B,YAAgBmC,EAAKnoB,iBAAkBmoB,EAAKnoB,eAAeuX,WAAYuR,KAhCnF,SAAS/oB,IACPphB,EAAM,SACNwpC,EAAK31D,MAfH+5B,EAAMm5B,WAAYnmB,EAAIplB,SAASkuC,GAAYtqB,EAAIrjB,KAAK,MAAO2tC,GAE/DF,EAAK3tC,GAAG,SAAUiuC,GAoBlB,IAAIK,EA4FN,SAAqB/qB,GACnB,OAAO,WACL,IAAIxR,EAAQwR,EAAIqC,eAChBzhB,EAAM,cAAe4N,EAAMy5B,YACvBz5B,EAAMy5B,YAAYz5B,EAAMy5B,aACH,IAArBz5B,EAAMy5B,YAAoBjB,EAAgBhnB,EAAK,UACjDxR,EAAMk5B,SAAU,EAChB2B,EAAKrpB,KAnGKmrB,CAAYnrB,GAC1BoqB,EAAK3tC,GAAG,QAASsuC,GAEjB,IAAIG,GAAY,EA2BhB,IAAIE,GAAsB,EAE1B,SAASH,EAAOtmB,GACd/jB,EAAM,UACNwqC,GAAsB,GAElB,IADMhB,EAAK75B,MAAMoU,IACCymB,KAKM,IAArB58B,EAAMi5B,YAAoBj5B,EAAMg5B,QAAU4C,GAAQ57B,EAAMi5B,WAAa,IAAqC,IAAhC1iC,EAAQyJ,EAAMg5B,MAAO4C,MAAkBc,IACpHtqC,EAAM,8BAA+Bof,EAAIqC,eAAe4lB,YACxDjoB,EAAIqC,eAAe4lB,aACnBmD,GAAsB,GAExBprB,EAAIqrB,SAMR,SAASL,EAAQ1T,GACf12B,EAAM,UAAW02B,GACjBmT,IACAL,EAAKvtC,eAAe,QAASmuC,GACU,IAAnChE,EAAgBoD,EAAM,UAAgBA,EAAKrtC,KAAK,QAASu6B,GAO/D,SAASuT,IACPT,EAAKvtC,eAAe,SAAUiuC,GAC9BL,IAGF,SAASK,IACPlqC,EAAM,YACNwpC,EAAKvtC,eAAe,QAASguC,GAC7BJ,IAIF,SAASA,IACP7pC,EAAM,UACNof,EAAIyqB,OAAOL,GAYb,OA1DApqB,EAAIvjB,GAAG,OAAQwuC,GA9gBjB,SAAyBvrC,EAASjC,EAAOmL,GAGvC,GAAuC,mBAA5BlJ,EAAQ1C,gBAAgC,OAAO0C,EAAQ1C,gBAAgBS,EAAOmL,GAMpFlJ,EAAQg2B,SAAYh2B,EAAQg2B,QAAQj4B,GAAuChjB,EAAQilB,EAAQg2B,QAAQj4B,IAASiC,EAAQg2B,QAAQj4B,GAAOjF,QAAQoQ,GAASlJ,EAAQg2B,QAAQj4B,GAAS,CAACmL,EAAIlJ,EAAQg2B,QAAQj4B,IAAtJiC,EAAQjD,GAAGgB,EAAOmL,GAkiBnE5L,CAAgBotC,EAAM,QAASY,GAO/BZ,EAAKztC,KAAK,QAASkuC,GAMnBT,EAAKztC,KAAK,SAAUmuC,GAQpBV,EAAKrtC,KAAK,OAAQijB,GAGbxR,EAAMk5B,UACT9mC,EAAM,eACNof,EAAIsrB,UAGClB,GAeTxoB,EAASvwC,UAAUo5D,OAAS,SAAUL,GACpC,IAAI57B,EAAQ98B,KAAK2wC,eACbsoB,EAAa,CAAEC,YAAY,GAG/B,GAAyB,IAArBp8B,EAAMi5B,WAAkB,OAAO/1D,KAGnC,GAAyB,IAArB88B,EAAMi5B,WAER,OAAI2C,GAAQA,IAAS57B,EAAMg5B,MAAc91D,MAEpC04D,IAAMA,EAAO57B,EAAMg5B,OAGxBh5B,EAAMg5B,MAAQ,KACdh5B,EAAMi5B,WAAa,EACnBj5B,EAAMk5B,SAAU,EACZ0C,GAAMA,EAAKrtC,KAAK,SAAUrrB,KAAMi5D,GAC7Bj5D,MAKT,IAAK04D,EAAM,CAET,IAAImB,EAAQ/8B,EAAMg5B,MACd1sC,EAAM0T,EAAMi5B,WAChBj5B,EAAMg5B,MAAQ,KACdh5B,EAAMi5B,WAAa,EACnBj5B,EAAMk5B,SAAU,EAEhB,IAAK,IAAIj4D,EAAI,EAAGA,EAAIqrB,EAAKrrB,IACvB87D,EAAM97D,GAAGstB,KAAK,SAAUrrB,KAAMi5D,GAC/B,OAAOj5D,KAIV,IAAI8iB,EAAQuQ,EAAQyJ,EAAMg5B,MAAO4C,GACjC,OAAe,IAAX51C,EAAqB9iB,MAEzB88B,EAAMg5B,MAAMjvC,OAAO/D,EAAO,GAC1Bga,EAAMi5B,YAAc,EACK,IAArBj5B,EAAMi5B,aAAkBj5B,EAAMg5B,MAAQh5B,EAAMg5B,MAAM,IAEtD4C,EAAKrtC,KAAK,SAAUrrB,KAAMi5D,GAEnBj5D,OAKTkwC,EAASvwC,UAAUorB,GAAK,SAAU+uC,EAAI5iC,GACpC,IAAIrrB,EAAMo6C,EAAOtmD,UAAUorB,GAAG7sB,KAAK8B,KAAM85D,EAAI5iC,GAE7C,GAAW,SAAP4iC,GAEkC,IAAhC95D,KAAK2wC,eAAeqlB,SAAmBh2D,KAAK45D,cAC3C,GAAW,aAAPE,EAAmB,CAC5B,IAAIh9B,EAAQ98B,KAAK2wC,eACZ7T,EAAMm5B,YAAen5B,EAAMu5B,oBAC9Bv5B,EAAMu5B,kBAAoBv5B,EAAMq5B,cAAe,EAC/Cr5B,EAAMs5B,iBAAkB,EACnBt5B,EAAMo5B,QAEAp5B,EAAMrxB,QACfqrD,EAAa92D,MAFb8vC,EAAIplB,SAASmtC,EAAkB73D,OAOrC,OAAO6L,GAETqkC,EAASvwC,UAAUqrB,YAAcklB,EAASvwC,UAAUorB,GASpDmlB,EAASvwC,UAAUi6D,OAAS,WAC1B,IAAI98B,EAAQ98B,KAAK2wC,eAMjB,OALK7T,EAAMk5B,UACT9mC,EAAM,UACN4N,EAAMk5B,SAAU,EAMpB,SAAgB3O,EAAQvqB,GACjBA,EAAMw5B,kBACTx5B,EAAMw5B,iBAAkB,EACxBxmB,EAAIplB,SAASotC,EAASzQ,EAAQvqB,IAR9B88B,CAAO55D,KAAM88B,IAER98B,MAuBTkwC,EAASvwC,UAAUg6D,MAAQ,WAOzB,OANAzqC,EAAM,wBAAyBlvB,KAAK2wC,eAAeqlB,UAC/C,IAAUh2D,KAAK2wC,eAAeqlB,UAChC9mC,EAAM,SACNlvB,KAAK2wC,eAAeqlB,SAAU,EAC9Bh2D,KAAKqrB,KAAK,UAELrrB,MAYTkwC,EAASvwC,UAAUo6D,KAAO,SAAU1S,GAClC,IAAI3xB,EAAQ11B,KAER88B,EAAQ98B,KAAK2wC,eACbqpB,GAAS,EA4Bb,IAAK,IAAIj8D,KA1BTspD,EAAOt8B,GAAG,OAAO,WAEf,GADAmE,EAAM,eACF4N,EAAM25B,UAAY35B,EAAM0T,MAAO,CACjC,IAAIyC,EAAQnW,EAAM25B,QAAQ1zD,MACtBkwC,GAASA,EAAMxnC,QAAQiqB,EAAM3qB,KAAKkoC,GAGxCvd,EAAM3qB,KAAK,SAGbs8C,EAAOt8B,GAAG,QAAQ,SAAUkoB,IAC1B/jB,EAAM,gBACF4N,EAAM25B,UAASxjB,EAAQnW,EAAM25B,QAAQ53B,MAAMoU,IAG3CnW,EAAMyqB,YAAc,MAACtU,KAAyDnW,EAAMyqB,YAAgBtU,GAAUA,EAAMxnC,UAE9GiqB,EAAM3qB,KAAKkoC,KAEnB+mB,GAAS,EACT3S,EAAOsS,aAMGtS,OACI/mD,IAAZN,KAAKjC,IAAyC,mBAAdspD,EAAOtpD,KACzCiC,KAAKjC,GAAK,SAAUygC,GAClB,OAAO,WACL,OAAO6oB,EAAO7oB,GAAQ7T,MAAM08B,EAAQ/3C,YAF9B,CAIRvR,IAKN,IAAK,IAAIyB,EAAI,EAAGA,EAAIk2D,EAAajqD,OAAQjM,IACvC6nD,EAAOt8B,GAAG2qC,EAAal2D,GAAIQ,KAAKqrB,KAAK9rB,KAAKS,KAAM01D,EAAal2D,KAa/D,OARAQ,KAAK02D,MAAQ,SAAUl3D,GACrB0vB,EAAM,gBAAiB1vB,GACnBw6D,IACFA,GAAS,EACT3S,EAAOuS,WAIJ55D,MAGTvB,OAAOC,eAAewxC,EAASvwC,UAAW,wBAAyB,CAIjEhB,YAAY,EACZC,IAAK,WACH,OAAOoB,KAAK2wC,eAAeD,iBAK/BR,EAAS+pB,UAAYlC,I,uCCz3BrBj6D,EAAOD,QAAU,EAAQ,IAAUimD,c,6BCInC,IAAIhU,EAAM,EAAQ,IA8DlB,SAASoqB,EAAYt2B,EAAM/T,GACzB+T,EAAKvY,KAAK,QAASwE,GAGrB/xB,EAAOD,QAAU,CACfi0B,QA/DF,SAAiBjC,EAAKD,GACpB,IAAI8F,EAAQ11B,KAERm6D,EAAoBn6D,KAAK2wC,gBAAkB3wC,KAAK2wC,eAAeC,UAC/DwpB,EAAoBp6D,KAAKuwC,gBAAkBvwC,KAAKuwC,eAAeK,UAEnE,OAAIupB,GAAqBC,GACnBxqC,EACFA,EAAGC,IACMA,GAAS7vB,KAAKuwC,gBAAmBvwC,KAAKuwC,eAAeqY,cAC9D9Y,EAAIplB,SAASwvC,EAAal6D,KAAM6vB,GAE3B7vB,OAMLA,KAAK2wC,iBACP3wC,KAAK2wC,eAAeC,WAAY,GAI9B5wC,KAAKuwC,iBACPvwC,KAAKuwC,eAAeK,WAAY,GAGlC5wC,KAAK6wC,SAAShhB,GAAO,MAAM,SAAUA,IAC9BD,GAAMC,GACTigB,EAAIplB,SAASwvC,EAAaxkC,EAAO7F,GAC7B6F,EAAM6a,iBACR7a,EAAM6a,eAAeqY,cAAe,IAE7Bh5B,GACTA,EAAGC,MAIA7vB,OA0BPirD,UAvBF,WACMjrD,KAAK2wC,iBACP3wC,KAAK2wC,eAAeC,WAAY,EAChC5wC,KAAK2wC,eAAeulB,SAAU,EAC9Bl2D,KAAK2wC,eAAeH,OAAQ,EAC5BxwC,KAAK2wC,eAAeslB,YAAa,GAG/Bj2D,KAAKuwC,iBACPvwC,KAAKuwC,eAAeK,WAAY,EAChC5wC,KAAKuwC,eAAeC,OAAQ,EAC5BxwC,KAAKuwC,eAAewX,QAAS,EAC7B/nD,KAAKuwC,eAAeyX,UAAW,EAC/BhoD,KAAKuwC,eAAeqY,cAAe,M,6BCrCvC,IAAI1kB,EAAS,EAAQ,KAAeA,OAGhCa,EAAab,EAAOa,YAAc,SAAUD,GAE9C,QADAA,EAAW,GAAKA,IACIA,EAASzO,eAC3B,IAAK,MAAM,IAAK,OAAO,IAAK,QAAQ,IAAK,QAAQ,IAAK,SAAS,IAAK,SAAS,IAAK,OAAO,IAAK,QAAQ,IAAK,UAAU,IAAK,WAAW,IAAK,MACxI,OAAO,EACT,QACE,OAAO,IA4Cb,SAASm/B,EAAc1wB,GAErB,IAAImzB,EACJ,OAFAj4D,KAAK8kC,SAXP,SAA2BwyB,GACzB,IAAI+C,EA/BN,SAA4B/C,GAC1B,IAAKA,EAAK,MAAO,OAEjB,IADA,IAAIgD,IAEF,OAAQhD,GACN,IAAK,OACL,IAAK,QACH,MAAO,OACT,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAO,UACT,IAAK,SACL,IAAK,SACH,MAAO,SACT,IAAK,SACL,IAAK,QACL,IAAK,MACH,OAAOA,EACT,QACE,GAAIgD,EAAS,OACbhD,GAAO,GAAKA,GAAKjhC,cACjBikC,GAAU,GAQLC,CAAmBjD,GAC9B,GAAoB,iBAAT+C,IAAsBn2B,EAAOa,aAAeA,IAAeA,EAAWuyB,IAAO,MAAM,IAAIr2D,MAAM,qBAAuBq2D,GAC/H,OAAO+C,GAAQ/C,EAQCkD,CAAkB11B,GAE1B9kC,KAAK8kC,UACX,IAAK,UACH9kC,KAAK0a,KAAO+/C,EACZz6D,KAAK+C,IAAM23D,EACXzC,EAAK,EACL,MACF,IAAK,OACHj4D,KAAK26D,SAAWC,EAChB3C,EAAK,EACL,MACF,IAAK,SACHj4D,KAAK0a,KAAOmgD,EACZ76D,KAAK+C,IAAM+3D,EACX7C,EAAK,EACL,MACF,QAGE,OAFAj4D,KAAK6+B,MAAQk8B,OACb/6D,KAAK+C,IAAMi4D,GAGfh7D,KAAKi7D,SAAW,EAChBj7D,KAAKk7D,UAAY,EACjBl7D,KAAKm7D,SAAWj3B,EAAOM,YAAYyzB,GAoCrC,SAASmD,EAAcC,GACrB,OAAIA,GAAQ,IAAa,EAAWA,GAAQ,GAAM,EAAa,EAAWA,GAAQ,GAAM,GAAa,EAAWA,GAAQ,GAAM,GAAa,EACpIA,GAAQ,GAAM,GAAQ,GAAK,EA2DpC,SAAST,EAAaj0B,GACpB,IAAI9mC,EAAIG,KAAKk7D,UAAYl7D,KAAKi7D,SAC1Bp8D,EAtBN,SAA6B+kC,EAAM+C,EAAK9mC,GACtC,GAAwB,MAAV,IAAT8mC,EAAI,IAEP,OADA/C,EAAKq3B,SAAW,EACT,IAET,GAAIr3B,EAAKq3B,SAAW,GAAKt0B,EAAIl7B,OAAS,EAAG,CACvC,GAAwB,MAAV,IAATk7B,EAAI,IAEP,OADA/C,EAAKq3B,SAAW,EACT,IAET,GAAIr3B,EAAKq3B,SAAW,GAAKt0B,EAAIl7B,OAAS,GACZ,MAAV,IAATk7B,EAAI,IAEP,OADA/C,EAAKq3B,SAAW,EACT,KASLK,CAAoBt7D,KAAM2mC,GAClC,YAAUrmC,IAANzB,EAAwBA,EACxBmB,KAAKi7D,UAAYt0B,EAAIl7B,QACvBk7B,EAAIvB,KAAKplC,KAAKm7D,SAAUt7D,EAAG,EAAGG,KAAKi7D,UAC5Bj7D,KAAKm7D,SAAS7vD,SAAStL,KAAK8kC,SAAU,EAAG9kC,KAAKk7D,aAEvDv0B,EAAIvB,KAAKplC,KAAKm7D,SAAUt7D,EAAG,EAAG8mC,EAAIl7B,aAClCzL,KAAKi7D,UAAYt0B,EAAIl7B,SA2BvB,SAASgvD,EAAU9zB,EAAK5oC,GACtB,IAAK4oC,EAAIl7B,OAAS1N,GAAK,GAAM,EAAG,CAC9B,IAAIc,EAAI8nC,EAAIr7B,SAAS,UAAWvN,GAChC,GAAIc,EAAG,CACL,IAAIT,EAAIS,EAAE6pB,WAAW7pB,EAAE4M,OAAS,GAChC,GAAIrN,GAAK,OAAUA,GAAK,MAKtB,OAJA4B,KAAKi7D,SAAW,EAChBj7D,KAAKk7D,UAAY,EACjBl7D,KAAKm7D,SAAS,GAAKx0B,EAAIA,EAAIl7B,OAAS,GACpCzL,KAAKm7D,SAAS,GAAKx0B,EAAIA,EAAIl7B,OAAS,GAC7B5M,EAAEipB,MAAM,GAAI,GAGvB,OAAOjpB,EAKT,OAHAmB,KAAKi7D,SAAW,EAChBj7D,KAAKk7D,UAAY,EACjBl7D,KAAKm7D,SAAS,GAAKx0B,EAAIA,EAAIl7B,OAAS,GAC7Bk7B,EAAIr7B,SAAS,UAAWvN,EAAG4oC,EAAIl7B,OAAS,GAKjD,SAASivD,EAAS/zB,GAChB,IAAI9nC,EAAI8nC,GAAOA,EAAIl7B,OAASzL,KAAK6+B,MAAM8H,GAAO,GAC9C,GAAI3mC,KAAKi7D,SAAU,CACjB,IAAIl4D,EAAM/C,KAAKk7D,UAAYl7D,KAAKi7D,SAChC,OAAOp8D,EAAImB,KAAKm7D,SAAS7vD,SAAS,UAAW,EAAGvI,GAElD,OAAOlE,EAGT,SAASg8D,EAAWl0B,EAAK5oC,GACvB,IAAIyB,GAAKmnC,EAAIl7B,OAAS1N,GAAK,EAC3B,OAAU,IAANyB,EAAgBmnC,EAAIr7B,SAAS,SAAUvN,IAC3CiC,KAAKi7D,SAAW,EAAIz7D,EACpBQ,KAAKk7D,UAAY,EACP,IAAN17D,EACFQ,KAAKm7D,SAAS,GAAKx0B,EAAIA,EAAIl7B,OAAS,IAEpCzL,KAAKm7D,SAAS,GAAKx0B,EAAIA,EAAIl7B,OAAS,GACpCzL,KAAKm7D,SAAS,GAAKx0B,EAAIA,EAAIl7B,OAAS,IAE/Bk7B,EAAIr7B,SAAS,SAAUvN,EAAG4oC,EAAIl7B,OAASjM,IAGhD,SAASs7D,EAAUn0B,GACjB,IAAI9nC,EAAI8nC,GAAOA,EAAIl7B,OAASzL,KAAK6+B,MAAM8H,GAAO,GAC9C,OAAI3mC,KAAKi7D,SAAiBp8D,EAAImB,KAAKm7D,SAAS7vD,SAAS,SAAU,EAAG,EAAItL,KAAKi7D,UACpEp8D,EAIT,SAASk8D,EAAYp0B,GACnB,OAAOA,EAAIr7B,SAAStL,KAAK8kC,UAG3B,SAASk2B,EAAUr0B,GACjB,OAAOA,GAAOA,EAAIl7B,OAASzL,KAAK6+B,MAAM8H,GAAO,GAzN/C9oC,EAAQ23D,cAAgBA,EA6BxBA,EAAc71D,UAAUk/B,MAAQ,SAAU8H,GACxC,GAAmB,IAAfA,EAAIl7B,OAAc,MAAO,GAC7B,IAAI5M,EACAd,EACJ,GAAIiC,KAAKi7D,SAAU,CAEjB,QAAU36D,KADVzB,EAAImB,KAAK26D,SAASh0B,IACG,MAAO,GAC5B5oC,EAAIiC,KAAKi7D,SACTj7D,KAAKi7D,SAAW,OAEhBl9D,EAAI,EAEN,OAAIA,EAAI4oC,EAAIl7B,OAAe5M,EAAIA,EAAImB,KAAK0a,KAAKisB,EAAK5oC,GAAKiC,KAAK0a,KAAKisB,EAAK5oC,GAC/Dc,GAAK,IAGd22D,EAAc71D,UAAUoD,IAwGxB,SAAiB4jC,GACf,IAAI9nC,EAAI8nC,GAAOA,EAAIl7B,OAASzL,KAAK6+B,MAAM8H,GAAO,GAC9C,OAAI3mC,KAAKi7D,SAAiBp8D,EAAI,IACvBA,GAxGT22D,EAAc71D,UAAU+a,KA0FxB,SAAkBisB,EAAK5oC,GACrB,IAAIw9D,EArEN,SAA6B33B,EAAM+C,EAAK5oC,GACtC,IAAIgpC,EAAIJ,EAAIl7B,OAAS,EACrB,GAAIs7B,EAAIhpC,EAAG,OAAO,EAClB,IAAIk6D,EAAKmD,EAAcz0B,EAAII,IAC3B,GAAIkxB,GAAM,EAER,OADIA,EAAK,IAAGr0B,EAAKq3B,SAAWhD,EAAK,GAC1BA,EAET,KAAMlxB,EAAIhpC,IAAa,IAARk6D,EAAW,OAAO,EAEjC,IADAA,EAAKmD,EAAcz0B,EAAII,MACb,EAER,OADIkxB,EAAK,IAAGr0B,EAAKq3B,SAAWhD,EAAK,GAC1BA,EAET,KAAMlxB,EAAIhpC,IAAa,IAARk6D,EAAW,OAAO,EAEjC,IADAA,EAAKmD,EAAcz0B,EAAII,MACb,EAIR,OAHIkxB,EAAK,IACI,IAAPA,EAAUA,EAAK,EAAOr0B,EAAKq3B,SAAWhD,EAAK,GAE1CA,EAET,OAAO,EA+CKuD,CAAoBx7D,KAAM2mC,EAAK5oC,GAC3C,IAAKiC,KAAKi7D,SAAU,OAAOt0B,EAAIr7B,SAAS,OAAQvN,GAChDiC,KAAKk7D,UAAYK,EACjB,IAAIx4D,EAAM4jC,EAAIl7B,QAAU8vD,EAAQv7D,KAAKi7D,UAErC,OADAt0B,EAAIvB,KAAKplC,KAAKm7D,SAAU,EAAGp4D,GACpB4jC,EAAIr7B,SAAS,OAAQvN,EAAGgF,IA7FjCyyD,EAAc71D,UAAUg7D,SAAW,SAAUh0B,GAC3C,GAAI3mC,KAAKi7D,UAAYt0B,EAAIl7B,OAEvB,OADAk7B,EAAIvB,KAAKplC,KAAKm7D,SAAUn7D,KAAKk7D,UAAYl7D,KAAKi7D,SAAU,EAAGj7D,KAAKi7D,UACzDj7D,KAAKm7D,SAAS7vD,SAAStL,KAAK8kC,SAAU,EAAG9kC,KAAKk7D,WAEvDv0B,EAAIvB,KAAKplC,KAAKm7D,SAAUn7D,KAAKk7D,UAAYl7D,KAAKi7D,SAAU,EAAGt0B,EAAIl7B,QAC/DzL,KAAKi7D,UAAYt0B,EAAIl7B,S,6BCrEvB3N,EAAOD,QAAUqoD,EAEjB,IAAIlW,EAAS,EAAQ,IAGjBhhB,EAAOvwB,OAAOY,OAAO,EAAQ,KAMjC,SAASo8D,EAAe7V,EAAI90B,GAC1B,IAAI4qC,EAAK17D,KAAK27D,gBACdD,EAAGE,cAAe,EAElB,IAAIhsC,EAAK8rC,EAAGlT,QAEZ,IAAK54B,EACH,OAAO5vB,KAAKqrB,KAAK,QAAS,IAAIpqB,MAAM,yCAGtCy6D,EAAGG,WAAa,KAChBH,EAAGlT,QAAU,KAED,MAAR13B,GACF9wB,KAAK+K,KAAK+lB,GAEZlB,EAAGg2B,GAEH,IAAIkW,EAAK97D,KAAK2wC,eACdmrB,EAAG5F,SAAU,GACT4F,EAAG3F,cAAgB2F,EAAGrwD,OAASqwD,EAAGprB,gBACpC1wC,KAAK02D,MAAMoF,EAAGprB,eAIlB,SAASwV,EAAUp7C,GACjB,KAAM9K,gBAAgBkmD,GAAY,OAAO,IAAIA,EAAUp7C,GAEvDklC,EAAO9xC,KAAK8B,KAAM8K,GAElB9K,KAAK27D,gBAAkB,CACrBF,eAAgBA,EAAel8D,KAAKS,MACpC+7D,eAAe,EACfH,cAAc,EACdpT,QAAS,KACTqT,WAAY,KACZG,cAAe,MAIjBh8D,KAAK2wC,eAAewlB,cAAe,EAKnCn2D,KAAK2wC,eAAeoH,MAAO,EAEvBjtC,IAC+B,mBAAtBA,EAAQmxD,YAA0Bj8D,KAAKk8D,WAAapxD,EAAQmxD,WAE1C,mBAAlBnxD,EAAQqxD,QAAsBn8D,KAAKo8D,OAAStxD,EAAQqxD,QAIjEn8D,KAAK+qB,GAAG,YAAak/B,GAGvB,SAASA,IACP,IAAIv0B,EAAQ11B,KAEe,mBAAhBA,KAAKo8D,OACdp8D,KAAKo8D,QAAO,SAAUxW,EAAI90B,GACxBurC,EAAK3mC,EAAOkwB,EAAI90B,MAGlBurC,EAAKr8D,KAAM,KAAM,MA2DrB,SAASq8D,EAAKhV,EAAQzB,EAAI90B,GACxB,GAAI80B,EAAI,OAAOyB,EAAOh8B,KAAK,QAASu6B,GAOpC,GALY,MAAR90B,GACFu2B,EAAOt8C,KAAK+lB,GAIVu2B,EAAO9W,eAAe9kC,OAAQ,MAAM,IAAIxK,MAAM,8CAElD,GAAIomD,EAAOsU,gBAAgBC,aAAc,MAAM,IAAI36D,MAAM,kDAEzD,OAAOomD,EAAOt8C,KAAK,MA7IrBikB,EAAKihB,SAAW,EAAQ,IAGxBjhB,EAAKihB,SAASiW,EAAWlW,GAuEzBkW,EAAUvmD,UAAUoL,KAAO,SAAUkoC,EAAOnO,GAE1C,OADA9kC,KAAK27D,gBAAgBI,eAAgB,EAC9B/rB,EAAOrwC,UAAUoL,KAAK7M,KAAK8B,KAAMizC,EAAOnO,IAajDohB,EAAUvmD,UAAUu8D,WAAa,SAAUjpB,EAAOnO,EAAUlV,GAC1D,MAAM,IAAI3uB,MAAM,oCAGlBilD,EAAUvmD,UAAU0pD,OAAS,SAAUpW,EAAOnO,EAAUlV,GACtD,IAAI8rC,EAAK17D,KAAK27D,gBAId,GAHAD,EAAGlT,QAAU54B,EACb8rC,EAAGG,WAAa5oB,EAChByoB,EAAGM,cAAgBl3B,GACd42B,EAAGE,aAAc,CACpB,IAAIE,EAAK97D,KAAK2wC,gBACV+qB,EAAGK,eAAiBD,EAAG3F,cAAgB2F,EAAGrwD,OAASqwD,EAAGprB,gBAAe1wC,KAAK02D,MAAMoF,EAAGprB,iBAO3FwV,EAAUvmD,UAAU+2D,MAAQ,SAAUl3D,GACpC,IAAIk8D,EAAK17D,KAAK27D,gBAEQ,OAAlBD,EAAGG,YAAuBH,EAAGlT,UAAYkT,EAAGE,cAC9CF,EAAGE,cAAe,EAClB57D,KAAKk8D,WAAWR,EAAGG,WAAYH,EAAGM,cAAeN,EAAGD,iBAIpDC,EAAGK,eAAgB,GAIvB7V,EAAUvmD,UAAUkxC,SAAW,SAAUhhB,EAAKD,GAC5C,IAAI0sC,EAASt8D,KAEbgwC,EAAOrwC,UAAUkxC,SAAS3yC,KAAK8B,KAAM6vB,GAAK,SAAU0sC,GAClD3sC,EAAG2sC,GACHD,EAAOjxC,KAAK,c,iBCpMhB,YAqBA,IAAImxC,EAA4B/9D,OAAO+9D,2BACrC,SAAmCv3B,GAGjC,IAFA,IAAIlC,EAAOtkC,OAAOskC,KAAKkC,GACnBw3B,EAAc,GACT1+D,EAAI,EAAGA,EAAIglC,EAAKt3B,OAAQ1N,IAC/B0+D,EAAY15B,EAAKhlC,IAAMU,OAAO8yC,yBAAyBtM,EAAKlC,EAAKhlC,IAEnE,OAAO0+D,GAGPC,EAAe,WACnB7+D,EAAQyxB,OAAS,SAAStI,GACxB,IAAKsrB,EAAStrB,GAAI,CAEhB,IADA,IAAI21C,EAAU,GACL5+D,EAAI,EAAGA,EAAIuR,UAAU7D,OAAQ1N,IACpC4+D,EAAQ5xD,KAAKo4B,EAAQ7zB,UAAUvR,KAEjC,OAAO4+D,EAAQn1C,KAAK,KAGlBzpB,EAAI,EAmBR,IAnBA,IACIwT,EAAOjC,UACP8Z,EAAM7X,EAAK9F,OACX0d,EAAMvO,OAAOoM,GAAGxiB,QAAQk4D,GAAc,SAAShzB,GACjD,GAAU,OAANA,EAAY,MAAO,IACvB,GAAI3rC,GAAKqrB,EAAK,OAAOsgB,EACrB,OAAQA,GACN,IAAK,KAAM,OAAO9uB,OAAOrJ,EAAKxT,MAC9B,IAAK,KAAM,OAAOmkB,OAAO3Q,EAAKxT,MAC9B,IAAK,KACH,IACE,OAAOu9B,KAAK0D,UAAUztB,EAAKxT,MAC3B,MAAOqzC,GACP,MAAO,aAEX,QACE,OAAO1H,MAGJA,EAAIn4B,EAAKxT,GAAIA,EAAIqrB,EAAKsgB,EAAIn4B,IAAOxT,GACpCo0C,EAAOzI,KAAOoH,EAASpH,GACzBvgB,GAAO,IAAMugB,EAEbvgB,GAAO,IAAMga,EAAQuG,GAGzB,OAAOvgB,GAOTtrB,EAAQmpD,UAAY,SAAS9vB,EAAIqd,GAC/B,QAAuB,IAAZrlC,IAAqD,IAA1BA,EAAQ0tD,cAC5C,OAAO1lC,EAIT,QAAuB,IAAZhoB,EACT,OAAO,WACL,OAAOrR,EAAQmpD,UAAU9vB,EAAIqd,GAAK5pB,MAAM3qB,KAAMsP,YAIlD,IAAIs1C,GAAS,EAeb,OAdA,WACE,IAAKA,EAAQ,CACX,GAAI11C,EAAQ2tD,iBACV,MAAM,IAAI57D,MAAMszC,GACPrlC,EAAQ4tD,iBACjB/vC,QAAQ6P,MAAM2X,GAEdxnB,QAAQC,MAAMunB,GAEhBqQ,GAAS,EAEX,OAAO1tB,EAAGvM,MAAM3qB,KAAMsP,aAO1B,IACIytD,EADAC,EAAS,GA6Bb,SAAS75B,EAAQ8B,EAAKg4B,GAEpB,IAAIC,EAAM,CACRC,KAAM,GACNC,QAASC,GAkBX,OAfI/tD,UAAU7D,QAAU,IAAGyxD,EAAII,MAAQhuD,UAAU,IAC7CA,UAAU7D,QAAU,IAAGyxD,EAAIK,OAASjuD,UAAU,IAC9C4iC,EAAU+qB,GAEZC,EAAIM,WAAaP,EACRA,GAETp/D,EAAQ4/D,QAAQP,EAAKD,GAGnBzrB,EAAY0rB,EAAIM,cAAaN,EAAIM,YAAa,GAC9ChsB,EAAY0rB,EAAII,SAAQJ,EAAII,MAAQ,GACpC9rB,EAAY0rB,EAAIK,UAASL,EAAIK,QAAS,GACtC/rB,EAAY0rB,EAAIQ,iBAAgBR,EAAIQ,eAAgB,GACpDR,EAAIK,SAAQL,EAAIE,QAAUO,GACvBC,EAAYV,EAAKj4B,EAAKi4B,EAAII,OAoCnC,SAASK,EAAiBx0C,EAAK00C,GAC7B,IAAIC,EAAQ36B,EAAQ46B,OAAOF,GAE3B,OAAIC,EACK,KAAY36B,EAAQo6B,OAAOO,GAAO,GAAK,IAAM30C,EAC7C,KAAYga,EAAQo6B,OAAOO,GAAO,GAAK,IAEvC30C,EAKX,SAASk0C,EAAel0C,EAAK00C,GAC3B,OAAO10C,EAeT,SAASy0C,EAAYV,EAAKl+D,EAAOg/D,GAG/B,GAAId,EAAIQ,eACJ1+D,GACA4zC,EAAW5zC,EAAMmkC,UAEjBnkC,EAAMmkC,UAAYtlC,EAAQslC,WAExBnkC,EAAMi0B,aAAej0B,EAAMi0B,YAAYtzB,YAAcX,GAAQ,CACjE,IAAIgI,EAAMhI,EAAMmkC,QAAQ66B,EAAcd,GAItC,OAHK5qB,EAAStrC,KACZA,EAAM42D,EAAYV,EAAKl2D,EAAKg3D,IAEvBh3D,EAIT,IAAIi3D,EA+FN,SAAyBf,EAAKl+D,GAC5B,GAAIwyC,EAAYxyC,GACd,OAAOk+D,EAAIE,QAAQ,YAAa,aAClC,GAAI9qB,EAAStzC,GAAQ,CACnB,IAAIk/D,EAAS,IAAO5iC,KAAK0D,UAAUhgC,GAAOwF,QAAQ,SAAU,IAClBA,QAAQ,KAAM,OACdA,QAAQ,OAAQ,KAAO,IACjE,OAAO04D,EAAIE,QAAQc,EAAQ,UAE7B,GAAI7rB,EAASrzC,GACX,OAAOk+D,EAAIE,QAAQ,GAAKp+D,EAAO,UACjC,GAAIkzC,EAAUlzC,GACZ,OAAOk+D,EAAIE,QAAQ,GAAKp+D,EAAO,WAEjC,GAAImzC,EAAOnzC,GACT,OAAOk+D,EAAIE,QAAQ,OAAQ,QA9Gbe,CAAgBjB,EAAKl+D,GACrC,GAAIi/D,EACF,OAAOA,EAIT,IAAIl7B,EAAOtkC,OAAOskC,KAAK/jC,GACnBo/D,EApCN,SAAqB5zC,GACnB,IAAI/a,EAAO,GAMX,OAJA+a,EAAMre,SAAQ,SAAS8lB,EAAK6C,GAC1BrlB,EAAKwiB,IAAO,KAGPxiB,EA6BW4uD,CAAYt7B,GAQ9B,GANIm6B,EAAIM,aACNz6B,EAAOtkC,OAAOmlD,oBAAoB5kD,IAKhC2zC,EAAQ3zC,KACJ+jC,EAAK1P,QAAQ,YAAc,GAAK0P,EAAK1P,QAAQ,gBAAkB,GACrE,OAAOirC,EAAYt/D,GAIrB,GAAoB,IAAhB+jC,EAAKt3B,OAAc,CACrB,GAAImnC,EAAW5zC,GAAQ,CACrB,IAAIV,EAAOU,EAAMV,KAAO,KAAOU,EAAMV,KAAO,GAC5C,OAAO4+D,EAAIE,QAAQ,YAAc9+D,EAAO,IAAK,WAE/C,GAAIk0C,EAASxzC,GACX,OAAOk+D,EAAIE,QAAQrsB,OAAOpxC,UAAU2L,SAASpN,KAAKc,GAAQ,UAE5D,GAAI0zC,EAAO1zC,GACT,OAAOk+D,EAAIE,QAAQ/9B,KAAK1/B,UAAU2L,SAASpN,KAAKc,GAAQ,QAE1D,GAAI2zC,EAAQ3zC,GACV,OAAOs/D,EAAYt/D,GAIvB,IA2CIwkC,EA3CA99B,EAAO,GAAI8kB,GAAQ,EAAO+zC,EAAS,CAAC,IAAK,MAGzCx1D,EAAQ/J,KACVwrB,GAAQ,EACR+zC,EAAS,CAAC,IAAK,MAIb3rB,EAAW5zC,MAEb0G,EAAO,cADC1G,EAAMV,KAAO,KAAOU,EAAMV,KAAO,IACf,KAkB5B,OAdIk0C,EAASxzC,KACX0G,EAAO,IAAMqrC,OAAOpxC,UAAU2L,SAASpN,KAAKc,IAI1C0zC,EAAO1zC,KACT0G,EAAO,IAAM25B,KAAK1/B,UAAU6+D,YAAYtgE,KAAKc,IAI3C2zC,EAAQ3zC,KACV0G,EAAO,IAAM44D,EAAYt/D,IAGP,IAAhB+jC,EAAKt3B,QAAkB+e,GAAyB,GAAhBxrB,EAAMyM,OAItCuyD,EAAe,EACbxrB,EAASxzC,GACJk+D,EAAIE,QAAQrsB,OAAOpxC,UAAU2L,SAASpN,KAAKc,GAAQ,UAEnDk+D,EAAIE,QAAQ,WAAY,YAInCF,EAAIC,KAAKpyD,KAAK/L,GAIZwkC,EADEhZ,EAsCN,SAAqB0yC,EAAKl+D,EAAOg/D,EAAcI,EAAar7B,GAE1D,IADA,IAAIS,EAAS,GACJzlC,EAAI,EAAGC,EAAIgB,EAAMyM,OAAQ1N,EAAIC,IAAKD,EACrC6B,EAAeZ,EAAO4b,OAAO7c,IAC/BylC,EAAOz4B,KAAK0zD,EAAevB,EAAKl+D,EAAOg/D,EAAcI,EACjDxjD,OAAO7c,IAAI,IAEfylC,EAAOz4B,KAAK,IAShB,OANAg4B,EAAK52B,SAAQ,SAAS7M,GACfA,EAAIq1B,MAAM,UACb6O,EAAOz4B,KAAK0zD,EAAevB,EAAKl+D,EAAOg/D,EAAcI,EACjD9+D,GAAK,OAGNkkC,EArDIk7B,CAAYxB,EAAKl+D,EAAOg/D,EAAcI,EAAar7B,GAEnDA,EAAK9oB,KAAI,SAAS3a,GACzB,OAAOm/D,EAAevB,EAAKl+D,EAAOg/D,EAAcI,EAAa9+D,EAAKkrB,MAItE0yC,EAAIC,KAAK56D,MA6GX,SAA8BihC,EAAQ99B,EAAM64D,GAQ1C,GANa/6B,EAAOm7B,QAAO,SAASC,EAAMC,GAGxC,OADIA,EAAIxrC,QAAQ,OAAS,GAAGyrC,EACrBF,EAAOC,EAAIr6D,QAAQ,kBAAmB,IAAIiH,OAAS,IACzD,GAEU,GACX,OAAO8yD,EAAO,IACG,KAAT74D,EAAc,GAAKA,EAAO,OAC3B,IACA89B,EAAOhc,KAAK,SACZ,IACA+2C,EAAO,GAGhB,OAAOA,EAAO,GAAK74D,EAAO,IAAM89B,EAAOhc,KAAK,MAAQ,IAAM+2C,EAAO,GA5H1DQ,CAAqBv7B,EAAQ99B,EAAM64D,IAxBjCA,EAAO,GAAK74D,EAAO64D,EAAO,GA+CrC,SAASD,EAAYt/D,GACnB,MAAO,IAAMiC,MAAMtB,UAAU2L,SAASpN,KAAKc,GAAS,IAwBtD,SAASy/D,EAAevB,EAAKl+D,EAAOg/D,EAAcI,EAAa9+D,EAAKkrB,GAClE,IAAIlsB,EAAM6qB,EAAKsyB,EAsCf,IArCAA,EAAOh9C,OAAO8yC,yBAAyBvyC,EAAOM,IAAQ,CAAEN,MAAOA,EAAMM,KAC5DV,IAELuqB,EADEsyB,EAAKlwC,IACD2xD,EAAIE,QAAQ,kBAAmB,WAE/BF,EAAIE,QAAQ,WAAY,WAG5B3hB,EAAKlwC,MACP4d,EAAM+zC,EAAIE,QAAQ,WAAY,YAG7Bx9D,EAAew+D,EAAa9+D,KAC/BhB,EAAO,IAAMgB,EAAM,KAEhB6pB,IACC+zC,EAAIC,KAAK9pC,QAAQooB,EAAKz8C,OAAS,GAE/BmqB,EADEgpB,EAAO6rB,GACHJ,EAAYV,EAAKzhB,EAAKz8C,MAAO,MAE7B4+D,EAAYV,EAAKzhB,EAAKz8C,MAAOg/D,EAAe,IAE5C3qC,QAAQ,OAAS,IAErBlK,EADEqB,EACIrB,EAAI5B,MAAM,MAAMtN,KAAI,SAASlZ,GACjC,MAAO,KAAOA,KACbymB,KAAK,MAAMI,OAAO,GAEf,KAAOuB,EAAI5B,MAAM,MAAMtN,KAAI,SAASlZ,GACxC,MAAO,MAAQA,KACdymB,KAAK,OAIZ2B,EAAM+zC,EAAIE,QAAQ,aAAc,YAGhC5rB,EAAYlzC,GAAO,CACrB,GAAIksB,GAASlrB,EAAIq1B,MAAM,SACrB,OAAOxL,GAET7qB,EAAOg9B,KAAK0D,UAAU,GAAK1/B,IAClBq1B,MAAM,iCACbr2B,EAAOA,EAAKspB,OAAO,EAAGtpB,EAAKmN,OAAS,GACpCnN,EAAO4+D,EAAIE,QAAQ9+D,EAAM,UAEzBA,EAAOA,EAAKkG,QAAQ,KAAM,OACdA,QAAQ,OAAQ,KAChBA,QAAQ,WAAY,KAChClG,EAAO4+D,EAAIE,QAAQ9+D,EAAM,WAI7B,OAAOA,EAAO,KAAO6qB,EA2BvB,SAASpgB,EAAQi2D,GACf,OAAOl2D,MAAMC,QAAQi2D,GAIvB,SAAS9sB,EAAUriC,GACjB,MAAsB,kBAARA,EAIhB,SAASsiC,EAAOtiC,GACd,OAAe,OAARA,EAST,SAASwiC,EAASxiC,GAChB,MAAsB,iBAARA,EAIhB,SAASyiC,EAASziC,GAChB,MAAsB,iBAARA,EAShB,SAAS2hC,EAAY3hC,GACnB,YAAe,IAARA,EAIT,SAAS2iC,EAASC,GAChB,OAAO3B,EAAS2B,IAA8B,oBAAvBR,EAAeQ,GAIxC,SAAS3B,EAASjhC,GAChB,MAAsB,iBAARA,GAA4B,OAARA,EAIpC,SAAS6iC,EAAOr0C,GACd,OAAOyyC,EAASzyC,IAA4B,kBAAtB4zC,EAAe5zC,GAIvC,SAASs0C,EAAQ/mC,GACf,OAAOklC,EAASllC,KACW,mBAAtBqmC,EAAermC,IAA2BA,aAAa3K,OAI9D,SAAS2xC,EAAW/iC,GAClB,MAAsB,mBAARA,EAgBhB,SAASoiC,EAAezzC,GACtB,OAAOC,OAAOkB,UAAU2L,SAASpN,KAAKM,GAIxC,SAASygE,EAAIz/D,GACX,OAAOA,EAAI,GAAK,IAAMA,EAAE8L,SAAS,IAAM9L,EAAE8L,SAAS,IApbpDzN,EAAQsxB,SAAW,SAAS5jB,GAI1B,GAHIimC,EAAYurB,KACdA,EAAe7tD,EAAQmN,IAAIgT,YAAc,IAC3C9jB,EAAMA,EAAI2zD,eACLlC,EAAOzxD,GACV,GAAI,IAAIwlC,OAAO,MAAQxlC,EAAM,MAAO,KAAK6jB,KAAK2tC,GAAe,CAC3D,IAAIoC,EAAMjwD,EAAQiwD,IAClBnC,EAAOzxD,GAAO,WACZ,IAAIgpC,EAAM12C,EAAQyxB,OAAO3E,MAAM9sB,EAASyR,WACxCyd,QAAQC,MAAM,YAAazhB,EAAK4zD,EAAK5qB,SAGvCyoB,EAAOzxD,GAAO,aAGlB,OAAOyxD,EAAOzxD,IAoChB1N,EAAQslC,QAAUA,EAIlBA,EAAQo6B,OAAS,CACf,KAAS,CAAC,EAAG,IACb,OAAW,CAAC,EAAG,IACf,UAAc,CAAC,EAAG,IAClB,QAAY,CAAC,EAAG,IAChB,MAAU,CAAC,GAAI,IACf,KAAS,CAAC,GAAI,IACd,MAAU,CAAC,GAAI,IACf,KAAS,CAAC,GAAI,IACd,KAAS,CAAC,GAAI,IACd,MAAU,CAAC,GAAI,IACf,QAAY,CAAC,GAAI,IACjB,IAAQ,CAAC,GAAI,IACb,OAAW,CAAC,GAAI,KAIlBp6B,EAAQ46B,OAAS,CACf,QAAW,OACX,OAAU,SACV,QAAW,SACX,UAAa,OACb,KAAQ,OACR,OAAU,QACV,KAAQ,UAER,OAAU,OAkRZlgE,EAAQkL,QAAUA,EAKlBlL,EAAQq0C,UAAYA,EAKpBr0C,EAAQs0C,OAASA,EAKjBt0C,EAAQu0C,kBAHR,SAA2BviC,GACzB,OAAc,MAAPA,GAOThS,EAAQw0C,SAAWA,EAKnBx0C,EAAQy0C,SAAWA,EAKnBz0C,EAAQ00C,SAHR,SAAkB1iC,GAChB,MAAsB,iBAARA,GAOhBhS,EAAQ2zC,YAAcA,EAKtB3zC,EAAQ20C,SAAWA,EAKnB30C,EAAQizC,SAAWA,EAKnBjzC,EAAQ60C,OAASA,EAMjB70C,EAAQ80C,QAAUA,EAKlB90C,EAAQ+0C,WAAaA,EAUrB/0C,EAAQg1C,YARR,SAAqBhjC,GACnB,OAAe,OAARA,GACe,kBAARA,GACQ,iBAARA,GACQ,iBAARA,GACQ,iBAARA,QACQ,IAARA,GAIhBhS,EAAQqnC,SAAW,EAAQ,KAY3B,IAAIk6B,EAAS,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MACxD,MAAO,MAAO,OAG5B,SAAS99B,IACP,IAAIjjC,EAAI,IAAIghC,KACRggC,EAAO,CAACJ,EAAI5gE,EAAEihE,YACNL,EAAI5gE,EAAEkhE,cACNN,EAAI5gE,EAAEmhE,eAAeh4C,KAAK,KACtC,MAAO,CAACnpB,EAAEohE,UAAWL,EAAO/gE,EAAEqhE,YAAaL,GAAM73C,KAAK,KAqCxD,SAAS5nB,EAAeqlC,EAAK06B,GAC3B,OAAOlhE,OAAOkB,UAAUC,eAAe1B,KAAK+mC,EAAK06B,GAjCnD9hE,EAAQo9B,IAAM,WACZlO,QAAQkO,IAAI,UAAWqG,IAAazjC,EAAQyxB,OAAO3E,MAAM9sB,EAASyR,aAiBpEzR,EAAQoyC,SAAW,EAAQ,KAE3BpyC,EAAQ4/D,QAAU,SAAS38C,EAAQsL,GAEjC,IAAKA,IAAQ0kB,EAAS1kB,GAAM,OAAOtL,EAInC,IAFA,IAAIiiB,EAAOtkC,OAAOskC,KAAK3W,GACnBruB,EAAIglC,EAAKt3B,OACN1N,KACL+iB,EAAOiiB,EAAKhlC,IAAMquB,EAAI2W,EAAKhlC,IAE7B,OAAO+iB,GAOT,IAAI8+C,EAA6C,oBAAX9gE,OAAyBA,OAAO,8BAA2BwB,EA0DjG,SAASu/D,EAAsBC,EAAQlwC,GAKrC,IAAKkwC,EAAQ,CACX,IAAIC,EAAY,IAAI9+D,MAAM,2CAC1B8+D,EAAUD,OAASA,EACnBA,EAASC,EAEX,OAAOnwC,EAAGkwC,GAlEZjiE,EAAQmiE,UAAY,SAAmBC,GACrC,GAAwB,mBAAbA,EACT,MAAM,IAAI54C,UAAU,oDAEtB,GAAIu4C,GAA4BK,EAASL,GAA2B,CAClE,IAAI1oC,EACJ,GAAkB,mBADdA,EAAK+oC,EAASL,IAEhB,MAAM,IAAIv4C,UAAU,iEAKtB,OAHA5oB,OAAOC,eAAew4B,EAAI0oC,EAA0B,CAClD5gE,MAAOk4B,EAAIv4B,YAAY,EAAOi4B,UAAU,EAAO1E,cAAc,IAExDgF,EAGT,SAASA,IAQP,IAPA,IAAIgpC,EAAgBC,EAChBzgC,EAAU,IAAInR,SAAQ,SAAUtH,EAASkQ,GAC3C+oC,EAAiBj5C,EACjBk5C,EAAgBhpC,KAGd5lB,EAAO,GACFxT,EAAI,EAAGA,EAAIuR,UAAU7D,OAAQ1N,IACpCwT,EAAKxG,KAAKuE,UAAUvR,IAEtBwT,EAAKxG,MAAK,SAAU8kB,EAAK7wB,GACnB6wB,EACFswC,EAActwC,GAEdqwC,EAAelhE,MAInB,IACEihE,EAASt1C,MAAM3qB,KAAMuR,GACrB,MAAOse,GACPswC,EAActwC,GAGhB,OAAO6P,EAQT,OALAjhC,OAAOyP,eAAegpB,EAAIz4B,OAAOu4B,eAAeipC,IAE5CL,GAA0BnhE,OAAOC,eAAew4B,EAAI0oC,EAA0B,CAChF5gE,MAAOk4B,EAAIv4B,YAAY,EAAOi4B,UAAU,EAAO1E,cAAc,IAExDzzB,OAAO2hE,iBACZlpC,EACAslC,EAA0ByD,KAI9BpiE,EAAQmiE,UAAUK,OAAST,EAiD3B/hE,EAAQyiE,YAlCR,SAAqBL,GACnB,GAAwB,mBAAbA,EACT,MAAM,IAAI54C,UAAU,oDAMtB,SAASk5C,IAEP,IADA,IAAIhvD,EAAO,GACFxT,EAAI,EAAGA,EAAIuR,UAAU7D,OAAQ1N,IACpCwT,EAAKxG,KAAKuE,UAAUvR,IAGtB,IAAIyiE,EAAUjvD,EAAKhP,MACnB,GAAuB,mBAAZi+D,EACT,MAAM,IAAIn5C,UAAU,8CAEtB,IAAIuc,EAAO5jC,KACP4vB,EAAK,WACP,OAAO4wC,EAAQ71C,MAAMiZ,EAAMt0B,YAI7B2wD,EAASt1C,MAAM3qB,KAAMuR,GAClB8lB,MAAK,SAASrwB,GAAOkI,EAAQwb,SAASkF,EAAI,KAAM5oB,MAC3C,SAASy5D,GAAOvxD,EAAQwb,SAASm1C,EAAuBY,EAAK7wC,MAMvE,OAHAnxB,OAAOyP,eAAeqyD,EAAe9hE,OAAOu4B,eAAeipC,IAC3DxhE,OAAO2hE,iBAAiBG,EACA/D,EAA0ByD,IAC3CM,K,+CC5rBT,YAEA,IAAIG,EAAe,EAAQ;;;;;;GAW3B,SAASl3B,EAAQC,EAAG1W,GAClB,GAAI0W,IAAM1W,EACR,OAAO,EAMT,IAHA,IAAI2W,EAAID,EAAEh+B,OACNk+B,EAAI5W,EAAEtnB,OAED1N,EAAI,EAAGqrB,EAAMjB,KAAKC,IAAIshB,EAAGC,GAAI5rC,EAAIqrB,IAAOrrB,EAC/C,GAAI0rC,EAAE1rC,KAAOg1B,EAAEh1B,GAAI,CACjB2rC,EAAID,EAAE1rC,GACN4rC,EAAI5W,EAAEh1B,GACN,MAIJ,OAAI2rC,EAAIC,GACE,EAENA,EAAID,EACC,EAEF,EAET,SAASxE,EAASnS,GAChB,OAAIxD,EAAO2U,QAA4C,mBAA3B3U,EAAO2U,OAAOgB,SACjC3V,EAAO2U,OAAOgB,SAASnS,KAEjB,MAALA,IAAaA,EAAEwW,WA+B3B,IAAIva,EAAO,EAAQ,IACf2xC,EAASliE,OAAOkB,UAAUC,eAC1BghE,EAAS93D,MAAMnJ,UAAUmoB,MACzB+4C,EACgC,QAA3B,aAAkBviE,KAE3B,SAASwiE,EAAW77B,GAClB,OAAOxmC,OAAOkB,UAAU2L,SAASpN,KAAK+mC,GAExC,SAASO,EAAOu7B,GACd,OAAI77B,EAAS67B,KAGqB,mBAAvBxxC,EAAOkV,cAGgB,mBAAvBA,YAAYe,OACdf,YAAYe,OAAOu7B,KAEvBA,IAGDA,aAAkBC,aAGlBD,EAAO17B,QAAU07B,EAAO17B,kBAAkBZ,gBAShD,IAAIw8B,EAASnjE,EAAOD,QAAUqjE,EAO1BC,EAAQ,8BAEZ,SAASC,EAAQrhE,GACf,GAAKivB,EAAK4jB,WAAW7yC,GAArB,CAGA,GAAI8gE,EACF,OAAO9gE,EAAKzB,KAEd,IACIq2B,EADM50B,EAAKuL,WACCqpB,MAAMwsC,GACtB,OAAOxsC,GAASA,EAAM,IAyCxB,SAAS0sC,EAASvhE,EAAGN,GACnB,MAAiB,iBAANM,EACFA,EAAE2L,OAASjM,EAAIM,EAAIA,EAAEgoB,MAAM,EAAGtoB,GAE9BM,EAGX,SAASqjC,EAAQtpB,GACf,GAAIgnD,IAAuB7xC,EAAK4jB,WAAW/4B,GACzC,OAAOmV,EAAKmU,QAAQtpB,GAEtB,IAAIynD,EAAUF,EAAQvnD,GAEtB,MAAO,aADIynD,EAAU,KAAOA,EAAU,IACT,IAmB/B,SAASC,EAAKv8B,EAAQw8B,EAAU55D,EAAS65D,EAAUC,GACjD,MAAM,IAAIT,EAAOU,eAAe,CAC9B/5D,QAASA,EACTo9B,OAAQA,EACRw8B,SAAUA,EACVC,SAAUA,EACVC,mBAAoBA,IAcxB,SAASR,EAAGliE,EAAO4I,GACZ5I,GAAOuiE,EAAKviE,GAAO,EAAM4I,EAAS,KAAMq5D,EAAOC,IAoCtD,SAASU,EAAW58B,EAAQw8B,EAAUK,EAAQC,GAE5C,GAAI98B,IAAWw8B,EACb,OAAO,EACF,GAAIt8B,EAASF,IAAWE,EAASs8B,GACtC,OAAqC,IAA9Bh4B,EAAQxE,EAAQw8B,GAIlB,GAAIxyC,EAAK0jB,OAAO1N,IAAWhW,EAAK0jB,OAAO8uB,GAC5C,OAAOx8B,EAAO+8B,YAAcP,EAASO,UAKhC,GAAI/yC,EAAKwjB,SAASxN,IAAWhW,EAAKwjB,SAASgvB,GAChD,OAAOx8B,EAAO5zB,SAAWowD,EAASpwD,QAC3B4zB,EAAOzV,SAAWiyC,EAASjyC,QAC3ByV,EAAOg9B,YAAcR,EAASQ,WAC9Bh9B,EAAOoV,YAAconB,EAASpnB,WAC9BpV,EAAOwd,aAAegf,EAAShf,WAIjC,GAAgB,OAAXxd,GAAqC,iBAAXA,GACb,OAAbw8B,GAAyC,iBAAbA,EASjC,IAAIh8B,EAAOR,IAAWQ,EAAOg8B,IACzBV,EAAU97B,KAAY87B,EAAUU,MAC9Bx8B,aAAkBi9B,cAClBj9B,aAAkBk9B,cAC7B,OACoD,IAD7C14B,EAAQ,IAAIlF,WAAWU,EAAOK,QACtB,IAAIf,WAAWk9B,EAASn8B,SAQlC,GAAIH,EAASF,KAAYE,EAASs8B,GACvC,OAAO,EAIP,IAAIW,GAFJL,EAAQA,GAAS,CAAC98B,OAAQ,GAAIw8B,SAAU,KAEhBx8B,OAAO3R,QAAQ2R,GACvC,OAAqB,IAAjBm9B,GACEA,IAAgBL,EAAMN,SAASnuC,QAAQmuC,KAK7CM,EAAM98B,OAAOj6B,KAAKi6B,GAClB88B,EAAMN,SAASz2D,KAAKy2D,GAUxB,SAAkB/3B,EAAG1W,EAAG8uC,EAAQO,GAC9B,GAAI34B,eAAiC1W,EACnC,OAAO,EAET,GAAI/D,EAAK6jB,YAAYpJ,IAAMza,EAAK6jB,YAAY9f,GAC1C,OAAO0W,IAAM1W,EACf,GAAI8uC,GAAUpjE,OAAOu4B,eAAeyS,KAAOhrC,OAAOu4B,eAAejE,GAC/D,OAAO,EACT,IAAIsvC,EAAUC,EAAY74B,GACtB84B,EAAUD,EAAYvvC,GAC1B,GAAKsvC,IAAYE,IAAcF,GAAWE,EACxC,OAAO,EACT,GAAIF,EAGF,OAFA54B,EAAIm3B,EAAO1iE,KAAKurC,GAChB1W,EAAI6tC,EAAO1iE,KAAK60B,GACT6uC,EAAWn4B,EAAG1W,EAAG8uC,GAE1B,IAEIviE,EAAKvB,EAFLykE,EAAKzyB,EAAWtG,GAChBg5B,EAAK1yB,EAAWhd,GAIpB,GAAIyvC,EAAG/2D,SAAWg3D,EAAGh3D,OACnB,OAAO,EAKT,IAHA+2D,EAAGjxC,OACHkxC,EAAGlxC,OAEExzB,EAAIykE,EAAG/2D,OAAS,EAAG1N,GAAK,EAAGA,IAC9B,GAAIykE,EAAGzkE,KAAO0kE,EAAG1kE,GACf,OAAO,EAIX,IAAKA,EAAIykE,EAAG/2D,OAAS,EAAG1N,GAAK,EAAGA,IAE9B,GADAuB,EAAMkjE,EAAGzkE,IACJ6jE,EAAWn4B,EAAEnqC,GAAMyzB,EAAEzzB,GAAMuiE,EAAQO,GACtC,OAAO,EAEX,OAAO,EA/CEM,CAAS19B,EAAQw8B,EAAUK,EAAQC,IApC1C,OAAOD,EAAS78B,IAAWw8B,EAAWx8B,GAAUw8B,EAwCpD,SAASc,EAAY7iE,GACnB,MAAiD,sBAA1ChB,OAAOkB,UAAU2L,SAASpN,KAAKuB,GAgFxC,SAASkjE,EAAkB39B,EAAQw8B,GACjC,IAAKx8B,IAAWw8B,EACd,OAAO,EAGT,GAAgD,mBAA5C/iE,OAAOkB,UAAU2L,SAASpN,KAAKsjE,GACjC,OAAOA,EAASpyC,KAAK4V,GAGvB,IACE,GAAIA,aAAkBw8B,EACpB,OAAO,EAET,MAAO51D,IAIT,OAAI3K,MAAM2hE,cAAcpB,KAIa,IAA9BA,EAAStjE,KAAK,GAAI8mC,GAa3B,SAAS69B,EAAQC,EAAaC,EAAOvB,EAAU55D,GAC7C,IAAIo9B,EAEJ,GAAqB,mBAAV+9B,EACT,MAAM,IAAI17C,UAAU,uCAGE,iBAAbm6C,IACT55D,EAAU45D,EACVA,EAAW,MAGbx8B,EAtBF,SAAmB+9B,GACjB,IAAI/1C,EACJ,IACE+1C,IACA,MAAOn3D,GACPohB,EAAQphB,EAEV,OAAOohB,EAeEg2C,CAAUD,GAEnBn7D,GAAW45D,GAAYA,EAASljE,KAAO,KAAOkjE,EAASljE,KAAO,KAAO,MAC1DsJ,EAAU,IAAMA,EAAU,KAEjCk7D,IAAgB99B,GAClBu8B,EAAKv8B,EAAQw8B,EAAU,6BAA+B55D,GAGxD,IAAIq7D,EAAyC,iBAAZr7D,EAE7Bs7D,GAAyBJ,GAAe99B,IAAWw8B,EASvD,KAV2BsB,GAAe9zC,EAAK2jB,QAAQ3N,IAInDi+B,GACAN,EAAkB39B,EAAQw8B,IAC1B0B,IACF3B,EAAKv8B,EAAQw8B,EAAU,yBAA2B55D,GAG/Ck7D,GAAe99B,GAAUw8B,IACzBmB,EAAkB39B,EAAQw8B,KAAgBsB,GAAe99B,EAC5D,MAAMA,EAvVVi8B,EAAOU,eAAiB,SAAwB72D,GAC9C9K,KAAK1B,KAAO,iBACZ0B,KAAKglC,OAASl6B,EAAQk6B,OACtBhlC,KAAKwhE,SAAW12D,EAAQ02D,SACxBxhE,KAAKyhE,SAAW32D,EAAQ22D,SACpB32D,EAAQlD,SACV5H,KAAK4H,QAAUkD,EAAQlD,QACvB5H,KAAKmjE,kBAAmB,IAExBnjE,KAAK4H,QA6CT,SAAoBg8B,GAClB,OAAOy9B,EAASl+B,EAAQS,EAAKoB,QAAS,KAAO,IACtCpB,EAAK69B,SAAW,IAChBJ,EAASl+B,EAAQS,EAAK49B,UAAW,KAhDvB4B,CAAWpjE,MAC1BA,KAAKmjE,kBAAmB,GAE1B,IAAIzB,EAAqB52D,EAAQ42D,oBAAsBH,EACvD,GAAItgE,MAAMmN,kBACRnN,MAAMmN,kBAAkBpO,KAAM0hE,OACzB,CAEL,IAAI7xC,EAAM,IAAI5uB,MACd,GAAI4uB,EAAIo/B,MAAO,CACb,IAAIxkB,EAAM5a,EAAIo/B,MAGVoU,EAAUjC,EAAQM,GAClB5sC,EAAM2V,EAAIpX,QAAQ,KAAOgwC,GAC7B,GAAIvuC,GAAO,EAAG,CAGZ,IAAIwuC,EAAY74B,EAAIpX,QAAQ,KAAMyB,EAAM,GACxC2V,EAAMA,EAAI1V,UAAUuuC,EAAY,GAGlCtjE,KAAKivD,MAAQxkB,KAMnBzb,EAAKihB,SAASgxB,EAAOU,eAAgB1gE,OA6CrCggE,EAAOM,KAAOA,EAYdN,EAAOC,GAAKA,EAMZD,EAAOhxC,MAAQ,SAAe+U,EAAQw8B,EAAU55D,GAC1Co9B,GAAUw8B,GAAUD,EAAKv8B,EAAQw8B,EAAU55D,EAAS,KAAMq5D,EAAOhxC,QAMvEgxC,EAAOsC,SAAW,SAAkBv+B,EAAQw8B,EAAU55D,GAChDo9B,GAAUw8B,GACZD,EAAKv8B,EAAQw8B,EAAU55D,EAAS,KAAMq5D,EAAOsC,WAOjDtC,EAAOuC,UAAY,SAAmBx+B,EAAQw8B,EAAU55D,GACjDg6D,EAAW58B,EAAQw8B,GAAU,IAChCD,EAAKv8B,EAAQw8B,EAAU55D,EAAS,YAAaq5D,EAAOuC,YAIxDvC,EAAOwC,gBAAkB,SAAyBz+B,EAAQw8B,EAAU55D,GAC7Dg6D,EAAW58B,EAAQw8B,GAAU,IAChCD,EAAKv8B,EAAQw8B,EAAU55D,EAAS,kBAAmBq5D,EAAOwC,kBAuH9DxC,EAAOyC,aAAe,SAAsB1+B,EAAQw8B,EAAU55D,GACxDg6D,EAAW58B,EAAQw8B,GAAU,IAC/BD,EAAKv8B,EAAQw8B,EAAU55D,EAAS,eAAgBq5D,EAAOyC,eAI3DzC,EAAO0C,mBACP,SAASA,EAAmB3+B,EAAQw8B,EAAU55D,GACxCg6D,EAAW58B,EAAQw8B,GAAU,IAC/BD,EAAKv8B,EAAQw8B,EAAU55D,EAAS,qBAAsB+7D,IAQ1D1C,EAAO2C,YAAc,SAAqB5+B,EAAQw8B,EAAU55D,GACtDo9B,IAAWw8B,GACbD,EAAKv8B,EAAQw8B,EAAU55D,EAAS,MAAOq5D,EAAO2C,cAOlD3C,EAAO4C,eAAiB,SAAwB7+B,EAAQw8B,EAAU55D,GAC5Do9B,IAAWw8B,GACbD,EAAKv8B,EAAQw8B,EAAU55D,EAAS,MAAOq5D,EAAO4C,iBA+ElD5C,EAAO6C,OAAS,SAASf,EAAmB/1C,EAAmBplB,GAC7Di7D,GAAQ,EAAME,EAAO/1C,EAAOplB,IAI9Bq5D,EAAO8C,aAAe,SAAShB,EAAmB/1C,EAAmBplB,GACnEi7D,GAAQ,EAAOE,EAAO/1C,EAAOplB,IAG/Bq5D,EAAO+C,QAAU,SAASn0C,GAAO,GAAIA,EAAK,MAAMA,GAMhDoxC,EAAOY,OAASnB,GAHhB,SAASmB,EAAO7iE,EAAO4I,GAChB5I,GAAOuiE,EAAKviE,GAAO,EAAM4I,EAAS,KAAMi6D,KAEVZ,EAAQ,CAC3ChxC,MAAOgxC,EAAO2C,YACdJ,UAAWvC,EAAOwC,gBAClBF,SAAUtC,EAAO4C,eACjBH,aAAczC,EAAO0C,qBAEvB1C,EAAOY,OAAOA,OAASZ,EAAOY,OAE9B,IAAI9xB,EAAatxC,OAAOskC,MAAQ,SAAUkC,GACxC,IAAIlC,EAAO,GACX,IAAK,IAAIzjC,KAAO2lC,EACV07B,EAAOziE,KAAK+mC,EAAK3lC,IAAMyjC,EAAKh4B,KAAKzL,GAEvC,OAAOyjC,K,mCCxfT,YAEA,IAAIvT,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACf68C,EAAS,EAAQ,KAqOrBnmE,EAAOD,QAnOP,SAAcuT,EAAQsnD,EAAM5tD,EAASuhB,GAC9BA,IACHA,EAAWvhB,EACXA,EAAU,IAGZ,IAAIo5D,EAAWh1D,EAAQuN,MACnB0nD,EAAc/8C,EAAKH,QAAQi9C,EAAU9yD,GACrCgzD,EAAah9C,EAAKH,QAAQi9C,EAAUxL,GAEpC/sD,EAASb,EAAQa,OACjBswD,EAAYnxD,EAAQmxD,UACpB/qB,EAAYpmC,EAAQomC,eAEN5wC,IAAd4wC,IAAyBA,EAAYpmC,EAAQu5D,cAC/B/jE,IAAd4wC,IAAyBA,GAAY,GACzC,IAAIozB,EAAex5D,EAAQw5D,aACvBC,EAAcz5D,EAAQy5D,YACtBC,GAAoD,IAA/B15D,EAAQ05D,mBAE7BC,EAAU,EACVzc,EAAW,EACX0c,EAAU,EAEVC,GAAU,EAId,SAASC,EAAWxzD,GAElB,GADAqzD,IACI94D,EACF,GAAIA,aAAkBolC,QAEpB,GADAhkB,QAAQY,KAAK,6EACRhiB,EAAOyjB,KAAKhe,GACf,OAAOyzD,GAAQ,QAEZ,GAAsB,mBAAXl5D,IACXA,EAAOyF,EAAQsnD,GAClB,OAAOmM,GAAQ,GAIrB,OAGF,SAAmBzzD,GACjB,IAAI0zD,EAAOP,EAAc/0C,EAAGs1C,KAAOt1C,EAAGu1C,MACtCL,IACAI,EAAK1zD,GAAQ,SAAUye,EAAKm1C,GAC1B,GAAIn1C,EAAK,OAAOkR,EAAQlR,GAGxB,IA2EYlE,EACVviB,EA5EEiS,EAAO,CACT/c,KAAM8S,EACNlS,KAAM8lE,EAAM9lE,KACZ+lE,MAAOD,EAAMC,MACbC,MAAOF,EAAME,MACbF,MAAOA,GAGT,IAAIA,EAAMG,cAEH,OAAIH,EAAMI,UAAYJ,EAAMK,qBAAuBL,EAAMM,gBASpE,SAAiBvoD,GACf,IAAI3T,EAAS2T,EAAKze,KAAKkG,QAAQ2/D,EAAaC,EAAW5/D,QAAQ,IAAK,SACpE+gE,EAAWn8D,GAAQ,SAAUwtB,GACvBA,EACF4uC,EAASzoD,EAAM3T,GAEX8nC,EACFu0B,EAAOr8D,GAAQ,WACbo8D,EAASzoD,EAAM3T,MAERk7D,EACTvjC,EAAQ,IAAI9/B,MAAMmI,EAAS,oBAE3By7D,OArBKa,CAAOrqD,GACL2pD,EAAMW,iBA+FrB,SAAiBC,GACf,IAAIx8D,EAASw8D,EAAKphE,QAAQ2/D,EAAaC,GACvC50C,EAAGq2C,SAASD,GAAM,SAAU/1C,EAAK3I,GAC/B,GAAI2I,EAAK,OAAOkR,EAAQlR,IAK5B,SAAoB3I,EAAc9d,GAC5Bm7D,IACFr9C,EAAeE,EAAKH,QAAQi9C,EAAUh9C,IAExCq+C,EAAWn8D,GAAQ,SAAUwtB,GAC3B,GAAIA,EACF,OAAOkvC,EAAS5+C,EAAc9d,GAEhComB,EAAGq2C,SAASz8D,GAAQ,SAAUymB,EAAKk2C,GACjC,OAAIl2C,EAAYkR,EAAQlR,IAEpB00C,IACFwB,EAAa3+C,EAAKH,QAAQi9C,EAAU6B,IAElCA,IAAe7+C,EACV29C,IAEFY,EAAOr8D,GAAQ,WACpB08D,EAAS5+C,EAAc9d,aAtB3B48D,CAAU9+C,EAAc9d,MAjGf68D,CAAO70D,QAFT,EAiETm0D,EADIn8D,GADUuiB,EAlEGtQ,GAmEA/c,KAAKkG,QAAQ2/D,EAAaC,EAAW5/D,QAAQ,IAAK,UAChD,SAAUoyB,GAC3B,GAAIA,EACF,OAMN,SAAgBjL,EAAKviB,GACnBomB,EAAG02C,MAAM98D,EAAQuiB,EAAIzsB,MAAM,SAAU2wB,GACnC,GAAIA,EAAK,OAAOkR,EAAQlR,GAGxBL,EAAG22C,MAAM/8D,EAAQuiB,EAAIzsB,MAAM,SAAU2wB,GACnC,GAAIA,EAAK,OAAOkR,EAAQlR,GACxBu2C,EAAQz6C,EAAIrtB,YAbL+nE,CAAM16C,EAAKviB,GAEpBg9D,EAAQz6C,EAAIrtB,YA3FPgoE,CAASl1D,GAgDlB,SAASo0D,EAAUzoD,EAAM3T,GACvB,IAAIm9D,EAAa/2C,EAAGY,iBAAiBrT,EAAKze,MACtCkoE,EAAch3C,EAAGc,kBAAkBlnB,EAAQ,CAAElK,KAAM6d,EAAK7d,OAE5DqnE,EAAWx7C,GAAG,QAASgW,GACvBylC,EAAYz7C,GAAG,QAASgW,GAEpBk7B,EACFA,EAAUsK,EAAYC,EAAazpD,GAEnCypD,EAAYz7C,GAAG,QAAQ,WACrBw7C,EAAWnc,KAAKoc,MAIpBA,EAAYv7C,KAAK,SAAS,WACxBuE,EAAG22C,MAAM/8D,EAAQ2T,EAAK7d,MAAM,SAAU2wB,GACpC,GAAIA,EAAK,OAAOkR,EAAQlR,GACpB20C,EACFP,EAAOwC,aAAar9D,EAAQ2T,EAAKmoD,MAAOnoD,EAAKkoD,OAAO,SAAUp1C,GAC5D,OAAIA,EAAYkR,EAAQlR,GACjBg1C,OAGTA,UAMR,SAASY,EAAQ1oD,EAAMs/C,GACrB7sC,EAAGk3C,OAAO3pD,GAAM,SAAU8S,GACxB,OAAIA,EAAYkR,EAAQlR,GACjBwsC,OA0BX,SAAS+J,EAASz6C,GAChB6D,EAAG4B,QAAQzF,GAAK,SAAUkE,EAAKroB,GAC7B,OAAIqoB,EAAYkR,EAAQlR,IACxBroB,EAAM2E,SAAQ,SAAUkP,GACtBupD,EAAUx9C,EAAKI,KAAKmE,EAAKtQ,OAEpBwpD,QAoCX,SAASiB,EAAUa,EAAUv9D,GAC3BomB,EAAGo3C,QAAQD,EAAUv9D,GAAQ,SAAUymB,GACrC,OAAIA,EAAYkR,EAAQlR,GACjBg1C,OAIX,SAASU,EAAYn+C,EAAMi1C,GACzB7sC,EAAGu1C,MAAM39C,GAAM,SAAUyI,GACvB,OAAIA,GACe,WAAbA,EAAI7hB,KAA0BquD,GAAK,GAGlCA,GAAK,MAIhB,SAASt7B,EAASlR,GAEhB,IAAK80C,QAAwBrkE,IAAb+rB,EAEd,OADAs4C,GAAU,EACHt4C,EAASwD,GAIpB,SAASg1C,EAASgC,GAGhB,GAFKA,GAASnC,IACd1c,IACKyc,IAAYzc,GAA0B,IAAZ0c,QACZpkE,IAAb+rB,EACF,OAAOA,EAAS,MAnMtBu4C,EAAUT,M,8CC9BZ,MAAM/8C,EAAO,EAAQ,GAGrB,SAAS0/C,EAAajnE,GAEpB,OADAA,EAAIunB,EAAKK,UAAUL,EAAKH,QAAQpnB,IAAI0nB,MAAMH,EAAKvd,MACzC4B,OAAS,EAAU5L,EAAE,GACpB,KAKT,MAAMknE,EAAqB,YAQ3BjpE,EAAOD,QAAU,CACfipE,cACAE,iBARF,SAA2BnnE,GACzB,MAAM2a,EAAKssD,EAAYjnE,GAEvB,OADAA,EAAIA,EAAE2E,QAAQgW,EAAI,IACXusD,EAAmB33C,KAAKvvB,M,gBClBjC/B,EAAOD,QAAU,CACfopE,SAAU,EAAQ,O,iBCDpB,YACAnpE,EAAOD,QAAU,SAAUsgC,GACzB,GAAkC,mBAAvB+F,EAAOM,YAChB,IACE,OAAON,EAAOM,YAAYrG,GAC1B,MAAOvyB,GACP,OAAO,IAAIs4B,EAAO/F,GAGtB,OAAO,IAAI+F,EAAO/F,M,wgBCOpB,YAGA,SACA,OACA,QAGA,SAAiB+oC,GAOb,IAkS6BlgD,EAlSvBmgD,EAAuF,GAC7FA,EAAS,gCAAkC,CAAC,qCAAsCC,GAC9E,SAACvhE,GAAa,OAAAA,EAAIyF,aAClB+7D,GA+RyBrgD,EAzB7B,SAAyBhpB,GACrB,OAAO,WAAEqB,OAAOrB,EAAE6H,IAAIyF,YALJzM,EAK6Bb,EAAEoI,MAJ1C,QAAE/G,OAAOgoE,EAAgBxoE,EAAEiE,OAAQukE,EAAgBxoE,EAAEkE,QADhE,IAAsBlE,GA+Bf,SAAU4qC,GACb,OAAOA,EAAExvB,IAAI+M,OAxRjB,IAAMsgD,EAA6B,SAAC/1D,GAChC,IAAKA,EACD,OAAOA,EAEX,IAAMg2D,EAAiC,GAKvC,OAJAh2D,EAAKpF,SAAQ,SAAAilC,GAETm2B,EAASx8D,MAAK,SAAC8E,GAAa,OA0PpC,SAA6B0B,GAEzB,OAAO,EAAAi2D,eAAej2D,GAAM,SAAUvS,GAClC,OAAI,EAAAgD,SAASS,WAAWzD,GACb,EAAAyoE,aAAazoE,GAEpB,EAAAoE,MAAMI,QAAQxE,GACP,EAAA2a,UAAU3a,GAEjB,EAAAgJ,SAASD,WAAW/I,GACb,EAAA0oE,aAAa1oE,GAEnB8J,MAAMC,QAAQ/J,QAAnB,EACWA,KAvQiB2oE,CAAoB93D,SAEhD0B,EACO61D,EAAwB,eAAIG,GAA5BH,CAAsC71D,QADjD,GAwNJ,SAAS61D,I,IAAyB,sDAE9B,OAAO,SAAU71D,GACb,OAAKA,EAIEA,EAAK0I,KAAI,SAAUpK,EAAUiT,GAChC,GAAIA,EAAQ8kD,EAAYn8D,OAAQ,CAC5B,IAAMo8D,EAAaD,EAAY9kD,GAC/B,GAAI+kD,EACA,OAAOA,EAAWh4D,GAG1B,OAAOA,KAVA0B,GAenB,SAAS81D,EAAgBxnE,GACrB,OAAO,WAAER,OAAOQ,EAAEkB,KAAMlB,EAAEoC,WAvO9BklE,EAAS,4BAA8B,CAAC,2BAA4BG,GACpEH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,sCAAwC,CAAC,qCAAsCG,GACxFH,EAAS,uCAAyC,CAAC,sCAAuCG,GAC1FH,EAAS,kCAAoC,CAAC,iCAAkCG,GAChFH,EAAS,2DAA6D,CAAC,0DAA2DG,GAClIH,EAAS,6BAA+B,CAAC,4BAA6BG,GACtEH,EAAS,gCAAkC,CAAC,+BAAgCG,GAC5EH,EAAS,mCAAqC,CAAC,kCAAmCG,GAClFH,EAAS,8BAAgC,CAAC,6BAA8BG,GACxEH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAqB,WAAI,CAAC,aAAcG,GACxCH,EAAS,iBAAmB,CAAC,gBAAiBG,GAC9CH,EAAS,4BAA8B,CAAC,2BAA4BG,GACpEH,EAAS,eAAiB,CAAC,cAAeG,GAC1CH,EAAS,0BAA4B,CAAC,yBAA0BG,GAChEH,EAAS,kBAAoB,CAAC,iBAAkBG,GAChDH,EAAS,oBAAsB,CAAC,mBAAoBG,GACpDH,EAAS,+BAAiC,CAAC,8BAA+BG,GAC1EH,EAAS,+BAAiC,CAAC,8BAA+BG,GAC1EH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,qBAAuB,CAAC,oBAAqBG,GACtDH,EAAS,qBAAuB,CAAC,oBAAqBG,GACtDH,EAAS,qBAAuB,CAAC,oBAAqBG,GACtDH,EAAS,qBAAuB,CAAC,oBAAqBG,GACtDH,EAAS,qBAAuB,CAAC,oBAAqBG,GACtDH,EAAS,qBAAuB,CAAC,oBAAqBG,GACtDH,EAAS,qBAAuB,CAAC,oBAAqBG,GACtDH,EAAS,4BAA8B,CAAC,2BAA4BG,GACpEH,EAAS,6BAA+B,CAAC,4BAA6BG,GACtEH,EAAS,+BAAiC,CAAC,8BAA+BG,GAC1EH,EAAS,gCAAkC,CAAC,+BAAgCG,GAC5EH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,mCAAqC,CAAC,kCAAmCG,GAClFH,EAAS,qCAAuC,CAAC,oCAAqCG,GACtFH,EAAS,mCAAqC,CAAC,kCAAmCG,GAClFH,EAAS,qCAAuC,CAAC,oCAAqCG,GACtFH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,qCAAuC,CAAC,oCAAqCG,GACtFH,EAAS,wCAA0C,CAAC,uCAAwCG,GAC5FH,EAAS,6BAA+B,CAAC,4BAA6BG,GACtEH,EAAS,6BAA+B,CAAC,4BAA6BG,GACtEH,EAAS,8BAAgC,CAAC,6BAA8BG,GACxEH,EAAS,kCAAoC,CAAC,iCAAkCG,GAChFH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAwB,cAAI,CAAC,gBAAiBG,GAC9CH,EAAyB,eAAI,CAAC,iBAAkBG,GAChDH,EAAS,2BAA6B,CAAC,0BAA2BG,GAClEH,EAAS,2BAA6B,CAAC,0BAA2BG,GAClEH,EAAS,sCAAwC,CAAC,qCAAsCG,GACxFH,EAAS,sCAAwC,CAAC,qCAAsCG,GACxFH,EAAS,sCAAwC,CAAC,qCAAsCG,GACxFH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,0BAA4B,CAAC,yBAA0BG,GAChEH,EAAS,8BAAgC,CAAC,6BAA8BG,GACxEH,EAAS,mCAAqC,CAAC,kCAAmCG,GAClFH,EAAS,qCAAuC,CAAC,oCAAqCG,GACtFH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,+BAAiC,CAAC,8BAA+BG,GAC1EH,EAAS,6BAA+B,CAAC,4BAA6BG,GACtEH,EAAS,qCAAuC,CAAC,oCAAqCG,GACtFH,EAAS,yCAA2C,CAAC,wCAAyCG,GAC9FH,EAAS,8CAAgD,CAAC,6CAA8CG,GACxGH,EAAS,kDAAoD,CAAC,iDAAkDG,GAChHH,EAAS,0BAA4B,CAAC,yBAA0BG,GAChEH,EAAS,0BAA4B,CAAC,yBAA0BG,GAChEH,EAAS,0BAA4B,CAAC,yBAA0BG,GAChEH,EAAS,8BAAgC,CAAC,6BAA8BG,GACxEH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,yBAA2B,CAAC,wBAAyBG,GAC9DH,EAAS,wBAA0B,CAAC,uBAAwBG,GAC5DH,EAAS,wBAA0B,CAAC,uBAAwBG,GAC5DH,EAAS,mCAAqC,CAAC,kCAAmCG,GAClFH,EAAS,mCAAqC,CAAC,kCAAmCG,GAClFH,EAAS,qDAAuD,CAAC,oDAAqDG,GACtHH,EAAS,6CAA+C,CAAC,4CAA6CG,GACtGH,EAAS,iDAAmD,CAAC,gDAAiDG,GAC9GH,EAAS,8CAAgD,CAAC,6CAA8CG,GACxGH,EAAS,kDAAoD,CAAC,iDAAkDG,GAChHH,EAAS,kCAAoC,CAAC,iCAAkCG,GAChFH,EAAS,2BAA6B,CAAC,0BAA2BG,GAClEH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,uCAAyC,CAAC,sCAAuCG,GAC1FH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,uCAAyC,CAAC,sCAAuCG,GAC1FH,EAAS,uCAAyC,CAAC,sCAAuCG,GAC1FH,EAAS,+BAAiC,CAAC,8BAA+BG,GAC1EH,EAAS,6BAA+B,CAAC,4BAA6BG,GACtEH,EAAS,6BAA+B,CAAC,4BAA6BG,GACtEH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,2BAA6B,CAAC,0BAA2BG,GAClEH,EAAS,kCAAoC,CAAC,iCAAkCG,GAChFH,EAAS,uCAAyC,CAAC,sCAAuCG,GAC1FH,EAAS,gCAAkC,CAAC,+BAAgCG,GAC5EH,EAAS,mCAAqC,CAAC,kCAAmCG,GAClFH,EAAS,iCAAmC,CAAC,gCAAiCG,GAC9EH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,oCAAsC,CAAC,mCAAoCG,GACpFH,EAAS,yCAA2C,CAAC,wCAAyCG,GAC9FH,EAAS,gCAAkC,CAAC,+BAAgCG,GAC5EH,EAAqC,2BAAI,CAAC,6BAA8BG,GACxEH,EAA0B,gBAAI,CAAC,kBAAmBG,GAClDH,EAAuB,aAAI,CAAC,eAAgBG,GAC5CH,EAA6B,mBAAI,CAAC,qBAAsBG,GACxDH,EAAqB,WAAI,CAAC,aAAcG,GACxCH,EAA2B,iBAAI,CAAC,mBAAoBG,GACpDH,EAAoB,UAAI,CAAC,YAAaG,GACtCH,EAA0B,gBAAI,CAAC,kBAAmBG,GAClDH,EAAqB,WAAI,CAAC,aAAcG,GACxCH,EAA2B,iBAAI,CAAC,mBAAoBG,GACpDH,EAAqB,WAAI,CAAC,aAAcG,GACxCH,EAA2B,iBAAI,CAAC,mBAAoBG,GACpDH,EAAyB,eAAI,CAAC,iBAAkBG,GAChDH,EAA+B,qBAAI,CAAC,uBAAwBG,GAC5DH,EAAuB,aAAI,CAAC,eAAgBG,GAC5CH,EAA6B,mBAAI,CAAC,qBAAsBG,GACxDH,EAAsB,YAAI,CAAC,cAAeG,GAC1CH,EAA4B,kBAAI,CAAC,oBAAqBG,GACtDH,EAAoB,UAAI,CAAC,YAAaG,GACtCH,EAA0B,gBAAI,CAAC,kBAAmBG,GAClDH,EAAmB,SAAI,CAAC,WAAYG,GACpCH,EAAyB,eAAI,CAAC,iBAAkBG,GAChDH,EAAqB,WAAI,CAAC,aAAcG,GACxCH,EAAsB,YAAI,CAAC,cAAeG,GAC1CH,EAAS,2BAA6B,CAAC,0BAA2BG,GAClEH,EAA8B,oBAAI,CAAC,sBAAuBG,GAC1DH,EAAkB,QAAI,CAAC,UAAWG,GAClCH,EAAyB,eAAI,CAAC,iBAAkBG,GAChDH,EAAuB,aAAI,CAAC,eAAgBG,GAC5CH,EAAyB,eAAI,CAAC,iBAAkBG,GAChDH,EAAuB,aAAI,CAAC,eAAgBG,GAC5CH,EAAc,IAAI,CAAC,MAAOG,GAC1BH,EAAiC,uBAAI,CAAC,yBAA0BG,GAChEH,EAA0B,gBAAI,CAAC,qBAAsBG,GACrDH,EAA6B,mBAAI,CAAC,qBAAsBG,GACxDH,EAAmC,yBAAI,CAAC,2BAA4BG,GACpEH,EAAyB,eAAI,CAAC,sBAAuBG,GACrDH,EAA8B,oBAAI,CAAC,sBAAuBG,GAC1DH,EAAoC,0BAAI,CAAC,4BAA6BG,GACtEH,EAAyB,eAAI,CAAC,iBAAkBG,GAChDH,EAA0B,gBAAI,CAAC,kBAAmBG,GAClDH,EAAS,0BAA4B,CAAC,yBAA0BG,GAChEH,EAAS,mCAAqC,CAAC,kCAAmCG,GAClFH,EAAS,0CAA4C,CAAC,yCAA0CG,GAChGH,EAA8B,oBAAI,CAAC,sBAAuBG,GAC1DH,EAA4B,kBAAI,CAAC,oBAAqBG,GACtDH,EAA0B,gBAAI,CAAC,kBAAmBG,GAClDH,EAAS,4BAA8B,CAAC,2BAA4BG,GACpEH,EAAS,4BAA8B,CAAC,2BAA4BG,GACpEH,EAAS,kCAAoC,CAAC,iCAAkCG,GAChFH,EAAkC,wBAAI,CAAC,0BAA2BG,GAClEH,EAAgC,sBAAI,CAAC,wBAAyBG,GAC9DH,EAA0B,gBAAI,CAAC,kBAAmBG,GAClDH,EAA8B,oBAAI,CAAC,sBAAuBG,GAC1DH,EAAuC,6BAAI,CAAC,+BAAgCG,GAC5EH,EAAuC,6BAAI,CAAC,+BAAgCG,GAC5EH,EAA6B,mBAAI,CAAC,qBAAsBG,GACxDH,EAAuB,aAAI,CAAC,eAAgBG,GAC5CH,EAAiC,uBAAI,CAAC,yBAA0BG,GAChEH,EAA8C,oCAAI,CAAC,sCAAuCG,GAC1FH,EAAkD,wCAAI,CAAC,0CAA2CG,GAClGH,EAA8B,oBAAI,CAAC,sBAAuBG,GAC1DH,EAAgC,sBAAI,CAAC,wBAAyBG,GAC9DH,EAAgC,sBAAI,CAAC,wBAAyBG,GAC9DH,EAAmC,yBAAI,CAAC,2BAA4BG,GACpEH,EAA0C,gCAAI,CAAC,kCAAmCG,GAClFH,EAA4B,kBAAI,CAAC,oBAAqBG,GACtDH,EAA+B,qBAAI,CAAC,uBAAwBG,GAC5DH,EAA+B,qBAAI,CAAC,uBAAwBG,GAC5DH,EAA+B,qBAAI,CAAC,uBAAwBG,GAC5DH,EAAmC,yBAAI,CAAC,2BAA4BG,GACpEH,EAA+B,qBAAI,CAAC,uBAAwBG,GAC5DH,EAAmC,yBAAI,CAAC,2BAA4BG,GACpEH,EAA+B,qBAAI,CAAC,uBAAwBG,GAC5DH,EAAkC,wBAAI,CAAC,0BAA2BG,GAClEH,EAAgC,sBAAI,CAAC,wBAAyBG,GAC9DH,EAA4B,kBAAI,CAAC,oBAAqBG,GACtDH,EAA4B,kBAAI,CAAC,oBAAqBG,GACtDH,EAAiC,uBAAI,CAAC,yBAA0BG,GAChEH,EAAS,oBAAsB,CAAC,mBAAoBG,GACpDH,EAAS,wBAA0B,CAAC,uBAAwBG,GAC5DH,EAA+B,qBAAI,CAAC,uBAAwBG,GAC5DH,EAA4B,kBAAI,CAAC,oBAAqBG,GACtDH,EAAgC,sBAAI,CAAC,wBAAyBG,GAG9C,EAAArtD,IAAhB,SAAuBhV,EAAYsM,EAAyBu2D,GACxD,OAAIX,EAASliE,GACF6iE,EAAKX,EAASliE,GAAI,GAAIkiE,EAASliE,GAAI,GAAGsM,IAEtCu2D,EAAK7iE,EAAIsM,IAIR,EAAAw2D,OAAhB,SAAuB9iE,GACnB,QAASkiE,EAASliE,IA/O1B,CAAiB,EAAAiiE,gBAAA,EAAAA,cAAa,M,8ECR9B,YAEA,iCAAyCtnC,EAA0BF,GAC/D,OAAO,IAAInR,SAAW,SAACtH,EAASkQ,GAC5B,IAAMiW,EAAMxN,EAAM0C,yBAAwB,WAAM,OAAAnL,EAAO,IAAIl2B,MAAM,iCACjEy+B,EAAQrI,MAAK,SAAAr4B,GACTouC,EAAI/sC,UACJ4mB,EAAQjoB,MACT2wC,OAAM,SAAA9f,GACLud,EAAI/sC,UACJ82B,EAAOtH,UAKnB,sBAA8Bm4C,GAC1B,IAAM3lE,EAAS,IAAI,EAAAwvC,SAYnB,OAXwB,IAApBm2B,EAASv8D,QACTpJ,EAAO4kB,UAGX+gD,EAAS77D,SAAQ,SAAC8lB,EAAK3yB,GACnBivB,QAAQtH,QAAQ+gD,EAAS1oE,IAAM+3B,MAAK,WAChCh1B,EAAO4kB,QAAQ,CAAE3nB,IAAKA,EAAKN,MAAOgpE,EAAS1oE,QAC5C,SAAAuwB,GACCxtB,EAAO4kB,QAAQ,CAAE3nB,IAAKA,EAAKN,MAAOgpE,EAAS1oE,WAG5C+C,EAAOq9B,U,8ECxBlB,YACA,OACA,SACA,SAEMuoC,EAAyB,IAAIh8D,IAInC,SAAgBi8D,EAAqBC,GACjC,OAAOF,EAAuBrpE,IAAIupE,GAJtC,gCAAqCA,EAAgBC,GACjDH,EAAuB18D,IAAI48D,EAAQC,IAEvC,yBAIA,iBAQI,WAAoB9a,EAA8BznD,EAAkBwiE,EAAyBthE,EACjFy3C,EAA4B8pB,EAAmBC,GADvC,KAAAjb,QAA8B,KAAAznD,MAAkB,KAAAwiE,QAAyB,KAAAthE,MACjF,KAAAy3C,aAA4B,KAAA8pB,YAPhC,KAAAl5B,UAAW,EAGX,KAAAo5B,UAAY,IAAI1/D,MAKpB9I,KAAKyoE,MAAQF,EAqTrB,OAlTI,YAAAloE,QAAA,WACI,EAAA6gE,IAAIlhE,KAAKovC,UACTpvC,KAAKyoE,OAAQ,EACbzoE,KAAKovC,UAAW,GAGpB,YAAAs5B,SAAA,SAAS98D,GACDA,EAAE7E,KAAO6E,EAAE7E,MAAQ/G,KAAK+G,MACxB/G,KAAK+G,IAAM6E,EAAE7E,IACb/G,KAAK2oE,gBAAaroE,GAMtB,IAFA,IAAM28C,EAAUrxC,EAAEqxC,QAETl/C,EAAI,EAAGqrB,EAAM6zB,EAAQxxC,OAAQ1N,EAAIqrB,EAAKrrB,IAAK,CAChD,IAAM02B,EAASwoB,EAAQl/C,GACvBiC,KAAK4oE,kBAAkBn0C,EAAOruB,OAC9BpG,KAAK6oE,iBAAiB,IAAI,EAAA7mE,SAASyyB,EAAOruB,MAAMoT,gBAAiBib,EAAOruB,MAAMqT,aAAcgb,EAAO/Z,MAGvG1a,KAAKsoE,UAAY18D,EAAE08D,WAEvB,YAAAQ,cAAA,SAAcP,GACV,EAAArH,IAAIlhE,KAAKovC,UACTpvC,KAAKyoE,MAAQF,GAEjB,YAAAQ,iBAAA,SAAiBC,GACb,EAAA9H,IAAIlhE,KAAKovC,UACTpvC,KAAKw+C,WAAawqB,GAEtB,sBAAI,uBAAQ,C,IAAZ,WACI,IAAKhpE,KAAKipE,UAAW,CACjB,IAAM,EAAOjpE,KACbA,KAAKipE,UAAY,CACb,UAAuB,OAAO,EAAKpjE,KACnC,eAAyB,OAAO,EAAKA,IAAIC,QACzC,iBAA4B,MAA2B,aAApB,EAAKD,IAAIqZ,QAC5C,iBAA2B,OAAO,EAAKs/B,YACvC,cAAwB,OAAO,EAAK8pB,WACpC,eAA0B,OAAO,EAAKl5B,UACtC,cAAyB,OAAO,EAAKq5B,OACrCS,KAAA,WAA2B,OAAO,EAAKA,QACvCzpB,QAAA,SAAQr5C,GAAkB,OAAOA,EAAQ,EAAK+iE,eAAe/iE,GAAS,EAAKq5C,WAC3E,UAA6B,MAAoB,OAAb,EAAK14C,IAAe,EAAA5C,UAAU4uC,GAAK,EAAA5uC,UAAUilE,MACjF,gBAA0B,OAAO,EAAKf,MAAM58D,QAC5C49D,OAAA,SAAOC,GAAsD,OAAO,EAAKD,OAAOC,IAChF3pB,SAAA,SAAS1pB,GAAe,OAAO,EAAK0pB,SAAS1pB,IAC7CypB,WAAA,SAAWzY,GAA0B,OAAO,EAAKyY,WAAWzY,IAC5DsiC,cAAA,SAAcC,GAAoB,OAAO,EAAKD,cAAcC,IAC5DC,iBAAA,SAAiBxzC,GAAuB,OAAO,EAAKwzC,iBAAiBxzC,IACrEyzC,uBAAA,SAAuBzzC,EAAK0zC,GAAoC,OAAO,EAAKD,uBAAuBzzC,EAAK0zC,KAGhH,OAAOlrE,OAAO6vB,OAAOtuB,KAAKipE,Y,gCAGtB,YAAAJ,iBAAR,SAAyBjiE,EAAoBgjE,GACzC,GAA0B,IAAtBA,EAAWn+D,OAAf,CAIA,IAAMo+D,EAAcD,EAAWriD,MAAM,cACrC,GAA2B,IAAvBsiD,EAAYp+D,OAAhB,CAWAo+D,EAAYA,EAAYp+D,OAAS,IAAMzL,KAAKqoE,MAAMzhE,EAAS7F,KAAO,GAAGg0B,UAAUnuB,EAAS3E,UAAY,GAGpGjC,KAAK8pE,YAAYljE,EAAS7F,KAAO,EAC7Bf,KAAKqoE,MAAMzhE,EAAS7F,KAAO,GAAGg0B,UAAU,EAAGnuB,EAAS3E,UAAY,GAC9D4nE,EAAY,IAKlB,IADA,IAAME,EAAa,IAAIC,YAAYH,EAAYp+D,OAAS,GAC/C1N,EAAI,EAAGA,EAAI8rE,EAAYp+D,OAAQ1N,IACpCiC,KAAKqoE,MAAMxhD,OAAOjgB,EAAS7F,KAAOhD,EAAI,EAAG,EAAG8rE,EAAY9rE,IACxDgsE,EAAWhsE,EAAI,GAAK8rE,EAAY9rE,GAAG0N,OAASzL,KAAK+G,IAAI0E,OAGrDzL,KAAK2oE,YAEL3oE,KAAK2oE,WAAWsB,aAAarjE,EAAS7F,KAAMgpE,QA1B5C/pE,KAAK8pE,YAAYljE,EAAS7F,KAAO,EAC7Bf,KAAKqoE,MAAMzhE,EAAS7F,KAAO,GAAGg0B,UAAU,EAAGnuB,EAAS3E,UAAY,GAC9D4nE,EAAY,GACZ7pE,KAAKqoE,MAAMzhE,EAAS7F,KAAO,GAAGg0B,UAAUnuB,EAAS3E,UAAY,MA2BnE,YAAA2mE,kBAAR,SAA0BxiE,GAEtB,GAAIA,EAAMoT,kBAAoBpT,EAAMsT,cAcpC1Z,KAAK8pE,YAAY1jE,EAAMoT,gBAAkB,EACrCxZ,KAAKqoE,MAAMjiE,EAAMoT,gBAAkB,GAAGub,UAAU,EAAG3uB,EAAMqT,YAAc,GACrEzZ,KAAKqoE,MAAMjiE,EAAMsT,cAAgB,GAAGqb,UAAU3uB,EAAMvD,UAAY,IAItE7C,KAAKqoE,MAAMxhD,OAAOzgB,EAAMoT,gBAAiBpT,EAAMsT,cAAgBtT,EAAMoT,iBACjExZ,KAAK2oE,YACL3oE,KAAK2oE,WAAWuB,aAAa9jE,EAAMoT,gBAAiBpT,EAAMsT,cAAgBtT,EAAMoT,qBAtBpF,CACI,GAAIpT,EAAMqT,cAAgBrT,EAAMvD,UAE5B,OAGJ7C,KAAK8pE,YAAY1jE,EAAMoT,gBAAkB,EACrCxZ,KAAKqoE,MAAMjiE,EAAMoT,gBAAkB,GAAGub,UAAU,EAAG3uB,EAAMqT,YAAc,GACrEzZ,KAAKqoE,MAAMjiE,EAAMoT,gBAAkB,GAAGub,UAAU3uB,EAAMvD,UAAY,MAkBxE,YAAAinE,YAAR,SAAoBK,EAAmBC,GACnCpqE,KAAKqoE,MAAM8B,GAAaC,EACpBpqE,KAAK2oE,YACL3oE,KAAK2oE,WAAW0B,YAAYF,EAAWnqE,KAAKqoE,MAAM8B,GAAW1+D,OAASzL,KAAK+G,IAAI0E,SAI/E,YAAAy9D,KAAR,WACI,OAAIlpE,KAAKovC,SACE7gB,QAAQ4I,OAAO,IAAIl2B,MAAM,uBAE7BjB,KAAKstD,MAAMgd,iBAAiBtqE,KAAK6F,MAGpC,YAAAsjE,eAAR,SAAuB7iE,GACnB,IAAMF,EAAQpG,KAAKupE,cAAcjjE,GAEjC,GAAIF,EAAMiD,QACN,MAAO,GAGX,GAAIjD,EAAMmkE,aACN,OAAOvqE,KAAKqoE,MAAMjiE,EAAMtD,MAAM/B,MAAMg0B,UAAU3uB,EAAMtD,MAAMb,UAAWmE,EAAMrD,IAAId,WAGnF,IAAMuoE,EAAaxqE,KAAK+G,IAClB0jE,EAAiBrkE,EAAMtD,MAAM/B,KAC7B2pE,EAAetkE,EAAMrD,IAAIhC,KACzB4pE,EAAwB,GAE9BA,EAAY5/D,KAAK/K,KAAKqoE,MAAMoC,GAAgB11C,UAAU3uB,EAAMtD,MAAMb,YAClE,IAAK,IAAIlE,EAAI0sE,EAAiB,EAAG1sE,EAAI2sE,EAAc3sE,IAC/C4sE,EAAY5/D,KAAK/K,KAAKqoE,MAAMtqE,IAIhC,OAFA4sE,EAAY5/D,KAAK/K,KAAKqoE,MAAMqC,GAAc31C,UAAU,EAAG3uB,EAAMrD,IAAId,YAE1D0oE,EAAYnjD,KAAKgjD,IAGpB,YAAAjB,cAAR,SAAsBnjE,GAClB,KAAMA,aAAiB,EAAAhD,OACnB,MAAM,IAAInC,MAAM,oBAGpB,IAAM6B,EAAQ9C,KAAKypE,iBAAiBrjE,EAAMtD,OACpCC,EAAM/C,KAAKypE,iBAAiBrjE,EAAMrD,KAExC,OAAID,IAAUsD,EAAMtD,OAASC,IAAQqD,EAAMrD,IAChCqD,EAEJ,IAAI,EAAAhD,MAAMN,EAAM/B,KAAM+B,EAAMb,UAAWc,EAAIhC,KAAMgC,EAAId,YAGxD,YAAAw9C,QAAR,WACI,OAAOz/C,KAAKqoE,MAAM7gD,KAAKxnB,KAAK+G,MAGxB,YAAA0iE,iBAAR,SAAyB7iE,GACrB,KAAMA,aAAoB,EAAA5E,UACtB,MAAM,IAAIf,MAAM,oBAGd,IAAAF,EAAA,EAAAA,KAAMkB,EAAA,EAAAA,UACR2oE,GAAa,EAEjB,GAAI7pE,EAAO,EACPA,EAAO,EACPkB,EAAY,EACZ2oE,GAAa,OACV,GAAI7pE,GAAQf,KAAKqoE,MAAM58D,OAC1B1K,EAAOf,KAAKqoE,MAAM58D,OAAS,EAC3BxJ,EAAYjC,KAAKqoE,MAAMtnE,GAAM0K,OAC7Bm/D,GAAa,MACV,CACH,IAAMC,EAAe7qE,KAAKqoE,MAAMtnE,GAAM0K,OAClCxJ,EAAY,GACZA,EAAY,EACZ2oE,GAAa,GACN3oE,EAAY4oE,IACnB5oE,EAAY4oE,EACZD,GAAa,GAIrB,OAAKA,EAGE,IAAI,EAAA5oE,SAASjB,EAAMkB,GAFf2E,GAKP,YAAAyiE,OAAR,SAAeyB,GAEX,IAAI/pE,GAAgB,EAOpB,GANI+pE,aAA0B,EAAA9oE,SAC1BjB,EAAO+pE,EAAe/pE,KACW,iBAAnB+pE,IACd/pE,EAAO+pE,GAGP/pE,EAAO,GAAKA,GAAQf,KAAKqoE,MAAM58D,OAC/B,MAAM,IAAIxK,MAAM,4BAGpB,IAAIoB,EAASrC,KAAKwoE,UAAUznE,GAC5B,IAAKsB,GAAUA,EAAOuc,aAAe7d,GAAQsB,EAAOqY,OAAS1a,KAAKqoE,MAAMtnE,GAAO,CAE3E,IAAM2Z,EAAO1a,KAAKqoE,MAAMtnE,GAClBgqE,EAAmC,SAASn2C,KAAKla,GAAO,GAAGjP,OAC3DrF,EAAQ,IAAI,EAAAhD,MAAMrC,EAAM,EAAGA,EAAM2Z,EAAKjP,QACtCu/D,EAA0BjqE,EAAOf,KAAKqoE,MAAM58D,OAAS,EACrD,IAAI,EAAArI,MAAMrC,EAAM,EAAGA,EAAO,EAAG,GAC7BqF,EAEN/D,EAAS5D,OAAO6vB,OAAO,CACnB1P,WAAY7d,EACZqF,MAAK,EACL4kE,wBAAuB,EACvBtwD,KAAI,EACJqwD,iCAAgC,EAChCE,oBAAqBF,IAAqCrwD,EAAKjP,SAGnEzL,KAAKwoE,UAAUznE,GAAQsB,EAG3B,OAAOA,GAGH,YAAAs9C,SAAR,SAAiB/4C,GAGb,OAFAA,EAAW5G,KAAKypE,iBAAiB7iE,GACjC5G,KAAKkrE,mBACElrE,KAAK2oE,WAAYwC,oBAAoBvkE,EAAS7F,KAAO,GAAK6F,EAAS3E,WAGtE,YAAAipE,iBAAR,WACI,IAAKlrE,KAAK2oE,WAAY,CAIlB,IAHA,IAAMyC,EAAYprE,KAAK+G,IAAI0E,OACrB4/D,EAAcrrE,KAAKqoE,MAAM58D,OACzB6/D,EAAkB,IAAItB,YAAYqB,GAC/BttE,EAAI,EAAGA,EAAIstE,EAAattE,IAC7ButE,EAAgBvtE,GAAKiC,KAAKqoE,MAAMtqE,GAAG0N,OAAS2/D,EAEhDprE,KAAK2oE,WAAa,IAAI,EAAA4C,kBAAkBD,KAIxC,YAAA5rB,WAAR,SAAmBzY,GACfA,EAAS9e,KAAK0kB,MAAM5F,GACpBA,EAAS9e,KAAK8hB,IAAI,EAAGhD,GAErBjnC,KAAKkrE,mBACL,IAAMzgC,EAAMzqC,KAAK2oE,WAAY6C,WAAWvkC,GAElCwkC,EAAazrE,KAAKqoE,MAAM59B,EAAI3nB,OAAOrX,OAEzC,OAAO,IAAI,EAAAzJ,SAASyoC,EAAI3nB,MAAOqF,KAAKC,IAAIqiB,EAAIihC,UAAWD,KAGnD,YAAA/B,uBAAR,SAA+BiC,EAA2BhC,GACtD,IAAM/iE,EAAW5G,KAAKypE,iBAAiBkC,GAElChC,EAIMiC,EAAyBjC,KAEhC58C,QAAQY,KAAK,qDAAqDg8C,EAAOv4D,OAAM,0CAC/Eu4D,EAASzB,EAAqBloE,KAAKw+C,aALnCmrB,EAASzB,EAAqBloE,KAAKw+C,YAQvC,IAAMqtB,EAAa,EAAAC,cACfllE,EAAS3E,UAAY,EACrB,EAAA8pE,0BAA0BpC,GAC1B3pE,KAAKqoE,MAAMzhE,EAAS7F,MACpB,GAGJ,GAAI8qE,EACA,OAAO,IAAI,EAAAzoE,MAAMwD,EAAS7F,KAAM8qE,EAAWpyD,YAAc,EAAG7S,EAAS7F,KAAM8qE,EAAWhpE,UAAY,IAI9G,EA/TA,GAiUA,SAAgB+oE,EAAyBjC,GAGrC,MAAsB,MAAlBA,EAAOv4D,QAAoC,OAAlBu4D,EAAOv4D,QAAqC,MAAlBu4D,EAAOv4D,QAAoC,WAAlBu4D,EAAOv4D,SAMzEu4D,EAAO/0C,KAAK,KAEiB,IAArB+0C,EAAOvvB,WA5UpB,EAAA4xB,kBAiUb,8B,cC3VA,IAAItqB,EAAqC,oBAAZ,QAA2BhyC,OAAOgyC,iBAAmBhyC,OAAOgyC,gBAAgBniD,KAAKmQ,SACnE,oBAAd,UAAuE,mBAAnCo/B,OAAOm9B,SAASvqB,iBAAiCuqB,SAASvqB,gBAAgBniD,KAAK0sE,UAEhJ,GAAIvqB,EAAiB,CAEnB,IAAIwqB,EAAQ,IAAI5nC,WAAW,IAE3BxmC,EAAOD,QAAU,WAEf,OADA6jD,EAAgBwqB,GACTA,OAEJ,CAKL,IAAIC,EAAO,IAAIrjE,MAAM,IAErBhL,EAAOD,QAAU,WACf,IAAK,IAAWgB,EAAPd,EAAI,EAAMA,EAAI,GAAIA,IACN,IAAV,EAAJA,KAAiBc,EAAoB,WAAhBspB,KAAKikD,UAC/BD,EAAKpuE,GAAKc,MAAY,EAAJd,IAAa,GAAK,IAGtC,OAAOouE,K,cC1BX,IADA,IAAIE,EAAY,GACPtuE,EAAI,EAAGA,EAAI,MAAOA,EACzBsuE,EAAUtuE,IAAMA,EAAI,KAAOuN,SAAS,IAAIsc,OAAO,GAmBjD9pB,EAAOD,QAhBP,SAAqB8oC,EAAKM,GACxB,IAAIlpC,EAAIkpC,GAAU,EACdqlC,EAAMD,EAEV,MAAO,CACLC,EAAI3lC,EAAI5oC,MAAOuuE,EAAI3lC,EAAI5oC,MACvBuuE,EAAI3lC,EAAI5oC,MAAOuuE,EAAI3lC,EAAI5oC,MAAO,IAC9BuuE,EAAI3lC,EAAI5oC,MAAOuuE,EAAI3lC,EAAI5oC,MAAO,IAC9BuuE,EAAI3lC,EAAI5oC,MAAOuuE,EAAI3lC,EAAI5oC,MAAO,IAC9BuuE,EAAI3lC,EAAI5oC,MAAOuuE,EAAI3lC,EAAI5oC,MAAO,IAC9BuuE,EAAI3lC,EAAI5oC,MAAOuuE,EAAI3lC,EAAI5oC,MACvBuuE,EAAI3lC,EAAI5oC,MAAOuuE,EAAI3lC,EAAI5oC,MACvBuuE,EAAI3lC,EAAI5oC,MAAOuuE,EAAI3lC,EAAI5oC,OACtBypB,KAAK,M,4ICLV,SACA,QACA,UACA,U,8ECJA,WACA,OACA,SAOA,SAAiB+kD,GAab,SAAgBC,EAAS38D,EAAmB2W,GAExC,GAAmB,iBADnB3W,EAAMA,aAAe,WAAsB,SAAfA,EAAIqP,OAAoBrP,EAAI/J,OAAS+J,GAE7D,OAAOA,EAAIvE,UAAS,GAEhB,IAAAuJ,EAAA,WAAAA,YACF43D,EAAerlD,EAAKM,WAAW7X,GAAOA,EAAMuX,EAAKI,KAAK3S,EAAahF,GACnE68D,EAAiBtlD,EAAKK,UAAUglD,GAChC5zB,EAAezxB,EAAKnhB,SAAS4O,EAAa63D,GAChD,OAAO,EAAAh0B,cAAcC,YAAYnyB,EAAOvR,SAAU4jC,GArBtC,EAAA8zB,MAAhB,SAAsBh/D,EAAsC6Y,GACxD,GAAK7Y,EAGL,MAAwB,iBAAbA,GAAyB,UAAWA,EACpC,CACHuW,MAAOsoD,EAAS7+D,EAASuW,MAAOsC,GAChCrC,KAAMqoD,EAAS7+D,EAASwW,KAAMqC,IAG/BgmD,EAAS7+D,EAAU6Y,IAEd,EAAAgmD,SAAQ,EAb5B,CAAiB,EAAAD,iBAAA,EAAAA,eAAc,M,uFCpB/B9tE,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAII65B,EAJE9oB,EAAKgoB,EAAQ,KAKnB,SAAWc,GAEPA,EAAW+zC,YAAc,MACzB/zC,EAAWg0C,gBAAkB,MAC7Bh0C,EAAWkH,gBAAkB,MAC7BlH,EAAWi0C,eAAiB,MAC5Bj0C,EAAWgH,eAAiB,MAC5BhH,EAAWk0C,kBAAoB,MAC/Bl0C,EAAWm0C,gBAAkB,KAC7Bn0C,EAAWo0C,sBAAwB,MACnCp0C,EAAWq0C,kBAAoB,MAE/Br0C,EAAWs0C,kBAAoB,MAC/Bt0C,EAAWu0C,iBAAmB,MAE9Bv0C,EAAWwJ,kBAAoB,EAC/BxJ,EAAWw0C,iBAAmB,EAhBlC,CAiBGx0C,EAAah7B,EAAQg7B,aAAeh7B,EAAQg7B,WAAa,K,IAKtDD,E,YACF,WAAY5qB,EAAMpG,EAASkpB,GAAM,wBAC7B,wBAAMlpB,KACDoG,KAAO+B,EAAGnL,OAAOoJ,GAAQA,EAAO6qB,EAAWq0C,iBAChD,EAAKp8C,KAAOA,EACZryB,OAAOyP,eAAP,KAA4B0qB,EAAcj5B,WAJb,E,kDAO7B,MAAO,CACHqO,KAAMhO,KAAKgO,KACXpG,QAAS5H,KAAK4H,QACdkpB,KAAM9wB,KAAK8wB,U,KAXK7vB,QAe5BpD,EAAQ+6B,cAAgBA,E,IAIlB00C,E,WACF,WAAYC,EAASC,GAAiB,UAClCxtE,KAAKutE,QAAUA,EACfvtE,KAAKwtE,gBAAkBA,E,yCAGvB,OAAOxtE,KAAKutE,U,qCAGZ,OAAOvtE,KAAKwtE,oB,KAGpB3vE,EAAQyvE,oBAAsBA,E,IAIxBp1C,E,YACF,WAAYsG,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQq6B,aAAeA,E,IACjBD,E,YACF,WAAYuG,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADEgtE,GAM1BzvE,EAAQo6B,YAAcA,E,IAChBE,E,YACF,WAAYqG,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQs6B,aAAeA,E,IACjBC,E,YACF,WAAYoG,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQu6B,aAAeA,E,IACjBC,E,YACF,WAAYmG,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQw6B,aAAeA,E,IACjBC,E,YACF,WAAYkG,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQy6B,aAAeA,E,IACjBC,E,YACF,WAAYiG,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQ06B,aAAeA,E,IACjBC,E,YACF,WAAYgG,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQ26B,aAAeA,E,IACjBC,E,YACF,WAAY+F,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQ46B,aAAeA,E,IACjBC,E,YACF,WAAY8F,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQ66B,aAAeA,E,IACjBC,E,YACF,WAAY6F,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADGgtE,GAM3BzvE,EAAQ86B,aAAeA,E,IACjBG,E,YACF,WAAY0F,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADOgtE,GAM/BzvE,EAAQi7B,iBAAmBA,E,IACrBC,E,YACF,WAAYyF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQk7B,kBAAoBA,E,IACtBC,E,YACF,WAAYwF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQm7B,kBAAoBA,E,IACtBC,E,YACF,WAAYuF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQo7B,kBAAoBA,E,IACtBC,E,YACF,WAAYsF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQq7B,kBAAoBA,E,IACtBC,E,YACF,WAAYqF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQs7B,kBAAoBA,E,IACtBC,E,YACF,WAAYoF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQu7B,kBAAoBA,E,IACtBC,E,YACF,WAAYmF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQw7B,kBAAoBA,E,IACtBC,E,YACF,WAAYkF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQy7B,kBAAoBA,E,IACtBC,E,YACF,WAAYiF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQ07B,kBAAoBA,E,IACtBC,E,YACF,WAAYgF,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADQgtE,GAMhCzvE,EAAQ27B,kBAAoBA,EAQ5B37B,EAAQ0/B,iBAJR,SAA0B31B,GACtB,IAAIkE,EAAYlE,EAChB,OAAOkE,GAAaiE,EAAGrL,OAAOoH,EAAU0yB,UAAYzuB,EAAGrL,OAAOoH,EAAU7G,KAAO8K,EAAGnL,OAAOkH,EAAU7G,MAUvGpH,EAAQoiC,sBAJR,SAA+Br4B,GAC3B,IAAIkE,EAAYlE,EAChB,OAAOkE,GAAaiE,EAAGrL,OAAOoH,EAAU0yB,cAA0B,IAAf52B,EAAQ3C,IAU/DpH,EAAQ2/B,kBAJR,SAA2B51B,GACvB,IAAIkE,EAAYlE,EAChB,OAAOkE,SAAmC,IAArBA,EAAUzJ,UAAuByJ,EAAUkhB,SAAWjd,EAAGrL,OAAOoH,EAAU7G,KAAO8K,EAAGnL,OAAOkH,EAAU7G,KAAwB,OAAjB6G,EAAU7G,M,4IC9O/I,SACA,SACA,W,gICFA,IAGA,E,YAMI,WAA+B8vC,GAAkB,wBAC7C,2BAD2BA,SAJrB,EAAAjY,MAA4C,UAEnC,EAAA0nB,OAA2C,GAI1D,EAAKzP,OAAOua,WAAU,SAAA1nD,GAAO,OACzB,EAAK6lE,YAAY7lE,MAErB,EAAKmtC,OAAOhU,SAAQ,SAAA/T,GAAK,OACrB,EAAKknB,UAAUlnB,MAEnB,EAAK+nB,OAAOjU,SAAQ,SAAC9yB,EAAM8xD,GACvB,GAAa,MAAT9xD,EAAe,CACf,IAAMgf,EAAe,CACjB1uB,KAAM,GAAK0P,EACXpG,QAAS,yCAAF,OAA2CoG,EAA3C,sBAA6D8xD,IAExE,EAAK5rB,UAAUlnB,GAEnB,EAAKmnB,eAhBoC,E,gDAoB1C9nB,GACH,GAAmB,YAAfrsB,KAAK88B,MAGL,IAFA98B,KAAK88B,MAAQ,YACb98B,KAAKqsB,SAAWA,EACc,IAAvBrsB,KAAKwkD,OAAO/4C,QAAc,CAC7B,IAAMsgB,EAAQ/rB,KAAKwkD,OAAOjiD,MACtBwpB,EAAMnkB,QACN5H,KAAKytE,YAAY1hD,EAAMnkB,SAChBmkB,EAAMiB,MACbhtB,KAAKk0C,UAAUnoB,EAAMiB,OAErBhtB,KAAKm0C,e,kCAMCvsC,GAClB,GAAmB,YAAf5H,KAAK88B,MACL98B,KAAKwkD,OAAO39B,OAAO,EAAG,EAAG,CAAEjf,iBACxB,GAAmB,cAAf5H,KAAK88B,MAAuB,CACnC,IAAMhM,EAAOwK,KAAKpY,MAAMtb,GACxB5H,KAAKqsB,SAAUyE,M,gCAIH9D,GACG,YAAfhtB,KAAK88B,MACL98B,KAAKwkD,OAAO39B,OAAO,EAAG,EAAG,CAAEmG,UACL,cAAfhtB,KAAK88B,OACZ,6CAAgB9P,K,kCAKD,YAAfhtB,KAAK88B,MACL98B,KAAKwkD,OAAO39B,OAAO,EAAG,EAAG,IACH,cAAf7mB,KAAK88B,OACZ,8CAEJ98B,KAAK88B,MAAQ,a,GArErB,MAG4C4W,uBAA5C,4B,wHCFA,IAGA,E,YAII,WAA+BqB,GAAkB,wBAC7C,2BAD2BA,SAFrB,EAAAE,WAAa,EAE0B,E,+CAI3CV,GACF,IACI,IAAM+K,EAAUhkB,KAAK0D,UAAUuV,GAC/Bv0C,KAAK+0C,OAAOK,KAAKkK,GACnB,MAAO1zC,GACL5L,KAAKi1C,aACLj1C,KAAKk0C,UAAUtoC,EAAG2oC,EAAKv0C,KAAKi1C,iB,GAjBxC,MAG4CD,uBAA5C,4B,oGCHA,E,0EACiBptC,GACTmlB,QAAQC,MAAMplB,K,2BAGNA,GACRmlB,QAAQY,KAAK/lB,K,2BAGLA,GACRmlB,QAAQ5L,KAAKvZ,K,0BAGNA,GACPmlB,QAAQkO,IAAIrzB,K,4BAGHA,GACTmlB,QAAQmC,MAAMtnB,O,KAlBtB,mB,8ECiCA,iBACI,WACayqD,EACAC,EACAjyD,GAFA,KAAAgyD,SACA,KAAAC,SACA,KAAAjyD,UASjB,OANI,YAAAqtE,QAAA,SAAQ1nE,EAAgBiU,QAAA,IAAAA,MAAA,SAAqCrS,GAAW,OAAAA,IACpE5H,KAAKqyD,OAAOrvB,QAAO,SAAAO,GACf,IAAMC,EAASvpB,EAAIspB,GACnBv9B,EAAGssD,OAAOzzB,MAAM2E,OAG5B,EAbA,GAAa,EAAAmqC,mBAkBb,iBACI,WAA+B/rC,GAAA,KAAAA,aAuBnC,OArBI,YAAAwT,KAAA,SAAKkK,GACDt/C,KAAK4hC,WAAW0wB,OAAOzzB,MAAMygB,IAIjC,YAAAgQ,UAAA,SAAU1/B,GACN5vB,KAAK4hC,WAAWywB,OAAOrvB,OAAOpT,IAIlC,YAAAmR,QAAA,SAAQnR,GACJ5vB,KAAK4hC,WAAWywB,OAAOtxB,SAAQ,SAAAn1B,GAAK,OAAAgkB,EAAGhkB,OAG3C,YAAAk1B,QAAA,SAAQlR,GACJ5vB,KAAK4hC,WAAWywB,OAAOvxB,SAAQ,WAAM,OAAAlR,GAAI,EAAG,cAGhD,YAAAvvB,QAAA,WACIL,KAAK4hC,WAAWvhC,WAExB,EAxBA,GAAa,EAAAutE,0B,iBCzDb,cAUA,IASIC,EAAU,qBAKVC,EAAU,oBACVC,EAAS,6BACTC,EAAS,eAKTC,EAAS,eAwBTC,EAAU,OAGVC,EAAe,8BAGfC,EAAW,mBAGXC,EAAgB,GACpBA,EAAcR,GAAWQ,EA7CV,kBA8CfA,EA9BqB,wBA8BWA,EA7Bd,qBA8BlBA,EA9Cc,oBA8CWA,EA7CX,iBA8CdA,EA9BiB,yBA8BWA,EA7BX,yBA8BjBA,EA7Bc,sBA6BWA,EA5BV,uBA6BfA,EA5Be,uBA4BWA,EAAcL,GACxCK,EA5CgB,mBA4CWA,EA3CX,mBA4ChBA,EA1CgB,mBA0CWA,EAAcJ,GACzCI,EAzCgB,mBAyCWA,EAxCX,mBAyChBA,EA/Be,uBA+BWA,EA9BJ,8BA+BtBA,EA9BgB,wBA8BWA,EA7BX,yBA6BsC,EACtDA,EArDe,kBAqDWA,EAAcP,GACxCO,EA3CiB,qBA2CW,EAG5B,IAAIC,EAA8B,iBAAV/+C,GAAsBA,GAAUA,EAAO9wB,SAAWA,QAAU8wB,EAGhFg/C,EAA0B,iBAAR3qC,MAAoBA,MAAQA,KAAKnlC,SAAWA,QAAUmlC,KAGxE2W,EAAO+zB,GAAcC,GAAYnvD,SAAS,cAATA,GAGjCovD,EAA4C3wE,IAAYA,EAAQ4wE,UAAY5wE,EAG5E6wE,EAAaF,GAAgC,iBAAV1wE,GAAsBA,IAAWA,EAAO2wE,UAAY3wE,EAGvF6wE,EAAgBD,GAAcA,EAAW7wE,UAAY2wE,EAUzD,SAASI,EAAY30D,EAAK40D,GAGxB,OADA50D,EAAI1O,IAAIsjE,EAAK,GAAIA,EAAK,IACf50D,EAWT,SAAS60D,EAAYvjE,EAAKvM,GAGxB,OADAuM,EAAI6gB,IAAIptB,GACDuM,EAuDT,SAASwjE,EAAYvkD,EAAOwkD,EAAUC,EAAaC,GACjD,IAAIpsD,GAAS,EACTrX,EAAS+e,EAAQA,EAAM/e,OAAS,EAKpC,IAHIyjE,GAAazjE,IACfwjE,EAAczkD,IAAQ1H,MAEfA,EAAQrX,GACfwjE,EAAcD,EAASC,EAAazkD,EAAM1H,GAAQA,EAAO0H,GAE3D,OAAOykD,EAyCT,SAASE,EAAanwE,GAGpB,IAAIqD,GAAS,EACb,GAAa,MAATrD,GAA0C,mBAAlBA,EAAMsM,SAChC,IACEjJ,KAAYrD,EAAQ,IACpB,MAAO4M,IAEX,OAAOvJ,EAUT,SAAS+sE,EAAWn1D,GAClB,IAAI6I,GAAS,EACTzgB,EAASyG,MAAMmR,EAAIkkB,MAKvB,OAHAlkB,EAAI9N,SAAQ,SAASnN,EAAOM,GAC1B+C,IAASygB,GAAS,CAACxjB,EAAKN,MAEnBqD,EAWT,SAASgtE,EAAQtvE,EAAMk8D,GACrB,OAAO,SAASpsD,GACd,OAAO9P,EAAKk8D,EAAUpsD,KAW1B,SAASy/D,EAAW/jE,GAClB,IAAIuX,GAAS,EACTzgB,EAASyG,MAAMyC,EAAI4yB,MAKvB,OAHA5yB,EAAIY,SAAQ,SAASnN,GACnBqD,IAASygB,GAAS9jB,KAEbqD,EAIT,IASMktE,EATFC,EAAa1mE,MAAMnJ,UACnB8vE,EAAYrwD,SAASzf,UACrB+vE,EAAcjxE,OAAOkB,UAGrBgwE,EAAap1B,EAAK,sBAGlBq1B,GACEL,EAAM,SAAS36C,KAAK+6C,GAAcA,EAAW5sC,MAAQ4sC,EAAW5sC,KAAK8sC,UAAY,KACvE,iBAAmBN,EAAO,GAItCO,EAAeL,EAAUnkE,SAGzB1L,EAAiB8vE,EAAY9vE,eAO7BqyC,EAAiBy9B,EAAYpkE,SAG7BykE,EAAah/B,OAAO,IACtB++B,EAAa5xE,KAAK0B,GAAgB4E,QAzQjB,sBAyQuC,QACvDA,QAAQ,yDAA0D,SAAW,KAI5E0/B,EAASyqC,EAAgBp0B,EAAKrW,YAAS5jC,EACvCxB,EAASy7C,EAAKz7C,OACdwlC,EAAaiW,EAAKjW,WAClB0rC,EAAeX,EAAQ5wE,OAAOu4B,eAAgBv4B,QAC9CwxE,EAAexxE,OAAOY,OACtB6wE,EAAuBR,EAAYQ,qBACnCrpD,EAAS2oD,EAAW3oD,OAGpBspD,EAAmB1xE,OAAOklD,sBAC1BysB,EAAiBlsC,EAASA,EAAOgB,cAAW5kC,EAC5C+vE,EAAahB,EAAQ5wE,OAAOskC,KAAMtkC,QAGlCuiE,EAAWsP,GAAU/1B,EAAM,YAC3BtuC,EAAMqkE,GAAU/1B,EAAM,OACtBhsB,EAAU+hD,GAAU/1B,EAAM,WAC1Bg2B,EAAMD,GAAU/1B,EAAM,OACtBi2B,EAAUF,GAAU/1B,EAAM,WAC1Bk2B,EAAeH,GAAU7xE,OAAQ,UAGjCiyE,EAAqBC,GAAS3P,GAC9B4P,EAAgBD,GAAS1kE,GACzB4kE,EAAoBF,GAASpiD,GAC7BuiD,GAAgBH,GAASJ,GACzBQ,GAAoBJ,GAASH,GAG7BQ,GAAclyE,EAASA,EAAOa,eAAYW,EAC1C2wE,GAAgBD,GAAcA,GAAYE,aAAU5wE,EASxD,SAAS6wE,GAAKplE,GACZ,IAAI+W,GAAS,EACTrX,EAASM,EAAUA,EAAQN,OAAS,EAGxC,IADAzL,KAAK+9C,UACIj7B,EAAQrX,GAAQ,CACvB,IAAI+V,EAAQzV,EAAQ+W,GACpB9iB,KAAKuL,IAAIiW,EAAM,GAAIA,EAAM,KA2F7B,SAAS4vD,GAAUrlE,GACjB,IAAI+W,GAAS,EACTrX,EAASM,EAAUA,EAAQN,OAAS,EAGxC,IADAzL,KAAK+9C,UACIj7B,EAAQrX,GAAQ,CACvB,IAAI+V,EAAQzV,EAAQ+W,GACpB9iB,KAAKuL,IAAIiW,EAAM,GAAIA,EAAM,KAyG7B,SAAS6vD,GAAStlE,GAChB,IAAI+W,GAAS,EACTrX,EAASM,EAAUA,EAAQN,OAAS,EAGxC,IADAzL,KAAK+9C,UACIj7B,EAAQrX,GAAQ,CACvB,IAAI+V,EAAQzV,EAAQ+W,GACpB9iB,KAAKuL,IAAIiW,EAAM,GAAIA,EAAM,KAuF7B,SAAS8vD,GAAMvlE,GACb/L,KAAKuxE,SAAW,IAAIH,GAAUrlE,GA4FhC,SAASylE,GAAcxyE,EAAOyyE,GAG5B,IAAIpvE,EAAU0G,GAAQ/J,IAsrBxB,SAAqBA,GAEnB,OAmFF,SAA2BA,GACzB,OAmIF,SAAsBA,GACpB,QAASA,GAAyB,iBAATA,EApIlB0yE,CAAa1yE,IAAU2yE,GAAY3yE,GApFnC4yE,CAAkB5yE,IAAUY,EAAe1B,KAAKc,EAAO,aAC1DkxE,EAAqBhyE,KAAKc,EAAO,WAAaizC,EAAe/zC,KAAKc,IAAU6uE,GAzrBhDvL,CAAYtjE,GAljB9C,SAAmBQ,EAAGwvE,GAIpB,IAHA,IAAIlsD,GAAS,EACTzgB,EAASyG,MAAMtJ,KAEVsjB,EAAQtjB,GACf6C,EAAOygB,GAASksD,EAASlsD,GAE3B,OAAOzgB,EA4iBHwvE,CAAU7yE,EAAMyM,OAAQmP,QACxB,GAEAnP,EAASpJ,EAAOoJ,OAChBqmE,IAAgBrmE,EAEpB,IAAK,IAAInM,KAAON,GACTyyE,IAAa7xE,EAAe1B,KAAKc,EAAOM,IACvCwyE,IAAuB,UAAPxyE,GAAmByyE,GAAQzyE,EAAKmM,KACpDpJ,EAAO0I,KAAKzL,GAGhB,OAAO+C,EAaT,SAAS2vE,GAAYvyE,EAAQH,EAAKN,GAChC,IAAIizE,EAAWxyE,EAAOH,GAChBM,EAAe1B,KAAKuB,EAAQH,IAAQ4yE,GAAGD,EAAUjzE,UACxCsB,IAAVtB,GAAyBM,KAAOG,KACnCA,EAAOH,GAAON,GAYlB,SAASmzE,GAAa3nD,EAAOlrB,GAE3B,IADA,IAAImM,EAAS+e,EAAM/e,OACZA,KACL,GAAIymE,GAAG1nD,EAAM/e,GAAQ,GAAInM,GACvB,OAAOmM,EAGX,OAAQ,EA8BV,SAAS2mE,GAAUpzE,EAAOqzE,EAAQC,EAAQC,EAAYjzE,EAAKG,EAAQwvD,GACjE,IAAI5sD,EAIJ,GAHIkwE,IACFlwE,EAAS5C,EAAS8yE,EAAWvzE,EAAOM,EAAKG,EAAQwvD,GAASsjB,EAAWvzE,SAExDsB,IAAX+B,EACF,OAAOA,EAET,IAAKyuC,GAAS9xC,GACZ,OAAOA,EAET,IAAIwzE,EAAQzpE,GAAQ/J,GACpB,GAAIwzE,GAEF,GADAnwE,EA2XJ,SAAwBmoB,GACtB,IAAI/e,EAAS+e,EAAM/e,OACfpJ,EAASmoB,EAAMyI,YAAYxnB,GAG3BA,GAA6B,iBAAZ+e,EAAM,IAAkB5qB,EAAe1B,KAAKssB,EAAO,WACtEnoB,EAAOygB,MAAQ0H,EAAM1H,MACrBzgB,EAAOkhC,MAAQ/Y,EAAM+Y,OAEvB,OAAOlhC,EApYIowE,CAAezzE,IACnBqzE,EACH,OA6ON,SAAmBjhE,EAAQoZ,GACzB,IAAI1H,GAAS,EACTrX,EAAS2F,EAAO3F,OAEpB+e,IAAUA,EAAQ1hB,MAAM2C,IACxB,OAASqX,EAAQrX,GACf+e,EAAM1H,GAAS1R,EAAO0R,GAExB,OAAO0H,EArPIkoD,CAAU1zE,EAAOqD,OAErB,CACL,IAAIswE,EAAMC,GAAO5zE,GACb6zE,EAASF,GAAO7E,GAAW6E,GAAO5E,EAEtC,GAAI7oC,GAASlmC,GACX,OA0HN,SAAqBqmC,EAAQgtC,GAC3B,GAAIA,EACF,OAAOhtC,EAAOvd,QAEhB,IAAIzlB,EAAS,IAAIgjC,EAAOpS,YAAYoS,EAAO55B,QAE3C,OADA45B,EAAOD,KAAK/iC,GACLA,EAhIIywE,CAAY9zE,EAAOqzE,GAE5B,GAp0BY,mBAo0BRM,GAAoBA,GAAO9E,GAAYgF,IAAWpzE,EAAS,CAC7D,GAAI0vE,EAAanwE,GACf,OAAOS,EAAST,EAAQ,GAG1B,GADAqD,EA+XN,SAAyB5C,GACvB,MAAqC,mBAAtBA,EAAOwzB,aAA8B8/C,GAAYtzE,GAE5D,IAzVcuzE,EAwVHhD,EAAavwE,GAvVrBqxC,GAASkiC,GAAS/C,EAAa+C,GAAS,IADjD,IAAoBA,EAzCLC,CAAgBJ,EAAS,GAAK7zE,IAClCqzE,EACH,OA6QR,SAAqBjhE,EAAQ3R,GAC3B,OAAOyzE,GAAW9hE,EAAQ+hE,GAAW/hE,GAAS3R,GA9QjC2zE,CAAYp0E,EAhD3B,SAAoBS,EAAQ2R,GAC1B,OAAO3R,GAAUyzE,GAAW9hE,EAAQ2xB,GAAK3xB,GAAS3R,GA+ClB4zE,CAAWhxE,EAAQrD,QAE1C,CACL,IAAKqvE,EAAcsE,GACjB,OAAOlzE,EAAST,EAAQ,GAE1BqD,EA0YN,SAAwB5C,EAAQkzE,EAAKW,EAAWjB,GAC9C,IAAIkB,EAAO9zE,EAAOwzB,YAClB,OAAQ0/C,GACN,IArtCiB,uBAstCf,OAAOa,GAAiB/zE,GAE1B,IAvuCU,mBAwuCV,IAvuCU,gBAwuCR,OAAO,IAAI8zE,GAAM9zE,GAEnB,IA3tCc,oBA4tCZ,OA3QN,SAAuBg0E,EAAUpB,GAC/B,IAAIhtC,EAASgtC,EAASmB,GAAiBC,EAASpuC,QAAUouC,EAASpuC,OACnE,OAAO,IAAIouC,EAASxgD,YAAYoS,EAAQouC,EAAS/uC,WAAY+uC,EAAS9uC,YAyQ3D+uC,CAAcj0E,EAAQ4yE,GAE/B,IA7tCa,wBA6tCI,IA5tCJ,wBA6tCb,IA5tCU,qBA4tCI,IA3tCH,sBA2tCkB,IA1tClB,sBA2tCX,IA1tCW,sBA0tCI,IAztCG,6BAytCmB,IAxtCzB,uBAwtCyC,IAvtCzC,uBAwtCV,OA/MN,SAAyBh2B,EAAYg2B,GACnC,IAAIhtC,EAASgtC,EAASmB,GAAiBn3B,EAAWhX,QAAUgX,EAAWhX,OACvE,OAAO,IAAIgX,EAAWppB,YAAYoS,EAAQgX,EAAW3X,WAAY2X,EAAW5wC,QA6MjEkoE,CAAgBl0E,EAAQ4yE,GAEjC,KAAKrE,EACH,OArQN,SAAkB/zD,EAAKo4D,EAAQiB,GAE7B,OAAOvE,EADKsD,EAASiB,EAAUlE,EAAWn1D,IAAM,GAAQm1D,EAAWn1D,GACzC20D,EAAa,IAAI30D,EAAIgZ,aAmQpC2gD,CAASn0E,EAAQ4yE,EAAQiB,GAElC,IAhvCY,kBAivCZ,IA5uCY,kBA6uCV,OAAO,IAAIC,EAAK9zE,GAElB,IAjvCY,kBAkvCV,OAhQN,SAAqBkqE,GACnB,IAAItnE,EAAS,IAAIsnE,EAAO12C,YAAY02C,EAAOv4D,OAAQ88D,EAAQt5C,KAAK+0C,IAEhE,OADAtnE,EAAO+3C,UAAYuvB,EAAOvvB,UACnB/3C,EA6PIwxE,CAAYp0E,GAErB,KAAKwuE,EACH,OApPN,SAAkB1iE,EAAK8mE,EAAQiB,GAE7B,OAAOvE,EADKsD,EAASiB,EAAUhE,EAAW/jE,IAAM,GAAQ+jE,EAAW/jE,GACzCujE,EAAa,IAAIvjE,EAAI0nB,aAkPpC6gD,CAASr0E,EAAQ4yE,EAAQiB,GAElC,IApvCY,kBAqvCV,OA3Oe3wD,EA2OIljB,EA1OhBwxE,GAAgBxyE,OAAOwyE,GAAc/yE,KAAKykB,IAAW,GAD9D,IAAqBA,EA/LNoxD,CAAe/0E,EAAO2zE,EAAKP,GAAWC,IAInDpjB,IAAUA,EAAQ,IAAIqiB,IACtB,IAAI0C,EAAU/kB,EAAMrwD,IAAII,GACxB,GAAIg1E,EACF,OAAOA,EAIT,GAFA/kB,EAAM1jD,IAAIvM,EAAOqD,IAEZmwE,EACH,IAAI97C,EAAQ47C,EAsQhB,SAAoB7yE,GAClB,OAnOF,SAAwBA,EAAQw0E,EAAUC,GACxC,IAAI7xE,EAAS4xE,EAASx0E,GACtB,OAAOsJ,GAAQtJ,GAAU4C,EApwB3B,SAAmBmoB,EAAO2iC,GAKxB,IAJA,IAAIrqC,GAAS,EACTrX,EAAS0hD,EAAO1hD,OAChBw7B,EAASzc,EAAM/e,SAEVqX,EAAQrX,GACf+e,EAAMyc,EAASnkB,GAASqqC,EAAOrqC,GAEjC,OAAO0H,EA4vB2B2pD,CAAU9xE,EAAQ6xE,EAAYz0E,IAiOzD20E,CAAe30E,EAAQsjC,GAAMowC,IAvQbkB,CAAWr1E,GAAS+jC,GAAK/jC,GAUhD,OA5vBF,SAAmBwrB,EAAOwkD,GAIxB,IAHA,IAAIlsD,GAAS,EACTrX,EAAS+e,EAAQA,EAAM/e,OAAS,IAE3BqX,EAAQrX,IAC8B,IAAzCujE,EAASxkD,EAAM1H,GAAQA,EAAO0H,MA+uBpC8pD,CAAU59C,GAAS13B,GAAO,SAASu1E,EAAUj1E,GACvCo3B,IAEF69C,EAAWv1E,EADXM,EAAMi1E,IAIRvC,GAAY3vE,EAAQ/C,EAAK8yE,GAAUmC,EAAUlC,EAAQC,EAAQC,EAAYjzE,EAAKN,EAAOiwD,OAEhF5sD,EAkDT,SAASmyE,GAAax1E,GACpB,SAAK8xC,GAAS9xC,KAyYEe,EAzYiBf,EA0YxB4wE,GAAeA,KAAc7vE,MAvYvB6yC,GAAW5zC,IAAUmwE,EAAanwE,GAAU+wE,EAAa5B,GACzD/+C,KAAKuhD,GAAS3xE,IAqY/B,IAAkBe,EAtVlB,SAASyzE,GAAiBiB,GACxB,IAAIpyE,EAAS,IAAIoyE,EAAYxhD,YAAYwhD,EAAY9vC,YAErD,OADA,IAAIL,EAAWjiC,GAAQkJ,IAAI,IAAI+4B,EAAWmwC,IACnCpyE,EA8GT,SAAS6wE,GAAW9hE,EAAQslB,EAAOj3B,EAAQ8yE,GACzC9yE,IAAWA,EAAS,IAKpB,IAHA,IAAIqjB,GAAS,EACTrX,EAASirB,EAAMjrB,SAEVqX,EAAQrX,GAAQ,CACvB,IAAInM,EAAMo3B,EAAM5T,GAEZsnD,EAAWmI,EACXA,EAAW9yE,EAAOH,GAAM8R,EAAO9R,GAAMA,EAAKG,EAAQ2R,QAClD9Q,EAEJ0xE,GAAYvyE,EAAQH,OAAkBgB,IAAb8pE,EAAyBh5D,EAAO9R,GAAO8qE,GAElE,OAAO3qE,EAkCT,SAASi1E,GAAWz6D,EAAK3a,GACvB,IAqKiBN,EACboT,EAtKA0e,EAAO7W,EAAIs3D,SACf,OAsKgB,WADZn/D,SADapT,EApKAM,KAsKmB,UAAR8S,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAVpT,EACU,OAAVA,GAvKD8xB,EAAmB,iBAAPxxB,EAAkB,SAAW,QACzCwxB,EAAK7W,IAWX,SAASq2D,GAAU7wE,EAAQH,GACzB,IAAIN,EAj8BN,SAAkBS,EAAQH,GACxB,OAAiB,MAAVG,OAAiBa,EAAYb,EAAOH,GAg8B/Bq1E,CAASl1E,EAAQH,GAC7B,OAAOk1E,GAAax1E,GAASA,OAAQsB,EA7tBvC6wE,GAAKxxE,UAAUo+C,MAnEf,WACE/9C,KAAKuxE,SAAWd,EAAeA,EAAa,MAAQ,IAmEtDU,GAAKxxE,UAAkB,OAtDvB,SAAoBL,GAClB,OAAOU,KAAKqL,IAAI/L,WAAeU,KAAKuxE,SAASjyE,IAsD/C6xE,GAAKxxE,UAAUf,IA1Cf,SAAiBU,GACf,IAAIwxB,EAAO9wB,KAAKuxE,SAChB,GAAId,EAAc,CAChB,IAAIpuE,EAASyuB,EAAKxxB,GAClB,MA7YiB,8BA6YV+C,OAA4B/B,EAAY+B,EAEjD,OAAOzC,EAAe1B,KAAK4yB,EAAMxxB,GAAOwxB,EAAKxxB,QAAOgB,GAqCtD6wE,GAAKxxE,UAAU0L,IAzBf,SAAiB/L,GACf,IAAIwxB,EAAO9wB,KAAKuxE,SAChB,OAAOd,OAA6BnwE,IAAdwwB,EAAKxxB,GAAqBM,EAAe1B,KAAK4yB,EAAMxxB,IAwB5E6xE,GAAKxxE,UAAU4L,IAXf,SAAiBjM,EAAKN,GAGpB,OAFWgB,KAAKuxE,SACXjyE,GAAQmxE,QAA0BnwE,IAAVtB,EA5aV,4BA4akDA,EAC9DgB,MAoHToxE,GAAUzxE,UAAUo+C,MAjFpB,WACE/9C,KAAKuxE,SAAW,IAiFlBH,GAAUzxE,UAAkB,OArE5B,SAAyBL,GACvB,IAAIwxB,EAAO9wB,KAAKuxE,SACZzuD,EAAQqvD,GAAarhD,EAAMxxB,GAE/B,QAAIwjB,EAAQ,KAIRA,GADYgO,EAAKrlB,OAAS,EAE5BqlB,EAAKvuB,MAELskB,EAAO3oB,KAAK4yB,EAAMhO,EAAO,IAEpB,IAyDTsuD,GAAUzxE,UAAUf,IA7CpB,SAAsBU,GACpB,IAAIwxB,EAAO9wB,KAAKuxE,SACZzuD,EAAQqvD,GAAarhD,EAAMxxB,GAE/B,OAAOwjB,EAAQ,OAAIxiB,EAAYwwB,EAAKhO,GAAO,IA0C7CsuD,GAAUzxE,UAAU0L,IA9BpB,SAAsB/L,GACpB,OAAO6yE,GAAanyE,KAAKuxE,SAAUjyE,IAAQ,GA8B7C8xE,GAAUzxE,UAAU4L,IAjBpB,SAAsBjM,EAAKN,GACzB,IAAI8xB,EAAO9wB,KAAKuxE,SACZzuD,EAAQqvD,GAAarhD,EAAMxxB,GAO/B,OALIwjB,EAAQ,EACVgO,EAAK/lB,KAAK,CAACzL,EAAKN,IAEhB8xB,EAAKhO,GAAO,GAAK9jB,EAEZgB,MAkGTqxE,GAAS1xE,UAAUo+C,MA/DnB,WACE/9C,KAAKuxE,SAAW,CACd,KAAQ,IAAIJ,GACZ,IAAO,IAAKllE,GAAOmlE,IACnB,OAAU,IAAID,KA4DlBE,GAAS1xE,UAAkB,OA/C3B,SAAwBL,GACtB,OAAOo1E,GAAW10E,KAAMV,GAAa,OAAEA,IA+CzC+xE,GAAS1xE,UAAUf,IAnCnB,SAAqBU,GACnB,OAAOo1E,GAAW10E,KAAMV,GAAKV,IAAIU,IAmCnC+xE,GAAS1xE,UAAU0L,IAvBnB,SAAqB/L,GACnB,OAAOo1E,GAAW10E,KAAMV,GAAK+L,IAAI/L,IAuBnC+xE,GAAS1xE,UAAU4L,IAVnB,SAAqBjM,EAAKN,GAExB,OADA01E,GAAW10E,KAAMV,GAAKiM,IAAIjM,EAAKN,GACxBgB,MAgGTsxE,GAAM3xE,UAAUo+C,MApEhB,WACE/9C,KAAKuxE,SAAW,IAAIH,IAoEtBE,GAAM3xE,UAAkB,OAxDxB,SAAqBL,GACnB,OAAOU,KAAKuxE,SAAiB,OAAEjyE,IAwDjCgyE,GAAM3xE,UAAUf,IA5ChB,SAAkBU,GAChB,OAAOU,KAAKuxE,SAAS3yE,IAAIU,IA4C3BgyE,GAAM3xE,UAAU0L,IAhChB,SAAkB/L,GAChB,OAAOU,KAAKuxE,SAASlmE,IAAI/L,IAgC3BgyE,GAAM3xE,UAAU4L,IAnBhB,SAAkBjM,EAAKN,GACrB,IAAIi1D,EAAQj0D,KAAKuxE,SACjB,GAAItd,aAAiBmd,GAAW,CAC9B,IAAIwD,EAAQ3gB,EAAMsd,SAClB,IAAKtlE,GAAQ2oE,EAAMnpE,OAASopE,IAE1B,OADAD,EAAM7pE,KAAK,CAACzL,EAAKN,IACVgB,KAETi0D,EAAQj0D,KAAKuxE,SAAW,IAAIF,GAASuD,GAGvC,OADA3gB,EAAM1oD,IAAIjM,EAAKN,GACRgB,MAicT,IAAImzE,GAAahD,EAAmBd,EAAQc,EAAkB1xE,QAyhB9D,WACE,MAAO,IAjhBLm0E,GAtQJ,SAAoB5zE,GAClB,OAAOizC,EAAe/zC,KAAKc,IAyX7B,SAAS+yE,GAAQ/yE,EAAOyM,GAEtB,SADAA,EAAmB,MAAVA,EAnxCY,iBAmxCwBA,KAE1B,iBAATzM,GAAqBovE,EAASh/C,KAAKpwB,KAC1CA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQyM,EAmC7C,SAASsnE,GAAY/zE,GACnB,IAAIu0E,EAAOv0E,GAASA,EAAMi0B,YAG1B,OAAOj0B,KAFqB,mBAARu0E,GAAsBA,EAAK5zE,WAAc+vE,GAY/D,SAASiB,GAAS5wE,GAChB,GAAY,MAARA,EAAc,CAChB,IACE,OAAO+vE,EAAa5xE,KAAK6B,GACzB,MAAO6L,IACT,IACE,OAAQ7L,EAAO,GACf,MAAO6L,KAEX,MAAO,GAyDT,SAASsmE,GAAGlzE,EAAOqC,GACjB,OAAOrC,IAAUqC,GAAUrC,GAAUA,GAASqC,GAAUA,GAxOrD2/D,GA7oCa,qBA6oCD4R,GAAO,IAAI5R,EAAS,IAAIv8B,YAAY,MAChDx4B,GAAO2mE,GAAO,IAAI3mE,IAAQ+hE,GAC1Bz/C,GAvpCY,oBAupCDqkD,GAAOrkD,EAAQtH,YAC1BspD,GAAOqC,GAAO,IAAIrC,IAAQtC,GAC1BuC,GAppCY,oBAopCDoC,GAAO,IAAIpC,MACzBoC,GAAS,SAAS5zE,GAChB,IAAIqD,EAAS4vC,EAAe/zC,KAAKc,GAC7Bu0E,EA7pCQ,mBA6pCDlxE,EAAsBrD,EAAMi0B,iBAAc3yB,EACjDw0E,EAAavB,EAAO5C,GAAS4C,QAAQjzE,EAEzC,GAAIw0E,EACF,OAAQA,GACN,KAAKpE,EAAoB,MAzpCf,oBA0pCV,KAAKE,EAAe,OAAO5C,EAC3B,KAAK6C,EAAmB,MAnqCf,mBAoqCT,KAAKC,GAAe,OAAO7C,EAC3B,KAAK8C,GAAmB,MAhqCf,mBAmqCb,OAAO1uE,IAuQX,IAAI0G,GAAUD,MAAMC,QA2BpB,SAAS4oE,GAAY3yE,GACnB,OAAgB,MAATA,GAqGT,SAAkBA,GAChB,MAAuB,iBAATA,GACZA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GA/jDb,iBAw9CG+1E,CAAS/1E,EAAMyM,UAAYmnC,GAAW5zC,GAiDhE,IAAIkmC,GAAWkrC,GAsLf,WACE,OAAO,GApKT,SAASx9B,GAAW5zC,GAGlB,IAAI2zE,EAAM7hC,GAAS9xC,GAASizC,EAAe/zC,KAAKc,GAAS,GACzD,OAAO2zE,GAAO7E,GAAW6E,GAAO5E,EA2DlC,SAASj9B,GAAS9xC,GAChB,IAAIoT,SAAcpT,EAClB,QAASA,IAAkB,UAARoT,GAA4B,YAARA,GA2DzC,SAAS2wB,GAAKtjC,GACZ,OAAOkyE,GAAYlyE,GAAU+xE,GAAc/xE,GAtuB7C,SAAkBA,GAChB,IAAKszE,GAAYtzE,GACf,OAAO4wE,EAAW5wE,GAEpB,IAAI4C,EAAS,GACb,IAAK,IAAI/C,KAAOb,OAAOgB,GACjBG,EAAe1B,KAAKuB,EAAQH,IAAe,eAAPA,GACtC+C,EAAO0I,KAAKzL,GAGhB,OAAO+C,EA4tB8C2yE,CAASv1E,GA0ChE3B,EAAOD,QA9VP,SAAmBmB,GACjB,OAAOozE,GAAUpzE,GAAO,GAAM,M,4SCt2ChC,WACA,QACA,SACA,OACA,SACA,QAEA,SAEA,SACA,SACA,SACA,SACA,SACA,SACA,QACA,SAGMk+D,EAAMt5B,KAENqxC,EAAiB,IAAIhpE,IACrBipE,EAAsB,IAAIjpE,IAE1B+hB,EAAU,IAAI,EAAAT,QACd5H,EAAM,IAAI,EAAAypC,gBAAgB,CAC5BE,UAAWthC,EAAQjC,MACnBqpB,KAAM,SAACj3C,GACH++D,EAAIiY,YAAYh3E,MAIxBi3E,iBAAiB,WAAW,SAACxtE,GACzBomB,EAAQJ,KAAKhmB,EAAQkpB,SAKzB,IA+FIukD,EA/FEC,EAAS,IAAI,EAAAC,iBAAiB5vD,GAC9B6vD,EAAe,IAAI,EAAAzgB,qBAAqBpvC,GACxC8vD,EAAsB,IAAI,EAAAC,2BAA2B/vD,GACrDgwD,EAAqB,IAAI,EAAAC,mBAAmBjwD,GAC5CkwD,EAAe,IAAI,EAAAC,iBAAiBnwD,EAAK8vD,EAAqBE,GAC9DI,EAAwB,IAAI,EAAAC,0BAA0BrwD,EAAKkwD,GAC3DI,EAAW,EAAAC,mBAAmBvwD,GAC9BwwD,EAAe,IAAI,EAAAC,aAAazwD,GAChC0wD,EAAa,IAAI,EAAAC,gBAAgB3wD,EAAKkwD,GAEtCU,EAAgB,IAAI,EAAAC,qBAAqB,CAE3CC,WAAA,SAAWjwD,GAOP,IAuGR,WACI,GAAyB,iBAAd2M,WAAyD,iBAAxBA,UAAUC,WAA0BD,UAAUC,UAAUC,QAAQ,aAAe,EACvH,OAAO,EAGX,OAAO,EAlHCqjD,GAGAxZ,EAAIyZ,cAAc,iBAAmB,EAAAn+B,YAAYhyB,EAAOjS,OAAS,IAAMiS,EAAOzR,YAF9EmoD,EAAIyZ,cAAcnwD,EAAOzR,YAKzByR,EAAOpS,UAAUwiE,mBACjB,OAAK1Z,EAAI12C,EAAOpS,UAAUwiE,oBAInB1Z,EAAI12C,EAAOpS,UAAUwiE,yBAHxB7pD,QAAQC,MAAM,mCAAmCxG,EAAOjS,MAAMjW,KAAI,kCAAkCkoB,EAAOpS,UAAUwiE,mBAAkB,MAMnJ7yB,KAAA,SAAK8yB,G,QA9BWC,EA+BNz0E,EAAmB,GACnB00E,EAAoB,G,IAC1B,IAAkB,QAAAF,GAAa,8BAAE,CAA5B,IAAMG,EAAG,QACJC,EAAcD,EAAIziE,MAClB2iE,EAAkBF,EAAI5iE,UAC5B,GAAI6iE,EAAYniE,WAAYqiE,SAAU,CAClC,IAAIC,EAAmBF,EAAgBE,iBACnCA,GAtCAN,EAuCWM,EAtC3Bla,EAAIyZ,cAAc,YAAcG,IAwChBM,EAAmB,GAEvB,IAAM5wD,EAAiB,CACnBzR,WAAYkiE,EAAYniE,WAAWqiE,SACnCniE,aAAciiE,EAAYpiE,YAC1BN,MAAO0iE,EACP7iE,UAAW8iE,EACX,eACI,MAAM,IAAIj2E,MAAM,mBAGxBoB,EAAO0I,KAAKyb,GACZ,IAAM6wD,EAAUC,EAAW9wD,GAC3ByuD,EAAe1pE,IAAIib,EAAOjS,MAAMtP,GAAIoyE,GACpCnC,EAAoB3pE,IAAIib,EAAOpS,UAAUwiE,mBAAqBpwD,QAE9DuwD,EAAQhsE,KAAK,CACTgK,WAAYkiE,EAAYniE,WAAWyiE,QACnCviE,aAAciiE,EAAYpiE,YAC1BN,MAAO0iE,EACP7iE,UAAW8iE,EACX,eACI,MAAM,IAAIj2E,MAAM,qB,iGAMhC,MAAO,CAACoB,EAAQ00E,IAEpBS,WAAA,SAAWC,G,YACP,IAAkB,QAAAA,GAAM,8BAAE,CAArB,IAAMziB,EAAG,QACV,IACQA,EAAI0iB,iBACJxa,EAAIyZ,cAAc3hB,EAAI0iB,eAAeC,UACrCza,EAAIlI,EAAI0iB,eAAeE,cAAc5iB,EAAI0iB,eAAeG,cAAclyD,EAAKuvD,IAGjF,MAAOtpE,GACLmhB,QAAQC,MAAMphB,K,oGAI3B0pE,EAAQE,EAAcO,EAAuBM,EAAY1wD,GAEtD2xD,EAAa,EAAAQ,iBACfnyD,EACA4wD,EACAjB,EACAW,EACAF,EACAN,EACAI,EACAF,EACAQ,EACAE,GAIEj3C,EAAU,CAEZxgC,IAAK,SAACwK,EAAa9K,GACf,IAAMkoB,EAAS0uD,EAAoBt2E,IAAIN,GACvC,OAAIkoB,EACgByuD,EAAer2E,IAAI4nB,EAAOjS,MAAMtP,KAI/CowE,IACDA,EAAaiC,EAAW,EAAAnjE,cAGrBkhE,KAIfnY,EAAW,MAAI,IAAIxP,MAAMjvD,OAAOY,OAAO,MAAO+/B,GAE9CzZ,EAAIpa,IAAI,EAAAiM,iBAAiBC,0BAA2B8+D,GACpD5wD,EAAIpa,IAAI,EAAAiM,iBAAiBQ,0BAA2By9D,GACpD9vD,EAAIpa,IAAI,EAAAiM,iBAAiBM,cAAe+9D,GACxClwD,EAAIpa,IAAI,EAAAiM,iBAAiBa,wBAAyB09D,GAClDpwD,EAAIpa,IAAI,EAAAiM,iBAAiBgB,aAAc69D,I,iBC9KvC,6BACI,aAEA,IAAI9mD,EAAO6O,aAAX,CAIA,IAII25C,EA6HIC,EAZAC,EArBAC,EACAC,EAjGJC,EAAa,EACbC,EAAgB,GAChBC,GAAwB,EACxB52D,EAAM6N,EAAOswB,SAoJb04B,EAAW95E,OAAOu4B,gBAAkBv4B,OAAOu4B,eAAezH,GAC9DgpD,EAAWA,GAAYA,EAAS5uD,WAAa4uD,EAAWhpD,EAGf,qBAArC,GAAGjkB,SAASpN,KAAKqxB,EAAOrgB,SApFxB6oE,EAAoB,SAASr0D,GACzBxU,EAAQwb,UAAS,WAAc8tD,EAAa90D,QAIpD,WAGI,GAAI6L,EAAO4lD,cAAgB5lD,EAAOonD,cAAe,CAC7C,IAAI8B,GAA4B,EAC5BC,EAAenpD,EAAOopD,UAM1B,OALAppD,EAAOopD,UAAY,WACfF,GAA4B,GAEhClpD,EAAO4lD,YAAY,GAAI,KACvB5lD,EAAOopD,UAAYD,EACZD,GAwEJG,GAIArpD,EAAOspD,iBA9CVZ,EAAU,IAAIY,gBACVC,MAAMH,UAAY,SAAS5sD,GAE/BysD,EADazsD,EAAM+E,OAIvBinD,EAAoB,SAASr0D,GACzBu0D,EAAQc,MAAM5D,YAAYzxD,KA2CvBhC,GAAO,uBAAwBA,EAAIs3D,cAAc,WAtCpDhB,EAAOt2D,EAAIu3D,gBACflB,EAAoB,SAASr0D,GAGzB,IAAIw1D,EAASx3D,EAAIs3D,cAAc,UAC/BE,EAAOC,mBAAqB,WACxBX,EAAa90D,GACbw1D,EAAOC,mBAAqB,KAC5BnB,EAAKoB,YAAYF,GACjBA,EAAS,MAEblB,EAAKqB,YAAYH,KAKrBnB,EAAoB,SAASr0D,GACzBiG,WAAW6uD,EAAc,EAAG90D,KAlD5Bw0D,EAAgB,gBAAkB/vD,KAAKikD,SAAW,IAClD+L,EAAkB,SAASpsD,GACvBA,EAAM3a,SAAWme,GACK,iBAAfxD,EAAM+E,MACyB,IAAtC/E,EAAM+E,KAAKuC,QAAQ6kD,IACnBM,GAAczsD,EAAM+E,KAAKhJ,MAAMowD,EAAczsE,UAIjD8jB,EAAO6lD,iBACP7lD,EAAO6lD,iBAAiB,UAAW+C,GAAiB,GAEpD5oD,EAAO+pD,YAAY,YAAanB,GAGpCJ,EAAoB,SAASr0D,GACzB6L,EAAO4lD,YAAY+C,EAAgBx0D,EAAQ,OAgEnD60D,EAASn6C,aA1KT,SAAsB/R,GAEI,mBAAbA,IACTA,EAAW,IAAIjN,SAAS,GAAKiN,IAI/B,IADA,IAAI9a,EAAO,IAAIzI,MAAMwG,UAAU7D,OAAS,GAC/B1N,EAAI,EAAGA,EAAIwT,EAAK9F,OAAQ1N,IAC7BwT,EAAKxT,GAAKuR,UAAUvR,EAAI,GAG5B,IAAIglB,EAAO,CAAEsJ,SAAUA,EAAU9a,KAAMA,GAGvC,OAFA8mE,EAAcD,GAAcr1D,EAC5Bg1D,EAAkBK,GACXA,KA6JTG,EAASniC,eAAiBA,EA1J1B,SAASA,EAAe1yB,UACb20D,EAAc30D,GAyBzB,SAAS80D,EAAa90D,GAGlB,GAAI40D,EAGA3uD,WAAW6uD,EAAc,EAAG90D,OACzB,CACH,IAAIX,EAAOs1D,EAAc30D,GACzB,GAAIX,EAAM,CACNu1D,GAAwB,EACxB,KAjCZ,SAAav1D,GACT,IAAIsJ,EAAWtJ,EAAKsJ,SAChB9a,EAAOwR,EAAKxR,KAChB,OAAQA,EAAK9F,QACb,KAAK,EACD4gB,IACA,MACJ,KAAK,EACDA,EAAS9a,EAAK,IACd,MACJ,KAAK,EACD8a,EAAS9a,EAAK,GAAIA,EAAK,IACvB,MACJ,KAAK,EACD8a,EAAS9a,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAChC,MACJ,QACI8a,EAAS1B,WAnDrB,EAmDsCpZ,IAiBlB6Y,CAAIrH,GACN,QACEqzB,EAAe1yB,GACf40D,GAAwB,MAvE5C,CAyLkB,oBAAT10C,UAAyC,IAAXrU,EAAyBvvB,KAAOuvB,EAASqU,Q,qCC/KhF9lC,EAAOD,QAVP,SAA4BmqB,GAC1B,GAAIlf,MAAMC,QAAQif,GAAM,CACtB,IAAK,IAAIjqB,EAAI,EAAGw7E,EAAO,IAAIzwE,MAAMkf,EAAIvc,QAAS1N,EAAIiqB,EAAIvc,OAAQ1N,IAC5Dw7E,EAAKx7E,GAAKiqB,EAAIjqB,GAGhB,OAAOw7E,K,cCFXz7E,EAAOD,QAJP,SAA0B27E,GACxB,GAAI16E,OAAO6tB,YAAYluB,OAAO+6E,IAAkD,uBAAzC/6E,OAAOkB,UAAU2L,SAASpN,KAAKs7E,GAAgC,OAAO1wE,MAAM5I,KAAKs5E,K,cCG1H17E,EAAOD,QAJP,WACE,MAAM,IAAIwpB,UAAU,qD,cCGtBvpB,EAAOD,QAJP,SAA2Bq5B,GACzB,OAAgE,IAAzD9X,SAAS9T,SAASpN,KAAKg5B,GAAI7D,QAAQ,mB,gBCD5C,IAAInlB,EAAiB,EAAQ,IAE7B,SAASurE,IACP,GAAuB,oBAAZpoC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUooC,KAAM,OAAO,EACnC,GAAqB,mBAAVhsB,MAAsB,OAAO,EAExC,IAEE,OADAruB,KAAK1/B,UAAU2L,SAASpN,KAAKmzC,QAAQC,UAAUjS,KAAM,IAAI,iBAClD,EACP,MAAOzzB,GACP,OAAO,GAIX,SAAS+tE,EAAWC,EAAQroE,EAAMiO,GAchC,OAbIi6D,IACF37E,EAAOD,QAAU87E,EAAatoC,QAAQC,UAEtCxzC,EAAOD,QAAU87E,EAAa,SAAoBC,EAAQroE,EAAMiO,GAC9D,IAAIiqB,EAAI,CAAC,MACTA,EAAE1+B,KAAK4f,MAAM8e,EAAGl4B,GAChB,IACImd,EAAW,IADGtP,SAAS7f,KAAKorB,MAAMivD,EAAQnwC,IAG9C,OADIjqB,GAAOtR,EAAewgB,EAAUlP,EAAM7f,WACnC+uB,GAIJirD,EAAWhvD,MAAM,KAAMrb,WAGhCxR,EAAOD,QAAU87E,G,uFC3BjBl7E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAII65B,EAJE9oB,EAAKgoB,EAAQ,KAKnB,SAAWc,GAEPA,EAAW+zC,YAAc,MACzB/zC,EAAWg0C,gBAAkB,MAC7Bh0C,EAAWkH,gBAAkB,MAC7BlH,EAAWi0C,eAAiB,MAC5Bj0C,EAAWgH,eAAiB,MAC5BhH,EAAWk0C,kBAAoB,MAC/Bl0C,EAAWm0C,gBAAkB,KAC7Bn0C,EAAWo0C,sBAAwB,MACnCp0C,EAAWq0C,kBAAoB,MAE/Br0C,EAAWs0C,kBAAoB,MAC/Bt0C,EAAWu0C,iBAAmB,MAE9Bv0C,EAAWwJ,kBAAoB,EAC/BxJ,EAAWw0C,iBAAmB,EAhBlC,CAiBGx0C,EAAah7B,EAAQg7B,aAAeh7B,EAAQg7B,WAAa,K,IAKtDD,E,YACF,WAAY5qB,EAAMpG,EAASkpB,GAAM,wBAC7B,wBAAMlpB,KACDoG,KAAO+B,EAAGnL,OAAOoJ,GAAQA,EAAO6qB,EAAWq0C,iBAChD,EAAKp8C,KAAOA,EACZryB,OAAOyP,eAAP,KAA4B0qB,EAAcj5B,WAJb,E,kDAO7B,MAAO,CACHqO,KAAMhO,KAAKgO,KACXpG,QAAS5H,KAAK4H,QACdkpB,KAAM9wB,KAAK8wB,U,KAXK7vB,QAe5BpD,EAAQ+6B,cAAgBA,E,IAIlB00C,E,WACF,WAAYC,EAASC,GAAiB,UAClCxtE,KAAKutE,QAAUA,EACfvtE,KAAKwtE,gBAAkBA,E,yCAGvB,OAAOxtE,KAAKutE,U,qCAGZ,OAAOvtE,KAAKwtE,oB,KAGpB3vE,EAAQyvE,oBAAsBA,E,IAQxBp1C,E,YACF,WAAYsG,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQq6B,aAAeA,E,IACjBD,E,YACF,WAAYuG,GAAQ,uCACVA,EAAQ,I,iBAFI8uC,GAK1BzvE,EAAQo6B,YAAcA,E,IAChBE,E,YACF,WAAYqG,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQs6B,aAAeA,E,IACjBC,E,YACF,WAAYoG,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQu6B,aAAeA,E,IACjBC,E,YACF,WAAYmG,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQw6B,aAAeA,E,IACjBC,E,YACF,WAAYkG,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQy6B,aAAeA,E,IACjBC,E,YACF,WAAYiG,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQ06B,aAAeA,E,IACjBC,E,YACF,WAAYgG,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQ26B,aAAeA,E,IACjBC,E,YACF,WAAY+F,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQ46B,aAAeA,E,IACjBC,E,YACF,WAAY8F,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQ66B,aAAeA,E,IACjBC,E,YACF,WAAY6F,GAAQ,uCACVA,EAAQ,I,iBAFK8uC,GAK3BzvE,EAAQ86B,aAAeA,E,IAMjBG,E,YACF,WAAY0F,GAAQ,wBAChB,wBAAMA,EAAQ,KACT4S,OAAI9wC,EAFO,E,iBADOgtE,GAM/BzvE,EAAQi7B,iBAAmBA,E,IACrBC,E,YACF,WAAYyF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQk7B,kBAAoBA,E,IACtBC,E,YACF,WAAYwF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQm7B,kBAAoBA,E,IACtBC,E,YACF,WAAYuF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQo7B,kBAAoBA,E,IACtBC,E,YACF,WAAYsF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQq7B,kBAAoBA,E,IACtBC,E,YACF,WAAYqF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQs7B,kBAAoBA,E,IACtBC,E,YACF,WAAYoF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQu7B,kBAAoBA,E,IACtBC,E,YACF,WAAYmF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQw7B,kBAAoBA,E,IACtBC,E,YACF,WAAYkF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQy7B,kBAAoBA,E,IACtBC,E,YACF,WAAYiF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQ07B,kBAAoBA,E,IACtBC,E,YACF,WAAYgF,GAAQ,uCACVA,EAAQ,I,iBAFU8uC,GAKhCzvE,EAAQ27B,kBAAoBA,EAQ5B37B,EAAQ0/B,iBAJR,SAA0B31B,GACtB,IAAIkE,EAAYlE,EAChB,OAAOkE,GAAaiE,EAAGrL,OAAOoH,EAAU0yB,UAAYzuB,EAAGrL,OAAOoH,EAAU7G,KAAO8K,EAAGnL,OAAOkH,EAAU7G,MAUvGpH,EAAQoiC,sBAJR,SAA+Br4B,GAC3B,IAAIkE,EAAYlE,EAChB,OAAOkE,GAAaiE,EAAGrL,OAAOoH,EAAU0yB,cAA0B,IAAf52B,EAAQ3C,IAU/DpH,EAAQ2/B,kBAJR,SAA2B51B,GACvB,IAAIkE,EAAYlE,EAChB,OAAOkE,SAAmC,IAArBA,EAAUzJ,UAAuByJ,EAAUkhB,SAAWjd,EAAGrL,OAAOoH,EAAU7G,KAAO8K,EAAGnL,OAAOkH,EAAU7G,KAAwB,OAAjB6G,EAAU7G,M,6BCrO/IpH,EAAQ8mC,WAuCR,SAAqBk1C,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,GA1ClDp8E,EAAQswC,YAiDR,SAAsB0rC,GACpB,IAAIlqB,EAcA5xD,EAbA+7E,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvB9xD,EAAM,IAAIkyD,EAVhB,SAAsBL,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,EAS9BE,CAAYN,EAAKG,EAAUC,IAEzCG,EAAU,EAGVhxD,EAAM6wD,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAKj8E,EAAI,EAAGA,EAAIqrB,EAAKrrB,GAAK,EACxB4xD,EACG0qB,EAAUR,EAAInxD,WAAW3qB,KAAO,GAChCs8E,EAAUR,EAAInxD,WAAW3qB,EAAI,KAAO,GACpCs8E,EAAUR,EAAInxD,WAAW3qB,EAAI,KAAO,EACrCs8E,EAAUR,EAAInxD,WAAW3qB,EAAI,IAC/BiqB,EAAIoyD,KAAczqB,GAAO,GAAM,IAC/B3nC,EAAIoyD,KAAczqB,GAAO,EAAK,IAC9B3nC,EAAIoyD,KAAmB,IAANzqB,EAGK,IAApBsqB,IACFtqB,EACG0qB,EAAUR,EAAInxD,WAAW3qB,KAAO,EAChCs8E,EAAUR,EAAInxD,WAAW3qB,EAAI,KAAO,EACvCiqB,EAAIoyD,KAAmB,IAANzqB,GAGK,IAApBsqB,IACFtqB,EACG0qB,EAAUR,EAAInxD,WAAW3qB,KAAO,GAChCs8E,EAAUR,EAAInxD,WAAW3qB,EAAI,KAAO,EACpCs8E,EAAUR,EAAInxD,WAAW3qB,EAAI,KAAO,EACvCiqB,EAAIoyD,KAAczqB,GAAO,EAAK,IAC9B3nC,EAAIoyD,KAAmB,IAANzqB,GAGnB,OAAO3nC,GA3FTnqB,EAAQqqC,cAkHR,SAAwBoyC,GAQtB,IAPA,IAAI3qB,EACAvmC,EAAMkxD,EAAM7uE,OACZ8uE,EAAanxD,EAAM,EACnBzf,EAAQ,GAIH5L,EAAI,EAAGy8E,EAAOpxD,EAAMmxD,EAAYx8E,EAAIy8E,EAAMz8E,GAH9B,MAInB4L,EAAMoB,KAAK0vE,EACTH,EAAOv8E,EAAIA,EALM,MAKgBy8E,EAAOA,EAAQz8E,EAL/B,QAUF,IAAfw8E,GACF5qB,EAAM2qB,EAAMlxD,EAAM,GAClBzf,EAAMoB,KACJ2vE,EAAO/qB,GAAO,GACd+qB,EAAQ/qB,GAAO,EAAK,IACpB,OAEsB,IAAf4qB,IACT5qB,GAAO2qB,EAAMlxD,EAAM,IAAM,GAAKkxD,EAAMlxD,EAAM,GAC1Czf,EAAMoB,KACJ2vE,EAAO/qB,GAAO,IACd+qB,EAAQ/qB,GAAO,EAAK,IACpB+qB,EAAQ/qB,GAAO,EAAK,IACpB,MAIJ,OAAOhmD,EAAM6d,KAAK,KA3IpB,IALA,IAAIkzD,EAAS,GACTL,EAAY,GACZH,EAA4B,oBAAf51C,WAA6BA,WAAax7B,MAEvDkF,EAAO,mEACFjQ,EAAI,EAAGqrB,EAAMpb,EAAKvC,OAAQ1N,EAAIqrB,IAAOrrB,EAC5C28E,EAAO38E,GAAKiQ,EAAKjQ,GACjBs8E,EAAUrsE,EAAK0a,WAAW3qB,IAAMA,EAQlC,SAASg8E,EAASF,GAChB,IAAIzwD,EAAMywD,EAAIpuE,OAEd,GAAI2d,EAAM,EAAI,EACZ,MAAM,IAAInoB,MAAM,kDAKlB,IAAI+4E,EAAWH,EAAIxmD,QAAQ,KAO3B,OANkB,IAAd2mD,IAAiBA,EAAW5wD,GAMzB,CAAC4wD,EAJcA,IAAa5wD,EAC/B,EACA,EAAK4wD,EAAW,GAsEtB,SAASS,EAAaH,EAAOx3E,EAAOC,GAGlC,IAFA,IAAI4sD,EARoBgrB,EASpBn3C,EAAS,GACJzlC,EAAI+E,EAAO/E,EAAIgF,EAAKhF,GAAK,EAChC4xD,GACI2qB,EAAMv8E,IAAM,GAAM,WAClBu8E,EAAMv8E,EAAI,IAAM,EAAK,QACP,IAAfu8E,EAAMv8E,EAAI,IACbylC,EAAOz4B,KAdF2vE,GADiBC,EAeMhrB,IAdT,GAAK,IACxB+qB,EAAOC,GAAO,GAAK,IACnBD,EAAOC,GAAO,EAAI,IAClBD,EAAa,GAANC,IAaT,OAAOn3C,EAAOhc,KAAK,IAjGrB6yD,EAAU,IAAI3xD,WAAW,IAAM,GAC/B2xD,EAAU,IAAI3xD,WAAW,IAAM,I,cCnB/B7qB,EAAQk0B,KAAO,SAAUsT,EAAQ4B,EAAQ2zC,EAAMC,EAAMC,GACnD,IAAIlvE,EAAGzN,EACH48E,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACTn9E,EAAI68E,EAAQE,EAAS,EAAK,EAC1Bz8E,EAAIu8E,GAAQ,EAAI,EAChB96E,EAAIulC,EAAO4B,EAASlpC,GAOxB,IALAA,GAAKM,EAELuN,EAAI9L,GAAM,IAAOo7E,GAAU,EAC3Bp7E,KAAQo7E,EACRA,GAASH,EACFG,EAAQ,EAAGtvE,EAAS,IAAJA,EAAWy5B,EAAO4B,EAASlpC,GAAIA,GAAKM,EAAG68E,GAAS,GAKvE,IAHA/8E,EAAIyN,GAAM,IAAOsvE,GAAU,EAC3BtvE,KAAQsvE,EACRA,GAASL,EACFK,EAAQ,EAAG/8E,EAAS,IAAJA,EAAWknC,EAAO4B,EAASlpC,GAAIA,GAAKM,EAAG68E,GAAS,GAEvE,GAAU,IAANtvE,EACFA,EAAI,EAAIqvE,MACH,IAAIrvE,IAAMovE,EACf,OAAO78E,EAAIg9E,IAAsBltC,KAAdnuC,GAAK,EAAI,GAE5B3B,GAAQgqB,KAAK4jB,IAAI,EAAG8uC,GACpBjvE,GAAQqvE,EAEV,OAAQn7E,GAAK,EAAI,GAAK3B,EAAIgqB,KAAK4jB,IAAI,EAAGngC,EAAIivE,IAG5Ch9E,EAAQghC,MAAQ,SAAUwG,EAAQrmC,EAAOioC,EAAQ2zC,EAAMC,EAAMC,GAC3D,IAAIlvE,EAAGzN,EAAGC,EACN28E,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBI,EAAe,KAATP,EAAc1yD,KAAK4jB,IAAI,GAAI,IAAM5jB,KAAK4jB,IAAI,GAAI,IAAM,EAC1DhuC,EAAI68E,EAAO,EAAKE,EAAS,EACzBz8E,EAAIu8E,EAAO,GAAK,EAChB96E,EAAId,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQmpB,KAAK86B,IAAIjkD,GAEbqnC,MAAMrnC,IAAUA,IAAUivC,KAC5B9vC,EAAIkoC,MAAMrnC,GAAS,EAAI,EACvB4M,EAAIovE,IAEJpvE,EAAIuc,KAAK0kB,MAAM1kB,KAAK8S,IAAIj8B,GAASmpB,KAAKkzD,KAClCr8E,GAASZ,EAAI+pB,KAAK4jB,IAAI,GAAIngC,IAAM,IAClCA,IACAxN,GAAK,IAGLY,GADE4M,EAAIqvE,GAAS,EACNG,EAAKh9E,EAELg9E,EAAKjzD,KAAK4jB,IAAI,EAAG,EAAIkvC,IAEpB78E,GAAK,IACfwN,IACAxN,GAAK,GAGHwN,EAAIqvE,GAASD,GACf78E,EAAI,EACJyN,EAAIovE,GACKpvE,EAAIqvE,GAAS,GACtB98E,GAAMa,EAAQZ,EAAK,GAAK+pB,KAAK4jB,IAAI,EAAG8uC,GACpCjvE,GAAQqvE,IAER98E,EAAIa,EAAQmpB,KAAK4jB,IAAI,EAAGkvC,EAAQ,GAAK9yD,KAAK4jB,IAAI,EAAG8uC,GACjDjvE,EAAI,IAIDivE,GAAQ,EAAGx1C,EAAO4B,EAASlpC,GAAS,IAAJI,EAAUJ,GAAKM,EAAGF,GAAK,IAAK08E,GAAQ,GAI3E,IAFAjvE,EAAKA,GAAKivE,EAAQ18E,EAClB48E,GAAQF,EACDE,EAAO,EAAG11C,EAAO4B,EAASlpC,GAAS,IAAJ6N,EAAU7N,GAAKM,EAAGuN,GAAK,IAAKmvE,GAAQ,GAE1E11C,EAAO4B,EAASlpC,EAAIM,IAAU,IAAJyB,I,gBClF5B,IAAIk3B,EAAiB,EAAQ,IAW7Bl5B,EAAOD,QATP,SAAwB4B,EAAQC,GAC9B,MAAQjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAEpC,QADfD,EAASu3B,EAAev3B,MAI1B,OAAOA,I,+CCHThB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAEIs7B,EAFEH,EAAWpC,EAAQ,IACnBD,EAAKC,EAAQ,KAEnB,SAAWuC,GACPA,EAAkB3tB,KAAOlO,OAAO6vB,OAAO,CACnC2pB,yBAAyB,EACzB3V,wBAAyBnI,EAAS9Z,MAAM1T,OAE5C2tB,EAAkB4d,UAAYz5C,OAAO6vB,OAAO,CACxC2pB,yBAAyB,EACzB3V,wBAAyBnI,EAAS9Z,MAAM1T,OAQ5C2tB,EAAkBvqB,GANlB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,IAAcA,IAAcwuB,EAAkB3tB,MAC9Cb,IAAcwuB,EAAkB4d,WAC/BpgB,EAAE,QAAShsB,EAAUmsC,4BAA8BnsC,EAAUw2B,0BAb7E,CAgBGhI,EAAoBz8B,EAAQy8B,oBAAsBz8B,EAAQy8B,kBAAoB,KACjF,IAAM0d,EAAgBv5C,OAAO6vB,QAAO,SAAUjC,EAAUC,GACpD,IAAI5I,EAASiG,WAAW0C,EAAS9sB,KAAK+sB,GAAU,GAChD,MAAO,CAAEjsB,QAAF,WAAcupB,aAAalG,QAEhC40B,E,WACF,aAAc,UACVt4C,KAAKm4C,cAAe,E,2CAGfn4C,KAAKm4C,eACNn4C,KAAKm4C,cAAe,EAChBn4C,KAAKo4C,WACLp4C,KAAKo4C,SAASxqB,UAAKttB,GACnBN,KAAKK,c,gCAiBTL,KAAKo4C,WACLp4C,KAAKo4C,SAAS/3C,UACdL,KAAKo4C,cAAW93C,K,8CAdpB,OAAON,KAAKm4C,e,8CAGZ,OAAIn4C,KAAKm4C,aACEH,GAENh4C,KAAKo4C,WACNp4C,KAAKo4C,SAAW,IAAIje,EAAS5M,SAE1BvtB,KAAKo4C,SAASrsB,W,KASvBsO,E,6EAUOr6B,KAAKq4C,OAONr4C,KAAKq4C,OAAOlY,SAHZngC,KAAKq4C,OAAS/d,EAAkB4d,Y,gCAO/Bl4C,KAAKq4C,OAIDr4C,KAAKq4C,kBAAkBC,GAE5Bt4C,KAAKq4C,OAAOh4C,UAJZL,KAAKq4C,OAAS/d,EAAkB3tB,O,4BAhBpC,OALK3M,KAAKq4C,SAGNr4C,KAAKq4C,OAAS,IAAIC,GAEft4C,KAAKq4C,W,KAwBpBx6C,EAAQw8B,wBAA0BA,G,iCCvF9BihD,E,cADJ78E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAEtD,SAAWs8E,GACPA,EAAM3uE,KAAO,EACb2uE,EAAMC,MAAQ,EACdD,EAAME,KAAO,EAHjB,CAIGF,EAAQz9E,EAAQy9E,QAAUz9E,EAAQy9E,MAAQ,K,IACvC7+C,E,WACF,aAAc,UACVz8B,KAAKy7E,KAAO,IAAIxvE,IAChBjM,KAAK07E,WAAQp7E,EACbN,KAAK27E,WAAQr7E,EACbN,KAAK47E,MAAQ,E,0CAGb57E,KAAKy7E,KAAK19B,QACV/9C,KAAK07E,WAAQp7E,EACbN,KAAK27E,WAAQr7E,EACbN,KAAK47E,MAAQ,I,gCAGb,OAAQ57E,KAAK07E,QAAU17E,KAAK27E,Q,0BAK5Br8E,GACA,OAAOU,KAAKy7E,KAAKpwE,IAAI/L,K,0BAErBA,GACA,IAAM+b,EAAOrb,KAAKy7E,KAAK78E,IAAIU,GAC3B,GAAK+b,EAGL,OAAOA,EAAKrc,Q,0BAEZM,EAAKN,GAA2B,IAApB68E,EAAoB,uDAAZP,EAAM3uE,KACtB0O,EAAOrb,KAAKy7E,KAAK78E,IAAIU,GACzB,GAAI+b,EACAA,EAAKrc,MAAQA,EACT68E,IAAUP,EAAM3uE,MAChB3M,KAAK67E,MAAMxgE,EAAMwgE,OAGpB,CAED,OADAxgE,EAAO,CAAE/b,MAAKN,QAAOunD,UAAMjmD,EAAWw7E,cAAUx7E,GACxCu7E,GACJ,KAAKP,EAAM3uE,KACP3M,KAAK+7E,YAAY1gE,GACjB,MACJ,KAAKigE,EAAMC,MACPv7E,KAAKg8E,aAAa3gE,GAClB,MACJ,KAAKigE,EAAME,KAGX,QACIx7E,KAAK+7E,YAAY1gE,GAGzBrb,KAAKy7E,KAAKlwE,IAAIjM,EAAK+b,GACnBrb,KAAK47E,W,6BAGNt8E,GACH,IAAM+b,EAAOrb,KAAKy7E,KAAK78E,IAAIU,GAC3B,QAAK+b,IAGLrb,KAAKy7E,KAAL,OAAiBn8E,GACjBU,KAAKi8E,WAAW5gE,GAChBrb,KAAK47E,SACE,K,8BAGP,GAAK57E,KAAK07E,OAAU17E,KAAK27E,MAAzB,CAGA,IAAK37E,KAAK07E,QAAU17E,KAAK27E,MACrB,MAAM,IAAI16E,MAAM,gBAEpB,IAAMoa,EAAOrb,KAAK07E,MAIlB,OAHA17E,KAAKy7E,KAAL,OAAiBpgE,EAAK/b,KACtBU,KAAKi8E,WAAW5gE,GAChBrb,KAAK47E,QACEvgE,EAAKrc,S,8BAERk9E,EAAYC,GAEhB,IADA,IAAI7oC,EAAUtzC,KAAK07E,MACZpoC,GACC6oC,EACAD,EAAW38E,KAAK48E,EAAhBD,CAAyB5oC,EAAQt0C,MAAOs0C,EAAQh0C,IAAKU,MAGrDk8E,EAAW5oC,EAAQt0C,MAAOs0C,EAAQh0C,IAAKU,MAE3CszC,EAAUA,EAAQiT,O,qCAGX21B,EAAYC,GAEvB,IADA,IAAI7oC,EAAUtzC,KAAK27E,MACZroC,GACC6oC,EACAD,EAAW38E,KAAK48E,EAAhBD,CAAyB5oC,EAAQt0C,MAAOs0C,EAAQh0C,IAAKU,MAGrDk8E,EAAW5oC,EAAQt0C,MAAOs0C,EAAQh0C,IAAKU,MAE3CszC,EAAUA,EAAQwoC,W,+BAMtB,IAFA,IAAIz5E,EAAS,GACTixC,EAAUtzC,KAAK07E,MACZpoC,GACHjxC,EAAO0I,KAAKuoC,EAAQt0C,OACpBs0C,EAAUA,EAAQiT,KAEtB,OAAOlkD,I,6BAKP,IAFA,IAAIA,EAAS,GACTixC,EAAUtzC,KAAK07E,MACZpoC,GACHjxC,EAAO0I,KAAKuoC,EAAQh0C,KACpBg0C,EAAUA,EAAQiT,KAEtB,OAAOlkD,I,mCAyCEgZ,GAET,GAAKrb,KAAK07E,OAAU17E,KAAK27E,MAGpB,KAAK37E,KAAK07E,MACX,MAAM,IAAIz6E,MAAM,gBAGhBoa,EAAKkrC,KAAOvmD,KAAK07E,MACjB17E,KAAK07E,MAAMI,SAAWzgE,OAPtBrb,KAAK27E,MAAQtgE,EASjBrb,KAAK07E,MAAQrgE,I,kCAELA,GAER,GAAKrb,KAAK07E,OAAU17E,KAAK27E,MAGpB,KAAK37E,KAAK27E,MACX,MAAM,IAAI16E,MAAM,gBAGhBoa,EAAKygE,SAAW97E,KAAK27E,MACrB37E,KAAK27E,MAAMp1B,KAAOlrC,OAPlBrb,KAAK07E,MAAQrgE,EASjBrb,KAAK27E,MAAQtgE,I,iCAENA,GACP,GAAIA,IAASrb,KAAK07E,OAASrgE,IAASrb,KAAK27E,MACrC37E,KAAK07E,WAAQp7E,EACbN,KAAK27E,WAAQr7E,OAEZ,GAAI+a,IAASrb,KAAK07E,MACnB17E,KAAK07E,MAAQrgE,EAAKkrC,UAEjB,GAAIlrC,IAASrb,KAAK27E,MACnB37E,KAAK27E,MAAQtgE,EAAKygE,aAEjB,CACD,IAAMv1B,EAAOlrC,EAAKkrC,KACZu1B,EAAWzgE,EAAKygE,SACtB,IAAKv1B,IAASu1B,EACV,MAAM,IAAI76E,MAAM,gBAEpBslD,EAAKu1B,SAAWA,EAChBA,EAASv1B,KAAOA,K,4BAGlBlrC,EAAMwgE,GACR,IAAK77E,KAAK07E,QAAU17E,KAAK27E,MACrB,MAAM,IAAI16E,MAAM,gBAEpB,GAAK46E,IAAUP,EAAMC,OAASM,IAAUP,EAAME,KAG9C,GAAIK,IAAUP,EAAMC,MAAO,CACvB,GAAIlgE,IAASrb,KAAK07E,MACd,OAEJ,IAAMn1B,EAAOlrC,EAAKkrC,KACZu1B,EAAWzgE,EAAKygE,SAElBzgE,IAASrb,KAAK27E,OAGdG,EAASv1B,UAAOjmD,EAChBN,KAAK27E,MAAQG,IAIbv1B,EAAKu1B,SAAWA,EAChBA,EAASv1B,KAAOA,GAGpBlrC,EAAKygE,cAAWx7E,EAChB+a,EAAKkrC,KAAOvmD,KAAK07E,MACjB17E,KAAK07E,MAAMI,SAAWzgE,EACtBrb,KAAK07E,MAAQrgE,OAEZ,GAAIwgE,IAAUP,EAAME,KAAM,CAC3B,GAAIngE,IAASrb,KAAK27E,MACd,OAEJ,IAAMp1B,EAAOlrC,EAAKkrC,KACZu1B,EAAWzgE,EAAKygE,SAElBzgE,IAASrb,KAAK07E,OAGdn1B,EAAKu1B,cAAWx7E,EAChBN,KAAK07E,MAAQn1B,IAIbA,EAAKu1B,SAAWA,EAChBA,EAASv1B,KAAOA,GAEpBlrC,EAAKkrC,UAAOjmD,EACZ+a,EAAKygE,SAAW97E,KAAK27E,MACrB37E,KAAK27E,MAAMp1B,KAAOlrC,EAClBrb,KAAK27E,MAAQtgE,K,2BArPjB,OAAOrb,KAAK47E,U,KAyPpB/9E,EAAQ4+B,UAAYA,G,8BCtRpB,YAKAh+B,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMo9E,EAASrkD,EAAQ,GACjBskD,EAAOtkD,EAAQ,IACfukD,EAAWvkD,EAAQ,IACnBwkD,EAAQxkD,EAAQ,IAChB0B,EAAkB1B,EAAQ,IAC1B+B,EAAkB/B,EAAQ,IAWhCl6B,EAAQ8zD,uBAVR,WACI,IAAM6qB,EAAeF,EAASG,YAAY,IAAInxE,SAAS,OACvD,MAAyB,UAArB4D,EAAQgkB,SACR,sCAAsCspD,EAAtC,SAIOJ,EAAO50D,KAAK60D,EAAK/kC,SAAjB,iBAAqCklC,EAArC,WA0Bf3+E,EAAQ4zD,0BAtBR,SAAmCirB,GAA8B,IACzDC,EADqC73C,EAAoB,uDAAT,QAEhD83C,EAAY,IAAIruD,SAAQ,SAACtH,EAAS41D,GAClCF,EAAiB11D,KAErB,OAAO,IAAIsH,SAAQ,SAACtH,EAASkQ,GACzB,IAAI2lD,EAASP,EAAMQ,cAAa,SAAChoC,GAC7B+nC,EAAOrtD,QACPktD,EAAe,CACX,IAAIljD,EAAgBI,oBAAoBkb,EAAQjQ,GAChD,IAAIhL,EAAgBI,oBAAoB6a,EAAQjQ,QAGxDg4C,EAAO/xD,GAAG,QAASoM,GACnB2lD,EAAO95C,OAAO05C,GAAU,WACpBI,EAAO3xD,eAAe,QAASgM,GAC/BlQ,EAAQ,CACJ+1D,YAAa,WAAQ,OAAOJ,YAa5C/+E,EAAQ6zD,0BAPR,SAAmCgrB,GAA8B,IAApB53C,EAAoB,uDAAT,QAC9CiQ,EAASwnC,EAAMU,iBAAiBP,GACtC,MAAO,CACH,IAAIjjD,EAAgBI,oBAAoBkb,EAAQjQ,GAChD,IAAIhL,EAAgBI,oBAAoB6a,EAAQjQ,O,8CC7CxDrmC,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMu9E,EAAQxkD,EAAQ,IAChB0B,EAAkB1B,EAAQ,IAC1B+B,EAAkB/B,EAAQ,IAuBhCl6B,EAAQ+zD,4BAtBR,SAAqCp/C,GAA0B,IACvDmqE,EADmC73C,EAAoB,uDAAT,QAE9C83C,EAAY,IAAIruD,SAAQ,SAACtH,EAAS41D,GAClCF,EAAiB11D,KAErB,OAAO,IAAIsH,SAAQ,SAACtH,EAASkQ,GACzB,IAAI2lD,EAASP,EAAMQ,cAAa,SAAChoC,GAC7B+nC,EAAOrtD,QACPktD,EAAe,CACX,IAAIljD,EAAgBI,oBAAoBkb,EAAQjQ,GAChD,IAAIhL,EAAgBI,oBAAoB6a,EAAQjQ,QAGxDg4C,EAAO/xD,GAAG,QAASoM,GACnB2lD,EAAO95C,OAAOxwB,EAAM,aAAa,WAC7BsqE,EAAO3xD,eAAe,QAASgM,GAC/BlQ,EAAQ,CACJ+1D,YAAa,WAAQ,OAAOJ,YAa5C/+E,EAAQg0D,4BAPR,SAAqCr/C,GAA0B,IAApBsyB,EAAoB,uDAAT,QAC5CiQ,EAASwnC,EAAMU,iBAAiBzqE,EAAM,aAC5C,MAAO,CACH,IAAIinB,EAAgBI,oBAAoBkb,EAAQjQ,GAChD,IAAIhL,EAAgBI,oBAAoB6a,EAAQjQ,M,6BC/BxDrmC,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAM84B,EAAKC,EAAQ,KACbyW,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,IACrBmlD,EAA4BnlD,EAAQ,KAC1Cl6B,EAAQs/E,sBAAwBD,EAA0BC,sBAC1D,IAAMC,EAA4BrlD,EAAQ,KAC1Cl6B,EAAQw/E,sBAAwBD,EAA0BC,sBAC1D,IAAMC,EAA8BvlD,EAAQ,KAC5Cl6B,EAAQ0/E,wBAA0BD,EAA4BC,wBAC9D1/E,EAAQ2/E,sCAAwCF,EAA4BE,sCAC5E,IAAMC,EAA2B1lD,EAAQ,KACzCl6B,EAAQ6/E,qBAAuBD,EAAyBC,qBACxD,IAAMC,EAA2B5lD,EAAQ,KACzCl6B,EAAQ+/E,qBAAuBD,EAAyBC,qBACxD//E,EAAQggF,yBAA2BF,EAAyBE,yBAC5D,IAAMC,EAA0B/lD,EAAQ,KACxCl6B,EAAQkgF,oBAAsBD,EAAwBC,oBACtD,IAAMC,EAAyBjmD,EAAQ,KACvCl6B,EAAQogF,mBAAqBD,EAAuBC,mBACpD,IAAMC,EAA4BnmD,EAAQ,KAC1Cl6B,EAAQsgF,sBAAwBD,EAA0BC,sBAC1D,IAUIC,EAYAC,EAtBEC,EAAsBvmD,EAAQ,KACpCl6B,EAAQ0gF,iBAAmBD,EAAoBC,iBAC/C1gF,EAAQ2gF,8BAAgCF,EAAoBE,8BAC5D3gF,EAAQ4gF,mCAAqCH,EAAoBG,mCAQjE,SAAWL,GAKPA,EAAeruE,GAJf,SAAY/Q,GACR,IAAM8M,EAAY9M,EAClB,OAAO84B,EAAGpzB,OAAOoH,EAAUqO,WAAa2d,EAAGpzB,OAAOoH,EAAUoT,SAAW4Y,EAAGpzB,OAAOoH,EAAUnG,UAHnG,CAMGy4E,EAAiBvgF,EAAQugF,iBAAmBvgF,EAAQugF,eAAiB,KAMxE,SAAWC,GAYPA,EAAiBtuE,GAXjB,SAAY/Q,GACR,IAAK8J,MAAMC,QAAQ/J,GACf,OAAO,EAFI,2BAIf,YAAiBA,EAAjB,+CAAwB,KAAfuzB,EAAe,QACpB,IAAKuF,EAAGpzB,OAAO6tB,KAAU6rD,EAAeruE,GAAGwiB,GACvC,OAAO,GANA,kFASf,OAAO,GAVf,CAaG8rD,EAAmBxgF,EAAQwgF,mBAAqBxgF,EAAQwgF,iBAAmB,KAM9E,SAAWK,GACPA,EAAoBtsE,KAAO,IAAI4lB,EAAW0W,oBAAoB,6BADlE,CAEyB7wC,EAAQ6gF,sBAAwB7gF,EAAQ6gF,oBAAsB,KAMvF,SAAWC,GACPA,EAAsBvsE,KAAO,IAAI4lB,EAAW0W,oBAAoB,+BADpE,CAE2B7wC,EAAQ8gF,wBAA0B9gF,EAAQ8gF,sBAAwB,KAE7F,SAAWC,GAIPA,EAAsBC,OAAS,SAI/BD,EAAsBE,OAAS,SAI/BF,EAAsBG,OAAS,SAZnC,CAa2BlhF,EAAQ+gF,wBAA0B/gF,EAAQ+gF,sBAAwB,KAE7F,SAAWI,GAKPA,EAAoBC,MAAQ,QAK5BD,EAAoBE,cAAgB,gBAMpCF,EAAoBG,sBAAwB,wBAK5CH,EAAoBI,KAAO,OArB/B,CAsByBvhF,EAAQmhF,sBAAwBnhF,EAAQmhF,oBAAsB,KAMvF,SAAWK,GAKPA,EAA0BC,MAJ1B,SAAetgF,GACX,IAAM8M,EAAY9M,EAClB,OAAO8M,GAAagsB,EAAGpzB,OAAOoH,EAAU7G,KAAO6G,EAAU7G,GAAGwG,OAAS,GAH7E,CAM+B5N,EAAQwhF,4BAA8BxhF,EAAQwhF,0BAA4B,KAMzG,SAAWE,GAKPA,EAAgCxvE,GAJhC,SAAY/Q,GACR,IAAM8M,EAAY9M,EAClB,OAAO8M,IAA6C,OAA/BA,EAAU0zE,kBAA6BnB,EAAiBtuE,GAAGjE,EAAU0zE,oBAHlG,CAMqC3hF,EAAQ0hF,kCAAoC1hF,EAAQ0hF,gCAAkC,KAM3H,SAAWE,GAKPA,EAAwB1vE,GAJxB,SAAY/Q,GACR,IAAM8M,EAAY9M,EAClB,OAAO84B,EAAGikB,cAAcjwC,UAA8CxL,IAA/BwL,EAAU4zE,kBAAkC5nD,EAAE,QAAShsB,EAAU4zE,oBAO5GD,EAAwBE,oBAJxB,SAA6B3gF,GACzB,IAAM8M,EAAY9M,EAClB,OAAO8M,GAAagsB,EAAE,QAAShsB,EAAU4zE,mBARjD,CAW6B7hF,EAAQ4hF,0BAA4B5hF,EAAQ4hF,wBAA0B,KASnG,SAAWG,GACPA,EAAkBxtE,KAAO,IAAI4lB,EAAW0W,oBAAoB,cADhE,CAEuB7wC,EAAQ+hF,oBAAsB/hF,EAAQ+hF,kBAAoB,KAKjF,SAAWC,GAMPA,EAAgBC,uBAAyB,EAN7C,CAOqBjiF,EAAQgiF,kBAAoBhiF,EAAQgiF,gBAAkB,KAO3E,SAAWE,GACPA,EAAwB3tE,KAAO,IAAI4lB,EAAW2W,yBAAyB,eAD3E,CAE6B9wC,EAAQkiF,0BAA4BliF,EAAQkiF,wBAA0B,KASnG,SAAWC,GACPA,EAAgB5tE,KAAO,IAAI4lB,EAAWyW,qBAAqB,YAD/D,CAEqB5wC,EAAQmiF,kBAAoBniF,EAAQmiF,gBAAkB,KAO3E,SAAWC,GACPA,EAAiB7tE,KAAO,IAAI4lB,EAAW4W,0BAA0B,QADrE,CAEsB/wC,EAAQoiF,mBAAqBpiF,EAAQoiF,iBAAmB,KAO9E,SAAWC,GACPA,EAAmC9tE,KAAO,IAAI4lB,EAAW2W,yBAAyB,oCADtF,CAEwC9wC,EAAQqiF,qCAAuCriF,EAAQqiF,mCAAqC,KAMpI,SAAWC,GAIPA,EAAYl/E,MAAQ,EAIpBk/E,EAAYrlE,QAAU,EAItBqlE,EAAYnlE,KAAO,EAInBmlE,EAAYC,IAAM,EAhBtB,CAiBiBviF,EAAQsiF,cAAgBtiF,EAAQsiF,YAAc,KAM/D,SAAWE,GACPA,EAAwBjuE,KAAO,IAAI4lB,EAAW2W,yBAAyB,sBAD3E,CAE6B9wC,EAAQwiF,0BAA4BxiF,EAAQwiF,wBAA0B,KAMnG,SAAWC,GACPA,EAAmBluE,KAAO,IAAI4lB,EAAW0W,oBAAoB,6BADjE,CAEwB7wC,EAAQyiF,qBAAuBziF,EAAQyiF,mBAAqB,KAMpF,SAAWC,GACPA,EAAuBnuE,KAAO,IAAI4lB,EAAW2W,yBAAyB,qBAD1E,CAE4B9wC,EAAQ0iF,yBAA2B1iF,EAAQ0iF,uBAAyB,KAOhG,SAAWC,GACPA,EAA2BpuE,KAAO,IAAI4lB,EAAW2W,yBAAyB,mBAD9E,CAEgC9wC,EAAQ2iF,6BAA+B3iF,EAAQ2iF,2BAA6B,KAM5G,SAAWC,GAIPA,EAAqB9zE,KAAO,EAK5B8zE,EAAqBC,KAAO,EAM5BD,EAAqBE,YAAc,EAfvC,CAgB0B9iF,EAAQ4iF,uBAAyB5iF,EAAQ4iF,qBAAuB,KAY1F,SAAWG,GACPA,EAAgCpiD,OAAS,uBACzCoiD,EAAgCxuE,KAAO,IAAI4lB,EAAW2W,yBAAyBiyC,EAAgCpiD,QAFnH,CAGqC3gC,EAAQ+iF,kCAAoC/iF,EAAQ+iF,gCAAkC,KAM3H,SAAWC,GACPA,EAAkCriD,OAAS,yBAC3CqiD,EAAkCzuE,KAAO,IAAI4lB,EAAW2W,yBAAyBkyC,EAAkCriD,QAFvH,CAGuC3gC,EAAQgjF,oCAAsChjF,EAAQgjF,kCAAoC,KAWjI,SAAWC,GACPA,EAAiCtiD,OAAS,wBAC1CsiD,EAAiC1uE,KAAO,IAAI4lB,EAAW2W,yBAAyBmyC,EAAiCtiD,QAFrH,CAGsC3gC,EAAQijF,mCAAqCjjF,EAAQijF,iCAAmC,KAM9H,SAAWC,GACPA,EAAgCviD,OAAS,uBACzCuiD,EAAgC3uE,KAAO,IAAI4lB,EAAW2W,yBAAyBoyC,EAAgCviD,QAFnH,CAGqC3gC,EAAQkjF,kCAAoCljF,EAAQkjF,gCAAkC,KAK3H,SAAWt2E,GAKPA,EAAuBu2E,OAAS,EAIhCv2E,EAAuBw2E,WAAa,EAIpCx2E,EAAuBy2E,SAAW,EAbtC,CAc4BrjF,EAAQ4M,yBAA2B5M,EAAQ4M,uBAAyB,KAMhG,SAAW02E,GACPA,EAAiC3iD,OAAS,wBAC1C2iD,EAAiC/uE,KAAO,IAAI4lB,EAAW2W,yBAAyBwyC,EAAiC3iD,QAFrH,CAGsC3gC,EAAQsjF,mCAAqCtjF,EAAQsjF,iCAAmC,KAU9H,SAAWC,GACPA,EAAqC5iD,OAAS,iCAC9C4iD,EAAqChvE,KAAO,IAAI4lB,EAAW0W,oBAAoB0yC,EAAqC5iD,QAFxH,CAG0C3gC,EAAQujF,uCAAyCvjF,EAAQujF,qCAAuC,KAM1I,SAAWC,GACPA,EAAkCjvE,KAAO,IAAI4lB,EAAW2W,yBAAyB,mCADrF,CAEuC9wC,EAAQwjF,oCAAsCxjF,EAAQwjF,kCAAoC,KAKjI,SAAW7zE,GAIPA,EAAe8zE,QAAU,EAIzB9zE,EAAe+zE,QAAU,EAIzB/zE,EAAeg0E,QAAU,EAZ7B,CAaoB3jF,EAAQ2P,iBAAmB3P,EAAQ2P,eAAiB,KAExE,SAAWi0E,GAIPA,EAAU5C,OAAS,EAInB4C,EAAUC,OAAS,EAInBD,EAAU1C,OAAS,EAZvB,CAaelhF,EAAQ4jF,YAAc5jF,EAAQ4jF,UAAY,KAMzD,SAAWE,GACPA,EAA+BvvE,KAAO,IAAI4lB,EAAW2W,yBAAyB,mCADlF,CAEoC9wC,EAAQ8jF,iCAAmC9jF,EAAQ8jF,+BAAiC,KAKxH,SAAWz6E,GAKPA,EAAsB06E,QAAU,EAKhC16E,EAAsB26E,iBAAmB,EAIzC36E,EAAsB46E,gCAAkC,EAd5D,CAe2BjkF,EAAQqJ,wBAA0BrJ,EAAQqJ,sBAAwB,KAa7F,SAAW66E,GACPA,EAAkBvjD,OAAS,0BAC3BujD,EAAkB3vE,KAAO,IAAI4lB,EAAW0W,oBAAoBqzC,EAAkBvjD,QAE9EujD,EAAkB7vB,WAAa,IAAI1jB,EAAiBzT,aAJxD,CAKuBl9B,EAAQkkF,oBAAsBlkF,EAAQkkF,kBAAoB,KAOjF,SAAWC,GACPA,EAAyBxjD,OAAS,yBAClCwjD,EAAyB5vE,KAAO,IAAI4lB,EAAW0W,oBAAoBszC,EAAyBxjD,QAFhG,CAG8B3gC,EAAQmkF,2BAA6BnkF,EAAQmkF,yBAA2B,KAOtG,SAAWC,GACPA,EAAazjD,OAAS,qBACtByjD,EAAa7vE,KAAO,IAAI4lB,EAAW0W,oBAAoBuzC,EAAazjD,QAFxE,CAGkB3gC,EAAQokF,eAAiBpkF,EAAQokF,aAAe,KAOlE,SAAWv5E,GAIPA,EAAyBk5E,QAAU,EAInCl5E,EAAyBm5E,iBAAmB,EAI5Cn5E,EAAyBw5E,cAAgB,EAZ7C,CAa8BrkF,EAAQ6K,2BAA6B7K,EAAQ6K,yBAA2B,KAEtG,SAAWy5E,GACPA,EAAqB3jD,OAAS,6BAC9B2jD,EAAqB/vE,KAAO,IAAI4lB,EAAW0W,oBAAoByzC,EAAqB3jD,QAFxF,CAG0B3gC,EAAQskF,uBAAyBtkF,EAAQskF,qBAAuB,KAS1F,SAAWC,GACPA,EAAkB5jD,OAAS,0BAC3B4jD,EAAkBhwE,KAAO,IAAI4lB,EAAW0W,oBAAoB0zC,EAAkB5jD,QAE9E4jD,EAAkBlwB,WAAa,IAAI1jB,EAAiBzT,aAJxD,CAKuBl9B,EAAQukF,oBAAsBvkF,EAAQukF,kBAAoB,KAQjF,SAAWC,GACPA,EAAkB7jD,OAAS,0BAC3B6jD,EAAkBjwE,KAAO,IAAI4lB,EAAW0W,oBAAoB2zC,EAAkB7jD,QAE9E6jD,EAAkBnwB,WAAa,IAAI1jB,EAAiBzT,aAJxD,CAKuBl9B,EAAQwkF,oBAAsBxkF,EAAQwkF,kBAAoB,KAQjF,SAAWC,GACPA,EAAyB9jD,OAAS,iCAClC8jD,EAAyBlwE,KAAO,IAAI4lB,EAAW0W,oBAAoB4zC,EAAyB9jD,QAE5F8jD,EAAyBpwB,WAAa,IAAI1jB,EAAiBzT,aAJ/D,CAK8Bl9B,EAAQykF,2BAA6BzkF,EAAQykF,yBAA2B,KAQtG,SAAWC,GACPA,EAAsB/jD,OAAS,8BAC/B+jD,EAAsBnwE,KAAO,IAAI4lB,EAAW0W,oBAAoB6zC,EAAsB/jD,QAEtF+jD,EAAsBrwB,WAAa,IAAI1jB,EAAiBzT,aAJ5D,CAK2Bl9B,EAAQ0kF,wBAA0B1kF,EAAQ0kF,sBAAwB,KAK7F,SAAWC,GACPA,EAAkBhkD,OAAS,0BAC3BgkD,EAAkBpwE,KAAO,IAAI4lB,EAAW0W,oBAAoB8zC,EAAkBhkD,QAE9EgkD,EAAkBtwB,WAAa,IAAI1jB,EAAiBzT,aAJxD,CAKuBl9B,EAAQ2kF,oBAAsB3kF,EAAQ2kF,kBAAoB,KAQjF,SAAWC,GACPA,EAAuBjkD,OAAS,mBAChCikD,EAAuBrwE,KAAO,IAAI4lB,EAAW0W,oBAAoB+zC,EAAuBjkD,QAExFikD,EAAuBvwB,WAAa,IAAI1jB,EAAiBzT,aAJ7D,CAK4Bl9B,EAAQ4kF,yBAA2B5kF,EAAQ4kF,uBAAyB,KAKhG,SAAWC,GACPA,EAAgBtwE,KAAO,IAAI4lB,EAAW0W,oBAAoB,yBAE1Dg0C,EAAgBxwB,WAAa,IAAI1jB,EAAiBzT,aAHtD,CAIqBl9B,EAAQ6kF,kBAAoB7kF,EAAQ6kF,gBAAkB,KAK3E,SAAWC,GACPA,EAAuBvwE,KAAO,IAAI4lB,EAAW0W,oBAAoB,oBADrE,CAE4B7wC,EAAQ8kF,yBAA2B9kF,EAAQ8kF,uBAAyB,KAKhG,SAAWC,GACPA,EAAoBpkD,OAAS,4BAC7BokD,EAAoBxwE,KAAO,IAAI4lB,EAAW0W,oBAAoBk0C,EAAoBpkD,QAElFokD,EAAoB1wB,WAAa,IAAI1jB,EAAiBzT,aAJ1D,CAKyBl9B,EAAQ+kF,sBAAwB/kF,EAAQ+kF,oBAAsB,KAOvF,SAAWC,GACPA,EAA2BzwE,KAAO,IAAI4lB,EAAW0W,oBAAoB,wBADzE,CAEgC7wC,EAAQglF,6BAA+BhlF,EAAQglF,2BAA6B,KAK5G,SAAWC,GACPA,EAA0BtkD,OAAS,0BACnCskD,EAA0B1wE,KAAO,IAAI4lB,EAAW0W,oBAAoBo0C,EAA0BtkD,QAFlG,CAG+B3gC,EAAQilF,4BAA8BjlF,EAAQilF,0BAA4B,KAKzG,SAAWC,GACPA,EAA+BvkD,OAAS,+BACxCukD,EAA+B3wE,KAAO,IAAI4lB,EAAW0W,oBAAoBq0C,EAA+BvkD,QAF5G,CAGoC3gC,EAAQklF,iCAAmCllF,EAAQklF,+BAAiC,KAKxH,SAAWC,GACPA,EAAgCxkD,OAAS,gCACzCwkD,EAAgC5wE,KAAO,IAAI4lB,EAAW0W,oBAAoBs0C,EAAgCxkD,QAF9G,CAGqC3gC,EAAQmlF,kCAAoCnlF,EAAQmlF,gCAAkC,KAK3H,SAAWC,GACPA,EAAczkD,OAAS,sBACvBykD,EAAc7wE,KAAO,IAAI4lB,EAAW0W,oBAAoBu0C,EAAczkD,QAF1E,CAGmB3gC,EAAQolF,gBAAkBplF,EAAQolF,cAAgB,KAKrE,SAAWC,GACPA,EAAqB1kD,OAAS,6BAC9B0kD,EAAqB9wE,KAAO,IAAI4lB,EAAW0W,oBAAoBw0C,EAAqB1kD,QAFxF,CAG0B3gC,EAAQqlF,uBAAyBrlF,EAAQqlF,qBAAuB,KAM1F,SAAWC,GACPA,EAAsB/wE,KAAO,IAAI4lB,EAAW0W,oBAAoB,4BADpE,CAE2B7wC,EAAQslF,wBAA0BtlF,EAAQslF,sBAAwB,KAK7F,SAAWC,GACPA,EAA0BhxE,KAAO,IAAI4lB,EAAW0W,oBAAoB,uBADxE,CAE+B7wC,EAAQulF,4BAA8BvlF,EAAQulF,0BAA4B,M,yCClqBzG,SAAS1+E,EAAO1F,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiB4b,OAezD,SAAS4P,EAAMxrB,GACX,OAAO8J,MAAMC,QAAQ/J,GAtBzBP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAItDnB,EAAO,QAHP,SAAiBmB,GACb,OAAiB,IAAVA,IAA4B,IAAVA,GAM7BnB,EAAQ6G,OAASA,EAIjB7G,EAAQ+G,OAHR,SAAgB5F,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBkjB,QAMzDrkB,EAAQmvB,MAHR,SAAehuB,GACX,OAAOA,aAAiBiC,OAM5BpD,EAAQkC,KAHR,SAAcf,GACV,MAAwB,mBAAVA,GAMlBnB,EAAQ2sB,MAAQA,EAIhB3sB,EAAQk0C,YAHR,SAAqB/yC,GACjB,OAAOwrB,EAAMxrB,IAAUA,EAAMgzC,OAAM,SAAAzf,GAAI,OAAI7tB,EAAO6tB,OAMtD10B,EAAQw+C,WAHR,SAAoBr9C,EAAOsiD,GACvB,OAAOx4C,MAAMC,QAAQ/J,IAAUA,EAAMgzC,MAAMsP,IAS/CzjD,EAAQk+C,cANR,SAAuB/8C,GAInB,OAAiB,OAAVA,GAAmC,WAAjB,EAAOA,K,6BCrCpCP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,KAU3B,SAAWolD,GACPA,EAAsB3+C,OAAS,8BAC/B2+C,EAAsB/qE,KAAO,IAAI4lB,EAAW0W,oBAAoByuC,EAAsB3+C,QAEtF2+C,EAAsBjrB,WAAa,IAAI1jB,EAAiBzT,aAJ5D,CAK2Bl9B,EAAQs/E,wBAA0Bt/E,EAAQs/E,sBAAwB,M,6BCjB7F1+E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,KAU3B,SAAWslD,GACPA,EAAsB7+C,OAAS,8BAC/B6+C,EAAsBjrE,KAAO,IAAI4lB,EAAW0W,oBAAoB2uC,EAAsB7+C,QAEtF6+C,EAAsBnrB,WAAa,IAAI1jB,EAAiBzT,aAJ5D,CAK2Bl9B,EAAQw/E,wBAA0Bx/E,EAAQw/E,sBAAwB,M,6BCjB7F5+E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMg5B,EAAaD,EAAQ,KAK3B,SAAWwlD,GACPA,EAAwBnrE,KAAO,IAAI4lB,EAAWyW,qBAAqB,8BADvE,CAE6B5wC,EAAQ0/E,0BAA4B1/E,EAAQ0/E,wBAA0B,KAMnG,SAAWC,GACPA,EAAsCprE,KAAO,IAAI4lB,EAAW2W,yBAAyB,uCADzF,CAE2C9wC,EAAQ2/E,wCAA0C3/E,EAAQ2/E,sCAAwC,M,6BChB7I/+E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMg5B,EAAaD,EAAQ,KAW3B,SAAW2lD,GACPA,EAAqBtrE,KAAO,IAAI4lB,EAAW0W,oBAAoB,2BADnE,CAE0B7wC,EAAQ6/E,uBAAyB7/E,EAAQ6/E,qBAAuB,M,6BCd1Fj/E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,KAQ3B,SAAW6lD,GACPA,EAAqBp/C,OAAS,6BAC9Bo/C,EAAqBxrE,KAAO,IAAI4lB,EAAW0W,oBAAoBkvC,EAAqBp/C,QAEpFo/C,EAAqB1rB,WAAa,IAAI1jB,EAAiBzT,aAJ3D,CAK0Bl9B,EAAQ+/E,uBAAyB//E,EAAQ+/E,qBAAuB,KAQ1F,SAAWC,GACPA,EAAyBzrE,KAAO,IAAI4lB,EAAW0W,oBAAoB,kCADvE,CAE8B7wC,EAAQggF,2BAA6BhgF,EAAQggF,yBAA2B,M,6BCzBtGp/E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,KAK3B,SAAW/jB,GAIPA,EAAgB,QAAc,UAI9BA,EAAgB,QAAc,UAI9BA,EAAgB,OAAa,SAZjC,CAasBnW,EAAQmW,mBAAqBnW,EAAQmW,iBAAmB,KAQ9E,SAAW+pE,GACPA,EAAoBv/C,OAAS,4BAC7Bu/C,EAAoB3rE,KAAO,IAAI4lB,EAAW0W,oBAAoBqvC,EAAoBv/C,QAElFu/C,EAAoB7rB,WAAa,IAAI1jB,EAAiBzT,aAJ1D,CAKyBl9B,EAAQkgF,sBAAwBlgF,EAAQkgF,oBAAsB,M,6BCjCvFt/E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,KAW3B,SAAWkmD,GACPA,EAAmBz/C,OAAS,2BAC5By/C,EAAmB7rE,KAAO,IAAI4lB,EAAW0W,oBAAoBuvC,EAAmBz/C,QAEhFy/C,EAAmB/rB,WAAa,IAAI1jB,EAAiBzT,aAJzD,CAKwBl9B,EAAQogF,qBAAuBpgF,EAAQogF,mBAAqB,M,6BClBpFx/E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,KAQ3B,SAAWomD,GACPA,EAAsB3/C,OAAS,8BAC/B2/C,EAAsB/rE,KAAO,IAAI4lB,EAAW0W,oBAAoByvC,EAAsB3/C,QAEtF2/C,EAAsBjsB,WAAa,IAAI1jB,EAAiBzT,aAJ5D,CAK2Bl9B,EAAQsgF,wBAA0BtgF,EAAQsgF,sBAAwB,M,6BCf7F1/E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,KAE3B,SAAWwmD,GACPA,EAAiBnsE,KAAO,IAAIo8B,EAAiBzT,aADjD,CAEsBl9B,EAAQ0gF,mBAAqB1gF,EAAQ0gF,iBAAmB,KAM9E,SAAWC,GACPA,EAA8BpsE,KAAO,IAAI4lB,EAAW0W,oBAAoB,kCAD5E,CAEmC7wC,EAAQ2gF,gCAAkC3gF,EAAQ2gF,8BAAgC,KAMrH,SAAWC,GACPA,EAAmCrsE,KAAO,IAAI4lB,EAAW2W,yBAAyB,kCADtF,CAEwC9wC,EAAQ4gF,qCAAuC5gF,EAAQ4gF,mCAAqC,M,6BCtBpIhgF,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMwvC,EAAmBzW,EAAQ,IAC3BC,EAAaD,EAAQ,KAE3B,SAAWi6B,GACPA,EAA4BxzB,OAAS,oCACrCwzB,EAA4B5/C,KAAO,IAAI4lB,EAAW0W,oBAAoBsjB,EAA4BxzB,QAFtG,CAGiC3gC,EAAQm0D,8BAAgCn0D,EAAQm0D,4BAA8B,KAE/G,SAAWC,GACPA,EAAkCzzB,OAAS,8BAC3CyzB,EAAkC7/C,KAAO,IAAI4lB,EAAW0W,oBAAoBujB,EAAkCzzB,QAE9GyzB,EAAkCC,WAAa,IAAI1jB,EAAiBzT,aAJxE,CAKuCl9B,EAAQo0D,oCAAsCp0D,EAAQo0D,kCAAoC,KAEjI,SAAWE,GACPA,EAAkC3zB,OAAS,8BAC3C2zB,EAAkC//C,KAAO,IAAI4lB,EAAW0W,oBAAoByjB,EAAkC3zB,QAE9G2zB,EAAkCD,WAAa,IAAI1jB,EAAiBzT,aAJxE,CAKuCl9B,EAAQs0D,oCAAsCt0D,EAAQs0D,kCAAoC,M,6BClBjI1zD,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAKtD,SAAWyiD,GAkBPA,EAAOC,gBAAkB,WAErB,IAAIhyC,EAA6B,oBAAXo/B,SAA2BA,OAAOp/B,QAAUo/B,OAAOm9B,WAClC,EAAQ,KAAc,KAE7D,OAAIv8D,GAA4C,mBAA3BA,EAAOgyC,gBACjB,SAAyBrc,GAC5B,OAAO31B,EAAOgyC,gBAAgBrc,IAIlC31B,GAA2C,mBAA1BA,EAAO2zE,eACjB,SAAyBh+C,GAC5B,OAAO31B,EAAO2zE,eAAeh+C,IAIjC31B,GAAwC,mBAAvBA,EAAO+sE,YACjB,SAAyBp3C,GAE5B,IADA,IAAIsF,EAAQj7B,EAAO+sE,YAAYp3C,EAAO55B,QAC7B1N,EAAI,EAAGyB,EAAImrC,EAAMl/B,OAAQ1N,EAAIyB,IAAKzB,EACvCsnC,EAAOtnC,GAAK4sC,EAAM5sC,IAKvB,SAAyBsnC,GAE5B,IADA,IAAIrmC,EAAQ,EACHjB,EAAI,EAAGyB,EAAI6lC,EAAO55B,OAAQ1N,EAAIyB,IAAKzB,EACpCA,EAAI,GAAM,IACViB,EAAwB,WAAhBmpB,KAAKikD,WAA0B,GAE3C/mC,EAAOtnC,GAAa,IAARiB,EACZA,KAAW,GAjCE,GAlB7B,CAuDYnB,EAAQ4jD,SAAW5jD,EAAQ4jD,OAAS,M,w6DCpDhD,WAcA,OACA,QACA,QAGA,QAGA,OACA,QACA,SAmBA,EACI,SAA4B6hC,EACRzlF,EACA0lF,GAFQ,KAAAD,gBACR,KAAAzlF,UACA,KAAA0lF,UAIxB,aA2BI,WACqB9wE,EACA6iE,EACAE,EACAgO,EACAC,EACA99D,GALA,KAAAlT,OACA,KAAA6iE,SACA,KAAAE,eACA,KAAAgO,qBACA,KAAAC,UACA,KAAA99D,MApBJ,KAAA+9D,SAAW,IAAIz3E,IACf,KAAA03E,YAAc,IAAI13E,IAElB,KAAA23E,cAAgB,IAAI33E,IACpB,KAAA43E,iBAAmB,IAAI53E,IACvB,KAAA63E,yBAA2B,IAAI73E,IAC/B,KAAA83E,kBAAoB,IAAI93E,IAEjC,KAAA+3E,mBAAqB,IAAI,EAAAz2D,QAc7BvtB,KAAKikF,qBAAuBjkF,KAAK2lB,IAAIynC,SAAS,EAAAx3C,mBAAmBM,uBAyQzE,OArRc,YAAAguE,gBAAV,WACIlkF,KAAKgkF,mBAAmBp2D,UAAKttB,IAc3B,YAAA6jF,MAAN,SAAYrwB,G,yEACR,OAAKA,GAIL9zD,KAAK0jF,SAAS78E,OAAOitD,GACrB9zD,KAAK8jF,yBAAyBj9E,OAAOitD,GACrC9zD,KAAK+jF,kBAAkBl9E,OAAOitD,GAC9B9zD,KAAK4jF,cAAc/8E,OAAOitD,IACpBttC,EAASxmB,KAAK6jF,iBAAiBjlF,IAAIk1D,KAIzC9zD,KAAK6jF,iBAAiBh9E,OAAOitD,GAC7B9zD,KAAKokF,WAAW59D,G,KAHZ,MATAxmB,KAAKqkF,UACL,YAcE,YAAAA,QAAV,sBACIrkF,KAAK6jF,iBAAiB13E,SAAQ,SAAAqa,GAAU,SAAK49D,WAAW59D,MAExDxmB,KAAK0jF,SAAS3lC,QACd/9C,KAAK4jF,cAAc7lC,QACnB/9C,KAAK6jF,iBAAiB9lC,QACtB/9C,KAAK8jF,yBAAyB/lC,QAC9B/9C,KAAK+jF,kBAAkBhmC,SAGjB,YAAAqmC,WAAV,SAAqB59D,GACbA,EAAO+8D,QACP/8D,EAAO+8D,SAIX,IAAMD,EAAgB98D,EAAO88D,cACzBA,GACA,EAAAjjF,QAAQijF,EAAcgB,gBAIxB,YAAAC,MAAN,SAAYxlD,G,0EACR/+B,KAAKw1E,aAAazxB,KAAKhlB,EAAOylD,YAAazlD,EAAO0lD,gBAElDzkF,KAAKs1E,OAAOoP,mBAAmB3lD,EAAO1iB,IAAIsoE,aAC1C3kF,KAAKs1E,OAAOsP,YAAY7lD,EAAO1iB,IAAIlC,UACnCna,KAAKs1E,OAAOuP,SAAS9lD,EAAO1iB,IAAIyoE,OAEhC9kF,KAAKwjF,mBAAmBz/B,KAAKhlB,EAAOgmD,aAEhChmD,EAAO04C,QACPz3E,KAAKyS,KAAK+kE,WAAWz4C,EAAO04C,QAGhCz3E,KAAKyjF,QAAQ1/B,KAAKhlB,EAAO0kD,S,WAGvB,YAAAuB,OAAN,SAAajmD,G,kIACyB,SAAM/+B,KAAKyS,KAAKsxC,KAAKhlB,EAAOkmD,U,OAAxD,kBAA4B,SAAoC,IAA/DA,EAAO,KAAEC,EAAc,K,IAE9B,IAAqB,IAAAA,GAAc,8BAAxB1+D,EAAM,QACbxmB,KAAKmlF,eAAe3+D,EAAQuY,EAAOqmD,e,qGAGvC,IAAqB,IAAAH,GAAO,8BAAjBz+D,EAAM,QACbxmB,KAAKmlF,eAAe3+D,EAAQuY,EAAOqmD,e,iGAIvC,SAAMplF,KAAKqlF,iBAAiB,M,OAA5B,S,yCAC8B,IAAAtmD,EAAOumD,kBAAgB,W,sCAA1CC,EAAe,QACtB,GAAMvlF,KAAKqlF,iBAAiBE,K,OAA5B,S,qMAGJ,OAAIvlF,KAAKyS,KAAK+yE,UACH,CAAP,EAAOxlF,KAAKyS,KAAK+yE,cAGrBxlF,KAAKkkF,kB,aAGC,YAAAiB,eAAV,SAAyB3+D,EAAgB4+D,G,QAAzC,OAEI,GADAplF,KAAK0jF,SAASn4E,IAAIib,EAAOjS,MAAMtP,GAAIuhB,GAC/BA,EAAOzR,YAAcjM,MAAMC,QAAQyd,EAAOvR,SAASqwE,kBAAmB,CACtE,IAAMG,EAAa,gD,kDACf,SAAMzlF,KAAKy2E,WAAWjwD,EAAQ4+D,I,cAA9B,S,YAGJplF,KAAK0lF,cAAc,YAAYl/D,EAAOjS,MAAMtP,GAAMwgF,GAClD,IAAME,EAA8Bn/D,EAAOvR,SAASqwE,iBAAiB35E,QAAO,SAAAC,GAAK,OAAC4qE,EAAqBoP,4BAA4Bv6E,IAAIO,EAAE2b,MAAM,KAAK,OACpJ,GAAIo+D,EAA4Bl6E,OAC5BshB,QAAQY,KAAK,kCAAkCg4D,EAA4Bn+D,KAAK,MAAK,6EACrFuF,QAAQY,KAAQnH,EAAOjS,MAAMtP,GAAE,yCAC/BjF,KAAK0lF,cAAc,IAAKD,Q,IAExB,IAA4B,QAAAj/D,EAAOvR,SAASqwE,kBAAgB,8BAAE,CAAzD,IAAIC,EAAe,QACI,UAApBA,IACAA,EAAkB,iBAAiB/+D,EAAOjS,MAAMtP,IAEpDjF,KAAK0lF,cAAcH,EAAiBE,I,oGAK1C,YAAAC,cAAV,SAAwBH,EAAyBE,GAC7C,IAAM9B,EAAc3jF,KAAK2jF,YAAY/kF,IAAI2mF,IAAoB,GAC7D5B,EAAY54E,KAAK06E,GACjBzlF,KAAK2jF,YAAYp4E,IAAIg6E,EAAiB5B,IAG1B,YAAAlN,WAAhB,SAA2BjwD,EAAgB4+D,EAA8BS,G,YAAA,IAAAA,MAAA,IAActV,K,yEAEnF,OAAIsV,EAAQx6E,IAAImb,EAAOjS,MAAMtP,IAClB,CAAP,GAAO,IAEX4gF,EAAQz5D,IAAI5F,EAAOjS,MAAMtP,KAErB6gF,EAAU9lF,KAAK4jF,cAAchlF,IAAI4nB,EAAOjS,MAAMtP,OAE9C6gF,EAAW,8B,gFACHt/D,EAAOvR,SAAS8wE,sBAAhB,Y,wCAC2B,IAAAv/D,EAAOvR,SAAS8wE,uBAAqB,W,sCAArDC,EAAY,QACbC,EAAajmF,KAAK0jF,SAAS9kF,IAAIonF,EAAa3vD,eAC5CpxB,EAAKuhB,EAAOjS,MAAMG,aAAe8R,EAAOjS,MAAMtP,GAChDghF,GACMC,EAAQD,EAAW1xE,MAAMG,aAAeuxE,EAAW1xE,MAAMtP,GACpC,GAAMjF,KAAKy2E,WAAWwP,EAAYb,EAAeS,KAF5E,O,OAGA,OAD2B,S,OAEjBj+E,EAAU,8BAA8B3C,EAAE,sCAAsCihF,EAAK,+BAC3FlmF,KAAKikF,qBAAqBkC,aAAa,EAAAhxE,gBAAgBlU,MAAO2G,EAAS,GAAI,IACpE,CAAP,GAAO,I,OAMX,OAHMA,EAAU,wBAAwB3C,EAAE,0CAA0C+gF,EAAY,uCAChGhmF,KAAKikF,qBAAqBkC,aAAa,EAAAhxE,gBAAgBlU,MAAO2G,EAAS,GAAI,IAC3EmlB,QAAQY,KAAK/lB,GACN,CAAP,GAAO,G,wLAQnB,OADAw+E,GAFIA,EAAapmF,KAAKyS,KAAKgkE,WAAWjwD,KAEX,GACpB,CAAP,EAAOxmB,KAAKqmF,YAAY7/D,EAAQ4+D,EAAegB,YAGvDpmF,KAAK4jF,cAAcr4E,IAAIib,EAAOjS,MAAMtP,GAAI6gF,GACjC,CAAP,EAAOA,WAGL,YAAAQ,mBAAN,SAAyBl/D,G,0EACrBpnB,KAAK+jF,kBAAkB53E,SAAQ,SAACm3E,EAAoCxvB,GAChEwvB,EAAciD,YAAcn/D,EAAO,EAAAI,KAAKJ,EAAM0sC,QAAYxzD,K,WAI5D,YAAA+kF,iBAAN,SAAuBE,G,gGAEnB,KADM5B,EAAc3jF,KAAK2jF,YAAY/kF,IAAI2mF,IAErC,UAEJvlF,KAAK2jF,YAAYp4E,IAAIg6E,OAAiBjlF,G,wBAC/BqjF,EAAYl4E,OACf,GAAMk4E,EAAYphF,KAAZohF,IADe,M,cACrB,S,+BAKM,YAAA0C,YAAd,SAA0B7/D,EAAgB4+D,EAA8BgB,G,wCAKpE,SAAeI,I,gGAEX,OADMC,EAAgB,EAAAj/D,KAAKk/D,EAAGjvC,UAAW,SAAU,iBACnD,GAAMjoB,EAAGmI,UAAU8uD,I,OACnB,OADA,SACO,CAAP,EAAOA,U,qFAPLnC,EAAoC,GACpCqC,EAAiB,SAAC9tC,GAAiC,SAAArxB,KAAKhB,EAAOxR,aAAc6jC,IAC7E+tC,EAAU,EAAAp/D,KAAK49D,EAAcyB,YAAargE,EAAOjS,MAAMtP,IACvDshF,EAAc,EAAA/+D,KAAK49D,EAAc0B,iBAAmB,GAAItgE,EAAOjS,MAAMtP,IAMjD,IAAAuiB,MAAK,EAAA49D,EAAc2B,uBAAd,MAAwC,GAAMP,K,OAAP,EAAC,S,oBAAjEQ,EAAoB,kBAA4ExgE,EAAOjS,MAAMtP,KAC7Gq+E,EAAqC,CACvC2D,cAAezgE,EAAOxR,aACtBwvE,YAAa,IAAI,EAAAnwB,QAAQ7tC,EAAOjS,MAAMtP,IAAI,EAAMjF,KAAKw1E,cACrDiP,eAAgB,IAAI,EAAApwB,QAAQ7tC,EAAOjS,MAAMtP,IAAI,EAAOjF,KAAKw1E,cACzD8O,cAAeA,EACfqC,eAAgBA,EAChBC,QAASA,EACTL,YAAaA,EACbS,kBAAmBA,GAEvBhnF,KAAK+jF,kBAAkBx4E,IAAIib,EAAOjS,MAAMtP,GAAIq+E,GAExCC,OAASjjF,EAC0C,mBAA5C8lF,EAAW5/D,EAAOpS,UAAUE,cACnCivE,EAAS6C,EAAW5/D,EAAOpS,UAAUE,aAEnCrP,EAAKuhB,EAAOjS,MAAMG,aAAe8R,EAAOjS,MAAMtP,GACI,mBAA7CmhF,EAAW5/D,EAAOpS,UAAUC,aAAnC,Y,iBAEyB,O,sBAAA,GAAM+xE,EAAW5/D,EAAOpS,UAAUC,aAAasW,MAsEzD,oBAATiZ,UAAyC,IAAXrU,EAAyB,KAAOA,EAASqU,KAtEc,CAAC0/C,K,cAAlF4D,EAAe,SACrBlnF,KAAK6jF,iBAAiBt4E,IAAIib,EAAOjS,MAAMtP,GAAI,IAAIkiF,EAAgB7D,EAAe4D,EAAc3D,IAGxFvjF,KAAK8jF,yBAAyBz4E,IAAImb,EAAOjS,MAAMtP,MAC/CjF,KAAK8jF,yBAAyBllF,IAAI4nB,EAAOjS,MAAMtP,IAAKgiB,UACpDjnB,KAAK8jF,yBAAyBj9E,OAAO2f,EAAOjS,MAAMtP,K,aAQtD,O,WALIjF,KAAK8jF,yBAAyBz4E,IAAImb,EAAOjS,MAAMtP,KAC/CjF,KAAK8jF,yBAAyBllF,IAAI4nB,EAAOjS,MAAMtP,IAAKkyB,OAAO,GAE/Dn3B,KAAKikF,qBAAqBkC,aAAa,EAAAhxE,gBAAgBlU,MAAO,wBAAwBgE,EAAE,YAAY,EAAI2C,QAAO,IAAK,GAAI,IACxHmlB,QAAQC,MAAM,0BAA0BxG,EAAOjS,MAAMjW,KAAQ,GACtD,CAAP,GAAO,G,0BAIXyuB,QAAQkO,IAAI,UAAUh2B,EAAE,KAAKuhB,EAAOpS,UAAUC,YAAW,iEACzDrU,KAAK6jF,iBAAiBt4E,IAAIib,EAAOjS,MAAMtP,GAAI,IAAIkiF,EAAgB7D,EAAe8C,I,iBAElF,MAAO,CAAP,GAAO,WAGX,YAAAgB,cAAA,WACI,OAAOt+E,MAAM5I,KAAKF,KAAK0jF,SAASv2B,WAEpC,YAAAk6B,gBAAA,SAAgBvzB,GACZ,IAAMwzB,EAAetnF,KAAK6jF,iBAAiBjlF,IAAIk1D,GAC/C,GAAIwzB,EACA,OAAOA,EAAazpF,SAK5B,YAAA0pF,cAAA,SAAczzB,GACV,OAAO9zD,KAAK0jF,SAAS9kF,IAAIk1D,IAG7B,YAAA0zB,UAAA,SAAU1zB,GACN,OAAO9zD,KAAK0jF,SAASr4E,IAAIyoD,IAG7B,YAAA2zB,SAAA,SAAS3zB,GACL,OAAO9zD,KAAK6jF,iBAAiBx4E,IAAIyoD,IAGrC,YAAA4zB,eAAA,SAAe5zB,GACX,GAAI9zD,KAAK8jF,yBAAyBz4E,IAAIyoD,GAClC,OAAO9zD,KAAK8jF,yBAAyBllF,IAAIk1D,GAAWp0B,QAGxD,IAAMioD,EAAW,IAAI,EAAA91C,SAMrB,OAJI7xC,KAAK6jF,iBAAiBjlF,IAAIk1D,IAC1B6zB,EAAS1gE,UAEbjnB,KAAK8jF,yBAAyBv4E,IAAIuoD,EAAU6zB,GACrCA,EAASjoD,SAGpB,sBAAI,0BAAW,C,IAAf,WACI,OAAO1/B,KAAKgkF,mBAAmBj4D,O,gCAvS5B,EAAA65D,4BAA8B,IAAIrV,IAAI,CACzC,IACA,aACA,YACA,UAAW,+BAAgC,iBAAkB,gCAC7D,oBACA,SACA,QACA,mBAkSR,EA5SA,GAAa,EAAAiG,yB,+CChEb,MAAMrkE,EAAS,EAAQ,KAEjBqd,EAAK,GAGXrd,EAAOqd,EAAI,EAAQ,KAEnBrd,EAAOqd,EAAI,EAAQ,MACnBrd,EAAOqd,EAAI,EAAQ,KACnBrd,EAAOqd,EAAI,EAAQ,KACnBrd,EAAOqd,EAAI,EAAQ,KACnBrd,EAAOqd,EAAI,EAAQ,MACnBrd,EAAOqd,EAAI,EAAQ,MACnBrd,EAAOqd,EAAI,EAAQ,MACnBrd,EAAOqd,EAAI,EAAQ,MACnBrd,EAAOqd,EAAI,EAAQ,MACnBrd,EAAOqd,EAAI,EAAQ,MACnBrd,EAAOqd,EAAI,EAAQ,KAEnB1xB,EAAOD,QAAU2xB,G,6BCNjB1xB,EAAOD,QAZP,WACE,MAAM0T,EAAO,GAAGuW,MAAM5pB,KAAKoR,WAAW3D,OAAO5N,GAAKA,GAC5C26D,EAAOnnD,EAAKihB,QAOlB,OANAjhB,EAAKpF,QAAQmiC,IACX7vC,OAAOskC,KAAKuL,GAAKniC,QAAQ7M,IACvBo5D,EAAKp5D,GAAOgvC,EAAIhvC,OAIbo5D,I,iBCZT,kBAAgB,EAAQ,KAEpBkvB,EAAU14E,EAAQuN,IAClBA,EAAM,KAENyW,EAAWhkB,EAAQmN,IAAIwrE,sBAAwB34E,EAAQgkB,SAE3DhkB,EAAQuN,IAAM,WAGZ,OAFKA,IACHA,EAAMmrE,EAAQ1pF,KAAKgR,IACduN,GAET,IACEvN,EAAQuN,MACR,MAAOmpC,IAET,IAAIl6B,EAAQxc,EAAQwc,MACpBxc,EAAQwc,MAAQ,SAASrtB,GACvBoe,EAAM,KACNiP,EAAMxtB,KAAKgR,EAAS7Q,IAGtBP,EAAOD,QAEP,SAAgB2xB,GAKVs4D,EAAUloF,eAAe,cACzBsP,EAAQuF,QAAQkgB,MAAM,2BA2H1B,SAAsBnF,GACpBA,EAAGu4D,OAAS,SAAU3gE,EAAMloB,EAAMmtB,GAChCmD,EAAGkC,KAAMtK,EACA0gE,EAAUE,SAAWF,EAAUG,UAC/B/oF,GACA,SAAU2wB,EAAKF,GAClBE,EACExD,GAAUA,EAASwD,GAKzBL,EAAG04D,OAAOv4D,EAAIzwB,GAAM,SAAU2wB,GAC5BL,EAAGC,MAAME,GAAI,SAAS4sC,GAChBlwC,GAAUA,EAASwD,GAAO0sC,aAMtC/sC,EAAG24D,WAAa,SAAU/gE,EAAMloB,GAC9B,IAKI8H,EALA2oB,EAAKH,EAAG44D,SAAShhE,EAAM0gE,EAAUE,SAAWF,EAAUG,UAAW/oF,GAIjEmpF,GAAQ,EAEZ,IACErhF,EAAMwoB,EAAG84D,WAAW34D,EAAIzwB,GACxBmpF,GAAQ,EACR,QACA,GAAIA,EACF,IACE74D,EAAGO,UAAUJ,GACb,MAAOi2B,SAETp2B,EAAGO,UAAUJ,GAGjB,OAAO3oB,GAjKTuhF,CAAY/4D,GAITA,EAAGg5D,SAiKR,SAAuBh5D,GACjBs4D,EAAUloF,eAAe,cAC3B4vB,EAAGg5D,QAAU,SAAUphE,EAAMqhE,EAAIC,EAAI94D,GACnCJ,EAAGkC,KAAKtK,EAAM0gE,EAAUG,WAAW,SAAUriC,EAAIj2B,GAC3Ci2B,EACEh2B,GAAIA,EAAGg2B,GAGbp2B,EAAGm5D,QAAQh5D,EAAI84D,EAAIC,GAAI,SAAU9iC,GAC/Bp2B,EAAGC,MAAME,GAAI,SAAUi5D,GACjBh5D,GAAIA,EAAGg2B,GAAMgjC,aAMzBp5D,EAAGq5D,YAAc,SAAUzhE,EAAMqhE,EAAIC,GACnC,IACI1hF,EADA2oB,EAAKH,EAAG44D,SAAShhE,EAAM0gE,EAAUG,WAEjCI,GAAQ,EACZ,IACErhF,EAAMwoB,EAAGs5D,YAAYn5D,EAAI84D,EAAIC,GAC7BL,GAAQ,EACR,QACA,GAAIA,EACF,IACE74D,EAAGO,UAAUJ,GACb,MAAOi2B,SAETp2B,EAAGO,UAAUJ,GAGjB,OAAO3oB,KAITwoB,EAAGg5D,QAAU,SAAUhzD,EAAIuzD,EAAIC,EAAIp5D,GAAUA,GAAI1gB,EAAQwb,SAASkF,IAClEJ,EAAGq5D,YAAc,cArMnBI,CAAaz5D,GAQfA,EAAG05D,MAAQC,EAAS35D,EAAG05D,OACvB15D,EAAG45D,OAASD,EAAS35D,EAAG45D,QACxB55D,EAAG65D,OAASF,EAAS35D,EAAG65D,QAExB75D,EAAG22C,MAAQmjB,EAAS95D,EAAG22C,OACvB32C,EAAG04D,OAASoB,EAAS95D,EAAG04D,QACxB14D,EAAGu4D,OAASuB,EAAS95D,EAAGu4D,QAExBv4D,EAAG+5D,UAAYC,EAAah6D,EAAG+5D,WAC/B/5D,EAAGi6D,WAAaD,EAAah6D,EAAGi6D,YAChCj6D,EAAGk6D,WAAaF,EAAah6D,EAAGk6D,YAEhCl6D,EAAGm6D,UAAYC,EAAap6D,EAAGm6D,WAC/Bn6D,EAAG84D,WAAasB,EAAap6D,EAAG84D,YAChC94D,EAAG24D,WAAayB,EAAap6D,EAAG24D,YAEhC34D,EAAGs1C,KAAO+kB,EAAQr6D,EAAGs1C,MACrBt1C,EAAGs6D,MAAQD,EAAQr6D,EAAGs6D,OACtBt6D,EAAGu1C,MAAQ8kB,EAAQr6D,EAAGu1C,OAEtBv1C,EAAGu6D,SAAWC,EAAYx6D,EAAGu6D,UAC7Bv6D,EAAGy6D,UAAYD,EAAYx6D,EAAGy6D,WAC9Bz6D,EAAG06D,UAAYF,EAAYx6D,EAAG06D,WAGzB16D,EAAGu4D,SACNv4D,EAAGu4D,OAAS,SAAU3gE,EAAMloB,EAAM0wB,GAC5BA,GAAI1gB,EAAQwb,SAASkF,IAE3BJ,EAAG24D,WAAa,cAEb34D,EAAG65D,SACN75D,EAAG65D,OAAS,SAAUjiE,EAAMmoD,EAAK4a,EAAKv6D,GAChCA,GAAI1gB,EAAQwb,SAASkF,IAE3BJ,EAAGk6D,WAAa,cAYD,UAAbx2D,IACF1D,EAAG46D,QAAoBC,EAqBnB76D,EAAG46D,OArBoC,SAAUlqF,EAAM8F,EAAI4pB,GAC7D,IAAI9sB,EAAQu8B,KAAKC,MACbgrD,EAAU,EACdD,EAAUnqF,EAAM8F,GAAI,SAASukF,EAAI3kC,GAC/B,GAAIA,IACgB,WAAZA,EAAG53C,MAAiC,UAAZ43C,EAAG53C,OAC5BqxB,KAAKC,MAAQx8B,EAAQ,IAW1B,OAVA6mB,YAAW,WACT6F,EAAGs1C,KAAK9+D,GAAI,SAAUwkF,EAAQC,GACxBD,GAA0B,WAAhBA,EAAOx8E,KACnBq8E,EAAUnqF,EAAM8F,EAAIukF,GAEpB36D,EAAGg2B,QAEN0kC,QACCA,EAAU,MACZA,GAAW,KAGX16D,GAAIA,EAAGg2B,SAnBH,IAAWykC,EAiJzB,SAASf,EAAUoB,GACjB,OAAKA,EACE,SAAUthF,EAAQlK,EAAM0wB,GAC7B,OAAO86D,EAAKxsF,KAAKsxB,EAAIpmB,EAAQlK,GAAM,SAAU0mD,GACvC+kC,EAAU/kC,KAAKA,EAAK,MACpBh2B,GAAIA,EAAGjF,MAAM3qB,KAAMsP,eAJTo7E,EASpB,SAASd,EAAcc,GACrB,OAAKA,EACE,SAAUthF,EAAQlK,GACvB,IACE,OAAOwrF,EAAKxsF,KAAKsxB,EAAIpmB,EAAQlK,GAC7B,MAAO0mD,GACP,IAAK+kC,EAAU/kC,GAAK,MAAMA,IALZ8kC,EAWpB,SAASvB,EAAUuB,GACjB,OAAKA,EACE,SAAUthF,EAAQmmE,EAAK4a,EAAKv6D,GACjC,OAAO86D,EAAKxsF,KAAKsxB,EAAIpmB,EAAQmmE,EAAK4a,GAAK,SAAUvkC,GAC3C+kC,EAAU/kC,KAAKA,EAAK,MACpBh2B,GAAIA,EAAGjF,MAAM3qB,KAAMsP,eAJTo7E,EASpB,SAASlB,EAAckB,GACrB,OAAKA,EACE,SAAUthF,EAAQmmE,EAAK4a,GAC5B,IACE,OAAOO,EAAKxsF,KAAKsxB,EAAIpmB,EAAQmmE,EAAK4a,GAClC,MAAOvkC,GACP,IAAK+kC,EAAU/kC,GAAK,MAAMA,IALZ8kC,EAUpB,SAASb,EAASa,GAChB,OAAKA,EAGE,SAAUthF,EAAQ0B,EAAS8kB,GAKhC,SAASvD,EAAUu5B,EAAIof,GACjBA,IACEA,EAAMuK,IAAM,IAAGvK,EAAMuK,KAAO,YAC5BvK,EAAMmlB,IAAM,IAAGnlB,EAAMmlB,KAAO,aAE9Bv6D,GAAIA,EAAGjF,MAAM3qB,KAAMsP,WAEzB,MAXuB,mBAAZxE,IACT8kB,EAAK9kB,EACLA,EAAU,MASLA,EAAU4/E,EAAKxsF,KAAKsxB,EAAIpmB,EAAQ0B,EAASuhB,GAC5Cq+D,EAAKxsF,KAAKsxB,EAAIpmB,EAAQijB,IAhBVq+D,EAoBpB,SAASV,EAAaU,GACpB,OAAKA,EAGE,SAAUthF,EAAQ0B,GACvB,IAAIk6D,EAAQl6D,EAAU4/E,EAAKxsF,KAAKsxB,EAAIpmB,EAAQ0B,GACxC4/E,EAAKxsF,KAAKsxB,EAAIpmB,GAGlB,OAFI47D,EAAMuK,IAAM,IAAGvK,EAAMuK,KAAO,YAC5BvK,EAAMmlB,IAAM,IAAGnlB,EAAMmlB,KAAO,YACzBnlB,GARS0lB,EAwBpB,SAASC,EAAW/kC,GAClB,OAAKA,IAGW,WAAZA,EAAG53C,QAGQkB,EAAQ07E,QAA+B,IAArB17E,EAAQ07E,UAEvB,WAAZhlC,EAAG53C,MAAiC,UAAZ43C,EAAG53C,OA1NnCwhB,EAAGuC,KAAO,SAAW84D,GACnB,SAAS94D,EAAMpC,EAAI0V,EAAQ4B,EAAQx7B,EAAQ7E,EAAUkkF,GACnD,IAAIz+D,EACJ,GAAIy+D,GAAkC,mBAAdA,EAA0B,CAChD,IAAIC,EAAa,EACjB1+D,EAAW,SAAUu5B,EAAIxU,EAAGpe,GAC1B,GAAI4yB,GAAkB,WAAZA,EAAG53C,MAAqB+8E,EAAa,GAE7C,OADAA,IACOF,EAAQ3sF,KAAKsxB,EAAIG,EAAI0V,EAAQ4B,EAAQx7B,EAAQ7E,EAAUylB,GAEhEy+D,EAAUngE,MAAM3qB,KAAMsP,YAG1B,OAAOu7E,EAAQ3sF,KAAKsxB,EAAIG,EAAI0V,EAAQ4B,EAAQx7B,EAAQ7E,EAAUylB,GAKhE,OADA0F,EAAKe,UAAY+3D,EACV94D,EAlBC,CAmBPvC,EAAGuC,MAENvC,EAAGw7D,UAAsBC,EAarBz7D,EAAGw7D,SAbwC,SAAUr7D,EAAI0V,EAAQ4B,EAAQx7B,EAAQ7E,GAEnF,IADA,IAAImkF,EAAa,IAEf,IACE,OAAOE,EAAY/sF,KAAKsxB,EAAIG,EAAI0V,EAAQ4B,EAAQx7B,EAAQ7E,GACxD,MAAOg/C,GACP,GAAgB,WAAZA,EAAG53C,MAAqB+8E,EAAa,GAAI,CAC3CA,IACA,SAEF,MAAMnlC,KAVE,IAAWqlC,K,uxHC1I3B,kBAAa,EAAQ,KAAUhlC,OAE/BnoD,EAAOD,QAEP,SAAiB2xB,GACf,MAAO,CACLa,WAIF,SAASA,EAAYjJ,EAAMtc,GACzB,KAAM9K,gBAAgBqwB,GAAa,OAAO,IAAIA,EAAWjJ,EAAMtc,GAE/Dm7C,EAAO/nD,KAAK8B,MAEZ,IAAI4jC,EAAO5jC,KAEXA,KAAKonB,KAAOA,EACZpnB,KAAK2vB,GAAK,KACV3vB,KAAKowC,UAAW,EAChBpwC,KAAKg6D,QAAS,EAEdh6D,KAAK4xB,MAAQ,IACb5xB,KAAKd,KAAO,IACZc,KAAKkrF,WAAa,MAElBpgF,EAAUA,GAAW,GAIrB,IADA,IAAIi4B,EAAOtkC,OAAOskC,KAAKj4B,GACdgY,EAAQ,EAAGrX,EAASs3B,EAAKt3B,OAAQqX,EAAQrX,EAAQqX,IAAS,CACjE,IAAIxjB,EAAMyjC,EAAKjgB,GACf9iB,KAAKV,GAAOwL,EAAQxL,GAGlBU,KAAK8kC,UAAU9kC,KAAKq3D,YAAYr3D,KAAK8kC,UAEzC,QAAmBxkC,IAAfN,KAAK8C,MAAqB,CAC5B,GAAI,iBAAoB9C,KAAK8C,MAC3B,MAAMukB,UAAU,0BAElB,QAAiB/mB,IAAbN,KAAK+C,IACP/C,KAAK+C,IAAMkrC,SACN,GAAI,iBAAoBjuC,KAAK+C,IAClC,MAAMskB,UAAU,wBAGlB,GAAIrnB,KAAK8C,MAAQ9C,KAAK+C,IACpB,MAAM,IAAI9B,MAAM,wBAGlBjB,KAAKi2B,IAAMj2B,KAAK8C,MAGlB,GAAgB,OAAZ9C,KAAK2vB,GAIP,YAHAzgB,EAAQwb,UAAS,WACfkZ,EAAK8yB,WAKTlnC,EAAGkC,KAAK1xB,KAAKonB,KAAMpnB,KAAK4xB,MAAO5xB,KAAKd,MAAM,SAAU2wB,EAAKF,GACvD,GAAIE,EAGF,OAFA+T,EAAKvY,KAAK,QAASwE,QACnB+T,EAAKwM,UAAW,GAIlBxM,EAAKjU,GAAKA,EACViU,EAAKvY,KAAK,OAAQsE,GAClBiU,EAAK8yB,YA/DPnmC,YAmEF,SAASA,EAAanJ,EAAMtc,GAC1B,KAAM9K,gBAAgBuwB,GAAc,OAAO,IAAIA,EAAYnJ,EAAMtc,GAEjEm7C,EAAO/nD,KAAK8B,MAEZA,KAAKonB,KAAOA,EACZpnB,KAAK2vB,GAAK,KACV3vB,KAAK42B,UAAW,EAEhB52B,KAAK4xB,MAAQ,IACb5xB,KAAK8kC,SAAW,SAChB9kC,KAAKd,KAAO,IACZc,KAAKo1D,aAAe,EAEpBtqD,EAAUA,GAAW,GAIrB,IADA,IAAIi4B,EAAOtkC,OAAOskC,KAAKj4B,GACdgY,EAAQ,EAAGrX,EAASs3B,EAAKt3B,OAAQqX,EAAQrX,EAAQqX,IAAS,CACjE,IAAIxjB,EAAMyjC,EAAKjgB,GACf9iB,KAAKV,GAAOwL,EAAQxL,GAGtB,QAAmBgB,IAAfN,KAAK8C,MAAqB,CAC5B,GAAI,iBAAoB9C,KAAK8C,MAC3B,MAAMukB,UAAU,0BAElB,GAAIrnB,KAAK8C,MAAQ,EACf,MAAM,IAAI7B,MAAM,yBAGlBjB,KAAKi2B,IAAMj2B,KAAK8C,MAGlB9C,KAAKmrF,MAAO,EACZnrF,KAAKorF,OAAS,GAEE,OAAZprF,KAAK2vB,KACP3vB,KAAKqrF,MAAQ77D,EAAGkC,KAChB1xB,KAAKorF,OAAOrgF,KAAK,CAAC/K,KAAKqrF,MAAOrrF,KAAKonB,KAAMpnB,KAAK4xB,MAAO5xB,KAAKd,UAAMoB,IAChEN,KAAKm8D,c,iCC7FXr+D,EAAOD,QAAUooD,EAEjB,IAAIqlC,EAAK,EAAQ,IAAUxnC,aAkB3B,SAASmC,IACPqlC,EAAGptF,KAAK8B,MAlBK,EAAQ,GAEvBiwC,CAASgW,EAAQqlC,GACjBrlC,EAAO/V,SAAW,EAAQ,IAC1B+V,EAAO9V,SAAW,EAAQ,KAC1B8V,EAAOjW,OAAS,EAAQ,KACxBiW,EAAOC,UAAY,EAAQ,KAC3BD,EAAOE,YAAc,EAAQ,KAG7BF,EAAOA,OAASA,EAWhBA,EAAOtmD,UAAUyqD,KAAO,SAASsO,EAAM5tD,GACrC,IAAIsG,EAASpR,KAEb,SAASu5D,EAAOtmB,GACVylB,EAAK9hC,WACH,IAAU8hC,EAAK75B,MAAMoU,IAAU7hC,EAAOuoD,OACxCvoD,EAAOuoD,QAOb,SAASN,IACHjoD,EAAOg/B,UAAYh/B,EAAOwoD,QAC5BxoD,EAAOwoD,SAJXxoD,EAAO2Z,GAAG,OAAQwuC,GAQlBb,EAAK3tC,GAAG,QAASsuC,GAIZX,EAAK6yB,UAAczgF,IAA2B,IAAhBA,EAAQ/H,MACzCqO,EAAO2Z,GAAG,MAAOulB,GACjBl/B,EAAO2Z,GAAG,QAASouC,IAGrB,IAAIqyB,GAAW,EACf,SAASl7C,IACHk7C,IACJA,GAAW,EAEX9yB,EAAK31D,OAIP,SAASo2D,IACHqyB,IACJA,GAAW,EAEiB,mBAAjB9yB,EAAK5mC,SAAwB4mC,EAAK5mC,WAI/C,SAASwnC,EAAQ1T,GAEf,GADA6lC,IACwC,IAApCH,EAAG9lC,cAAcxlD,KAAM,SACzB,MAAM4lD,EAQV,SAAS6lC,IACPr6E,EAAO+Z,eAAe,OAAQouC,GAC9Bb,EAAKvtC,eAAe,QAASkuC,GAE7BjoD,EAAO+Z,eAAe,MAAOmlB,GAC7Bl/B,EAAO+Z,eAAe,QAASguC,GAE/B/nD,EAAO+Z,eAAe,QAASmuC,GAC/BZ,EAAKvtC,eAAe,QAASmuC,GAE7BloD,EAAO+Z,eAAe,MAAOsgE,GAC7Br6E,EAAO+Z,eAAe,QAASsgE,GAE/B/yB,EAAKvtC,eAAe,QAASsgE,GAW/B,OA5BAr6E,EAAO2Z,GAAG,QAASuuC,GACnBZ,EAAK3tC,GAAG,QAASuuC,GAmBjBloD,EAAO2Z,GAAG,MAAO0gE,GACjBr6E,EAAO2Z,GAAG,QAAS0gE,GAEnB/yB,EAAK3tC,GAAG,QAAS0gE,GAEjB/yB,EAAKrtC,KAAK,OAAQja,GAGXsnD,I,6CCzHT,IAAIx0B,EAAS,EAAQ,IAAeA,OAChClV,EAAO,EAAQ,KAMnBlxB,EAAOD,QAAU,WACf,SAAS43D,KAVX,SAAyB/mC,EAAUrP,GAAe,KAAMqP,aAAoBrP,GAAgB,MAAM,IAAIgI,UAAU,qCAW5GqkE,CAAgB1rF,KAAMy1D,GAEtBz1D,KAAKw3D,KAAO,KACZx3D,KAAKk4D,KAAO,KACZl4D,KAAKyL,OAAS,EAqDhB,OAlDAgqD,EAAW91D,UAAUoL,KAAO,SAAcqB,GACxC,IAAIoV,EAAQ,CAAEsP,KAAM1kB,EAAGm6C,KAAM,MACzBvmD,KAAKyL,OAAS,EAAGzL,KAAKk4D,KAAK3R,KAAO/kC,EAAWxhB,KAAKw3D,KAAOh2C,EAC7DxhB,KAAKk4D,KAAO12C,IACVxhB,KAAKyL,QAGTgqD,EAAW91D,UAAUmnB,QAAU,SAAiB1a,GAC9C,IAAIoV,EAAQ,CAAEsP,KAAM1kB,EAAGm6C,KAAMvmD,KAAKw3D,MACd,IAAhBx3D,KAAKyL,SAAczL,KAAKk4D,KAAO12C,GACnCxhB,KAAKw3D,KAAOh2C,IACVxhB,KAAKyL,QAGTgqD,EAAW91D,UAAU6yB,MAAQ,WAC3B,GAAoB,IAAhBxyB,KAAKyL,OAAT,CACA,IAAIzE,EAAMhH,KAAKw3D,KAAK1mC,KAGpB,OAFoB,IAAhB9wB,KAAKyL,OAAczL,KAAKw3D,KAAOx3D,KAAKk4D,KAAO,KAAUl4D,KAAKw3D,KAAOx3D,KAAKw3D,KAAKjR,OAC7EvmD,KAAKyL,OACAzE,IAGTyuD,EAAW91D,UAAUo+C,MAAQ,WAC3B/9C,KAAKw3D,KAAOx3D,KAAKk4D,KAAO,KACxBl4D,KAAKyL,OAAS,GAGhBgqD,EAAW91D,UAAU6nB,KAAO,SAAc1nB,GACxC,GAAoB,IAAhBE,KAAKyL,OAAc,MAAO,GAG9B,IAFA,IAAI5L,EAAIG,KAAKw3D,KACTxwD,EAAM,GAAKnH,EAAEixB,KACVjxB,EAAIA,EAAE0mD,MACXv/C,GAAOlH,EAAID,EAAEixB,KACd,OAAO9pB,GAGVyuD,EAAW91D,UAAU4oB,OAAS,SAAgB/oB,GAC5C,GAAoB,IAAhBQ,KAAKyL,OAAc,OAAOy4B,EAAO2E,MAAM,GAC3C,GAAoB,IAAhB7oC,KAAKyL,OAAc,OAAOzL,KAAKw3D,KAAK1mC,KAIxC,IAHA,IApDgBwd,EAAKllC,EAAQ69B,EAoDzBjgC,EAAMk9B,EAAOM,YAAYhlC,IAAM,GAC/BK,EAAIG,KAAKw3D,KACTz5D,EAAI,EACD8B,GAvDSyuC,EAwDHzuC,EAAEixB,KAxDM1nB,EAwDApC,EAxDQigC,EAwDHlpC,EAvD5BuwC,EAAIlJ,KAAKh8B,EAAQ69B,GAwDblpC,GAAK8B,EAAEixB,KAAKrlB,OACZ5L,EAAIA,EAAE0mD,KAER,OAAOv/C,GAGFyuD,EA3DQ,GA8DbzmC,GAAQA,EAAKmU,SAAWnU,EAAKmU,QAAQk9B,SACvCviE,EAAOD,QAAQ8B,UAAUqvB,EAAKmU,QAAQk9B,QAAU,WAC9C,IAAIp7B,EAAMjW,EAAKmU,QAAQ,CAAE13B,OAAQzL,KAAKyL,SACtC,OAAOzL,KAAKizB,YAAY30B,KAAO,IAAM2mC,K,6CCpBzC,SAAS0mD,EAAQrtF,GAEf,IACE,IAAKixB,EAAOq8D,aAAc,OAAO,EACjC,MAAOx6C,GACP,OAAO,EAET,IAAInf,EAAM1C,EAAOq8D,aAAattF,GAC9B,OAAI,MAAQ2zB,GACyB,SAA9BrX,OAAOqX,GAAKoE,cA5DrBv4B,EAAOD,QAoBP,SAAoBq5B,EAAIqd,GACtB,GAAIo3C,EAAO,iBACT,OAAOz0D,EAGT,IAAI0tB,GAAS,EAeb,OAdA,WACE,IAAKA,EAAQ,CACX,GAAI+mC,EAAO,oBACT,MAAM,IAAI1qF,MAAMszC,GACPo3C,EAAO,oBAChB5+D,QAAQ6P,MAAM2X,GAEdxnB,QAAQY,KAAK4mB,GAEfqQ,GAAS,EAEX,OAAO1tB,EAAGvM,MAAM3qB,KAAMsP,e,kCCzC1B,IAAI+1B,EAAS,EAAQ,IACjBnB,EAASmB,EAAOnB,OAGpB,SAASkiB,EAAW9X,EAAKC,GACvB,IAAK,IAAIjvC,KAAOgvC,EACdC,EAAIjvC,GAAOgvC,EAAIhvC,GAWnB,SAAS+mD,EAAYx2C,EAAK00B,EAAkB94B,GAC1C,OAAOy4B,EAAOr0B,EAAK00B,EAAkB94B,GATnCy4B,EAAOhkC,MAAQgkC,EAAO2E,OAAS3E,EAAOM,aAAeN,EAAOoF,gBAC9DxrC,EAAOD,QAAUwnC,GAGjB+gB,EAAU/gB,EAAQxnC,GAClBA,EAAQqmC,OAASmiB,GAOnBA,EAAW1mD,UAAYlB,OAAOY,OAAO6kC,EAAOvkC,WAG5CymD,EAAUliB,EAAQmiB,GAElBA,EAAWnmD,KAAO,SAAU2P,EAAK00B,EAAkB94B,GACjD,GAAmB,iBAARoE,EACT,MAAM,IAAIwX,UAAU,iCAEtB,OAAO6c,EAAOr0B,EAAK00B,EAAkB94B,IAGvC46C,EAAWxd,MAAQ,SAAU1K,EAAMkL,EAAMvE,GACvC,GAAoB,iBAAT3G,EACT,MAAM,IAAI9W,UAAU,6BAEtB,IAAIsf,EAAMzC,EAAO/F,GAUjB,YATa79B,IAAT+oC,EACsB,iBAAbvE,EACT6B,EAAI0C,KAAKA,EAAMvE,GAEf6B,EAAI0C,KAAKA,GAGX1C,EAAI0C,KAAK,GAEJ1C,GAGT0f,EAAW7hB,YAAc,SAAUrG,GACjC,GAAoB,iBAATA,EACT,MAAM,IAAI9W,UAAU,6BAEtB,OAAO6c,EAAO/F,IAGhBkoB,EAAW/c,gBAAkB,SAAUnL,GACrC,GAAoB,iBAATA,EACT,MAAM,IAAI9W,UAAU,6BAEtB,OAAOge,EAAOuD,WAAWzK,K,6BCnC3BrgC,EAAOD,QAAUsoD,EAEjB,IAAID,EAAY,EAAQ,IAGpBl3B,EAAOvwB,OAAOY,OAAO,EAAQ,KAMjC,SAAS8mD,EAAYr7C,GACnB,KAAM9K,gBAAgBmmD,GAAc,OAAO,IAAIA,EAAYr7C,GAE3Do7C,EAAUhoD,KAAK8B,KAAM8K,GARvBkkB,EAAKihB,SAAW,EAAQ,IAGxBjhB,EAAKihB,SAASkW,EAAaD,GAQ3BC,EAAYxmD,UAAUu8D,WAAa,SAAUjpB,EAAOnO,EAAUlV,GAC5DA,EAAG,KAAMqjB,K,gBC7CXn1C,EAAOD,QAAU,EAAQ,K,gBCAzBC,EAAOD,QAAU,EAAQ,K,gBCAzBC,EAAOD,QAAU,EAAQ,IAAcqoD,W,gBCAvCpoD,EAAOD,QAAU,EAAQ,IAAcsoD,a,6BCEvCroD,EAAOD,QAEP,SAAgBonC,GACd,GAAY,OAARA,GAA+B,iBAARA,EACzB,OAAOA,EAET,GAAIA,aAAexmC,OACjB,IAAI2mC,EAAO,CAAEtS,UAAWmS,EAAInS,gBAExBsS,EAAO3mC,OAAOY,OAAO,MAM3B,OAJAZ,OAAOmlD,oBAAoB3e,GAAK94B,SAAQ,SAAU7M,GAChDb,OAAOC,eAAe0mC,EAAM9lC,EAAKb,OAAO8yC,yBAAyBtM,EAAK3lC,OAGjE8lC,I,cCjBTtnC,EAAOD,QAAU,SAAkBgS,GACjC,OAAOA,GAAsB,iBAARA,GACI,mBAAbA,EAAIu1B,MACS,mBAAbv1B,EAAIw5B,MACc,mBAAlBx5B,EAAI67B,Y,cCJW,mBAAlBjtC,OAAOY,OAEhBvB,EAAOD,QAAU,SAAkB4zC,EAAMC,GACvCD,EAAKE,OAASD,EACdD,EAAK9xC,UAAYlB,OAAOY,OAAOqyC,EAAU/xC,UAAW,CAClDszB,YAAa,CACXj0B,MAAOyyC,EACP9yC,YAAY,EACZi4B,UAAU,EACV1E,cAAc,MAMpBp0B,EAAOD,QAAU,SAAkB4zC,EAAMC,GACvCD,EAAKE,OAASD,EACd,IAAIE,EAAW,aACfA,EAASjyC,UAAY+xC,EAAU/xC,UAC/B8xC,EAAK9xC,UAAY,IAAIiyC,EACrBH,EAAK9xC,UAAUszB,YAAcwe,I;;;;;ECZjC,IAAIkS,EAAwBllD,OAAOklD,sBAC/B/jD,EAAiBnB,OAAOkB,UAAUC,eAClCisF,EAAmBptF,OAAOkB,UAAUuwE,qBAExC,SAAS4b,EAAS75D,GACjB,GAAIA,QACH,MAAM,IAAI5K,UAAU,yDAGrB,OAAO5oB,OAAOwzB,GA+Cfn0B,EAAOD,QA5CP,WACC,IACC,IAAKY,OAAO0T,OACX,OAAO,EAMR,IAAI45E,EAAQ,IAAInxE,OAAO,OAEvB,GADAmxE,EAAM,GAAK,KACkC,MAAzCttF,OAAOmlD,oBAAoBmoC,GAAO,GACrC,OAAO,EAKR,IADA,IAAIC,EAAQ,GACHjuF,EAAI,EAAGA,EAAI,GAAIA,IACvBiuF,EAAM,IAAMpxE,OAAO4b,aAAaz4B,IAAMA,EAKvC,GAAwB,eAHXU,OAAOmlD,oBAAoBooC,GAAO/xE,KAAI,SAAUza,GAC5D,OAAOwsF,EAAMxsF,MAEHgoB,KAAK,IACf,OAAO,EAIR,IAAIykE,EAAQ,GAIZ,MAHA,uBAAuB1kE,MAAM,IAAIpb,SAAQ,SAAU+/E,GAClDD,EAAMC,GAAUA,KAGf,yBADEztF,OAAOskC,KAAKtkC,OAAO0T,OAAO,GAAI85E,IAAQzkE,KAAK,IAM9C,MAAOqI,GAER,OAAO,GAIQs8D,GAAoB1tF,OAAO0T,OAAS,SAAU/I,EAAQgI,GAKtE,IAJA,IAAIlR,EAEAksF,EADApmF,EAAK8lF,EAAS1iF,GAGTtJ,EAAI,EAAGA,EAAIwP,UAAU7D,OAAQ3L,IAAK,CAG1C,IAAK,IAAIR,KAFTY,EAAOzB,OAAO6Q,UAAUxP,IAGnBF,EAAe1B,KAAKgC,EAAMZ,KAC7B0G,EAAG1G,GAAOY,EAAKZ,IAIjB,GAAIqkD,EAAuB,CAC1ByoC,EAAUzoC,EAAsBzjD,GAChC,IAAK,IAAInC,EAAI,EAAGA,EAAIquF,EAAQ3gF,OAAQ1N,IAC/B8tF,EAAiB3tF,KAAKgC,EAAMksF,EAAQruF,MACvCiI,EAAGomF,EAAQruF,IAAMmC,EAAKksF,EAAQruF,MAMlC,OAAOiI,I,gBCxFR,MAAMuxB,EAAI,EAAQ,IAAgBN,aAClCn5B,EAAOD,QAAU,CACfunC,KAAM7N,EAAE,EAAQ,Q,8BCFlB,YAEA,MAAM/H,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACfilE,EAAM,EAAQ,IACdnmB,EAAQ,EAAQ,IAChBz2B,EAAa,EAAQ,IAAkBA,WA+C7C3xC,EAAOD,QA7CP,SAAeywC,EAAKoqB,EAAM5tD,EAASuhB,GACV,mBAAZvhB,GAA2BuhB,GAGR,mBAAZvhB,GAA0BA,aAAmBimC,UAC7DjmC,EAAU,CAACa,OAAQb,KAHnBuhB,EAAWvhB,EACXA,EAAU,IAIZuhB,EAAWA,GAAY,cACvBvhB,EAAUA,GAAW,IAGT05D,oBAAuC,SAAjBt1D,EAAQmoC,MACxCtqB,QAAQY,KAAK,wJAKf,MAAMu2C,EAAWh1D,EAAQuN,MAGzB,GAFoB2K,EAAKH,QAAQi9C,EAAU51B,KACxBlnB,EAAKH,QAAQi9C,EAAUxL,GACV,OAAOrsC,EAAS,IAAIprB,MAAM,iDAE1DuuB,EAAGu1C,MAAMz2B,EAAK,CAACze,EAAKm1C,KAClB,GAAIn1C,EAAK,OAAOxD,EAASwD,GAEzB,IAAIlE,EAAM,KACV,GAAIq5C,EAAMG,cAAe,CACvB,MAAMx7D,EAAQ+uD,EAAKnxC,MAAMH,EAAKvd,KAC9BF,EAAMpH,MACNopB,EAAMhiB,EAAM6d,KAAKJ,EAAKvd,UAEtB8hB,EAAMvE,EAAKqB,QAAQiwC,GAGrBjpB,EAAW9jB,EAAK,CAACkE,EAAKy8D,IAChBz8D,EAAYxD,EAASwD,GACrBy8D,EAAkBD,EAAI/9C,EAAKoqB,EAAM5tD,EAASuhB,QAC9C65C,EAAM5uC,OAAO3L,EAAKkE,IAChB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBw8D,EAAI/9C,EAAKoqB,EAAM5tD,EAASuhB,W,8CC7ChC,MAAMmD,EAAK,EAAQ,GACbk3D,EAAK,EAAQ,IACbt/D,EAAO,EAAQ,GA8DrBtpB,EAAOD,QAAU,CACf0uF,aA/CF,SAAuBlgE,GACrB,IAAImgE,EAAUplE,EAAKI,KAAK,cAAgB6X,KAAKC,MAAMh0B,WAAa6c,KAAKikD,SAAS9gE,WAAWwc,MAAM,IAC/F0kE,EAAUplE,EAAKI,KAAKk/D,EAAGpvC,SAAUk1C,GAGjC,MAAMnuF,EAAI,IAAIghC,KAAK,eACnB7P,EAAGqB,UAAU27D,EAAS,yDAA0D38D,IAC9E,GAAIA,EAAK,OAAOxD,EAASwD,GACzBL,EAAGkC,KAAK86D,EAAS,KAAM,CAAC38D,EAAKF,KAC3B,GAAIE,EAAK,OAAOxD,EAASwD,GACzBL,EAAGm5D,QAAQh5D,EAAItxB,EAAGA,EAAGwxB,IACnB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBL,EAAGC,MAAME,EAAIE,IACX,GAAIA,EAAK,OAAOxD,EAASwD,GACzBL,EAAGs1C,KAAK0nB,EAAS,CAAC38D,EAAKm1C,KACrB,GAAIn1C,EAAK,OAAOxD,EAASwD,GACzBxD,EAAS,KAAM24C,EAAMC,MAAQ,yBAgCvCwnB,iBA7DF,WACE,IAAID,EAAUplE,EAAKI,KAAK,mBAAqB6X,KAAKC,MAAMh0B,WAAa6c,KAAKikD,SAAS9gE,WAAWwc,MAAM,IACpG0kE,EAAUplE,EAAKI,KAAKk/D,EAAGpvC,SAAUk1C,GAGjC,MAAMnuF,EAAI,IAAIghC,KAAK,eACnB7P,EAAGg8B,cAAcghC,EAAS,0DAC1B,MAAM78D,EAAKH,EAAG44D,SAASoE,EAAS,MAGhC,OAFAh9D,EAAGs5D,YAAYn5D,EAAItxB,EAAGA,GACtBmxB,EAAGO,UAAUJ,GACNH,EAAGu6D,SAASyC,GAASvnB,MAAQ,cAoDpCynB,iBAzBF,SAA2BprD,GACzB,GAAyB,iBAAdA,EACT,OAAsC,IAA/BnZ,KAAK0kB,MAAMvL,EAAY,KACzB,GAAIA,aAAqBjC,KAC9B,OAAO,IAAIA,KAA8C,IAAzClX,KAAK0kB,MAAMvL,EAAUygC,UAAY,MAEjD,MAAM,IAAI9gE,MAAM,wDAoBlBwlE,aAhBF,SAAuBr/C,EAAM89C,EAAOD,EAAO54C,GAEzCmD,EAAGkC,KAAKtK,EAAM,KAAM,CAACyI,EAAKF,KACxB,GAAIE,EAAK,OAAOxD,EAASwD,GACzBL,EAAGm5D,QAAQh5D,EAAIu1C,EAAOD,EAAO0nB,IAC3Bn9D,EAAGC,MAAME,EAAIi9D,IACPvgE,GAAUA,EAASsgE,GAAcC,Y,8BC5D7C,YAEA,MAAMp9D,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACf4/C,EAAmB,EAAQ,IAAWA,iBAEtC6lB,EAAOxlD,SAAS,OAAQ,GAwD9BvpC,EAAOD,QAtDP,SAASy5B,EAAQz3B,EAAGo9D,EAAM5wC,EAAUygE,GAQlC,GAPoB,mBAAT7vB,GACT5wC,EAAW4wC,EACXA,EAAO,IACGA,GAAwB,iBAATA,IACzBA,EAAO,CAAE/9D,KAAM+9D,IAGQ,UAArB/tD,EAAQgkB,UAAwB8zC,EAAiBnnE,GAAI,CACvD,MAAMktF,EAAW,IAAI9rF,MAAMpB,EAAI,4CAE/B,OADAktF,EAAS/+E,KAAO,SACTqe,EAAS0gE,GAGlB,IAAI7tF,EAAO+9D,EAAK/9D,KAChB,MAAM8tF,EAAM/vB,EAAKztC,IAAMA,OAEVlvB,IAATpB,IACFA,EAAO2tF,GAAS39E,EAAQ0c,SAErBkhE,IAAMA,EAAO,MAElBzgE,EAAWA,GAAY,aACvBxsB,EAAIunB,EAAKH,QAAQpnB,GAEjBmtF,EAAI9mB,MAAMrmE,EAAGX,EAAM0mD,IACjB,IAAKA,EAEH,OAAOv5B,EAAS,KADhBygE,EAAOA,GAAQjtF,GAGjB,OAAQ+lD,EAAG53C,MACT,IAAK,SACH,GAAIoZ,EAAKqB,QAAQ5oB,KAAOA,EAAG,OAAOwsB,EAASu5B,GAC3CtuB,EAAOlQ,EAAKqB,QAAQ5oB,GAAIo9D,EAAM,CAACrX,EAAIknC,KAC7BlnC,EAAIv5B,EAASu5B,EAAIknC,GAChBx1D,EAAOz3B,EAAGo9D,EAAM5wC,EAAUygE,KAEjC,MAKF,QACEE,EAAIloB,KAAKjlE,EAAG,CAAC+oF,EAAK9jB,KAGZ8jB,IAAQ9jB,EAAKK,cAAe94C,EAASu5B,EAAIknC,GACxCzgE,EAAS,KAAMygE,W,+CCvD9B,YAEA,MAAMt9D,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACf4/C,EAAmB,EAAQ,IAAWA,iBAEtC6lB,EAAOxlD,SAAS,OAAQ,GAoD9BvpC,EAAOD,QAlDP,SAAS25B,EAAY33B,EAAGo9D,EAAM6vB,GACvB7vB,GAAwB,iBAATA,IAClBA,EAAO,CAAE/9D,KAAM+9D,IAGjB,IAAI/9D,EAAO+9D,EAAK/9D,KAChB,MAAM8tF,EAAM/vB,EAAKztC,IAAMA,EAEvB,GAAyB,UAArBtgB,EAAQgkB,UAAwB8zC,EAAiBnnE,GAAI,CACvD,MAAMktF,EAAW,IAAI9rF,MAAMpB,EAAI,4CAE/B,MADAktF,EAAS/+E,KAAO,SACV++E,OAGKzsF,IAATpB,IACFA,EAAO2tF,GAAS39E,EAAQ0c,SAErBkhE,IAAMA,EAAO,MAElBjtF,EAAIunB,EAAKH,QAAQpnB,GAEjB,IACEmtF,EAAIC,UAAUptF,EAAGX,GACjB4tF,EAAOA,GAAQjtF,EACf,MAAOqtF,GACP,OAAQA,EAAKl/E,MACX,IAAK,SACH,GAAIoZ,EAAKqB,QAAQ5oB,KAAOA,EAAG,MAAMqtF,EACjCJ,EAAOt1D,EAAWpQ,EAAKqB,QAAQ5oB,GAAIo9D,EAAM6vB,GACzCt1D,EAAW33B,EAAGo9D,EAAM6vB,GACpB,MAKF,QACE,IAAIhoB,EACJ,IACEA,EAAOkoB,EAAIjD,SAASlqF,GACpB,MAAOstF,GACP,MAAMD,EAER,IAAKpoB,EAAKK,cAAe,MAAM+nB,GAKrC,OAAOJ,K,+CCvDT,YAEA,MAAMt9D,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACfgmE,EAAe,EAAQ,KACvBlnB,EAAQ,EAAQ,IAwDtBpoE,EAAOD,QAtDP,SAASopE,EAAU34B,EAAKoqB,EAAM5tD,IACL,mBAAZA,GAA0BA,aAAmBimC,UACtDjmC,EAAU,CAACa,OAAQb,KAGrBA,EAAUA,GAAW,IACbiyC,YAAcjyC,EAAQiyC,UAG9BjyC,EAAQu5D,UAAU,YAAav5D,MAAYA,EAAQu5D,QAEnDv5D,EAAQomC,UAAY,cAAepmC,IAAYA,EAAQomC,UAAYpmC,EAAQu5D,QAC3Ev5D,EAAQy5D,YAAc,gBAAiBz5D,KAAYA,EAAQy5D,YAC3Dz5D,EAAQ05D,mBAAqB,uBAAwB15D,KAAYA,EAAQ05D,mBAEzE15D,EAAQa,OAASb,EAAQa,QAAU,WAAc,OAAO,GAGpDb,EAAQ05D,oBAAuC,SAAjBt1D,EAAQmoC,MACxCtqB,QAAQY,KAAK,wJAIf,MAAMq3C,EAASl6D,EAAQiyC,YAAcjyC,EAAQy5D,YAAe/0C,EAAG06D,UAAU57C,GAAO9e,EAAGu6D,SAASz7C,GACtF++C,EAAajmE,EAAKqB,QAAQiwC,GAC1B40B,EAAmB99D,EAAGqgB,WAAWw9C,GACvC,IAAIE,GAAc,EAOlB,GALIziF,EAAQa,kBAAkBolC,QAC5BhkB,QAAQY,KAAK,4EACb4/D,EAAcziF,EAAQa,OAAOyjB,KAAKkf,IACC,mBAAnBxjC,EAAQa,SAAuB4hF,EAAcziF,EAAQa,OAAO2iC,EAAKoqB,IAE/EsM,EAAMI,UAAYmoB,EACfD,GAAkBpnB,EAAM1uC,WAAW61D,GACxCD,EAAa9+C,EAAKoqB,EAAM,CACtBxnB,UAAWpmC,EAAQomC,UACnBozB,aAAcx5D,EAAQw5D,aACtBE,mBAAoB15D,EAAQ05D,0BAEzB,GAAIQ,EAAMG,eAAiBooB,EAAa,CACxC/9D,EAAGqgB,WAAW6oB,IAAOwN,EAAM1uC,WAAWkhC,GAC1BlpC,EAAGg+D,YAAYl/C,GACvBniC,QAAQmzC,IACf,MAAM2d,EAAOnyD,EACbmyD,EAAKlgB,WAAY,EACjBkqB,EAAS7/C,EAAKI,KAAK8mB,EAAKgR,GAAUl4B,EAAKI,KAAKkxC,EAAMpZ,GAAU2d,UAEzD,GAAInyD,EAAQiyC,WAAaioB,EAAMW,kBAAoB4nB,EAAa,CACrE,MAAME,EAAUj+D,EAAGk+D,aAAap/C,GAChC9e,EAAGm+D,YAAYF,EAAS/0B,O,8CCvD5B,MAAMlpC,EAAK,EAAQ,GAGbo+D,EAAQ,EAAQ,GAAR,CADK,OAoCnB9vF,EAAOD,QAjCP,SAAuBgwF,EAASC,EAAUhjF,GACxC,MAAMomC,EAAYpmC,EAAQomC,UACpBozB,EAAex5D,EAAQw5D,aACvBE,EAAqB15D,EAAQ05D,mBAEnC,GAAIh1C,EAAGqgB,WAAWi+C,GAAW,CAC3B,IAAI58C,EAEG,IAAIozB,EACT,MAAM,IAAIrjE,MAAM,GAAG6sF,oBACd,OAHLt+D,EAAGu+D,WAAWD,GAMlB,MAAME,EAAMx+D,EAAG44D,SAASyF,EAAS,KAC3B/oB,EAAOt1C,EAAGy6D,UAAU+D,GACpBC,EAAMz+D,EAAG44D,SAAS0F,EAAU,IAAKhpB,EAAK5lE,MAC5C,IAAIi2D,EAAY,EACZl/B,EAAM,EAEV,KAAOk/B,EAAY,GACjBA,EAAY3lC,EAAGw7D,SAASgD,EAAKJ,EAAO,EAvBrB,MAuBoC33D,GACnDzG,EAAG0+D,UAAUD,EAAKL,EAAO,EAAGz4B,GAC5Bl/B,GAAOk/B,EAGLqP,GACFh1C,EAAGs5D,YAAYmF,EAAKnpB,EAAKI,MAAOJ,EAAKG,OAGvCz1C,EAAGO,UAAUi+D,GACbx+D,EAAGO,UAAUk+D,K,8BCrCf,YAEA,MAAMz+D,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACf65C,EAAS,EAAQ,IAEjBruC,EAAkC,UAArB1jB,EAAQgkB,SAE3B,SAASi7D,EAAUrjF,GACD,CACd,SACA,QACA,OACA,QACA,QACA,WAEMqB,QAAQhO,IACd2M,EAAQ3M,GAAK2M,EAAQ3M,IAAMqxB,EAAGrxB,GAE9B2M,EADA3M,GAAQ,QACK2M,EAAQ3M,IAAMqxB,EAAGrxB,KAGhC2M,EAAQsjF,aAAetjF,EAAQsjF,cAAgB,EAGjD,SAASv2C,EAAQh4C,EAAGiL,EAAS8kB,GAC3B,IAAIy+D,EAAY,EAEO,mBAAZvjF,IACT8kB,EAAK9kB,EACLA,EAAU,IAGZm2D,EAAOphE,EAAG,wBACVohE,EAAOhxC,aAAapwB,EAAG,SAAU,mCACjCohE,EAAOhxC,aAAaL,EAAI,WAAY,sCACpCqxC,EAAOn2D,EAAS,6CAChBm2D,EAAOhxC,aAAanlB,EAAS,SAAU,oCAEvCqjF,EAASrjF,GAETwjF,EAAQzuF,EAAGiL,GAAS,SAASy/E,EAAI3kC,GAC/B,GAAIA,EAAI,CACN,IAAiB,UAAZA,EAAG53C,MAAgC,cAAZ43C,EAAG53C,MAAoC,UAAZ43C,EAAG53C,OACtDqgF,EAAYvjF,EAAQsjF,aAAc,CAIpC,OAHAC,IAGO1kE,WAAW,IAAM2kE,EAAQzuF,EAAGiL,EAASy/E,GAFrB,IAAZ8D,GAMG,WAAZzoC,EAAG53C,OAAmB43C,EAAK,MAGjCh2B,EAAGg2B,MAeP,SAAS0oC,EAASzuF,EAAGiL,EAAS8kB,GAC5BqxC,EAAOphE,GACPohE,EAAOn2D,GACPm2D,EAAqB,mBAAPrxC,GAId9kB,EAAQi6D,MAAMllE,EAAG,CAAC+lD,EAAI6kC,IAChB7kC,GAAkB,WAAZA,EAAG53C,KACJ4hB,EAAG,MAIRg2B,GAAkB,UAAZA,EAAG53C,MAAoB4kB,EACxB27D,EAAY1uF,EAAGiL,EAAS86C,EAAIh2B,GAGjC66D,GAAMA,EAAGtlB,cACJqpB,EAAM3uF,EAAGiL,EAAS86C,EAAIh2B,QAG/B9kB,EAAQ47D,OAAO7mE,EAAG+lD,IAChB,GAAIA,EAAI,CACN,GAAgB,WAAZA,EAAG53C,KACL,OAAO4hB,EAAG,MAEZ,GAAgB,UAAZg2B,EAAG53C,KACL,OAAO,EACHugF,EAAY1uF,EAAGiL,EAAS86C,EAAIh2B,GAC5B4+D,EAAM3uF,EAAGiL,EAAS86C,EAAIh2B,GAE5B,GAAgB,WAAZg2B,EAAG53C,KACL,OAAOwgF,EAAM3uF,EAAGiL,EAAS86C,EAAIh2B,GAGjC,OAAOA,EAAGg2B,MAKhB,SAAS2oC,EAAa1uF,EAAGiL,EAAS86C,EAAIh2B,GACpCqxC,EAAOphE,GACPohE,EAAOn2D,GACPm2D,EAAqB,mBAAPrxC,GACVg2B,GACFqb,EAAOrb,aAAc3kD,OAGvB6J,EAAQq7D,MAAMtmE,EAAG,IAAO+oF,IAClBA,EACFh5D,EAAgB,WAAbg5D,EAAI56E,KAAoB,KAAO43C,GAElC96C,EAAQg6D,KAAKjlE,EAAG,CAAC4uF,EAAKzpB,KAChBypB,EACF7+D,EAAgB,WAAb6+D,EAAIzgF,KAAoB,KAAO43C,GACzBof,EAAMG,cACfqpB,EAAM3uF,EAAGiL,EAAS86C,EAAIh2B,GAEtB9kB,EAAQ47D,OAAO7mE,EAAG+vB,OAO5B,SAAS8+D,EAAiB7uF,EAAGiL,EAAS86C,GACpC,IAAIof,EAEJ/D,EAAOphE,GACPohE,EAAOn2D,GACH86C,GACFqb,EAAOrb,aAAc3kD,OAGvB,IACE6J,EAAQ6+E,UAAU9pF,EAAG,KACrB,MAAO+oF,GACP,GAAiB,WAAbA,EAAI56E,KACN,OAEA,MAAM43C,EAIV,IACEof,EAAQl6D,EAAQi/E,SAASlqF,GACzB,MAAO4uF,GACP,GAAiB,WAAbA,EAAIzgF,KACN,OAEA,MAAM43C,EAINof,EAAMG,cACRwpB,EAAU9uF,EAAGiL,EAAS86C,GAEtB96C,EAAQijF,WAAWluF,GAIvB,SAAS2uF,EAAO3uF,EAAGiL,EAAS8jF,EAAYh/D,GACtCqxC,EAAOphE,GACPohE,EAAOn2D,GACH8jF,GACF3tB,EAAO2tB,aAAsB3tF,OAE/BggE,EAAqB,mBAAPrxC,GAKd9kB,EAAQ0jF,MAAM3uF,EAAG+lD,KACXA,GAAmB,cAAZA,EAAG53C,MAAoC,WAAZ43C,EAAG53C,MAAiC,UAAZ43C,EAAG53C,KAEtD43C,GAAkB,YAAZA,EAAG53C,KAClB4hB,EAAGg/D,GAEHh/D,EAAGg2B,GAKT,SAAiB/lD,EAAGiL,EAAS8kB,GAC3BqxC,EAAOphE,GACPohE,EAAOn2D,GACPm2D,EAAqB,mBAAPrxC,GAEd9kB,EAAQsmB,QAAQvxB,EAAG,CAAC+lD,EAAIt0B,KACtB,GAAIs0B,EAAI,OAAOh2B,EAAGg2B,GAElB,IACIipC,EADArvF,EAAI8xB,EAAM7lB,OAGd,GAAU,IAANjM,EAAS,OAAOsL,EAAQ0jF,MAAM3uF,EAAG+vB,GAErC0B,EAAMnlB,QAAQ6a,IACZ6wB,EAAOzwB,EAAKI,KAAK3nB,EAAGmnB,GAAIlc,EAAS86C,IAC/B,IAAIipC,EAGJ,OAAIjpC,EAAWh2B,EAAGi/D,EAAWjpC,QACjB,KAANpmD,GACJsL,EAAQ0jF,MAAM3uF,EAAG+vB,UA7BrBk/D,CAAOjvF,EAAGiL,EAAS8kB,KAuCzB,SAASm/D,EAAYlvF,EAAGiL,GACtB,IAAI2/E,EAGJ0D,EADArjF,EAAUA,GAAW,IAGrBm2D,EAAOphE,EAAG,wBACVohE,EAAOhxC,aAAapwB,EAAG,SAAU,mCACjCohE,EAAOn2D,EAAS,2BAChBm2D,EAAOhxC,aAAanlB,EAAS,SAAU,oCAEvC,IACE2/E,EAAK3/E,EAAQo/E,UAAUrqF,GACvB,MAAO+lD,GACP,GAAgB,WAAZA,EAAG53C,KACL,OAIc,UAAZ43C,EAAG53C,MAAoB4kB,GACzB87D,EAAgB7uF,EAAGiL,EAAS86C,GAIhC,IAEM6kC,GAAMA,EAAGtlB,cACXwpB,EAAU9uF,EAAGiL,EAAS,MAEtBA,EAAQijF,WAAWluF,GAErB,MAAO+lD,GACP,GAAgB,WAAZA,EAAG53C,KACL,OACK,GAAgB,UAAZ43C,EAAG53C,KACZ,OAAO4kB,EAAY87D,EAAgB7uF,EAAGiL,EAAS86C,GAAM+oC,EAAU9uF,EAAGiL,EAAS86C,GACtE,GAAgB,WAAZA,EAAG53C,KACZ,MAAM43C,EAER+oC,EAAU9uF,EAAGiL,EAAS86C,IAI1B,SAAS+oC,EAAW9uF,EAAGiL,EAAS8jF,GAC9B3tB,EAAOphE,GACPohE,EAAOn2D,GACH8jF,GACF3tB,EAAO2tB,aAAsB3tF,OAG/B,IACE6J,EAAQ6jF,UAAU9uF,GAClB,MAAO+lD,GACP,GAAgB,YAAZA,EAAG53C,KACL,MAAM4gF,EACD,GAAgB,cAAZhpC,EAAG53C,MAAoC,WAAZ43C,EAAG53C,MAAiC,UAAZ43C,EAAG53C,MAQrE,SAAqBnO,EAAGiL,GACtBm2D,EAAOphE,GACPohE,EAAOn2D,GACPA,EAAQ0iF,YAAY3tF,GAAGsM,QAAQ6a,GAAK+nE,EAAW3nE,EAAKI,KAAK3nB,EAAGmnB,GAAIlc,IAQhE,MAAMkkF,EAAUp8D,EAAY,IAAM,EAClC,IAAI70B,EAAI,EACR,OAAG,CACD,IAAIsqF,GAAQ,EACZ,IACE,MAAMrhF,EAAM8D,EAAQ6jF,UAAU9uF,EAAGiL,GAEjC,OADAu9E,GAAQ,EACDrhF,EACP,QACA,KAAMjJ,EAAIixF,GAAW3G,EAAO,WA3B5B4G,CAAWpvF,EAAGiL,QACT,GAAgB,WAAZ86C,EAAG53C,KACZ,MAAM43C,GA8BZ9nD,EAAOD,QAAUg6C,EACjBA,EAAOE,KAAOg3C,I,8CCvTd,MAAMx3D,EAAI,EAAQ,IAAgBN,aAC5Bi0B,EAAW,EAAQ,IAEzBA,EAASgkC,WAAa33D,EAAE,EAAQ,MAChC2zB,EAASikC,eAAiB,EAAQ,KAElCjkC,EAASkkC,WAAalkC,EAASgkC,WAC/BhkC,EAASmkC,eAAiBnkC,EAASikC,eACnCjkC,EAASokC,UAAYpkC,EAASI,UAC9BJ,EAASqkC,cAAgBrkC,EAASK,cAClCL,EAASskC,SAAWtkC,EAASC,SAC7BD,EAASukC,aAAevkC,EAASE,aAEjCttD,EAAOD,QAAUqtD,G,iBCfjB,kBACA,IACEwkC,EAAM,EAAQ,GACd,MAAOt+C,GACPs+C,EAAM,EAAQ,IAqEhB,SAAS1wD,EAAWiG,EAAKn6B,GACvB,IAAI6kF,EACAn4C,EAAM,KAYV,MAXuB,iBAAZ1sC,GAAoC,OAAZA,IAC7BA,EAAQ6kF,SACVA,EAAS7kF,EAAQ6kF,QAEf7kF,EAAQ0sC,MACVA,EAAM1sC,EAAQ0sC,MAIRlc,KAAK0D,UAAUiG,EAAKn6B,EAAUA,EAAQilD,SAAW,KAAM4/B,GAEtDnrF,QAAQ,MAAOgzC,GAAOA,EAgCnC,SAASo4C,EAAUtwC,GAIjB,OAFIpb,EAAOgB,SAASoa,KAAUA,EAAUA,EAAQh0C,SAAS,SACzDg0C,EAAUA,EAAQ96C,QAAQ,UAAW,IAIvC,IAAIqrF,EAAW,CACbp/D,SAxHF,SAAmB1T,EAAMjS,EAASuhB,GAChB,MAAZA,IACFA,EAAWvhB,EACXA,EAAU,IAGW,iBAAZA,IACTA,EAAU,CAACg6B,SAAUh6B,IAIvB,IAAI0kB,GADJ1kB,EAAUA,GAAW,IACJ0kB,IAAMkgE,EAEnB5sB,GAAc,EACd,WAAYh4D,IACdg4D,EAAch4D,EAAQg5D,QAGxBt0C,EAAGiB,SAAS1T,EAAMjS,GAAS,SAAU+kB,EAAKiB,GACxC,GAAIjB,EAAK,OAAOxD,EAASwD,GAIzB,IAAIoV,EAFJnU,EAAO8+D,EAAS9+D,GAGhB,IACEmU,EAAM3J,KAAKpY,MAAM4N,EAAMhmB,EAAUA,EAAQqjD,QAAU,MACnD,MAAOoO,GACP,OAAIuG,GACFvG,EAAK30D,QAAUmV,EAAO,KAAOw/C,EAAK30D,QAC3BykB,EAASkwC,IAETlwC,EAAS,KAAM,MAI1BA,EAAS,KAAM4Y,OAsFjBomB,aAlFF,SAAuBtuC,EAAMjS,GAEJ,iBADvBA,EAAUA,GAAW,MAEnBA,EAAU,CAACg6B,SAAUh6B,IAGvB,IAAI0kB,EAAK1kB,EAAQ0kB,IAAMkgE,EAEnB5sB,GAAc,EACd,WAAYh4D,IACdg4D,EAAch4D,EAAQg5D,QAGxB,IACE,IAAIxkB,EAAU9vB,EAAG67B,aAAatuC,EAAMjS,GAEpC,OADAw0C,EAAUswC,EAAStwC,GACZhkB,KAAKpY,MAAMo8B,EAASx0C,EAAQqjD,SACnC,MAAOt+B,GACP,GAAIizC,EAEF,MADAjzC,EAAIjoB,QAAUmV,EAAO,KAAO8S,EAAIjoB,QAC1BioB,EAEN,OAAO,OA6DXgB,UAvCF,SAAoB9T,EAAMkoB,EAAKn6B,EAASuhB,GACtB,MAAZA,IACFA,EAAWvhB,EACXA,EAAU,IAGZ,IAAI0kB,GADJ1kB,EAAUA,GAAW,IACJ0kB,IAAMkgE,EAEnBvmE,EAAM,GACV,IACEA,EAAM6V,EAAUiG,EAAKn6B,GACrB,MAAO+kB,GAGP,YADIxD,GAAUA,EAASwD,EAAK,OAI9BL,EAAGqB,UAAU9T,EAAMoM,EAAKre,EAASuhB,IAuBjCm/B,cApBF,SAAwBzuC,EAAMkoB,EAAKn6B,GAEjC,IAAI0kB,GADJ1kB,EAAUA,GAAW,IACJ0kB,IAAMkgE,EAEnBvmE,EAAM6V,EAAUiG,EAAKn6B,GAEzB,OAAO0kB,EAAGg8B,cAAczuC,EAAMoM,EAAKre,KAiBrChN,EAAOD,QAAUgyF,I,sDCnIjB,MAAMzoE,EAAO,EAAQ,GACf8+C,EAAQ,EAAQ,IAChBz2B,EAAa,EAAQ,IAAkBA,WACvCyb,EAAW,EAAQ,IAqBzBptD,EAAOD,QAnBP,SAAqBkf,EAAM+T,EAAMhmB,EAASuhB,GACjB,mBAAZvhB,IACTuhB,EAAWvhB,EACXA,EAAU,IAGZ,MAAM6gB,EAAMvE,EAAKqB,QAAQ1L,GAEzB0yB,EAAW9jB,EAAK,CAACkE,EAAKigE,IAChBjgE,EAAYxD,EAASwD,GACrBigE,EAAe5kC,EAASI,UAAUvuC,EAAM+T,EAAMhmB,EAASuhB,QAE3D65C,EAAM5uC,OAAO3L,EAAKkE,IAChB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBq7B,EAASI,UAAUvuC,EAAM+T,EAAMhmB,EAASuhB,Q,6BCnB9C,MAAMmD,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACf8+C,EAAQ,EAAQ,IAChBhb,EAAW,EAAQ,IAYzBptD,EAAOD,QAVP,SAAyBkf,EAAM+T,EAAMhmB,GACnC,MAAM6gB,EAAMvE,EAAKqB,QAAQ1L,GAEpByS,EAAGqgB,WAAWlkB,IACjBu6C,EAAM1uC,WAAW7L,GAGnBu/B,EAASK,cAAcxuC,EAAM+T,EAAMhmB,K,6BCNrC,MAAMysB,EAAI,EAAQ,IAAgBN,aAC5BzH,EAAK,EAAQ,GACb68D,EAAM,EAAQ,IACdjlE,EAAO,EAAQ,GACfqF,EAAS,EAAQ,IAAaA,OAC9BgL,EAAS,EAAQ,IAAaH,OAgEpC,SAASy4D,EAAkBzhD,EAAKoqB,EAAMxnB,EAAW7kB,GAC/CmD,EAAGs1C,KAAKx2B,EAAK,CAACze,EAAKi1C,KACjB,GAAIj1C,EAAK,OAAOxD,EAASwD,GAErBi1C,EAAKK,cACP6qB,EAAoB1hD,EAAKoqB,EAAMxnB,EAAW7kB,GAOhD,SAA+BiiB,EAAKoqB,EAAMxnB,EAAW7kB,GACnD,MAAMuF,EAAQsf,EAAY,IAAM,KAC1B++C,EAAMzgE,EAAGY,iBAAiBke,GAC1B4hD,EAAO1gE,EAAGc,kBAAkBooC,EAAM,CAAE9mC,UA8B1C,SAASkP,IACPtR,EAAGk3C,OAAOp4B,EAAKjiB,GA7BjB4jE,EAAIllE,GAAG,QAAS8E,IACdogE,EAAIn+D,UACJo+D,EAAKp+D,UACLo+D,EAAK/kE,eAAe,QAAS2V,GAK7BtR,EAAGk3C,OAAOhO,EAAM,KAEG,WAAb7oC,EAAI7hB,MAAkC,UAAb6hB,EAAI7hB,KAC/BgiF,EAAoB1hD,EAAKoqB,EAAMxnB,EAAW7kB,GAE1CA,EAASwD,OAKfqgE,EAAKnlE,GAAG,QAAS8E,IACfogE,EAAIn+D,UACJo+D,EAAKp+D,UACLo+D,EAAK/kE,eAAe,QAAS2V,GAC7BzU,EAASwD,KAGXqgE,EAAKjlE,KAAK,QAAS6V,GACnBmvD,EAAI7lC,KAAK8lC,GApCLC,CAAqB7hD,EAAKoqB,EAAMxnB,EAAW7kB,KA2CjD,SAAS2jE,EAAqB1hD,EAAKoqB,EAAMxnB,EAAW7kB,GAClD,MAAMvhB,EAAU,CACdomC,WAAW,GAYb,SAASk/C,IACP/D,EAAI/9C,EAAKoqB,EAAM5tD,EAAS+kB,IACtB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBpD,EAAO6hB,EAAKjiB,KAZZ6kB,EACFzkB,EAAOisC,EAAM7oC,IACX,GAAIA,EAAK,OAAOxD,EAASwD,GACzBugE,MAGFA,IA6BJtyF,EAAOD,QAAU,CACfwyF,KAAM94D,GAzJR,SAAS84D,EAAM/hD,EAAKoqB,EAAM5tD,EAASuhB,GACV,mBAAZvhB,IACTuhB,EAAWvhB,EACXA,EAAU,IAGZ,MAAMomC,EAAYpmC,EAAQomC,WAAapmC,EAAQu5D,UAAW,GAkI5D,SAAsB/1B,EAAKoqB,EAAM9oC,GAC/BJ,EAAGs1C,KAAKx2B,EAAK,CAACze,EAAK46D,KACjB,GAAI56D,EAAK,OAAOD,EAAGC,GACnB,GAAI46D,EAAGtlB,cAAe,CACpB,MAAMmrB,EAAU53B,EAAKnxC,MAAMH,EAAKqB,QAAQ6lB,GAAOlnB,EAAKvd,KAAK,GACzD,GAAIymF,EAAS,CACX,MAAMC,EAAeD,EAAQ/oE,MAAMH,EAAKvd,KAAK,GAC7C,OAAyB+lB,EAAG,KAAxB2gE,EAA8BjiD,IAAQoqB,GAAQA,EAAKrlC,QAAQib,IAAQ,GAAKiiD,IAAiBnpE,EAAKyB,SAASylB,IAC3F,GAElB,OAAO1e,EAAG,MAAM,GAElB,OAAOA,EAAG,MAAM,KA5IlB4gE,CAAYliD,EAAKoqB,EAAM,CAAC7oC,EAAK4gE,IACvB5gE,EAAYxD,EAASwD,GACrB4gE,EAAapkE,EAAS,IAAIprB,MAAM,gBAAgBqtC,oCAAsCoqB,aAC1FjhC,EAAOrQ,EAAKqB,QAAQiwC,GAAO7oC,IACzB,GAAIA,EAAK,OAAOxD,EAASwD,GAMvBzI,EAAKH,QAAQqnB,KAASlnB,EAAKH,QAAQyxC,GACrClpC,EAAGkgB,OAAOpB,EAAKjiB,GACN6kB,EACT1hB,EAAG46D,OAAO97C,EAAKoqB,EAAM7oC,IACnB,IAAKA,EAAK,OAAOxD,IAEjB,GAAiB,cAAbwD,EAAI7hB,MAAqC,WAAb6hB,EAAI7hB,KAApC,CAUA,GAAiB,UAAb6hB,EAAI7hB,KAWR,MAAiB,UAAb6hB,EAAI7hB,KAAyBqe,EAASwD,QAC1CkgE,EAAiBzhD,EAAKoqB,EAAMxnB,EAAW7kB,GAXrC1C,WAAW,KACT8C,EAAOisC,EAAM7oC,IACX,GAAIA,EAAK,OAAOxD,EAASwD,GACzB/kB,EAAQomC,WAAY,EACpBm/C,EAAK/hD,EAAKoqB,EAAM5tD,EAASuhB,MAE1B,UAhBHI,EAAOisC,EAAM7oC,IACX,GAAIA,EAAK,OAAOxD,EAASwD,GACzB/kB,EAAQomC,WAAY,EACpBm/C,EAAK/hD,EAAKoqB,EAAM5tD,EAASuhB,OAqB/BmD,EAAGo2C,KAAKt3B,EAAKoqB,EAAM7oC,GACbA,EACe,UAAbA,EAAI7hB,MAAiC,WAAb6hB,EAAI7hB,MAAkC,UAAb6hB,EAAI7hB,MAAiC,YAAb6hB,EAAI7hB,KACxE+hF,EAAiBzhD,EAAKoqB,EAAMxnB,EAAW7kB,GAEzCA,EAASwD,GAEXL,EAAGk3C,OAAOp4B,EAAKjiB,Y,6BCrE9B,MAAMmD,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACf6/C,EAAW,EAAQ,IAAgBA,SACnCnvB,EAAa,EAAQ,IAAaA,WAClCpgB,EAAa,EAAQ,IAAaF,WAClC6N,EAAS,EAAQ,IA4CvB,SAASqrD,EAAsBpiD,EAAKoqB,EAAMxnB,GAGxC,OAFa1hB,EAAGu6D,SAASz7C,GAEhB62B,cA8BX,SAAkC72B,EAAKoqB,EAAMxnB,GAC3C,MAAMpmC,EAAU,CACdomC,WAAW,GAGTA,GACF4G,EAAW4gB,GACXi4B,KAEAA,IAGF,SAASA,IAEP,OADA1pB,EAAS34B,EAAKoqB,EAAM5tD,GACbgtC,EAAWxJ,IA3CXsiD,CAAwBtiD,EAAKoqB,EAAMxnB,GAM9C,SAAmC5C,EAAKoqB,EAAMxnB,GAC5C,MACM08C,EAAQvoD,EADK,OAGbzT,EAAQsf,EAAY,IAAM,KAE1B88C,EAAMx+D,EAAG44D,SAAS95C,EAAK,KACvBw2B,EAAOt1C,EAAGy6D,UAAU+D,GACpBC,EAAMz+D,EAAG44D,SAAS1vB,EAAM9mC,EAAOkzC,EAAK5lE,MAC1C,IAAIi2D,EAAY,EACZl/B,EAAM,EAEV,KAAOk/B,EAAY,GACjBA,EAAY3lC,EAAGw7D,SAASgD,EAAKJ,EAAO,EAZnB,MAYkC33D,GACnDzG,EAAG0+D,UAAUD,EAAKL,EAAO,EAAGz4B,GAC5Bl/B,GAAOk/B,EAKT,OAFA3lC,EAAGO,UAAUi+D,GACbx+D,EAAGO,UAAUk+D,GACNz+D,EAAGu+D,WAAWz/C,GAxBZuiD,CAAyBviD,EAAKoqB,EAAMxnB,GA0D/CpzC,EAAOD,QAAU,CACfizF,SA3GF,SAASA,EAAUxiD,EAAKoqB,EAAM5tD,GAE5B,MAAMomC,GADNpmC,EAAUA,GAAW,IACKomC,WAAapmC,EAAQu5D,UAAW,EAK1D,GAHA/1B,EAAMlnB,EAAKH,QAAQqnB,GACnBoqB,EAAOtxC,EAAKH,QAAQyxC,GAEhBpqB,IAAQoqB,EAAM,OAAOlpC,EAAGuhE,WAAWziD,GAEvC,GAsFF,SAAsBA,EAAKoqB,GACzB,IACE,OAAOlpC,EAAGu6D,SAASz7C,GAAK62B,eACjB72B,IAAQoqB,GACRA,EAAKrlC,QAAQib,IAAQ,GACrBoqB,EAAKnxC,MAAMH,EAAKqB,QAAQ6lB,GAAOlnB,EAAKvd,KAAK,GAAG0d,MAAMH,EAAKvd,KAAK,KAAOud,EAAKyB,SAASylB,GACxF,MAAO1iC,GACP,OAAO,GA7FL4kF,CAAYliD,EAAKoqB,GAAO,MAAM,IAAIz3D,MAAM,gBAAgBqtC,mBAAqBoqB,OAEjFhhC,EAAWtQ,EAAKqB,QAAQiwC,IAGxB,WACE,GAAIxnB,EACF,IACS1hB,EAAGwhE,WAAW1iD,EAAKoqB,GAC1B,MAAO7oC,GACP,GAAiB,cAAbA,EAAI7hB,MAAqC,WAAb6hB,EAAI7hB,MAAkC,UAAb6hB,EAAI7hB,KAG3D,OAFA8pC,EAAW4gB,GACX5tD,EAAQomC,WAAY,EACb4/C,EAASxiD,EAAKoqB,EAAM5tD,GAG7B,GAAiB,UAAb+kB,EAAI7hB,KAAkB,MAAM6hB,EAChC,OAAO6gE,EAAqBpiD,EAAKoqB,EAAMxnB,QAGzC,IACE1hB,EAAGyhE,SAAS3iD,EAAKoqB,GACVlpC,EAAGu+D,WAAWz/C,GACrB,MAAOze,GACP,GAAiB,UAAbA,EAAI7hB,MAAiC,WAAb6hB,EAAI7hB,MAAkC,UAAb6hB,EAAI7hB,MAAiC,YAAb6hB,EAAI7hB,KAC/E,OAAO0iF,EAAqBpiD,EAAKoqB,EAAMxnB,GAEzC,MAAMrhB,GAxBZqhE,M,6BCnBF,MAAM35D,EAAI,EAAQ,IAAgBN,aAC5BzH,EAAK,EAAQ,IACbpI,EAAO,EAAQ,GACf8+C,EAAQ,EAAQ,IAChBz5C,EAAS,EAAQ,IAEjB0kE,EAAW55D,GAAE,SAAmB5L,EAAKU,GACzCA,EAAWA,GAAY,aACvBmD,EAAG4B,QAAQzF,EAAK,CAACkE,EAAKroB,KACpB,GAAIqoB,EAAK,OAAOq2C,EAAM5uC,OAAO3L,EAAKU,GAElC7kB,EAAQA,EAAMyS,IAAIoB,GAAQ+L,EAAKI,KAAKmE,EAAKtQ,IAIzC,SAAS+1E,IACP,MAAM/1E,EAAO7T,EAAMjF,MACnB,IAAK8Y,EAAM,OAAOgR,IAClBI,EAAOA,OAAOpR,EAAMwU,IAClB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBuhE,MAPJA,QAaJ,SAASC,EAAc1lE,GACrB,IAAInkB,EACJ,IACEA,EAAQgoB,EAAGg+D,YAAY7hE,GACvB,MAAOkE,GACP,OAAOq2C,EAAM1uC,WAAW7L,GAG1BnkB,EAAM2E,QAAQkP,IACZA,EAAO+L,EAAKI,KAAKmE,EAAKtQ,GACtBoR,EAAOqrB,WAAWz8B,KAItBvd,EAAOD,QAAU,CACfwzF,eACAC,aAAcD,EACdF,WACAI,SAAUJ,I,6BC5CZ,MAAMp0E,EAAO,EAAQ,KACf6oD,EAAO,EAAQ,KACfgB,EAAU,EAAQ,KAExB9oE,EAAOD,QAAU,CAEfoN,WAAY8R,EAAK9R,WACjBumF,eAAgBz0E,EAAKy0E,eACrBC,WAAY10E,EAAK9R,WACjBymF,eAAgB30E,EAAKy0E,eAErBG,WAAY/rB,EAAK+rB,WACjBC,eAAgBhsB,EAAKgsB,eACrBC,WAAYjsB,EAAK+rB,WACjBG,eAAgBlsB,EAAKgsB,eAErBG,cAAenrB,EAAQmrB,cACvBC,kBAAmBprB,EAAQorB,kBAC3BC,cAAerrB,EAAQmrB,cACvBG,kBAAmBtrB,EAAQorB,oB,6BCnB7B,MAAMz6D,EAAI,EAAQ,IAAgBN,aAC5B7P,EAAO,EAAQ,GACfoI,EAAK,EAAQ,GACb02C,EAAQ,EAAQ,IAChBz2B,EAAa,EAAQ,IAAkBA,WAuC7C3xC,EAAOD,QAAU,CACfoN,WAAYssB,GAtCd,SAAqBxa,EAAMsP,GACzB,SAAS8lE,IACP3iE,EAAGqB,UAAU9T,EAAM,GAAI8S,IACrB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBxD,MAIJmD,EAAGs1C,KAAK/nD,EAAM,CAAC8S,EAAKm1C,KAClB,IAAKn1C,GAAOm1C,EAAMI,SAAU,OAAO/4C,IACnC,MAAMV,EAAMvE,EAAKqB,QAAQ1L,GACzB0yB,EAAW9jB,EAAK,CAACkE,EAAKy8D,IAChBz8D,EAAYxD,EAASwD,GACrBy8D,EAAkB6F,SACtBjsB,EAAM5uC,OAAO3L,EAAKkE,IAChB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBsiE,YAuBNX,eAjBF,SAAyBz0E,GACvB,IAAIioD,EACJ,IACEA,EAAQx1C,EAAGu6D,SAAShtE,GACpB,MAAOnR,IACT,GAAIo5D,GAASA,EAAMI,SAAU,OAE7B,MAAMz5C,EAAMvE,EAAKqB,QAAQ1L,GACpByS,EAAGqgB,WAAWlkB,IACjBu6C,EAAM1uC,WAAW7L,GAGnB6D,EAAGg8B,cAAczuC,EAAM,O,6BCxCzB,MAAMwa,EAAI,EAAQ,IAAgBN,aAC5B7P,EAAO,EAAQ,GACfoI,EAAK,EAAQ,GACb02C,EAAQ,EAAQ,IAChBz2B,EAAa,EAAQ,IAAkBA,WAmD7C3xC,EAAOD,QAAU,CACf8zF,WAAYp6D,GAlDd,SAAqB66D,EAASC,EAAShmE,GACrC,SAASy5C,EAAUssB,EAASC,GAC1B7iE,EAAGo2C,KAAKwsB,EAASC,EAASxiE,IACxB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBxD,EAAS,QAIbojB,EAAW4iD,EAAS,CAACxiE,EAAKyiE,IACpBziE,EAAYxD,EAASwD,GACrByiE,EAA0BjmE,EAAS,WACvCmD,EAAGu1C,MAAMqtB,EAAS,CAACviE,EAAKi1C,KACtB,GAAIj1C,EAEF,OADAA,EAAIjoB,QAAUioB,EAAIjoB,QAAQpD,QAAQ,QAAS,cACpC6nB,EAASwD,GAGlB,MAAMlE,EAAMvE,EAAKqB,QAAQ4pE,GACzB5iD,EAAW9jB,EAAK,CAACkE,EAAKy8D,IAChBz8D,EAAYxD,EAASwD,GACrBy8D,EAAkBxmB,EAASssB,EAASC,QACxCnsB,EAAM5uC,OAAO3L,EAAKkE,IAChB,GAAIA,EAAK,OAAOxD,EAASwD,GACzBi2C,EAASssB,EAASC,YA4B1BT,eArBF,SAAyBQ,EAASC,EAAShmE,GAEzC,GAD0BmD,EAAGqgB,WAAWwiD,GACjB,OAEvB,IACE7iE,EAAG06D,UAAUkI,GACb,MAAOviE,GAEP,MADAA,EAAIjoB,QAAUioB,EAAIjoB,QAAQpD,QAAQ,QAAS,cACrCqrB,EAGR,MAAMlE,EAAMvE,EAAKqB,QAAQ4pE,GAEzB,OADkB7iE,EAAGqgB,WAAWlkB,GACV6D,EAAGyhE,SAASmB,EAASC,IAC3CnsB,EAAM1uC,WAAW7L,GAEV6D,EAAGyhE,SAASmB,EAASC,O,6BCpD9B,MAAM96D,EAAI,EAAQ,IAAgBN,aAC5B7P,EAAO,EAAQ,GACfoI,EAAK,EAAQ,GACb+iE,EAAU,EAAQ,IAClBj7D,EAASi7D,EAAQj7D,OACjBE,EAAa+6D,EAAQ/6D,WAErBg7D,EAAgB,EAAQ,KACxBC,EAAeD,EAAcC,aAC7BC,EAAmBF,EAAcE,iBAEjCC,EAAe,EAAQ,KACvBC,EAAcD,EAAaC,YAC3BC,EAAkBF,EAAaE,gBAE/BpjD,EAAa,EAAQ,IAAkBA,WA6C7C3xC,EAAOD,QAAU,CACfk0F,cAAex6D,GA5CjB,SAAwB66D,EAASC,EAASjgF,EAAMia,GAC9CA,EAA4B,mBAATja,EAAuBA,EAAOia,EACjDja,EAAwB,mBAATA,GAA+BA,EAE9Cq9B,EAAW4iD,EAAS,CAACxiE,EAAKyiE,IACpBziE,EAAYxD,EAASwD,GACrByiE,EAA0BjmE,EAAS,WACvComE,EAAaL,EAASC,EAAS,CAACxiE,EAAK5pB,KACnC,GAAI4pB,EAAK,OAAOxD,EAASwD,GACzBuiE,EAAUnsF,EAAS6sF,MACnBF,EAAY3sF,EAAS8sF,MAAO3gF,EAAM,CAACyd,EAAKzd,KACtC,GAAIyd,EAAK,OAAOxD,EAASwD,GACzB,MAAMlE,EAAMvE,EAAKqB,QAAQ4pE,GACzB5iD,EAAW9jB,EAAK,CAACkE,EAAKy8D,IAChBz8D,EAAYxD,EAASwD,GACrBy8D,EAAkB98D,EAAGo3C,QAAQwrB,EAASC,EAASjgF,EAAMia,QACzDiL,EAAO3L,EAAKkE,IACV,GAAIA,EAAK,OAAOxD,EAASwD,GACzBL,EAAGo3C,QAAQwrB,EAASC,EAASjgF,EAAMia,cA2B7C2lE,kBAnBF,SAA4BI,EAASC,EAASjgF,EAAMia,GAKlD,GAJAA,EAA4B,mBAATja,EAAuBA,EAAOia,EACjDja,EAAwB,mBAATA,GAA+BA,EAEpBod,EAAGqgB,WAAWwiD,GACjB,OAEvB,MAAMpsF,EAAWysF,EAAiBN,EAASC,GAC3CD,EAAUnsF,EAAS6sF,MACnB1gF,EAAOygF,EAAgB5sF,EAAS8sF,MAAO3gF,GACvC,MAAMuZ,EAAMvE,EAAKqB,QAAQ4pE,GAEzB,OADe7iE,EAAGqgB,WAAWlkB,GACV6D,EAAGm+D,YAAYyE,EAASC,EAASjgF,IACpDolB,EAAW7L,GACJ6D,EAAGm+D,YAAYyE,EAASC,EAASjgF,O,6BCzD1C,MAAMgV,EAAO,EAAQ,GACfoI,EAAK,EAAQ,GACbigB,EAAa,EAAQ,IAAkBA,WA2F7C3xC,EAAOD,QAAU,CACf40F,aApEF,SAAuBL,EAASC,EAAShmE,GACvC,GAAIjF,EAAKM,WAAW0qE,GAClB,OAAO5iE,EAAGu1C,MAAMqtB,EAAS,CAACviE,EAAKi1C,IACzBj1C,GACFA,EAAIjoB,QAAUioB,EAAIjoB,QAAQpD,QAAQ,QAAS,iBACpC6nB,EAASwD,IAEXxD,EAAS,KAAM,CACpB,MAAS+lE,EACT,MAASA,KAGR,CACL,MAAMY,EAAS5rE,EAAKqB,QAAQ4pE,GACtBY,EAAgB7rE,EAAKI,KAAKwrE,EAAQZ,GACxC,OAAO3iD,EAAWwjD,EAAe,CAACpjE,EAAKolC,IACjCplC,EAAYxD,EAASwD,GACrBolC,EACK5oC,EAAS,KAAM,CACpB,MAAS4mE,EACT,MAASb,IAGJ5iE,EAAGu1C,MAAMqtB,EAAS,CAACviE,EAAKi1C,IACzBj1C,GACFA,EAAIjoB,QAAUioB,EAAIjoB,QAAQpD,QAAQ,QAAS,iBACpC6nB,EAASwD,IAEXxD,EAAS,KAAM,CACpB,MAAS+lE,EACT,MAAShrE,EAAKnhB,SAAS+sF,EAAQZ,SAuCzCM,iBA/BF,SAA2BN,EAASC,GAClC,IAAIp9B,EACJ,GAAI7tC,EAAKM,WAAW0qE,GAAU,CAE5B,GADAn9B,EAASzlC,EAAGqgB,WAAWuiD,IAClBn9B,EAAQ,MAAM,IAAIh0D,MAAM,mCAC7B,MAAO,CACL,MAASmxF,EACT,MAASA,GAEN,CACL,MAAMY,EAAS5rE,EAAKqB,QAAQ4pE,GACtBY,EAAgB7rE,EAAKI,KAAKwrE,EAAQZ,GAExC,GADAn9B,EAASzlC,EAAGqgB,WAAWojD,GACnBh+B,EACF,MAAO,CACL,MAASg+B,EACT,MAASb,GAIX,GADAn9B,EAASzlC,EAAGqgB,WAAWuiD,IAClBn9B,EAAQ,MAAM,IAAIh0D,MAAM,mCAC7B,MAAO,CACL,MAASmxF,EACT,MAAShrE,EAAKnhB,SAAS+sF,EAAQZ,Q,6BCvFvC,MAAM5iE,EAAK,EAAQ,GAyBnB1xB,EAAOD,QAAU,CACf+0F,YAxBF,SAAsBR,EAAShgF,EAAMia,GAGnC,GAFAA,EAA4B,mBAATja,EAAuBA,EAAOia,EACjDja,EAAwB,mBAATA,GAA+BA,EACpC,OAAOia,EAAS,KAAMja,GAChCod,EAAGu1C,MAAMqtB,EAAS,CAACviE,EAAKm1C,KACtB,GAAIn1C,EAAK,OAAOxD,EAAS,KAAM,QAC/Bja,EAAQ4yD,GAASA,EAAMG,cAAiB,MAAQ,OAChD94C,EAAS,KAAMja,MAkBjBygF,gBAdF,SAA0BT,EAAShgF,GACjC,IAAI4yD,EAEJ,GAAI5yD,EAAM,OAAOA,EACjB,IACE4yD,EAAQx1C,EAAG06D,UAAUkI,GACrB,MAAOxmF,GACP,MAAO,OAET,OAAQo5D,GAASA,EAAMG,cAAiB,MAAQ,U,6BCtBlD,MAAM5tC,EAAI,EAAQ,IAAgBN,aAC5BzH,EAAK,EAAQ,GACbpI,EAAO,EAAQ,GACf8+C,EAAQ,EAAQ,IAChBz2B,EAAa,EAAQ,IAAkBA,WA8B7C3xC,EAAOD,QAAU,CACfq1F,WAAY37D,GA7Bd,SAAqBxa,EAAM+T,EAAMgU,EAAUzY,GACjB,mBAAbyY,IACTzY,EAAWyY,EACXA,EAAW,QAGb,MAAMnZ,EAAMvE,EAAKqB,QAAQ1L,GACzB0yB,EAAW9jB,EAAK,CAACkE,EAAKigE,IAChBjgE,EAAYxD,EAASwD,GACrBigE,EAAetgE,EAAGqB,UAAU9T,EAAM+T,EAAMgU,EAAUzY,QAEtD65C,EAAM5uC,OAAO3L,EAAKkE,IAChB,GAAIA,EAAK,OAAOxD,EAASwD,GAEzBL,EAAGqB,UAAU9T,EAAM+T,EAAMgU,EAAUzY,SAgBvC8mE,eAXF,SAAyBp2E,EAAM+T,EAAMgU,GACnC,MAAMnZ,EAAMvE,EAAKqB,QAAQ1L,GACzB,GAAIyS,EAAGqgB,WAAWlkB,GAChB,OAAO6D,EAAGg8B,cAAc7gC,MAAM6E,EAAIlgB,WAEpC42D,EAAM1uC,WAAW7L,GACjB6D,EAAGg8B,cAAc7gC,MAAM6E,EAAIlgB,c,60DCd7B,aACA,OACA,QACA,SACA,OASA,SACA,SAIA,OA6EA,QAEA,SACA,SACA,OACA,SAEA,SACA,SACA,SACA,OACA,SACA,SAEA,QACA,SACA,SACA,SACA,SAEA,SAEA,SAEA,SAKA,4BACIqW,EACA4wD,EACAjB,EACAW,EACAF,EACAqd,EACAvd,EACAF,EACA0d,EACAhd,GAGA,IAAMid,EAAkB3tE,EAAIpa,IAAI,EAAAiM,iBAAiBE,qBAAsB,IAAI,EAAA67E,oBAAoB5tE,IACzF6tE,EAAe7tE,EAAIpa,IAAI,EAAAiM,iBAAiBG,eAAgB,IAAI,EAAA87E,iBAAiB9tE,IAC7E+tE,EAAa,IAAI,EAAAC,eAAehuE,GAChCiuE,EAAiBjuE,EAAIpa,IAAI,EAAAiM,iBAAiBI,iBAAkB,IAAI,EAAAi8E,mBAAmBluE,IACnFmuE,EAAkBnuE,EAAIpa,IAAI,EAAAiM,iBAAiBK,iBAAkB,IAAI,EAAAk8E,oBAAoBpuE,IACrFquE,EAAUruE,EAAIpa,IAAI,EAAAiM,iBAAiBO,iBAAkB,IAAI,EAAAk8E,mBAAmBtuE,EAAKytE,IACjF7xE,EAAYoE,EAAIpa,IAAI,EAAAiM,iBAAiBS,cAAe,IAAI,EAAAi8E,iBAAiBvuE,EAAKytE,IAC9Ee,EAA8B,IAAI,EAAAC,4BAA4BzuE,GAC9D0uE,EAAc1uE,EAAIpa,IAAI,EAAAiM,iBAAiBU,aAAc,IAAI,EAAAo8E,uBAAuB3uE,IAChF4uE,EAA2B5uE,EAAIpa,IAAI,EAAAiM,iBAAiBW,4BAA6B,IAAI,EAAAq8E,6BAA6B7uE,IAClH8uE,EAAe9uE,EAAIpa,IAAI,EAAAiM,iBAAiBc,cAAe,IAAI,EAAAo8E,iBAAiB/uE,EAAKpE,EAAW+xE,IAC5FqB,EAAehvE,EAAIpa,IAAI,EAAAiM,iBAAiBY,eAAgB,IAAI,EAAAw8E,iBAAiBjvE,EAAK2tE,IAClFuB,GAAWlvE,EAAIpa,IAAI,EAAAiM,iBAAiBkB,UAAW,IAAI,EAAAo8E,aAAanvE,IAChEovE,GAAgBpvE,EAAIpa,IAAI,EAAAiM,iBAAiBe,eAAgB,IAAI,EAAAy8E,kBAAkBrvE,IAC/EsvE,GAA2BtvE,EAAIpa,IAAI,EAAAiM,iBAAiBmB,2BAA4B,IAAI,EAAAu8E,6BAA6BvvE,EAAKovE,KACtHI,GAAgBxvE,EAAIpa,IAAI,EAAAiM,iBAAiBqB,gBAAiB,IAAI,EAAAu8E,kBAAkBzvE,IAChF0vE,GAAS1vE,EAAIpa,IAAI,EAAAiM,iBAAiBsB,QAAS,IAAI,EAAAw8E,WAAW3vE,EAAK2tE,IAC/DiC,GAAiB5vE,EAAIpa,IAAI,EAAAiM,iBAAiBuB,gBAAiB,IAAI,EAAAy8E,mBAAmB7vE,IAGxF,OAFAA,EAAIpa,IAAI,EAAAiM,iBAAiBoB,UAAWq9D,GAE7B,SAAUzvD,GACb,IAAMivE,EAAkC,CAEpCC,gBAAA,SAAgBnsF,EAAmC61B,EAA8D+8C,GAC7G,OAAOmX,EAAgBoC,gBAAgBnsF,EAAS61B,EAAS+8C,IAG7DwZ,eAAA,SAAkBC,G,IAAmB,wDACjC,OAAOtC,EAAgBqC,eAAc,MAA9BrC,EAAe,GAAmBsC,GAAcrkF,KAE3DskF,0BAAA,SAA0BtsF,EAAiB61B,EAA4F+8C,GACnI,OAAOmX,EAAgBoC,gBAAgB,CAAEzwF,GAAIsE,IAAW,W,IAAC,sDACrD,IAAMusF,EAAmB9B,EAAQ+B,kBACjC,GAAKD,EAKL,OAAOA,EAAiB3qF,MAAK,SAACA,GAC1BoG,EAAKuV,QAAQgvE,EAAkB3qF,GAC/Bi0B,EAAQzU,MAAMwxD,EAAS5qE,MACxB8lB,MAAK,SAAAh1B,GACCA,GACD0qB,QAAQY,KAAK,sBAAwBpkB,EAAU,yBAEpD,SAAAsmB,GACC9C,QAAQY,KAAK,2CAA6CpkB,EAASsmB,MAZnE9C,QAAQY,KAAK,kBAAoBpkB,EAAU,gDAiBvDysF,gBAAA,SAAgBJ,EAAmBx2D,EAAkC+8C,GACjE,OAAOmX,EAAgB0C,gBAAgBJ,EAAWx2D,EAAS+8C,IAE/D8Z,cAAA,SAAcL,GACV,OAAOtC,EAAgB2C,cAAcL,IAEzCM,YAAA,SAAYC,GACR,YADQ,IAAAA,OAAA,GACD7C,EAAgB4C,YAAYC,IAEvCC,+BAAA,SAA+B7sF,EAAiB8iB,EAAuD8vD,GAEnG,OAAO,IAAI,EAAAh8E,YAAW,iBAItBk2F,EAAA,EAAAA,0BAA2BC,EAAA,EAAAA,mBAAoBC,EAAA,EAAAA,kBAIjDznD,EAA8B,CAEhC,qBACI,OAAOulD,EAAYmC,gBAEvB,uBACI,OAAOxC,EAAQ+B,mBAEnB,yBACI,OAAO/B,EAAQyC,yBAEnB,gBACI,OAAOpC,EAAYqC,WAEvBL,0BAAyB,EAEzBM,4BAAA,SAA4B1qE,EAAUkwD,EAAU/7E,GAC5C,OAAO4zF,EAAQ2C,4BAA4B1qE,EAAUkwD,EAAS/7E,IAGlEw2F,8BAAA,SAA8B3qE,EAAUkwD,EAAU/7E,GAC9C,OAAO4zF,EAAQ4C,8BAA8B3qE,EAAUkwD,EAAS/7E,IAGpEy2F,+BAAA,SAA+B5qE,EAAUkwD,EAAU/7E,GAC/C,OAAO4zF,EAAQ6C,+BAA+B5qE,EAAUkwD,EAAS/7E,IAGrE02F,6BAAA,SAA6B7qE,EAAUkwD,EAAU/7E,GAC7C,OAAO4zF,EAAQ8C,6BAA6B7qE,EAAUkwD,EAAS/7E,IAGnE22F,gCAAA,SAAgC9qE,EAAUkwD,EAAU/7E,GAChD,OAAO4zF,EAAQ+C,gCAAgC9qE,EAAUkwD,EAAS/7E,IAGtE42F,mCAAA,SAAmC/qE,EAAUkwD,EAAU/7E,GACnD,OAAO4zF,EAAQgD,mCAAmC/qE,EAAUkwD,EAAS/7E,IAEnE62F,iBAAN,SAAuBC,EACnBC,EACA74E,G,sGAkBA,OAfMzY,EAAWqxF,aAAuB,UAAMA,EAAcA,EAAYrxF,IACpEsxF,KAEMC,EAAkBD,GACT74E,eAAiB84E,EAAWC,SAAWD,EAAW74E,WAAa64E,EAAW/4E,cACrFi5E,EAAkBH,GAGtB74E,IACIg5E,EACAA,EAAgBh5E,cAAgBA,EAEhCg5E,EAAkB,CAAEh5E,cAAa,IAGzC,GAAMiD,EAAUg2E,aAAa1xF,EAAKyxF,I,OAElC,GAFA,SACME,EAAaxD,EAAQyC,wBAAwBgB,MAAK,SAAAC,GAAU,OAAAA,EAAO73C,SAASh6C,IAAIyF,aAAezF,EAAIyF,cAErG,MAAO,CAAP,EAAOijB,QAAQtH,QAAQuwE,IAEvB,MAAM,IAAIv2F,MAAM,gCAAgCi2F,EAAY5rF,oBAIpEqsF,cAAA,SAAcnwF,EAAYsD,EAAiC80B,GACvD,GAAIA,EAAO,CACP,IAAMg4D,EAAYn5F,OAAO0T,OAAOytB,EAAM0C,wBAAyB,CAAExW,aAAc,IACzE+rE,EAAwB,CAAE5/C,wBAAyBrY,EAAMqY,wBAAyB3V,wBAAyBs1D,GACjH,OAAOpE,EAAamE,cAAcnwF,EAAOsD,EAAS+sF,GAElD,OAAOrE,EAAamE,cAAcnwF,EAAOsD,IAGjDgtF,gBAAA,WACI,OAAOtE,EAAasE,gBAAgBtxE,IAExCuxE,wBAAA,SAAwBjtF,GACpB,OAAO+qE,EAAamiB,oBAAoBltF,IAE5CmtF,uBAtF2BtiB,EAAmBuiB,YAAY34F,KAAKo2E,EAAoB,EAAAxgE,gBAAgB6F,MAuFnGm9E,mBAtFuBxiB,EAAmBuiB,YAAY34F,KAAKo2E,EAAoB,EAAAxgE,gBAAgB2F,SAuF/Fs9E,iBAtFqBziB,EAAmBuiB,YAAY34F,KAAKo2E,EAAoB,EAAAxgE,gBAAgBlU,OAuF7Fo3F,eAAA,SAAevtF,GACX,OAAO4oF,EAAW2E,eAAevtF,IAErCwtF,eAAA,SAAextF,GACX,OAAO4oF,EAAW4E,eAAextF,IAErCytF,iBAAA,SAAiBztF,GACb,OAAO4oF,EAAW6E,iBAAiBztF,IAGvC0tF,oBAAA,SAAoB99E,EAAc7K,GAC9B,OAAOskF,EAA4BqE,oBAAoB99E,EAAM7K,IAEjE4oF,aAAA,SAAa3tF,EAAiC80B,GAC1C,GAAIA,EAAO,CACP,IAAMg4D,EAAYn5F,OAAO0T,OAAOytB,EAAM0C,wBAAyB,CAAExW,aAAc,IACzE+rE,EAAwB,CAAE5/C,wBAAyBrY,EAAMqY,wBAAyB3V,wBAAyBs1D,GACjH,OAAOpE,EAAakF,UAAU5tF,EAAS+sF,GAEvC,OAAOrE,EAAakF,UAAU5tF,IAGtC6tF,oBAAA,SAAoBC,EAAsCC,GACtD,OAAO1E,EAA4BwE,oBAAoBC,EAAWC,IAEtEC,oBAAA,SAAoBx6F,GAChB,OAAOi2F,EAAyBuE,oBAAoBx6F,EAAM,EAAAy6F,mBAAmBvyE,KAEjFwyE,mBAAA,SAAmBC,EACfvuF,EACAwT,EACApT,GACA,YADA,IAAAA,MAAA,IACOurE,EAAW6iB,cAAcD,EAAUvuF,EAAOwT,EAAapT,EAAS0b,IAE3E2yE,+BAAA,SAA+BF,EAAkBG,GAC7C,OAAO/iB,EAAW8iB,+BAA+BF,EAAUG,EAAY5yE,IAE3E,YACI,OAAOotE,EAAeyF,kBAE1BC,uBAAA,SAAuBrtE,EAAUkwD,EAAU/7E,GACvC,OAAOwzF,EAAe0F,uBAAuBrtE,EAAUkwD,EAAS/7E,IAEpEm5F,eAAA,SAAeC,EAA6DC,EAAoBj9E,GAC5F,OAAO63E,EAAYkF,eAAeC,EAAeC,EAAWj9E,IAEhE85E,mBAAkB,EAClBC,kBAAiB,EACjBmD,+BAAA,SAA+B5uF,GAC3B,OAAOkpF,EAAQ0F,+BAA+B5uF,IAElD6uF,yBAAA,SAA4BC,EAAgBC,GACxC,OAAOlF,EAAagF,yBAAyBnzE,EAAQozE,EAAQC,IAEjEC,eAAA,SAAkBF,EAAgB9uF,GAC9B,OAAO6pF,EAAamF,eAAetzE,EAAQozE,EAAQ9uF,IAEvDivF,aAAA,SACIjvF,EACAiY,GAEA,OAAO+wE,EAAgBiG,aAAajvF,EAASiY,IAEjDi3E,2BAAA,SAA2BC,GACvB,OAAO1E,GAAeyE,2BAA2BC,IAErDC,mBAAA,SAAmB96D,GAEf,OAAO,IAAI,EAAAj/B,YAAW,gBAE1Bg6F,eAAA,WACI,OAAO3G,EAAa2G,eAAe3zE,KAIrC4zE,EAAoC,CACtC,eACI,OAAOvkB,EAAawkB,UAExB,uBACI,OAAOxkB,EAAaykB,kBAExB,WACI,OAAOzkB,EAAav3E,MAExBi8F,4BAAA,SAA4BtuE,EAAUkwD,EAAU/7E,GAC5C,OAAOy1E,EAAa0kB,4BAA4BtuE,EAAUkwD,EAAS/7E,IAEvE,oBACI,OAAOmhB,EAAUi5E,qBAAqBvgF,KAAI,SAAA6W,GAAQ,OAAAA,EAAK+uB,aAG3D46C,wBAAA,SAAwBxuE,EAAUkwD,EAAU/7E,GACxC,OAAOmhB,EAAUm5E,oBAAoBzuE,EAAUkwD,EAAS/7E,IAG5Du6F,uBAAA,SAAuB1uE,EAAUkwD,EAAU/7E,GACvC,OAAOmhB,EAAUq5E,oBAAoB3uE,EAAUkwD,EAAS/7E,IAG5Dy6F,sBAAA,SAAsB5uE,EAAUkwD,EAAU/7E,GACtC,OAAOmhB,EAAUu5E,iBAAiB7uE,EAAUkwD,EAAS/7E,IAGzD26F,uBAAA,SAAuB9uE,EAAUkwD,EAAU/7E,GACvC,OAAOmhB,EAAUw5E,uBAAuB9uE,EAAUkwD,EAAS/7E,IAG/D46F,sBAAA,SAAsB/uE,EAAUkwD,EAAU/7E,GACtC,OAAOmhB,EAAUy5E,sBAAsB/uE,EAAUkwD,EAAS/7E,IAE9D66F,iBAAA,SAAiBC,EAAU9vF,GACvB,OAAO2qE,EAAsBklB,iBAAiBC,EAAS9vF,IAE3D+vF,yBAAA,SAAyBlvE,EAAUC,EAAW9rB,GAC1C,OAAO21E,EAAsBolB,yBAAyBlvE,EAAUC,EAAU9rB,IAExEg7F,iBAAN,SAAuBC,G,2GACbvwF,EAAUuwF,EAGsB,iBAA3BA,EAAP,OACAx1F,EAAM,UAAIkX,KAAKs+E,G,qBAERA,aAAkC,WACzCx1F,EAAMw1F,E,OADC,M,cAGCvwF,GAA8B,iBAAZA,EAAnB,MACD,GAAMyW,EAAU+5E,mBAAmBxwF,I,cAAzCjF,EAAM,S,aAGN,MAAO,CAAP,EAAO0oB,QAAQ4I,OAAO,IAAIl2B,MAAM,+C,OAGvB,SAAMsgB,EAAUg6E,aAAa11F,I,OAC1C,MAAO,CAAP,GADMirB,EAAO,WACEA,EAAK+uB,kBAExB27C,wBAAA,SAAwBC,EACpBC,EACAC,EACAC,GACA,OAAO/lB,EAAa2lB,wBAAwBC,EAAaC,EAAoBC,EAAoBC,IAErGC,UAAA,SAAUC,EAA4BC,EAAoCC,EAAqBp8D,GAC3F,OAAOi2C,EAAagmB,UAAUC,EAASC,EAASC,EAAYp8D,IAEhEq8D,QAAA,SAAQC,GACJ,OAAOlI,EAAQiI,QAAQC,IAE3BC,UAAA,SAAUhxF,GACN,OAAO6oF,EAAQoI,mBAAmBjxF,IAEtCkxF,oCAAA,SAAoCn9E,EAAgB+6E,GAChD,OAAOpkB,EAAawmB,oCAAoCn9E,EAAQ+6E,IAEpEqC,2BAAA,SAA2Bp9E,EAAgB+6E,GACvC,OAAO9E,GAAcmH,2BAA2Bp9E,EAAQ+6E,IAE5DsC,mBAAA,SAAmB12F,GACf,OAAOgwE,EAAa0mB,mBAAmB12F,IAE3C22F,eAAA,SAAeC,EAA+BC,GAC1C,OAAO7mB,EAAa8mB,gBAAgBF,EAAWC,IAEnDE,uBAAwB,SAAC95E,EAAO+5E,G,IAAa,wDACzC,OAAAhnB,EAAa+mB,uBAAsB,MAAnC/mB,EAAY,GAAwB/yD,EAAO+5E,GAAe,GAAMC,KAEpEC,qBAAA,SAAqB3qF,EAAc6nF,GAC/B,OAAO+C,EAAMD,qBAAqB3qF,EAAM6nF,IAG5CgD,gBAAA,SAAgBhxE,EAAUkwD,EAAU/7E,GAChC,OAAOy1E,EAAaonB,gBAAgBhxE,EAAUkwD,EAAS/7E,IAE3D88F,iBAAA,SAAiBjxE,EAAUkwD,EAAU/7E,GACjC,OAAOy1E,EAAaqnB,iBAAiBjxE,EAAUkwD,EAAS/7E,KAI1Dic,EAAwB5d,OAAO6vB,OAAO,CACxC,cAAwB,OAAOgnD,EAAO6nB,SACtC,cAAwB,OAAO7nB,EAAO8nB,SACtC,eAAyB,OAAO9nB,EAAOn7D,UACvC,gBAA0B,OAAOm7D,EAAO+nB,WACxC,gBAA0B,OAAO/nB,EAAOgoB,WACxC,gBAA0B,OAAOhoB,EAAOioB,WACxC,YAAsB,OAAOjoB,EAAOwP,OACpCuO,UAAS,EACTmK,eAAA,SAAeC,GACX,OAAOnoB,EAAOkoB,eAAeC,IAEjCC,kBAAA,SAAkBC,GACd,OAAOroB,EAAOooB,kBAAkBC,IAEpCC,mBAAA,WACI,OAAOtoB,EAAOsoB,sBAElBC,yBAAA,WACI,OAAOvoB,EAAOuoB,4BAElBC,aAAA,SAAaj4F,GACT,OAAO+tF,EAAemK,QAAQl4F,IAElCm4F,cAAA,SAAc50F,GACV,OAAOwqF,EAAeoK,cAAc50F,MAItC60F,EAA8C,CAChDC,+BAAA,SAA+BC,GAC3B,OAAOlJ,GAAyBiJ,+BAA+BC,IAEnEC,KAAA,SAAKn5F,GACDgwF,GAAyBmJ,KAAKn5F,KAIhCo5F,EAAoC,CACtCC,aAAA,WACI,OAAO7J,EAAa6J,gBAExBC,wBAAA,SAAwB1+C,EAA8BrB,GAClD,OAAOi2C,EAAa+J,eAAe3+C,EAASh6C,IAAK24C,IAErD7pB,MAAA,SAAM1V,EAAkC4gC,GACpC,OAAO,EAAA4+C,MAAM,EAAAz/E,qBAAqBC,GAAW4gC,EAASh6C,IAAKg6C,EAASrB,YAAY,IAEpF,6BACI,OAAOi2C,EAAaiK,wBAGxBC,eAAA,SAAevzF,GAEX,OAAYqpF,EAAakK,eAAevzF,IAE5CwzF,2BAAA,SAA2BtgG,GACvB,OAAOm2F,EAAamK,2BAA2BtgG,IAEnDugG,yBAAA,SAAyB1kF,EAAkB2kF,GACvC,OAAOrK,EAAaoK,yBAAyB1kF,EAAU2kF,IAE3DC,+BAAA,SAA+B9/E,EAAkCg7E,G,IAAwC,wDACrG,OAAOxF,EAAasK,+BAA+B9/E,EAAUg7E,EAAU+E,EAAmB,EAAAjG,mBAAmBvyE,KAEjHy4E,2BAAA,SAA2BhgF,EAAkCg7E,GACzD,OAAOxF,EAAawK,2BAA2BhgF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAE1F04E,4BAAA,SAA4BjgF,EAAkCg7E,GAC1D,OAAOxF,EAAayK,4BAA4BjgF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAE3F24E,8BAAA,SACIlgF,EAAkCg7E,EAAuCrmC,G,IAAsD,IAE3HwrC,EAF2H,oDAG/H,GAAqB,iBAAVxrC,EACPwrC,EAAWxrC,MACR,CACH,IAAMorC,EAA8B,GACpCI,EAAW,CAAEJ,kBAAiB,EAAEK,oBAAqB,IACjDzrC,GACAorC,EAAkBj0F,KAAI,MAAtBi0F,EAAiB,GAAMprC,GAAU1sB,IAGzC,OAAOutD,EAAa0K,8BAA8BlgF,EAAUg7E,EAAUmF,EAAU,EAAArG,mBAAmBvyE,KAEvG84E,+BAAA,SAA+BrgF,EAAkCg7E,GAC7D,OAAOxF,EAAa6K,+BAA+BrgF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAE9F+4E,+BAAA,SAA+BtgF,EAAkCg7E,GAC7D,OAAOxF,EAAa8K,+BAA+BtgF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAE9Fg5E,sBAAA,SAAsBvgF,EAAkCg7E,GACpD,OAAOxF,EAAa+K,sBAAsBvgF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAErFi5E,kCAAA,SAAkCxgF,EAAkCg7E,GAChE,OAAOxF,EAAagL,kCAAkCxgF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAEjGk5E,gCAAA,SAAgCzF,GAC5B,OAAOxF,EAAaiL,gCAAgCzF,EAAU,EAAAlB,mBAAmBvyE,KAErFm5E,uCAAA,SAAuC1gF,EAAkCg7E,GACrE,OAAOxF,EAAakL,uCAAuC1gF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAEtGo5E,4CAAA,SAA4C3gF,EAAkCg7E,GAC1E,OAAOxF,EAAamL,4CAA4C3gF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAE3Gq5E,qCAAA,SACI5gF,EACAg7E,EACA6F,G,IACA,wDAEA,OAAOrL,EAAaoL,qCAAqC5gF,EAAUg7E,EAAU,CAAC6F,GAAuBv3E,OAAOw3E,GAAwB,EAAAhH,mBAAmBvyE,KAE3Jw5E,6BAAA,SAA6B/gF,EAAkCg7E,GAC3D,OAAOxF,EAAawL,qBAAqBhhF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAEpF05E,4BAAA,SAA4BjhF,EAAkCg7E,EAAoCmF,GAC9F,OAAO3K,EAAayL,4BAA4BjhF,EAAUg7E,EAAUzzE,EAAOjS,MAAO,EAAAwkF,mBAAmBvyE,GAAS44E,IAElHe,yBAAA,SAAyBlhF,EAAkCg7E,GACvD,OAAOxF,EAAa0L,yBAAyBlhF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAExF45E,0BAAA,SAA0BnhF,EAAkCg7E,GACxD,OAAOxF,EAAa2L,0BAA0BnhF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAEzF65E,+BAAA,SAA+BphF,EAAkCg7E,GAC7D,OAAOxF,EAAa4L,+BAA+BphF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAE9F85E,sBAAA,SAAsBrhF,EAAkCg7E,GACpD,OAAOxF,EAAa6L,sBAAsBrhF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAErF+5E,6BAAA,SAA6BthF,EAAkCg7E,GAC3D,OAAOxF,EAAa8L,6BAA6BthF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,KAE5Fg6E,uBAAA,SAAuBvhF,EAAkCg7E,GACrD,OAAOxF,EAAa+L,uBAAuBvhF,EAAUg7E,EAAU,EAAAlB,mBAAmBvyE,MAIpFy+D,EAAgC,CAElC,UACI,OAAO1O,EAAc6Q,gBAAgBntE,KAAI,SAAA+8D,GAAO,WAAIypB,EAAOlqB,EAAeS,OAG9E0pB,UAAA,SAAU5sC,GACN,IAAMkjB,EAAMT,EAAcgR,cAAczzB,EAASz9B,eACjD,GAAI2gD,EACA,OAAO,IAAIypB,EAAOlqB,EAAeS,IAIzC,kBACI,OAAOT,EAAcoqB,cAIvBC,EAAyBp6E,EAAOvR,SAAS4rF,aAAer6E,EAAOvR,SAAS4rF,YAAYC,WAAa,GACvG7qB,EAAS8qB,eAAehM,GAAezB,GACvCrd,EAAS+qB,+BAA+Bx6E,EAAOxR,aAAc4rF,GAC7D,IAAM1xE,EAA4B,CAC9B,yBACI,OAAO+mD,EAASgrB,oBAEpB,yBACI,OAAOhrB,EAASirB,oBAEpB,kBACI,OAAOjrB,EAASkrB,aAEpB,oCACI,OAAOlrB,EAASmrB,+BAEpB,6BACI,OAAOnrB,EAASorB,wBAEpB,0CACI,OAAOprB,EAASqrB,qCAEpB,iCACI,OAAOrrB,EAASsrB,4BAEpB,6BACI,OAAOtrB,EAASurB,wBAEpBC,sCAAA,SAAsCC,EAAmBC,GACrD,OAAO1rB,EAASwrB,sCAAsCC,EAAWC,IAErEC,mCAAA,SAAmCF,EAAmBzH,GAClD,OAAOhkB,EAAS2rB,mCAAmCF,EAAWzH,IAElE4H,mCAAA,SAAmCH,EAAmBC,GAClD,OAAO1rB,EAAS4rB,mCAAmCH,EAAWC,IAElEG,eAAA,SAAel/E,EAA2Cm/E,GACtD,OAAO9rB,EAAS6rB,eAAel/E,EAAQm/E,IAE3CC,eAAA,SAAeb,GACXlrB,EAAS+rB,eAAeb,IAE5Bc,kBAAA,SAAkBd,GACdlrB,EAASgsB,kBAAkBd,KAI7BnE,EAA4B,CAC9BD,qBAAA,SAAqB3qF,EAAc6nF,GAC/B,OAAOpF,GAASkI,qBAAqB3qF,EAAM6nF,IAG/CiI,WAAA,SAAWv2F,GACP,OAAOkpF,GAASqN,WAAWv2F,IAG/Bw2F,YAAA,SAAYp/E,GACR,OAAO8xE,GAASsN,YAAYp/E,IAGhC,qBACI,OAAO8xE,GAASuN,gBAGpBC,eAAA,SAAep2E,EAAUkwD,EAAU/7E,GAC/B,OAAOy0F,GAASwN,eAAep2E,EAAUkwD,EAAS/7E,IAGtDkiG,aAAA,SAAar2E,EAAUkwD,EAAU/7E,GAC7B,OAAOy0F,GAASyN,aAAar2E,EAAUkwD,EAAS/7E,IAGpDmiG,sBAAA,SAAsBt2E,EAAUkwD,EAAU/7E,GACtC,OAAOy0F,GAAS0N,sBAAsBt2E,EAAUkwD,EAAS/7E,IAG7DoiG,oBAAA,SAAoBv2E,EAAUkwD,EAAU/7E,GACpC,OAAOy0F,GAAS2N,oBAAoBv2E,EAAUkwD,EAAS/7E,KAIzDqiG,EAAwB,CAC1B,eACI,IAAMC,EAAWrN,GAAOsN,gBAAgBn8E,GACxC,GAAIk8E,EACA,OAAOA,EAEP,MAAM,IAAIzhG,MAAM,yBAGxB2hG,oBAAA,SAAoB39F,EAAYmC,EAAey7F,GAC3C,OAAOxN,GAAOuN,oBAAoBp8E,EAAQvhB,EAAImC,EAAOy7F,KAIvDC,EAAgC,CAClCC,wBAAA,SAAwB99F,EAAYmC,GAChC,MAAO,CACHnC,GAAE,EAAEmC,MAAK,EAAEs7F,cAAUpiG,EACrB0iG,oBAAA,SAAoBC,EAAmB73F,EAAehF,EAAc88F,GAChE,MAAO,CACHj+F,GAAIg+F,EACJ73F,SAAQ,EACRhF,MAAK,EACL88F,SAAQ,EACRx2F,iBAAkB,EAClBrM,QAAA,eAIRA,QAAA,gBAMZ,MAAqB,CACjBoU,QAAS,EAAQ,KAAsBA,QACvCghF,SAAQ,EACRqN,QAAO,EACPh0D,OAAM,EACNsrD,UAAS,EACT/9E,IAAG,EACH4hF,eAAc,EACdI,UAAS,EACTpZ,QAAO,EACP/1D,MAAK,EACL8tE,MAAK,EACLyF,IAAG,EAEHliG,mBAAoB,EAAAA,mBACpBJ,WAAY,EAAAA,WACZ2jD,aAAc,EAAAv2B,QACd8M,wBAAyB,EAAAA,wBACzBhgB,eAAc,iBACdrY,SAAU,EAAAA,SACVoB,MAAO,EAAAA,MACPc,UAAW,EAAAA,UACXzD,WAAY,EAAAA,WACZC,8BAA+B,EAAAA,8BAC/ByiG,IAAK,UACLh/F,UAAS,YACTmB,qBAAoB,uBACpB89F,sBAAqB,wBACrB5iG,2BAA0B,6BAC1B0E,WAAU,aACVE,UAAS,YACTd,cAAa,gBACbiB,wBAAuB,0BACvBC,kBAAiB,oBACjBC,oBAAmB,sBACnBS,gBAAe,kBACfC,aAAY,eACZmB,eAAc,iBACdH,mBAAkB,qBAClBO,eAAc,iBACdH,mBAAkB,qBAClBM,6BAA4B,+BAC5BG,SAAQ,WACRC,cAAa,gBACbE,WAAU,aACVjB,sBAAqB,wBACrBR,SAAQ,WACRuI,iBAAgB,mBAChBH,gBAAe,kBACfE,SAAQ,WACRzG,qBAAoB,uBACpBE,qBAAoB,uBACpBG,cAAa,gBACbF,yBAAwB,2BACxBO,MAAK,QACLC,sBAAqB,wBACrBC,kBAAiB,oBACjBG,aAAY,eACZE,SAAQ,WACRI,eAAc,iBACdH,kBAAiB,oBACjBgB,uBAAsB,yBACtBE,WAAU,aACVkC,SAAQ,WACRw2F,UAAW,EAAAx2F,SACXL,yBAAwB,2BACxBW,WAAU,aACVI,eAAc,iBACdhB,cAAa,gBACbU,kBAAiB,oBACjB2B,SAAQ,WACRpB,eAAc,iBACdyC,aAAY,eACZS,eAAc,iBACdV,iBAAgB,mBAChBiB,UAAS,YACTd,eAAc,iBACdD,cAAa,gBACbU,UAAS,YACT0B,KAAI,OACJC,uBAAsB,yBACtBG,mBAAkB,qBAClBQ,WAAU,aACVC,iBAAgB,mBAChBE,mBAAkB,qBAClBK,MAAK,QACLE,iBAAgB,mBAChBC,kBAAiB,oBACjBE,aAAY,eACZC,iBAAgB,mBAChBC,gBAAe,kBACfC,uBAAsB,yBACtB/F,gBAAe,kBACfV,8BAA6B,gCAC7BI,kBAAiB,oBACjBC,YAAW,iBAKvB,iBAMI,WAA6ByoE,EAA8B/vD,GAA9B,KAAA+vD,gBACzBv2E,KAAKiF,GAAKuhB,EAAOjS,MAAMtP,GACvBjF,KAAK+U,WAAayR,EAAOxR,aACzBhV,KAAKsjG,YAAc98E,EAAOvR,SAC1BjV,KAAKujG,WAAa/8E,EAAOjS,MAAMO,WAAWqiE,SAAW,WAAa,UAc1E,OAXI,sBAAI,uBAAQ,C,IAAZ,WACI,OAAOn3E,KAAKu2E,cAAckR,SAASznF,KAAKiF,K,gCAG5C,sBAAI,sBAAO,C,IAAX,WACI,OAAUjF,KAAKu2E,cAAc8Q,gBAAgBrnF,KAAKiF,K,gCAGtD,YAAAu+F,SAAA,sBACI,OAAOxjG,KAAKu2E,cAAcmR,eAAe1nF,KAAKiF,IAAIoyB,MAAK,WAAM,SAAKx5B,YAE1E,EAxBA,I,60DC70BA,WAEA,OAEA,QAUA,aAQI,WAAY8nB,GALK,KAAA8vE,SAAW,IAAIllB,IACf,KAAAkzB,SAAW,IAAIx3F,IAK5BjM,KAAKstD,MAAQ3nC,EAAIynC,SAAS,qBAAIv3C,uBAC9B7V,KAAK0jG,mBAAqB,GAC1B1jG,KAAK2jG,kBAAoB,IAAIC,EAAkB5jG,MA4FvD,OAzFI,sBAAI,wBAAS,C,IAAb,WACI,OAAOA,KAAK2jG,mB,gCAIhB,YAAAjO,gBAAA,SAAgBnsF,EAAmC61B,EAAmB+8C,GAAtE,WACI,GAAIn8E,KAAKy1F,SAASpqF,IAAI9B,EAAQtE,IAC1B,MAAM,IAAIhE,MAAM,WAAWsI,EAAQtE,GAAE,kBAEzCjF,KAAKy1F,SAASrpE,IAAI7iB,EAAQtE,IAC1BjF,KAAKstD,MAAMu2C,iBAAiBt6F,GAE5B,IAAM2lC,EAA0B,GAQhC,OAPI9P,GACA8P,EAAUnkC,KAAK/K,KAAKg2F,gBAAgBzsF,EAAQtE,GAAIm6B,EAAS+8C,IAE7DjtC,EAAUnkC,KAAK,EAAA5K,WAAWd,QAAO,WAC7B,EAAKo2F,SAAS5uF,OAAO0C,EAAQtE,IAC7B,EAAKqoD,MAAMw2C,mBAAmBv6F,EAAQtE,QAEnC,EAAA9E,WAAWD,KAAI,MAAf,EAAAC,WAAU,EAAS+uC,KAI9B,YAAA8mD,gBAAA,SAAgBJ,EAAmBx2D,EAAkB+8C,GAArD,WACI,GAAIn8E,KAAKyjG,SAASp4F,IAAIuqF,GAClB,MAAM,IAAI30F,MAAM,YAAY20F,EAAS,yBAKzC,OAHA51F,KAAKstD,MAAMy2C,iBAAiBnO,GAE5B51F,KAAKyjG,SAASl4F,IAAIqqF,GAAW,W,IAAC,sDAAmB,OAAAx2D,EAAQzU,MAAMwxD,EAAS5qE,MACjE,EAAApR,WAAWd,QAAO,WACrB,EAAKokG,SAAS58F,OAAO+uF,GACrB,EAAKtoC,MAAM02C,mBAAmBpO,OAItC,YAAAv1F,QAAA,WACI,MAAM,IAAIY,MAAM,4BAIpB,YAAAgjG,gBAAA,SAAmBh/F,G,IAAY,wDAC3B,OAAIjF,KAAKyjG,SAASp4F,IAAIpG,GACXjF,KAAKkkG,oBAAmB,MAAxBlkG,KAAI,GAAqBiF,GAAOsM,IAEhCgd,QAAQ4I,OAAO,IAAIl2B,MAAM,YAAYgE,EAAE,sBAKtD,YAAA0wF,eAAA,SAAkB1wF,G,UAAlB,OAA8B,oDAC1B,OAAIjF,KAAKyjG,SAASp4F,IAAIpG,GACXjF,KAAKkkG,oBAAmB,MAAxBlkG,KAAI,GAAqBiF,GAAOsM,IAChC,EAAA21D,cAAca,OAAO9iE,GAErB,EAAAiiE,cAAcjtD,IAAIhV,EAAIsM,GAAM,SAAC4yF,EAAkBC,G,MAClD,WAAK92C,OAAM22C,gBAAe,WAACE,GAAaC,QAErC,EAAApkG,KAAKstD,OAAM22C,gBAAe,WAACh/F,GAAOsM,KAKjD,YAAA0kF,cAAA,SAAcL,GACV,OAAO51F,KAAKstD,MAAM+2C,eAAezO,IAIvB,YAAAsO,oBAAd,SAAqCj/F,G,IAAY,wD,gFAE7C,GADMm6B,EAAUp/B,KAAKyjG,SAAS7kG,IAAIqG,GAE9B,MAAO,CAAP,EAAOm6B,EAAO,eAAO7tB,EAAK0I,KAAI,SAAApK,GAAO,SAAK6zF,mBAAmB/kC,QAAO,SAAC9/D,EAAGgB,GAAM,OAAAA,EAAEykG,gBAAgBzlG,KAAIgR,SAEpG,MAAM,IAAI5O,MAAM,WAAWgE,EAAE,yBAI/B,YAAAixF,YAAN,SAAkBqO,G,YAAA,IAAAA,OAAA,G,yFACC,SAAMvkG,KAAKstD,MAAMk3C,gB,OAChC,OADMniG,EAAS,SACXkiG,EACO,CAAP,EAAOliG,EAAOsJ,QAAO,SAAApC,GAAW,MAAe,MAAfA,EAAQ,OAErC,CAAP,EAAOlH,WAGX,YAAAoiG,0BAAA,SAA0B32E,GACtB9tB,KAAK0jG,mBAAmB34F,KAAK+iB,IAErC,EAvGA,GAAa,EAAAylE,sBA0Gb,iBAQI,WAAYkC,GAJK,KAAAiP,YAAc,IAAIz4F,IAC3B,KAAAyX,OAAS,EAIb1jB,KAAK2kG,cAAgB,kBAAkBtlE,KAAKC,MAAMh0B,WAClDtL,KAAKy1F,SAAWA,EAChBz1F,KAAK4kG,yBAA0B,EAwDvC,OA/CI,YAAAC,cAAA,SAAct7F,EAAoCnJ,GAAlD,WACI,GAAKmJ,EAAL,CAGA,IAAMlH,EAASrC,KAAK8kG,kBAAkBv7F,GACtC,GAAI,EAAA29D,cAAca,OAAO1lE,EAAO4C,IAC5B,OAAO5C,EAQX,GALKrC,KAAK4kG,0BACN5kG,KAAKy1F,SAASC,gBAAgB,CAAEzwF,GAAIjF,KAAK2kG,eAAiB3kG,KAAK+kG,mBAAoB/kG,MACnFA,KAAK4kG,yBAA0B,GAG/Br7F,EAAQA,SAAWA,EAAQ+F,WAAa/F,EAAQ+F,UAAU7D,OAAS,EAAG,CACtE,IAAM,EAAKzL,KAAK0jB,SAChB1jB,KAAK0kG,YAAYn5F,IAAI,EAAIhC,GACzBnJ,EAAY2K,KAAK,IAAI,EAAA5K,YAAW,WAAM,SAAKukG,YAAY79F,OAAO,OAC9DxE,EAAO4C,GAAKjF,KAAK2kG,cACjBtiG,EAAOiN,UAAY,CAAC,GAGxB,OAAOjN,IAGD,YAAAyiG,kBAAV,SAA4B1vE,GAIxB,OAAO,EAAA8xC,cAAcjtD,IAAKmb,EAAS7rB,SAAW6rB,EAASnwB,GAAMmwB,EAAS9lB,WAAW,SAAC60F,EAAkBC,GAChG,OACIn/F,GAAIk/F,EACJz5F,MAAO0qB,EAAS1qB,OAAS0qB,EAAShuB,OAAS,IAC3CwG,QAASwnB,EAASxnB,QAClB0B,UAAW80F,OAKf,YAAAW,mBAAR,W,UAA8B,kDAC1B,IAAMx7F,EAAUvJ,KAAK0kG,YAAY9lG,IAAI2S,EAAK,IAC1C,OAAKhI,GAAYA,EAAQA,SAGlB,EAAAvJ,KAAKy1F,UAASE,eAAc,WAACpsF,EAAQA,SAAaA,EAAQ+F,WAAa,KAFnEif,QAAQ4I,OAAO,sBAKlC,EAnEA,GAAa,EAAAysE,qB,gRCvIb,YAEMoB,EAAkBvmG,OAAOkB,UAAUC,eAEzC,0BAA+BqlC,EAAUggE,GACrC,OAGJ,SAASC,EAAgBjgE,EAAUggE,EAA6B9nC,G,QAC5D,GAAI,EAAAgoC,kBAAkBlgE,GAClB,OAAOA,EAGX,IAAMmgE,EAAUH,EAAQhgE,GACxB,QAAuB,IAAZmgE,EACP,OAAOA,EAGX,GAAI,EAAAr8F,QAAQk8B,GAAM,CACd,IAAMogE,EAAY,G,IAClB,IAAgB,QAAApgE,GAAG,8BAAE,CAAhB,IAAMr5B,EAAC,QACRy5F,EAAGt6F,KAAKm6F,EAAgBt5F,EAAGq5F,EAAS9nC,K,iGAExC,OAAOkoC,EAGX,GAAI,EAAAv0D,SAAS7L,GAAM,CACf,GAAIk4B,EAAK9xD,IAAI45B,GACT,MAAM,IAAIhkC,MAAM,yCAEpBk8D,EAAK/wC,IAAI6Y,GACT,IAAMqgE,EAAK,GACX,IAAK,IAAIC,KAAMtgE,EACP+/D,EAAgB9mG,KAAK+mC,EAAKsgE,KACzBD,EAAWC,GAAML,EAAgBjgE,EAAIsgE,GAAKN,EAAS9nC,IAI5D,OADAA,EAAKt2D,OAAOo+B,GACLqgE,EAGX,OAAOrgE,EApCAigE,CAAgBjgE,EAAKggE,EAAS,IAAI10B,O,4vDCG7C,WAEA,QAEA,QACA,QACA,OACA,QACA,OACA,OACA,OACA,OAEA,QAIA,aAQI,WAAY5qD,GAHJ,KAAA6/E,mBAAqB,IAAIv5F,IACzB,KAAAw5F,mBAAqB,EAGzBzlG,KAAKstD,MAAQ3nC,EAAIynC,SAAS,qBAAIr3C,iBA2JtC,OAzJI,YAAA2vF,gBAAA,SAAgBhiF,GACR1jB,KAAK2lG,mBACL3lG,KAAK2lG,kBAAkBjiF,IAG/B,YAAAkiF,eAAA,SAAeriE,GACX,GAAIvjC,KAAK6lG,qBACL,OAAOt3E,QAAQtH,QAAQjnB,KAAK6lG,qBAAqBtiE,KAUzD,YAAAo0D,cAAA,SAAcmO,EAA8Ch7F,EAA4B80B,GAAxF,gBAAwF,IAAAA,MAA2B,EAAAtF,kBAAkB3tB,MACjI3M,KAAK2lG,uBAAoBrlG,EACzB,IAAMylG,EAAcx3E,QAAQtH,QAAQ6+E,GAC9BE,EAAgBhmG,KAAKstD,MAAM24C,MAAM,CACnCC,cAAep7F,GAAWA,EAAQq7F,YAClCC,YAAat7F,GAAWA,EAAQs7F,YAChCC,UAAW,CAAEC,qBAAqB,GAClCC,mBAAoBz7F,GAAWA,EAAQy7F,mBACvCC,cAAe17F,GAAWA,EAAQ07F,cAClCC,gBAAiB37F,GAAWA,EAAQ47F,iBAGlChnE,EAAU,EAAAinE,WAA2C,CAACX,EAAeD,IAAc1uE,MAAK,SAAA81B,GAC1F,GAAmB,IAAfA,EAAO7tD,IAGX,OAAOymG,EAAY1uE,MAAK,SAAA7vB,GAEpB,IAAMic,EAAY,EAAAmjF,4BAA4Bp/F,GAU9C,OARIsD,GAA8C,mBAA5BA,EAAQ+7F,kBAC1B,EAAKlB,kBAAoB,SAAAjiF,GACrB5Y,EAAQ+7F,gBAAiBr/F,EAAMkc,MAIvC,EAAK4pC,MAAMw5C,UAAUrjF,GAEduiF,EAAc3uE,MAAK,SAAA3T,GACtB,MAAsB,iBAAXA,EACH5Y,GAAWA,EAAQq7F,YACZr9F,MAAMujD,GAAG7kD,EAAMkc,IAEflc,EAAMkc,GAGV5a,MAAMC,QAAQ2a,GACdA,EAAOzJ,KAAI,SAAA8sF,GAAK,OAAAv/F,EAAMu/F,WAD1B,QAKZ,SAAAl3E,GAEC,OADA,EAAKy9B,MAAM05C,UAAUn3E,GACdtB,QAAQ4I,OAAOtH,SAG9B,OAAO,EAAAo3E,sBAAiDrnE,EAAOF,IAGnE,YAAAwnE,oBAAA,SAA6Cp8F,GACzC9K,KAAKstD,MAAM65C,qBAAqBr8F,IAGpC,YAAAgtF,gBAAA,SAAyCtxE,GACrC,IAAM4gF,EAAgB,IAAIC,EAAgBrnG,KAAMA,KAAKstD,MAAO9mC,EAAQxmB,KAAKylG,oBAGzE,OAFAzlG,KAAKwlG,mBAAmBj6F,IAAIvL,KAAKylG,mBAAoB2B,GACrDpnG,KAAKylG,oBAAsB,EACpB2B,GAGX,YAAA1O,UAAA,SAAU5tF,EAA2B80B,QAAA,IAAAA,MAA2B,EAAAtF,kBAAkB3tB,MAC9E3M,KAAK6lG,qBAAuB/6F,GAAWA,EAAQw8F,cAE1Cx8F,IACDA,EAAU,CACNs7F,YAAa,KAIrB,IAAM1mE,EAAU1/B,KAAKstD,MAAMi6C,OAAOz8F,EAA8C,mBAA9B9K,KAAK6lG,sBACvD,OAAO,EAAAoB,sBAAsBrnE,EAAOF,IAGxC,YAAA8nE,KAAA,WACIxnG,KAAKstD,MAAMm6C,SAEf,YAAAhP,aAAA,SAAa3tF,GACT9K,KAAK6lG,qBAAuB/6F,GAAWA,EAAQw8F,cAC/CtnG,KAAKstD,MAAMo6C,cAAc58F,EAA8C,mBAA9B9K,KAAK6lG,uBAGlD,YAAA1L,eAAA,SAAe3zE,GACX,IAAM4gF,EAAgB,IAAIO,EAAY3nG,KAAMA,KAAKstD,MAAO9mC,EAAQxmB,KAAKylG,oBAGrE,OAFAzlG,KAAKwlG,mBAAmBj6F,IAAIvL,KAAKylG,mBAAoB2B,GACrDpnG,KAAKylG,oBAAsB,EACpB2B,GAGL,YAAAQ,mBAAN,SAAyBC,G,gFACfC,EAAoB9nG,KAAKwlG,mBAAmB5mG,IAAIipG,KAElDC,EAAkBC,c,WAIpB,YAAAC,sBAAN,SAA4BH,EAAiCI,G,gFACnDH,EAAoB9nG,KAAKwlG,mBAAmB5mG,IAAIipG,KAElDC,EAAkBI,kBAAkBD,G,WAItC,YAAAE,iBAAN,SAAuBN,G,gFACbC,EAAoB9nG,KAAKwlG,mBAAmB5mG,IAAIipG,KAElDC,EAAkBM,Y,WAIpB,YAAAC,0BAAN,SAAgCR,EAAiCS,G,kFACvDC,EAAiBvoG,KAAKwlG,mBAAmB5mG,IAAIipG,OAE5B,IAAfS,EAAIxlF,MACJylF,EAAeC,mBAAmB,EAAA36F,kBAAkBH,MAC7C66F,IAAmBA,aAA0BZ,GAAeY,aAA0BlB,KACvFoB,EAAeF,EAAeG,QAAQJ,EAAIxlF,OAChDylF,EAAeC,mBAAmBC,K,WAKxC,YAAAE,uBAAN,SAA6Bd,EAAiCe,G,gFACpDL,EAAiBvoG,KAAKwlG,mBAAmB5mG,IAAIipG,KAC7BU,aAA0BlB,GAC5CkB,EAAeM,uBAAuBD,G,WAIxC,YAAAE,0BAAN,SAAgCjB,EAAiCtpF,G,kFACvDupF,EAAoB9nG,KAAKwlG,mBAAmB5mG,IAAIipG,KAC7BC,aAA6BT,IAE5C0B,EAAmBjB,EAAkBtgG,MAAMmE,QAAO,SAAA+9B,GAAK,OAAAA,EAAEtiC,QAAUmX,KACzEupF,EAAkBkB,sBAAsBD,I,WAGpD,EApKA,GAAa,EAAAtV,mBAsKb,iBAmBI,WAAqBwV,EAAsCC,EAAuC1iF,GAA7E,KAAAyiF,YAAsC,KAAAC,gBAAuC,KAAA1iF,SAC9FxmB,KAAK0K,WAAQpK,EACbN,KAAKmpG,UAAO7oG,EACZN,KAAKopG,gBAAa9oG,EAClBN,KAAK2S,SAAU,EACf3S,KAAKmrF,MAAO,EACZnrF,KAAK0mG,gBAAiB,EACtB1mG,KAAKhB,MAAQ,GAEbgB,KAAKqpG,SAAU,EAEfrpG,KAAKspG,qBAAuB,IAAI,EAAA95D,qBAChCxvC,KAAKspG,qBAAqBv+F,KAAK/K,KAAKupG,mBAAqB,IAAI,EAAAh8E,SAC7DvtB,KAAKspG,qBAAqBv+F,KAAK/K,KAAKwpG,wBAA0B,IAAI,EAAAj8E,SAClEvtB,KAAKspG,qBAAqBv+F,KAAK/K,KAAKypG,iBAAmB,IAAI,EAAAl8E,SAC3DvtB,KAAKspG,qBAAqBv+F,KAAK/K,KAAK0pG,0BAA4B,IAAI,EAAAn8E,SAmJ5E,OAhJI,sBAAI,oBAAK,C,IAAT,WACI,OAAOvtB,KAAK2pG,Q,IAGhB,SAAUj/F,GACN1K,KAAK2pG,OAASj/F,EACd1K,KAAK4P,OAAO,CAAElF,MAAK,K,gCAGvB,sBAAI,mBAAI,C,IAAR,WACI,OAAO1K,KAAK4pG,O,IAGhB,SAAST,GACLnpG,KAAK4pG,MAAQT,EACbnpG,KAAK4P,OAAO,CAAEu5F,KAAI,K,gCAGtB,sBAAI,yBAAU,C,IAAd,WACI,OAAOnpG,KAAK6pG,a,IAGhB,SAAeT,GACXppG,KAAK6pG,YAAcT,EACnBppG,KAAK4P,OAAO,CAAEw5F,WAAU,K,gCAG5B,sBAAI,sBAAO,C,IAAX,WACI,OAAOppG,KAAK8pG,U,IAGhB,SAAYn3F,GACR3S,KAAK8pG,SAAWn3F,EAChB3S,KAAK4P,OAAO,CAAE+C,QAAO,K,gCAGzB,sBAAI,mBAAI,C,IAAR,WACI,OAAO3S,KAAK+pG,O,IAGhB,SAAS5e,GACLnrF,KAAK+pG,MAAQ5e,EACbnrF,KAAK4P,OAAO,CAAEu7E,KAAI,K,gCAGtB,sBAAI,6BAAc,C,IAAlB,WACI,OAAOnrF,KAAKgqG,iB,IAGhB,SAAmBtD,GACf1mG,KAAKgqG,gBAAkBtD,EACvB1mG,KAAK4P,OAAO,CAAE82F,eAAc,K,gCAGhC,sBAAI,oBAAK,C,IAAT,WACI,OAAO1mG,KAAKwiC,Q,IAGhB,SAAUxjC,GACNgB,KAAKwiC,OAASxjC,EACdgB,KAAK4P,OAAO,CAAE5Q,MAAK,K,gCAGvB,YAAAirG,KAAA,WACI,MAAM,IAAIhpG,MAAM,wDAGpB,YAAAZ,QAAA,WACIL,KAAKspG,qBAAqBjpG,WAGpB,YAAAuP,OAAV,SAAiBw1F,GAKRplG,KAAKqpG,cAAuB/oG,IAAZ8kG,GAIrBplG,KAAKkpG,cAAcgB,sBAAsB9E,IAG7C,YAAAoC,KAAA,WACIxnG,KAAKipG,UAAUzB,OACfxnG,KAAKK,WAGC,YAAA8pG,WAAV,SAAqBx8F,GAArB,WACUg/D,EAAQ,SAAC98D,GAEX,GAAmB,iBADnBA,EAAMA,aAAe,WAAsB,SAAfA,EAAIqP,OAAoBrP,EAAI/J,OAAS+J,GAE7D,OAAOA,EAAIvE,UAAS,GAEhB,IAAAuJ,EAAA,kBAAAA,YACF43D,EAAerlD,EAAKM,WAAW7X,GAAOA,EAAMuX,EAAKI,KAAK3S,EAAahF,GACnE68D,EAAiBtlD,EAAKK,UAAUglD,GAChC5zB,EAAezxB,EAAKnhB,SAAS4O,EAAa63D,GAChD,OAAO,EAAAh0B,cAAcC,YAAY,EAAKnyB,OAAOvR,SAAU4jC,IAE3D,GAAI,OAAQlrC,GAAYA,aAAoB,EAAAvI,UACxC,OAAOuI,EACJ,GAAwB,iBAAbA,GAAyBA,aAAoB,UAC3D,OAAO,UAAIuV,MAAMypD,EAAMh/D,IAEjB,QAAEuW,EAAA,EAAAA,MAAOC,EAAA,EAAAA,KACf,MAAO,CACHD,MAAOyoD,EAAMzoD,GACbC,KAAMwoD,EAAMxoD,KAKxB,YAAA4jF,YAAA,WACI/nG,KAAKupG,mBAAmB37E,UAAKttB,IAGjC,YAAA4nG,kBAAA,SAAkBD,GACdjoG,KAAKwpG,wBAAwB57E,KAAKq6E,IAGtC,YAAAG,UAAA,WACIpoG,KAAKypG,iBAAiB77E,UAAKttB,IAG/B,YAAAkoG,mBAAA,SAAmBF,GACftoG,KAAK0pG,0BAA0B97E,KAAK06E,IAGxC,sBAAI,wBAAS,C,IAAb,WACI,OAAOtoG,KAAKypG,iBAAiB19E,O,gCAGjC,sBAAI,0BAAW,C,IAAf,WACI,OAAO/rB,KAAKupG,mBAAmBx9E,O,gCAGnC,sBAAI,+BAAgB,C,IAApB,WACI,OAAO/rB,KAAKwpG,wBAAwBz9E,O,gCAGxC,sBAAI,iCAAkB,C,IAAtB,WACI,OAAO/rB,KAAK0pG,0BAA0B39E,O,gCAE9C,EArLA,GAAa,EAAAq+E,gBA2Lb,kBAeI,WAAqBnB,EACRC,EACA1iF,EACA6jF,GAHb,MAKI,YAAMpB,EAAWC,EAAe1iF,IAAO,K,OALtB,EAAAyiF,YACR,EAAAC,gBACA,EAAA1iF,SACA,EAAA6jF,kBAIT,EAAK3B,QAAU,GACf,EAAK4B,UAAW,EAChB,EAAKtrG,MAAQ,G,EAoFrB,OA5GiC,OA2B7B,sBAAI,sBAAO,C,IAAX,WACI,OAAOgB,KAAKuqG,U,IAGhB,SAAY7B,GACR1oG,KAAKuqG,SAAW7B,EAChB1oG,KAAK4P,OAAO,CAAE84F,QAAO,K,gCAGzB,sBAAI,uBAAQ,C,IAAZ,WACI,OAAO1oG,KAAKwqG,W,IAGhB,SAAaF,GACTtqG,KAAKwqG,UAAYF,EACjBtqG,KAAK4P,OAAO,CAAE06F,SAAQ,K,gCAG1B,sBAAI,0BAAW,C,IAAf,WACI,OAAOtqG,KAAKyqG,c,IAGhB,SAAgBC,GACZ1qG,KAAKyqG,aAAeC,EACpB1qG,KAAK4P,OAAO,CAAE86F,YAAW,K,gCAG7B,sBAAI,qBAAM,C,IAAV,WACI,OAAO1qG,KAAK2qG,S,IAGhB,SAAWC,GACP5qG,KAAK2qG,QAAUC,EACf5qG,KAAK4P,OAAO,CAAEg7F,OAAM,K,gCAGxB,sBAAI,gCAAiB,C,IAArB,WACI,OAAO5qG,KAAK6qG,oB,IAGhB,SAAsBC,GACd9qG,KAAK6qG,qBAAuBC,IAC5B9qG,KAAK6qG,mBAAqBC,EAC1B9qG,KAAK4P,OAAO,CAAEk7F,kBAAiB,IAC/B9qG,KAAKkpG,cAAc6B,uB,gCAI3B,YAAAd,KAAA,sBACIjqG,KAAKqpG,SAAU,EAQfrpG,KAAKipG,UAAUxQ,aAAa,CACxB4R,gBAAiBrqG,KAAKqqG,gBACtBlf,KAAMnrF,KAAKmrF,KACXud,QAAS1oG,KAAK0oG,QAAQzuF,KAAI,SAAAquF,GAAO,OAC7B,SAAY,EAAK6B,WAAW7B,EAAI36F,UAChC,QAAW26F,EAAI16F,YAEnB+E,QAAS3S,KAAK2S,QACd+zF,eAAgB1mG,KAAK0mG,eACrB4D,SAAUtqG,KAAKsqG,SACfI,YAAa1qG,KAAK0qG,YAClBE,OAAQ5qG,KAAK4qG,OACbzB,KAAMnpG,KAAKmpG,KACXz+F,MAAO1K,KAAK0K,MACZ0+F,WAAYppG,KAAKopG,WACjB0B,kBAAmB9qG,KAAK8qG,kBACxB9rG,MAAOgB,KAAKhB,MACZsoG,cAAA,SAActoG,GACV,GAAIA,EAAMyM,OAAS,EACf,OA1BG,SAACzM,GAGZ,GAFA,EAAKA,MAAQA,EAET,EAAK8rG,mBAAqB,EAAKA,kBAAkBr/F,OAAS,EAC1D,OAAO,EAAKq/F,kBAsBDl7F,CAAO5Q,OAKlC,EA5GA,CAAiCorG,GAApB,EAAAzC,cAkHb,kBAeI,WAAqBsB,EACRC,EACA1iF,EACA6jF,GAHb,MAKI,YAAMpB,EAAWC,EAAe1iF,IAAO,K,OALtB,EAAAyiF,YACR,EAAAC,gBACA,EAAA1iF,SACA,EAAA6jF,kBAGT,EAAKW,OAAS,GACd,EAAKC,aAAe,GACpB,EAAKR,aAAe,GACpB,EAAK/B,QAAU,GACf,EAAK1pG,MAAQ,GAEb,EAAKsqG,qBAAqBv+F,KAAK,EAAKmgG,yBAA2B,IAAI,EAAA39E,SACnE,EAAK+7E,qBAAqBv+F,KAAK,EAAKogG,4BAA8B,IAAI,EAAA59E,S,EAuE9E,OAnG2D,OA+BvD,sBAAI,oBAAK,C,IAAT,WACI,OAAOvtB,KAAKgrG,Q,IAGhB,SAAUxjG,GACNxH,KAAKgrG,OAASxjG,EACdxH,KAAK4P,OAAO,CAAEpI,MAAK,K,gCAGvB,sBAAI,0BAAW,C,IAAf,WACI,OAAOxH,KAAKirG,c,IAGhB,SAAgBG,GACZprG,KAAKirG,aAAeG,EACpBprG,KAAK4P,OAAO,CAAEw7F,YAAW,K,gCAG7B,sBAAI,0BAAW,C,IAAf,WACI,OAAOprG,KAAKyqG,c,IAGhB,SAAgBC,GACZ1qG,KAAKyqG,aAAeC,EACpB1qG,KAAK4P,OAAO,CAAE86F,YAAW,K,gCAG7B,YAAA1B,sBAAA,SAAsBqC,GAClBrrG,KAAKmrG,4BAA4Bv9E,KAAKy9E,IAG1C,YAAAxC,uBAAA,SAAuBD,GACnB5oG,KAAKkrG,yBAAyBt9E,KAAKg7E,IAGvC,sBAAI,gCAAiB,C,IAArB,WACI,OAAO5oG,KAAKkrG,yBAAyBn/E,O,gCAGzC,sBAAI,mCAAoB,C,IAAxB,WACI,OAAO/rB,KAAKmrG,4BAA4Bp/E,O,gCAG5C,YAAAk+E,KAAA,sBACIjqG,KAAKqpG,SAAU,EACfrpG,KAAKipG,UAAU/B,oBAAoB,CAC/BmD,gBAAiBrqG,KAAKqqG,gBACtB3/F,MAAO1K,KAAK0K,MACZy+F,KAAMnpG,KAAKmpG,KACXC,WAAYppG,KAAKopG,WACjBz2F,QAAS3S,KAAK2S,QACdw4E,KAAMnrF,KAAKmrF,KACXub,eAAgB1mG,KAAK0mG,eACrB1nG,MAAOgB,KAAKhB,MACZ0rG,YAAa1qG,KAAK0qG,YAClBhC,QAAS1oG,KAAK0oG,QAAQzuF,KAAI,SAAAquF,GAAO,OAC7B,SAAY,EAAK6B,WAAW7B,EAAI36F,UAChC,QAAW26F,EAAI16F,YAEnBpG,MAAO,EAAAo/F,4BAA4B5mG,KAAKwH,OACxC0+F,cAAelmG,KAAKkmG,cACpBK,mBAAoBvmG,KAAKumG,mBACzBC,cAAexmG,KAAKwmG,cACpB4E,YAAaprG,KAAKorG,YAClBE,cAAetrG,KAAKsrG,iBAIhC,EAnGA,CAA2DlB,GAA9C,EAAA/C,gB,8ECpeb,WAEA,OAIA,SAOA,aAMI,WAAY1hF,GACR3lB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,qBAAI/2C,kCAC9BrW,KAAKurG,cAAgB,IAAIC,EAAiBxrG,MA0BlD,OArBI,YAAAw4F,oBAAA,SAAoB99E,EAAc+wF,GAC9B,IAEI/nF,EAFErlB,EAAI2B,KAAKurG,cAAcG,WAAWhxF,GAUxC,MANiC,iBAAtB+wF,EACP/nF,EAASiG,YAAW,WAAM,OAAAtrB,EAAEgC,YAAWorG,QACH,IAAtBA,GACdA,EAAkBp0E,MAAK,WAAM,OAAAh5B,EAAEgC,aAAW,WAAM,OAAAhC,EAAEgC,aAG/C,IAAI,EAAAF,YAAW,WAClB9B,EAAEgC,UACFupB,aAAalG,OAKrB,YAAAi1E,oBAAA,SAAoBC,EAAgCC,GAChD,OAAO,IAAI,EAAA8S,kBAAkB3rG,KAAKstD,MAAOsrC,EAAWC,IAE5D,EAlCA,GAAa,EAAAzE,8BAqCb,iBAKI,WAAYwX,GAFJ,KAAAC,UAAmC,GAGvC7rG,KAAK8rG,MAAQF,EAAUjT,oBAAoB,EAAAp4F,mBAAmBwrG,KAAM7pF,OAAO8pF,WA8BnF,OA3BI,YAAA3rG,QAAA,WACIL,KAAK6rG,UAAUpgG,OAAS,EACxBzL,KAAK8rG,MAAMzrG,WAGf,YAAAqrG,WAAA,SAAW9jG,GAAX,WACUkpB,EAA4B,CAAElpB,QAAO,GAI3C,OAHA5H,KAAK6rG,UAAU/kF,QAAQgK,GACvB9wB,KAAKisG,UAEE,IAAI,EAAA9rG,YAAW,WAClB,IAAM20B,EAAM,EAAK+2E,UAAUx4E,QAAQvC,GAC/BgE,GAAO,IACP,EAAK+2E,UAAUhlF,OAAOiO,EAAK,GAC3B,EAAKm3E,eAKT,YAAAA,QAAR,WACQjsG,KAAK6rG,UAAUpgG,OAAS,GACxBzL,KAAK8rG,MAAMpxF,KAAO1a,KAAK6rG,UAAU,GAAGjkG,QACpC5H,KAAK8rG,MAAM7B,QAEXjqG,KAAK8rG,MAAMtE,QAGvB,EApCA,I,8ECjDA,WAEA,SACA,QAEA,aAiBI,WAAY0E,EACRtT,EACAC,QADA,IAAAD,MAAgC,EAAAr4F,mBAAmBwrG,WACnD,IAAAlT,MAAA,GAjBa,KAAA5zF,GAAK0mG,EAAkBQ,SAkBpCnsG,KAAKksG,OAASA,EACdlsG,KAAKosG,WAAaxT,EAClB54F,KAAKqsG,UAAYxT,EAiGzB,OA9FI,sBAAW,wBAAS,C,IAApB,WACI,OAAiC74F,KAAKosG,Y,gCAG1C,sBAAW,uBAAQ,C,IAAnB,WACI,OAAOpsG,KAAKqsG,W,gCAGhB,sBAAW,mBAAI,C,IAAf,WACI,OAAOrsG,KAAKssG,O,IAehB,SAAgB5xF,GACZ1a,KAAKssG,MAAQ5xF,EACb1a,KAAK4P,U,gCAdT,sBAAW,sBAAO,C,IAAlB,WACI,OAAO5P,KAAKusG,U,IAgBhB,SAAmB3+F,GACf5N,KAAKusG,SAAW3+F,EAChB5N,KAAK4P,U,gCAfT,sBAAW,oBAAK,C,IAAhB,WACI,OAAO5P,KAAKwsG,Q,IAiBhB,SAAiB74F,GACb3T,KAAKwsG,OAAS74F,EACd3T,KAAK4P,U,gCAhBT,sBAAW,sBAAO,C,IAAlB,WACI,OAAO5P,KAAKysG,U,IAkBhB,SAAmBljG,GACfvJ,KAAKysG,SAAWljG,EAChBvJ,KAAK4P,U,gCAGF,YAAAq6F,KAAP,WACIjqG,KAAK0sG,YAAa,EAClB1sG,KAAK4P,UAGF,YAAA43F,KAAP,WACQxnG,KAAK2sG,gBACL/iF,aAAa5pB,KAAK2sG,gBAEtB3sG,KAAKksG,OAAOU,SAAS5sG,KAAKiF,IAC1BjF,KAAK0sG,YAAa,GAGd,YAAA98F,OAAR,sBACS5P,KAAK0sG,aAGN1sG,KAAK2sG,gBACL/iF,aAAa5pB,KAAK2sG,gBAGtB3sG,KAAK2sG,eAAiBhjF,YAAW,WAC7B,EAAKgjF,oBAAiBrsG,EAGtB,EAAK4rG,OAAOW,YAAY,EAAK5nG,GAAI,EAAKyV,KAClC,EAAKm+E,SACL,EAAKD,UACL,EAAKkU,WACL,EAAKl/F,QACL,EAAKrE,WACV,KAGC,YAAAujG,SAAR,WACI,GAA0B,iBAAf9sG,KAAK2T,YAA4C,IAAf3T,KAAK2T,MAAuB,CACrE,IAAMo5F,EAAuB/sG,KAAK2T,MAAO1O,GACzC,MAAO,QAAO,EAAA+nG,UAAUD,GAAW,EAAAC,UAAUD,GAAWA,GAAO,IAEnE,OAAO/sG,KAAK2T,OAGT,YAAAtT,QAAP,WACIL,KAAKwnG,QAGF,EAAA2E,OAAP,WACI,OAAOR,EAAkBsB,UAAY,IAAM,EAAAj6F,KAAKC,SAE7C,EAAAg6F,UAAY,yBACvB,EAvHA,GAAa,EAAAtB,qB,8ECNA,EAAAqB,UAA2C,CACpD,uBAAwB,wBACxB,sCAAuC,uBACvC,wCAAyC,sBACzC,qCAAsC,wB,g7CCH1C,WAEA,OACA,OAEA,QAEA,aASI,WAAYrnF,GALJ,KAAAunF,0BAA4B,IAAI,EAAA3/E,QACxB,KAAA+rE,uBAA6Ct5F,KAAKktG,0BAA0BnhF,MAKxF/rB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmB0B,aAC7CtX,KAAKmtG,kBAAoB,CAAEC,SAAS,GAiC5C,OA9BI,YAAA/T,eAAA,WACI,OAAOr5F,KAAKmtG,mBAGhB,YAAAE,sBAAA,SAAsBD,GAClB,IAAMtwE,EAAQ,CAAEswE,QAASA,GACrBtwE,IAAU98B,KAAKmtG,oBAInBntG,KAAKmtG,kBAAoBrwE,EACzB98B,KAAKktG,0BAA0Bt/E,KAAKkP,KAGxC,YAAAihE,QAAA,SAAQl4F,GACJ,OAAO7F,KAAKstD,MAAMggD,SAASznG,IAGzB,YAAAm4F,cAAN,SAAoB50F,G,gGAChB,IAAKA,EAAO8V,OAAO6I,OAAOtc,OACtB,MAAM,IAAIxK,MAAM,oCAEpB,GAAI,EAAAwqD,QAAQG,OAASxiD,EAAO8V,QAAU,EAAAusC,QAAQI,QAAUziD,EAAO8V,OAC3D,MAAM,IAAIje,MAAM,mBAAmBmI,EAAO8V,OAAM,KAGxC,SAAMlf,KAAKstD,MAAMigD,eAAenkG,I,OAC5C,OADMvD,EAAM,SACL,CAAP,EAAO,UAAIgd,OAAOhd,YAG1B,EA5CA,GAAa,EAAAguF,sB,8ECPb,WAGA,OAGA,OACA,OACA,SAEA,aAkBI,WAAYluE,EAA0B8vD,GAAtC,WAAsC,KAAAA,sBAhBrB,KAAA+3B,gCAAkC,IAAI,EAAAjgF,QACtC,KAAAkgF,8BAAgC,IAAI,EAAAlgF,QACpC,KAAAmgF,oCAAsC,IAAI,EAAAngF,QAC1C,KAAAogF,iCAAmC,IAAI,EAAApgF,QACvC,KAAAqgF,6BAA+B,IAAI,EAAArgF,QACnC,KAAAsgF,+BAAiC,IAAI,EAAAtgF,QAE7C,KAAAspE,+BAA8E72F,KAAKwtG,gCAAgCzhF,MACnH,KAAA+qE,6BAA+B92F,KAAKytG,8BAA8B1hF,MAClE,KAAAirE,mCAAqCh3F,KAAK0tG,oCAAoC3hF,MAC9E,KAAAgrE,gCAAkC/2F,KAAK2tG,iCAAiC5hF,MACxE,KAAA4qE,4BAA8B32F,KAAK4tG,6BAA6B7hF,MAChE,KAAA6qE,8BAAgC52F,KAAK6tG,+BAA+B9hF,MAKzE/rB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBO,mBAE7CnW,KAAKy1E,oBAAoBkhB,6BAA4B,SAAA/qF,GAAK,SAAKgiG,6BAA6BhgF,KAAKhiB,MACjG5L,KAAKy1E,oBAAoBmhB,+BAA8B,SAAAhrF,GAAK,SAAKiiG,+BAA+BjgF,KAAKhiB,MAkF7G,OAhFI,YAAAkiG,+BAAA,SAA+B7oG,EAAYyxB,GACvC,IAAM8gE,EAAax3F,KAAKy1E,oBAAoBs4B,UAAU9oG,GACtD,GAAKuyF,EAAL,CAOA,GAHI9gE,EAAM5rB,SACN0sF,EAAWwW,cAAct3E,EAAM5rB,SAE/B4rB,EAAM20E,WAAY,CAClB,IAAMA,EAAa30E,EAAM20E,WAAWA,WAAWpxF,IAAIg0F,EAAWC,aAC9D1W,EAAW2W,iBAAiB9C,GAGhC,GAAI30E,EAAM03E,cAAe,CACrB,IAAMA,EAAgB13E,EAAM03E,cAAcn0F,IAAIg0F,EAAW10F,SACzDi+E,EAAW6W,oBAAoBD,GAUnC,GAPI13E,EAAM5rB,SACN9K,KAAKytG,8BAA8B7/E,KAAK,CACpC4pE,WAAU,EACV1sF,QAAS4rB,EAAM5rB,UAInB4rB,EAAM20E,WAAY,CAClB,IAAMhkG,EAAO,EAAA3G,8BAA8BC,UAAU+1B,EAAM20E,WAAWj6F,QAChEi6F,EAAa30E,EAAM20E,WAAWA,WAAWpxF,IAAIg0F,EAAWC,aAC9DluG,KAAKwtG,gCAAgC5/E,KAAK,CACtC4pE,WAAU,EACV6T,WAAU,EACVhkG,KAAI,IAIZ,GAAIqvB,EAAM03E,cAAe,CACfA,EAAgB13E,EAAM03E,cAAcn0F,IAAIg0F,EAAW10F,SACzDvZ,KAAK0tG,oCAAoC9/E,KAAK,CAC1C4pE,WAAU,EACV4W,cAAa,OAIzB,YAAAE,0BAAA,SAA0Bx9E,GACtB,IAAK,IAAM7rB,KAAM6rB,EACb,GAAIA,EAAKlxB,eAAeqF,GAAK,CACzB,IAAMuyF,EAAax3F,KAAKy1E,oBAAoBs4B,UAAU9oG,GAChDoZ,EAAa4vF,EAAWM,aAAaz9E,EAAK7rB,IAC5CuyF,GAAcn5E,GACVm5E,EAAWn5E,aAAeA,IAC1Bm5E,EAAWgX,iBAAiBnwF,GAC5Bre,KAAK2tG,iCAAiC//E,KAAK,CAAE4pE,WAAU,EAAEn5E,WAAU,OAOvF,YAAA03E,gBAAA,WACI,OAAO/1F,KAAKy1E,oBAAoBg5B,gBAGpC,YAAAhY,sBAAA,WACI,OAAOz2F,KAAKy1E,oBAAoBi5B,cAGpC,YAAAhV,+BAAA,SAA+B5uF,GAC3B,OAAO,IAAI6jG,EAAyB3uG,KAAKstD,MAAOxiD,IAGpD,YAAAsxF,mBAAA,SAAmBjxF,GACf,IAAMyjG,EAAMX,EAAWY,kBAAkB1jG,EAAMnL,KAAKy1E,qBACpD,OAAOz1E,KAAKstD,MAAMwhD,uBAAuBF,IAG7C,YAAA3S,QAAA,SAAQC,GACJ,OAAOl8F,KAAKstD,MAAMyhD,SAAS7S,IAGnC,EAxGA,GAAa,EAAAjI,qBA0Gb,iBAOI,WAAY3mC,EAAwBxiD,GAChC9K,KAAKV,IAAMqvG,EAAyBK,KAAK7C,SACzCnsG,KAAKstD,MAAQA,EAEbttD,KAAKstD,MAAM2hD,kCAAkCjvG,KAAKV,IAAK2uG,EAAWnqF,wBAAwB5jB,KAAK4K,IAMvG,OAHI,YAAAzK,QAAA,WACIL,KAAKstD,MAAM4hD,gCAAgClvG,KAAKV,MAb5B,EAAA0vG,KAAO,IAAI,EAAAG,YAAY,4BAenD,EAjBA,GAAa,EAAAR,4B,8ECpHb,iBAEI,WAAoB9+C,GAAA,KAAAA,SAChB7vD,KAAKovG,OAAS,EAMtB,OAHI,YAAAjD,OAAA,WACI,OAAOnsG,KAAK6vD,UAAY7vD,KAAKovG,QAErC,EATA,GAAa,EAAAD,e,8mDCMb,WACA,OAGA,OAEA,QAEA,OACA,QAEA,OAEA,aAiBI,WAAYxpF,EAA0B8vD,GAAtC,WAAsC,KAAAA,sBAhB9B,KAAAvmC,UAAY,IAAI,EAAAM,qBAChB,KAAA6/D,kBAAoB,IAAI,EAAA9hF,QACxB,KAAA+hF,qBAAuB,IAAI,EAAA/hF,QAC3B,KAAAgiF,qBAAuB,IAAI,EAAAhiF,QAC3B,KAAAiiF,uBAAyB,IAAI,EAAAjiF,QAC7B,KAAAkiF,wBAA0B,IAAI,EAAAliF,QAE7B,KAAAutE,iBAA8C96F,KAAKqvG,kBAAkBtjF,MACrE,KAAA6uE,oBAAiD56F,KAAKsvG,qBAAqBvjF,MAC3E,KAAA2uE,oBAA4D16F,KAAKuvG,qBAAqBxjF,MACtF,KAAAivE,sBAAmDh7F,KAAKwvG,uBAAuBzjF,MAC/E,KAAAgvE,uBAAiE/6F,KAAKyvG,wBAAwB1jF,MAG/F,KAAA2jF,iBAAmB,IAAIzjG,IAG3BjM,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBQ,gBAC7CpW,KAAKkvC,UAAUnkC,KACX/K,KAAKy1E,oBAAoBk6B,mBAAkB,SAAApuF,G,YACvC,IAAuB,QAAAA,GAAS,8BAAE,CAA7B,IAAM,EAAQ,QACf,EAAK8tF,kBAAkBzhF,KAAK,EAASiyB,W,sGAKjD7/C,KAAKkvC,UAAUnkC,KACX/K,KAAKy1E,oBAAoBm6B,sBAAqB,SAAAruF,G,YAC1C,IAAmB,QAAAA,GAAS,8BAAE,CAAzB,IAAMuP,EAAI,QACX,EAAKw+E,qBAAqB1hF,KAAKkD,EAAK+uB,W,sGA+MxD,OA1MI,YAAAgwD,wBAAA,SAAwBC,EAAyBC,EAAmBC,GAChE,IACMC,EADM,UAAIptF,OAAOitF,GACDxkG,WAEhBwlB,EAAO9wB,KAAKy1E,oBAAoB9zD,YAAYsuF,GAC9Cn/E,IACA9wB,KAAKsvG,qBAAqB1hF,KAAKkD,EAAK+uB,UACpC/uB,EAAKi4C,iBAAiBinC,GACtBhwG,KAAKqvG,kBAAkBzhF,KAAKkD,EAAK+uB,YAGzC,YAAAqwD,kBAAA,SAAkBC,GACd,IACMF,EADM,UAAIptF,OAAOstF,GACD7kG,WAChBwlB,EAAO9wB,KAAKy1E,oBAAoB9zD,YAAYsuF,GAClDjwG,KAAKowG,yBAAyBD,GAAQ,GAClCr/E,GACA9wB,KAAKwvG,uBAAuB5hF,KAAKkD,EAAK+uB,WAIxC,YAAAwwD,qBAAN,SAA2BF,EAAuBrwC,EAAsCwwC,G,6GAC9EzqG,EAAM,UAAIgd,OAAOstF,GAAQ7kG,WACzBilG,EAAoC,GACtCC,GAAa,EAEXC,EAAmB9mF,YAAW,WAAM,OAAA6mF,GAAa,IAAMF,EAAc,K,iBAEvE,O,sBAAA,GAAMtwG,KAAKyvG,wBAAwB5hF,UAAS,SAAM6iF,GAAS,qC,4DACvD,GAAIF,EACA,MAAO,CAAP,GAAO,G,+CAGDG,EAAe3wG,KAAKy1E,oBAAoB9zD,YAAY9b,KAE9C,EAAa8qG,EAAY,SACjC,GAAM3wG,KAAK4wG,8BAA8B,CACrC/wD,SAAQ,EAAEigB,OAAM,EAAE4wC,UAAS,EAC3BG,OAAQ,SAAAC,GAAa,OAAAP,EAAWxlG,KAAK+lG,QAJzC,M,OAEA,S,sDAMJ/jF,QAAQC,MAAM,G,aAElB,MAAO,CAAP,GAAQwjF,c,cAhBZ,S,oBAmBA5mF,aAAa6mF,G,WAEjB,MAAO,CAAP,EAAOF,WAIK,YAAAK,8BAAhB,SAA8C,G,IAC1C/wD,EAAA,EAAAA,SAAUigB,EAAA,EAAAA,OAAQ4wC,EAAA,EAAAA,UAAWG,EAAA,EAAAA,O,gGAoB7B,OAZM7oC,EAA4C,GAClD0oC,EAAUjyG,OAAO6vB,OAAO,CACpBuxB,SAAQ,EAAEigB,OAAM,EAChB3xC,UAAA,SAAUtuB,GACN,GAAIpB,OAAO4vB,SAAS25C,GAChB,MAAM,IAAI/mE,MAAM,qCAEpB+mE,EAASj9D,KAAKlL,OAGtBpB,OAAO6vB,OAAO05C,GAEd,GAAMz5C,QAAQE,IAAIu5C,GAAU3wC,MAAK,SAAA05E,GAAY,OAAAA,EAAS5kG,SAAQ,SAAAX,GACtD1C,MAAMC,QAAQyC,IACdA,EAAMW,SAAQ,SAAAhB,GACN,EAAAzE,SAASD,WAAW0E,IACpB0lG,EAAOG,EAAUv2F,aAAatP,c,cAJ9C,S,YAYJ,YAAAilG,yBAAA,SAAyBD,EAAuB5nC,GAC5C,IACM0nC,EADM,UAAIptF,OAAOstF,GACD7kG,WAChBwlB,EAAO9wB,KAAKy1E,oBAAoB9zD,YAAYsuF,GAC9Cn/E,IACAA,EAAKg4C,cAAcP,GACnBvoE,KAAKuvG,qBAAqB3hF,KAAK,CAC3BiyB,SAAU/uB,EAAK+uB,SACfoxD,eAAgB,OAI5B,YAAAC,oBAAA,SAAoBf,EAAuBvkG,EAAsB28D,GAC7D,IACM0nC,EADM,UAAIptF,OAAOstF,GACD7kG,WAChBwlB,EAAO9wB,KAAKy1E,oBAAoB9zD,YAAYsuF,GAC9Cn/E,IACAA,EAAKg4C,cAAcP,GACnBz3C,EAAK43C,SAAS98D,GACd5L,KAAKuvG,qBAAqB3hF,KAAK,CAC3BiyB,SAAU/uB,EAAK+uB,SACfoxD,eAAgBrlG,EAAEqxC,QAAQhjC,KAAI,SAAAwa,GAC1B,OACIruB,MAAO4qG,EAAUz3F,QAAQkb,EAAOruB,OAChC+qG,YAAa18E,EAAO08E,YACpBC,YAAa38E,EAAO28E,YACpB12F,KAAM+Z,EAAO/Z,aAKjC,YAAA8/E,mBAAA,WACI,OAAOx6F,KAAKy1E,oBAAoB47B,gBAGpC,YAAAC,gBAAA,SAAgBlmG,GACZ,GAAIA,EACA,OAAOpL,KAAKy1E,oBAAoB9zD,YAAYvW,EAASE,aAYvD,YAAAisF,aAAN,SAAmB1xF,EAAUiF,G,oGAGzB,GADMymG,EAAkBvxG,KAAK0vG,iBAAiB9wG,IAAIiH,EAAIyF,YAGlD,MAAO,CAAP,EAAOimG,G,iBASP,O,uBAJM,EAAWvxG,KAAKwxG,aAAa3rG,EAAKiF,GAExC9K,KAAK0vG,iBAAiBnkG,IAAI1F,EAAIyF,WAAY,GAE1C,GAAM,G,OAEN,OAFA,SAEO,CAAP,EAAO,G,OAEP,O,WAAO,CAAP,EAAOijB,QAAQ4I,OAAO,I,cAGtBn3B,KAAK0vG,iBAAiB7oG,OAAOhB,EAAIyF,Y,6BAInC,YAAAiwF,aAAN,SAAmB11F,G,gGAEf,OADM4rG,EAASzxG,KAAKy1E,oBAAoB9zD,YAAY9b,EAAIyF,aAE7C,CAAP,EAAOmmG,GAGX,GAAMzxG,KAAKstD,MAAMokD,iBAAiB7rG,I,OAClC,OADA,SACO,CAAP,EAAO7F,KAAKy1E,oBAAoB9zD,YAAY9b,EAAIyF,qBAGtC,YAAAkmG,aAAd,SAA2B3rG,EAAUiF,G,wGAoBjC,OAlBIA,IACIyT,OAAS,EACTzT,EAAQyT,YACF,EAAiBzT,EAAQyT,UAAvBzb,EAAK,QAAEC,EAAG,MAClBwb,EAAY,CACR/E,gBAAiB1W,EAAM/B,KACvB0Y,YAAa3W,EAAMb,UACnByX,cAAe3W,EAAIhC,KACnB8B,UAAWE,EAAId,YAGvBq1F,EAAkB,CACd/4E,UAAS,EACTD,cAAexT,EAAQwT,cACvB+4E,QAASvsF,EAAQusF,QACjBh5E,WAAYvT,EAAQuT,aAG5B,GAAMre,KAAKstD,MAAMqkD,iBAAiB9rG,EAAKyxF,I,OACvC,OADA,SACO,CAAP,EAAOt3F,KAAKy1E,oBAAoB9zD,YAAY9b,EAAIyF,qBAG9C,YAAAgwF,mBAAN,SAAyBxwF,G,mEACrB,MAAO,CAAP,EAAO9K,KAAKstD,MAAMskD,mBAAmB9mG,GAASusB,MAAK,SAAAvG,GAAQ,iBAAIjO,OAAOiO,cAG1E,YAAA+gF,qBAAA,SAAqB1pC,EAAgBC,GACjC,EAAAypC,qBAAqB1pC,EAAQC,IAGrC,EA7OA,GAAa,EAAA8rB,oB,8ECTb,SAAgB4d,EAAS1lG,GACrB,OAAIA,EAAI,EACG,EAEPA,EANY,sBASL,EAAJA,EAPX,aAUA,MAMI,SAAY0W,EAAe4oD,GACvB1rE,KAAK8iB,MAAQA,EACb9iB,KAAK0rE,UAAYA,GARZ,EAAAqmC,yBAYb,iBAiBI,WAAY5kD,GACRntD,KAAKmtD,OAASA,EACdntD,KAAKgyG,UAAY,IAAIhoC,YAAY7c,EAAO1hD,QACxCzL,KAAKiyG,oBAAsB,IAAIC,WAAW,GAC1ClyG,KAAKiyG,oBAAoB,IAAM,EAoJvC,OAjJW,YAAAE,SAAP,WACI,OAAOnyG,KAAKmtD,OAAO1hD,QAGhB,YAAAw+D,aAAP,SAAoBmoC,EAAqBnoC,GACrCmoC,EAAcN,EAASM,GACvB,IAAMC,EAAYryG,KAAKmtD,OACjBmlD,EAAetyG,KAAKgyG,UACpBO,EAAkBtoC,EAAax+D,OAErC,OAAwB,IAApB8mG,IAIJvyG,KAAKmtD,OAAS,IAAI6c,YAAYqoC,EAAU5mG,OAAS8mG,GACjDvyG,KAAKmtD,OAAO5hD,IAAI8mG,EAAUrpE,SAAS,EAAGopE,GAAc,GACpDpyG,KAAKmtD,OAAO5hD,IAAI8mG,EAAUrpE,SAASopE,GAAcA,EAAcG,GAC/DvyG,KAAKmtD,OAAO5hD,IAAI0+D,EAAcmoC,GAE1BA,EAAc,EAAIpyG,KAAKiyG,oBAAoB,KAC3CjyG,KAAKiyG,oBAAoB,GAAKG,EAAc,GAGhDpyG,KAAKgyG,UAAY,IAAIhoC,YAAYhqE,KAAKmtD,OAAO1hD,QACzCzL,KAAKiyG,oBAAoB,IAAM,GAC/BjyG,KAAKgyG,UAAUzmG,IAAI+mG,EAAatpE,SAAS,EAAGhpC,KAAKiyG,oBAAoB,GAAK,KAEvE,IAGJ,YAAA5nC,YAAP,SAAmBvnD,EAAe9jB,GAI9B,OAHA8jB,EAAQgvF,EAAShvF,GACjB9jB,EAAQ8yG,EAAS9yG,GAEbgB,KAAKmtD,OAAOrqC,KAAW9jB,IAG3BgB,KAAKmtD,OAAOrqC,GAAS9jB,EACjB8jB,EAAQ,EAAI9iB,KAAKiyG,oBAAoB,KACrCjyG,KAAKiyG,oBAAoB,GAAKnvF,EAAQ,IAEnC,IAGJ,YAAAonD,aAAP,SAAoBsoC,EAAoBC,GACpCD,EAAaV,EAASU,GACtBC,EAAMX,EAASW,GAEf,IAAMJ,EAAYryG,KAAKmtD,OACjBmlD,EAAetyG,KAAKgyG,UAE1B,GAAIQ,GAAcH,EAAU5mG,OACxB,OAAO,EAGX,IAAMinG,EAASL,EAAU5mG,OAAS+mG,EAKlC,OAJIC,GAAOC,IACPD,EAAMC,GAGE,IAARD,IAIJzyG,KAAKmtD,OAAS,IAAI6c,YAAYqoC,EAAU5mG,OAASgnG,GACjDzyG,KAAKmtD,OAAO5hD,IAAI8mG,EAAUrpE,SAAS,EAAGwpE,GAAa,GACnDxyG,KAAKmtD,OAAO5hD,IAAI8mG,EAAUrpE,SAASwpE,EAAaC,GAAMD,GAEtDxyG,KAAKgyG,UAAY,IAAIhoC,YAAYhqE,KAAKmtD,OAAO1hD,QACzC+mG,EAAa,EAAIxyG,KAAKiyG,oBAAoB,KAC1CjyG,KAAKiyG,oBAAoB,GAAKO,EAAa,GAE3CxyG,KAAKiyG,oBAAoB,IAAM,GAC/BjyG,KAAKgyG,UAAUzmG,IAAI+mG,EAAatpE,SAAS,EAAGhpC,KAAKiyG,oBAAoB,GAAK,KAEvE,IAGJ,YAAAU,cAAP,WACI,OAA2B,IAAvB3yG,KAAKmtD,OAAO1hD,OACL,EAEJzL,KAAK4yG,qBAAqB5yG,KAAKmtD,OAAO1hD,OAAS,IAGnD,YAAA0/D,oBAAP,SAA2BroD,GACvB,OAAIA,EAAQ,EACD,GAGXA,EAAQgvF,EAAShvF,GACV9iB,KAAK4yG,qBAAqB9vF,KAG7B,YAAA8vF,qBAAR,SAA6B9vF,GACzB,GAAIA,GAAS9iB,KAAKiyG,oBAAoB,GAClC,OAAOjyG,KAAKgyG,UAAUlvF,GAG1B,IAAI0vF,EAAaxyG,KAAKiyG,oBAAoB,GAAK,EAC5B,IAAfO,IACAxyG,KAAKgyG,UAAU,GAAKhyG,KAAKmtD,OAAO,GAChCqlD,KAGA1vF,GAAS9iB,KAAKmtD,OAAO1hD,SACrBqX,EAAQ9iB,KAAKmtD,OAAO1hD,OAAS,GAGjC,IAAK,IAAI1N,EAAIy0G,EAAYz0G,GAAK+kB,EAAO/kB,IACjCiC,KAAKgyG,UAAUj0G,GAAKiC,KAAKgyG,UAAUj0G,EAAI,GAAKiC,KAAKmtD,OAAOpvD,GAG5D,OADAiC,KAAKiyG,oBAAoB,GAAK9pF,KAAK8hB,IAAIjqC,KAAKiyG,oBAAoB,GAAInvF,GAC7D9iB,KAAKgyG,UAAUlvF,IAGnB,YAAA0oD,WAAP,SAAkBqnC,GACdA,EAAmB1qF,KAAK0kB,MAAMgmE,GAG9B7yG,KAAK2yG,gBAQL,IANA,IAEIxxD,EACA2xD,EACAC,EAJA9xD,EAAM,EACNC,EAAOlhD,KAAKmtD,OAAO1hD,OAAS,EAKzBw1C,GAAOC,GAMV,GALAC,EAAMF,GAAQC,EAAOD,GAAO,EAAK,EAK7B4xD,GAFJE,GADAD,EAAU9yG,KAAKgyG,UAAU7wD,IACJnhD,KAAKmtD,OAAOhM,IAG7BD,EAAOC,EAAM,MACV,MAAI0xD,GAAoBC,GAG3B,MAFA7xD,EAAME,EAAM,EAMpB,OAAO,IAAI4wD,EAAuB5wD,EAAM0xD,EAAmBE,IAEnE,EAzKA,GAAa,EAAAxnC,qB,8ECTA,EAAAynC,sBAAwB,oCAsBxB,EAAAC,oBAbb,SAA0BC,QAAA,IAAAA,MAAA,IAEtB,IADA,IAAI9hG,EAAS,yBACJrT,EAAI,EAAGA,EAAI,EAAAi1G,sBAAsBvnG,OAAQ1N,IAC1Cm1G,EAAa7/E,QAAQ,EAAA2/E,sBAAsBj1G,KAAO,IAGtDqT,GAAU,KAAO,EAAA4hG,sBAAsBj1G,IAG3C,OADAqT,GAAU,SACH,IAAI2/B,OAAO3/B,EAAQ,KAIK+hG,GAEnC,qCAA0C/qC,GACtC,IAAI/lE,EAAiB,EAAA4wG,oBAErB,GAAI7qC,GAAmBA,aAA0Br3B,OAC7C,GAAKq3B,EAAe74C,OAUhBltB,EAAS+lE,MAVe,CACxB,IAAIx2C,EAAQ,IACRw2C,EAAe5lB,aACf5wB,GAAS,KAETw2C,EAAepG,YACfpwC,GAAS,KAEbvvB,EAAS,IAAI0uC,OAAOq3B,EAAeh3D,OAAQwgB,GAQnD,OAFAvvB,EAAO+3C,UAAY,EAEZ/3C,GAwDX,yBAA8B8W,EAAgBivD,EAAwB1tD,EAAc04F,GAIhFhrC,EAAehuB,UAAY,EAC3B,IAAMzlB,EAAQyzC,EAAexzC,KAAKla,GAClC,GAAKia,EAAL,CAIA,IAAM3tB,EAAM2tB,EAAM,GAAGtB,QAAQ,MAAQ,EAtCzC,SAA0Bla,EAAgBivD,EAAwB1tD,EAAc04F,GAK5E,IAGIz+E,EAHEsB,EAAM9c,EAAS,EAAIi6F,EAIzB,IAHAhrC,EAAehuB,UAAY,EAGpBzlB,EAAQyzC,EAAexzC,KAAKla,IAAO,CAEtC,GAAIia,EAAM7R,MAASmT,EAEf,OAEG,GAAImyC,EAAehuB,WAAankB,EAEnC,MAAO,CACHo9E,KAAM1+E,EAAM,GACZlb,YAAa25F,EAAa,EAAIz+E,EAAM7R,MACpCjgB,UAAWuwG,EAAa,EAAIhrC,EAAehuB,YAoBjDk5D,CAAiBn6F,EAAQivD,EAAgB1tD,EAAM04F,GAjEzD,SAA0Bj6F,EAAgBivD,EAAwB1tD,EAAc04F,GAG5E,IAQIz+E,EAREsB,EAAM9c,EAAS,EAAIi6F,EACnBtwG,EAAQ4X,EAAK6rB,YAAY,IAAKtQ,EAAM,GAAK,EAC3ClzB,EAAM2X,EAAK2Y,QAAQ,IAAK4C,GAO5B,KANa,IAATlzB,IACAA,EAAM2X,EAAKjP,QAGf28D,EAAehuB,UAAYt3C,EAEpB6xB,EAAQyzC,EAAexzC,KAAKla,IAC/B,GAAIia,EAAM7R,OAAUmT,GAAOmyC,EAAehuB,WAAankB,EACnD,MAAO,CACHo9E,KAAM1+E,EAAM,GACZlb,YAAa25F,EAAa,EAAIz+E,EAAM7R,MACpCjgB,UAAWuwG,EAAa,EAAIhrC,EAAehuB,WAkDjDm5D,CAAiBp6F,EAAQivD,EAAgB1tD,EAAM04F,GAOrD,OAFAhrC,EAAehuB,UAAY,EAEpBpzC,K,6BCxIX,IAAYo8F,E,iDAAZ,SAAYA,GAIR,mBAKA,qBAKA,6BAKA,2BAKA,mCAKA,qCA7BJ,CAAYA,EAAA,EAAAA,wBAAA,EAAAA,sBAAqB,KAgCjC,+BAAoCoQ,GAChC,OAAQA,GACJ,KAAKpQ,EAAsBqQ,KACvB,MAAO,OACX,KAAKrQ,EAAsBsQ,MACvB,MAAO,QACX,KAAKtQ,EAAsBuQ,UACvB,MAAO,YACX,KAAKvQ,EAAsBwQ,SACvB,MAAO,YACX,KAAKxQ,EAAsByQ,aACvB,MAAO,gBACX,KAAKzQ,EAAsB0Q,cACvB,MAAO,iBACX,QACI,MAAM,IAAI7yG,MAAM,+C,8ECxD5B,WAKA,SAEA,aAII,WAAY0kB,GACR3lB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,qBAAIz2C,8BAWtC,OARI,YAAAmiF,oBAAA,SAAoBx6F,EAAcy1G,GAE9B,GADAz1G,EAAOA,EAAKypB,OAIR,OAAO,IAAI,EAAAisF,kBAAkB11G,EAAM0B,KAAKstD,MAAOymD,GAF/C,MAAM,IAAI9yG,MAAM,+CAK5B,EAhBA,GAAa,EAAAuzF,gC,8ECJb,iBAII,WAAqBl2F,EAAsBgvD,EAAmDymD,GAAzE,KAAAz1G,OAAsB,KAAAgvD,QAAmD,KAAAymD,aAyClG,OAtCI,YAAA1zG,QAAA,sBACSL,KAAKovC,UACNpvC,KAAKstD,MAAMs/C,SAAS5sG,KAAK1B,MAAM+4B,MAAK,WAChC,EAAK+X,UAAW,MAK5B,YAAA1lC,OAAA,SAAO1K,GACHgB,KAAKkN,WACLlN,KAAKstD,MAAM2mD,QAAQj0G,KAAK1B,KAAMU,EAAOgB,KAAK+zG,aAG9C,YAAAG,WAAA,SAAWl1G,GACPgB,KAAKkN,WACLlN,KAAK0J,OAAO1K,EAAQ,OAGxB,YAAA++C,MAAA,WACI/9C,KAAKkN,WACLlN,KAAKstD,MAAM6mD,OAAOn0G,KAAK1B,OAG3B,YAAA2rG,KAAA,SAAK3rF,GACDte,KAAKkN,WACLlN,KAAKstD,MAAM8mD,QAAQp0G,KAAK1B,OAAQggB,IAGpC,YAAAkpF,KAAA,WACIxnG,KAAKkN,WACLlN,KAAKstD,MAAM+mD,OAAOr0G,KAAK1B,OAGnB,YAAA4O,SAAR,WACI,GAAIlN,KAAKovC,SACL,MAAM,IAAInuC,MAAM,4BAG5B,EA7CA,GAAa,EAAA+yG,qB,+eCHb,YAEA,OAEA,OACA,QAOA,aAeI,WAAYruF,GAXK,KAAA2uF,WAAa,IAAIroG,IAEjB,KAAAsoG,0BAA4B,IAAI,EAAAhnF,QACxC,KAAA+oE,mBAA4Ct2F,KAAKu0G,0BAA0BxoF,MAEnE,KAAAyoF,yBAA2B,IAAI,EAAAjnF,QACvC,KAAAgpE,kBAA2Cv2F,KAAKw0G,yBAAyBzoF,MAEjE,KAAA0oF,iCAAmC,IAAI,EAAAlnF,QAC/C,KAAA8oE,0BAA+Dr2F,KAAKy0G,iCAAiC1oF,MAG1G/rB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBY,eA0ErD,OAvEI,sBAAI,wBAAS,C,IAAb,WACI,OAAO,EAAIxW,KAAKs0G,WAAWnnD,W,gCAG/B,YAAAosC,eAAA,SAAeC,EAAuDC,EAAoBj9E,GACtF,IAAI1R,EAEAA,EADyB,iBAAlB0uF,EACGA,EAEA,CACNl7F,KAAMk7F,EACNC,UAAWA,EACXj9E,UAAWA,GAGnB,IAAMvX,EAAK,mBAAmB,EAAA+N,KAAKC,QAEnC,OADAjT,KAAKstD,MAAMonD,gBAAgBzvG,EAAI6F,GACxB9K,KAAK20G,eAAe1vG,EAAI6F,EAAQxM,MAAQ,aAGzC,YAAAq2G,eAAV,SAAyB1vG,EAAY3G,GACjC,IAAIs2G,EAAW50G,KAAKs0G,WAAW11G,IAAIqG,GAMnC,OALK2vG,IACDA,EAAW,IAAIC,EAAgB70G,KAAKstD,OACpCttD,KAAKs0G,WAAW/oG,IAAItG,EAAI2vG,IAE5BA,EAASt2G,KAAOA,EACTs2G,GAGX,YAAAE,iBAAA,SAAiB7vG,EAAY3G,GACzB,IAAMs2G,EAAW50G,KAAK20G,eAAe1vG,EAAI3G,GACzCs2G,EAAS3vG,GAAGgiB,QAAQhiB,GACpBjF,KAAKw0G,yBAAyB5mF,KAAKgnF,IAGvC,YAAAG,qBAAA,SAAqB9vG,EAAY3G,GAC7B,IAAMs2G,EAAW50G,KAAKs0G,WAAW11G,IAAIqG,GACjC2vG,IACAA,EAASt2G,KAAOA,IAIxB,YAAA02G,gBAAA,SAAgB/vG,EAAYgwG,GACxB,IAAML,EAAW50G,KAAKs0G,WAAW11G,IAAIqG,GACjC2vG,IAEAA,EAASM,kBAAkBjuF,QAAQguF,GAEnCL,EAASM,kBAAoB,IAAI,EAAArjE,SACjC+iE,EAASM,kBAAkBjuF,QAAQguF,KAI3C,YAAAE,gBAAA,SAAgBlwG,GACZ,IAAM2vG,EAAW50G,KAAKs0G,WAAW11G,IAAIqG,GACjC2vG,IACA50G,KAAKu0G,0BAA0B3mF,KAAKgnF,GACpC50G,KAAKs0G,WAAWztG,OAAO5B,KAK/B,sBAAI,6BAAc,C,IAAlB,WACI,OAAOjF,KAAKo1G,kBAAoBp1G,KAAKs0G,WAAW11G,IAAIoB,KAAKo1G,wBAAqB90G,G,gCAElF,YAAA+0G,wBAAA,SAAwBpwG,GACpBjF,KAAKo1G,iBAAmBnwG,EACxBjF,KAAKy0G,iCAAiC7mF,KAAK5tB,KAAKw2F,iBAGxD,EA1FA,GAAa,EAAAlC,yBA4Fb,iBAWI,WAA6BhnC,GAAA,KAAAA,QAPpB,KAAAroD,GAAK,IAAI,EAAA4sC,SAElB,KAAAqjE,kBAAoB,IAAI,EAAArjE,SAuB5B,OAtBI,sBAAI,wBAAS,C,IAAb,WACI,OAAO7xC,KAAKk1G,kBAAkBx1E,S,gCAKlC,YAAA41E,SAAA,SAAS56F,EAAc66F,GAAvB,gBAAuB,IAAAA,OAAA,GACnBv1G,KAAKiF,GAAGy6B,QAAQrI,MAAK,SAAApyB,GAAM,SAAKqoD,MAAMkoD,UAAUvwG,EAAIyV,EAAM66F,OAG9D,YAAAtL,KAAA,SAAK3rF,GAAL,WACIte,KAAKiF,GAAGy6B,QAAQrI,MAAK,SAAApyB,GAAM,SAAKqoD,MAAM24C,MAAMhhG,EAAIqZ,OAGpD,YAAAkpF,KAAA,sBACIxnG,KAAKiF,GAAGy6B,QAAQrI,MAAK,SAAApyB,GAAM,SAAKqoD,MAAMm6C,MAAMxiG,OAGhD,YAAA5E,QAAA,sBACIL,KAAKiF,GAAGy6B,QAAQrI,MAAK,SAAApyB,GAAM,SAAKqoD,MAAMs/C,SAAS3nG,OAGvD,EA7BA,GAAa,EAAA4vG,mB,8mDCvGb,WAkBA,OACA,SACA,SA2BA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SAEA,SACA,SACA,SAGA,SAwBA,aASI,WACIlvF,EACiBpE,EACAk0E,GADA,KAAAl0E,YACA,KAAAk0E,WANb,KAAA5nC,OAAS,EACT,KAAA4nD,YAAc,IAAIxpG,IAMtBjM,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBgB,gBAC7C5W,KAAK8+C,YAAc,IAAI,EAAA42D,YAAY/vF,GAua3C,OApaI,sBAAI,qCAAsB,C,IAA1B,WACI,OAAO3lB,KAAK8+C,YAAY4/C,wB,gCAG5B,YAAAJ,aAAA,WACI,OAAOt+F,KAAKstD,MAAMqoD,iBAGtB,YAAAnX,eAAA,SAAe34F,EAAU24C,GAAzB,WACI,OAAOx+C,KAAKstD,MAAMsoD,gBAAgB/vG,EAAK24C,GAAYnnB,MAAK,WACpD,IAAM3V,EAAM,EAAKH,UAAU+vF,gBAAgBzrG,GAC3C,IAAK6b,EACD,MAAM,IAAIzgB,MAAM,4BAA8B4E,EAAIyF,YAEtD,OAAOoW,EAAIm+B,aAInB,YAAAg/C,yBAAA,SAAyB1kF,EAAkB2kF,GAC/B,IAAA+W,EAAA,EAAAA,YAEJA,EACA71G,KAAKuhB,UAAUswF,qBAAqB13F,EAAU07F,GAG9C71G,KAAKuhB,UAAUswF,qBAAqB13F,EAAU,MAGlD,IAAM0zC,EAAS7tD,KAAK81G,aAEdnqB,EAA0C,CAC5CoqB,SAAUjX,EAAciX,SACxB7S,SAAUpE,EAAcoE,SACxB8S,aAAcC,EAAoBnX,EAAckX,cAChDH,YAAaK,EAAgBpX,EAAc+W,aAC3CM,iBAAkBC,EAAqBtX,EAAcqX,mBAIzD,OADAn2G,KAAKstD,MAAM+oD,0BAA0BxoD,EAAQ1zC,EAAUwxE,GAChD3rF,KAAKs2G,iBAAiBzoD,IAGzB,YAAAioD,WAAR,WACI,OAAO91G,KAAK6tD,UAGR,YAAAyoD,iBAAR,SAAyBzoD,GAAzB,WACI,OAAO,IAAI,EAAA1tD,YAAW,WAClB,EAAKs1G,YAAY5uG,OAAOgnD,GACxB,EAAKP,MAAMipD,YAAY1oD,OAIvB,YAAA2oD,cAAR,SAAsBC,GAClB,IAAM5oD,EAAS7tD,KAAK81G,aAEpB,OADA91G,KAAKy1G,YAAYlqG,IAAIsiD,EAAQ4oD,GACtB5oD,GAIH,YAAA6oD,YAAR,SAA0BhzF,EAAgB+tB,EAAkCplB,GACxE,IAAMoqF,EAAUz2G,KAAKy1G,YAAY72G,IAAI8kB,GACrC,OAAM+yF,aAAmBhlE,EAGlBplB,EAAYoqF,GAFRloF,QAAQ4I,OAAO,IAAIl2B,MAAM,sBAKhC,YAAA01G,0BAAR,SAAkC13F,GAAlC,WACI,OAAInW,MAAMC,QAAQkW,GACPA,EAAShF,KAAI,SAAA28F,GAAO,SAAKC,4BAA4BD,MAGzD,CAAC52G,KAAK62G,4BAA4B53F,KAGrC,YAAA43F,4BAAR,SAAoC53F,GAChC,MAAwB,iBAAbA,EACA,CACH63F,aAAa,EACb38F,SAAU8E,GAIdA,EACO,CACH63F,aAAa,EACb38F,SAAU8E,EAAS9E,SACnB+E,OAAQD,EAASC,OACjBvZ,QAASsZ,EAAStZ,cAL1B,GAaJ,YAAAoxG,wBAAA,SAAwBrzF,EAAgBtY,EAAyBxE,EAC7D0lB,EAA4BsT,GAC5B,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAszF,mBAAmB,SAAAP,GAAW,OAAAA,EAAQQ,uBAAuB,UAAIp0F,OAAOzX,GAAWxE,EAAU0lB,EAASsT,OAG1I,YAAAs3E,uBAAA,SAAuBxzF,EAAgBtY,EAAyBxE,EAAoBuwG,EAAwBv3E,GACxG,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAszF,mBAAmB,SAAAP,GAAW,OAAAA,EAAQW,sBAAsB,UAAIv0F,OAAOzX,GAAWxE,EAAUuwG,EAAYv3E,OAG5I,YAAAy3E,wBAAA,SAAwB3zF,EAAgBze,GAAxC,WACIjF,KAAK02G,YAAYhzF,EAAQ,EAAAszF,mBAAmB,SAAMP,GAAO,gEAAI,SAAAA,EAAQa,uBAAuBryG,cAGhG,YAAA85F,+BAAA,SAA+B9/E,EAAkCg7E,EAAwC+E,EACrG+U,GACA,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAQ,kBAAkB/c,EAAUj6F,KAAKuhB,UAAWvhB,KAAKy1F,WAEvF,OADAz1F,KAAKstD,MAAMiqD,2BAA2B1pD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,GAAW+/E,EAAmB,EAAAgY,kBAAkBQ,kBAAkBvd,IACpJj6F,KAAKs2G,iBAAiBzoD,IAKjC,YAAA4pD,mBAAA,SAAmB/zF,EAAgBtY,EAAyBxE,EAAoBg5B,GAC5E,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAg0F,mBAAmB,SAAAjB,GAAW,OAAAA,EAAQkB,kBAAkB,UAAI90F,OAAOzX,GAAWxE,EAAUg5B,OAG5H,YAAAq/D,2BAAA,SAA2BhgF,EAAkCg7E,EAAoC8Z,GAC7F,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAkB,kBAAkBzd,EAAUj6F,KAAKuhB,YAEvE,OADAvhB,KAAKstD,MAAMsqD,4BAA4B/pD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IACnFjf,KAAKs2G,iBAAiBzoD,IAKjC,YAAAgqD,oBAAA,SAAoBn0F,EAAgBtY,EAAyBxE,EAAoBg5B,GAC7E,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAo0F,oBAAoB,SAAArB,GAAW,OAAAA,EAAQsB,mBAAmB,UAAIl1F,OAAOzX,GAAWxE,EAAUg5B,OAG9H,YAAAs/D,4BAAA,SAA4BjgF,EAAkCg7E,EAAqC8Z,GAC/F,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAsB,mBAAmB7d,EAAUj6F,KAAKuhB,YAExE,OADAvhB,KAAKstD,MAAM0qD,6BAA6BnqD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IACpFjf,KAAKs2G,iBAAiBzoD,IAKjC,YAAAoqD,sBAAA,SACIv0F,EAAgBtY,EAAyBxE,EAAoB0lB,EAA+BsT,GAE5F,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAw0F,sBAAsB,SAAAzB,GAAW,OAAAA,EAAQ0B,qBAAqB,UAAIt1F,OAAOzX,GAAWxE,EAAUg5B,EAAOtT,OAGzI,YAAA8rF,sBAAA,SAAsB10F,EAAgBze,GAAtC,WACIjF,KAAK02G,YAAYhzF,EAAQ,EAAAw0F,sBAAsB,SAAMzB,GAAO,gEAAI,SAAAA,EAAQ4B,qBAAqBpzG,cAGjG,YAAAk6F,8BAAA,SAA8BlgF,EAAkCg7E,EAAuCmF,EACnG2U,GACA,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAA0B,qBAAqBje,EAAUj6F,KAAKuhB,YAE1E,OADAvhB,KAAKstD,MAAMgrD,+BAA+BzqD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,GAAWmgF,GACjGp/F,KAAKs2G,iBAAiBzoD,IAKjC,YAAA8wC,eAAA,SAAevzF,GACX,OAAOpL,KAAK8+C,YAAY6/C,eAAevzF,IAG3C,YAAAwzF,2BAAA,SAA2BtgG,GACvB,OAAO0B,KAAK8+C,YAAY8/C,2BAA2BtgG,IAKvD,YAAAi6G,uBAAA,SAAuB70F,EAAgBtY,EAAyBxE,EAAoBg5B,GAChF,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAA80F,uBAAuB,SAAA/B,GAAW,OAAAA,EAAQgC,sBAAsB,UAAI51F,OAAOzX,GAAWxE,EAAUg5B,OAGpI,YAAA2/D,+BAAA,SAA+BtgF,EAAkCg7E,EAAwC8Z,GACrG,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAgC,sBAAsBve,EAAUj6F,KAAKuhB,YAE3E,OADAvhB,KAAKstD,MAAMorD,gCAAgC7qD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IACvFjf,KAAKs2G,iBAAiBzoD,IAKjC,YAAA8qD,uBAAA,SAAuBj1F,EAAgBtY,EAAyBxE,EAAoBg5B,GAChF,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAk1F,uBAAuB,SAAAnC,GAAW,OAAAA,EAAQoC,sBAAsB,UAAIh2F,OAAOzX,GAAWxE,EAAUg5B,OAGpI,YAAA0/D,+BAAA,SAA+BrgF,EAAkCg7E,EAAwC8Z,GACrG,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAoC,sBAAsB3e,EAAUj6F,KAAKuhB,YAE3E,OADAvhB,KAAKstD,MAAMwrD,gCAAgCjrD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IACvFjf,KAAKs2G,iBAAiBzoD,IAKjC,YAAA2xC,sBAAA,SAAsBvgF,EAAkCg7E,EAA+B8Z,GACnF,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAuC,aAAa9e,EAAUj6F,KAAKuhB,YAElE,OADAvhB,KAAKstD,MAAM0rD,uBAAuBnrD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IAC9Ejf,KAAKs2G,iBAAiBzoD,IAGjC,YAAAorD,cAAA,SAAcv1F,EAAgBtY,EAAyBxE,EAAoBg5B,GACvE,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAq1F,cAAc,SAAAtC,GAAW,OAAAA,EAAQyC,aAAa,UAAIr2F,OAAOzX,GAAWxE,EAAUg5B,OAKlH,YAAA6/D,kCAAA,SAAkCxgF,EAAkCg7E,EAA2C8Z,GAC3G,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAA2C,yBAAyBlf,EAAUj6F,KAAKuhB,YAE9E,OADAvhB,KAAKstD,MAAM8rD,mCAAmCvrD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IAC1Fjf,KAAKs2G,iBAAiBzoD,IAGjC,YAAAwrD,2BAAA,SAA2B31F,EAAgBtY,EAAyBxE,EAAoBg5B,GACpF,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAy1F,0BAA0B,SAAA1C,GAAW,OAAAA,EAAQ6C,0BAA0B,UAAIz2F,OAAOzX,GAAWxE,EAAUg5B,OAK3I,YAAA8/D,gCAAA,SAAgCzF,EAAyC8Z,GACrE,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAA+C,uBAAuBtf,IAE7D,OADAj6F,KAAKstD,MAAMksD,iCAAiC3rD,EAAQkmD,GAC7C/zG,KAAKs2G,iBAAiBzoD,IAGjC,YAAA4rD,yBAAA,SAAyB/1F,EAAgBwQ,EAAe0L,GACpD,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAA61F,wBAAwB,SAAA9C,GAAW,OAAAA,EAAQiD,wBAAwBxlF,EAAO0L,OAG9G,YAAA+5E,wBAAA,SAAwBj2F,EAAgBf,EAA2Bid,GAC/D,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAA61F,wBAAwB,SAAA9C,GAAW,OAAAA,EAAQmD,uBAAuBj3F,EAAQid,OAK9G,YAAA+/D,uCAAA,SAAuC1gF,EAAkCg7E,EAAgD8Z,GACrH,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAqD,0BAA0B5f,EAAUj6F,KAAKuhB,YAE/E,OADAvhB,KAAKstD,MAAMwsD,mCAAmCjsD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IAC1Fjf,KAAKs2G,iBAAiBzoD,IAGjC,YAAAksD,gCAAA,SAAgCr2F,EAAgBtY,EAC5CN,EAA4B80B,GAC5B,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAm2F,2BAA2B,SAAApD,GAAW,OAAAA,EAAQuD,+BAA+B,UAAIn3F,OAAOzX,GAAWN,EAAS80B,OAKhJ,YAAAggE,4CAAA,SAA4C3gF,EAAkCg7E,EAC1E8Z,GACA,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAyD,uBAAuBhgB,EAAUj6F,KAAKuhB,YAE5E,OADAvhB,KAAKstD,MAAM4sD,iCAAiCrsD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IACxFjf,KAAKs2G,iBAAiBzoD,IAGjC,YAAAssD,qCAAA,SAAqCz2F,EAAgBtY,EAAyBhF,EAC1E0E,EAA4B80B,GAC5B,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAu2F,wBAAwB,SAAAxD,GAAW,OAAAA,EAAQ2D,oCAAoC,UAAIv3F,OAAOzX,GAAWhF,EAAO0E,EAAS80B,OAKzJ,YAAAigE,qCAAA,SACI5gF,EACAg7E,EACA+E,EACA+U,GAEA,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAA6D,wBAAwBpgB,EAAUj6F,KAAKuhB,YAE7E,OADAvhB,KAAKstD,MAAMgtD,kCAAkCzsD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,GAAW+/E,GACpGh/F,KAAKs2G,iBAAiBzoD,IAGjC,YAAA0sD,8BAAA,SAA8B72F,EAAgBtY,EAAyBxE,EAAoBo6C,EACvFl2C,EAA4B80B,GAC5B,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAA22F,yBAAyB,SAAA5D,GAAW,OAAAA,EAAQ+D,6BAA6B,UAAI33F,OAAOzX,GAAWxE,EAAUo6C,EAAIl2C,EAAS80B,OAK1J,YAAA66E,sBAAA,SAAsB/2F,EAAgBtY,EAAyBw0B,GAC3D,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAg3F,qBAAqB,SAAAjE,GAAW,OAAAA,EAAQkE,aAAa,UAAI93F,OAAOzX,GAAWw0B,OAG/G,YAAAg7E,qBAAA,SAAqBl3F,EAAgBkiD,EAAoBhmC,GACrD,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAg3F,qBAAqB,SAAAjE,GAAW,OAAAA,EAAQoE,YAAYj1C,EAAMhmC,OAG9F,YAAAqgE,qBAAA,SAAqBhhF,EAAkCg7E,EAAsC8Z,GACzF,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAkE,oBAAoBzgB,EAAUj6F,KAAKuhB,YAEzE,OADAvhB,KAAKstD,MAAMwtD,8BAA8BjtD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IACrFjf,KAAKs2G,iBAAiBzoD,IAKjC,YAAAqyC,4BAAA,SACIjhF,EACAg7E,EACAhjB,EACA88B,EACA3U,GAEA,IAAMvxC,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAuE,kBAAkB9gB,EAAUj6F,KAAKuhB,UAAWvhB,KAAK8+C,YAAam4B,EAAcA,EAAYhyE,GAAK,GAAIjF,KAAKy1F,WAO5I,OANAz1F,KAAKstD,MAAM0tD,0BACPntD,EACAkmD,EACA/zG,KAAK22G,0BAA0B13F,GAC/BmgF,GAAYA,EAAS6b,wBAA0B7b,EAAS6b,wBAAwBhhG,KAAI,SAAA5S,GAAQ,OAAAA,EAAKrI,cAAUsB,GAExGN,KAAKs2G,iBAAiBzoD,IAGjC,YAAAqtD,oBAAA,SAAoBx3F,EAChBtY,EACA+vG,EACA7uF,EACAsT,GAEA,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAq3F,mBAAmB,SAAAtE,GAAW,OAAAA,EAAQ2E,kBAAkB,UAAIv4F,OAAOzX,GAAW+vG,EAAkB7uF,EAASsT,OAK7I,YAAAugE,yBAAA,SAAyBlhF,EAAkCg7E,EAAkC8Z,GAA7F,WACUlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAA6E,gBAAgBphB,EAAUj6F,KAAKuhB,UAAWvhB,KAAKy1F,WAC/E6lB,EAAwD,mBAAnCrhB,EAASshB,sBAAuCv7G,KAAK81G,kBAAex1G,EAC/FN,KAAKstD,MAAMkuD,yBAAyB3tD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,GAAWq8F,GAClG,IAAIj5G,EAASrC,KAAKs2G,iBAAiBzoD,GAEnC,QAAoBvtD,IAAhBg7G,GAA6BrhB,EAASshB,sBAAuB,CAC7D,IAAME,EAAexhB,EAASshB,uBAAsB,SAAA3vG,GAAK,SAAK0hD,MAAMouD,mBAAmBJ,MACvFj5G,EAAS,EAAAlC,WAAWD,KAAKmC,EAAQo5G,GAGrC,OAAOp5G,GAGX,YAAAs5G,mBAAA,SAAmBj4F,EAAgBtY,EAAyBw0B,GACxD,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAA23F,iBAAiB,SAAA5E,GAAW,OAAAA,EAAQmF,kBAAkB,UAAI/4F,OAAOzX,GAAWw0B,OAGhH,YAAAi8E,iBAAA,SAAiBn4F,EAAgBtY,EAAyBuX,EAAwBid,GAC9E,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAA23F,iBAAiB,SAAA5E,GAAW,OAAAA,EAAQqF,gBAAgB,UAAIj5F,OAAOzX,GAAWuX,EAAQid,OAKtH,YAAAm8E,mBAAA,SAAmBr4F,EAAgBtY,EAAyBxE,EAAoB0lB,EAA2BsT,GACvG,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAs4F,kBAAkB,SAAAvF,GAAW,OAAAA,EAAQwF,kBAAkB,UAAIp5F,OAAOzX,GAAWxE,EAAU0lB,EAASsT,OAGpI,YAAAwgE,0BAAA,SAA0BnhF,EAAkCg7E,EAAmC8Z,GAC3F,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAwF,iBAAiB/hB,EAAUj6F,KAAKuhB,YAEtE,OADAvhB,KAAKstD,MAAM4uD,2BAA2BruD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IAClFjf,KAAKs2G,iBAAiBzoD,IAKjC,YAAAwyC,+BAAA,SAA+BphF,EAAkCg7E,EAAwC8Z,GACrG,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAA2F,eAAen8G,KAAKuhB,UAAW04E,IAErE,OADAj6F,KAAKstD,MAAM8uD,wBAAwBvuD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IAC/Ejf,KAAKs2G,iBAAiBzoD,IAGjC,YAAAwuD,wBAAA,SAAwB34F,EAAgBtY,EAAyBw0B,GAC7D,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAy4F,gBAAgB,SAAA1F,GAAW,OAAAA,EAAQ6F,uBAAuB,UAAIz5F,OAAOzX,GAAWw0B,OAKpH,YAAA0gE,sBAAA,SAAsBrhF,EAAkCg7E,EAAuC8Z,GAC3F,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAA+F,qBAAqBv8G,KAAKuhB,UAAW04E,IAE3E,OADAj6F,KAAKstD,MAAMkvD,+BAA+B3uD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IACtFjf,KAAKs2G,iBAAiBzoD,IAGjC,YAAA4uD,uBAAA,SAAuB/4F,EAAgBtY,EAAyBw0B,GAC5D,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAA64F,sBAAsB,SAAA9F,GAAW,OAAAA,EAAQiG,cAAc,UAAI75F,OAAOzX,GAAWw0B,OAGjH,YAAA+8E,2BAAA,SAA2Bj5F,EAAgBtY,EAAyBwxG,EAAyBh9E,GACzF,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAA64F,sBAAsB,SAAA9F,GAAW,OAAAA,EAAQoG,0BAA0B,UAAIh6F,OAAOzX,GAAWwxG,EAAWh9E,OAKxI,YAAA2gE,6BAAA,SAA6BthF,EAAkCg7E,EAAsC8Z,GACjG,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAsG,uBAAuB7iB,EAAUj6F,KAAKuhB,YAE5E,OADAvhB,KAAKstD,MAAMyvD,8BAA8BlvD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,IACrFjf,KAAKs2G,iBAAiBzoD,IAGjC,YAAAmvD,qBAAA,SACInvD,EACAziD,EACAkhB,EACAsT,GAEA,OAAO5/B,KAAK02G,YAAY7oD,EAAQ,EAAAivD,wBAAwB,SAAArG,GAAW,OAAAA,EAAQwG,qBAAqB,UAAIp6F,OAAOzX,GAAWkhB,EAASsT,OAKnI,YAAA4gE,uBAAA,SAAuBvhF,EAAkCg7E,EAAgC8Z,GACrF,IAAMlmD,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAA0G,cAAcjjB,EAAUj6F,KAAKuhB,YAEnE,OADAvhB,KAAKstD,MAAM6vD,wBAAwBtvD,EAAQkmD,EAAY/zG,KAAK22G,0BAA0B13F,GAAW,EAAAi+F,cAAcE,kBAAkBnjB,IAC1Hj6F,KAAKs2G,iBAAiBzoD,IAGjC,YAAAwvD,oBAAA,SAAoB35F,EAAgBtY,EAAyBxE,EAAoB02G,EAAiB19E,GAC9F,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAw5F,eAAe,SAAAzG,GAAW,OAAAA,EAAQ8G,mBAAmB,UAAI16F,OAAOzX,GAAWxE,EAAU02G,EAAS19E,OAGlI,YAAA49E,uBAAA,SAAuB95F,EAAgBtY,EAAyBxE,EAAoBg5B,GAChF,OAAO5/B,KAAK02G,YAAYhzF,EAAQ,EAAAw5F,eAAe,SAAAzG,GAAW,OAAAA,EAAQgH,sBAAsB,UAAI56F,OAAOzX,GAAWxE,EAAUg5B,OAGhI,EArbA,GAubA,SAASq2E,EAAoByH,GACzB,GAAI,MAAOA,EAIX,OAAOA,EAAMzjG,KAAI,SAAApb,GACb,OACI8+G,OAAQ9+G,EAAE8+G,OACVC,WAAY1H,EAAgBr3G,EAAE++G,YAC9BC,UAAW3H,EAAgBr3G,EAAEg/G,eAIzC,SAAS3H,EAAgBvsC,GACrB,GAAI,MAAOA,EAIX,MAAO,CACHhkE,QAASgkE,EAAOv4D,OAChBwgB,OAAQ+3C,EAAOp6C,OAAS,IAAM,KAAOo6C,EAAOnnB,WAAa,IAAM,KAAOmnB,EAAO3H,UAAY,IAAM,KAIvG,SAASo0C,EAAqBD,GAC1B,GAAI,MAAOA,EAIX,MAAO,CACH2H,sBAAuB5H,EAAgBC,EAAiB2H,uBACxDC,sBAAuB7H,EAAgBC,EAAiB4H,uBACxDC,sBAAuB9H,EAAgBC,EAAiB6H,uBACxDC,sBAAuB/H,EAAgBC,EAAiB8H,wBAxdnD,EAAAvpB,mBAyeb,iBAAgB+J,EAAMx/E,EAAwCi/F,EAAmBC,EAA2BC,G,QAExG,GAAIt1G,MAAMC,QAAQkW,GAAW,CACzB,IAAIjY,EAAM,E,IACV,IAAqB,QAAAiY,GAAQ,8BAAE,CAA1B,IACKjgB,EAAQy/F,EADD,QACeyf,EAAcC,EAAmBC,GAC7D,GAAc,KAAVp/G,EACA,OAAOA,EAEPA,EAAQgI,IACRA,EAAMhI,I,iGAGd,OAAOgI,EAEJ,GAAwB,iBAAbiY,EAEd,OAAKm/F,EAIY,MAAbn/F,EACO,EACAA,IAAak/F,EACb,GAEA,EARA,EAWR,GAAIl/F,EAAU,CACT,IAAA9E,EAAA,EAAAA,SAAUxU,EAAA,EAAAA,QAASuZ,EAAA,EAAAA,OAAQm/F,EAAA,EAAAA,qBAEnC,IAAKD,IAA4BC,EAC7B,OAAO,EAGX,IAAIh8G,EAAS,EAEb,GAAI6c,EACA,GAAIA,IAAWg/F,EAAah/F,OACxB7c,EAAS,OACN,IAAe,MAAX6c,EAGP,OAAO,EAFP7c,EAAS,EAMjB,GAAI8X,EACA,GAAIA,IAAagkG,EACb97G,EAAS,OACN,IAAiB,MAAb8X,EAGP,OAAO,EAFP9X,EAAS8lB,KAAK8hB,IAAI5nC,EAAQ,GAMlC,GAAIsD,EAAS,CACT,GAAIA,IAAYu4G,EAAap4G,SAAU,EAAA6uB,MAAiBhvB,EAASu4G,EAAap4G,QAG1E,OAAO,EAFPzD,EAAS,GAMjB,OAAOA,EAGP,OAAO,I,iBC5pBf,gBACQswB,EAeJC,EAhBJ,yBACQD,EAAgBl0B,OAAOyP,gBACtB,CAAE4kB,UAAW,cAAgBhqB,OAAS,SAAUzK,EAAG00B,GAAK10B,EAAEy0B,UAAYC,IACvE,SAAU10B,EAAG00B,GAAK,IAAK,IAAIlzB,KAAKkzB,EAAOA,EAAEnzB,eAAeC,KAAIxB,EAAEwB,GAAKkzB,EAAElzB,KAClE,SAAUxB,EAAG00B,GAEhB,SAASC,IAAOhzB,KAAKizB,YAAc50B,EADnCs0B,EAAct0B,EAAG00B,GAEjB10B,EAAEsB,UAAkB,OAANozB,EAAat0B,OAAOY,OAAO0zB,IAAMC,EAAGrzB,UAAYozB,EAAEpzB,UAAW,IAAIqzB,KAUvF,GAFAv0B,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAE/B,iBAAZkQ,EACP0jB,EAAiC,UAArB1jB,EAAQgkB,cAEnB,GAAyB,iBAAdC,UAAwB,CACpC,IAAIC,EAAYD,UAAUC,UAC1BR,EAAYQ,EAAUC,QAAQ,YAAc,EAGhD,IAAIC,EAAiB,iBACjBC,EAAoB,MACpBC,EAAoB,QACpBC,GAAwB,EAS5B51B,EAAQ61B,2BALR,SAAoC10B,GAChC,IAAI20B,EAAMF,EAEV,OADAA,EAAwBz0B,EACjB20B,GAqEX,IAAIC,EAAS,GACTC,EAAS,IACTC,EAAU,+DAeVC,EAAO,WAIP,SAASA,EAAIC,EAAcC,EAAW7M,EAAM8M,EAAOC,EAAUC,QACzC,IAAZA,IAAsBA,GAAU,GACR,iBAAjBJ,GACPh0B,KAAKkf,OAAS8U,EAAa9U,QAAU0U,EACrC5zB,KAAKi0B,UAAYD,EAAaC,WAAaL,EAC3C5zB,KAAKonB,KAAO4M,EAAa5M,MAAQwM,EACjC5zB,KAAKk0B,MAAQF,EAAaE,OAASN,EACnC5zB,KAAKm0B,SAAWH,EAAaG,UAAYP,IAMzC5zB,KAAKkf,OAhEjB,SAAoBA,EAAQkV,GACxB,OAAIA,GAAWX,EACJvU,GAAU0U,GAEhB1U,IAEDA,EAAS,QAENA,GAwDemV,CAAWL,EAAcI,GACvCp0B,KAAKi0B,UAAYA,GAAaL,EAC9B5zB,KAAKonB,KAvDjB,SAA8BlI,EAAQkI,GAKlC,OAAQlI,GACJ,IAAK,QACL,IAAK,OACL,IAAK,OACIkI,EAGIA,EAAK,KAAOyM,IACjBzM,EAAOyM,EAASzM,GAHhBA,EAAOyM,EAOnB,OAAOzM,EAsCakN,CAAqBt0B,KAAKkf,OAAQkI,GAAQwM,GACtD5zB,KAAKk0B,MAAQA,GAASN,EACtB5zB,KAAKm0B,SAAWA,GAAYP,EAxGxC,SAAsB5sB,EAAKotB,GAEvB,IAAKptB,EAAIkY,SACDkV,GAAWX,GACX,MAAM,IAAIxyB,MAAM,2DAAgE+F,EAAIitB,UAAY,aAAiBjtB,EAAIogB,KAAO,cAAkBpgB,EAAIktB,MAAQ,iBAAqBltB,EAAImtB,SAAW,MAOtM,GAAIntB,EAAIkY,SAAWoU,EAAelE,KAAKpoB,EAAIkY,QACvC,MAAM,IAAIje,MAAM,mDAOpB,GAAI+F,EAAIogB,KACJ,GAAIpgB,EAAIitB,WACJ,IAAKV,EAAkBnE,KAAKpoB,EAAIogB,MAC5B,MAAM,IAAInmB,MAAM,iJAIpB,GAAIuyB,EAAkBpE,KAAKpoB,EAAIogB,MAC3B,MAAM,IAAInmB,MAAM,6HA8EpBszB,CAAav0B,KAAMo0B,IAkM3B,OA/LAL,EAAInuB,MAAQ,SAAUnC,GAClB,OAAIA,aAAiBswB,KAGhBtwB,IAG6B,iBAApBA,EAAMwwB,WACa,iBAAnBxwB,EAAM0wB,UACS,iBAAf1wB,EAAM2jB,MACU,iBAAhB3jB,EAAMywB,OACW,iBAAjBzwB,EAAMyb,QACW,mBAAjBzb,EAAMqC,QACS,mBAAfrC,EAAMvB,MACa,mBAAnBuB,EAAM6H,WAExB7M,OAAOC,eAAeq1B,EAAIp0B,UAAW,SAAU,CA0B3Cf,IAAK,WAID,OAAO41B,EAAYx0B,OAEvBrB,YAAY,EACZuzB,cAAc,IAGlB6B,EAAIp0B,UAAUuC,KAAO,SAAUuyB,GAC3B,IAAKA,EACD,OAAOz0B,KAEX,IAAIkf,EAASuV,EAAOvV,OAAQ+U,EAAYQ,EAAOR,UAAW7M,EAAOqN,EAAOrN,KAAM8M,EAAQO,EAAOP,MAAOC,EAAWM,EAAON,SA+BtH,YA9Be7zB,IAAX4e,EACAA,EAASlf,KAAKkf,OAEE,OAAXA,IACLA,EAAS0U,QAEKtzB,IAAd2zB,EACAA,EAAYj0B,KAAKi0B,UAEE,OAAdA,IACLA,EAAYL,QAEHtzB,IAAT8mB,EACAA,EAAOpnB,KAAKonB,KAEE,OAATA,IACLA,EAAOwM,QAEGtzB,IAAV4zB,EACAA,EAAQl0B,KAAKk0B,MAEE,OAAVA,IACLA,EAAQN,QAEKtzB,IAAb6zB,EACAA,EAAWn0B,KAAKm0B,SAEE,OAAbA,IACLA,EAAWP,GAEX1U,IAAWlf,KAAKkf,QACb+U,IAAcj0B,KAAKi0B,WACnB7M,IAASpnB,KAAKonB,MACd8M,IAAUl0B,KAAKk0B,OACfC,IAAan0B,KAAKm0B,SACdn0B,KAEJ,IAAI00B,EAAKxV,EAAQ+U,EAAW7M,EAAM8M,EAAOC,IASpDJ,EAAI7Q,MAAQ,SAAUlkB,EAAOo1B,QACT,IAAZA,IAAsBA,GAAU,GACpC,IAAIO,EAAQb,EAAQc,KAAK51B,GACzB,OAAK21B,EAGE,IAAID,EAAKC,EAAM,IAAMf,EAAQiB,mBAAmBF,EAAM,IAAMf,GAASiB,mBAAmBF,EAAM,IAAMf,GAASiB,mBAAmBF,EAAM,IAAMf,GAASiB,mBAAmBF,EAAM,IAAMf,GAASQ,GAFzL,IAAIM,EAAKd,EAAQA,EAAQA,EAAQA,EAAQA,IAyBxDG,EAAIhX,KAAO,SAAUqK,GACjB,IAAI6M,EAAYL,EAShB,GALIhB,IACAxL,EAAOA,EAAK5iB,QAAQ,MAAOqvB,IAI3BzM,EAAK,KAAOyM,GAAUzM,EAAK,KAAOyM,EAAQ,CAC1C,IAAIiB,EAAM1N,EAAKiM,QAAQQ,EAAQ,IAClB,IAATiB,GACAb,EAAY7M,EAAK2N,UAAU,GAC3B3N,EAAOyM,IAGPI,EAAY7M,EAAK2N,UAAU,EAAGD,GAC9B1N,EAAOA,EAAK2N,UAAUD,IAAQjB,GAGtC,OAAO,IAAIa,EAAK,OAAQT,EAAW7M,EAAMwM,EAAQA,IAErDG,EAAI7zB,KAAO,SAAU80B,GACjB,OAAO,IAAIN,EAAKM,EAAW9V,OAAQ8V,EAAWf,UAAWe,EAAW5N,KAAM4N,EAAWd,MAAOc,EAAWb,WAc3GJ,EAAIp0B,UAAU2L,SAAW,SAAU2pB,GAE/B,YADqB,IAAjBA,IAA2BA,GAAe,GACvCC,EAAal1B,KAAMi1B,IAE9BlB,EAAIp0B,UAAU2M,OAAS,WACnB,OAAOtM,MAEX+zB,EAAIlR,OAAS,SAAUiO,GACnB,GAAKA,EAGA,IAAIA,aAAgBiD,EACrB,OAAOjD,EAGP,IAAIzuB,EAAS,IAAIqyB,EAAK5D,GAGtB,OAFAzuB,EAAO8yB,WAAarE,EAAKsE,SACzB/yB,EAAOgzB,QAAUvE,EAAKwE,OAASC,EAAiBzE,EAAKhrB,OAAS,KACvDzD,EATP,OAAOyuB,GAYRiD,EAxND,GA0NVl2B,EAAQygH,QAAUvqF,EAClB,IA6PIyB,EA7PAD,EAAiB3C,EAAY,OAAItyB,EAEjCo0B,EAAQ,SAAUe,GAElB,SAASf,IACL,IAAIgB,EAAmB,OAAXD,GAAmBA,EAAO9K,MAAM3qB,KAAMsP,YAActP,KAGhE,OAFA01B,EAAMP,WAAa,KACnBO,EAAML,QAAU,KACTK,EAuDX,OA5DA7C,EAAU6B,EAAMe,GAOhBh3B,OAAOC,eAAeg2B,EAAK/0B,UAAW,SAAU,CAC5Cf,IAAK,WAID,OAHKoB,KAAKq1B,UACNr1B,KAAKq1B,QAAUb,EAAYx0B,OAExBA,KAAKq1B,SAEhB12B,YAAY,EACZuzB,cAAc,IAElBwC,EAAK/0B,UAAU2L,SAAW,SAAU2pB,GAEhC,YADqB,IAAjBA,IAA2BA,GAAe,GACzCA,EAQMC,EAAal1B,MAAM,IAPrBA,KAAKm1B,aACNn1B,KAAKm1B,WAAaD,EAAal1B,MAAM,IAElCA,KAAKm1B,aAOpBT,EAAK/0B,UAAU2M,OAAS,WACpB,IAAIT,EAAM,CACN8pB,KAAM,GA0BV,OAvBI31B,KAAKq1B,UACLxpB,EAAI/F,OAAS9F,KAAKq1B,QAClBxpB,EAAIypB,KAAOC,GAEXv1B,KAAKm1B,aACLtpB,EAAIupB,SAAWp1B,KAAKm1B,YAGpBn1B,KAAKonB,OACLvb,EAAIub,KAAOpnB,KAAKonB,MAEhBpnB,KAAKkf,SACLrT,EAAIqT,OAASlf,KAAKkf,QAElBlf,KAAKi0B,YACLpoB,EAAIooB,UAAYj0B,KAAKi0B,WAErBj0B,KAAKk0B,QACLroB,EAAIqoB,MAAQl0B,KAAKk0B,OAEjBl0B,KAAKm0B,WACLtoB,EAAIsoB,SAAWn0B,KAAKm0B,UAEjBtoB,GAEJ6oB,EA7DA,CA8DTX,GAEE6B,IAAeJ,EAAK,IACjB,IAAkB,MACrBA,EAAG,IAAkB,MACrBA,EAAG,IAAyB,MAC5BA,EAAG,IAAiB,MACpBA,EAAG,IAA8B,MACjCA,EAAG,IAA+B,MAClCA,EAAG,IAAmB,MACtBA,EAAG,IAA4B,MAC/BA,EAAG,IAAuB,MAC1BA,EAAG,IAAsB,MACzBA,EAAG,IAAwB,MAC3BA,EAAG,IAAsB,MACzBA,EAAG,IAAuB,MAC1BA,EAAG,IAAqB,MACxBA,EAAG,IAAiB,MACpBA,EAAG,IAAkB,MACrBA,EAAG,IAAsB,MACzBA,EAAG,IAAmB,MACtBA,EAAG,IAAkB,MACrBA,GACJ,SAASK,EAAuBC,EAAcC,GAG1C,IAFA,IAAIlqB,OAAMvL,EACN01B,GAAmB,EACdC,EAAM,EAAGA,EAAMH,EAAarqB,OAAQwqB,IAAO,CAChD,IAAIjoB,EAAO8nB,EAAapN,WAAWuN,GAEnC,GAAKjoB,GAAQ,IAAcA,GAAQ,KAC3BA,GAAQ,IAAcA,GAAQ,IAC9BA,GAAQ,IAAmBA,GAAQ,IAC3B,KAATA,GACS,KAATA,GACS,KAATA,GACS,MAATA,GACC+nB,GAAuB,KAAT/nB,GAEO,IAArBgoB,IACAnqB,GAAOqqB,mBAAmBJ,EAAaf,UAAUiB,EAAiBC,IAClED,GAAmB,QAGX11B,IAARuL,IACAA,GAAOiqB,EAAaxO,OAAO2O,QAG9B,MAEW31B,IAARuL,IACAA,EAAMiqB,EAAalO,OAAO,EAAGqO,IAGjC,IAAIE,EAAUP,EAAY5nB,QACV1N,IAAZ61B,IAEyB,IAArBH,IACAnqB,GAAOqqB,mBAAmBJ,EAAaf,UAAUiB,EAAiBC,IAClED,GAAmB,GAGvBnqB,GAAOsqB,IAEmB,IAArBH,IAELA,EAAkBC,IAO9B,OAHyB,IAArBD,IACAnqB,GAAOqqB,mBAAmBJ,EAAaf,UAAUiB,UAEtC11B,IAARuL,EAAoBA,EAAMiqB,EAErC,SAASM,EAA0BhP,GAE/B,IADA,IAAIvb,OAAMvL,EACD21B,EAAM,EAAGA,EAAM7O,EAAK3b,OAAQwqB,IAAO,CACxC,IAAIjoB,EAAOoZ,EAAKsB,WAAWuN,GACd,KAATjoB,GAAmC,KAATA,QACd1N,IAARuL,IACAA,EAAMub,EAAKQ,OAAO,EAAGqO,IAEzBpqB,GAAO+pB,EAAY5nB,SAGP1N,IAARuL,IACAA,GAAOub,EAAK6O,IAIxB,YAAe31B,IAARuL,EAAoBA,EAAMub,EAKrC,SAASoN,EAAY3uB,GACjB,IAAI7G,EAkBJ,OAfIA,EAFA6G,EAAIouB,WAAapuB,EAAIuhB,KAAK3b,OAAS,GAAoB,SAAf5F,EAAIqZ,OAEpC,KAAOrZ,EAAIouB,UAAYpuB,EAAIuhB,KAEH,KAA3BvhB,EAAIuhB,KAAKsB,WAAW,KACpB7iB,EAAIuhB,KAAKsB,WAAW,IAAM,IAAc7iB,EAAIuhB,KAAKsB,WAAW,IAAM,IAAc7iB,EAAIuhB,KAAKsB,WAAW,IAAM,IAAc7iB,EAAIuhB,KAAKsB,WAAW,IAAM,MACzH,KAA3B7iB,EAAIuhB,KAAKsB,WAAW,GAEf7iB,EAAIuhB,KAAK,GAAGiP,cAAgBxwB,EAAIuhB,KAAKQ,OAAO,GAI5C/hB,EAAIuhB,KAEZwL,IACA5zB,EAAQA,EAAMwF,QAAQ,MAAO,OAE1BxF,EAKX,SAASk2B,EAAarvB,EAAKovB,GACvB,IAAIqB,EAAWrB,EAETmB,EADAP,EAEFhqB,EAAM,GACNqT,EAASrZ,EAAIqZ,OAAQ+U,EAAYpuB,EAAIouB,UAAW7M,EAAOvhB,EAAIuhB,KAAM8M,EAAQruB,EAAIquB,MAAOC,EAAWtuB,EAAIsuB,SASvG,GARIjV,IACArT,GAAOqT,EACPrT,GAAO,MAEPooB,GAAwB,SAAX/U,KACbrT,GAAOgoB,EACPhoB,GAAOgoB,GAEPI,EAAW,CACX,IAAIa,EAAMb,EAAUZ,QAAQ,KAC5B,IAAa,IAATyB,EAAY,CAEZ,IAAIyB,EAAWtC,EAAUrM,OAAO,EAAGkN,GACnCb,EAAYA,EAAUrM,OAAOkN,EAAM,IAEtB,KADbA,EAAMyB,EAASlD,QAAQ,MAEnBxnB,GAAOyqB,EAAQC,GAAU,IAIzB1qB,GAAOyqB,EAAQC,EAAS3O,OAAO,EAAGkN,IAAM,GACxCjpB,GAAO,IACPA,GAAOyqB,EAAQC,EAAS3O,OAAOkN,EAAM,IAAI,IAE7CjpB,GAAO,KAIE,KADbipB,GADAb,EAAYA,EAAUoC,eACNhD,QAAQ,MAEpBxnB,GAAOyqB,EAAQrC,GAAW,IAI1BpoB,GAAOyqB,EAAQrC,EAAUrM,OAAO,EAAGkN,IAAM,GACzCjpB,GAAOooB,EAAUrM,OAAOkN,IAGhC,GAAI1N,EAAM,CAEN,GAAIA,EAAK3b,QAAU,GAA4B,KAAvB2b,EAAKsB,WAAW,IAAgD,KAAvBtB,EAAKsB,WAAW,IACzE1a,EAAOoZ,EAAKsB,WAAW,KACf,IAAc1a,GAAQ,KAC9BoZ,EAAO,IAAMxM,OAAO4b,aAAaxoB,EAAO,IAAM,IAAMoZ,EAAKQ,OAAO,SAGnE,GAAIR,EAAK3b,QAAU,GAA4B,KAAvB2b,EAAKsB,WAAW,GAAuB,CAChE,IAAI1a,KAAOoZ,EAAKsB,WAAW,KACf,IAAc1a,GAAQ,KAC9BoZ,EAAOxM,OAAO4b,aAAaxoB,EAAO,IAAM,IAAMoZ,EAAKQ,OAAO,IAIlE/b,GAAOyqB,EAAQlP,GAAM,GAUzB,OARI8M,IACAroB,GAAO,IACPA,GAAOyqB,EAAQpC,GAAO,IAEtBC,IACAtoB,GAAO,IACPA,GAAQopB,EAAyDd,EAA1C0B,EAAuB1B,GAAU,IAErDtoB,K,iSCzjBX,YACA,QAcA,gCACI,OAAOpN,OAAOY,OAAO,OAOzB,IAIMk/G,EAAsB,MAE5B,SAASC,EAAcC,GACnB,OAAQA,GACJ,KAAK,EACD,MAAO,GACX,KAAK,EACD,MAAUC,aACd,QAII,MAAO,mDAInB,SAAgBC,EAAeh5G,EAAiBi5G,GAC5C,IAAKj5G,EACD,MAAO,GAUX,IAPA,IAKI3E,EALE69G,EAAqB,GAEvBC,GAAW,EACXC,GAAa,EAGbC,EAAS,GACJjhH,EAAI,EAAGA,EAAI4H,EAAQ8F,OAAQ1N,IAAK,CAGrC,OAFAiD,EAAO2E,EAAQ5H,IAGX,KAAK6gH,EACD,IAAKE,IAAaC,EAAY,CAC1BF,EAAS9zG,KAAKi0G,GACdA,EAAS,GAET,SAEJ,MACJ,IAAK,IACDF,GAAW,EACX,MACJ,IAAK,IACDA,GAAW,EACX,MACJ,IAAK,IACDC,GAAa,EACb,MACJ,IAAK,IACDA,GAAa,EAIrBC,GAAUh+G,EAQd,OAJIg+G,GACAH,EAAS9zG,KAAKi0G,GAGXH,EA9CX,mBAmMA,IAAMI,EAAK,uBACLC,EAAK,wBACLC,EAAK,2DACLC,EAAO,6EACPC,EAAK,2BACLC,EAAK,+BA6BLC,EAAQ,IAAItzG,IAEZuzG,EAAQ,WACV,OAAO,GAGLzwE,EAAO,WACT,OAAO,MAGX,SAAS0wE,EAAahzG,EAAiC3B,GACnD,IAAK2B,EACD,OAAOsiC,EAIX,IAAIppC,EAkBAgvB,EAPE+qF,GAHN/5G,GANIA,EADgB,iBAAT8G,EACGA,EAAK9G,QAEL8G,GAIIsb,QAGW,MAAMjd,EAAQ60G,kBACvCC,EAAgBL,EAAM3gH,IAAI8gH,GAC9B,GAAIE,EACA,OAAOC,EAAoBD,EAAenzG,GAK9C,GAAIwyG,EAAG7vF,KAAKzpB,GAAU,CAClB,IAAM,EAAOA,EAAQiiB,OAAO,GAC5Bg4F,EAAgB,SAAUx4F,EAAMyB,GAC5B,OAAOzB,GAAQ04F,EAAQnlE,SAASvzB,EAAM,GAAQzhB,EAAU,WAG5Di6G,GADOjrF,EAAQuqF,EAAGtqF,KAAK+qF,EAAkBh6G,EAASmF,KAyC1D,SAAiBpF,EAAcq6G,GAC3B,IAAMC,EAAY,IAAIt6G,EAChBu6G,EAAgB,KAAKv6G,EACrBk6G,EAAqC,SAAUx4F,EAAMyB,GACvD,OAAKzB,EAGDyB,EACOA,IAAanjB,EAAOq6G,EAAkB,KAE1C34F,IAAS1hB,GAAQo6G,EAAQnlE,SAASvzB,EAAM44F,IAAcF,EAAQnlE,SAASvzB,EAAM64F,GAAiBF,EAAkB,KAL5G,MAOTG,EAAY,CAACx6G,GAInB,OAHAk6G,EAAcM,UAAYA,EAC1BN,EAAcO,SAAW,CAACJ,GAC1BH,EAAcQ,aAAeF,EACtBN,EAxDaS,CAAQ1rF,EAAM,GAAIhvB,IAC1BmF,EAAQ60G,kBAAoBP,EAAOD,GAAI/vF,KAAKzpB,GA2D5D,SAAiBA,EAAiBmF,GAC9B,IAAMw1G,EAAiBC,EAAyB56G,EAAQmiB,MAAM,GAAI,GAAGP,MAAM,KACtEtN,KAAI,SAAAtU,GAAW,OAAA85G,EAAa95G,EAASmF,MACrCa,QAAO,SAAAhG,GAAW,OAAAA,IAAYopC,KAAOppC,GACpCnG,EAAI8gH,EAAe70G,OACzB,IAAKjM,EACD,OAAOuvC,EAEX,GAAU,IAANvvC,EACA,OAA4B8gH,EAAe,GAE/C,IAAMV,EAAqC,SAAUx4F,EAAcyB,GAC/D,IAAK,IAAI9qB,EAAI,EAAG,EAAIuiH,EAAe70G,OAAQ1N,EAAI,EAAGA,IAC9C,GAA0BuiH,EAAeviH,GAAIqpB,EAAMyB,GAC/C,OAAOljB,EAGf,OAAO,MAEL66G,EAAgBF,EAAe7oB,MAAK,SAAA9xF,GAAW,QAAwBA,EAASy6G,gBAElFI,IACAZ,EAAcQ,aAAqCI,EAAeJ,cAEtE,IAAMK,EAAWH,EAAe3hD,QAAO,SAAClwC,EAAK6kB,GAAY,OAAAA,EAAQmtE,SAAWhyF,EAAIlG,OAAO+qB,EAAQmtE,UAAYhyF,IAAe,IACtHgyF,EAASh1G,SACTm0G,EAAca,SAAWA,GAE7B,OAAOb,EAtFac,CAAQ/6G,EAASmF,IAC1B6pB,EAAQ0qF,EAAGzqF,KAAK+qF,EAAkBh6G,EAASmF,KAClC61G,EAAYhsF,EAAM,GAAG/M,OAAO,GAAIjiB,GAAS,IAClDgvB,EAAQ2qF,EAAG1qF,KAAK+qF,EAAkBh6G,EAASmF,KAClC61G,EAAYhsF,EAAM,GAAIhvB,GAAS,GAoGvD,SAAkBA,GACd,IACI,IAAM,EAAS,IAAIorC,OAAO,IAzUlC,SAAS6vE,EAAYj7G,GACjB,IAAKA,EACD,MAAO,GAGX,IAAIk7G,EAAQ,GAIRhC,EAAWF,EAAeh5G,EA7Ef,KAgFf,GAAIk5G,EAAS7sE,OAAM,SAAAlyC,GAAK,MAjFX,OAiFWA,KACpB+gH,EAAQ,SAKP,CACD,IAAI,GAA6B,EACjChC,EAAS1yG,SAAQ,SAACuuC,EAAS53B,GAGvB,GA5FK,OA4FD43B,EAAJ,CAmBA,IAPA,IAMI15C,EANA89G,GAAW,EACXgC,EAAW,GAEX/B,GAAa,EACbgC,EAAa,GAGRhjH,EAAI,EAAGA,EAAI28C,EAAQjvC,OAAQ1N,IAIhC,GAAa,OAHbiD,EAAO05C,EAAQ38C,KAGK+gH,EAChBgC,GAAY9/G,OAKhB,IAAI+9G,GAAwB,MAAT/9G,GAAiB+/G,EA+BpC,OAAQ//G,GACJ,IAAK,IACD89G,GAAW,EACX,SAEJ,IAAK,IACDC,GAAa,EACb,SAEJ,IAAK,IAED,IAIIiC,EAAc,MAJJrC,EAAemC,EAAU,KAIP7mG,KAAI,SAAA7b,GAAK,OAAAwiH,EAAYxiH,MAAIopB,KAAK,KAAI,IAElEq5F,GAASG,EAETlC,GAAW,EACXgC,EAAW,GAEX,MAEJ,IAAK,IACDD,GAAU,IAAME,EAAa,IAE7BhC,GAAa,EACbgC,EAAa,GAEb,MAEJ,IAAK,IACDF,GAtLF,WAuLE,SAEJ,IAAK,IACDA,GAASrC,EAAc,GACvB,SAEJ,QACIqC,GAASf,EAAQmB,uBAAuBjgH,OAxEhD,CA2BI+/G,GAvBa,MAAT//G,EACMA,EAKS,MAATA,GAAyB,MAATA,GAAkB+/G,EAlI7C,MAyIU//G,EACC,GAMA8+G,EAAQmB,uBAAuBjgH,GAb/B,IAsEd8hB,EAAQ+7F,EAASpzG,OAAS,IA1MzB,OA0M+BozG,EAAS/7F,EAAQ,IAAmBA,EAAQ,EAAI+7F,EAASpzG,UACzFo1G,GAzMG,WA6MP,GAA6B,OAhHpB,IACDA,GAASrC,EAAc,GACvB,GAA6B,MAkH7C,OAAOqC,EA2L2BD,CAAYj7G,GAAQ,KAClD,OAAO,SAAUyhB,EAAcyB,GAE3B,OADA,EAAOuxB,UAAY,EACZhzB,GAAQ,EAAOgI,KAAKhI,GAAQzhB,EAAU,MAEnD,MAAOqnB,GACL,OAAO+hB,GAtGSmyE,CAASv7G,GAM7B,OAFA45G,EAAMh0G,IAAIm0G,EAAYE,GAEfC,EAAoBD,EAAenzG,GAG9C,SAASozG,EAAoBD,EAAoCvvG,GAC7D,MAAoB,iBAATA,EACAuvG,EAGJ,SAAUx4F,EAAMyB,GACnB,OAAKhB,EAAMmzB,gBAAgB5zB,EAAM/W,EAAK3K,MAI/Bk6G,EAAc/3F,EAAMJ,UAAUpX,EAAKtK,eAAesK,EAAK3K,KAAM0hB,IAAQyB,GAHjE,MAOnB,SAAS82F,EAAkBh6G,EAAiBmF,GACxC,OAAOA,EAAQ60G,mBAAqBG,EAAQnlE,SAASh1C,EAAS,OAASA,EAAQiiB,OAAO,EAAGjiB,EAAQ8F,OAAS,GAAK9F,EAwDnH,SAASg7G,EAAYv5F,EAAczhB,EAAiBw7G,GAChD,IAAMC,EAAav5F,EAAM85B,YAAc95B,EAAMhe,IAAMud,EAAK5iB,QAAQ+5G,EAAqB12F,EAAM85B,WAAav6B,EAClGi6F,EAAgBx5F,EAAM85B,UAAYy/D,EAElCxB,EAAqCuB,EAAgB,SAAU/5F,EAAMyB,GACvE,OAAOzB,IAASA,IAASg6F,GAActB,EAAQnlE,SAASvzB,EAAMi6F,IAAkB17G,EAAU,MAE1F,SAAUyhB,EAAMyB,GAChB,OAAOzB,GAAQA,IAASg6F,EAAaz7G,EAAU,MAGnD,OADAi6G,EAAca,SAAW,EAAEU,EAAgB,KAAO,MAAQ/5F,GACnDw4F,EA6CX,SAAgB18F,EAAMzW,EAA+C3B,GACjE,QADiE,IAAAA,MAAA,KAC5D2B,EACD,OAAO+yG,EAIX,GAAoB,iBAAT/yG,GAAqB60G,EAAkB70G,GAAO,CACrD,IAAM,EAAgBgzG,EAAahzG,EAAmC3B,GACtE,GAAI,IAAkBikC,EAClB,OAAOywE,EAEX,IAAM+B,EAAgB,SAAUn6F,EAAcyB,GAC1C,QAAS,EAAczB,EAAMyB,IAUjC,OARI,EAAcu3F,eAEamB,EAAenB,aAAe,EAAcA,cAEvE,EAAcK,WAEac,EAAed,SAAW,EAAcA,UAEhEc,EAIX,OAoEJ,SAA0BC,EAAyB12G,GAC/C,IAAMw1G,EAAiBC,EAAyB9hH,OAAOmlD,oBAAoB49D,GACtEvnG,KAAI,SAAAtU,GAAW,OAiFxB,SAAgCA,EAAiB3G,EAAY8L,GACzD,IAAc,IAAV9L,EACA,OAAO+vC,EAGX,IAAM6wE,EAAgBH,EAAa95G,EAASmF,GAC5C,GAAI80G,IAAkB7wE,EAClB,OAAOA,EAIX,GAAqB,kBAAV/vC,EACP,OAAO4gH,EAIX,GAAI5gH,EAAO,CACP,IAAM,EAAuBA,EAAOyiH,KACpC,GAAoB,iBAAT,EAAmB,CAC1B,IAAMp/G,EAAkC,SAAC+kB,EAAcyB,EAAkBvqB,EAAcojH,GACnF,IAAKA,IAAe9B,EAAcx4F,EAAMyB,GACpC,OAAO,KAGX,IACM84F,EAAUD,EADM,EAAKl9G,QAAQ,cAAelG,IAElD,OAAOqjH,aAAmBpzF,QACtBozF,EAAQtqF,MAAK,SAAAl5B,GAAK,OAAAA,EAAIwH,EAAU,QAChCg8G,EAAUh8G,EAAU,MAG5B,OADAtD,EAAOu/G,kBAAmB,EACnBv/G,GAKf,OAAOu9G,EArHaiC,CAAuBl8G,EAAS67G,EAAW77G,GAAUmF,MACpEa,QAAO,SAAAhG,GAAW,OAAAA,IAAYopC,MAE7BvvC,EAAI8gH,EAAe70G,OACzB,IAAKjM,EACD,OAAOuvC,EAGX,IAAKuxE,EAAe/uD,MAAK,SAAAquD,GAAiB,OAA0BA,EAAegC,oBAAoB,CACnG,GAAU,IAANpiH,EACA,OAA4B8gH,EAAe,GAI/C,IAAM,EAAwC,SAAUl5F,EAAcyB,GAGlE,IAAK,IAAI9qB,EAAI,EAAG,EAAIuiH,EAAe70G,OAAQ1N,EAAI,EAAGA,IAAK,CAEnD,IAAMsE,EAA+Bi+G,EAAeviH,GAAIqpB,EAAMyB,GAC9D,GAAIxmB,EACA,OAAOA,EAIf,OAAO,MAIL,EAAgBi+G,EAAe7oB,MAAK,SAAA9xF,GAAW,QAAwBA,EAASy6G,gBAClF,IACA,EAAiBA,aAAqC,EAAeA,cAIzE,IAAM,EAAWE,EAAe3hD,QAAO,SAAClwC,EAAK6kB,GAAY,OAAAA,EAAQmtE,SAAWhyF,EAAIlG,OAAO+qB,EAAQmtE,UAAYhyF,IAAe,IAK1H,OAJI,EAAShjB,SACT,EAAiBg1G,SAAW,GAGzB,EAGX,IAAMqB,EAAwC,SAAU16F,EAAcyB,EAAkB64F,GAIpF,IAHA,IAAIpjH,EAAe,KAGVP,EAAI,EAAG,EAAIuiH,EAAe70G,OAAQ1N,EAAI,EAAGA,IAAK,CAEnD,IAAM6hH,EAA0CU,EAAeviH,GAC3D6hH,EAAcgC,kBAAoBF,IAC7B74F,IACDA,EAAWhB,EAAMgB,SAASzB,IAEzB9oB,IACDA,EAAOuqB,EAASjB,OAAO,EAAGiB,EAASpd,OAASoc,EAAMkB,QAAQ3B,GAAM3b,UAGxE,IAAMpJ,EAASu9G,EAAcx4F,EAAMyB,EAAUvqB,EAAMojH,GACnD,GAAIr/G,EACA,OAAOA,EAIf,OAAO,MAGLm+G,EAAgBF,EAAe7oB,MAAK,SAAA9xF,GAAW,QAAwBA,EAASy6G,gBAClFI,IACAsB,EAAiB1B,aAAqCI,EAAeJ,cAGzE,IAAMK,EAAWH,EAAe3hD,QAAO,SAAClwC,EAAK6kB,GAAY,OAAAA,EAAQmtE,SAAWhyF,EAAIlG,OAAO+qB,EAAQmtE,UAAYhyF,IAAe,IACtHgyF,EAASh1G,SACTq2G,EAAiBrB,SAAWA,GAGhC,OAAOqB,EAnJAC,CAA8Bt1G,EAAM3B,GAiC/C,SAASk3G,EAAUp4E,G,QACT3vB,EAA4B,G,IAClC,IAAkB,QAAA2vB,GAAI,8BAAE,CACpB3vB,EADU,UACC,G,iGAEf,OAAOA,EAIX,SAAgBqnG,EAAkBr8E,GAC9B,IAAMzqB,EAAKyqB,EAEX,OAAOzqB,GAAyB,iBAAZA,EAAG9U,MAA2C,iBAAf8U,EAAG7U,SAAqD,mBAAtB6U,EAAGzU,eAiJ5F,SAASw6G,EAAyBD,EAAmEj+G,GACjG,IAAM4/G,EAAmB3B,EAAe30G,QAAO,SAAAi0G,GAAiB,QAAwBA,EAAeM,aACvG,GAAI+B,EAAiBx2G,OAAS,EAC1B,OAAO60G,EAGX,IACIH,EADED,EAAY+B,EAAiBtjD,QAAiB,SAAClwC,EAAK6kB,GAAY,OAAA7kB,EAAIlG,OAA6B+qB,EAAS4sE,aAAa,IAE7H,GAAI79G,EAAQ,CACR89G,EAAW,GAEX,IAAK,IAAIpiH,EAAI,EAAGyB,EAAI0gH,EAAUz0G,OAAQ1N,EAAIyB,EAAGzB,IACzCoiH,EAASp1G,KAAK1I,QAGlB89G,EAAW8B,EAAiBtjD,QAAO,SAAClwC,EAAK6kB,GAAY,OAAA7kB,EAAIlG,OAA6B+qB,EAAS6sE,YAAsB,IAEzH,IAAM+B,EAAiC,SAAU96F,EAAMyB,GACnD,IAAKzB,EACD,OAAO,KAEX,IAAKyB,EAAU,CACX,IAAI9qB,OAAC,EACL,IAAKA,EAAIqpB,EAAK3b,OAAQ1N,EAAI,EAAGA,IAAK,CAC9B,IAAMijD,EAAK55B,EAAKsB,WAAW3qB,EAAI,GAC/B,GAAW,KAAPijD,GAAgC,KAAPA,EACzB,MAGRn4B,EAAWzB,EAAKQ,OAAO7pB,GAE3B,IAAM+kB,EAAQo9F,EAAU7sF,QAAQxK,GAChC,OAAkB,IAAX/F,EAAeq9F,EAASr9F,GAAS,MAE5Co/F,EAAUhC,UAAYA,EACtBgC,EAAU/B,SAAWA,EACrB+B,EAAU9B,aAAeF,EAEzB,IAAMiC,EAAqB7B,EAAe30G,QAAO,SAAAi0G,GAAiB,OAAuBA,EAAeM,aAExG,OADAiC,EAAmBp3G,KAAKm3G,GACjBC,EAnRX,iBAAsB11G,EAA+C2a,EAAcs6F,GAC/E,SAAKj1G,IAAS2a,IAIPlE,EAAmBzW,EAAnByW,CAAyBkE,OAAM9mB,EAAWohH,IAcrD,UA6BA,+BAAoCU,GAKhC,IAAIC,EAJJ,GAAKD,EAKL,OAAO,SAAC9jH,GAKJ,OAJK+jH,IACDA,GAAYD,KAAgB7zF,QAAQtH,QAAQ,KACvCoQ,MAAK,SAAAuS,GAAQ,OAAAA,EAAOo4E,EAAUp4E,GAAQ,OAExCy4E,EAAShrF,MAAK,SAAApd,GAAO,QAAEA,EAAI3b,QAI1C,wBAA6B8jH,GAKzB,IAAIC,EAJJ,GAAKD,EAKL,OAAO,SAAC9jH,GACJ,IAAK+jH,EAAU,CACX,IAAMz4E,EAAOw4E,IACbC,EAAWz4E,EAAOo4E,EAAUp4E,GAAQ,GAExC,QAASy4E,EAAS/jH,KAa1B,sBASA,wBAA6BkjH,EAAyB12G,GAElD,IAAMi3G,EAAmB7+F,EAAMs+F,EAAY12G,GAC3C,OAAO,SAACsc,EAAcyB,EAAmB64F,GACrC,IAAMr/G,EAAS0/G,EAAiB36F,EAAMyB,EAAU64F,GAChD,OAAOr/G,aAAkBksB,QAAUlsB,EAASksB,QAAQtH,QAAQ5kB,KAIpE,4BAAiCigH,GAC7B,OAA6BA,EAAqBlC,cAAgB,IAGtE,wBAA6BkC,GACzB,OAA6BA,EAAqB7B,UAAY,K,g7CC5iBlE,WAEA,OACA,QAEA,QAEA,QAEA,aAKI,WACqB8B,EACAhhG,EACAk0E,GAFA,KAAA8sB,WACA,KAAAhhG,YACA,KAAAk0E,WAPb,KAAA+sB,QAAU,EACD,KAAAvuD,MAAQ,IAAIhoD,IACZ,KAAA7L,YAAc,IAAI6L,IA6IvC,OArII,YAAAgrG,uBAAA,SAAuB7rG,EAAexE,EAAoB0lB,EAA4BsT,GAAtF,WACUigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,8BAA8BmK,IAGlE,IAAMsW,EAAMm+B,EAASA,SAEf5pB,EAAM+6E,EAAUyR,WAAW77G,GACjC,OAAO2nB,QAAQtH,QAAQjnB,KAAKuiH,SAAStL,uBAAuBv1F,EAAKuU,EAAK2J,EAAOtT,IAAU+K,MAAK,SAAAr4B,GACxF,IAAMiG,EAAK,EAAKu9G,UAEVtzE,EAAY,IAAI,EAAAM,qBACtB,EAAKpvC,YAAYmL,IAAItG,EAAIiqC,GAEzB,IAKItF,EALEvnC,EAA8B,CAChC4C,GAAE,EACFy9G,YAAa,IAIjB,GAAK1jH,EAAL,CAEW8J,MAAMC,QAAQ/J,GACrB4qC,EAAO,IAAI,EAAAliC,eAAe1I,IAE1B4qC,EAAO5qC,EACPqD,EAAOsgH,WAAa/4E,EAAKniC,cAM7B,IAHA,IAAMm7G,GAAsBlhG,EAAIgoD,uBAAuBzzC,IAAiB,IAAI,EAAA7yB,MAAM6yB,EAAKA,IAClF/zB,KAAK,CAAEa,IAAKkzB,IAERl4B,EAAI,EAAGA,EAAI6rC,EAAKpiC,MAAMiE,OAAQ1N,IAAK,CACxC,IAAM8kH,EAAa,EAAKC,sBAAsBl5E,EAAKpiC,MAAMzJ,GAAIk4B,EAAK2sF,EAAoB7kH,EAAGkH,GACrF49G,GACAxgH,EAAOqgH,YAAY33G,KAAK83G,GAKhC,OAFA,EAAK5uD,MAAM1oD,IAAItG,EAAI2kC,EAAKpiC,OAEjBnF,OAIf,YAAA+0G,sBAAA,SAAsBhsG,EAAexE,EAAoBuwG,EAAwBv3E,GAAjF,WACI,GAAmD,mBAAxC5/B,KAAKuiH,SAASnL,sBACrB,OAAO7oF,QAAQtH,QAAQkwF,GAGrB,QAAE4L,EAAA,EAAAA,SAAU99G,EAAA,EAAAA,GACZoW,EAAOrb,KAAKi0D,MAAM5oD,IAAI03G,IAAa/iH,KAAKi0D,MAAMr1D,IAAImkH,GAAW99G,GACnE,OAAKoW,EAIEkT,QAAQtH,QAAQjnB,KAAKuiH,SAASnL,sBAAsB/7F,EAAMukB,IAAQvI,MAAK,SAAA2rF,GAE1E,IAAKA,EACD,OAAO7L,EAGX,IAAMz1F,EAAM,EAAKH,UAAU+vF,gBAAgBlmG,GAAWy0C,SAChD5pB,EAAM+6E,EAAUyR,WAAW77G,GAC3Bg8G,GAAsBlhG,EAAIgoD,uBAAuBzzC,IAAiB,IAAI,EAAA7yB,MAAM6yB,EAAKA,IAAM/zB,KAAK,CAAEa,IAAKkzB,IACnGgtF,EAAgB,EAAKH,sBAAsBE,EAAc/sF,EAAK2sF,EAAoB39G,EAAI89G,GAK5F,OAJIE,GACA,EAAAjyE,MAAMmmE,EAAY8L,GAAe,GAG9B9L,KAjBA5oF,QAAQtH,QAAQkwF,IAqBzB,YAAAG,uBAAN,SAA6BryG,G,gFACzBjF,KAAKi0D,MAAMptD,OAAO5B,IACZiqC,EAAYlvC,KAAKI,YAAYxB,IAAIqG,MAEnCiqC,EAAU7uC,UACVL,KAAKI,YAAYyG,OAAO5B,I,WAIxB,YAAA69G,sBAAR,SAA8BznG,EAA4BzU,EAA0Bs8G,EAA2Bj+G,EAAY89G,GACvH,GAA0B,iBAAf1nG,EAAKjU,OAA4C,IAAtBiU,EAAKjU,MAAMqE,OAAjD,CAKA,IAAMyjC,EAAYlvC,KAAKI,YAAYxB,IAAImkH,GACvC,IAAK7zE,EACD,MAAMjuC,MAAM,sCAGhB,IAAMmF,EAAQiV,EAAKnP,SAAWmP,EAAKnP,SAAS9F,MAAQiV,EAAKjV,OAAS88G,EAClE,IAAI98G,GAAWA,EAAMmkE,cAAgBnkE,EAAMtD,MAAM/B,OAAS6F,EAAS7F,KAAnE,CAKA,IAAI6oE,EAAavuD,EAAKjU,MAClB+7G,EAAkB9nG,EAAK+nG,eAAiB,EAAA1rE,6BAA6B2rE,eAAiB,EAU1F,OATIhoG,EAAKnP,SACL09D,EAAavuD,EAAKnP,SAAS7F,QACO,iBAApBgV,EAAKuuD,WACnBA,EAAavuD,EAAKuuD,WACXvuD,EAAKuuD,sBAAsB,EAAAtlE,gBAClCslE,EAAavuD,EAAKuuD,WAAW5qE,MAC7BmkH,GAAmB,EAAAzrE,6BAA6B4rE,iBAG7C,CACHr+G,GAAE,EACF89G,SAAQ,EACR37G,MAAOiU,EAAKjU,MACZC,KAAM2pG,EAAUuS,uBAAuBloG,EAAKhU,MAC5C+F,OAAQiO,EAAKjO,OACb9E,cAAe+S,EAAK/S,cACpBk7G,WAAYnoG,EAAKmoG,WACjBC,SAAUpoG,EAAKooG,SACfC,UAAWroG,EAAKqoG,UAChB95C,WAAU,EACVu5C,gBAAe,EACf/8G,MAAO4qG,EAAUr3F,UAAUvT,GAC3Bod,oBAAqBnI,EAAKmI,qBAAuBnI,EAAKmI,oBAAoBvJ,IAAI+2F,EAAUv2F,cACxFlR,QAASvJ,KAAKy1F,SAASkuB,UAAU9e,cAAcxpF,EAAK9R,QAAS2lC,GAC7D00E,iBAAkBvoG,EAAKuoG,kBA9BvB72F,QAAQY,KAAK,4EAXbZ,QAAQY,KAAK,0DA6Cd,EAAA6pF,kBAAP,SAAyBvd,GACrB,MAAiD,mBAAnCA,EAASmd,uBAE/B,EAhJA,GAAa,EAAAJ,qB,6qBCVb,WACA,OACA,OAGA,OACA,OACA,QAEA,aAcI,WAAY14G,EAAculH,EAAyBv2D,EAAsBw2D,GACrE9jH,KAAK+jH,eAAiBzlH,EACtB0B,KAAKgkH,4BAA8BH,EACnC7jH,KAAKstD,MAAQA,EACbttD,KAAK8jH,8BAAgCA,EAErC9jH,KAAK8+C,YAAc,IAAI7yC,IACvBjM,KAAK+9B,YAAa,EAClB/9B,KAAKikH,uBAAoB3jH,EAoMjC,OAjMI,sBAAI,mBAAI,C,IAAR,WACI,OAAON,KAAK+jH,gB,gCAKhB,YAAAx4G,IAAA,SAAIsE,EAAgEivC,GAChE9+C,KAAKkkH,oBAEDr0G,aAAe,UACf7P,KAAKmkH,qBAAqBt0G,EAAKivC,GACvBjvC,EAEDA,aAAe/G,OACtB9I,KAAKokH,eAAev0G,GAFpB7P,KAAK+9C,SAML,YAAAomE,qBAAR,SAA6Bt+G,EAAUi5C,GAC9BA,EAGD9+C,KAAK8+C,YAAYvzC,IAAI1F,EAAIyF,WAAYwzC,GAFrC9+C,KAAK8+C,YAAYj4C,OAAOhB,EAAIyF,YAIhCtL,KAAKqkH,0BAA0Bx+G,GAC/B7F,KAAKskH,oBAAoB,CAACz+G,KAGtB,YAAAu+G,eAAR,SAAuBr4G,G,YACbw4G,EAAe,G,IAGrB,IAAoB,QAAAx4G,GAAO,8BAAE,CAAlB,IAAClG,EAAD,aAAC,GACR7F,KAAK8+C,YAAYj4C,OAAOhB,EAAIyF,a,qGAGhC,IAAiC,QAAAS,GAAO,8BAAE,CAA/B,mBAAM+yC,GAALj5C,EAAA,KAAK,MACPoqG,EAAYpqG,EAAIyF,WAEtB,GAAKwzC,EAIE,CAEH,IAAM0lE,EAAqBxkH,KAAK8+C,YAAYlgD,IAAIqxG,GAC5CuU,EACAA,EAAmBz5G,KAAI,MAAvBy5G,EAAkB,EAAS1lE,IAE3B9+C,KAAK8+C,YAAYvzC,IAAI0kG,EAAWnxD,QARpC9+C,KAAK8+C,YAAYj4C,OAAOopG,GACxBsU,EAAMx5G,KAAKlF,IAWa,IAAxB0+G,EAAMlxF,QAAQxtB,IACd0+G,EAAMx5G,KAAKlF,I,iGAInB7F,KAAKqkH,0BAA0BE,GAC/BvkH,KAAKskH,oBAAoBC,IAG7B,YAAA19G,OAAA,SAAOhB,GACC7F,KAAKqL,IAAIxF,KACT7F,KAAKqkH,0BAA0Bx+G,GAC/B7F,KAAK8+C,YAAYj4C,OAAOhB,EAAIyF,YAC5BtL,KAAKstD,MAAMm3D,mBAAmBzkH,KAAK1B,KAAM,CAAC,CAACuH,EAAIyF,WAAY,QAInE,YAAAyyC,MAAA,WACI/9C,KAAKkkH,oBACLlkH,KAAKqkH,0BAA0BrkH,KAAK0kH,uBACpC1kH,KAAK8+C,YAAYf,QACjB/9C,KAAKstD,MAAMq3D,kBAAkB3kH,KAAK1B,OAItC,YAAA6N,QAAA,SAAQkgB,EAAsG8vD,GAA9G,WACIn8E,KAAKkkH,oBACLlkH,KAAK8+C,YAAY3yC,SAAQ,SAAC2yC,EAAamxD,GACnC,IAAMpqG,EAAM,UAAIqd,MAAM+sF,GACtB5jF,EAAS1B,MAAMwxD,EAAS,CAACt2E,EAAK,EAAK++G,oBAAoB/+G,GAAM,QAIrE,YAAAjH,IAAA,SAAIiH,GAEA,OADA7F,KAAKkkH,oBACElkH,KAAK4kH,oBAAoB/+G,IAGpC,YAAAwF,IAAA,SAAIxF,GAEA,OADA7F,KAAKkkH,oBACGlkH,KAAK8+C,YAAYlgD,IAAIiH,EAAIyF,sBAAuBxC,OAG5D,YAAAzI,QAAA,WACSL,KAAK+9B,aACF/9B,KAAKikH,mBACLjkH,KAAKikH,oBAETjkH,KAAK+9C,QACL/9C,KAAK+9B,YAAa,IAI1B,YAAA8mF,qBAAA,SAAqBZ,GACjBjkH,KAAKikH,kBAAoBA,GAGrB,YAAAC,kBAAR,WACI,GAAIlkH,KAAK+9B,WACL,MAAM,IAAI98B,MAAM,oCAAsCjB,KAAK1B,KAAO,2BAIlE,YAAAomH,oBAAR,WACI,IAAMI,EAA0B,GAEhC,OADA9kH,KAAK8+C,YAAY3yC,SAAQ,SAAC2yC,EAAaj5C,GAAQ,OAAAi/G,EAAc/5G,KAAKlF,MAC3Di/G,GAGH,YAAAF,oBAAR,SAA4B/+G,GACxB,IAAMi5C,EAAc9+C,KAAK8+C,YAAYlgD,IAAIiH,EAAIyF,YAC7C,OAAQwzC,aAAuBh2C,MAA6BrK,OAAO6vB,OAAOwwB,QAAex+C,GAGrF,YAAA+jH,0BAAR,SAAkCx0G,GAC9B7P,KAAK8jH,8BAA8Bl2F,KAAK,CAAE0jC,KAAMtxD,KAAK+kH,YAAYl1G,MAG7D,YAAAk1G,YAAR,SAAoBl1G,G,QAChB,GAAIA,aAAe/G,MAAO,CACtB,GAAmB,IAAf+G,EAAIpE,OACJ,MAAO,GAGX,GAAIoE,EAAI,aAAc,UAClB,OAAOA,EAEP,IAAMxN,EAAgB,G,IACtB,IAAwB,QAAAwN,GAAe,8BAAE,CAApC,IAAMogG,EAAS,QAChB5tG,EAAO0I,KAAK,UAAImY,MAAM+sF,K,iGAE1B,OAAO5tG,EAGX,OAAIwN,aAAe,UACR,CAACA,GAED,CAAC,UAAIqT,MAAMrT,KAKtB,YAAAy0G,oBAAR,SAA4BhzD,G,QAClB0zD,EAAoC,G,WAE/Bn/G,G,YACDo/G,EAA2B,GAC3BC,EAAiB,EAAKpmE,YAAYlgD,IAAIiH,EAAIyF,YAChD,GAAI45G,EACA,GAAIA,EAAez5G,OAAS,EAAKu4G,4B,IAC7B,IAAuB,kBAAAmB,EAAqBC,uBAAoB,8BAAE,CAA7D,IAAMl9G,EAAQ,Q,IACf,IAAyB,kBAAAg9G,IAAc,8BAAE,CAApC,IAAMzkG,EAAU,QACjB,GAAIvY,IAAauY,EAAWvY,UACpB+8G,EAAWl6G,KAAK,EAAAs6G,8BAA8B5kG,IAAe,IAAM,EAAKujG,4BAA6B,CACrG,IAAMsB,EAAaL,EAAWA,EAAWx5G,OAAS,G,OAClDw5G,EAAWl6G,KAAK,CACZ7C,SAAU,EAAAE,eAAe4S,KACzBpT,QAAS,qCAAuCs9G,EAAez5G,OAAS,EAAKu4G,6BAA+B,oBAC5GxqG,gBAAiB8rG,EAAW9rG,gBAC5BC,YAAa6rG,EAAW7rG,YACxBC,cAAe4rG,EAAW5rG,cAC1B7W,UAAWyiH,EAAWziH,YAE1BmiH,EAAQj6G,KAAK,CAAClF,EAAIyF,WAAY25G,I,8NAO9CC,EAAe/4G,SAAQ,SAAAsU,GAAc,OAAAwkG,EAAWl6G,KAAK,EAAAs6G,8BAA8B5kG,OACnFukG,EAAQj6G,KAAK,CAAClF,EAAIyF,WAAY25G,SAGlCD,EAAQj6G,KAAK,CAAClF,EAAIyF,WAAY,M,WA9BtCi6G,EACA,IAAkB,QAAAj0D,GAAI,+B,SAAR,U,qIAiCdtxD,KAAKstD,MAAMm3D,mBAAmBzkH,KAAK1B,KAAM0mH,IAvN9B,EAAAI,qBAAuB,CAClC,EAAA79G,mBAAmBtG,MAAO,EAAAsG,mBAAmBuT,QAAS,EAAAvT,mBAAmBwT,YAAa,EAAAxT,mBAAmB0T,MAwNjH,EA1NA,GAAa,EAAAkqG,uBA4Nb,iBAUI,WAAYx/F,GAHJ,KAAA6/F,0BAA4B,IAAI,EAAAj4F,QACxB,KAAAmxE,uBAA6D1+F,KAAKwlH,0BAA0Bz5F,MAGxG/rB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBgB,gBAE7C5W,KAAKylH,sBAAwB,IAAIx5G,IAiEzC,OA5DI,YAAA0yF,eAAA,SAAevzF,GACX,OAAIA,EACOpL,KAAK0lH,6BAA6Bt6G,GAElCpL,KAAK2lH,qBAIpB,YAAA/mB,2BAAA,SAA2BtgG,GAA3B,WACI,GAAKA,EAIM0B,KAAKylH,sBAAsBp6G,IAAI/M,IACtCyuB,QAAQY,KAAK,oCAAoCrvB,EAAI,yBAJrD,GACIA,EAAOo3G,EAAYkQ,4CAA8C5lH,KAAK6lH,kBACjE7lH,KAAKylH,sBAAsBp6G,IAAI/M,IAK5C,IAAMwnH,EAAuB,IAAIX,EAAqB7mH,EAAMo3G,EAAYqQ,yBAA0B/lH,KAAKstD,MAAOttD,KAAKwlH,2BAKnH,OAJAM,EAAqBjB,sBAAqB,WACtC,EAAKY,sBAAsB5+G,OAAOvI,MAEtC0B,KAAKylH,sBAAsBl6G,IAAIjN,EAAMwnH,GAC9BA,GAGH,YAAAD,UAAR,WACI,OAAO,EAAAhsE,MAGH,YAAA6rE,6BAAR,SAAqC7/G,GACjC,IAAIxD,EAA6B,GAOjC,OANArC,KAAKylH,sBAAsBt5G,SAAQ,SAAA25G,GAC/B,IAAMhnE,EAAcgnE,EAAqBlnH,IAAIiH,GACzCi5C,IACAz8C,EAASA,EAAOkmB,OAAM,MAAblmB,EAAM,EAAWy8C,QAG3Bz8C,GAGH,YAAAsjH,kBAAR,WACI,IAAMtjH,EAAsC,GAEtC2jH,EAAc,IAAI/5G,IACpBg6G,EAAY,EAahB,OAZAjmH,KAAKylH,sBAAsBt5G,SAAQ,SAAA+5G,GAC/B,OAAAA,EAAsB/5G,SAAQ,SAACtG,EAAKi5C,G,MAC5BqnE,EAAWH,EAAYpnH,IAAIiH,EAAIyF,iBAClBhL,IAAb6lH,GACAA,EAAWF,IACXD,EAAYz6G,IAAI1F,EAAIyF,WAAY66G,GAChC9jH,EAAO0I,KAAK,CAAClF,EAAK,EAAIi5C,MAEtBz8C,EAAO8jH,GAAU,IAAK,EAAA9jH,EAAO8jH,GAAU,IAAG59F,OAAM,UAAIu2B,UAIzDz8C,GA1EG,EAAA0jH,yBAA2B,IAC1B,EAAAH,4CAA8C,0CA4EjE,EA9EA,GAAa,EAAAlQ,e,gBCtPb,IAQI0Q,EACAC,EATAC,EAAM,EAAQ,IACdC,EAAc,EAAQ,IAWtBC,EAAa,EACbC,EAAa,EA+FjB3oH,EAAOD,QA5FP,SAAYiN,EAAS67B,EAAKM,GACxB,IAAIlpC,EAAI4oC,GAAOM,GAAU,EACrBlU,EAAI4T,GAAO,GAGX+/E,GADJ57G,EAAUA,GAAW,IACF47G,MAAQN,EACvBO,OAAgCrmH,IAArBwK,EAAQ67G,SAAyB77G,EAAQ67G,SAAWN,EAKnE,GAAY,MAARK,GAA4B,MAAZC,EAAkB,CACpC,IAAIC,EAAYN,IACJ,MAARI,IAEFA,EAAON,EAAU,CACA,EAAfQ,EAAU,GACVA,EAAU,GAAIA,EAAU,GAAIA,EAAU,GAAIA,EAAU,GAAIA,EAAU,KAGtD,MAAZD,IAEFA,EAAWN,EAAiD,OAApCO,EAAU,IAAM,EAAIA,EAAU,KAQ1D,IAAI9wE,OAA0Bx1C,IAAlBwK,EAAQgrC,MAAsBhrC,EAAQgrC,OAAQ,IAAIzW,MAAO0iC,UAIjE8kD,OAA0BvmH,IAAlBwK,EAAQ+7G,MAAsB/7G,EAAQ+7G,MAAQJ,EAAa,EAGnEK,EAAMhxE,EAAQ0wE,GAAeK,EAAQJ,GAAY,IAcrD,GAXIK,EAAK,QAA0BxmH,IAArBwK,EAAQ67G,WACpBA,EAAWA,EAAW,EAAI,QAKvBG,EAAK,GAAKhxE,EAAQ0wE,SAAiClmH,IAAlBwK,EAAQ+7G,QAC5CA,EAAQ,GAINA,GAAS,IACX,MAAM,IAAI5lH,MAAM,mDAGlBulH,EAAa1wE,EACb2wE,EAAaI,EACbR,EAAYM,EAMZ,IAAII,GAA4B,KAAb,WAHnBjxE,GAAS,cAG+B+wE,GAAS,WACjD9zF,EAAEh1B,KAAOgpH,IAAO,GAAK,IACrBh0F,EAAEh1B,KAAOgpH,IAAO,GAAK,IACrBh0F,EAAEh1B,KAAOgpH,IAAO,EAAI,IACpBh0F,EAAEh1B,KAAY,IAALgpH,EAGT,IAAIC,EAAOlxE,EAAQ,WAAc,IAAS,UAC1C/iB,EAAEh1B,KAAOipH,IAAQ,EAAI,IACrBj0F,EAAEh1B,KAAa,IAANipH,EAGTj0F,EAAEh1B,KAAOipH,IAAQ,GAAK,GAAM,GAC5Bj0F,EAAEh1B,KAAOipH,IAAQ,GAAK,IAGtBj0F,EAAEh1B,KAAO4oH,IAAa,EAAI,IAG1B5zF,EAAEh1B,KAAkB,IAAX4oH,EAGT,IAAK,IAAInnH,EAAI,EAAGA,EAAI,IAAKA,EACvBuzB,EAAEh1B,EAAIyB,GAAKknH,EAAKlnH,GAGlB,OAAOmnC,GAAY4/E,EAAYxzF,K,gBCzGjC,IAAIuzF,EAAM,EAAQ,IACdC,EAAc,EAAQ,IA2B1BzoH,EAAOD,QAzBP,SAAYiN,EAAS67B,EAAKM,GACxB,IAAIlpC,EAAI4oC,GAAOM,GAAU,EAEF,iBAAb,IACRN,EAAkB,WAAZ77B,EAAuB,IAAIhC,MAAM,IAAM,KAC7CgC,EAAU,MAIZ,IAAIqhE,GAFJrhE,EAAUA,GAAW,IAEFshE,SAAWthE,EAAQw7G,KAAOA,KAO7C,GAJAn6C,EAAK,GAAgB,GAAVA,EAAK,GAAa,GAC7BA,EAAK,GAAgB,GAAVA,EAAK,GAAa,IAGzBxlC,EACF,IAAK,IAAIsgF,EAAK,EAAGA,EAAK,KAAMA,EAC1BtgF,EAAI5oC,EAAIkpH,GAAM96C,EAAK86C,GAIvB,OAAOtgF,GAAO4/E,EAAYp6C,K,opDCA5B,WAIA,aAKI,WACqBo2C,EACAhhG,GADA,KAAAghG,WACA,KAAAhhG,YALb,KAAA2lG,WAAa,EACJ,KAAAjzD,MAAQ,IAAIhoD,IA+CjC,OAvCU,YAAAksG,qBAAN,SAA2B/sG,EAAexE,EAAoBg5B,EAAgCtT,G,0GAE1F,OADMqkF,EAAe3wG,KAAKuhB,UAAU+vF,gBAAgBlmG,KAK9Cy0C,EAAW8wD,EAAa9wD,SACxBsnE,EAAoBnW,EAAUyR,WAAW77G,GACzCwgH,EAAoBpnH,KAAKqnH,cAAc/6F,GAE/B,GAAMtsB,KAAKuiH,SAASpK,qBAAqBt4D,EAAUsnE,EAAmBvnF,EAAOwnF,KAPhF,CAAP,EAAO74F,QAAQ4I,OAAO,IAAIl2B,MAAM,8BAA8BmK,K,OAQlE,OADMpM,EAAQ,WAIRiG,EAAKjF,KAAKknH,aAChBlnH,KAAKi0D,MAAM1oD,IAAItG,EAAIjG,GACZ,CAAP,EAAOgyG,EAAUpoG,cAAc1I,KAAK+E,EAAIjG,KAJ7B,CAAP,OAAOsB,WAOP,YAAA+mH,cAAR,SAAsB/6F,GAClB,IAAIg7F,OAAuDhnH,EAC3D,GAAIgsB,EAAQg7F,oBAAqB,CAC7B,IAAMC,EAAuBvW,EAAUpoG,cAAc5C,GAAGsmB,EAAQg7F,qBAC1DE,EAAkD,iBAAnCl7F,EAAQg7F,oBAAoBriH,IAAmBjF,KAAKi0D,MAAMr1D,IAAI0tB,EAAQg7F,oBAAoBriH,IAC3GuiH,IACAF,EAAsBE,GACFnmG,gBAAkBkmG,EAAqBlmG,gBAC3DimG,EAAoBhmG,gBAAkBimG,EAAqBjmG,iBAE3DgmG,EAAsBC,EAG9B,OAAO,EAAP,GAAYj7F,EAAS,CAAAg7F,oBAAmB,KAG5C,YAAAjP,qBAAA,SAAqBpzG,GACjBjF,KAAKi0D,MAAMptD,OAAO5B,IAG1B,EAlDA,GAAa,EAAAizG,wB,8ECRb,WACA,OAGA,aAEI,WACqBje,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YA4BzB,OAzBW,YAAA23F,aAAP,SAAoB9tG,EAAexE,EAAoBg5B,GACnD,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,6BAA6BmK,IAGjE,IAAMsW,EAAMm+B,EAASA,SACf5pB,EAAM+6E,EAAUyR,WAAW77G,GAEjC,OAAO2nB,QAAQtH,QAAQjnB,KAAKi6F,SAASif,aAAax3F,EAAKuU,EAAK2J,IAAQvI,MAAK,SAAAr4B,GAErE,GAAKA,GAAU8J,MAAMC,QAAQ/J,EAAM6J,WAAuD,IAAzC7J,EAAM6J,SAAwB4C,OAU/E,OAPKzM,EAAMoH,QACPpH,EAAMoH,MAAQsb,EAAIgoD,uBAAuBzzC,IAExCj3B,EAAMoH,QACPpH,EAAMoH,MAAQ,IAAI,EAAAhD,MAAM6yB,EAAKA,IAG1B+6E,EAAUyW,UAAUzoH,OAIvC,EAhCA,GAAa,EAAA+5G,gB,gRCNb,WACA,OAIA,aAEI,WACqB9e,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YAiCzB,OA9BI,YAAA+3F,0BAAA,SAA0BluG,EAAexE,EAAoBg5B,GAA7D,WACU+wE,EAAe3wG,KAAKuhB,UAAU+vF,gBAAgBlmG,GACpD,IAAKulG,EACD,OAAOpiF,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMy0C,EAAW8wD,EAAa9wD,SACxBsnE,EAAoBnW,EAAUyR,WAAW77G,GAE/C,OAAO2nB,QAAQtH,QAAQjnB,KAAKi6F,SAASqf,0BAA0Bz5D,EAAUsnE,EAAmBvnF,IAAQvI,MAAK,SAAAqwF,G,QACrG,GAAKA,GAID,EAAKC,yBAAyBD,GAAqB,CACnD,IAAME,EAAkC,G,IAExC,IAAwB,QAAAF,GAAkB,8BAAE,CAAvC,IAAMG,EAAS,QAChBD,EAAW78G,KAAKimG,EAAU8W,sBAAsBD,K,iGAGpD,OAAOD,OAMX,YAAAD,yBAAR,SAAiCn9F,GAC7B,OAAO1hB,MAAMC,QAAQyhB,IAAUA,EAAM/e,OAAS,GAAK+e,EAAM,aAAcpR,EAAMjQ,mBAErF,EArCA,GAAa,EAAAgwG,4B,8ECNb,WAIA,aAEI,WACqBlf,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YAoBzB,OAjBI,YAAAy4F,+BAAA,SAA+B5uG,EAAeN,EAA4B80B,GACtE,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,6BAA6BmK,IAGjE,IAAMsW,EAAMm+B,EAASA,SAGrB,OAAOtxB,QAAQtH,QAAQjnB,KAAKi6F,SAAS+f,+BAA+Bt4F,EAAU5W,EAAS80B,IAAQvI,MAAK,SAAAr4B,GAChG,GAAI8J,MAAMC,QAAQ/J,GACd,OAAOA,EAAMib,IAAI+2F,EAAUv2F,kBAM3C,EAxBA,GAAa,EAAAo/F,6B,8ECJb,WAIA,aAEI,WACqB5f,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YAqBzB,OAlBI,YAAA64F,oCAAA,SAAoChvG,EAAehF,EAAc0E,EAA4B80B,GACzF,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,6BAA6BmK,IAGjE,IAAMsW,EAAMm+B,EAASA,SACf2pB,EAAMwnC,EAAUz3F,QAAQnT,GAG9B,OAAOmoB,QAAQtH,QAAQjnB,KAAKi6F,SAASmgB,oCAAoC14F,EAAK8nD,EAAU1+D,EAAS80B,IAAQvI,MAAK,SAAAr4B,GAC1G,GAAI8J,MAAMC,QAAQ/J,GACd,OAAOA,EAAMib,IAAI+2F,EAAUv2F,kBAM3C,EAzBA,GAAa,EAAAw/F,0B,8ECJb,WAKA,aAEI,WACqBhgB,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YAsBzB,OAnBI,YAAAi5F,6BAAA,SAA6BpvG,EAAexE,EAAoBo6C,EAC5Dl2C,EAA4B80B,GAC5B,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,6BAA6BmK,IAGjE,IAAMsW,EAAMm+B,EAASA,SACf5pB,EAAM+6E,EAAUyR,WAAW77G,GAGjC,OAAO2nB,QAAQtH,QAAQjnB,KAAKi6F,SAASugB,6BAA6B94F,EAAKuU,EAAK+qB,EAASl2C,EAAS80B,IAAQvI,MAAK,SAAAr4B,GACvG,GAAI8J,MAAMC,QAAQ/J,GACd,OAAOA,EAAMib,IAAI+2F,EAAUv2F,kBAM3C,EA1BA,GAAa,EAAA4/F,2B,gRCJb,WACA,OAGA,QAEA,aAEI,WACqBkI,EACAhhG,GADA,KAAAghG,WACA,KAAAhhG,YA2CzB,OAvCI,YAAAo2F,kBAAA,SAAkBvsG,EAAexE,EAAoBg5B,GACjD,IAAM+wE,EAAe3wG,KAAKuhB,UAAU+vF,gBAAgBlmG,GACpD,IAAKulG,EACD,OAAOpiF,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMy0C,EAAW8wD,EAAa9wD,SACxBsnE,EAAoBnW,EAAUyR,WAAW77G,GAE/C,OAAO2nB,QAAQtH,QAAQjnB,KAAKuiH,SAAS5K,kBAAkB93D,EAAUsnE,EAAmBvnF,IAAQvI,MAAK,SAAA7lB,G,YAC7F,GAAKA,EAAL,CAIA,GAAIA,aAAsB4H,EAAMpR,SAC5B,OAAOgpG,EAAUtpC,aAAal2D,GAGlC,GAAI,EAAAu2G,gBAAgBv2G,GAAa,CAC7B,IAAMi/C,EAAwB,G,IAE9B,IAAuB,QAAAj/C,GAAU,8BAAE,CAA9B,IAAM,EAAQ,QACfi/C,EAAU1lD,KAAKimG,EAAUtpC,aAAa,K,iGAG1C,OAAOjX,EAGX,GAAI,EAAAu3D,sBAAsBx2G,GAAa,CACnC,IAAMy2G,EAAoC,G,IAE1C,IAA6B,QAAAz2G,GAAU,8BAAE,CAApC,IAAMmP,EAAc,QACrBsnG,EAAgBl9G,KAAKimG,EAAUkX,mBAAmBvnG,K,iGAGtD,OAAOsnG,QAIvB,EA/CA,GAAa,EAAAvQ,qB,gRCNb,WACA,OAGA,QAEA,aAEI,WACqBzd,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YA2CzB,OAxCI,YAAAk3F,sBAAA,SAAsBrtG,EAAexE,EAAoBg5B,GACrD,IAAM+wE,EAAe3wG,KAAKuhB,UAAU+vF,gBAAgBlmG,GACpD,IAAKulG,EACD,OAAOpiF,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMy0C,EAAW8wD,EAAa9wD,SACxBsnE,EAAoBnW,EAAUyR,WAAW77G,GAE/C,OAAO2nB,QAAQtH,QAAQjnB,KAAKi6F,SAASwe,sBAAsB54D,EAAUsnE,EAAmBvnF,IAAQvI,MAAK,SAAA7lB,G,YACjG,GAAKA,EAAL,CAIA,GAAIA,aAAsB4H,EAAMpR,SAC5B,OAAOgpG,EAAUtpC,aAAal2D,GAGlC,GAAI,EAAAu2G,gBAAgBv2G,GAAa,CAC7B,IAAMi/C,EAAwB,G,IAE9B,IAAuB,QAAAj/C,GAAU,8BAAE,CAA9B,IAAM,EAAQ,QACfi/C,EAAU1lD,KAAKimG,EAAUtpC,aAAa,K,iGAG1C,OAAOjX,EAGX,GAAI,EAAAu3D,sBAAsBx2G,GAAa,CACnC,IAAMy2G,EAAoC,G,IAE1C,IAA6B,QAAAz2G,GAAU,8BAAE,CAApC,IAAMmP,EAAc,QACrBsnG,EAAgBl9G,KAAKimG,EAAUkX,mBAAmBvnG,K,iGAGtD,OAAOsnG,QAKvB,EA/CA,GAAa,EAAAzP,yB,gRCNb,WACA,OAGA,QAEA,aAEI,WACqBve,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YA2CzB,OAxCI,YAAAs3F,sBAAA,SAAsBztG,EAAexE,EAAoBg5B,GACrD,IAAM+wE,EAAe3wG,KAAKuhB,UAAU+vF,gBAAgBlmG,GACpD,IAAKulG,EACD,OAAOpiF,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMy0C,EAAW8wD,EAAa9wD,SACxBsnE,EAAoBnW,EAAUyR,WAAW77G,GAE/C,OAAO2nB,QAAQtH,QAAQjnB,KAAKi6F,SAAS4e,sBAAsBh5D,EAAUsnE,EAAmBvnF,IAAQvI,MAAK,SAAA7lB,G,YACjG,GAAKA,EAAL,CAIA,GAAIA,aAAsB4H,EAAMpR,SAC5B,OAAOgpG,EAAUtpC,aAAal2D,GAGlC,GAAI,EAAAu2G,gBAAgBv2G,GAAa,CAC7B,IAAMi/C,EAAwB,G,IAE9B,IAAuB,QAAAj/C,GAAU,8BAAE,CAA9B,IAAM,EAAQ,QACfi/C,EAAU1lD,KAAKimG,EAAUtpC,aAAa,K,iGAG1C,OAAOjX,EAGX,GAAI,EAAAu3D,sBAAsBx2G,GAAa,CACnC,IAAMy2G,EAAoC,G,IAE1C,IAA6B,QAAAz2G,GAAU,8BAAE,CAApC,IAAMmP,EAAc,QACrBsnG,EAAgBl9G,KAAKimG,EAAUkX,mBAAmBvnG,K,iGAGtD,OAAOsnG,QAKvB,EA/CA,GAAa,EAAArP,yB,8mDCLb,WAGA,OAEA,QAEA,aAEI,WACqB3e,EACAp6C,EACAf,EACAgV,EACA2hC,GAJA,KAAAwE,WACA,KAAAp6C,WACA,KAAAf,cACA,KAAAgV,WACA,KAAA2hC,WAoFzB,OAjFU,YAAA2lB,kBAAN,SAAwBhwG,EAAe+vG,EACnC7uF,EAA4BsT,G,kIAE5B,KADMigB,EAAW7/C,KAAK6/C,SAASyxD,gBAAgBlmG,IAE3C,MAAO,CAAP,EAAOmjB,QAAQ4I,OAAO,IAAIl2B,MAAM,6BAA6BmK,KAG3DsW,EAAMm+B,EAASA,SACf2pB,EAAMuxC,EAAkBoN,aAAahN,GACpBnK,EAAU9C,YAAYiN,GAC1BnK,EAAUz3F,QAAQ4hG,GAC/BiN,EAAqC,G,IAE3C,IAAyB,IAAApoH,KAAK8+C,YAAY6/C,eAAevzF,IAAS,8BAAvDqV,EAAU,QACb+oD,EAAInmE,aAAaod,EAAWra,QAC5BgiH,EAAer9G,KAAK0V,G,iGASF,OALpB4nG,EAA6C,CAC/CvpE,YAAaspE,EACbrpE,KAAMzyB,EAAQyyB,KAAO,IAAI,EAAAn1C,eAAe0iB,EAAQyyB,WAAQz+C,GAGlC,GAAMN,KAAKi6F,SAASquB,mBAAmB5mG,EAAK8nD,EAAK6+C,EAAmBzoF,I,OAE9F,GAFM2oF,EAAoB,UAErBz/G,MAAMC,QAAQw/G,IAAmD,IAA7BA,EAAkB98G,OACvD,MAAO,CAAP,OAAOnL,GAGL4uC,EAAY,IAAI,EAAAM,qBAChBntC,EAAuB,G,IAC7B,IAAwB,IAAAkmH,GAAiB,+BAA9Bz8G,EAAS,WAIZivG,EAAkByN,WAAW18G,GAC7BzJ,EAAO0I,KAAK,CACRL,MAAOoB,EAAUpB,OAAS,GAC1BnB,QAASvJ,KAAKy1F,SAASkuB,UAAU9e,cAAc/4F,EAAWojC,MAG1Dm5E,EAAkBtpE,OACbjzC,EAAUzE,KAGHghH,EAAkBtpE,KAAK77C,SAAS4I,EAAUzE,OAElD0lB,QAAQY,KAAQ3tB,KAAK8zD,SAAQ,4BAA4Bu0D,EAAkBtpE,KAAK//C,MAAK,oDAAoD8M,EAAUzE,KAAKrI,MAAK,+GAH7J+tB,QAAQY,KAAQ3tB,KAAK8zD,SAAQ,4BAA4Bu0D,EAAkBtpE,KAAK//C,MAAK,4HAO7FqD,EAAO0I,KAAK,CACRL,MAAOoB,EAAUpB,MACjBnB,QAASvJ,KAAKy1F,SAASkuB,UAAU9e,cAAc/4F,EAAUvC,QAAS2lC,GAClE4P,YAAahzC,EAAUgzC,aAAehzC,EAAUgzC,YAAY7kC,IAAI+2F,EAAUqU,+BAC1El6G,KAAMW,EAAUX,MAAQ6lG,EAAUnC,kBAAkB/iG,EAAUX,MAC9D9D,KAAMyE,EAAUzE,MAAQyE,EAAUzE,KAAKrI,U,iGAKnD,MAAO,CAAP,EAAOqD,WAII,EAAAmmH,WAAf,SAA0BC,GACtB,MAAgD,iBAAlBA,EAAMl/G,SAA4D,iBAAbk/G,EAAMxjH,IAI9E,EAAAkjH,aAAf,SAA4BljF,GACxB,OACIA,GAC4C,iBAAjCA,EAAIzmB,0BACyB,iBAA7BymB,EAAIxmB,sBACuB,iBAA3BwmB,EAAIvmB,oBACmB,iBAAvBumB,EAAItmB,gBAI3B,EA3FA,GAAa,EAAAo8F,qB,gRCPb,WACA,QAEA,aAII,WACqB9gB,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YALb,KAAAihG,QAAU,EACV,KAAAvuD,MAAQ,IAAIhoD,IA+CxB,OAxCI,YAAA0uG,aAAA,SAAavvG,EAAew0B,GAA5B,WACUigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMsW,EAAMm+B,EAASA,SAErB,OAAOtxB,QAAQtH,QAAQjnB,KAAKi6F,SAASyuB,qBAAqBhnG,EAAKke,IAAQvI,MAAK,SAAAsxF,G,QACxE,GAAK7/G,MAAMC,QAAQ4/G,GAAnB,CAGA,IAAMtmH,EAAyB,G,IAC/B,IAAmB,QAAAsmH,GAAK,8BAAE,CAArB,IAAM/iD,EAAI,QACL90C,EAAOkgF,EAAU4X,iBAAiBhjD,GAClC3gE,EAAK,EAAKu9G,UAChB,EAAAp2D,iBAAiBpb,MAAMlgB,EAAM7rB,GAC7B,EAAKgvD,MAAM1oD,IAAItG,EAAI2gE,GACnBvjE,EAAO0I,KAAK+lB,I,iGAEhB,OAAOzuB,OAIf,YAAAw4G,YAAA,SAAYj1C,EAAoBhmC,GAC5B,GAAiD,mBAAtC5/B,KAAKi6F,SAAS4uB,oBACrB,OAAOt6F,QAAQtH,aAAQ3mB,GAE3B,IAAM2E,EAAK,EAAAmnD,iBAAiBC,GAAGuZ,GACzBvqD,EAAOrb,KAAKi0D,MAAMr1D,IAAIqG,GAC5B,OAAKoW,EAGEkT,QAAQtH,QAAQjnB,KAAKi6F,SAAS4uB,oBAAoBxtG,EAAMukB,IAAQvI,MAAK,SAAAr4B,GACxE,GAAIA,EACA,OAAOgyG,EAAU4X,iBAAiB5pH,MAJ/BuvB,QAAQtH,aAAQ3mB,IASnC,EAjDA,GAAa,EAAAo6G,uB,g7CCHb,WACA,QAEA,QAGA,aAQI,WACqBzgB,EACA14E,EACAk0E,GAFA,KAAAwE,WACA,KAAA14E,YACA,KAAAk0E,WAPb,KAAA+sB,QAAU,EACD,KAAAvuD,MAAQ,IAAIhoD,IACZ,KAAA7L,YAAc,IAAI6L,IA2DvC,OAnDI,YAAA2vG,kBAAA,SAAkBxwG,EAAew0B,GAAjC,WACUigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMsW,EAAMm+B,EAASA,SAErB,OAAOtxB,QAAQtH,QAAQjnB,KAAKi6F,SAAS2hB,kBAAkBl6F,EAAKke,IAAQvI,MAAK,SAAAyxF,GACrE,GAAIhgH,MAAMC,QAAQ+/G,GACd,OAAOA,EAAO7uG,KAAI,SAAA6/D,GACd,IAAM0oC,EAAU,EAAKA,UACftzE,EAAY,IAAI,EAAAM,qBAChBu5E,EAAa,EAAA38D,iBAAiBpb,MAAM,CACtC5qC,MAAO4qG,EAAUr3F,UAAUmgE,EAAK1zE,OAChCmD,QAAS,EAAKksF,SAASkuB,UAAU9e,cAAc/qB,EAAKvwE,QAAS2lC,IAC9DszE,GAIH,OAFA,EAAKvuD,MAAM1oD,IAAIi3G,EAAS1oC,GACxB,EAAK15E,YAAYmL,IAAIi3G,EAAStzE,GACvB65E,SAOjB,YAAAjN,gBAAN,SAAsB1wG,EAAeuX,EAAwBid,G,sGAGzD,OAFM4iF,EAAU,EAAAp2D,iBAAiBC,GAAG1pC,IAC9Bm3D,EAAO95E,KAAKi0D,MAAMr1D,IAAI4jH,IAMiB,mBAAlCxiH,KAAKi6F,SAAS6hB,iBAAmChiC,EAAKkvC,WAA7D,MACU,GAAMhpH,KAAKi6F,SAAS6hB,gBAAgBhiC,EAAMl6C,IAL7C,CAAP,OAAOt/B,G,OAMP,GADA2oH,EAAU,SACNrpF,EAAMqY,wBACN,MAAO,CAAP,OAAO33C,G,iBAMf,OAHA2oH,EAAUA,GAAWnvC,GAEf15E,EAAcJ,KAAKI,YAAYxB,IAAI4jH,KAKzC7/F,EAAOpZ,QAAUvJ,KAAKy1F,SAASkuB,UAAU9e,cAAcokB,EAAQ1/G,QAAU0/G,EAAQ1/G,QAAU8xG,EAAgB6N,QAAS9oH,GAC7G,CAAP,EAAOuiB,IAHI,CAAP,OAAOriB,WA1DS,EAAA4oH,QAAyB,CAAE3/G,QAAS,UAAWmB,MAAO,uBA+DlF,EAjEA,GAAa,EAAA2wG,mB,8ECPb,WAEA,OAGA,aAEI,WACqB95F,EACA04E,GADA,KAAA14E,YACA,KAAA04E,WAgGzB,OA7FI,YAAAqiB,uBAAA,SAAuBlxG,EAAew0B,GAClC,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMsW,EAAMm+B,EAASA,SAErB,OAAOtxB,QAAQtH,QAAQjnB,KAAKi6F,SAASqiB,uBAAuB56F,EAAKke,IAAQvI,MAAK,SAAAr4B,GAC1E,GAAKA,GAA0B,IAAjBA,EAAMyM,OAGpB,OAAIzM,EAAM,aAAcoa,EAAM7L,eACMvO,EAAOib,IAAI+2F,EAAUvuF,oBAE9C05F,EAAegN,qBAAqB/9G,EAAqCpM,OAK7E,EAAAmqH,qBAAf,SAAoC/9G,EAAe+V,GAG/CA,EAAOA,EAAK2G,MAAM,GAAGyJ,MAAK,SAACkY,EAAG1W,GAC1B,IAAIl0B,EAAI4qC,EAAE9hC,SAASvB,MAAMtD,MAAMpB,UAAUqxB,EAAEprB,SAASvB,MAAMtD,OAI1D,OAHU,IAANjE,IACAA,EAAIk0B,EAAEprB,SAASvB,MAAMrD,IAAIrB,UAAU+nC,EAAE9hC,SAASvB,MAAMrD,MAEjDlE,KAIX,IAFA,IAAMgN,EAAwB,GACxBu9G,EAAgC,GAC7BrrH,EAAI,EAAGA,EAAIojB,EAAK1V,OAAQ1N,IAW7B,IAVA,IAAM2N,EAA0B,CAC5BpN,KAAM6iB,EAAKpjB,GAAGO,KACd8O,OAAQ,GACR/F,KAAM2pG,EAAU7jG,WAAWmV,eAAenB,EAAKpjB,GAAGsJ,MAClD2F,cAAemU,EAAKpjB,GAAGiP,cACvB5G,MAAO4qG,EAAUr3F,UAAUwH,EAAKpjB,GAAG4J,SAASvB,OAC5CiH,eAAgB2jG,EAAUr3F,UAAUwH,EAAKpjB,GAAG4J,SAASvB,OACrDkH,SAAU,MAGD,CACT,GAA2B,IAAvB87G,EAAY39G,OAAc,CAC1B29G,EAAYr+G,KAAKW,GACjBG,EAAId,KAAKW,GACT,MAEJ,IAAM,EAAS09G,EAAYA,EAAY39G,OAAS,GAChD,GAAI0wG,EAAekN,cAAc,EAAOjjH,MAAOsF,EAAQtF,SAAW+1G,EAAemN,YAAY,EAAOljH,MAAOsF,EAAQtF,OAAQ,CACvH,EAAOkH,SAAUvC,KAAKW,GACtB09G,EAAYr+G,KAAKW,GACjB,MAEJ09G,EAAY7mH,MAGpB,OAAOsJ,GAMI,EAAAw9G,cAAf,SAA6BjjH,EAAcmjH,GACvC,QAAIA,EAAW/vG,gBAAkBpT,EAAMoT,iBAAmB+vG,EAAW7vG,cAAgBtT,EAAMoT,qBAGvF+vG,EAAW/vG,gBAAkBpT,EAAMsT,eAAiB6vG,EAAW7vG,cAAgBtT,EAAMsT,mBAGrF6vG,EAAW/vG,kBAAoBpT,EAAMoT,iBAAmB+vG,EAAW9vG,YAAcrT,EAAMqT,gBAGvF8vG,EAAW7vG,gBAAkBtT,EAAMsT,eAAiB6vG,EAAW1mH,UAAYuD,EAAMvD,cAS1E,EAAAymH,YAAf,SAA2B7/E,EAAU1W,GACjC,QACM0W,KACA1W,GACF0W,EAAEjwB,kBAAoBuZ,EAAEvZ,iBACxBiwB,EAAEhwB,cAAgBsZ,EAAEtZ,aACpBgwB,EAAE/vB,gBAAkBqZ,EAAErZ,eACtB+vB,EAAE5mC,YAAckwB,EAAElwB,WAG9B,EApGA,GAAa,EAAAs5G,kB,gRCJb,WAEA,QAEA,aAEI,WACqBliB,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YA6BzB,OA1BI,YAAA06F,kBAAA,SAAkB7wG,EAAexE,EAAoB0lB,EAA2BsT,GAC5E,IAAM+wE,EAAe3wG,KAAKuhB,UAAU+vF,gBAAgBlmG,GACpD,IAAKulG,EACD,OAAOpiF,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMy0C,EAAW8wD,EAAa9wD,SACxBsnE,EAAoBnW,EAAUyR,WAAW77G,GAE/C,OAAO2nB,QAAQtH,QAAQjnB,KAAKi6F,SAASgiB,kBAAkBp8D,EAAUsnE,EAAmB76F,EAASsT,IAAQvI,MAAK,SAAAmyF,G,QACtG,GAAKA,GAID,EAAAzB,gBAAgByB,GAAY,CAC5B,IAAM/4D,EAAwB,G,IAE9B,IAAuB,QAAA+4D,GAAS,8BAAE,CAA7B,IAAM,EAAQ,QACf/4D,EAAU1lD,KAAKimG,EAAUtpC,aAAa,K,iGAG1C,OAAOjX,OAKvB,EAjCA,GAAa,EAAAurD,oB,gRCNb,WAEA,aAEI,WACqB/hB,GAAA,KAAAA,WA0CzB,OAvCI,YAAAyf,wBAAA,SAAwBxlF,EAAe0L,GACnC,OAAOrR,QAAQtH,QAAQjnB,KAAKi6F,SAASyf,wBAAwBxlF,EAAO0L,IAAQvI,MAAK,SAAAoyF,G,QAC7E,IAAKA,EACD,MAAO,GAGX,IAAMC,EAAkC,G,IACxC,IAAkB,QAAAD,GAAgB,8BAAE,CAA/B,IAAME,EAAG,QACJC,EAAkB5Y,EAAU6Y,sBAAsBF,GACpDC,GACAF,EAAW3+G,KAAK6+G,I,iGAGxB,OAAOF,MAIf,YAAA9P,uBAAA,SAAuBj3F,EAA2Bid,GAC9C,GAAI5/B,KAAKi6F,SAAS2f,wBAA0E,mBAAzC55G,KAAKi6F,SAAS2f,uBAAuC,CACpG,IAAMkQ,EAAc9Y,EAAU+Y,oBAAoBpnG,GAClD,OAAKmnG,EAGMv7F,QAAQtH,QAAQjnB,KAAKi6F,SAAS2f,uBAAuBkQ,EAAalqF,IAAQvI,MAAK,SAAA2yF,GAClF,IAAKA,EACD,OAAOrnG,EAGX,IAAMsnG,EAAYjZ,EAAU6Y,sBAAsBG,GAClD,OAAIC,GAGGtnG,KAXJ4L,QAAQtH,QAAQtE,GAe/B,OAAO4L,QAAQtH,QAAQtE,IAG/B,EA7CA,GAAa,EAAA42F,0B,8ECDb,WAGA,aAEI,WACqBtf,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YAmBzB,OAhBI,YAAA07F,qBAAA,SAAqB7xG,EAAekhB,EAA+BsT,GAC/D,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,6BAA6BmK,IAGjE,IAAMsW,EAAMm+B,EAASA,SAErB,OAAOtxB,QAAQtH,QAAQjnB,KAAKi6F,SAASgjB,qBAAqBv7F,EAAK4K,EAASsT,IAAQvI,MAAK,SAAAxY,GACjF,GAAK/V,MAAMC,QAAQ8V,GAInB,OAAOA,EAAO5E,IAAI+2F,EAAUkZ,sBAGxC,EAvBA,GAAa,EAAApN,0B,8ECHb,WAIA,aAEI,WACYv7F,EACA04E,GADA,KAAA14E,YACA,KAAA04E,WA+ChB,OA5CI,YAAAyiB,cAAA,SAActxG,EAAew0B,GACzB,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,6BAA6BmK,IAGjE,IAAMsW,EAAMm+B,EAASA,SAErB,OAAOtxB,QAAQtH,QACXjnB,KAAKi6F,SAASkwB,sBAAsBzoG,EAAKke,IAC3CvI,MAAK,SAAAkmC,GACH,OAAKz0D,MAAMC,QAAQw0D,GAIgBA,EAAOtjD,KAAI,SAAA2iG,GAAa,OACvDjpG,MAAOq9F,EAAUoZ,UAAUxN,EAAUjpG,OACrCvN,MAAO4qG,EAAUr3F,UAAUijG,EAAUx2G,WAL9B,OAYnB,YAAAy2G,0BAAA,SAA0BzxG,EAAe2uC,EAAmBna,GACxD,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,6BAA6BmK,IAGjE,IAAMsW,EAAMm+B,EAASA,SACfz5C,EAAQ4qG,EAAUz3F,QAAQwgC,EAAI3zC,OAC9BuN,EAAQq9F,EAAUqZ,QAAQtwE,EAAIpmC,OACpC,OAAO4a,QAAQtH,QACXjnB,KAAKi6F,SAAS4iB,0BAA0BlpG,EAAO,CAAEksC,SAAUn+B,EAAKtb,MAAOA,GAASw5B,IAClFvI,MAAK,SAAAr4B,GACH,OAAK8J,MAAMC,QAAQ/J,GAIZA,EAAMib,IAAI+2F,EAAUsZ,uBAHhB,OAOvB,EAnDA,GAAa,EAAA/N,wB,8ECLb,WAKA,OACA,QAEA,aAMI,WACqBtiB,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YAgGzB,OAtGW,EAAA67F,kBAAP,SAAyBnjB,GACrB,MAAyC,mBAA3BA,EAASswB,eAQ3B,YAAAhN,mBAAA,SAAmBnyG,EAAexE,EAAoB02G,EAAiB19E,GACnE,IAAMigB,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMsW,EAAMm+B,EAASA,SACf5pB,EAAM+6E,EAAUyR,WAAW77G,GAEjC,OAAO2nB,QAAQtH,QACXjnB,KAAKi6F,SAASsjB,mBAAmB77F,EAAKuU,EAAKqnF,EAAS19E,IACtDvI,MAAK,SAAAr4B,GACH,GAAKA,EAIL,OAAOgyG,EAAUnC,kBAAkB7vG,MACpC,SAAAguB,GACC,IAAMw9F,EAAetN,EAAcuN,UAAUz9F,GAC7C,OAAIw9F,EACyB,CACrBA,aAAY,EACZh/G,MAAO,IAGJ+iB,QAAQ4I,OAAyBnK,OAKpD,YAAAywF,sBAAA,SAAsBryG,EAAexE,EAAoBg5B,GACrD,GAA2C,mBAAhC5/B,KAAKi6F,SAASswB,cACrB,OAAOh8F,QAAQtH,aAAQ3mB,GAG3B,IAAMu/C,EAAW7/C,KAAKuhB,UAAU+vF,gBAAgBlmG,GAChD,IAAKy0C,EACD,OAAOtxB,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMsW,EAAMm+B,EAASA,SACf5pB,EAAM+6E,EAAUyR,WAAW77G,GAEjC,OAAO2nB,QAAQtH,QACXjnB,KAAKi6F,SAASswB,cAAc7oG,EAAKuU,EAAK2J,IACxCvI,MAAK,SAAAqzF,GAEH,IAAItkH,EACAsU,EASJ,GARIgwG,GAAmB,EAAAtnH,MAAMI,QAAQknH,IACjCtkH,EAAQskH,EACRhwG,EAAOgH,EAAI+9B,QAAQirE,IACZA,GAAmB,EAAA55E,SAAS45E,KACnCtkH,EAAQskH,EAAgBtkH,MACxBsU,EAAOgwG,EAAgBhgB,aAGtBtkG,EAAL,CAGA,KAAIA,EAAMtD,MAAM/B,KAAOk1B,EAAIl1B,MAAQqF,EAAMrD,IAAIhC,KAAOk1B,EAAIl1B,MAIxD,MAAO,CACHqF,MAAO4qG,EAAUr3F,UAAUvT,GAC3BsU,KAAMA,GALNqS,QAAQY,KAAK,mFAOlB,SAAAX,GACC,IAAMw9F,EAAetN,EAAcuN,UAAUz9F,GAC7C,OAAIw9F,EACOj8F,QAAQtH,QAAgD,CAC3DujG,aAAY,EACZpkH,WAAO9F,EACPoa,UAAMpa,IAGHiuB,QAAQ4I,OAAOnK,OAMnB,EAAAy9F,UAAf,SAAyB56F,GACrB,MAAmB,iBAARA,EACAA,EACAA,aAAe5uB,OAAgC,iBAAhB4uB,EAAIjoB,QACnCioB,EAAIjoB,aAEX,GAIZ,EAxGA,GAAa,EAAAs1G,iB,gRCPb,WACA,OAGA,QAEA,aAEI,WACqBjjB,EACA14E,GADA,KAAA04E,WACA,KAAA14E,YA0CzB,OAvCI,YAAAw2F,mBAAA,SAAmB3sG,EAAexE,EAAoBg5B,GAClD,IAAM+wE,EAAe3wG,KAAKuhB,UAAU+vF,gBAAgBlmG,GACpD,IAAKulG,EACD,OAAOpiF,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4BmK,IAGhE,IAAMy0C,EAAW8wD,EAAa9wD,SACxBsnE,EAAoBnW,EAAUyR,WAAW77G,GAE/C,OAAO2nB,QAAQtH,QAAQjnB,KAAKi6F,SAAS8d,mBAAmBl4D,EAAUsnE,EAAmBvnF,IAAQvI,MAAK,SAAA7lB,G,YAC9F,GAAKA,EAAL,CAIA,GAAIA,aAAsB4H,EAAMpR,SAC5B,OAAOgpG,EAAUtpC,aAAal2D,GAGlC,GAAI,EAAAu2G,gBAAgBv2G,GAAa,CAC7B,IAAMi/C,EAAwB,G,IAE9B,IAAuB,QAAAj/C,GAAU,8BAAE,CAA9B,IAAM,EAAQ,QACfi/C,EAAU1lD,KAAKimG,EAAUtpC,aAAa,K,iGAG1C,OAAOjX,EAGX,GAAI,EAAAu3D,sBAAsBx2G,GAAa,CACnC,IAAMy2G,EAAoC,G,IAE1C,IAA6B,QAAAz2G,GAAU,8BAAE,CAApC,IAAMmP,EAAc,QACrBsnG,EAAgBl9G,KAAKimG,EAAUkX,mBAAmBvnG,K,iGAGtD,OAAOsnG,QAIvB,EA9CA,GAAa,EAAAnQ,sB,8ECVb,WAGA,OAEA,aAGI,WAAYnyF,GACR3lB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,qBAAIp3C,cAqEtC,OAlEI,YAAAqiF,eAAA,SAAevtF,GAAf,WACU6/G,EAAc,CAChBC,UAAW9/G,EAAQ8/G,UACnBC,WAAY//G,EAAQ+/G,WAAa//G,EAAQ+/G,WAAWzjG,UAAO9mB,EAC3DwqH,gBAAgBhgH,EAAQggH,gBAAiBhgH,EAAQggH,eACjDC,mBAAkBjgH,EAAQigH,kBAAmBjgH,EAAQigH,iBACrD7kB,cAAep7F,EAAQo7F,cACvB8kB,QAASlgH,EAAQkgH,SAGrB,OAAO,IAAIz8F,SAAQ,SAACtH,EAASkQ,GACzB,EAAKm2B,MAAM29D,gBAAgBN,GAAatzF,MAAK,SAAAh1B,GACzC,GAAIA,EAAQ,CAER,IADA,IAAMivD,EAAO,GACJvzD,EAAI,EAAGA,EAAIsE,EAAOoJ,OAAQ1N,IAAK,CACpC,IAAM8H,EAAM,UAAIqd,MAAM,UAAY7gB,EAAOtE,IACzCuzD,EAAKvmD,KAAKlF,GAEdohB,EAAQqqC,QAERrqC,OAAQ3mB,MAEbqvC,OAAM,SAAAmwB,GACL3oC,EAAO2oC,UAKnB,YAAAw4B,eAAA,SAAextF,GAAf,WACU6/G,EAAc,CAChBO,UAAWpgH,EAAQogH,UACnBL,WAAY//G,EAAQ+/G,WAAa//G,EAAQ+/G,WAAWzjG,UAAO9mB,EAC3D0qH,QAASlgH,EAAQkgH,SAGrB,OAAO,IAAIz8F,SAAQ,SAACtH,EAASkQ,GACzB,EAAKm2B,MAAM69D,gBAAgBR,GAAatzF,MAAK,SAAAh1B,GAErC4kB,EADA5kB,EACQ,UAAI6gB,MAAM,UAAY7gB,QAEtB/B,MAEbqvC,OAAM,SAAAmwB,GACL3oC,EAAO2oC,UAKnB,YAAAy4B,iBAAA,SAAiBztF,GAAjB,WACU6/G,EAAc,CAChBE,WAAY//G,EAAQ+/G,WAAa//G,EAAQ+/G,WAAWzjG,UAAO9mB,GAG/D,OAAO,IAAIiuB,SAAQ,SAACtH,EAASkQ,GACzB,EAAKm2B,MAAM89D,kBAAkBT,GAAatzF,MAAK,SAAAh1B,GAEvC4kB,EADA5kB,EACQA,EAAO4X,KAAI,SAAApU,GAAO,iBAAIqd,MAAMrd,WAE5BvF,MAEbqvC,OAAM,SAAAmwB,GACL3oC,EAAO2oC,UAKvB,EAzEA,GAAa,EAAA6zB,kB,g7CCJb,WAGA,QACA,OACA,QAEA,aAGI,WAAYhuE,GACR3lB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBW,mBAgCrD,OA7BU,YAAAwjF,aAAN,SACIjvF,EACAiY,G,uHAQW,OANL9d,EAAK,IAAI,EAAA4sC,SACT8c,EAAc,IAAI,EAAAt0B,wBAClBgxF,EAAWtoG,EAAK,CAAEhU,OAAQ,SAAMsM,GAAI,wE,uBAA+B,OAA3B,KAAArb,KAAKstD,OAAMg+D,gBAAgB,GAAMrmH,EAAGy6B,S,OAApC,oBAA2B,SAAkBrkB,cAAQszC,EAAY/uB,OACzGl1B,EAAQI,EAAQJ,MAAQI,EAAQJ,MAAQ,GACxC/C,EAAW3H,KAAKurH,YAAYzgH,EAAQnD,UACpCkH,EAAc/D,EAAQ+D,YAC5B,KAAA5J,GAAGgiB,QAAQ,GAAMjnB,KAAKstD,MAAMk+D,eAAe,CAAE9gH,MAAK,EAAE/C,SAAQ,EAAEkH,YAAW,K,OAOzE,OAPA,WAAW,WACLuvF,EAAO,mF,uBAAqC,OAAzB,KAAAp+F,KAAKstD,OAAMm+D,cAAc,GAAMxmH,EAAGy6B,S,OAAlC,oBAAyB,oBAClCnR,QAAQE,IAAI,CACxB48F,EACA,IAAI98F,SAAQ,SAAAtH,GAAW,OAAA0C,WAAW1C,EAAS,UAEvCoQ,KAAK+mE,EAAMA,GACZ,CAAP,EAAOitB,WAGD,YAAAE,YAAV,SAAsBG,GAClB,OAAQA,GACJ,KAAK,EAAAz8G,iBAAiB08G,aAAc,MAAO,eAC3C,KAAK,EAAA18G,iBAAiB28G,cAAe,MAAO,MAC5C,KAAK,EAAA38G,iBAAiB48G,OAAQ,MAAO,SACrC,QAAS,SAIrB,EApCA,GAAa,EAAA93B,uB,8mDCCb,WACA,QACA,OACA,OAGA,QACA,QAEA,aAMI,WAAYpuE,EAA2B2tE,GAAvC,WAAuC,KAAAA,kBAF/B,KAAAw4B,UAA+C,IAAI7/G,IAGvDjM,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBa,iBAC7C68E,EAAgBmR,0BAA0B,CACtCH,gBAAiB,SAAAz0F,GACb,IAAK,EAAAuF,kBAAkBrF,GAAGF,GACtB,OAAOA,EAEH,IAAAk8G,EAAA,EAAAA,WAAYC,EAAA,EAAAA,WACdC,EAAW,EAAKH,UAAUltH,IAAImtH,GACpC,OAAOE,GAAYA,EAASC,YAAYF,MA+FxD,OA1FI,YAAAryB,yBAAA,SAA4BnzE,EAAgBulG,EAAoBlyB,GAAhE,WACUoyB,EAAWjsH,KAAK85F,eAAetzE,EAAQulG,EAAY,CAAElyB,iBAAgB,IAE3E,OAAO,aAAiBx6F,QAAO,WAC3B,EAAKysH,UAAUjlH,OAAOklH,GACtBE,EAAS5rH,cAIjB,YAAAy5F,eAAA,SAAkBtzE,EAAgBulG,EAAoBjhH,GAAtD,WACI,IAAKA,IAAYA,EAAQ+uF,iBACrB,MAAM,IAAI54F,MAAM,8CAGpB,IAAMgrH,EAAW,IAAIE,EAAgB3lG,EAAQulG,EAAYjhH,EAAQ+uF,iBAAkB75F,KAAKstD,MAAOttD,KAAKszF,gBAAgBqwB,WAGpH,OAFA3jH,KAAK8rH,UAAUvgH,IAAIwgH,EAAYE,GAExB,CAEH,yBACI,OAAOA,EAASG,oBAGpB,2BACI,OAAOH,EAASI,sBAGpB,gBACI,OAAOJ,EAASK,kBAGpB,2BACI,OAAOL,EAASM,sBAGpB,cACI,OAAON,EAAS5iB,SAGpB,4BACI,OAAO4iB,EAASO,uBAEpBC,OAAQ,SAAC/gH,EAAYghH,GACjB,OAAAT,EAASQ,OAAO/gH,EAASghH,IAE7BrsH,QAAS,WACL,EAAKyrH,UAAUjlH,OAAOklH,GACtBE,EAAS5rH,aAKf,YAAAssH,aAAN,SAAmBZ,EAAoBC,G,yEAEnC,KADMC,EAAWjsH,KAAK8rH,UAAUltH,IAAImtH,IAEhC,MAAM,IAAI9qH,MAAM,uBAAyB8qH,GAG7C,MAAO,CAAP,EAAOE,EAASW,YAAYZ,WAG1B,YAAAa,aAAN,SAAmBd,EAAoBC,EAAoBc,G,yEAEvD,KADMb,EAAWjsH,KAAK8rH,UAAUltH,IAAImtH,IAEhC,MAAM,IAAI9qH,MAAM,uBAAyB8qH,GAG7C,OAAIe,EACO,CAAP,EAAOb,EAASc,WAAWf,IAEpB,CAAP,EAAOC,EAASe,YAAYhB,WAI9B,YAAAiB,cAAN,SAAoBlB,EAAoBmB,G,yEAEpC,KADMjB,EAAWjsH,KAAK8rH,UAAUltH,IAAImtH,IAEhC,MAAM,IAAI9qH,MAAM,uBAAyB8qH,G,OAE7CE,EAASkB,aAAaD,G,WAGpB,YAAAE,YAAN,SAAkBrB,EAAoBsB,G,yEAElC,KADMpB,EAAWjsH,KAAK8rH,UAAUltH,IAAImtH,IAEhC,MAAM,IAAI9qH,MAAM,uBAAyB8qH,G,OAE7CE,EAASqB,WAAWD,G,WAG5B,EA9GA,GAAa,EAAAz4B,mBAsHb,iBAwBI,WACYpuE,EACAulG,EACAlyB,EACAvsC,EACCq2C,GALb,WACY,KAAAn9E,SACA,KAAAulG,aACA,KAAAlyB,mBACA,KAAAvsC,QACC,KAAAq2C,oBA3BI,KAAA4pB,0BAA4B,IAAI,EAAAhgG,QACxC,KAAA6+F,mBAAqBpsH,KAAKutH,0BAA0BxhG,MAE5C,KAAAyhG,4BAA8B,IAAI,EAAAjgG,QAC1C,KAAA8+F,qBAAuBrsH,KAAKwtH,4BAA4BzhG,MAEhD,KAAAo/E,4BAA8B,IAAI,EAAA59E,QAC1C,KAAAg/F,qBAAuBvsH,KAAKmrG,4BAA4Bp/E,MAEhD,KAAA0hG,6BAA+B,IAAI,EAAAlgG,QAC3C,KAAAi/F,sBAAwBxsH,KAAKytH,6BAA6B1hG,MAElD,KAAA2hG,MAAQ,IAAIzhH,IAEZ,KAAAijC,UAAY,IAAI,EAAAM,qBAC7B,EAAArvC,WAAWd,QAAO,WAAM,SAAKsuH,cAC7B3tH,KAAKutH,0BACLvtH,KAAKwtH,4BACLxtH,KAAKmrG,4BACLnrG,KAAKytH,8BA+LD,KAAAG,gBAAkB,IAAIr9C,IA8BtB,KAAAs9C,UAAW,EAnNfvgE,EAAMwgE,0BAA0B/B,GAChC/rH,KAAKkvC,UAAUnkC,KAAK,EAAA5K,WAAWd,QAAO,WAAM,SAAKiuD,MAAMygE,4BAA4BhC,OAE/ElyB,EAAiBm0B,qBACjBn0B,EAAiBm0B,qBAAoB,SAACpiH,GAClC0hD,EAAM2gE,SAASlC,MA0N/B,OArNI,YAAA1rH,QAAA,WACIL,KAAKkvC,UAAU7uC,WAGb,YAAAosH,OAAN,SAAa/gH,EAAYghH,G,yEASrB,OANA1sH,KAAK0tH,MAAMvhH,SAAQ,SAAC+hH,EAAIjpH,GAChBxG,OAAOsR,GAAGm+G,EAAIxiH,KACdyiH,EAAYlpH,MAIhBkpH,EACO,CAAP,EAAOnuH,KAAKstD,MAAM8mD,QAAQp0G,KAAK+rH,WAAYoC,I,WAInD,YAAAjC,YAAA,SAAYF,GACR,IAAMtgH,EAAU1L,KAAK0tH,MAAM9uH,IAAIotH,GAC/B,OAAOtgH,GAAWA,EAAQ1M,OAGxB,YAAA4tH,YAAN,SAAkB7J,G,+GAGd,OAFMqL,EAAapuH,KAAK0tH,MAAM9uH,IAAImkH,GAC5B3jE,EAASgvE,GAAcA,EAAWpvH,MACpC+jH,IAAa3jE,GACbryB,QAAQC,MAAM,yBAAyB+1F,EAAQ,YACxC,CAAC,EAAD,MAEX/iH,KAAKquH,cAAcD,GAGJ,GAAMpuH,KAAK65F,iBAAiB+yB,YAAYxtE,K,cAAjD/8C,EAAS,WAEL,EAA4B,GAC5B2lE,EAAW3lE,EAAO4X,KAAI,SAAOjb,EAAO8jB,GAAK,qC,8EAIf,SAAM9iB,KAAK65F,iBAAiBqyB,YAAYltH,I,cAA9DsvH,EAAsB,SAKtBC,EAAoDD,EAASlnH,WAQrD9G,KANV8G,EADyB,iBAAlBmnH,GAA6D,iBAAxBA,EAAcnnH,MAClDmnH,EAAcnnH,MAEdknH,EAASlnH,QAIMknH,EAAS1hH,cAChCxF,EAAQknH,EAAS1hH,YAAYwa,KAAK9b,YAClClE,EAAQytB,mBAAmBztB,IACjBisB,QAAQ,MAAQ,IACtBjsB,EAAQA,EAAM2tB,UAAU3tB,EAAMm/B,YAAY,KAAO,KAMnDthC,EAAKqpH,EAASrpH,IAAS89G,EAAQ,IAAIjgG,EAAK,IAAI1b,OAGpC9G,IAAV8G,IACAA,EAAQknH,EAASrpH,IAGfupH,EAAmB,IAAI,EAAAh/E,qBACvBk3E,EAAuB,CACzBzhH,GAAE,EACFjG,MAAK,EACLqB,QAAS,WAAM,OAAAmuH,EAAiBnuH,YAEhC+tH,KACM9gH,EAAW8gH,EAAW9gH,UAAY,IAC/BvC,KAAK27G,GACd0H,EAAW9gH,SAAWA,GAE1BtN,KAAK0tH,MAAMniH,IAAItG,EAAIyhH,GAMK,iBADhB/4G,EAAa2gH,EAAQ,YACoC,IAA7B3gH,EAAS0lB,QAAQ,OACjDo7F,EAAO9gH,EACAA,aAAoB,EAAAvI,UAC3BspH,EAAc/gH,EAAS1I,GAEvB0pH,EAAU,EAAApiD,eAAeI,MAAkCh/D,EAAU3N,KAAKwmB,QAGxEooG,EAAe,CACjB3pH,GAAE,EACFmC,MAAK,EACLqnH,KAAI,EACJE,QAAO,EACPD,YAAW,EACX/5G,YAAa25G,EAAS35G,YACtB/H,YAAa0hH,EAAS1hH,YACtBgB,QAAS0gH,EAAS1gH,QAClBlB,iBAAkB4hH,EAAS5hH,iBAC3BmiH,aAAcP,EAASO,aACvBtlH,QAASvJ,KAAK2jG,kBAAkBkB,cAAcypB,EAAS/kH,QAASilH,IAGpE,EAAUzjH,KAAK6jH,G,cAGnB,GAAMrgG,QAAQE,IAAIu5C,KA9ElB,M,OA+EA,OADA,SACO,CAAP,EAAO,G,OAEP,MAAO,CAAP,OAAO1nE,WAIP,YAAA+tH,cAAR,SAAsBD,G,QAClB,GAAIA,EAAY,CACZ,GAAIA,EAAW9gH,S,IACX,IAAoB,QAAA8gH,EAAW9gH,UAAQ,8BAAE,CAApC,IAAMwhH,EAAK,QACZ9uH,KAAK+9C,MAAM+wE,I,wGAGZV,EAAqB,cAE5BpuH,KAAK2tH,YAIL,YAAA5vE,MAAR,SAAc2oE,G,QACV,GAAIA,EAAKp5G,S,IACL,IAAoB,QAAAo5G,EAAKp5G,UAAQ,8BAAE,CAA9B,IAAMwhH,EAAK,QACZ9uH,KAAK+9C,MAAM+wE,I,iGAGnB9uH,KAAK0tH,MAAM7mH,OAAO6/G,EAAKzhH,IACvByhH,EAAKrmH,WAGD,YAAAstH,SAAR,WACI3tH,KAAK0tH,MAAMvhH,SAAQ,SAAAu6G,GAAQ,OAAAA,EAAKrmH,aAChCL,KAAK0tH,MAAM3vE,SAGT,YAAAgvE,WAAN,SAAiBf,G,gFAEP+C,EAAgB/uH,KAAKksH,YAAYF,KAInChsH,KAAKutH,0BAA0B3/F,KAAK,CAChCliB,QAASqjH,I,WAKf,YAAA/B,YAAN,SAAkBhB,G,gFAER+C,EAAgB/uH,KAAKksH,YAAYF,KAInChsH,KAAKwtH,4BAA4B5/F,KAAK,CAClCliB,QAASqjH,I,WAMrB,sBAAI,+BAAgB,C,IAApB,W,QACUvnH,EAAa,G,IACnB,IAAiB,QAAAxH,KAAK4tH,iBAAe,8BAAE,CAAlC,IAAM3oH,EAAE,QACHoW,EAAOrb,KAAKksH,YAAYjnH,GAC1BoW,GACA7T,EAAMuD,KAAKsQ,I,iGAGnB,OAAO7T,G,gCAGX,YAAA2lH,aAAA,SAAaS,G,QACHoB,EAAW,IAAIz+C,IAAYvwE,KAAK4tH,iB,IACtC,IAAiB,QAAA5tH,KAAK4tH,iBAAe,8BAAE,CAAlC,IAAM3oH,EAAE,QAET,GADA+pH,EAASnoH,OAAO5B,IACXjF,KAAK4tH,gBAAgBviH,IAAIpG,GAE1B,YADAjF,KAAKivH,eAAerB,I,iGAIxBoB,EAAS7wF,MACTn+B,KAAKivH,eAAerB,IAGlB,YAAAqB,eAAV,SAAyBC,GACrBlvH,KAAK4tH,gBAAkB,IAAIr9C,IAAI2+C,GAC/BlvH,KAAKmrG,4BAA4Bv9E,KAAKnvB,OAAO6vB,OAAO,CAAE/P,UAAWve,KAAKssH,qBAI1E,sBAAI,sBAAO,C,IAAX,WACI,OAAOtsH,KAAK6tH,U,gCAGhB,YAAAP,WAAA,SAAWjkB,GACHA,IAAYrpG,KAAK6tH,WACjB7tH,KAAK6tH,SAAWxkB,EAChBrpG,KAAKytH,6BAA6B7/F,KAAKnvB,OAAO6vB,OAAO,CAAE+6E,QAASrpG,KAAK6tH,cAIjF,EA9PA,I,8ECpIa,EAAAsB,qBAAuB,eAsDvB,EAAAC,sBAAwBtwH,OAAO,kB,67CCzD5C,WAQA,QACA,QAEA,OACA,QACA,SAMA,aAII,WAAY6mB,EACWovE,GAAA,KAAAA,gBAHf,KAAAs6B,kBAAoB,IAAIpjH,IAI5BjM,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBqB,6BAmErD,OA3DI,YAAAinF,+BAAA,SAA+BC,GAA/B,WAEI,OADAn+F,KAAKstD,MAAMgiE,gCAAgCnxB,GACpC,EAAAh+F,WAAWd,QAAO,WACrB,EAAK++F,KAAKD,EAAmBl5F,QASrC,YAAAm5F,KAAA,SAAKn5F,GACD,IAAM28B,EAAa5hC,KAAKqvH,kBAAkBzwH,IAAIqG,GACzC28B,IAGLA,EAAWvhC,UACXL,KAAKqvH,kBAAkBxoH,OAAO5B,GAE9BjF,KAAKstD,MAAM62B,MAAMl/E,KAQf,YAAA+/E,OAAN,SAAamZ,G,oGACgB,SAAMn+F,KAAK+0F,cAAcw6B,iBAAiBpxB,EAAmBl5F,K,OAEtF,GAFMuqH,EAAmB,UAEpBrxB,EAAmB50F,QACpB,MAAM,IAAItI,MAAM,sD,OAGdwuH,EAAezvH,KAAK0vH,aAAavxB,EAAmB50F,QAAS40F,EAAmB5sF,MAChFo+G,EAAmB1yC,EAAiBwyC,GAE1CzvH,KAAKqvH,kBAAkB9jH,IAAI4yF,EAAmBl5F,GAAI0qH,GAElDH,EAAiB9hD,QAAQiiD,EAAkB3vH,KAAKia,IAAI1a,KAAKS,OACzD2vH,EAAiBjiD,QAAQ8hD,EAAkBxvH,KAAKia,IAAI1a,KAAKS,O,YAGrD,YAAA0vH,aAAR,SAAqBnmH,EAAiBgI,EAAgBzG,GAClD,OAAO,EAAA8kH,MAAMrmH,EACTgI,EACAzG,IAGA,YAAAmP,IAAR,SAAYrS,GACJ,EAAA21B,iBAAiB31B,KACbA,EAAQ42B,SAAW,EAAAohD,kBAAkBxtE,KAAKosB,SACjB52B,EAAQm3B,OAChBk2E,UAAY/lG,EAAQiwD,MAG7C,OAAOv3D,GAEf,EAzEA,GA2EA,SAAgBq1E,EAAiBwyC,GAC7B,IAAMp9D,EAAS,IAAI,EAAA14B,oBAAoB81F,EAAa52D,QAC9CvG,EAAS,IAAI,EAAAt4B,oBAAoBy1F,EAAaI,OACpD,MAAO,CACHx9D,OAAM,EAAEC,OAAM,EACdob,QAAA,SAAQ1nE,EAAgBiU,QAAA,IAAAA,MAAA,SAAqCrS,GAAW,OAAAA,IACpEyqD,EAAOrvB,QAAO,SAAAO,GACV,IAAMC,EAASvpB,EAAIspB,GACnBv9B,EAAGssD,OAAOzzB,MAAM2E,OAGxBnjC,QAAS,WACLovH,EAAaK,OACbz9D,EAAOhyD,UACPiyD,EAAOjyD,YAzFN,EAAA60F,+BA2Eb,uB,gECzGAz2F,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAEIs7B,EAFEH,EAAWpC,EAAQ,IACnBD,EAAKC,EAAQ,KAEnB,SAAWuC,GACPA,EAAkB3tB,KAAOlO,OAAO6vB,OAAO,CACnC2pB,yBAAyB,EACzB3V,wBAAyBnI,EAAS9Z,MAAM1T,OAE5C2tB,EAAkB4d,UAAYz5C,OAAO6vB,OAAO,CACxC2pB,yBAAyB,EACzB3V,wBAAyBnI,EAAS9Z,MAAM1T,OAQ5C2tB,EAAkBvqB,GANlB,SAAY/Q,GACR,IAAI8M,EAAY9M,EAChB,OAAO8M,IAAcA,IAAcwuB,EAAkB3tB,MAC9Cb,IAAcwuB,EAAkB4d,WAC/BpgB,EAAE,QAAShsB,EAAUmsC,4BAA8BnsC,EAAUw2B,0BAb7E,CAgBGhI,EAAoBz8B,EAAQy8B,oBAAsBz8B,EAAQy8B,kBAAoB,KACjF,IAAM0d,EAAgBv5C,OAAO6vB,QAAO,SAAUjC,EAAUC,GACpD,IAAI5I,EAASiG,WAAW0C,EAAS9sB,KAAK+sB,GAAU,GAChD,MAAO,CAAEjsB,QAAF,WAAcupB,aAAalG,QAEhC40B,E,WACF,aAAc,UACVt4C,KAAKm4C,cAAe,E,2CAGfn4C,KAAKm4C,eACNn4C,KAAKm4C,cAAe,EAChBn4C,KAAKo4C,WACLp4C,KAAKo4C,SAASxqB,UAAKttB,GACnBN,KAAKK,c,gCAiBTL,KAAKo4C,WACLp4C,KAAKo4C,SAAS/3C,UACdL,KAAKo4C,cAAW93C,K,8CAdpB,OAAON,KAAKm4C,e,8CAGZ,OAAIn4C,KAAKm4C,aACEH,GAENh4C,KAAKo4C,WACNp4C,KAAKo4C,SAAW,IAAIje,EAAS5M,SAE1BvtB,KAAKo4C,SAASrsB,W,KASvBsO,E,6EAUOr6B,KAAKq4C,OAONr4C,KAAKq4C,OAAOlY,SAHZngC,KAAKq4C,OAAS/d,EAAkB4d,Y,gCAO/Bl4C,KAAKq4C,OAIDr4C,KAAKq4C,kBAAkBC,GAE5Bt4C,KAAKq4C,OAAOh4C,UAJZL,KAAKq4C,OAAS/d,EAAkB3tB,O,4BAhBpC,OALK3M,KAAKq4C,SAGNr4C,KAAKq4C,OAAS,IAAIC,GAEft4C,KAAKq4C,W,KAwBpBx6C,EAAQw8B,wBAA0BA,G,iCCvF9BihD,E,cADJ78E,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAEtD,SAAWs8E,GACPA,EAAM3uE,KAAO,EACb2uE,EAAMC,MAAQ,EACdD,EAAME,KAAO,EAHjB,CAIGF,EAAQz9E,EAAQy9E,QAAUz9E,EAAQy9E,MAAQ,K,IACvC7+C,E,WACF,aAAc,UACVz8B,KAAKy7E,KAAO,IAAIxvE,IAChBjM,KAAK07E,WAAQp7E,EACbN,KAAK27E,WAAQr7E,EACbN,KAAK47E,MAAQ,E,0CAGb57E,KAAKy7E,KAAK19B,QACV/9C,KAAK07E,WAAQp7E,EACbN,KAAK27E,WAAQr7E,EACbN,KAAK47E,MAAQ,I,gCAGb,OAAQ57E,KAAK07E,QAAU17E,KAAK27E,Q,0BAK5Br8E,GACA,OAAOU,KAAKy7E,KAAKpwE,IAAI/L,K,0BAErBA,GACA,IAAM+b,EAAOrb,KAAKy7E,KAAK78E,IAAIU,GAC3B,GAAK+b,EAGL,OAAOA,EAAKrc,Q,0BAEZM,EAAKN,GAA2B,IAApB68E,EAAoB,uDAAZP,EAAM3uE,KACtB0O,EAAOrb,KAAKy7E,KAAK78E,IAAIU,GACzB,GAAI+b,EACAA,EAAKrc,MAAQA,EACT68E,IAAUP,EAAM3uE,MAChB3M,KAAK67E,MAAMxgE,EAAMwgE,OAGpB,CAED,OADAxgE,EAAO,CAAE/b,MAAKN,QAAOunD,UAAMjmD,EAAWw7E,cAAUx7E,GACxCu7E,GACJ,KAAKP,EAAM3uE,KACP3M,KAAK+7E,YAAY1gE,GACjB,MACJ,KAAKigE,EAAMC,MACPv7E,KAAKg8E,aAAa3gE,GAClB,MACJ,KAAKigE,EAAME,KAGX,QACIx7E,KAAK+7E,YAAY1gE,GAGzBrb,KAAKy7E,KAAKlwE,IAAIjM,EAAK+b,GACnBrb,KAAK47E,W,6BAGNt8E,GACH,IAAM+b,EAAOrb,KAAKy7E,KAAK78E,IAAIU,GAC3B,QAAK+b,IAGLrb,KAAKy7E,KAAL,OAAiBn8E,GACjBU,KAAKi8E,WAAW5gE,GAChBrb,KAAK47E,SACE,K,8BAGP,GAAK57E,KAAK07E,OAAU17E,KAAK27E,MAAzB,CAGA,IAAK37E,KAAK07E,QAAU17E,KAAK27E,MACrB,MAAM,IAAI16E,MAAM,gBAEpB,IAAMoa,EAAOrb,KAAK07E,MAIlB,OAHA17E,KAAKy7E,KAAL,OAAiBpgE,EAAK/b,KACtBU,KAAKi8E,WAAW5gE,GAChBrb,KAAK47E,QACEvgE,EAAKrc,S,8BAERk9E,EAAYC,GAEhB,IADA,IAAI7oC,EAAUtzC,KAAK07E,MACZpoC,GACC6oC,EACAD,EAAW38E,KAAK48E,EAAhBD,CAAyB5oC,EAAQt0C,MAAOs0C,EAAQh0C,IAAKU,MAGrDk8E,EAAW5oC,EAAQt0C,MAAOs0C,EAAQh0C,IAAKU,MAE3CszC,EAAUA,EAAQiT,O,qCAGX21B,EAAYC,GAEvB,IADA,IAAI7oC,EAAUtzC,KAAK27E,MACZroC,GACC6oC,EACAD,EAAW38E,KAAK48E,EAAhBD,CAAyB5oC,EAAQt0C,MAAOs0C,EAAQh0C,IAAKU,MAGrDk8E,EAAW5oC,EAAQt0C,MAAOs0C,EAAQh0C,IAAKU,MAE3CszC,EAAUA,EAAQwoC,W,+BAMtB,IAFA,IAAIz5E,EAAS,GACTixC,EAAUtzC,KAAK07E,MACZpoC,GACHjxC,EAAO0I,KAAKuoC,EAAQt0C,OACpBs0C,EAAUA,EAAQiT,KAEtB,OAAOlkD,I,6BAKP,IAFA,IAAIA,EAAS,GACTixC,EAAUtzC,KAAK07E,MACZpoC,GACHjxC,EAAO0I,KAAKuoC,EAAQh0C,KACpBg0C,EAAUA,EAAQiT,KAEtB,OAAOlkD,I,mCAyCEgZ,GAET,GAAKrb,KAAK07E,OAAU17E,KAAK27E,MAGpB,KAAK37E,KAAK07E,MACX,MAAM,IAAIz6E,MAAM,gBAGhBoa,EAAKkrC,KAAOvmD,KAAK07E,MACjB17E,KAAK07E,MAAMI,SAAWzgE,OAPtBrb,KAAK27E,MAAQtgE,EASjBrb,KAAK07E,MAAQrgE,I,kCAELA,GAER,GAAKrb,KAAK07E,OAAU17E,KAAK27E,MAGpB,KAAK37E,KAAK27E,MACX,MAAM,IAAI16E,MAAM,gBAGhBoa,EAAKygE,SAAW97E,KAAK27E,MACrB37E,KAAK27E,MAAMp1B,KAAOlrC,OAPlBrb,KAAK07E,MAAQrgE,EASjBrb,KAAK27E,MAAQtgE,I,iCAENA,GACP,GAAIA,IAASrb,KAAK07E,OAASrgE,IAASrb,KAAK27E,MACrC37E,KAAK07E,WAAQp7E,EACbN,KAAK27E,WAAQr7E,OAEZ,GAAI+a,IAASrb,KAAK07E,MACnB17E,KAAK07E,MAAQrgE,EAAKkrC,UAEjB,GAAIlrC,IAASrb,KAAK27E,MACnB37E,KAAK27E,MAAQtgE,EAAKygE,aAEjB,CACD,IAAMv1B,EAAOlrC,EAAKkrC,KACZu1B,EAAWzgE,EAAKygE,SACtB,IAAKv1B,IAASu1B,EACV,MAAM,IAAI76E,MAAM,gBAEpBslD,EAAKu1B,SAAWA,EAChBA,EAASv1B,KAAOA,K,4BAGlBlrC,EAAMwgE,GACR,IAAK77E,KAAK07E,QAAU17E,KAAK27E,MACrB,MAAM,IAAI16E,MAAM,gBAEpB,GAAK46E,IAAUP,EAAMC,OAASM,IAAUP,EAAME,KAG9C,GAAIK,IAAUP,EAAMC,MAAO,CACvB,GAAIlgE,IAASrb,KAAK07E,MACd,OAEJ,IAAMn1B,EAAOlrC,EAAKkrC,KACZu1B,EAAWzgE,EAAKygE,SAElBzgE,IAASrb,KAAK27E,OAGdG,EAASv1B,UAAOjmD,EAChBN,KAAK27E,MAAQG,IAIbv1B,EAAKu1B,SAAWA,EAChBA,EAASv1B,KAAOA,GAGpBlrC,EAAKygE,cAAWx7E,EAChB+a,EAAKkrC,KAAOvmD,KAAK07E,MACjB17E,KAAK07E,MAAMI,SAAWzgE,EACtBrb,KAAK07E,MAAQrgE,OAEZ,GAAIwgE,IAAUP,EAAME,KAAM,CAC3B,GAAIngE,IAASrb,KAAK27E,MACd,OAEJ,IAAMp1B,EAAOlrC,EAAKkrC,KACZu1B,EAAWzgE,EAAKygE,SAElBzgE,IAASrb,KAAK07E,OAGdn1B,EAAKu1B,cAAWx7E,EAChBN,KAAK07E,MAAQn1B,IAIbA,EAAKu1B,SAAWA,EAChBA,EAASv1B,KAAOA,GAEpBlrC,EAAKkrC,UAAOjmD,EACZ+a,EAAKygE,SAAW97E,KAAK27E,MACrB37E,KAAK27E,MAAMp1B,KAAOlrC,EAClBrb,KAAK27E,MAAQtgE,K,2BArPjB,OAAOrb,KAAK47E,U,KAyPpB/9E,EAAQ4+B,UAAYA,G,8BCtRpB,YAKAh+B,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMo9E,EAASrkD,EAAQ,GACjBskD,EAAOtkD,EAAQ,IACfukD,EAAWvkD,EAAQ,IACnBwkD,EAAQxkD,EAAQ,IAChB0B,EAAkB1B,EAAQ,IAC1B+B,EAAkB/B,EAAQ,IAWhCl6B,EAAQ8zD,uBAVR,WACI,IAAM6qB,EAAeF,EAASG,YAAY,IAAInxE,SAAS,OACvD,MAAyB,UAArB4D,EAAQgkB,SACR,sCAAsCspD,EAAtC,SAIOJ,EAAO50D,KAAK60D,EAAK/kC,SAAjB,iBAAqCklC,EAArC,WA0Bf3+E,EAAQ4zD,0BAtBR,SAAmCirB,GAA8B,IACzDC,EADqC73C,EAAoB,uDAAT,QAEhD83C,EAAY,IAAIruD,SAAQ,SAACtH,EAAS41D,GAClCF,EAAiB11D,KAErB,OAAO,IAAIsH,SAAQ,SAACtH,EAASkQ,GACzB,IAAI2lD,EAASP,EAAMQ,cAAa,SAAChoC,GAC7B+nC,EAAOrtD,QACPktD,EAAe,CACX,IAAIljD,EAAgBI,oBAAoBkb,EAAQjQ,GAChD,IAAIhL,EAAgBI,oBAAoB6a,EAAQjQ,QAGxDg4C,EAAO/xD,GAAG,QAASoM,GACnB2lD,EAAO95C,OAAO05C,GAAU,WACpBI,EAAO3xD,eAAe,QAASgM,GAC/BlQ,EAAQ,CACJ+1D,YAAa,WAAQ,OAAOJ,YAa5C/+E,EAAQ6zD,0BAPR,SAAmCgrB,GAA8B,IAApB53C,EAAoB,uDAAT,QAC9CiQ,EAASwnC,EAAMU,iBAAiBP,GACtC,MAAO,CACH,IAAIjjD,EAAgBI,oBAAoBkb,EAAQjQ,GAChD,IAAIhL,EAAgBI,oBAAoB6a,EAAQjQ,O,8CC7CxDrmC,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtD,IAAMu9E,EAAQxkD,EAAQ,IAChB0B,EAAkB1B,EAAQ,IAC1B+B,EAAkB/B,EAAQ,IAuBhCl6B,EAAQ+zD,4BAtBR,SAAqCp/C,GAA0B,IACvDmqE,EADmC73C,EAAoB,uDAAT,QAE9C83C,EAAY,IAAIruD,SAAQ,SAACtH,EAAS41D,GAClCF,EAAiB11D,KAErB,OAAO,IAAIsH,SAAQ,SAACtH,EAASkQ,GACzB,IAAI2lD,EAASP,EAAMQ,cAAa,SAAChoC,GAC7B+nC,EAAOrtD,QACPktD,EAAe,CACX,IAAIljD,EAAgBI,oBAAoBkb,EAAQjQ,GAChD,IAAIhL,EAAgBI,oBAAoB6a,EAAQjQ,QAGxDg4C,EAAO/xD,GAAG,QAASoM,GACnB2lD,EAAO95C,OAAOxwB,EAAM,aAAa,WAC7BsqE,EAAO3xD,eAAe,QAASgM,GAC/BlQ,EAAQ,CACJ+1D,YAAa,WAAQ,OAAOJ,YAa5C/+E,EAAQg0D,4BAPR,SAAqCr/C,GAA0B,IAApBsyB,EAAoB,uDAAT,QAC5CiQ,EAASwnC,EAAMU,iBAAiBzqE,EAAM,aAC5C,MAAO,CACH,IAAIinB,EAAgBI,oBAAoBkb,EAAQjQ,GAChD,IAAIhL,EAAgBI,oBAAoB6a,EAAQjQ,M,4IChCxD,SACA,SACA,UACA,SACA,SACA,W,gGCLA,YAGI,EAAA3kC,WAHK,EAAAA,W,IAMT,E,WAAA,uBACuB,KAAAC,YAA4B,G,4CAG3C,KAAmC,IAA5BJ,KAAKI,YAAYqL,QACpBzL,KAAKI,YAAYmC,MAAOlC,Y,2BAI3BJ,GACD,IAAMG,EAAcJ,KAAKI,YAEzB,OADAA,EAAY2K,KAAK9K,GACV,CACHI,QADG,WAEC,IAAMyiB,EAAQ1iB,EAAYizB,QAAQpzB,IACnB,IAAX6iB,GACA1iB,EAAYymB,OAAO/D,EAAO,S,KAhB9C,0B,8ECNA,YAEA,QACA,QAEA,qCAA0CiyB,EAAoBnZ,GAC1D,IAAMF,EAAgB,IAAI,EAAAq0F,uBAAuBh7E,GAC3CpZ,EAAgB,IAAI,EAAAq0F,uBAAuBj7E,GAC3CnT,EAAa,EAAA0B,wBAAwB5H,EAAeC,EAAeC,GAEzE,OADAgG,EAAWd,SAAQ,kBAAMc,EAAWvhC,aAC7BuhC,I,8ECTX,YACA,QAgBA,WAAyBquF,GACrB,MAAO,CACH76E,KAAM,SAAAkK,GAAO,OAAI2wE,EAAU76E,KAAKkK,IAChCgQ,UAAW,SAAA1/B,GAAE,OAAIqgG,EAAUt3C,UAAY,SAAA5sD,GAAK,OAAI6D,EAAG7D,EAAM+E,QACzDiQ,QAAS,SAAAnR,GAAE,OAAIqgG,EAAU32D,QAAU,SAAAvtC,GAC3B,YAAaA,GACb6D,EAAI7D,EAAcnkB,WAG1Bk5B,QAAS,SAAAlR,GAAE,OAAIqgG,EAAU92D,QAAU,SAAAptC,GAAK,OAAI6D,EAAG7D,EAAM/d,KAAM+d,EAAM+zC,UACjEz/D,QAAS,kBAAM4vH,EAAUxgG,UAxBjC,kBAAuB3kB,GAItB,IACWmlH,EAA4BnlH,EAA5BmlH,UAAWC,EAAiBplH,EAAjBolH,aACbt0F,EAAS9wB,EAAQ8wB,QAAU,IAAI,EAAAu0F,cACrCF,EAAUG,OAAS,WACf,IAAMr7E,EAASs7E,EAASJ,GAClBruF,EAAa,EAAA0uF,0BAA0Bv7E,EAAQnZ,GACrDs0F,EAAatuF,KAIrB,c,g7CCNA,WAEA,QACA,SACA,SAMA,aAGI,WAAYjc,GADJ,KAAA4qG,YAAc,IAAItkH,IAEtBjM,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBiB,iBAgErD,OAvDU,YAAA25G,aAAN,SAAmBvrH,EAAY2C,G,0EACvB5H,KAAKuwH,YAAYllH,IAAIpG,GACrBjF,KAAKuwH,YAAY3xH,IAAIqG,GAAKotD,OAAOob,YAAY7lE,GAE7CmlB,QAAQY,KAAK,0D,WAQf,YAAA8iG,kBAAN,SAAwBxrH,G,0FACpB,SAAMjF,KAAK0wH,mBAAmBzrH,I,cAA9B,S,YAOE,YAAA0rH,kBAAN,SAAwB1rH,G,0EACpBjF,KAAKuwH,YAAY1pH,OAAO5B,G,WAOtB,YAAAsqH,iBAAN,SAAuBtqH,G,gGACA,SAAMjF,KAAK0wH,mBAAmBzrH,I,OAEjD,OAFM28B,EAAa,SACnB5hC,KAAKstD,MAAMmjE,kBAAkBxrH,GACtB,CAAP,EAAO28B,WAOL,YAAA8uF,mBAAN,SAAyBzrH,G,yGACF,EAAAjF,KAAKuwH,YAAY3xH,IAAIqG,IAArB,MAA4B,GAAMjF,KAAK4wH,mBAAmB3rH,I,SAA9B,S,iBAE/C,OAFM28B,EAAa,EACnB5hC,KAAKuwH,YAAYhlH,IAAItG,EAAI28B,GAClB,CAAP,EAAOA,WAGK,YAAAgvF,mBAAhB,SAAmC3rH,G,kFAG/B,OAFMotD,EAAS,IAAI,EAAAw+D,oBACbv+D,EAAS,IAAI,EAAAw+D,oBAAoB7rH,EAAIjF,KAAKstD,OACzC,CAAP,EAAO,IAAI,EAAAqgB,iBACPtb,EACAC,GACA,WACI,EAAKi+D,YAAY1pH,OAAO5B,GACxB,EAAKqoD,MAAMqjE,kBAAkB1rH,cAG7C,EApEA,GAAa,EAAA+vF,qB,8ZCVb,YACA,QAKA,cAMI,mBACI,cAAO,K,OAND,EAAAl4D,MAA4C,UAGnC,EAAA0nB,OAA2C,G,EAiDlE,OArDyC,OAUrC,YAAAxhB,OAAA,SAAO3W,GACH,GAAmB,YAAfrsB,KAAK88B,MAGL,IAFA98B,KAAK88B,MAAQ,YACb98B,KAAKqsB,SAAWA,EACc,IAAvBrsB,KAAKwkD,OAAO/4C,QAAc,CAC7B,IAAM,EAAQzL,KAAKwkD,OAAOjiD,MACtB,EAAMqF,QACN5H,KAAKytE,YAAY,EAAM7lE,SAChB,EAAMolB,MACbhtB,KAAKk0C,UAAU,EAAMlnB,OAErBhtB,KAAKm0C,cAMrB,YAAAs5B,YAAA,SAAY7lE,GACR,GAAmB,YAAf5H,KAAK88B,MACL98B,KAAKwkD,OAAO39B,OAAO,EAAG,EAAG,CAAEjf,QAAO,SAC/B,GAAmB,cAAf5H,KAAK88B,MAAuB,CACnC,IAAMhM,EAAOwK,KAAKpY,MAAMtb,GACxB5H,KAAKqsB,SAAUyE,KAKvB,YAAAojB,UAAA,SAAUlnB,GACa,YAAfhtB,KAAK88B,MACL98B,KAAKwkD,OAAO39B,OAAO,EAAG,EAAG,CAAEmG,MAAK,IACV,cAAfhtB,KAAK88B,OACZ,YAAMoX,UAAS,UAAClnB,IAIxB,YAAAmnB,UAAA,WACuB,YAAfn0C,KAAK88B,MACL98B,KAAKwkD,OAAO39B,OAAO,EAAG,EAAG,IACH,cAAf7mB,KAAK88B,OACZ,YAAMqX,UAAS,WAEnBn0C,KAAK88B,MAAQ,UAErB,EArDA,CAAyC,EAAAi0F,eAAe,EAAAr9E,wBAA3C,EAAAm9E,uB,8ZCNb,YACA,QAOA,cACI,WACuB5rH,EACAqoD,GAFvB,MAGI,cAAO,K,OAFY,EAAAroD,KACA,EAAAqoD,Q,EAU3B,OAbyC,OASrC,YAAAzuB,MAAA,SAAMhvB,GACF,IAAMyvC,EAAUhkB,KAAK0D,UAAUnvB,GAC/B7P,KAAKstD,MAAMkjE,aAAaxwH,KAAKiF,GAAIq6C,IAEzC,EAbA,CAAyC,EAAAyxE,eAAe,EAAA/7E,wBAA3C,EAAA87E,uB,60DCRb,WAQA,OACA,OAEA,SACA,OAEA,aAYI,WAAYnrG,GATJ,KAAAkoC,OAAS,EACT,KAAA4nD,YAAc,IAAIxpG,IAClB,KAAA+kH,WAAa,IAAI/kH,IAER,KAAAglH,iBAAkD,IAAI,EAAA1jG,QACtD,KAAA2jG,mBAAkD,IAAI,EAAA3jG,QACtD,KAAA4jG,wBAAgE,IAAI,EAAA5jG,QACpE,KAAA6jG,0BAAgE,IAAI,EAAA7jG,QAGjFvtB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBoB,YAC7ChX,KAAKqxH,sBAmJb,OAhJI,sBAAI,6BAAc,C,IAAlB,WACI,OAAO,EAAIrxH,KAAKgxH,WAAW7jE,W,gCAG/B,sBAAI,6BAAc,C,IAAlB,WACI,OAAOntD,KAAKixH,iBAAiBllG,O,gCAGjC,YAAAulG,gBAAA,SAAgBjgH,GACZrR,KAAKixH,iBAAiBrjG,KAAK,CACvBvc,UAAWrR,KAAKuxH,iBAAiBlgH,MAIzC,sBAAI,2BAAY,C,IAAhB,WACI,OAAOrR,KAAKkxH,mBAAmBnlG,O,gCAGnC,YAAAylG,cAAA,SAAcvsH,GACV,IAAM6M,EAAgB9R,KAAKgxH,WAAWpyH,IAAIqG,GAC1C,IAAK6M,EACD,MAAM,IAAI7Q,MAAM,0BAA0BgE,EAAE,iBAGhDjF,KAAKgxH,WAAWnqH,OAAO5B,GAEvBjF,KAAKkxH,mBAAmBtjG,KAAK,CACzBvc,UAAWS,KAInB,sBAAI,oCAAqB,C,IAAzB,WACI,OAAO9R,KAAKmxH,wBAAwBplG,O,gCAGxC,YAAA0lG,uBAAA,SAAuBxc,EAAmByc,GACtC1xH,KAAKmxH,wBAAwBvjG,KAAK,CAC9BqnF,UAAS,EACT5jG,UAAWrR,KAAKuxH,iBAAiBG,MAIzC,sBAAI,kCAAmB,C,IAAvB,WACI,OAAO1xH,KAAKoxH,0BAA0BrlG,O,gCAG1C,YAAA4lG,qBAAA,SAAqBC,EAAkBC,GACnC,IAAM//G,EAAgB9R,KAAKgxH,WAAWpyH,IAAIizH,GAC1C,IAAK//G,EACD,MAAM,IAAI7Q,MAAM,0BAA0B4wH,EAAM,iBAGpD7xH,KAAKoxH,0BAA0BxjG,KAAK,CAChCvc,UAAWS,EACX8/G,SAAQ,KAIhB,YAAA70B,qBAAA,SAAqB3qF,EAAc6nF,GAC/B,IAAMpsC,EAAS7tD,KAAKw2G,cAAc,IAAI,EAAAsb,oBAAoB73B,IAE1D,OADAj6F,KAAKstD,MAAMykE,sBAAsBlkE,EAAQz7C,GAClCpS,KAAKs2G,iBAAiBzoD,IAG3B,YAAAq0C,WAAN,SAAiBv2F,G,kGAGI,OAFXqmH,EAAcrmH,EAASA,EAAO8I,aAAUnU,EACxC+R,EAAW1G,EAASA,EAAOyG,UAAO9R,EACvB,GAAMN,KAAKstD,MAAM2kE,YAAYD,EAAa3/G,I,OAC3D,MAAO,CAAP,EADiB,SACD4H,KAAI,SAAA20F,GAAO,OAAA+U,EAAUuO,OAAOtjB,eAG1C,YAAAzM,YAAN,SAAkBp/E,G,yGACRhH,EAAU4nG,EAAUwO,SAASpvG,IAEV,GAAM/iB,KAAKstD,MAAM8kE,aAAar2G,IADnD,M,OAEA,GADM21G,EAAe,SAGjB,MAAO,CAAP,EADsB1xH,KAAKuxH,iBAAiBG,IAGhD,MAAM,IAAIzwH,MAAM,uD,OAEpB,MAAM,IAAIA,MAAM,oEAGpB,YAAAoxH,cAAA,SAAc3uG,EAAgBkc,GAC1B,IAAM62E,EAAUz2G,KAAKy1G,YAAY72G,IAAI8kB,GACrC,OAAI+yF,EACOA,EAAQ6b,aAAa1yF,GAErBrR,QAAQ4I,OAAO,IAAIl2B,MAAM,uCAIxC,YAAAsxH,aAAA,SAAa7uG,EAAgBX,EAAe6c,GACxC,IAAM62E,EAAUz2G,KAAKy1G,YAAY72G,IAAI8kB,GACrC,OAAI+yF,EACOA,EAAQ+b,YAAYzvG,EAAM6c,GAE1BrR,QAAQ4I,OAAO,IAAIl2B,MAAM,sCAIhC,YAAAu1G,cAAR,SAAsBC,GAClB,IAAM5oD,EAAS7tD,KAAK81G,aAEpB,OADA91G,KAAKy1G,YAAYlqG,IAAIsiD,EAAQ4oD,GACtB5oD,GAGH,YAAAioD,WAAR,WACI,OAAO91G,KAAK6tD,UAGR,YAAAyoD,iBAAR,SAAyBzoD,GAAzB,WACI,OAAO,IAAI,EAAA1tD,YAAW,WAClB,EAAKs1G,YAAY5uG,OAAOgnD,GACxB,EAAKP,MAAMipD,YAAY1oD,OAIjB,YAAAwjE,oBAAd,W,uGAE+B,O,sBAAA,GAAMrxH,KAAKstD,MAAMmlE,mB,cAAjB,SACRtmH,SAAQ,SAAAkF,GAAa,SAAKkgH,iBAAiBlgH,M,+BAE1D0b,QAAQC,MAAM,gCAAgC,G,+BAI9C,YAAAukG,iBAAR,SAAyBlgH,GAAzB,WACUqhH,EAAcrhH,EAAUpM,GAC1B5C,EAA0CrC,KAAKgxH,WAAWpyH,IAAI8zH,GAClE,OAAIrwH,IAIJA,EAAS,CACL0gB,KAAM4gG,EAAUuO,OAAO7gH,EAAU0R,MACjC4vG,UAAW,WACP,EAAKrlE,MAAMslE,eAAeF,KAGlC1yH,KAAKgxH,WAAWzlH,IAAImnH,EAAarwH,GAC1BA,IAEf,EAjKA,GAAa,EAAAyyF,gB,gRCbb,WACA,QAGA,aAII,WAA6BmF,GAAA,KAAAA,WAHrB,KAAAuoB,QAAU,EACV,KAAAvuD,MAAQ,IAAIhoD,IA2CxB,OAvCI,YAAAqmH,aAAA,SAAa1yF,GAAb,WACI,OAAOrR,QAAQtH,QAAQjnB,KAAKi6F,SAASq4B,aAAa1yF,IAAQvI,MAAK,SAAA2lE,G,QAC3D,GAAKl0F,MAAMC,QAAQi0F,GAAnB,CAGA,IAAM36F,EAAoB,G,IAC1B,IAAmB,QAAA26F,GAAK,8BAAE,CAArB,IAAMj6E,EAAI,QACL+N,EAAOkgF,EAAUmhB,SAASpvG,GAChC,GAAK+N,EAAL,CAIA,IAAM7rB,EAAK,EAAKu9G,UAChB,EAAAp2D,iBAAiBpb,MAAMlgB,EAAM7rB,GAC7B,EAAKgvD,MAAM1oD,IAAItG,EAAI8d,GACnB1gB,EAAO0I,KAAK+lB,K,iGAEhB,OAAOzuB,OAIf,YAAAmwH,YAAA,SAAYzvG,EAAe6c,GACvB,GAAyC,mBAA9B5/B,KAAKi6F,SAASu4B,YACrB,OAAOjkG,QAAQtH,aAAQ3mB,GAE3B,IAAM2E,EAAK,EAAAmnD,iBAAiBC,GAAGtpC,GACzB0uF,EAASzxG,KAAKi0D,MAAMr1D,IAAIqG,GACxBoW,EAAOo2F,GAAkBT,EAAUkhB,OAAOnvG,GAChD,OAAK1H,EAIEkT,QAAQtH,QAAQjnB,KAAKi6F,SAASu4B,YAAYn3G,EAAMukB,IAAQvI,MAAK,SAAAr4B,GAChE,GAAIA,EACA,OAAOgyG,EAAUmhB,SAASnzH,MALvBuvB,QAAQtH,aAAQ3mB,IAUnC,EA7CA,GAAa,EAAAwxH,uB,2FCLb,WAEA,OAEA,QACA,OAEA,aAQI,WAAYnsG,GALK,KAAAktG,YAAc,IAAItiD,IAClB,KAAAuiD,YAAc,IAAI7mH,IAE3B,KAAA8mH,WAAqB,EAGzB/yH,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBuB,kBAC7CnX,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQC,MAC7B1rD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQE,UAC7B3rD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQQ,QAC7BjsD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQO,WAC7BhsD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQS,UAC7BlsD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQG,MAC7B5rD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQI,OAC7B7rD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQK,QAC7B9rD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQM,MAC7B/rD,KAAK6yH,YAAYzmG,IAAI,EAAAq/B,QAAQU,SAoDrC,OAjDI,YAAAmwC,2BAAA,SAA2Bp9E,EAAgB+6E,GAA3C,WACI,GAAIj6F,KAAK6yH,YAAYxnH,IAAI6T,GACrB,MAAM,IAAIje,MAAM,8BAA8Bie,EAAM,2BAGxD,IAAMwE,EAAS1jB,KAAK+yH,aAMpB,OALA/yH,KAAK6yH,YAAYzmG,IAAIlN,GACrBlf,KAAK8yH,YAAYvnH,IAAImY,EAAQu2E,GAE7Bj6F,KAAKstD,MAAM0lE,4BAA4BtvG,EAAQxE,GAExC,IAAI,EAAA/e,YAAW,WAClB,EAAK0yH,YAAYhsH,OAAOqY,GACxB,EAAK4zG,YAAYjsH,OAAO6c,GACxB,EAAK4pC,MAAM2lE,oBAAoBvvG,OAI/B,YAAAwvG,oBAAR,SAA4BxvG,GACxB,IAAK1jB,KAAK8yH,YAAYznH,IAAIqY,GAAS,CAC/B,IAAMmM,EAAM,IAAI5uB,MAGhB,MAFA4uB,EAAIvxB,KAAO,SACXuxB,EAAIjoB,QAAU,cACRioB,IAMd,YAAAsjG,UAAA,SAAUzvG,EAAgBtY,EAAyBN,GAG/C,OAFA9K,KAAKkzH,oBAAoBxvG,GAElB6K,QAAQtH,QAAQjnB,KAAK8yH,YAAYl0H,IAAI8kB,GAAS+M,SAAS,UAAI5N,OAAOzX,KAAYisB,MAAK,SAAAvG,GACtF,IAAMuU,EAASnB,EAAOgB,SAASpU,GAAQA,EAAOoT,EAAOhkC,KAAK4wB,EAAKuU,OAAQvU,EAAK4T,WAAY5T,EAAK6T,YACvFG,EAAuB,OAAZh6B,OAAmBxK,EAAYwK,GAAWA,EAAQg6B,SACnE,OAAOO,EAAO/5B,SAASw5B,OAK/B,YAAAsuF,WAAA,SAAW1vG,EAAgBtY,EAAyBk0C,EAAiBx0C,GACjE9K,KAAKkzH,oBAAoBxvG,GAEzB,IAAM7d,EAAM,UAAIgd,OAAOzX,GACjB05B,EAAuB,OAAZh6B,OAAmBxK,EAAYwK,GAAWA,EAAQg6B,SAC7DO,EAASnB,EAAOhkC,KAAKo/C,EAASxa,GAEpC,OAAOvW,QAAQtH,QAAQjnB,KAAK8yH,YAAYl0H,IAAI8kB,GAASmN,UAAUhrB,EAAKw/B,EADvD,CAAEhmC,QAAQ,EAAM6xC,WAAW,MAGhD,EAvEA,GAAa,EAAAkkD,sB,s2DCNb,WAGA,QAEA,QAEA,OAGA,aAMI,WAAqBzvE,EAAmC8vE,GAAxD,WAAqB,KAAA9vE,MAAmC,KAAA8vE,WALhD,KAAA/xE,OAAiB,EAER,KAAA2vG,iBAAmB,IAAIpnH,IACvB,KAAAqnH,0BAAgE,IAAIrnH,IAGjFjM,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBwB,UAC7Cq+E,EAASgP,0BAA0B,CAE/BH,gBAAiB,SAACz0F,GACd,IAAK,EAAAyF,cAAcvF,GAAGF,GAClB,OAAOA,EAEX,IAAM0jH,EAAgB,EAAKF,iBAAiBz0H,IAAIiR,EAAI2jH,qBACpD,GAAKD,EAAL,CAGA,GAAuC,iBAA5B1jH,EAAI4jH,oBACX,OAAOF,EAEX,IAAMG,EAAgBH,EAAcI,iBAAiB9jH,EAAI4jH,qBACzD,MAAuC,iBAA5B5jH,EAAI+jH,oBACJF,EAEJA,GAAiBA,EAAcG,iBAAiBhkH,EAAI+jH,yBAuD3E,OAlDI,YAAAhxB,oBAAA,SAAoBp8E,EAAwBvhB,EAAYmC,EAAey7F,GACnE,IAAM0wB,EAAgB,IAAIO,EAAkB9zH,KAAKstD,MAAOttD,KAAKy1F,SAAUxwF,EAAImC,EAAOy7F,GAClF7iG,KAAKqzH,iBAAiB9nH,IAAIvL,KAAK0jB,SAAU6vG,GACzC,IAAMQ,EAAiB/zH,KAAKszH,0BAA0B10H,IAAI4nB,EAAOjS,MAAMtP,KAAO,GAG9E,OAFA8uH,EAAehpH,KAAKwoH,GACpBvzH,KAAKszH,0BAA0B/nH,IAAIib,EAAOjS,MAAMtP,GAAI8uH,GAC7CR,GAGX,YAAA5wB,gBAAA,SAAgBn8E,GACZ,IAAMutG,EAAiB/zH,KAAKszH,0BAA0B10H,IAAI4nB,EAAOjS,MAAMtP,IACjEsuH,EAAgBQ,GAAkBA,EAAeA,EAAetoH,OAAS,GAE/E,OADiB8nH,GAAiBA,EAAc7wB,UAI9C,YAAAsxB,wBAAN,SAA8BR,EAA6BS,EAAqBC,G,kFACtEX,EAAgBvzH,KAAKqzH,iBAAiBz0H,IAAI40H,MAEtCW,EAASZ,EAAoCI,iBAAiBM,KAE/DE,EAAyCC,uBAAuBF,G,WAKvE,YAAAG,yBAAN,SAA+Bb,EAA6B3tH,EAAa+5B,G,2EAGrE,OAFM2zF,EAAgBvzH,KAAKqzH,iBAAiBz0H,IAAI40H,GAChDzmG,QAAQkO,IAAIs4F,GACRA,GAAiBA,EAAce,mBAAqBf,EAAce,kBAAkBC,0BAE9EzyG,EAAc,IAAI,UAAIjc,IACrBC,OAASD,EACT,CAAP,EAAO0tH,EAAce,kBAAkBC,wBAAwBzyG,EAAQ8d,K,WAIzE,YAAA40F,gBAAN,SAAsBhB,EAA6Bx0H,G,gFACzCu0H,EAAgBvzH,KAAKqzH,iBAAiBz0H,IAAI40H,KAE5CD,EAAc7wB,SAAS+xB,aAAaz1H,G,WAItC,YAAA01H,2BAAN,SAAiClB,EAA6BmB,G,gFACpDpB,EAAgBvzH,KAAKqzH,iBAAiBz0H,IAAI40H,MAE5CD,EAAcoB,SAAWA,G,WAGrC,EAhFA,GAAa,EAAAr/B,aAkFb,iBAII,WAAoBhoC,EAAwBkmE,GAAxB,KAAAlmE,QAAwB,KAAAkmE,sBAwBhD,OArBI,sBAAI,oBAAK,C,IAAT,WACI,OAAOxzH,KAAKwiC,Q,IAGhB,SAAUxjC,GACNgB,KAAKy0H,aAAaz1H,GAClBgB,KAAKstD,MAAMsnE,kBAAkB50H,KAAKwzH,oBAAqBx0H,I,gCAG3D,YAAAy1H,aAAA,SAAaz1H,GACTgB,KAAKwiC,OAASxjC,GAGlB,sBAAI,0BAAW,C,IAAf,WACI,OAAOgB,KAAKyqG,c,IAGhB,SAAgBC,GACZ1qG,KAAKyqG,aAAeC,EACpB1qG,KAAKstD,MAAMunE,wBAAwB70H,KAAKwzH,oBAAqB9oB,I,gCAErE,EA5BA,GA8BA,aAoBI,WACYp9C,EACAmoC,EACA1iF,EACA+hH,EACAC,GALZ,WACY,KAAAznE,QACA,KAAAmoC,WACA,KAAA1iF,MACA,KAAA+hH,SACA,KAAAC,WAtBJ,KAAArxG,OAASowG,EAAkBpwG,SAElB,KAAAsxG,kBAAoB,IAAI/oH,IAQjC,KAAAgpH,WAAqB,EAEZ,KAAA/lF,UAAY,IAAI,EAAAM,qBAEhB,KAAA27D,4BAA8B,IAAI,EAAA59E,QAC1C,KAAAg/F,qBAA6CvsH,KAAKmrG,4BAA4Bp/E,MAsE7E,KAAAmpG,8BAAgC,IAAI,EAAA1lF,qBAiBpC,KAAA2lF,6BAA+B,IAAI,EAAA3lF,qBA9EzCxvC,KAAKo1H,UAAY,IAAIC,EAAa/nE,EAAOttD,KAAK0jB,QAC9C1jB,KAAKstD,MAAMgoE,uBAAuBt1H,KAAK0jB,OAAQ3Q,EAAK+hH,EAAQC,EAAWA,EAAS3tG,UAAO9mB,GACvFN,KAAKkvC,UAAUnkC,KAAK,EAAA5K,WAAWd,QAAO,WAAM,SAAKiuD,MAAMioE,yBAAyB,EAAK7xG,YA6G7F,OA1GI,sBAAI,iBAAE,C,IAAN,WACI,OAAO1jB,KAAK+S,K,gCAGhB,sBAAI,oBAAK,C,IAAT,WACI,OAAO/S,KAAK80H,Q,gCAGhB,sBAAI,sBAAO,C,IAAX,WACI,OAAO90H,KAAK+0H,U,gCAGhB,YAAAS,oBAAA,SAAoBvwH,EAAYmC,GAC5B,IAAMquH,EAA6B,IAAIC,EAA+B11H,KAAKstD,MAAOttD,KAAKy1F,SAAUz1F,KAAK0jB,OAAQze,EAAImC,GAGlH,OAFApH,KAAKg1H,kBAAkBzpH,IAAIuoH,EAAkBL,sBAAuBgC,GACpEz1H,KAAKkvC,UAAUnkC,KAAK0qH,GACbA,GAGX,sBAAI,uBAAQ,C,IAAZ,WACI,OAAOz1H,KAAKo1H,W,gCAGhB,sBAAI,oBAAK,C,IAAT,WACI,OAAOp1H,KAAK21H,Q,IAGhB,SAAUjoG,GACF1tB,KAAK21H,SAAWjoG,IAChB1tB,KAAK21H,OAASjoG,EACd1tB,KAAKstD,MAAMsoE,qBAAqB51H,KAAK0jB,OAAQ,CAAEgK,MAAK,M,gCAI5D,sBAAI,gCAAiB,C,IAArB,WACI,OAAO1tB,KAAK61H,oB,IAGhB,SAAsBvB,GAClBt0H,KAAK61H,mBAAqBvB,EAC1Bt0H,KAAKstD,MAAMsoE,qBAAqB51H,KAAK0jB,OAAQ,CAAEoyG,uBAAwBxB,K,gCAG3E,sBAAI,6BAAc,C,IAAlB,WACI,OAAOt0H,KAAK+1H,iB,IAGhB,SAAmBC,GACfh2H,KAAK+1H,gBAAkBC,EACvBh2H,KAAKstD,MAAMsoE,qBAAqB51H,KAAK0jB,OAAQ,CAAEsyG,eAAc,K,gCAGjE,YAAA31H,QAAA,WACIL,KAAKkvC,UAAU7uC,WAKnB,sBAAI,iCAAkB,C,IAAtB,WACI,OAAOL,KAAKi2H,qB,IAGhB,SAAuBC,GACnBl2H,KAAKk1H,8BAA8B70H,UACnCL,KAAKkvC,UAAUnkC,KAAK/K,KAAKk1H,+BAEzBl1H,KAAKi2H,oBAAsBC,EAE3Bl2H,KAAKstD,MAAMsoE,qBAAqB51H,KAAK0jB,OAAQ,CACzCwyG,mBAAoBl2H,KAAKy1F,SAASkuB,UAAU9e,cAAcqxB,EAAoBl2H,KAAKk1H,kC,gCAM3F,sBAAI,gCAAiB,C,IAArB,WACI,OAAOl1H,KAAKm2H,oB,IAGhB,SAAsBC,GAAtB,IAMQC,EANR,OACIr2H,KAAKm1H,6BAA6B90H,UAClCL,KAAKkvC,UAAUnkC,KAAK/K,KAAKm1H,8BAEzBn1H,KAAKm2H,mBAAqBC,EAGtBA,IACAC,EAAwBD,EAAkBn8G,KAAI,SAAAq8G,GAAoB,SAAK7gC,SAASkuB,UAAU9e,cAAcyxB,EAAkB,EAAKnB,kCAEnIn1H,KAAKstD,MAAMsoE,qBAAqB51H,KAAK0jB,OAAQ,CACzC0yG,kBAAmBC,K,gCAI3B,YAAA1C,iBAAA,SAAiBjwG,GACb,OAAO1jB,KAAKg1H,kBAAkBp2H,IAAI8kB,IAGtC,sBAAI,uBAAQ,C,IAAZ,WACI,OAAO1jB,KAAKi1H,W,IAGhB,SAAaN,GACT30H,KAAKi1H,UAAYN,EACjB30H,KAAKmrG,4BAA4Bv9E,KAAK+mG,I,gCAvI3B,EAAAjxG,OAAiB,EACjB,EAAA+vG,oBAA8B,EAwIjD,EA1IA,GA4IA,aASI,WACYnmE,EACAmoC,EACA+9B,EACAzgH,EACA+hH,GAJA,KAAAxnE,QACA,KAAAmoC,WACA,KAAA+9B,sBACA,KAAAzgH,MACA,KAAA+hH,SAVJ,KAAApxG,OAASgyG,EAA+BhyG,SACxC,KAAA6yG,oBAAsCj2H,EACtC,KAAAk2H,gBAAsD,GACtD,KAAAC,kBAAmE,IAAIxqH,IAS3EjM,KAAKstD,MAAMopE,eAAelD,EAAqBxzH,KAAK0jB,OAAQ3Q,EAAK+hH,GAyEzE,OAtEI,sBAAI,iBAAE,C,IAAN,WACI,OAAO90H,KAAK+S,K,gCAGhB,sBAAI,oBAAK,C,IAAT,WACI,OAAO/S,KAAK80H,Q,IAGhB,SAAU1tH,GACNpH,KAAK80H,OAAS1tH,EACdpH,KAAKstD,MAAMqpE,kBAAkB32H,KAAKwzH,oBAAqBxzH,KAAK0jB,OAAQtc,I,gCAGxE,sBAAI,4BAAa,C,IAAjB,WACI,OAAOpH,KAAKu2H,gB,IAGhB,SAAkBK,GACd52H,KAAKu2H,eAAiBK,EACtB52H,KAAKstD,MAAMupE,aAAa72H,KAAKwzH,oBAAqBxzH,KAAK0jB,OAAQ,CAAEkzG,cAAa,K,gCAGlF,sBAAI,6BAAc,C,IAAlB,WACI,OAAO52H,KAAKw2H,iB,IAGhB,SAAmBM,GAAnB,WACI92H,KAAKw2H,gBAAkBM,EACvB92H,KAAKy2H,kBAAkB14E,QACvB/9C,KAAKstD,MAAMypE,qBAAqB/2H,KAAKwzH,oBAAqBxzH,KAAK0jB,OAAQozG,EAAU78G,KAAI,SAAA+8G,GACjF,IACIC,EACAC,EAFExzG,EAASgyG,EAA+BxB,iBAG9C,GAAI8C,EAAcztH,QAAS,CACjB,gBAAEA,EAAA,EAAAA,QAASmB,EAAA,EAAAA,MACjBusH,EAAkB,CAAEhyH,GAAIsE,GAAoB,GAAImB,MAAOA,GAAgB,GAAIkD,QADnDA,EAAA,EAAAA,SAG5B,GAAIopH,EAAcE,YAAa,CACrB,oBAAEC,EAAA,EAAAA,cAAeC,EAAA,EAAAA,MAAOxpH,EAAA,EAAAA,QAASsW,EAAA,EAAAA,MAAOC,EAAA,EAAAA,KACxCkzG,EAAQnzG,GAASC,EACnBxW,OAAQ,EACR0pH,GAASA,EAAM1pH,WACfA,EAAqC,iBAAnB0pH,EAAM1pH,SAAwB0pH,EAAM1pH,SAAW0pH,EAAM1pH,SAASyZ,MAEpF8vG,EAAc,CAAEC,cAAa,EAAEC,MAAK,EAAExpH,QAAO,EAAED,SAAQ,GAE3D,EAAK8oH,kBAAkBlrH,IAAImY,EAAQszG,GAEnC,IAAM5rH,EAAgB4rH,EACtB,MAAO,CAAEtzG,OAAM,EAAE9W,YAAaoqH,EAAcpqH,YAAYwa,KAAM7d,QAAS0tH,EAAiBC,YAAW,EAAEhrC,OAAQ9gF,EAAS8gF,OAAQ6gB,QAAS3hG,EAASuI,MAAM1O,S,gCAIxJ,YAAAmvH,uBAAN,SAA6BkD,G,2GACnBx6F,EAAQ98B,KAAKy2H,kBAAkB73H,IAAI04H,KAC5Bx6F,EAAMvzB,UACTA,EAAUuzB,EAAMvzB,SACVA,QACR,IAAM,EAAAvJ,KAAKy1F,UAASwO,gBAAe,WAAC16F,EAAQA,SAAYA,EAAQ+F,aAHpE,M,OAGI,S,mCAKZ,YAAAukH,iBAAA,SAAiBnwG,GACb,OAAO1jB,KAAKy2H,kBAAkB73H,IAAI8kB,IAGtC,YAAArjB,QAAA,WACIL,KAAKstD,MAAMiqE,iBAAiBv3H,KAAKwzH,oBAAqBxzH,KAAK0jB,SArFhD,EAAAA,OAAiB,EACjB,EAAAwwG,eAAyB,EAsF5C,EAzFA,I,g7CCtQA,WASA,OACA,OAEA,aAMI,WAAqBvuG,GAAA,KAAAA,MACjB3lB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmByB,kBAC7CrX,KAAKw3H,aAAe,IAAIvrH,IAgDhC,OA7CI,YAAA+tF,2BAAA,SAA2BC,GAA3B,WACUh1F,EAAKuwF,EAAmBiiC,cAC9Bx9B,EAASy9B,wBAAuB,SAAA7nH,GAC5B,IAAI8nH,EACA7uH,MAAMC,QAAQ8G,GACd8nH,EAAW9nH,EAAIoK,KAAI,SAAApU,GAAO,OAAAA,EAAIyF,cACvBuE,IACP8nH,EAAW9nH,EAAIvE,YAEnB,EAAKgiD,MAAMsqE,0BAA0B3yH,EAAI0yH,MAE7C,IAAME,EAAmC,CAC/BC,kBAAN,SAAwBjyH,G,oGACR,SAAMo0F,EAAS69B,kBAAkB,UAAI50G,MAAMrd,GAAM,IAAIkyH,I,OACjE,OADMlsH,EAAM,WAEJ8H,OAAK,EACL9H,EAAI8H,QAEEqkH,EAAUnsH,EAAI8H,MACpBA,EAAQ,CAAE1O,GAAI+yH,EAAG/yH,KAEd,CAAP,EAAO,CACHinF,OAAQrgF,EAAIqgF,OACZxhF,MAAOmB,EAAInB,MACXiJ,MAAOA,EACPklF,SAAUhtF,EAAIgtF,SACdo/B,OAAQpsH,EAAIosH,OACZ7mH,OAAQvF,EAAIuF,U,aAO5B,OAFApR,KAAKstD,MAAM4qE,4BAA4BjzH,EAAI4yH,GAC3C73H,KAAKw3H,aAAajsH,IAAItG,EAAI4yH,GACnB,IAAI,EAAA13H,YAAY,WACnB,EAAKmtD,MAAMs/C,SAAS3nG,OAItB,YAAAkzH,mBAAN,SAAyBlzH,EAAYY,G,yEAEjC,OADMo0F,EAAWj6F,KAAKw3H,aAAa54H,IAAIqG,IAE5B,CAAP,EAAOg1F,EAAS69B,kBAAkBjyH,I,WApDnC,EAAA4xH,YAAsB,EAuDjC,EAxDA,GAAa,EAAAjiC,qBA0Db,oB,suECrEA,IAeK/vF,EAMA2yH,EArBL,OAEA,OAQA,QACA,SAEA,QAwBA,SAASC,EAAOC,EAAWh5H,GACvB,GAAKA,EAAL,CAMA,IAFA,IAAMqK,EAAQrK,EAAIioB,MAAM,KACpBm/F,EAAO4R,EACFv6H,EAAI,EAAG2oH,GAAQ3oH,EAAI4L,EAAM8B,OAAQ1N,IACtC2oH,EAAOA,EAAK/8G,EAAM5L,IAEtB,OAAO2oH,IAhCX,SAAKjhH,GACD,uBACA,6BACA,yCAHJ,CAAKA,MAAmB,KAMxB,SAAK2yH,GACD,yBACA,mBACA,6BACA,uBAJJ,CAAKA,MAAe,KA6BpB,iBAOI,WACIzyG,EACiBy0E,GAAA,KAAAA,YANJ,KAAAm+B,0BAA4B,IAAI,EAAAhrG,QAExC,KAAA4tE,yBAAkEn7F,KAAKu4H,0BAA0BxsG,MAmKzF,KAAAysG,kBAAoB,cACpB,KAAAC,0BAA4B,IAAI1nF,OAAO/wC,KAAKw4H,mBA9JzDx4H,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBc,0BA8MrD,OA3MI,YAAAqtC,KAAA,SAAKjzB,GACD9wB,KAAK04H,aAAe14H,KAAKkjB,MAAM4N,IAGnC,YAAA6nG,4BAAA,SAA4B7nG,EAAsB8nG,GAC9C54H,KAAK+jD,KAAKjzB,GACV9wB,KAAKu4H,0BAA0B3qG,KAAK5tB,KAAK64H,2BAA2BD,KAGxE,YAAA39B,iBAAA,SAAiBC,EAAkB9vF,EAA6B0tH,GAAhE,WACI1tH,EAAwB,OAAbA,OAAoB9K,EAAY8K,EAC3C,IAAM25E,EAAc/kF,KAAK+4H,gBAAgB79B,EACnCm9B,EAAOr4H,KAAK04H,aAAa/jD,cAASr0E,EAAWN,KAAKo6F,UAAWhvF,GAAW8vF,GACxEl7F,KAAK04H,aAAa/jD,cAASr0E,EAAWN,KAAKo6F,UAAWhvF,IAEtD0zF,EAA8C,CAChDzzF,IAAA,SAAI/L,GACA,YAA2C,IAA7B+4H,EAAOtzC,EAAazlF,IAEtCV,IAAK,SAAIU,EAAa0F,GAClB,IAAM3C,EAASg2H,EAAOtzC,EAAazlF,GACnC,QAAsB,IAAX+C,EACP,OAAO2C,EAEP,IAAI,OAAoB1E,EAClB,EAAoB,SAAC8I,EAAa4vH,GACpC,IAAIC,OAAoB34H,EAClB44H,EAAc,WAChB,EAAe,GAA8BC,EAAUp0C,GACvDk0C,EAAeA,EAAeC,EAAcb,EAAO,EAAcW,IAGrE,OAAK,EAAAloF,SAAS1nC,GAGP,IAAIskD,MAAMtkD,EAAQ,CACrBxK,IAAK,SAACw6H,EAAWz5D,GACb,GAAoB,iBAATA,GAA4C,WAAvBA,EAAKtpC,cAEjC,OADA6iG,IACO,WAAM,OAAAD,GAEjB,GAAI,EAEA,OADAA,EAAeC,GAA4Bb,EAAO,EAAcW,IAC5Cr5D,GAExB,IAAM9zD,EAAMutH,EAAKz5D,GACjB,MAAoB,iBAATA,EACA,EAAkB9zD,EAAQmtH,EAAQ,IAAIr5D,GAE1C9zD,GAEXN,IAAK,SAAC6tH,EAAWz5D,EAAc1tC,GAG3B,OAFAinG,IACAD,EAAat5D,GAAQ1tC,GACd,GAEXonG,eAAgB,SAACD,EAAWz5D,GAGxB,OAFAu5D,WACOD,EAAat5D,IACb,GAEXjhE,eAAgB,SAAC06H,EAAWz5D,EAAc25D,GAGtC,OAFAJ,IACAz6H,OAAOC,eAAeu6H,EAAct5D,EAAM25D,IACnC,KA/BJlwH,GAmCf,OAAO,EAAkB/G,EAAQ/C,IAGzCsQ,OAAQ,SAACtQ,EAAaN,EAAY6Q,GAC9BvQ,EAAM47F,EAAaA,EAAO,IAAI57F,EAAQA,EACtC,IAAMi6H,EAAkCnuH,EAAWA,EAASE,gBAAahL,EACzE,YAAqB,IAAVtB,EACA,EAAKsuD,MAAMksE,2BAA2B3pH,EAAKvQ,EAAKN,EAAOu6H,GAEvD,EAAKjsE,MAAMmsE,2BAA2B5pH,EAAKvQ,EAAKi6H,IAG/Dp2F,QAAS,SAAI7jC,GACTA,EAAM47F,EAAaA,EAAO,IAAI57F,EAAQA,EACtC8L,EAAwB,OAAbA,OAAoB9K,EAAY8K,EAC3C,IAAM/I,EAAS82H,EAAU,EAAKT,aAAav1F,QAAW7jC,EAAK,EAAK86F,UAAWhvF,IAE3E,GAAK/I,EAAL,CAIA,IAAMq3H,EAAyC,CAAEp6H,IAAG,GAapD,YAZ8B,IAAnB+C,EAAOi8G,UACdob,EAAc10H,aAAe3C,EAAOi8G,cAEb,IAAhBj8G,EAAOs3H,OACdD,EAAcE,YAAcv3H,EAAOs3H,WAEP,IAArBt3H,EAAO+3F,YACds/B,EAAcG,eAAiBx3H,EAAO+3F,gBAEJ,IAA3B/3F,EAAOy3H,kBACdJ,EAAcK,qBAAuB13H,EAAOy3H,iBAEzCJ,KAQf,MAJ2B,iBAAhB30C,GACP,EAAA/zC,MAAM8tD,EAAe/Z,GAAa,GAG/BtmF,OAAO6vB,OAAOwwE,IAGjB,YAAAi6B,gBAAR,SAAwBjoG,GACpB,IAAMkpG,EAAgB,SAAC5wH,GAAqB,SAAA0nC,SAAS1nC,GAC/C,IAAIskD,MAAMtkD,EAAQ,CAChBxK,IAAK,SAACw6H,EAAWz5D,GAAiB,OAAAq6D,EAAcZ,EAAKz5D,KACrDp0D,IAAK,SAAC6tH,EAAWz5D,EAAc1tC,GAC3B,MAAM,IAAIhxB,MAAM,mDAAmD0+D,EAAI,gBAE3E05D,eAAgB,SAACD,EAAWz5D,GACxB,MAAM,IAAI1+D,MAAM,gDAAgD0+D,EAAI,gBAExEjhE,eAAgB,SAAC06H,EAAWz5D,GACxB,MAAM,IAAI1+D,MAAM,sCAAsC0+D,EAAI,2BAE9DzxD,eAAgB,SAACkrH,GACb,MAAM,IAAIn4H,MAAM,0DAEpBg5H,aAAc,WAAM,UACpBC,kBAAmB,WAAM,YAE3B9wH,GACN,OAAO4wH,EAAclpG,IAGjB,YAAA5N,MAAR,SAAc4N,GAAd,WACUqpG,EAAuBn6H,KAAKo6H,sBAAsBtpG,EAAKsnG,EAAgBiC,UACvEC,EAAoBt6H,KAAKo6H,sBAAsBtpG,EAAKsnG,EAAgBmC,OACpEC,EAAyBx6H,KAAKo6H,sBAAsBtpG,EAAKsnG,EAAgBqC,YACzEC,EAAuB,GAI7B,OAHAj8H,OAAOskC,KAAKjS,EAAKsnG,EAAgB/yH,SAAS8G,SAAQ,SAAAf,GAC9CsvH,EAAqBtvH,GAAY,EAAKgvH,sBAAsBtpG,EAAKsnG,EAAgB/yH,QAAQ+F,OAEtF,IAAI,EAAAuvH,cAAcR,EAAsBG,EAAmBE,EAAwBE,IAGtF,YAAAN,sBAAR,SAA8BtpG,GAC1B,OAAKA,EAGE,IAAI,EAAA8pG,mBAAmB56H,KAAK66H,uBAAuB/pG,GAAOryB,OAAOskC,KAAKjS,IAFlE,IAAI,EAAA8pG,oBAQX,YAAAC,uBAAR,SAA+B/pG,GAA/B,WACI,OAAOryB,OAAOskC,KAAKjS,GAAM6tC,QAAO,SAACt8D,EAAa/C,GAI1C,IAHA,IAAMqK,EAAQrK,EAAIioB,MAAM,KACpBuzG,EAASz4H,EAEJtE,EAAI,EAAGA,EAAI4L,EAAM8B,OAAQ1N,IAC9B,GAAIA,IAAM4L,EAAM8B,OAAS,GAczB,GAVKqvH,EAAOnxH,EAAM5L,MACd+8H,EAAOnxH,EAAM5L,IAAM,IAEvB+8H,EAASA,EAAOnxH,EAAM5L,IAOZ,IAANA,GAAW,EAAK06H,0BAA0BrpG,KAAKzlB,EAAM5L,IAAK,CAC1D+8H,EAAOx7H,EAAIy1B,UAAUprB,EAAM,GAAG8B,OAAS,IAAMqlB,EAAKxxB,GAClD,YAfAw7H,EAAOnxH,EAAM5L,IAAM+yB,EAAKxxB,GAkBhC,OAAO+C,IACR,KAGC,YAAAw2H,2BAAR,SAAmCD,GAC/B,OAAOn6H,OAAO6vB,OAAO,CACjBysG,qBAAsB,SAAC7/B,EAAiBr1F,G,YAGpC,IAAqB,QAAA+yH,GAAS,8BAAE,CAA3B,IAAMnkG,EAAM,QAKb,YAAwC,IAA1B4jG,EAJD5jG,EAAOumG,eACfzzG,MAAM,KACN0zG,UACAt8D,QAAO,SAACu8D,EAAgBC,G,MAAkB,aAAIA,GAAWD,EAAS,IAAKzmG,EAAO21C,UACxD8wB,I,iGAE/B,OAAO,MAKvB,EAzNA,GAAa,EAAAllB,6B,6qBCnDb,YACA,QAKA,aAKI,WACYmkD,EACAG,EACAE,EACAE,QADA,IAAAF,MAAA,IAAiDI,QACjD,IAAAF,MAAA,IAHA,KAAAP,uBACA,KAAAG,oBACA,KAAAE,yBACA,KAAAE,uBANJ,KAAAU,sBAAoE,GAiFhF,OAxEI,YAAAzmD,SAAA,SAASumB,EAA6Bd,EAA6BhvF,GAC/D,OAAOpL,KAAKq7H,0BAA0BjhC,EAAWhvF,GAAUupE,SAASumB,IAGxE,YAAA/3D,QAAA,SAAW7jC,EAAa86F,EAA6BhvF,GAOjD,IAAMkwH,EAAwBt7H,KAAKq7H,0BAA0BjhC,EAAWhvF,GAClEmwH,EAAsBv7H,KAAKw7H,wBAAwBphC,EAAWhvF,GACpE,MAAO,CACHkzG,QAASt+G,KAAKm6H,qBAAqBxlD,SAASr1E,GAC5Cq6H,KAAM35H,KAAKs6H,kBAAkB3lD,SAASr1E,GACtC86F,UAAWA,EAAYp6F,KAAKw6H,uBAAuB7lD,SAASr1E,QAAO,EACnEw6H,gBAAiByB,EAAsBA,EAAoB5mD,SAASr1E,QAAO,EAC3EN,MAAOs8H,EAAsB3mD,SAASr1E,KAItC,YAAA+7H,0BAAR,SAAkCjhC,EAA6BhvF,GAC3D,IAAMqwH,EAAiBz7H,KAAK07H,oBAC5B,IAAKthC,IAAchvF,EACf,OAAOqwH,EAGX,IAAM3B,EAAkB1/B,EAAUmC,mBAAmBnxF,GACrD,OAAK0uH,GAIE95H,KAAK27H,wBAAwB7B,EAAgBj0H,IAAIyF,aAH7CmwH,GAMP,YAAAC,kBAAR,WAII,OAHK17H,KAAKy7H,iBACNz7H,KAAKy7H,eAAiBz7H,KAAKm6H,qBAAqByB,MAAM57H,KAAKs6H,kBAAmBt6H,KAAKw6H,yBAEhFx6H,KAAKy7H,gBAGR,YAAAE,wBAAR,SAAgC/4G,GAC5B,GAAI5iB,KAAKo7H,sBAAsBx4G,GAC3B,OAAO5iB,KAAKo7H,sBAAsBx4G,GAGtC,IAAM64G,EAAiBz7H,KAAK07H,oBACtBG,EAAe77H,KAAK06H,qBAAqB93G,GAC/C,IAAKi5G,EACD,OAAOJ,EAGX,IAAMK,EAAuBL,EAAeG,MAAMC,GAGlD,OAFA77H,KAAKo7H,sBAAsBx4G,GAAUk5G,EAE9BA,GAGH,YAAAN,wBAAR,SAAgCphC,EAA6BhvF,GACzD,GAAKgvF,GAAchvF,EAAnB,CAIA,IAAM0uH,EAAkB1/B,EAAUmC,mBAAmBnxF,GACrD,GAAK0uH,EAGL,OAAO95H,KAAK06H,qBAAqBZ,EAAgBj0H,IAAIyF,cAG7D,EApFA,GAAa,EAAAqvH,gBAsFb,iBAEI,WACY9xH,EACAk6B,QADA,IAAAl6B,MAAA,SACA,IAAAk6B,MAAA,IADA,KAAAl6B,WACA,KAAAk6B,OAkDhB,OA/CI,YAAA4xC,SAAA,SAASumB,GACL,IAAKA,EACD,OAAOl7F,KAAK6I,SAKhB,IAFA,IAAMue,EAAO8zE,EAAQ3zE,MAAM,KACvB+rB,EAAUtzC,KAAK6I,SACV9K,EAAI,EAAGA,EAAIqpB,EAAK3b,OAAQ1N,IAAK,CAClC,GAAuB,iBAAZu1C,GAAoC,OAAZA,EAC/B,OAEJA,EAAUA,EAAQlsB,EAAKrpB,IAE3B,OAAOu1C,GAGX,YAAAsoF,MAAA,W,YAAM,kDACF,IAAM/yH,EAAWswH,EAAUn5H,KAAK6I,UAC1BkzH,EAAU,EAAI/7H,KAAK+iC,M,IAEzB,IAAoB,QAAAi5F,GAAM,8BAAE,CAAvB,IAAM36H,EAAK,QACZrB,KAAKi8H,cAAcpzH,EAAUxH,EAAMwH,UACnC7I,KAAKk8H,UAAUH,EAAS16H,EAAM0hC,O,iGAElC,OAAO,IAAI63F,EAAmB/xH,EAAUkzH,IAGpC,YAAAE,cAAR,SAAsB7qH,EAAahI,G,YAC/B,IAAkB,QAAA3K,OAAOskC,KAAK35B,IAAO,8BAAE,CAAlC,IAAM9J,EAAG,QACNA,KAAO8R,GACH,EAAA0/B,SAAS1/B,EAAO9R,KAAS,EAAAwxC,SAAS1nC,EAAO9J,IACzCU,KAAKi8H,cAAc7qH,EAAO9R,GAAM8J,EAAO9J,IAI/C8R,EAAO9R,GAAO65H,EAAU/vH,EAAO9J,K,mGAI/B,YAAA48H,UAAR,SAAkB9qH,EAAkBhI,G,YAChC,IAAkB,QAAAA,GAAM,8BAAE,CAArB,IAAM9J,EAAG,SACmB,IAAzB8R,EAAOiiB,QAAQ/zB,IACf8R,EAAOrG,KAAKzL,I,mGAK5B,EAtDA,GAAa,EAAAs7H,sB,cC7Gb98H,EAAOD,QAAU,SAASC,GAoBzB,OAnBKA,EAAOq+H,kBACXr+H,EAAOkpD,UAAY,aACnBlpD,EAAO+pB,MAAQ,GAEV/pB,EAAOwP,WAAUxP,EAAOwP,SAAW,IACxC7O,OAAOC,eAAeZ,EAAQ,SAAU,CACvCa,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOE,KAGhBS,OAAOC,eAAeZ,EAAQ,KAAM,CACnCa,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOC,KAGhBD,EAAOq+H,gBAAkB,GAEnBr+H,I,8ECJR,aAIA,8BAAmC6nB,GAC/B,OAAO,IAAI+nC,MAAM,IAAI,EAAA0uE,aAAaz2G,GAAM,CACpCgF,MAAO,SAAUvhB,EAAQuoB,EAAMpgB,GAC3Bwb,QAAQC,MAAM,iD,8mDCR1B,WACA,QAGA,OAEA,OAGA,QAGA,OACA,SACA,SACA,SACA,SACA,QASA,aA8BI,WAAYrH,GAAZ,WA5BQ,KAAA02G,SAAW,IAAIpwH,IAGf,KAAAqwH,uBAAyB,IAAIrwH,IAK7B,KAAA20F,uBAAyB,IAAI30F,IAC7B,KAAAswH,oBAAsB,IAAItwH,IAC1B,KAAAuwH,iBAAiE,GACjE,KAAAC,kBAAoB,IAAIxwH,IAOf,KAAAywH,8BAAgC,IAAI,EAAAnvG,QACpC,KAAAovG,qCAAuC,IAAI,EAAApvG,QAC3C,KAAAqvG,kCAAoC,IAAI,EAAArvG,QACxC,KAAAsvG,8BAAgC,IAAI,EAAAtvG,QACpC,KAAAuvG,sCAAwC,IAAI,EAAAvvG,QAI7D,KAAA4zE,YAAkC,GAG9BnhG,KAAKstD,MAAQ3nC,EAAIynC,SAAS,qBAAIl2C,YAC9BlX,KAAKkhG,mBAAqB,CACtBx3F,OAAQ,SAAC1K,GAAkB,SAAKsuD,MAAMyvE,sBAAsB/9H,IAC5Dk1G,WAAY,SAACl1G,GAAkB,SAAKsuD,MAAM0vE,0BAA0Bh+H,KA2RhF,OApRI,YAAA+hG,eAAA,SAAehM,EAAkCkoC,GAC7Cj9H,KAAK+0F,cAAgBA,EACrB/0F,KAAKi9H,mBAAqBA,GAQ9B,YAAAj8B,+BAAA,SAA+BhsF,EAAsBkoH,GAArD,WACIA,EAAc/wH,SAAQ,SAAAgxH,GAClB,EAAKV,kBAAkBlxH,IAAI4xH,EAAa/qH,KAAM4C,GAC9C,EAAK4rF,uBAAuBr1F,IAAI4xH,EAAa/qH,KAAM+qH,GACnD,EAAK7vE,MAAM8vE,8BAA8B,CACrChrH,KAAM+qH,EAAa/qH,KACnBhL,MAAO+1H,EAAa/1H,OAAS+1H,EAAa/qH,OAE9C2a,QAAQkO,IAAI,8CAA8CkiG,EAAa/qH,UAI/E,sBAAI,kDAAmC,C,IAAvC,WACI,OAAOpS,KAAK88H,sCAAsC/wG,O,gCAGtD,sBAAI,4CAA6B,C,IAAjC,WACI,OAAO/rB,KAAK28H,qCAAqC5wG,O,gCAGrD,sBAAI,yCAA0B,C,IAA9B,WACI,OAAO/rB,KAAK48H,kCAAkC7wG,O,gCAGlD,sBAAI,qCAAsB,C,IAA1B,WACI,OAAO/rB,KAAK68H,8BAA8B9wG,O,gCAG9C,sBAAI,qCAAsB,C,IAA1B,WACI,OAAO/rB,KAAK08H,8BAA8B3wG,O,gCAG9C,YAAAi2E,eAAA,SAAeb,GACXnhG,KAAKstD,MAAM+vE,gBAAgBl8B,IAG/B,YAAAc,kBAAA,SAAkBd,GACdnhG,KAAKstD,MAAMgwE,mBAAmBn8B,IAGlC,YAAAW,eAAA,SAAel/E,EAA2Cm/E,GACtD,OAAO/hG,KAAKstD,MAAMiwE,gBAAgB36G,EAAQm/E,IAG9C,YAAAN,sCAAA,SAAsCC,EAAmBC,GAAzD,WACI,GAAI3hG,KAAKu8H,oBAAoBlxH,IAAIq2F,GAC7B,MAAM,IAAIzgG,MAAM,0BAA0BygG,EAAS,gCAGvD,OADA1hG,KAAKu8H,oBAAoBhxH,IAAIm2F,EAAWC,GACjC,EAAAxhG,WAAWd,QAAO,WAAM,SAAKk9H,oBAAoB11H,OAAO66F,OAGnE,YAAAG,mCAAA,SAAmCH,EAAmBC,GAAtD,WACI,OAAKA,GAIL3hG,KAAKw8H,iBAAiBzxH,KAAK,CAAC22F,EAAWC,IAChC,EAAAxhG,WAAWd,QAAO,WACrB,EAAKm9H,iBAAmB,EAAKA,iBAAiB7wH,QAAO,SAAA6xH,GAAS,OAAAA,EAAM,KAAO77B,SALpE,EAAAxhG,WAAWd,QAAO,gBASjC,YAAAuiG,mCAAA,SAAmCF,EAAmBzH,GAAtD,WACIltE,QAAQkO,IAAI,qDAAqDymE,GACjE,IAAM+7B,EAAYz9H,KAAKs8H,uBAAuB19H,IAAI8iG,IAAc,IAAInxB,IAIpE,OAHAvwE,KAAKs8H,uBAAuB/wH,IAAIm2F,EAAW+7B,GAC3CA,EAAUrxG,IAAI6tE,GAEP,EAAA95F,WAAWd,QAAO,WAErB,IAAMo+H,EAAY,EAAKnB,uBAAuB19H,IAAI8iG,GAC9C+7B,IACAA,EAAU52H,OAAOozF,GACM,IAAnBwjC,EAAUt/F,MACV,EAAKm+F,uBAAuBz1H,OAAO66F,QAM7C,YAAAg8B,sBAAN,SAA4BpgC,EAAmBvxE,EAAe4xG,G,gFACpDC,EAAU59H,KAAKq8H,SAASz9H,IAAI0+F,KAE9Bt9F,KAAK88H,sCAAsClvG,KAAK,CAAE7B,MAAK,EAAE4xG,KAAI,EAAEC,QAAO,I,WAIxE,YAAAC,kBAAN,SAAwBvgC,G,gFACdsgC,EAAU59H,KAAKq8H,SAASz9H,IAAI0+F,KAE9Bt9F,KAAK68H,8BAA8BjvG,KAAKgwG,G,WAI1C,YAAAE,mBAAN,SAAyBxgC,G,gFACfsgC,EAAU59H,KAAKq8H,SAASz9H,IAAI0+F,KAE9Bt9F,KAAK48H,kCAAkChvG,KAAKgwG,G,WAI9C,YAAAG,kBAAN,SAAwBzgC,G,0EACpBt9F,KAAKihG,mBAAqB3D,EAAYt9F,KAAKq8H,SAASz9H,IAAI0+F,QAAah9F,EACrEN,KAAK28H,qCAAqC/uG,KAAK5tB,KAAKihG,oB,WAGlD,YAAA+8B,sBAAN,SAA4BvvG,EAAmBwvG,EAAqBC,EAAuB94B,G,0EACvFplG,KAAKmhG,YAAc1yE,EACnBzuB,KAAK08H,8BAA8B9uG,KAAK,CAAEqwG,MAAK,EAAEC,QAAO,EAAE94B,QAAO,I,WAG/D,YAAA+4B,oBAAN,SAA0BC,G,iHAWN,OAVV9gC,EAAYxjD,EAAKD,KAEjBwkF,EAAmC,CACrCp5H,GAAIq4F,EACJlrF,KAAMgsH,EAAmBhsH,KACzB9T,KAAM8/H,EAAmB9/H,KACzBwgG,cAAes/B,EACfE,cAAe,SAAC/0H,EAAiBgI,GAAe,SAAK+7C,MAAMixE,eAAejhC,EAAW/zF,EAASgI,KAGlF,GAAMvR,KAAKw+H,0BAA0BH,I,OACvB,OADxBI,EAAU,SACc,GAAMz+H,KAAK0+H,4BAA4BL,EAAcD,I,OAKhE,OALbO,EAAwB,SAExBC,EAAsB,IAAI,EAAAC,0BAA0BF,EAAuBF,EAASJ,GAC1Fr+H,KAAKq8H,SAAS9wH,IAAI+xF,EAAWshC,GAEV,GAAM5+H,KAAK+0F,cAAew6B,iBAAiBjyB,I,OAG9D,OAHM17D,EAAa,SACnBg9F,EAAoB97H,MAAM,IAAI,EAAA8qE,uBAAuBhsC,IAE9C,CAAP,EAAO07D,WAGL,YAAAwhC,uBAAN,SAA6BxhC,G,uGACnBshC,EAAsB5+H,KAAKq8H,SAASz9H,IAAI0+F,IAE1C,GAAMshC,EAAoBxgC,QAD1B,M,OACA,SACAp+F,KAAKq8H,SAASx1H,OAAOy2F,G,mCAIvB,YAAAyhC,4BAAN,SAAkCr9B,G,mEAC9B,MAAO,CAAP,EAAO1hG,KAAKg/H,6BAA6Bt9B,WAGvC,YAAAs9B,6BAAN,SAAmCt9B,G,mEAC/B,MAAO,CAAP,OAAOphG,UAGL,YAAA2+H,4BAAN,SAAkCv9B,EAAmBw9B,G,qHAC7C78H,EAAqC,KAEnCo7H,EAAYz9H,KAAKs8H,uBAAuB19H,IAAI8iG,IAC9C,Y,wCACuB,IAAA+7B,GAAS,W,sCAArBxjC,EAAQ,SACFklC,4BACA,KAAA98H,GAAOkmB,OAAO,GAAM0xE,EAASklC,2BAA2Bn/H,KAAKo/H,kBAAkBF,MADxF,M,OACA78H,EAAS,WAAc,UAAyF,K,kMAK5H,MAAO,CAAP,EAAOA,WAGL,YAAAg9H,4BAAN,SAAkCjB,EAA8Cc,G,4HACxE5rF,EAAU8qF,E,2CAEU,KAACp+H,KAAKs8H,uBAAuB19H,IAAIw/H,EAAmBhsH,MAAOpS,KAAKs8H,uBAAuB19H,IAAI,OAAK,W,6CAA7G6+H,EAAS,SACZ,a,2CACuB,aAAAA,GAAS,W,4CAArBxjC,EAAQ,SACFqlC,0BAAT,Y,iBAEiB,O,sBAAA,GAAMrlC,EAASqlC,0BAA0Bt/H,KAAKo/H,kBAAkBF,GAAqB5rF,I,OAClG,OADMiT,EAAO,WAETjT,EAAUiT,E,OAEH,CAAP,EAAOjT,G,yBAGXvmB,QAAQC,MAAM,G,0XAOlC,MAAO,CAAP,EAAOsmB,WAGK,YAAAkrF,0BAAhB,SAA0CZ,G,mEACtC,MAAO,CAAP,EAAO,EAAA2B,0BAA0BlgI,OAAOu+H,EAAS59H,KAAKw8H,0BAG1C,YAAAkC,4BAAhB,SAA4Cd,EAA6BQ,G,oGAClD,SAAMp+H,KAAKw/H,8BAA8BpB,I,cAAtD9hH,EAAa,UACbmjH,EAAoBz/H,KAAKu8H,oBAAoB39H,IAAIg/H,EAAQxrH,OAgBxC,GAAMqtH,EAAkBC,6BAA6B9B,EAASthH,IAfjF,M,OAgBA,GADMqa,EAAa,SAEf,MAAI,SAAUA,EACH,CAAP,EAAO,EAAAgpG,oBAAoBhpG,IAEpB,CAAP,EAAO,EAAAipG,kBAAkBjpG,I,iBAKrC,GAAI,gBAAiBynG,EACjB,MAAO,CAAP,EAAO,EAAAuB,oBAAoB,CAAEntH,KAAM4rH,EAAmByB,eAEtD,IAAKvjH,EACD,MAAM,IAAIrb,MAAM,2DAEpB,MAAO,CAAP,EAAO,EAAA2+H,kBAAkBtjH,YAIjB,YAAAkjH,8BAAhB,SAA8CpB,G,6GAClChsH,EAASgsH,EAAkB,MAC7BjB,EAAen9H,KAAK4gG,uBAAuBhiG,IAAIwT,IAE7C+qH,EAAa2C,yBACM,GAAM9/H,KAAKi9H,mBAAmBtnC,eAA6CwnC,EAAa2C,2BAD3G,MADJ,M,OAGI,OADMxjH,EAAa,UAER,CAAP,EAAOA,G,aAIX,GADMyjH,EAAmB//H,KAAKy8H,kBAAkB79H,IAAIwT,GAEhD,MAAO,CAAP,EAAO,EAAAotH,8BAA8BO,EAAkB5C,I,iBAKnE,MAAM,IAAIl8H,MAAM,+DAA+Dm9H,EAAmBhsH,KAAI,cAGlG,YAAAgtH,kBAAR,SAA0Bx8G,GACtB,GAAKA,EAAL,CAIA,IAAM/c,EAAM,UAAIqd,MAAMN,GAEtB,MAAO,CACH/c,IAAKA,EACLvH,KAHS,IAAI,EAAA07C,KAAKn0C,EAAIuhB,MAGX1hB,KACXod,MAAO,KAGnB,EA7TA,GAAa,EAAAs5G,gB,01DCzBb,WAGA,QAKA,yCACIrnH,EAAoBirH,G,qFAGpB,OAFM7+G,EAoBV,SAAwB7E,GACpB,GAAI,EAAAsW,YAAc1jB,EAAQmN,IAAIzc,eAAe,0BACzC,OAAO0c,EAAW2jH,QAAU3jH,EAAW4lC,KAAO5lC,EAAW2G,QAE7D,GAAI,EAAA2P,UACA,OAAOtW,EAAW4lC,KAAO5lC,EAAW2G,QAExC,GAAI,EAAAqwC,MACA,OAAOh3C,EAAW4jH,IAEtB,OAAO5jH,EAAW6jH,MA9BLC,CAAeJ,IACxBK,EAAWl/G,GAAQA,EAAKk/G,SAAWL,EAAqBK,UAI5DA,EAAUj5G,EAAKI,KAAKzS,EAAYsrH,GAC1BC,EAAcn/G,GAAQA,EAAK5P,MAAQyuH,EAAqBzuH,MAAQ,IAClEgvH,EAAUp/G,GAAQA,EAAKo/G,SAAWP,EAAqBO,UAClB,IAA1BA,EAAQltG,QAAQ,QAC3BktG,EAAUn5G,EAAKI,KAAKzS,EAAYwrH,IAE9BC,EAAcr/G,GAAQA,EAAKq/G,aAAeR,EAAqBQ,aAAe,GAC9Ej3H,EAAUg3H,GAAoBF,EAC9B9uH,EAAOgvH,EAAU,EAAIC,EAAa,CAAAH,GAAYC,GAAeA,EAC5D,CAAP,EAAO,CACH/2H,QAAO,EACPgI,KAAI,KAbG,CAAP,OAAOjR,Y,6wDCZf,IASA,cAKI,WACuBq+H,EACAF,EACAJ,GAHvB,MAKI,YAAMA,EAAap5H,GAAI05H,IAAsB,K,OAJ1B,EAAAA,wBACA,EAAAF,UACA,EAAAJ,eAInB,EAAKjsH,KAAOisH,EAAajsH,KACzB,EAAK9T,KAAO+/H,EAAa//H,KACzB,EAAKwgG,cAAgBu/B,EAAav/B,c,EAmD1C,OAjE+C,OAiBrC,YAAAh8F,MAAN,SAAYm1E,G,0FAIR,OAHIj4E,KAAKy+H,QAAQgC,oBACbzgI,KAAKy+H,QAAQgC,qBAEjB,GAAM,YAAM39H,MAAK,UAACm1E,I,cAAlB,S,YAGE,YAAAmmB,KAAN,W,0FAII,OAHIp+F,KAAKy+H,QAAQiC,mBACb1gI,KAAKy+H,QAAQiC,oBAEjB,GAAM,YAAMtiC,KAAI,Y,cAAhB,S,YAGE,YAAAkgC,cAAN,SAAoB/0H,EAAiBgI,G,mEACjC,MAAO,CAAP,EAAOvR,KAAKq+H,aAAaC,cAAc/0H,EAASgI,WAG1C,YAAAovH,oBAAV,SAA8B3zG,GACtBhtB,KAAKy+H,QAAQ19F,SACb/gC,KAAKy+H,QAAQ19F,QAAQ/T,GAEzB,YAAM2zG,oBAAmB,UAAC3zG,IAGpB,YAAAooB,KAAV,SAAextC,GACX,IACI,YAAMwtC,KAAI,UAACxtC,G,QAEP5H,KAAKy+H,QAAQmC,kBACb5gI,KAAKy+H,QAAQmC,iBAAiBh5H,KAKhC,YAAAi3B,MAAV,SAAgBj3B,GACR5H,KAAKy+H,QAAQoC,sBACb7gI,KAAKy+H,QAAQoC,qBAAqBj5H,GAEtC,YAAMi3B,MAAK,UAACj3B,IAGN,YAAAk5H,mBAAV,SAA6BlP,EAAkBmP,GACvC/gI,KAAKy+H,QAAQuC,QACbhhI,KAAKy+H,QAAQuC,OAAOpP,EAAUmP,GAElC,YAAMD,mBAAkB,UAAClP,EAAUmP,IAE3C,EAjEA,CATA,OAS+CE,yBAAlC,EAAApC,6B,67CCGb,YAKA,aAUI,WACa55H,EACU05H,GAFvB,WACa,KAAA15H,KACU,KAAA05H,wBAPN,KAAAzvF,UAAY,IAAI,EAAAM,qBAS7BxvC,KAAKs0C,eAAiB,EACtBt0C,KAAKqlC,OAASnB,EAAO2E,MAAM,GAC3B7oC,KAAKkvC,UAAUK,QAAQ,CACnBvvC,KAAK2+H,sBACL,EAAAx+H,WAAWd,QAAO,WAAM,SAAKw/B,MAAMvD,KAAK0D,UAAU,CAAEkiG,KAAM,EAAG9uH,KAAM,UAAW7I,QAAS,mBACvF,EAAApJ,WAAWd,QAAO,WAAM,SAAKw/B,MAAMvD,KAAK0D,UAAU,CAAEkiG,KAAM,EAAG9uH,KAAM,UAAW7I,QAAS,oBAgGnG,OA5FU,YAAAzG,MAAN,SAAYm1E,G,8EACR,GAAIj4E,KAAKi4E,QACL,MAAM,IAAIh3E,MAAM,6CAA+CjB,KAAKiF,I,OAExEjF,KAAKi4E,QAAUA,EACfj4E,KAAKi4E,QAAQ3oB,WAAU,SAAC1nD,GAAoB,SAAKi3B,MAAMj3B,MACvD5H,KAAKi4E,QAAQn3C,SAAQ,WAAM,SAAKm3C,aAAU33E,KAE1CN,KAAK2+H,sBAAsBn7F,OAAOzY,GAAG,QAAQ,SAAC+F,GAAiB,SAAKqwG,WAAWrwG,MAC/E9wB,KAAK2+H,sBAAsBn7F,OAAOzY,GAAG,SAAS,WAAM,SAAK+1G,mBAAmB,OAAGxgI,MAC/EN,KAAK2+H,sBAAsBn7F,OAAOzY,GAAG,SAAS,SAAAiC,GAAS,SAAK2zG,oBAAoB3zG,MAChFhtB,KAAK2+H,sBAAsBp7F,MAAMxY,GAAG,SAAS,SAAAiC,GAAS,SAAK2zG,oBAAoB3zG,M,WAGzE,YAAA8zG,mBAAV,SAA6BlP,EAAkBmP,GAC3C,IAAMh1G,EAAmC,CACrC3Z,KAAM,QACN2Z,MAAO,SACPm1G,KAAM,EACNvD,KAAM,CACF/L,SAAQ,IAGhB5xH,KAAKo1C,KAAK9Z,KAAK0D,UAAUjT,KAGnB,YAAA40G,oBAAV,SAA8B3zG,GAC1B,IAAMjB,EAA6B,CAC/B3Z,KAAM,QACN2Z,MAAO,QACPm1G,KAAM,EACNvD,KAAM3wG,GAEVhtB,KAAKo1C,KAAK9Z,KAAK0D,UAAUjT,KAGnB,YAAAo1G,WAAV,SAAqBrwG,GAGjB,IAFA9wB,KAAKqlC,OAASnB,EAAO3b,OAAO,CAACvoB,KAAKqlC,OAAQvU,MAE7B,CACT,GAAI9wB,KAAKs0C,eAAiB,GACtB,GAAIt0C,KAAKqlC,OAAO55B,QAAUzL,KAAKs0C,cAAe,CAC1C,IAAM1sC,EAAU5H,KAAKqlC,OAAO/5B,SAAS,OAAQ,EAAGtL,KAAKs0C,eACrDt0C,KAAKqlC,OAASrlC,KAAKqlC,OAAOvd,MAAM9nB,KAAKs0C,eACrCt0C,KAAKs0C,eAAiB,EAElB1sC,EAAQ6D,OAAS,GACjBzL,KAAKo1C,KAAKxtC,GAEd,cAED,CACH,IAAIktB,EAAM90B,KAAKqlC,OAAOhS,QAAQ4tG,EAAwBG,gBACtD,GAAItsG,EAAM,EAAG,CAET,IAAM0O,EAASxjC,KAAKqlC,OAAOvd,MAAM,EAAGgN,GACpC/H,QAAQkO,IAAIuI,EAAOl4B,SAAS,UAE5BtL,KAAKqlC,OAASrlC,KAAKqlC,OAAOvd,MAAMgN,GAIpC,IAAa,KADbA,EAAM90B,KAAKqlC,OAAOhS,QAAQ4tG,EAAwBI,WAClC,CAGZ,IAFA,IACMh5D,EADSroE,KAAKqlC,OAAO/5B,SAAS,OAAQ,EAAGwpB,GAC1BvN,MAAM,QAClBxpB,EAAI,EAAGA,EAAIsqE,EAAM58D,OAAQ1N,IAAK,CACnC,IAAM8wE,EAAOxG,EAAMtqE,GAAGwpB,MAAM,OACxBsnD,EAAK,KAAOoyD,EAAwBG,iBACpCphI,KAAKs0C,eAAiBu6B,EAAK,IAGnC7uE,KAAKqlC,OAASrlC,KAAKqlC,OAAOvd,MAAMgN,EAAMmsG,EAAwBI,SAAS51H,QACvE,UAGR,QAIE,YAAA2pC,KAAV,SAAextC,GACP5H,KAAKi4E,SACLj4E,KAAKi4E,QAAQ7iC,KAAKxtC,IAIhB,YAAAi3B,MAAV,SAAgBj3B,GACZ5H,KAAK2+H,sBAAsBp7F,MAAM1E,MAAM,mBAAmBqF,EAAOS,WAAW/8B,EAAS,QAAO,WAAWA,EAAW,SAGhH,YAAAw2F,KAAN,W,0EACIp+F,KAAKkvC,UAAU7uC,U,WA/GJ,EAAAghI,SAAW,WACX,EAAAD,eAAiB,iBAgHpC,EAnHA,GAAa,EAAAH,4B,oHClBb,YAGA,QAKA,6BAAkC3kH,GAE9B,IAYImzG,EAZE3kH,EAAe,CAAEw2H,MAAO,CAAC,OAAQ,OAAQ,IAa/C,GAXIhlH,EAAWxR,UACXA,EAAQ2R,IAAMH,EAAWxR,QAAQ2R,IAKjC3R,EAAQuR,IAAM5d,OAAO0T,OAAO,GAAIjD,EAAQmN,KACxC5d,OAAO0T,OAAOrH,EAAQuR,IAAKC,EAAWxR,QAAQuR,MAI9C,YAAaC,EAAY,CACjB,IAAA/S,EAAA,EAAAA,QAASgI,EAAA,EAAAA,KACjBk+G,EAAe,EAAAG,MAAMrmH,EAASgI,EAAMzG,OACjC,MAAI,eAAgBwR,GAMvB,MAAM,IAAIrb,MAAM,gEAAgEq6B,KAAK0D,UAAU1iB,IAL/F,IAAMilH,EAA6CjlH,EAC3CklH,EAAA,EAAAA,WAAYjwH,EAAA,EAAAA,KACpBzG,EAAQw2H,MAAMv2H,KAAK,OACnB0kH,EAAe,EAAAgS,KAAKD,EAAYjwH,EAAMzG,GAK1C,MAAO,CACHy4B,MAAOksF,EAAaI,MACpBrsF,OAAQisF,EAAa52D,OACrBx4D,QAAS,WAAM,OAAAovH,EAAaK,UAOpC,+BAAoChzC,GAChC,IAAM/nC,EAAS2sF,EAAIzkD,iBAAiBH,EAAOtqE,KAAMsqE,EAAOrqE,MACxD,MAAO,CACH8wB,MAAOwR,EACPvR,OAAQuR,EACR10C,QAAS,WAAM,OAAA00C,EAAOhyC,W,+nDC9C9B,iBACI,WAA+B4+H,GAAA,KAAAA,WA+DnC,OA7DiB,EAAAtiI,OAAb,SAAoBu+H,EAA6BpB,G,8GACvCmF,EAAwC,GAExCC,EAAYpF,EAAiB7wH,QAAO,SAAA6xH,GAAS,MAAa,MAAbA,EAAM,IAAcA,EAAM,KAAOI,EAAQxrH,QAAM6H,KAAI,SAAAujH,GAAS,OAAAA,EAAM,M,wCAC/F,IAAAoE,GAAS,W,qCACX,GADF,QACgBpD,0BAA0BZ,I,QAAlDa,EAAU,WAEZkD,EAAS52H,KAAK0zH,G,kMAItB,MAAO,CAAP,EAAO,IAAIc,EAA0BoC,YAGzC,YAAAlB,mBAAA,WACIzgI,KAAK2hI,SAASx1H,SAAQ,SAAAsyH,GACdA,EAAQgC,oBACRhC,EAAQgC,yBAKpB,YAAAI,qBAAA,SAAqBj5H,GACjB5H,KAAK2hI,SAASx1H,SAAQ,SAAAsyH,GACdA,EAAQoC,sBACRpC,EAAQoC,qBAAqBj5H,OAKzC,YAAAg5H,iBAAA,SAAiBh5H,GACb5H,KAAK2hI,SAASx1H,SAAQ,SAAAsyH,GACdA,EAAQmC,kBACRnC,EAAQmC,iBAAiBh5H,OAKrC,YAAA84H,kBAAA,WACI1gI,KAAK2hI,SAASx1H,SAAQ,SAAAsyH,GACdA,EAAQiC,mBACRjC,EAAQiC,wBAKpB,YAAA3/F,QAAA,SAAQ/T,GACJhtB,KAAK2hI,SAASx1H,SAAQ,SAAAsyH,GACdA,EAAQ19F,SACR09F,EAAQ19F,QAAQ/T,OAK5B,YAAAg0G,OAAA,SAAOhzH,EAA0B+yH,GAC7B/gI,KAAK2hI,SAASx1H,SAAQ,SAAAsyH,GACdA,EAAQuC,QACRvC,EAAQuC,OAAOhzH,EAAM+yH,OAIrC,EAhEA,GAAa,EAAAxB,6B,gRCJb,WACA,SAEA,OACA,QACA,QACA,OACA,QACA,OAEA,aAgBI,WAA6B55G,GAAA,KAAAA,MAbZ,KAAAk8G,mBAAqB,IAAI,EAAAt0G,QACzB,KAAAu0G,sBAAwB,IAAI,EAAAv0G,QAC5B,KAAAsgF,+BAAiC,IAAI,EAAAtgF,QACrC,KAAAw0G,8BAAgC,IAAI,EAAAx0G,QAE5C,KAAAoiF,kBAA8C3vG,KAAK6hI,mBAAmB91G,MACtE,KAAA6jF,qBAAiD5vG,KAAK8hI,sBAAsB/1G,MAC5E,KAAA6qE,8BAAwD52F,KAAK6tG,+BAA+B9hF,MAC5F,KAAA4qE,4BAAgE32F,KAAK+hI,8BAA8Bh2G,MAE3F,KAAAxK,UAAY,IAAItV,IAChB,KAAA+nF,QAAU,IAAI/nF,IAmInC,OA9HI,YAAA+1H,gCAAA,SAAgCzd,G,oBACtB0d,EAAmB,IAAIn5H,MACvBo5H,EAAiB,IAAIp5H,MACrBq5H,EAAiB,IAAIr5H,MAE3B,GAAIy7G,EAAM0d,iB,IACN,IAA2B,QAAA1d,EAAM0d,kBAAgB,8BAAE,CAA9C,IAAMnsG,EAAY,QAEb7wB,EADM,UAAI4d,OAAOiT,GACRxqB,WACTwlB,EAAO9wB,KAAKuhB,UAAU3iB,IAAIqG,GAChCjF,KAAKuhB,UAAU1a,OAAO5B,GAClB6rB,GACAmxG,EAAiBl3H,KAAK+lB,I,iGAKlC,GAAIyzF,EAAM2d,e,IACN,IAAmB,QAAA3d,EAAM2d,gBAAc,8BAAE,CAA9BpxG,EAAI,QAAV,IACK1lB,EAAW,UAAIyX,OAAOiO,EAAKjrB,KACjC,EAAAq7D,IAAIlhE,KAAKuhB,UAAUlW,IAAID,EAASE,YAAa,aAAaF,EAAQ,qBAClE,IAAMulG,EAAe,IAAI,EAAA3kC,gBACrBhsE,KAAK2lB,IAAIynC,SAAS,EAAAx3C,mBAAmBQ,gBACrChL,EACA0lB,EAAKu3C,MACLv3C,EAAK0mB,IACL1mB,EAAKq3C,OACLr3C,EAAKw3C,UACLx3C,EAAKy3C,SAETvoE,KAAKuhB,UAAUhW,IAAIH,EAASE,WAAYqlG,GACxCuxB,EAAen3H,KAAK4lG,I,iGAI5B,GAAI4T,EAAM4d,e,IACN,IAAiB,QAAA5d,EAAM4d,gBAAc,8BAAE,CAA5Bl9H,EAAE,QAAR,IACKyyF,EAAS13F,KAAKg0F,QAAQp1F,IAAIqG,GAChCjF,KAAKg0F,QAAQntF,OAAO5B,GAChByyF,GACAyqC,EAAep3H,KAAK2sF,I,iGAKhC,GAAI6sB,EAAM6d,a,IACN,IAAmB,QAAA7d,EAAM6d,cAAY,8BAAE,CAA5BtxG,EAAI,QACL1lB,EAAW,UAAIyX,OAAOiO,EAAKuxG,aACjC,EAAAnhE,GAAGlhE,KAAKuhB,UAAUlW,IAAID,EAASE,YAAa,aAAaF,EAAQ,mBACjE,EAAA81D,IAAIlhE,KAAKg0F,QAAQ3oF,IAAIylB,EAAK7rB,IAAK,WAAW6rB,EAAK7rB,GAAE,qBAE3C0rG,EAAe3wG,KAAKuhB,UAAU3iB,IAAIwM,EAASE,YAC3CosF,EAAS,IAAI,EAAA4qC,cACftiI,KAAK2lB,IAAIynC,SAAS,EAAAx3C,mBAAmBO,mBACrC2a,EAAK7rB,GACL0rG,EACA7/E,EAAKu6E,WAAWpxF,IAAI+2F,EAAU9C,aAC9Bp9E,EAAKhmB,QACLgmB,EAAKs9E,cAAcn0F,IAAI+2F,EAAUz3F,SACjCy3F,EAAUzC,aAAaz9E,EAAKyxG,iBAEhCviI,KAAKg0F,QAAQzoF,IAAIulB,EAAK7rB,GAAIyyF,I,iGAI9B13F,KAAKwiI,gBAAkBje,EAAM4d,iBAAyE,IAAvD5d,EAAM4d,eAAe9uG,QAAQrzB,KAAKwiI,iBAAgD,IAAtBxiI,KAAKg0F,QAAQ71D,MAGxHn+B,KAAK+hI,8BAA8Bn0G,UAAKttB,GAGxCikH,EAAM0d,kBACNjiI,KAAK8hI,sBAAsBl0G,KAAKq0G,GAGpC,EAAA5hI,QAAQ4hI,GACR,EAAA5hI,QAAQ8hI,GAEJ5d,EAAM2d,gBACNliI,KAAK6hI,mBAAmBj0G,KAAKs0G,IAG5B3d,EAAM4d,gBAAkB5d,EAAM4d,eAAe12H,OAAS,GAAO84G,EAAM6d,cAAgB7d,EAAM6d,aAAa32H,OAAS,IAChHzL,KAAK6tG,+BAA+BjgF,KAAK5tB,KAAK0uG,mBAGpBpuG,IAA1BikH,EAAMke,iBACN,EAAAvhE,GAA6B,OAA1BqjD,EAAMke,iBAA4BziI,KAAKg0F,QAAQ3oF,IAAIk5G,EAAMke,iBAAkB,kBAAkBle,EAAMke,gBAAe,mBAEjHle,EAAMke,kBAAoBziI,KAAKwiI,iBAC/BxiI,KAAKwiI,eAAiBje,EAAMke,gBAC5BziI,KAAK+hI,8BAA8Bn0G,KAAK5tB,KAAKyuG,kBAEpB,IAAtBzuG,KAAKg0F,QAAQ71D,MAAcomF,EAAM4d,iBACxCniI,KAAKwiI,oBAAiBliI,EACtBN,KAAK+hI,8BAA8Bn0G,UAAKttB,KAIhD,YAAAouG,WAAA,WACI,IAAMrsG,EAAS,IAAIyG,MAEnB,OADA9I,KAAKg0F,QAAQ7nF,SAAQ,SAAAurF,GAAU,OAAAr1F,EAAO0I,KAAK2sF,MACpCr1F,GAGX,YAAAosG,aAAA,WACI,OAAKzuG,KAAKwiI,eAGCxiI,KAAKg0F,QAAQp1F,IAAIoB,KAAKwiI,qBAF7B,GAMR,YAAAnxB,aAAA,WACI,IAAMhvG,EAAS,IAAIyG,MAEnB,OADA9I,KAAKuhB,UAAUpV,SAAQ,SAAA2kB,GAAQ,OAAAzuB,EAAO0I,KAAK+lB,MACpCzuB,GAGX,YAAAsf,YAAA,SAAY9b,GACR,OAAO7F,KAAKuhB,UAAU3iB,IAAIiH,IAG9B,YAAAkoG,UAAA,SAAU9oG,GACN,OAAOjF,KAAKg0F,QAAQp1F,IAAIqG,IAEhC,EAjJA,GAAa,EAAAywE,8B,gRCTb,WAGA,QAEA,QACA,OAEA,aAKI,WACqBpoB,EACAroD,EACjB46C,EACQ6iF,EACR53H,EACQ63H,EACRtkH,GANiB,KAAAivC,QACA,KAAAroD,KAET,KAAAy9H,cAEA,KAAAC,iBAPJ,KAAAvzF,UAAW,EASfpvC,KAAKitB,SAAW,IAAI21G,EAAqBt1E,EAAOroD,EAAI6F,GACpD9K,KAAK6iI,YAAcxkH,EACnBre,KAAKipE,UAAYppB,EAiOzB,OA9NI,sBAAI,uBAAQ,C,IAAZ,WACI,OAAO7/C,KAAKipE,UAAUppB,U,IAG1B,SAAan+B,GACT,MAAM,EAAAohH,SAAS,a,gCAGnB,YAAAt0B,iBAAA,SAAiBv8E,GACbjyB,KAAK6iI,YAAc5wG,GAGvB,YAAA5xB,QAAA,WACIL,KAAKovC,UAAW,GAGpB,sBAAI,sBAAO,C,IAAX,WACI,OAAOpvC,KAAKitB,U,IAGhB,SAAYgF,GACHjyB,KAAKovC,UACNpvC,KAAKitB,SAAS9a,OAAO8f,I,gCAI7B,YAAA+7E,cAAA,SAAcljG,GACV,EAAAo2D,IAAIlhE,KAAKovC,UACTpvC,KAAKitB,SAAS4jF,OAAO/lG,IAGzB,sBAAI,wBAAS,C,IAAb,WACI,OAAO9K,KAAK0iI,aAAe1iI,KAAK0iI,YAAY,I,IAGhD,SAAczwG,GACV,KAAMA,aAAe,EAAA/tB,WACjB,MAAM,EAAApC,gBAAgB,aAE1B9B,KAAK0iI,YAAc,CAACzwG,GACpBjyB,KAAK+iI,mB,gCAGD,YAAAA,gBAAR,sBACUxkH,EAAYve,KAAK0iI,YAAYzoH,IAAI+2F,EAAUgyB,eACjD,OAAOhjI,KAAKijI,YAAW,WAAM,SAAK31E,MAAM41E,kBAAkB,EAAKj+H,GAAIsZ,OAGvE,sBAAI,yBAAU,C,IAAd,WACI,OAAOve,KAAK0iI,a,IAGhB,SAAezwG,GACX,IAAKnpB,MAAMC,QAAQkpB,IAAQA,EAAIs/B,MAAK,SAAAzxD,GAAK,QAAEA,aAAa,EAAAoE,cACpD,MAAM,EAAApC,gBAAgB,cAG1B9B,KAAK0iI,YAAczwG,EACnBjyB,KAAK+iI,mB,gCAGT,YAAA50B,iBAAA,SAAiB9C,GACb,EAAAnqC,IAAIlhE,KAAKovC,UACTpvC,KAAK0iI,YAAcr3B,GAGvB,sBAAI,4BAAa,C,IAAjB,WACI,OAAOrrG,KAAK2iI,gB,IAGhB,SAAkB1wG,GACd,MAAM,EAAA6wG,SAAS,kB,gCAGnB,YAAAz0B,oBAAA,SAAoBjoG,GAChB,EAAA86D,IAAIlhE,KAAKovC,UACTpvC,KAAK2iI,eAAiBv8H,GAG1B,sBAAI,yBAAU,C,IAAd,WACI,OAAOpG,KAAK6iI,a,IAGhB,SAAe7jI,GACX,MAAM,EAAA8jI,SAAS,e,gCAGnB,YAAAK,kBAAA,SAAkBnkI,GACd,EAAAkiE,IAAIlhE,KAAKovC,UACTpvC,KAAK6iI,YAAc7jI,GAIvB,YAAAmM,KAAA,SAAKkhB,EAAuDvhB,GACxD,QADwD,IAAAA,MAAA,CAAkEs4H,gBAAgB,EAAMC,eAAe,IAC3JrjI,KAAKovC,SACL,OAAO7gB,QAAQ4I,OAAO,IAAIl2B,MAAM,kDAGpC,IAAMkK,EAAO,IAAIm4H,EAAetjI,KAAKipE,UAAUppB,SAAU/0C,GAEzD,OADAuhB,EAASlhB,GACFnL,KAAKm8F,UAAUhxF,IAG1B,YAAAo4H,cAAA,SAAcC,EAAwB77H,EAAoDmD,G,QAIlF+T,EAHJ,QADsF,IAAA/T,MAAA,CAAkEs4H,gBAAgB,EAAMC,eAAe,IACzLrjI,KAAKovC,SACL,OAAO7gB,QAAQ4I,OAAO,IAAIl2B,MAAM,4DAIpC,IAAK0G,GAAamB,MAAMC,QAAQpB,IAAiC,IAApBA,EAAS8D,OAClDoT,EAAS7e,KAAK0iI,YAAYzoH,KAAI,SAAAna,GAAK,OAAAkxG,EAAUr3F,UAAU7Z,WAEpD,GAAI6H,aAAoB,EAAA3F,SAAU,CAC/B,wBACN6c,EAAS,CAAC,CAAErF,gBADJoF,EAAA,EAAAA,WACiCnF,YADrBN,EAAA,EAAAA,OAC0CO,cAAekF,EAAY/b,UAAWsW,SAEjG,GAAIxR,aAAoB,EAAAvE,MAC3Byb,EAAS,CAACmyF,EAAUr3F,UAAUhS,QAC3B,CACHkX,EAAS,G,IACT,IAAyB,QAAAlX,GAAQ,8BAAE,CAA9B,IAAM87H,EAAU,QACjB,GAAIA,aAAsB,EAAArgI,MACtByb,EAAO9T,KAAKimG,EAAUr3F,UAAU8pH,QAC7B,CACG,wBAAE7kH,EAAA,EAAAA,WAAYzF,EAAA,EAAAA,OACpB0F,EAAO9T,KAAK,CAAEyO,gBAAiBoF,EAAYnF,YAAaN,EAAQO,cAAekF,EAAY/b,UAAWsW,M,kGAKlH,OAAOnZ,KAAKstD,MAAMo2E,kBAAkB1jI,KAAKiF,GAAIu+H,EAAQxkI,MAAO6f,EAAQ/T,IAExE,YAAA64H,eAAA,SAAeC,EAAgDC,GAA/D,WACI7jI,KAAKijI,YAAW,WACZ,GAAIjyB,EAAUp3F,uBAAuBiqH,GACjC,OAAO,EAAKv2E,MAAMw2E,mBACd,EAAK7+H,GACL2+H,EAAetkI,IACf0xG,EAAU+yB,4BAA4BF,IAK1C,IAFA,IAAMhlH,EAAmB,IAAI/V,MAAc,EAAI+6H,EAAgBp4H,QACzD2d,EAAMy6G,EAAgBp4H,OACnB1N,EAAI,EAAGA,EAAIqrB,EAAKrrB,IAAK,CAC1B,IAAMqI,EAAQy9H,EAAgB9lI,GAC9B8gB,EAAO,EAAI9gB,GAAKqI,EAAMtD,MAAM/B,KAAO,EACnC8d,EAAO,EAAI9gB,EAAI,GAAKqI,EAAMtD,MAAMb,UAAY,EAC5C4c,EAAO,EAAI9gB,EAAI,GAAKqI,EAAMrD,IAAIhC,KAAO,EACrC8d,EAAO,EAAI9gB,EAAI,GAAKqI,EAAMrD,IAAId,UAAY,EAE9C,OAAO,EAAKqrD,MAAM02E,uBACd,EAAK/+H,GACL2+H,EAAetkI,IACfuf,OAMhB,YAAAolH,YAAA,SAAY79H,EAAc89H,GAA1B,WACIlkI,KAAKijI,YAAW,WAAM,SAAK31E,MAAM62E,gBAAgB,EAAKl/H,GAAI+rG,EAAUr3F,UAAUvT,GAAU89H,GAAc,EAAA5+H,qBAAqB+0H,aAGvH,YAAAl+B,UAAR,SAAkBhxF,GACd,IAAMi5H,EAAWj5H,EAAKk5H,WAEhBC,EAAaF,EAAS54H,MAAMyO,KAAI,SAAArO,GAAK,OAAAA,EAAExF,SAE7Ck+H,EAAW/yG,MAAK,SAACkY,EAAG1W,GAChB,OAAI0W,EAAE1mC,IAAIhC,OAASgyB,EAAEhwB,IAAIhC,KACjB0oC,EAAE1mC,IAAId,YAAc8wB,EAAEhwB,IAAId,UACtBwnC,EAAE3mC,MAAM/B,OAASgyB,EAAEjwB,MAAM/B,KAClB0oC,EAAE3mC,MAAMb,UAAY8wB,EAAEjwB,MAAMb,UAEhCwnC,EAAE3mC,MAAM/B,KAAOgyB,EAAEjwB,MAAM/B,KAE3B0oC,EAAE1mC,IAAId,UAAY8wB,EAAEhwB,IAAId,UAE5BwnC,EAAE1mC,IAAIhC,KAAOgyB,EAAEhwB,IAAIhC,QAI9B,IADA,IAAM2sB,EAAQ42G,EAAW74H,OAAS,EACzB1N,EAAI,EAAGA,EAAI2vB,EAAO3vB,IAAK,CAC5B,IAAMwmI,EAAWD,EAAWvmI,GAAGgF,IAG/B,GAFuBuhI,EAAWvmI,EAAI,GAAG+E,MAEtB1B,SAASmjI,GACxB,OAAOh2G,QAAQ4I,OACX,IAAIl2B,MAAM,wCAMtB,IAAMuK,EAA+B44H,EAAS54H,MAAMyO,KAAI,SAAArO,GACpD,OACIxF,MAAO4qG,EAAUr3F,UAAU/N,EAAExF,OAC7BsU,KAAM9O,EAAE8O,KACR8pH,iBAAkB54H,EAAE44H,qBAG5B,OAAOxkI,KAAKstD,MAAMm3E,eAAezkI,KAAKiF,GAAIm/H,EAASM,kBAAmBl5H,EAAO,CACzE1E,aAAcs9H,EAASt9H,aACvBs8H,eAAgBgB,EAAShB,eACzBC,cAAee,EAASf,iBAKxB,YAAAJ,WAAR,SAAmB52G,GAAnB,WACI,OAAIrsB,KAAKovC,UACLriB,QAAQY,KAAK,2BACNY,QAAQtH,aAAQ3mB,IAGpB+rB,IAAWgL,MAAK,WAAM,YAAM,SAAAxH,GACzBA,aAAe5uB,OAAsB,aAAb4uB,EAAIvxB,MAC9ByuB,QAAQY,KAAKkC,OAK7B,EAhPA,GAAa,EAAAyyG,gBAkPb,iBAKI,WAA6Bh1E,EACRroD,EACjBmM,GAFyB,KAAAk8C,QACR,KAAAroD,KAEjBjF,KAAK6wG,OAAOz/F,GAgJpB,OA7II,YAAAy/F,OAAA,SAAOz/F,GACHpR,KAAK2kI,SAAWvzH,EAAO8tC,QACvBl/C,KAAK4kI,aAAexzH,EAAO+tC,aAC3Bn/C,KAAK6kI,aAAezzH,EAAOoiG,YAC3BxzG,KAAK8kI,aAAe1zH,EAAO2zH,aAG/B,sBAAI,sBAAO,C,IAAX,WACI,OAAO/kI,KAAK2kI,U,IAGhB,SAAY1yG,GACR,IAAMitB,EAAUl/C,KAAKglI,gBAAgB/yG,GACrC,GAAKitB,EAAL,CAIA,GAAuB,iBAAZA,EAAsB,CAC7B,GAAIl/C,KAAKk/C,UAAYA,EACjB,OAEJl/C,KAAKk/C,QAAUA,EAEnB+lF,EAAYjlI,KAAKstD,MAAM43E,eAAellI,KAAKiF,GAAI,CAC3Ci6C,QAAO,O,gCAIP,YAAA8lF,gBAAR,SAAwB/yG,GACpB,GAAY,SAARA,EACA,MAAO,OAGX,GAAmB,iBAARA,EAEP,OADMpzB,EAAIspB,KAAK0kB,MAAM5a,IACV,EAAIpzB,OAAIyB,EAEvB,GAAmB,iBAAR2xB,EAAkB,CACzB,IAAMpzB,EAAIwoC,SAASpV,OAAK3xB,GACxB,GAAI+lC,MAAMxnC,GACN,OAEJ,OAAOA,EAAI,EAAIA,OAAIyB,IAK3B,sBAAI,2BAAY,C,IAAhB,WACI,OAAON,KAAK4kI,c,IAGhB,SAAiB3yG,GACb,IAAMktB,EAAen/C,KAAKmlI,qBAAqBlzG,GAC/C,GAA4B,kBAAjBktB,EAA4B,CACnC,GAAIn/C,KAAK4kI,eAAiBzlF,EACtB,OAEJn/C,KAAK4kI,aAAezlF,EAExB8lF,EAAYjlI,KAAKstD,MAAM43E,eAAellI,KAAKiF,GAAI,CAAEk6C,aAAY,M,gCAGzD,YAAAgmF,qBAAR,SAA6BlzG,GACzB,MAAY,SAARA,EACO,OAEI,UAARA,GAA0B9P,QAAQ8P,IAG7C,sBAAI,0BAAW,C,IAAf,WACI,OAAOjyB,KAAK6kI,c,IAGhB,SAAgB5yG,GACRjyB,KAAK6kI,eAAiB5yG,IAG1BjyB,KAAK6kI,aAAe5yG,EACpBgzG,EAAYjlI,KAAKstD,MAAM43E,eAAellI,KAAKiF,GAAI,CAAEuuG,YAAavhF,O,gCAGlE,sBAAI,0BAAW,C,IAAf,WACI,OAAOjyB,KAAK8kI,c,IAEhB,SAAgB7yG,GACRjyB,KAAK8kI,eAAiB7yG,IAG1BjyB,KAAK8kI,aAAe7yG,EACpBgzG,EAAYjlI,KAAKstD,MAAM43E,eAAellI,KAAKiF,GAAI,CAAE8/H,YAAa9yG,O,gCAG3D,YAAA9f,OAAP,SAAcizH,GACV,IAAMC,EAAqD,GACvDC,GAAY,EAEhB,QAAkC,IAAvBF,EAAWlmF,QAAyB,CAC3C,IAAMA,EAAUl/C,KAAKglI,gBAAgBI,EAAWlmF,SAChC,SAAZA,GACAomF,GAAY,EACZD,EAAoBnmF,QAAUA,GACJ,iBAAZA,GAAwBl/C,KAAK2kI,WAAazlF,IACxDl/C,KAAK2kI,SAAWzlF,EAChBomF,GAAY,EACZD,EAAoBnmF,QAAUA,GAItC,QAAuC,IAA5BkmF,EAAWjmF,aAA8B,CAChD,IAAMA,EAAen/C,KAAKmlI,qBAAqBC,EAAWjmF,cACrC,SAAjBA,GACAmmF,GAAY,EACZD,EAAoBlmF,aAAeA,GAC5Bn/C,KAAKm/C,eAAiBA,IAC7Bn/C,KAAKm/C,aAAeA,EACpBmmF,GAAY,EACZD,EAAoBlmF,aAAeA,QAIL,IAA3BimF,EAAW5xB,aACdxzG,KAAK6kI,eAAiBO,EAAW5xB,cACjCxzG,KAAK6kI,aAAeO,EAAW5xB,YAC/B8xB,GAAY,EACZD,EAAoB7xB,YAAc4xB,EAAW5xB,kBAIf,IAA3B4xB,EAAWL,aACd/kI,KAAK8kI,eAAiBM,EAAWL,cACjC/kI,KAAK8kI,aAAeM,EAAWL,YAC/BO,GAAY,EACZD,EAAoBN,YAAcK,EAAWL,aAIjDO,GACAL,EAAYjlI,KAAKstD,MAAM43E,eAAellI,KAAKiF,GAAIogI,KAI3D,EAxJA,GAAa,EAAAzC,uBAwKb,iBAMI,WAAoB/iF,EAA8B/0C,GAA9B,KAAA+0C,WAChB7/C,KAAK0kI,kBAAoB7kF,EAASprC,QAClCzU,KAAKulI,eAAiB,GACtBvlI,KAAK+G,IAAM,EACX/G,KAAKojI,eAAiBt4H,EAAQs4H,eAC9BpjI,KAAKqjI,cAAgBv4H,EAAQu4H,cAyDrC,OAtDI,YAAAgB,SAAA,WACI,MAAO,CACHK,kBAAmB1kI,KAAK0kI,kBACxBl5H,MAAOxL,KAAKulI,eACZz+H,aAAc9G,KAAK+G,IACnBs8H,cAAerjI,KAAKqjI,cACpBD,eAAgBpjI,KAAKojI,iBAI7B,YAAA5+H,QAAA,SAAQmD,EAAwCsqB,GAC5C,IAAI7rB,EACJ,GAAIuB,aAAoB,EAAA3F,SACpBoE,EAAQ,IAAI,EAAAhD,MAAMuE,EAAUA,OACzB,MAAIA,aAAoB,EAAAvE,OAG3B,MAAM,IAAInC,MAAM,oBAFhBmF,EAAQuB,EAKZ3H,KAAKwlI,QAAQp/H,EAAO6rB,GAAK,IAG7B,YAAAtrB,OAAA,SAAOgB,EAAoBsqB,GACvBjyB,KAAKwlI,QAAQ,IAAI,EAAApiI,MAAMuE,EAAUA,GAAWsqB,GAAK,IAGrD,YAAAprB,OAAA,SAAOc,GACH,IAAIvB,EACJ,KAAIuB,aAAoB,EAAAvE,OAGpB,MAAM,IAAInC,MAAM,oBAFhBmF,EAAQuB,EAKZ3H,KAAKwlI,QAAQp/H,OAAO9F,GAAW,IAGnC,YAAAwG,aAAA,SAAa2+H,GACT,GAAIA,IAAc,EAAAthI,UAAUilE,MAAQq8D,IAAc,EAAAthI,UAAU4uC,GACxD,MAAM,EAAAjxC,gBAAgB,aAG1B9B,KAAK+G,IAAM0+H,GAGP,YAAAD,QAAR,SAAgBp/H,EAAcsU,EAA0BgrH,GACpD,IAAMC,EAAiB3lI,KAAK6/C,SAAS0pB,cAAcnjE,GACnDpG,KAAKulI,eAAex6H,KAAK,CACrB3E,MAAOu/H,EACPnB,iBAAkBkB,EAClBhrH,KAAMA,KAGlB,EApEA,GAuEA,SAASuqH,EAAYvlG,GACjBA,EAAQrI,UAAK/2B,GAAW,SAAAuvB,GACpB9C,QAAQY,KAAKkC,MAzER,EAAAyzG,kB,60DC9Zb,WAEA,OACA,QACA,OAOA,QAIA,SACA,OAEA,QACA,QACA,QACA,OAGA,aAWI,WAAY39G,EACA8vD,EACAmwD,GADA,KAAAnwD,sBACA,KAAAmwD,iBARJ,KAAAC,+BAAiC,IAAI,EAAAt4G,QAC7B,KAAAgtE,4BAAwEv6F,KAAK6lI,+BAA+B95G,MAGpH,KAAA+5G,yBAA2B,IAAI75H,IAqS/B,KAAA85H,+BAAiC,IAAI,EAAAx4G,QACrC,KAAAy4G,8BAAgC,IAAI,EAAAz4G,QAK5B,KAAA2vE,iBAAqDl9F,KAAK+lI,+BAA+Bh6G,MAKzF,KAAAkxE,gBAAgDj9F,KAAKgmI,8BAA8Bj6G,MA3S/F/rB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,qBAAIn3C,gBAC9BjW,KAAKimI,yBAA2B,IAAI,EAAAC,+BAA+BlmI,KAAKstD,OAwThF,OArTI,sBAAI,uBAAQ,C,IAAZ,WACI,IAAM1qC,EAAS5iB,KAAKmmI,SAAWnmI,KAAKmmI,QAAQ,GAC5C,OAAOvjH,GAAUA,EAAO/c,IAAIC,Q,gCAGhC,sBAAI,+BAAgB,C,IAApB,WACI,OAAO9F,KAAKmmI,S,gCAGhB,sBAAI,mBAAI,C,IAAR,WACI,GAAInmI,KAAKs6F,kBAAoBt6F,KAAKs6F,iBAAiB7uF,OAAS,EACxD,OAAO,IAAI,EAAAuuC,KAAKh6C,KAAKs6F,iBAAiB,GAAGz0F,IAAIuhB,MAAM1hB,M,gCAM3D,YAAA0gI,2BAAA,SAA2Br6G,GAA3B,WAEUs6G,GADWt6G,EAAMu6G,OAAS,IACJrsH,KAAI,SAACsgC,EAAMz3B,GAAU,SAAKs8G,kBAAkB7kF,EAAMz3B,MACxEyhG,EAAQvkH,KAAKumI,aAAavmI,KAAKmmI,QAASE,GAE9CrmI,KAAKmmI,QAAUE,EAEfrmI,KAAK6lI,+BAA+Bj4G,KAAK22F,IAGrC,YAAAgiB,aAAR,SAAqBC,EAA8CH,GAM/D,YANiB,IAAAG,MAAA,SAA8C,IAAAH,MAAA,IAMxD,CAAEpI,MAFKj+H,KAAKymI,YAAYJ,EAAYG,GAE3BtI,QADAl+H,KAAKymI,YAAYD,EAAgBH,KAI7C,YAAAI,YAAR,SAAoBC,EAAuCC,QAAvC,IAAAD,MAAA,SAAuC,IAAAC,MAAA,IACvD,IAAM1sH,EAAM,IAAIhO,IAIhB,OAHAy6H,EAAQv6H,SAAQ,SAAAyW,GAAU,OAAA3I,EAAI1O,IAAIqX,EAAO/c,IAAIyF,WAAYsX,MACzD+jH,EAAQx6H,SAAQ,SAAAyW,GAAU,OAAA3I,EAAIpT,OAAO+b,EAAO/c,IAAIyF,eAEzCo7H,EAAQ/6H,QAAO,SAAAiX,GAAU,OAAA3I,EAAI5O,IAAIuX,EAAO/c,IAAIyF,gBAG/C,YAAA8zH,kBAAR,SAA0B7kF,EAAgBz3B,GACtC,IAAMjd,EAAM,UAAIqd,MAAMq3B,EAAK10C,KAE3B,MAAO,CACHA,IAAKA,EACLvH,KAHS,IAAI,EAAA07C,KAAKn0C,EAAIuhB,MAGX1hB,KACXod,MAAOA,IAIf,YAAAk1E,oBAAA,SAAoBltF,GAApB,WACI,OAAO,IAAIyjB,SAAQ,SAACtH,EAASkQ,GACzB,IAAMwzF,EAA8C,CAChDvkB,YAAat7F,GAAWA,EAAQs7F,YAAct7F,EAAQs7F,iBAAc9lG,EACpEomG,eAAgB57F,GAAWA,EAAQ47F,gBAGvC,EAAKp5C,MAAMs5E,qBAAqBjc,GAAatzF,MAAK,SAAAr4B,GAC9CioB,EAAQjoB,UAKpB,YAAA68F,UAAA,SAAUC,EAA4BC,EAAoCC,EACtEp8D,GACA,IAAIinG,EACAC,EAYAC,EAaJ,YA3BA,IAAAnnG,MAA2B,EAAAtF,kBAAkB3tB,MAGzCmvF,EACuB,iBAAZA,EACP+qC,EAAiB/qC,GAEjB+qC,EAAiB/qC,EAAQn2F,QACzBmhI,EAAmB,UAAI/pH,KAAK++E,EAAQp2F,MAAM4F,YAG9Cu7H,EAAiB,GAKjBE,OADYzmI,IAAZy7F,EACoC,KAC7BA,IACgB,iBAAZA,EAC6BA,EAEAA,EAAQp2F,SAMhDi6B,GAASA,EAAMqY,wBACR1pB,QAAQtH,QAAQ,IAGpBjnB,KAAKstD,MAAM05E,iBAAiBH,EAAgBC,EAAkBC,EAAmC/qC,EAAYp8D,GAC/GvI,MAAK,SAAAvG,GAAQ,OAAAhoB,MAAMC,QAAQ+nB,GAAQA,EAAK7W,KAAI,SAAApU,GAAO,iBAAIgd,OAAOhd,MAAQ,OAG/E,YAAA21F,wBAAA,SAAwBC,EAAgCC,EAA8BC,EAA8BC,GAChH,OAAO57F,KAAKimI,yBAAyBzqC,wBAAwBC,EAAaC,EAAoBC,EAAoBC,IAGtH,YAAAqrC,aAAA,SAAal7G,GACT/rB,KAAKimI,yBAAyBiB,kBAAkBn7G,EAAMo7G,aAAc,UAAItkH,OAAOkJ,EAAMlmB,KAAMkmB,EAAM3Z,OAGrG,YAAAiqF,oCAAA,SAAoCn9E,EAAgB+6E,GAApD,IAWQmtC,EAXR,OAII,GAAIloH,IAAW,EAAAusC,QAAQC,MAAQxsC,IAAW,EAAAusC,QAAQE,UAAY3rD,KAAK8lI,yBAAyBz6H,IAAI6T,GAC5F,MAAM,IAAIje,MAAM,8CAA8Cie,EAAM,2BAGxElf,KAAK8lI,yBAAyBv6H,IAAI2T,EAAQ+6E,GAC1Cj6F,KAAKstD,MAAM+5E,qCAAqCnoH,GAGZ,mBAAzB+6E,EAAS0G,cAChBymC,EAA0BntC,EAAS0G,aAAY,SAAM96F,GAAG,qC,+DAChDA,EAAIqZ,SAAWA,GAAUlf,KAAKy1E,oBAAoB9zD,YAAY9b,EAAIyF,YAClD,GAAMtL,KAAKsnI,4BAA4BzhI,EAAIyF,aAD3D,M,QACMg0C,EAAU,WAEZt/C,KAAKstD,MAAMi6E,6BAA6B1hI,EAAIyF,WAAYg0C,G,sCAMxE,IAAM5wB,EAAW1uB,KACjB,MAAO,CACHK,QAAA,WACQquB,EAASo3G,yBAAyBj/H,OAAOqY,IACzCwP,EAAS4+B,MAAMk6E,uCAAuCtoH,GAGtDkoH,GACAA,EAAwB/mI,aAMlC,YAAAinI,4BAAN,SAAkCG,G,2EAG9B,OAFM5hI,EAAM,UAAIqd,MAAMukH,IAChBxtC,EAAWj6F,KAAK8lI,yBAAyBlnI,IAAIiH,EAAIqZ,SAE5C,CAAP,EAAO+6E,EAASytC,2BAA2B7hI,EAAK,EAAAy0B,kBAAkB3tB,OAG/D,CAAP,OAAOrM,UAGX,YAAAi8F,mBAAA,SAAmB12F,EAAgB8hI,GAC/B,GAAK3nI,KAAKmmI,SAAYnmI,KAAKmmI,QAAQ16H,OAAnC,CAIA,IAAiBL,EASbu8H,GAAiB3nI,KAAK4nI,UAAU/hI,KAChCA,EATwB,UADXuF,EAUCvF,GATDqZ,OACF,UAAInC,KAAK8K,EAAMY,QAAQrd,EAAStF,SAEpCsF,EAASlJ,KAAK,CACjBklB,KAAMS,EAAMY,QAAQrd,EAASgc,SAWrC,IAHA,IAEI0yG,EAFE+N,EAAehiI,EAAIyF,WAGhBvN,EAAI,EAAGA,EAAIiC,KAAKmmI,QAAQ16H,OAAQ1N,IAAK,CAC1C,IAAM6kB,EAAS5iB,KAAKmmI,QAAQpoI,GACtB+pI,EAAallH,EAAO/c,IAAIyF,WAE9B,GAAIu8H,IAAiBC,EACjB,OAAO,EAAA1I,kBAAkBx8G,GAGzBilH,EAAa9sF,WAAW+sF,IACe,MAApCD,EAAaC,EAAWr8H,WACtBquH,GAAmBgO,EAAWr8H,OAASquH,EAAgBj0H,IAAIyF,WAAWG,UAC3EquH,EAAkBl3G,GAG1B,OAAOk3G,IAGH,YAAA8N,UAAR,SAAkB/hI,GACd,QAAK7F,KAAKmmI,SAGHnmI,KAAKmmI,QAAQ50E,MAAK,SAAA3uC,GAAU,OAAAA,EAAO/c,IAAIyF,aAAezF,EAAIyF,eAGrE,YAAAqxF,gBAAA,SAAgBF,EAA+BC,GAC3C,IAAIt1E,EAOJ,GANyB,iBAAdq1E,EACPr1E,EAAOq1E,OACqB,IAAdA,IACdr1E,EAAOq1E,EAAU32F,SAGhBshB,EACD,OAAOA,EAGX,IAAMxE,EAAS5iB,KAAKu8F,mBACK,iBAAdE,EAAyB,UAAI1/E,KAAK0/E,GAAaA,GACtD,GAGJ,IAAK75E,EACD,OAAOwE,OAGqB,IAArBs1E,IACPA,EAAmB18F,KAAKmmI,QAAS16H,OAAS,GAG9C,IAAIpJ,EAAS,EAAA4D,SAAS2c,EAAO/c,IAAIC,OAAQshB,GAIzC,OAHIs1E,IACAr6F,EAAYugB,EAAOtkB,KAAI,IAAI+D,GAExB,EAAAolB,UAAUplB,GAAQ,IAG7B,YAAAu6F,uBAAA,SAAuB95F,EAAe+5F,G,UAAtC,OAA2D,oDACvD,IAAMkrC,EAAa,IAAIx3D,IAUvB,GATIznE,MAAMC,QAAQ+zF,IACdA,EAAsB3wF,SAAQ,SAAA67H,GAC1B,IAAMniI,EAAM,UAAID,MAAMoiI,EAAYniI,MAAQmiI,EAAYniI,IAAIyF,WACtDzF,IAAQkiI,EAAW18H,IAAIxF,IACvBkiI,EAAW37G,IAAIvmB,MAKvB,CAAC/C,EAAO+5F,GAAatrC,MAAK,SAAAxzD,GAAK,MAAa,iBAANA,GAAkBA,EAAI,KAC5D,OAAO,EAGX,GAAoB,IAAhB8+F,GAAyC,IAApBkrC,EAAW5pG,KAChC,OAAO,EAGX,IAAM8pG,EAA0BjoI,KAAKs6F,kBAAoB,GACzD,GAAIx3F,EAAQ+5F,EAAcorC,EAAwBx8H,OAC9C,OAAO,EAIX,IAAMy8H,EAAsBD,EAAwBngH,MAAM,GAC1DogH,EAAoBrhH,OAAM,MAA1BqhH,EAAmB,GAAQplI,EAAO+5F,GAAgB,EAAIkrC,GAAY9tH,KAAI,SAAApU,GAAO,OAAGA,IAAK,UAAIqd,MAAMrd,GAAMvH,UAAMgC,EAAYwiB,WAAOxiB,QAE9H,I,eAASvC,GACL,IAAM6kB,EAASslH,EAAoBnqI,GACnC,GAAImqI,EAAoB32E,MAAK,SAAC42E,EAAarlH,GAAU,OAAAA,IAAU/kB,GAAK6kB,EAAO/c,IAAIyF,aAAe68H,EAAYtiI,IAAIyF,c,cACnG,IAHNvN,EAAI,EAAGA,EAAImqI,EAAoBz8H,OAAQ1N,IAAK,C,QAA5CA,G,qCAOH,6BAAEkgI,EAAA,EAAAA,MAAOC,EAAA,EAAAA,QACf,OAAqB,IAAjBD,EAAMxyH,QAAmC,IAAnByyH,EAAQzyH,WAKlC,EAAAzL,KAAKstD,OAAM86E,wBAAuB,WAACtlI,EAAO+5F,GAAgBkrC,IAAY1wG,UAAK/2B,GAAW,SAAA0sB,GAClF,SAAK44G,eAAe1tC,YAAY,EAAA/iF,gBAAgBlU,MAAO,uCAAuC+rB,OAG3F,IAiBX,YAAAq7G,cAAA,SAAct8G,GACV/rB,KAAKgmI,8BAA8Bp4G,KAAKnvB,OAAO6vB,OAAO,CAAEzM,OAAQ,UAAIgB,OAAOkJ,EAAMlK,QAASC,OAAQ,UAAIe,OAAOkJ,EAAMjK,YAIvH,YAAAwmH,cAAA,SAAcv8G,GACV,OAAO/rB,KAAK+lI,+BAA+Bn4G,KAAK,CAC5C/L,OAAQ,UAAIgB,OAAOkJ,EAAMlK,QACzBC,OAAQ,UAAIe,OAAOkJ,EAAMjK,QACzBqM,UAAW,SAACC,QAGxB,EAvUA,GAAa,EAAA0nD,oB,8EC5Bb,WAUA,aAKI,WAAYxoB,GACRttD,KAAKstD,MAAQA,EACbttD,KAAKuoI,YAAc,IAAIt8H,IAkC/B,OA/BI,YAAAuvF,wBAAA,SACIC,EACAC,EACAC,EACAC,GAJJ,WAMU4sC,EAA4B,IAAI,EAAAj7G,QAChCk7G,EAAwC,CAC1C18G,MAAOy8G,EAA0Bz8G,OAE/B28G,EAA6D,CAAEjtC,YAAW,EAAEC,mBAAkB,EAAEC,mBAAkB,EAAEC,mBAAkB,GAQ5I,OANA57F,KAAKstD,MAAMq7E,2BAA2BD,GAA8BrxG,MAAK,SAACpyB,GAGtE,EAAKsjI,YAAYh9H,IAAItG,EAAIujI,GACzBC,EAAsBG,YAAc,WAAM,SAAKt7E,MAAMu7E,6BAA6B5jI,OAE/E,IAAI6jI,EAAkBL,EAAuB/sC,EAAoBC,EAAoBC,IAGhG,YAAAsrC,kBAAA,SAAkBjiI,EAAYY,EAAUuM,GACpC,IAAMo2H,EAAkExoI,KAAKuoI,YAAY3pI,IAAIqG,GACzFujI,EACAA,EAA0B56G,KAAK,CAAE/nB,IAAG,EAAEuM,KAAI,IAI1CpS,KAAKstD,MAAMu7E,6BAA6B5jI,IAGpD,EAzCA,GAAa,EAAAihI,iCA2Cb,iBAOI,WACI6C,EACQC,EACAC,EACAC,GAJZ,gBAEY,IAAAF,OAAA,QACA,IAAAC,OAAA,QACA,IAAAC,OAAA,GAFA,KAAAF,uBACA,KAAAC,uBACA,KAAAC,uBAERlpI,KAAKmpI,mBAAqB,IAAI,EAAA57G,QAC9BvtB,KAAKgkF,mBAAqB,IAAI,EAAAz2D,QAC9BvtB,KAAKopI,mBAAqB,IAAI,EAAA77G,QAE9BvtB,KAAK+oI,eAAiBA,EACtBA,EAAeh9G,OAAM,SAACA,GAIlB,OAAQA,EAAM3Z,MACV,IAAK,UACD,EAAK4xE,mBAAmBp2D,KAAK7B,EAAMlmB,KACnC,MACJ,IAAK,UACD,EAAKsjI,mBAAmBv7G,KAAK7B,EAAMlmB,KACnC,MACJ,IAAK,UACD,EAAKujI,mBAAmBx7G,KAAK7B,EAAMlmB,SAuCvD,OAjCI,sBAAI,iCAAkB,C,IAAtB,WACI,OAAO7F,KAAKgpI,sB,gCAGhB,sBAAI,iCAAkB,C,IAAtB,WACI,OAAOhpI,KAAKipI,sB,gCAGhB,sBAAI,iCAAkB,C,IAAtB,WACI,OAAOjpI,KAAKkpI,sB,gCAGhB,sBAAI,0BAAW,C,IAAf,WACI,OAAOlpI,KAAKmpI,mBAAmBp9G,O,gCAGnC,sBAAI,0BAAW,C,IAAf,WACI,OAAO/rB,KAAKgkF,mBAAmBj4D,O,gCAGnC,sBAAI,0BAAW,C,IAAf,WACI,OAAO/rB,KAAKopI,mBAAmBr9G,O,gCAGnC,YAAA1rB,QAAA,WACIL,KAAKmpI,mBAAmB9oI,UACxBL,KAAKgkF,mBAAmB3jF,UACxBL,KAAKopI,mBAAmB/oI,UACpBL,KAAK+oI,eAAeH,aACpB5oI,KAAK+oI,eAAeH,eAIhC,EArEA,I,8mDCvDA,WAMA,aAII,WAAYjjH,GACR3lB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,qBAAIl3C,uBAoCtC,OAjCU,YAAAgiF,YAAN,SAAkB9lF,EAAuBxK,EACrCyhI,G,IACA,wD,kHACMv+H,EAA8B,GAC9Bw+H,EAAoB,GACpB9hI,EAAkC,GAClC+hI,EAAW,SAACluH,GACd7T,EAAMuD,KAAKsQ,GACS,iBAATA,EACPiuH,EAAQv+H,KAAKsQ,IAEbiuH,EAAQv+H,KAAKsQ,EAAK3Q,OACd2Q,EAAKmuH,oBACL1+H,EAAQ2+H,oBAAsBH,EAAQ79H,OAAS,KAIvD49H,IACkC,iBAAvBA,GAAmC,UAAWA,EACrDE,EAASF,GAEL,UAAWA,IACXv+H,EAAQ4+H,MAAQL,EAAmBK,Q,IAI/C,IAAmB,IAAA71E,GAAI,8BAAZx4C,EAAI,QACXkuH,EAASluH,G,iGAEQ,SAAMrb,KAAKstD,MAAM64B,aAAa/zE,EAAMxK,EAASkD,EAASw+H,I,OAC3E,MAAO,CAAP,OAAwBhpI,KADlBqpI,EAAe,UACeniI,EAAMmiI,QAAgBrpI,WAGlE,EAzCA,GAAa,EAAAs1E,sB,8ZCLb,IAOA,cAEI,WAAYjwD,G,OACR,YAAMA,IAAI,KAUlB,OAbsC,OASlC,sBAAI,sBAAO,C,IAAX,WACI,MAAM,IAAI1kB,MAAM,2C,gCAGxB,EAbA,CAPA,OAOsC2oI,YAAzB,EAAAr0D,oB,8ECLb,WAEA,QAEA,aAUI,WAAY5vD,GACR3lB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBU,UAC7CtW,KAAK6pI,aAAe,EAAAhwF,KACpB75C,KAAK8pI,aAAe,EAAAjwF,KAyD5B,OAtDI,YAAA2jD,eAAA,SAAeC,GACX,OAAOz9F,KAAKstD,MAAMy8E,gBAAgBtsC,GAAYpmE,MAAK,SAAAqS,GAC/C,GAAU,OAANA,EAGJ,OAAOA,MAIf,YAAAg0D,kBAAA,SAAkBC,GACd,OAAO39F,KAAKgqI,gBAAgBrsC,IAGhC,YAAAC,mBAAA,WACI,OAAO59F,KAAKgqI,iBAGhB,YAAAtlD,mBAAA,SAAmBC,GACf3kF,KAAKgqI,gBAAkBrlD,GAG3B,YAAAC,YAAA,SAAYqlD,GACRjqI,KAAKiqI,KAAOA,GAGhB,YAAAplD,SAAA,SAASC,GACL9kF,KAAKkqI,aAAeplD,GAGxB,YAAA+Y,yBAAA,WACI,OAAO79F,KAAKstD,MAAM68E,6BAGtB,sBAAI,sBAAO,C,IAAX,WACI,OAAOP,EAAWQ,U,gCAKtB,sBAAI,uBAAQ,C,IAAZ,WACI,OAAOpqI,KAAKiqI,M,gCAEhB,sBAAI,wBAAS,C,IAAb,WACI,OAAOjqI,KAAK8pI,c,gCAEhB,sBAAI,wBAAS,C,IAAb,WACI,OAAO9pI,KAAK6pI,c,gCAEhB,sBAAI,wBAAS,C,IAAb,WACI,MAAO,S,gCAEX,sBAAI,oBAAK,C,IAAT,WACI,OAAO7pI,KAAKkqI,c,gCA5DO,EAAAE,SAAW,gBA8DtC,EAtEA,GAAsB,EAAAR,c,8ECJtB,YAEA,aAII,WAAYjkH,GACR3lB,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmB2B,gBAWrD,OARI,YAAA8yH,SAAA,WACI,OAAOrqI,KAAKstD,MAAMg9E,aAGtB,YAAAC,UAAA,SAAUvrI,GACN,OAAOgB,KAAKstD,MAAMk9E,WAAWxrI,IAGrC,EAhBA,GAAa,EAAAo3E,gB,mtBCJb,YACA,OAIA,OACA,OACA,OACA,OAEA,QAEA,aASI,WACIzwD,EACiBy0E,GAAA,KAAAA,YATJ,KAAAqwC,cAAgB,IAAIx+H,IACpB,KAAAy+H,YAAc,IAAIz+H,IAU/BjM,KAAKstD,MAAQ3nC,EAAIynC,SAAS,EAAAx3C,mBAAmBkB,eAsGrD,OAnGI,YAAAitC,KAAA,SAAK4mF,GACD3qI,KAAK2qI,SAAWA,GAIpB,YAAAC,WAAA,SAAWlnH,EAAgB9b,GACvB,IAAMijI,EAAQ7qI,KAAK8qI,gBAAgBpnH,GAC/BmnH,GACAA,EAAMpnD,QAAQsnD,iBAAiBn9G,KAAKhmB,IAG5C,YAAAojI,kCAAA,SAAkCtnH,EAAgBunH,GAC9C,IAAMJ,EAAQ7qI,KAAK8qI,gBAAgBpnH,GACnC,GAAImnH,EAAO,CACP,IAAMxsH,EAAa,EAAAkwF,aAAa08B,EAASrkI,UACrCikI,EAAM9mI,SAAWknI,EAASlnI,QAAU8mI,EAAMxhC,UAAY4hC,EAAS5hC,SAAWwhC,EAAMxsH,aAAeA,IAC/FwsH,EAAMK,UAAUD,EAASlnI,QACzB8mI,EAAMvd,WAAW2d,EAAS5hC,SAC1BwhC,EAAMM,cAAc9sH,GACpBwsH,EAAMO,4BAA4Bx9G,KAAK,CAAEy9G,aAAcR,OAInE,YAAAS,0BAAA,SAA0B5nH,GACtB,IAAMmnH,EAAQ7qI,KAAK8qI,gBAAgBpnH,GAKnC,OAJImnH,IACAA,EAAMxqI,UACNL,KAAKyqI,cAAc5jI,OAAO6c,IAEvB6K,QAAQtH,WAEnB,YAAAskH,yBAAA,SAAyB3xC,EACrBX,EACAvuF,EAEAoyB,EACA0uG,EACA1gI,GACA,IAAK9K,KAAK2qI,SACN,OAAOp8G,QAAQ4I,OAAO,IAAIl2B,MAAM,iCAEpC,IAAMugB,EAAQxhB,KAAK0qI,YAAY9rI,IAAIq6F,GACnC,IAAKz3E,EACD,OAAO+M,QAAQ4I,OAAO,IAAIl2B,MAAM,4BAA4Bg4F,EAAQ,MAEhE,IAAAG,EAAA,EAAAA,WAAY5yE,EAAA,EAAAA,OAEdi9D,EAAU,IAAIgoD,EAAY7xC,EAAQ55F,KAAKstD,MAAOxiD,EAAS9K,KAAK2qI,SAAU3qI,KAAKo6F,UAAW5zE,GACtFklH,EAAe,IAAIC,EAAiB/xC,EAAQ55F,KAAKstD,MAAO2rC,EAAUvuF,EAAO,EAAA6jG,aAAai9B,EAAU5kI,UAAYkE,EAAS24E,GAI3H,OAHAioD,EAAaR,UAAUM,EAAUznI,QACjC2nI,EAAape,WAAWke,EAAUniC,SAClCrpG,KAAKyqI,cAAcl/H,IAAIquF,EAAQ8xC,GACxBtyC,EAAWwyC,wBAAwBF,EAAc5uG,IAG5D,YAAAo8D,cAAA,SACID,EACAvuF,EACAwT,EACApT,EACA0b,GAEA,IAAKxmB,KAAK2qI,SACN,MAAM,IAAI1pI,MAAM,gCAEpB,IAAM4qI,EAAqB,EAAAC,0BAA0B5tH,GAC/C07E,EAAS,EAAA//C,KACf75C,KAAKstD,MAAMy+E,oBAAoBnyC,EAAQX,EAAUvuF,EAAOmhI,EAAoBJ,EAAYO,iBAAiBlhI,EAAS9K,KAAKo6F,UAAW5zE,IAElI,IAAMi9D,EAAU,IAAIgoD,EAAY7xC,EAAQ55F,KAAKstD,MAAOxiD,EAAS9K,KAAK2qI,SAAU3qI,KAAKo6F,UAAW5zE,GACtFqkH,EAAQ,IAAIc,EAAiB/xC,EAAQ55F,KAAKstD,MAAO2rC,EAAUvuF,EAAOmhI,EAAoB/gI,EAAS24E,GAErG,OADAzjF,KAAKyqI,cAAcl/H,IAAIquF,EAAQixC,GACxBA,GAGX,YAAA1xC,+BAAA,SACIF,EACAG,EACA5yE,GAHJ,WAKI,GAAIxmB,KAAK0qI,YAAYr/H,IAAI4tF,GACrB,MAAM,IAAIh4F,MAAM,mBAAmBg4F,EAAQ,wBAM/C,OAHAj5F,KAAK0qI,YAAYn/H,IAAI0tF,EAAU,CAAEG,WAAU,EAAE5yE,OAAM,IACnDxmB,KAAKstD,MAAM2+E,oBAAoBhzC,GAExB,IAAI,EAAA94F,YAAW,WAClB,EAAKuqI,YAAY7jI,OAAOoyF,GACxB,EAAK3rC,MAAM4+E,sBAAsBjzC,OAIjC,YAAA6xC,gBAAR,SAAwBlxC,GACpB,GAAI55F,KAAKyqI,cAAcp/H,IAAIuuF,GACvB,OAAO55F,KAAKyqI,cAAc7rI,IAAIg7F,IAI1C,EAnHA,GAAa,EAAAtjB,kBAqHb,iBAWI,WACqBsjB,EACAtsC,EACjBxiD,EACiB6/H,EACAvwC,EACR5zE,GALQ,KAAAozE,SACA,KAAAtsC,QAEA,KAAAq9E,WACA,KAAAvwC,YACR,KAAA5zE,SAhBL,KAAAuX,YAAa,EAKL,KAAAgtG,iBAAmB,IAAI,EAAAx9G,QAGvB,KAAA4+G,oBAAkCnsI,KAAK+qI,iBAAiBh/G,MAUpE/rB,KAAKitB,SAAWniB,EAqExB,OAlEI,YAAAzK,QAAA,WACQL,KAAK+9B,aAGT/9B,KAAK+9B,YAAa,EAClB/9B,KAAK+qI,iBAAiB1qI,YAG1B,YAAA+rI,aAAA,SAAahhI,GACT,IAAMvF,EAAM7F,KAAK2qI,SAAS0B,oBAGrB7nI,QAAQ,eAAgB4G,EAAS8T,OAAS9T,EAASE,WAAW9G,QAAQ,SAAU,KAChFA,QAAQ,WAAYxE,KAAK45F,QAC9B,OAAO,UAAI12E,MAAMrd,IAGrB,sBAAI,wBAAS,C,IAAb,WACI,OAAO7F,KAAK2qI,SAAS2B,iBAAiB9nI,QAAQ,WAAYxE,KAAK45F,S,gCAGnE,sBAAI,mBAAI,C,IAAR,WAEI,OADA55F,KAAKusI,kBACEvsI,KAAKwsI,O,IAGhB,SAASxtI,GACLgB,KAAKusI,kBACDvsI,KAAKwsI,QAAUxtI,IACfgB,KAAKwsI,MAAQxtI,EACbgB,KAAKstD,MAAMm/E,SAASzsI,KAAK45F,OAAQ56F,K,gCAIzC,sBAAI,sBAAO,C,IAAX,WAEI,OADAgB,KAAKusI,kBACEvsI,KAAKitB,U,IAGhB,SAAYm4G,GACRplI,KAAKusI,kBACLvsI,KAAKstD,MAAMo/E,YAAY1sI,KAAK45F,OAAQ6xC,EAAYO,iBAAiB5G,EAAYplI,KAAKo6F,UAAWp6F,KAAKwmB,SAClGxmB,KAAKitB,SAAWm4G,G,gCAIpB,YAAAjwD,YAAA,SAAYvtE,GAER,OADA5H,KAAKusI,kBACEvsI,KAAKstD,MAAMq/E,aAAa3sI,KAAK45F,OAAQhyF,IAGxC,YAAA2kI,gBAAR,WACI,GAAIvsI,KAAK+9B,WACL,MAAM,IAAI98B,MAAM,8BAIjB,EAAA+qI,iBAAP,SAAwBlhI,EAA+BsvF,EAA6B5zE,GAChF,OAAO,EAAP,GACO1b,EAAO,CACV8hI,mBAAoB9hI,EAAQ8hI,oBAAsB,GAC1CxyC,EAAUE,kBAAoB,IAAIrgF,KAAI,SAAAyvB,GAAK,OAAAA,EAAE7jC,OAAI,CACrD,UAAIkX,KAAKyJ,EAAOxR,mBAIhC,EAxFA,GAAa,EAAAy2H,cA0Fb,iBAcI,WAA6B7xC,EACRtsC,EACAu/E,EACTljC,EACRzrF,EACiB+O,EACA6/G,GANQ,KAAAlzC,SACR,KAAAtsC,QACA,KAAAu/E,YACT,KAAAljC,SAES,KAAA18E,WACA,KAAA6/G,WAlBb,KAAA/uG,YAAa,EACb,KAAA95B,SAAU,EACV,KAAA4pH,UAAW,EAIV,KAAA7+E,iBAAmB,IAAI,EAAAzhB,QAChB,KAAAw/G,aAA4B/sI,KAAKgvC,iBAAiBjjB,MAEzD,KAAAq/G,4BAA8B,IAAI,EAAA79G,QAC3B,KAAAy/G,qBAA2EhtI,KAAKorI,4BAA4Br/G,MAUxH/rB,KAAKitI,aAAsC,iBAAhB/uH,EAA2BA,EAAc,CAAEG,WAAYH,GAsI1F,OAnII,YAAA7d,QAAA,WACQL,KAAK+9B,aAIT/9B,KAAK+9B,YAAa,EAClB/9B,KAAKgvC,iBAAiBphB,UAAK,GAE3B5tB,KAAKstD,MAAM4/E,gBAAgBltI,KAAK45F,QAChC55F,KAAK8sI,SAASzsI,UAEdL,KAAKgvC,iBAAiB3uC,UACtBL,KAAKorI,4BAA4B/qI,YAGrC,sBAAI,uBAAQ,C,IAAZ,WAEI,OADAL,KAAKusI,kBACEvsI,KAAK6sI,W,gCAGhB,sBAAI,oBAAK,C,IAAT,WAEI,OADA7sI,KAAKusI,kBACEvsI,KAAK2pG,Q,IAGhB,SAAUwjC,GACNntI,KAAKusI,kBACDvsI,KAAK2pG,SAAWwjC,IAChBntI,KAAK2pG,OAASwjC,EACdntI,KAAKstD,MAAM8/E,UAAUptI,KAAK45F,OAAQuzC,K,gCAI1C,sBAAI,uBAAQ,C,IAAZ,WACI,OAAOntI,KAAKqtI,W,IAGhB,SAAa1/H,GACT3N,KAAKusI,kBACDvsI,KAAKqtI,YAAc1/H,IACnB3N,KAAKqtI,UAAY1/H,EACjB3N,KAAKstD,MAAMggF,aAAattI,KAAK45F,OAAQ,EAAArtB,eAAeI,MAAMh/D,EAAU3N,KAAK8sI,SAAStmH,W,gCAI1F,sBAAI,sBAAO,C,IAAX,WAEI,OADAxmB,KAAKusI,kBACEvsI,KAAK8sI,U,gCAGhB,sBAAI,sBAAO,C,IAAX,WAEI,OADA9sI,KAAKusI,kBACEvsI,KAAKitB,U,gCAGhB,sBAAI,yBAAU,C,IAAd,WAEI,OADAjtB,KAAKusI,kBACEvsI,KAAKitI,aAAa5uH,Y,gCAG7B,YAAA8sH,cAAA,SAAcnsI,GACVgB,KAAKusI,kBACLvsI,KAAKitI,aAAa5uH,WAAarf,GAGnC,sBAAI,0BAAW,C,IAAf,WAEI,OADAgB,KAAKusI,kBACEvsI,KAAKitI,c,gCAGhB,YAAAM,eAAA,SAAevuI,GACXgB,KAAKusI,kBACLvsI,KAAKitI,aAAejuI,GAGxB,sBAAI,qBAAM,C,IAAV,WAEI,OADAgB,KAAKusI,kBACEvsI,KAAKiE,S,gCAGhB,YAAAinI,UAAA,SAAUlsI,GACNgB,KAAKusI,kBACLvsI,KAAKiE,QAAUjF,GAGnB,sBAAI,sBAAO,C,IAAX,WAEI,OADAgB,KAAKusI,kBACEvsI,KAAK6tH,U,gCAGhB,YAAAP,WAAA,SAAWtuH,GACPgB,KAAKusI,kBACLvsI,KAAK6tH,SAAW7uH,GAGpB,YAAAytH,OAAA,SAAOr8G,EAAkD3D,EAAmC4D,GACxF,IAAI8N,OAA2C7d,EAC3C+d,OAA2C/d,EAC3Cge,OAAqChe,EACrB,iBAAT8P,EACPiO,EAAajO,EAEb+N,EAAO/N,EAES,iBAAT3D,EACP4R,EAAa5R,EAEb6R,EAAgB7R,EAEA,kBAAT4D,IACPiO,EAAgBjO,GAEpBrQ,KAAKusI,kBACLvsI,KAAKstD,MAAM8mD,QAAQp0G,KAAK45F,OAAQ,CAC5Bz7E,KAAI,EACJE,WAAYA,EAAa,EAAAnF,eAAemF,QAAc/d,EACtDge,cAAa,KAKrB,YAAA62D,YAAA,SAAYvtE,GAER,OADA5H,KAAKusI,kBACEvsI,KAAKstD,MAAMq/E,aAAa3sI,KAAK45F,OAAQhyF,IAGxC,YAAA2kI,gBAAR,WACI,GAAIvsI,KAAK+9B,WACL,MAAM,IAAI98B,MAAM,mCAG5B,EA5JA,GAAa,EAAA0qI","file":"worker-ext.2d75b2a9d67146de874d.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 100);\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/workbench/api/common/extHostTypes.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\nimport { UUID } from '@phosphor/coreutils/lib/uuid';\nimport { illegalArgument } from '../common/errors';\nimport * as theia from '@theia/plugin';\nimport * as crypto from 'crypto';\nimport URI from 'vscode-uri';\nimport { relative } from '../common/paths-util';\nimport { startsWithIgnoreCase } from '../common/strings';\nimport { MarkdownString, isMarkdownString } from './markdown-string';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\n\nexport class Disposable {\n    private disposable: undefined | (() => void);\n\n    // tslint:disable-next-line:no-any\n    static from(...disposables: { dispose(): any }[]): Disposable {\n        return new Disposable(() => {\n            if (disposables) {\n                for (const disposable of disposables) {\n                    if (disposable && typeof disposable.dispose === 'function') {\n                        disposable.dispose();\n                    }\n                }\n            }\n        });\n    }\n\n    constructor(func: () => void) {\n        this.disposable = func;\n    }\n    /**\n     * Dispose this object.\n     */\n    dispose(): void {\n        if (this.disposable) {\n            this.disposable();\n            this.disposable = undefined;\n        }\n    }\n\n    static create(func: () => void): Disposable {\n        return new Disposable(func);\n    }\n}\n\nexport enum StatusBarAlignment {\n    Left = 1,\n    Right = 2\n}\n\nexport enum TextEditorLineNumbersStyle {\n    Off = 0,\n    On = 1,\n    Relative = 2\n}\n\n/**\n * Denotes a column in the editor window.\n * Columns are used to show editors side by side.\n */\nexport enum ViewColumn {\n    Active = -1,\n    Beside = -2,\n    One = 1,\n    Two = 2,\n    Three = 3,\n    Four = 4,\n    Five = 5,\n    Six = 6,\n    Seven = 7,\n    Eight = 8,\n    Nine = 9\n}\n\n/**\n * Represents sources that can cause `window.onDidChangeEditorSelection`\n */\nexport enum TextEditorSelectionChangeKind {\n    Keyboard = 1,\n\n    Mouse = 2,\n\n    Command = 3\n}\n\nexport namespace TextEditorSelectionChangeKind {\n    export function fromValue(s: string | undefined): TextEditorSelectionChangeKind | undefined {\n        switch (s) {\n            case 'keyboard': return TextEditorSelectionChangeKind.Keyboard;\n            case 'mouse': return TextEditorSelectionChangeKind.Mouse;\n            case 'api': return TextEditorSelectionChangeKind.Command;\n        }\n        return undefined;\n    }\n}\n\nexport class Position {\n    private _line: number;\n    private _character: number;\n    constructor(line: number, char: number) {\n        if (line < 0) {\n            throw new Error('line number cannot be negative');\n        }\n        if (char < 0) {\n            throw new Error('char number cannot be negative');\n        }\n        this._line = line;\n        this._character = char;\n    }\n\n    get line(): number {\n        return this._line;\n    }\n\n    get character(): number {\n        return this._character;\n    }\n\n    isBefore(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character < other._character;\n    }\n\n    isBeforeOrEqual(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character <= other._character;\n    }\n\n    isAfter(other: Position): boolean {\n        return !this.isBeforeOrEqual(other);\n    }\n\n    isAfterOrEqual(other: Position): boolean {\n        return !this.isBefore(other);\n    }\n\n    isEqual(other: Position): boolean {\n        return this._line === other._line && this._character === other._character;\n    }\n\n    compareTo(other: Position): number {\n        if (this._line < other._line) {\n            return -1;\n        } else if (this._line > other.line) {\n            return 1;\n        } else {\n            // equal line\n            if (this._character < other._character) {\n                return -1;\n            } else if (this._character > other._character) {\n                return 1;\n            } else {\n                // equal line and character\n                return 0;\n            }\n        }\n    }\n\n    translate(change: { lineDelta?: number; characterDelta?: number; }): Position;\n    translate(lineDelta?: number, characterDelta?: number): Position;\n    translate(lineDeltaOrChange: number | { lineDelta?: number; characterDelta?: number; } | undefined, characterDelta: number = 0): Position {\n\n        if (lineDeltaOrChange === null || characterDelta === null) {\n            throw illegalArgument();\n        }\n\n        let lineDelta: number;\n        if (typeof lineDeltaOrChange === 'undefined') {\n            lineDelta = 0;\n        } else if (typeof lineDeltaOrChange === 'number') {\n            lineDelta = lineDeltaOrChange;\n        } else {\n            lineDelta = typeof lineDeltaOrChange.lineDelta === 'number' ? lineDeltaOrChange.lineDelta : 0;\n            characterDelta = typeof lineDeltaOrChange.characterDelta === 'number' ? lineDeltaOrChange.characterDelta : 0;\n        }\n\n        if (lineDelta === 0 && characterDelta === 0) {\n            return this;\n        }\n        return new Position(this.line + lineDelta, this.character + characterDelta);\n    }\n\n    with(change: { line?: number; character?: number; }): Position;\n    with(line?: number, character?: number): Position;\n    with(lineOrChange: number | { line?: number; character?: number; } | undefined, character: number = this.character): Position {\n\n        if (lineOrChange === null || character === null) {\n            throw illegalArgument();\n        }\n\n        let line: number;\n        if (typeof lineOrChange === 'undefined') {\n            line = this.line;\n\n        } else if (typeof lineOrChange === 'number') {\n            line = lineOrChange;\n\n        } else {\n            line = typeof lineOrChange.line === 'number' ? lineOrChange.line : this.line;\n            character = typeof lineOrChange.character === 'number' ? lineOrChange.character : this.character;\n        }\n\n        if (line === this.line && character === this.character) {\n            return this;\n        }\n        return new Position(line, character);\n    }\n\n    static Min(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isBefore(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static Max(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isAfter(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static isPosition(other: {}): other is Position {\n        if (!other) {\n            return false;\n        }\n        if (other instanceof Position) {\n            return true;\n        }\n        const { line, character } = <Position>other;\n        if (typeof line === 'number' && typeof character === 'number') {\n            return true;\n        }\n        return false;\n    }\n}\n\nexport class Range {\n    protected _start: Position;\n    protected _end: Position;\n\n    constructor(start: Position, end: Position);\n    constructor(startLine: number, startColumn: number, endLine: number, endColumn: number);\n    constructor(startLineOrStart: number | Position, startColumnOrEnd: number | Position, endLine?: number, endColumn?: number) {\n        let start: Position | undefined = undefined;\n        let end: Position | undefined = undefined;\n\n        if (typeof startLineOrStart === 'number' && typeof startColumnOrEnd === 'number' && typeof endLine === 'number' && typeof endColumn === 'number') {\n            start = new Position(startLineOrStart, startColumnOrEnd);\n            end = new Position(endLine, endColumn);\n        } else if (startLineOrStart instanceof Position && startColumnOrEnd instanceof Position) {\n            start = startLineOrStart;\n            end = startColumnOrEnd;\n        }\n\n        if (!start || !end) {\n            throw new Error('Invalid arguments');\n        }\n\n        if (start.isBefore(end)) {\n            this._start = start;\n            this._end = end;\n        } else {\n            this._start = end;\n            this._end = start;\n        }\n    }\n\n    get start(): Position {\n        return this._start;\n    }\n\n    get end(): Position {\n        return this._end;\n    }\n\n    contains(positionOrRange: Position | Range): boolean {\n        if (positionOrRange instanceof Range) {\n            return this.contains(positionOrRange._start)\n                && this.contains(positionOrRange._end);\n\n        } else if (positionOrRange instanceof Position) {\n            if (positionOrRange.isBefore(this._start)) {\n                return false;\n            }\n            if (this._end.isBefore(positionOrRange)) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    isEqual(other: Range): boolean {\n        return this._start.isEqual(other._start) && this._end.isEqual(other._end);\n    }\n\n    intersection(other: Range): Range | undefined {\n        const start = Position.Max(other.start, this._start);\n        const end = Position.Min(other.end, this._end);\n        if (start.isAfter(end)) {\n            // this happens when there is no overlap:\n            // |-----|\n            //          |----|\n            return undefined;\n        }\n        return new Range(start, end);\n    }\n\n    union(other: Range): Range {\n        if (this.contains(other)) {\n            return this;\n        } else if (other.contains(this)) {\n            return other;\n        }\n        const start = Position.Min(other.start, this._start);\n        const end = Position.Max(other.end, this.end);\n        return new Range(start, end);\n    }\n\n    get isEmpty(): boolean {\n        return this._start.isEqual(this._end);\n    }\n\n    get isSingleLine(): boolean {\n        return this._start.line === this._end.line;\n    }\n\n    with(change: { start?: Position, end?: Position }): Range;\n    with(start?: Position, end?: Position): Range;\n    with(startOrChange: Position | { start?: Position, end?: Position } | undefined, end: Position = this.end): Range {\n\n        if (startOrChange === null || end === null) {\n            throw illegalArgument();\n        }\n\n        let start: Position;\n        if (!startOrChange) {\n            start = this.start;\n\n        } else if (Position.isPosition(startOrChange)) {\n            start = startOrChange;\n\n        } else {\n            start = startOrChange.start || this.start;\n            end = startOrChange.end || this.end;\n        }\n\n        if (start.isEqual(this._start) && end.isEqual(this.end)) {\n            return this;\n        }\n        return new Range(start, end);\n    }\n\n    static isRange(thing: {}): thing is theia.Range {\n        if (thing instanceof Range) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Position.isPosition((<Range>thing).start)\n            && Position.isPosition((<Range>thing).end);\n    }\n\n}\n\nexport class Selection extends Range {\n    private _anchor: Position;\n    private _active: Position;\n    constructor(anchor: Position, active: Position);\n    constructor(anchorLine: number, anchorColumn: number, activeLine: number, activeColumn: number);\n    constructor(anchorLineOrAnchor: number | Position, anchorColumnOrActive: number | Position, activeLine?: number, activeColumn?: number) {\n        let anchor: Position | undefined = undefined;\n        let active: Position | undefined = undefined;\n\n        if (typeof anchorLineOrAnchor === 'number' && typeof anchorColumnOrActive === 'number' && typeof activeLine === 'number' && typeof activeColumn === 'number') {\n            anchor = new Position(anchorLineOrAnchor, anchorColumnOrActive);\n            active = new Position(activeLine, activeColumn);\n        } else if (anchorLineOrAnchor instanceof Position && anchorColumnOrActive instanceof Position) {\n            anchor = anchorLineOrAnchor;\n            active = anchorColumnOrActive;\n        }\n\n        if (!anchor || !active) {\n            throw new Error('Invalid arguments');\n        }\n\n        super(anchor, active);\n\n        this._anchor = anchor;\n        this._active = active;\n    }\n\n    get active(): Position {\n        return this._active;\n    }\n\n    get anchor(): Position {\n        return this._anchor;\n    }\n\n    get isReversed(): boolean {\n        return this._anchor === this._end;\n    }\n}\n\nexport enum EndOfLine {\n    LF = 1,\n    CRLF = 2\n}\n\nexport class SnippetString {\n\n    static isSnippetString(thing: {}): thing is SnippetString {\n        if (thing instanceof SnippetString) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<SnippetString>thing).value === 'string';\n    }\n\n    private static _escape(value: string): string {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n\n    private _tabstop: number = 1;\n\n    value: string;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(string: string): SnippetString {\n        this.value += SnippetString._escape(string);\n        return this;\n    }\n\n    appendTabstop(number: number = this._tabstop++): SnippetString {\n        this.value += '$';\n        this.value += number;\n        return this;\n    }\n\n    appendPlaceholder(value: string | ((snippet: SnippetString) => void), number: number = this._tabstop++): SnippetString {\n\n        if (typeof value === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            value(nested);\n            this._tabstop = nested._tabstop;\n            value = nested.value;\n        } else {\n            value = SnippetString._escape(value);\n        }\n\n        this.value += '${';\n        this.value += number;\n        this.value += ':';\n        this.value += value;\n        this.value += '}';\n\n        return this;\n    }\n\n    appendVariable(name: string, defaultValue?: string | ((snippet: SnippetString) => void)): SnippetString {\n\n        if (typeof defaultValue === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            defaultValue(nested);\n            this._tabstop = nested._tabstop;\n            defaultValue = nested.value;\n\n        } else if (typeof defaultValue === 'string') {\n            defaultValue = defaultValue.replace(/\\$|}/g, '\\\\$&');\n        }\n\n        this.value += '${';\n        this.value += name;\n        if (defaultValue) {\n            this.value += ':';\n            this.value += defaultValue;\n        }\n        this.value += '}';\n\n        return this;\n    }\n}\n\nexport class ThemeColor {\n    constructor(public id: string) {\n    }\n}\n\nexport class ThemeIcon {\n\n    static readonly File: ThemeIcon = new ThemeIcon('file');\n\n    static readonly Folder: ThemeIcon = new ThemeIcon('folder');\n\n    private constructor(public id: string) {\n    }\n\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\n/**\n * These values match very carefully the values of `TrackedRangeStickiness`\n */\nexport enum DecorationRangeBehavior {\n    /**\n     * TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges\n     */\n    OpenOpen = 0,\n    /**\n     * TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n     */\n    ClosedClosed = 1,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingBefore\n     */\n    OpenClosed = 2,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingAfter\n     */\n    ClosedOpen = 3\n}\n\n/**\n * Vertical Lane in the overview ruler of the editor.\n */\nexport enum OverviewRulerLane {\n    Left = 1,\n    Center = 2,\n    Right = 4,\n    Full = 7\n}\n\nexport enum ConfigurationTarget {\n    Global = 1,\n    Workspace,\n    WorkspaceFolder,\n    Default,\n    Memory\n}\n\nexport class RelativePattern {\n\n    base: string;\n\n    constructor(base: theia.WorkspaceFolder | string, public pattern: string) {\n        if (typeof base !== 'string') {\n            if (!base || !URI.isUri(base.uri)) {\n                throw illegalArgument('base');\n            }\n        }\n\n        if (typeof pattern !== 'string') {\n            throw illegalArgument('pattern');\n        }\n\n        this.base = typeof base === 'string' ? base : base.uri.fsPath;\n    }\n\n    pathToRelative(from: string, to: string): string {\n        return relative(from, to);\n    }\n}\n\nexport enum IndentAction {\n    None = 0,\n    Indent = 1,\n    IndentOutdent = 2,\n    Outdent = 3\n}\n\nexport class TextEdit {\n\n    protected _range: Range;\n    protected _newText: string;\n    protected _newEol: EndOfLine;\n\n    get range(): Range {\n        return this._range;\n    }\n\n    set range(value: Range) {\n        if (value && !Range.isRange(value)) {\n            throw illegalArgument('range');\n        }\n        this._range = value;\n    }\n\n    get newText(): string {\n        return this._newText || '';\n    }\n\n    set newText(value: string) {\n        if (value && typeof value !== 'string') {\n            throw illegalArgument('newText');\n        }\n        this._newText = value;\n    }\n\n    get newEol(): EndOfLine {\n        return this._newEol;\n    }\n\n    set newEol(value: EndOfLine) {\n        if (value && typeof value !== 'number') {\n            throw illegalArgument('newEol');\n        }\n        this._newEol = value;\n    }\n\n    constructor(range: Range | undefined, newText: string | undefined) {\n        this.range = range!;\n        this.newText = newText!;\n    }\n\n    static isTextEdit(thing: {}): thing is TextEdit {\n        if (thing instanceof TextEdit) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<TextEdit>thing).range)\n            && typeof (<TextEdit>thing).newText === 'string';\n    }\n\n    static replace(range: Range, newText: string): TextEdit {\n        return new TextEdit(range, newText);\n    }\n\n    static insert(position: Position, newText: string): TextEdit {\n        return TextEdit.replace(new Range(position, position), newText);\n    }\n\n    static delete(range: Range): TextEdit {\n        return TextEdit.replace(range, '');\n    }\n\n    static setEndOfLine(eol: EndOfLine): TextEdit {\n        const ret = new TextEdit(undefined, undefined);\n        ret.newEol = eol;\n        return ret;\n    }\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport enum CompletionItemKind {\n    Text = 0,\n    Method = 1,\n    Function = 2,\n    Constructor = 3,\n    Field = 4,\n    Variable = 5,\n    Class = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Unit = 10,\n    Value = 11,\n    Enum = 12,\n    Keyword = 13,\n    Snippet = 14,\n    Color = 15,\n    File = 16,\n    Reference = 17,\n    Folder = 18,\n    EnumMember = 19,\n    Constant = 20,\n    Struct = 21,\n    Event = 22,\n    Operator = 23,\n    TypeParameter = 24\n}\n\nexport class CompletionItem implements theia.CompletionItem {\n\n    label: string;\n    kind?: CompletionItemKind;\n    detail: string;\n    documentation: string | MarkdownString;\n    sortText: string;\n    filterText: string;\n    preselect: boolean;\n    insertText: string | SnippetString;\n    range: Range;\n    textEdit: TextEdit;\n    additionalTextEdits: TextEdit[];\n    command: theia.Command;\n\n    constructor(label: string, kind?: CompletionItemKind) {\n        this.label = label;\n        this.kind = kind;\n    }\n}\n\nexport class CompletionList {\n\n    isIncomplete?: boolean;\n\n    items: theia.CompletionItem[];\n\n    constructor(items: theia.CompletionItem[] = [], isIncomplete: boolean = false) {\n        this.items = items;\n        this.isIncomplete = isIncomplete;\n    }\n}\n\nexport enum DiagnosticSeverity {\n    Error = 0,\n    Warning = 1,\n    Information = 2,\n    Hint = 3\n}\n\nexport class DiagnosticRelatedInformation {\n    location: Location;\n    message: string;\n\n    constructor(location: Location, message: string) {\n        this.location = location;\n        this.message = message;\n    }\n}\n\nexport class Location {\n    uri: URI;\n    range: Range;\n\n    constructor(uri: URI, rangeOrPosition: Range | Position | undefined) {\n        this.uri = uri;\n        if (rangeOrPosition instanceof Range) {\n            this.range = rangeOrPosition;\n        } else if (rangeOrPosition instanceof Position) {\n            this.range = new Range(rangeOrPosition, rangeOrPosition);\n        }\n    }\n\n    static isLocation(thing: {}): thing is theia.Location {\n        if (thing instanceof Location) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<Location>thing).range)\n            && URI.isUri((<Location>thing).uri);\n    }\n}\n\nexport enum DiagnosticTag {\n    Unnecessary = 1,\n}\n\nexport class Diagnostic {\n    range: Range;\n    message: string;\n    severity: DiagnosticSeverity;\n    source?: string;\n    code?: string | number;\n    relatedInformation?: DiagnosticRelatedInformation[];\n    tags?: DiagnosticTag[];\n\n    constructor(range: Range, message: string, severity: DiagnosticSeverity = DiagnosticSeverity.Error) {\n        this.range = range;\n        this.message = message;\n        this.severity = severity;\n    }\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n}\n\nexport class ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownString;\n\n    constructor(label: string | [number, number], documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n    }\n}\n\nexport class SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n\n    constructor(label: string, documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n        this.parameters = [];\n    }\n}\n\nexport enum SignatureHelpTriggerKind {\n    Invoke = 1,\n    TriggerCharacter = 2,\n    ContentChange = 3,\n}\n\nexport class SignatureHelp {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n\n    constructor() {\n        this.signatures = [];\n    }\n}\n\nexport class Hover {\n\n    public contents: MarkdownString[] | theia.MarkedString[];\n    public range?: Range;\n\n    constructor(\n        contents: MarkdownString | theia.MarkedString | MarkdownString[] | theia.MarkedString[],\n        range?: Range\n    ) {\n        if (!contents) {\n            illegalArgument('contents must be defined');\n        }\n        if (Array.isArray(contents)) {\n            this.contents = <MarkdownString[] | theia.MarkedString[]>contents;\n        } else if (isMarkdownString(contents)) {\n            this.contents = [contents];\n        } else {\n            this.contents = [contents];\n        }\n        this.range = range;\n    }\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\nexport class DocumentHighlight {\n\n    public range: Range;\n    public kind?: DocumentHighlightKind;\n\n    constructor(\n        range: Range,\n        kind?: DocumentHighlightKind\n    ) {\n        this.range = range;\n        this.kind = kind;\n    }\n}\n\nexport type Definition = Location | Location[];\n\nexport class DocumentLink {\n    range: Range;\n    target: URI;\n\n    constructor(range: Range, target: URI) {\n        if (target && !(target instanceof URI)) {\n            throw illegalArgument('target');\n        }\n        if (!Range.isRange(range) || range.isEmpty) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.target = target;\n    }\n}\n\nexport class CodeLens {\n\n    range: Range;\n\n    command?: theia.Command;\n\n    get isResolved(): boolean {\n        return !!this.command;\n    }\n\n    constructor(range: Range, command?: theia.Command) {\n        this.range = range;\n        this.command = command;\n    }\n}\n\nexport enum CodeActionTrigger {\n    Automatic = 1,\n    Manual = 2,\n}\n\nexport class CodeActionKind {\n    private static readonly sep = '.';\n\n    public static readonly Empty = new CodeActionKind('');\n    public static readonly QuickFix = CodeActionKind.Empty.append('quickfix');\n    public static readonly Refactor = CodeActionKind.Empty.append('refactor');\n    public static readonly RefactorExtract = CodeActionKind.Refactor.append('extract');\n    public static readonly RefactorInline = CodeActionKind.Refactor.append('inline');\n    public static readonly RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\n    public static readonly Source = CodeActionKind.Empty.append('source');\n    public static readonly SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\n    public static readonly SourceFixAll = CodeActionKind.Source.append('fixAll');\n\n    constructor(\n        public readonly value: string\n    ) { }\n\n    public append(parts: string): CodeActionKind {\n        return new CodeActionKind(this.value ? this.value + CodeActionKind.sep + parts : parts);\n    }\n\n    public contains(other: CodeActionKind): boolean {\n        return this.value === other.value || startsWithIgnoreCase(other.value, this.value + CodeActionKind.sep);\n    }\n\n    public intersects(other: CodeActionKind): boolean {\n        return this.contains(other) || other.contains(this);\n    }\n}\n\nexport enum TextDocumentSaveReason {\n    Manual = 1,\n    AfterDelay = 2,\n    FocusOut = 3\n}\n\nexport class CodeAction {\n    title: string;\n\n    command?: theia.Command;\n\n    edit?: WorkspaceEdit;\n\n    diagnostics?: Diagnostic[];\n\n    kind?: CodeActionKind;\n\n    constructor(title: string, kind?: CodeActionKind) {\n        this.title = title;\n        this.kind = kind;\n    }\n}\n\nexport interface FileOperationOptions {\n    overwrite?: boolean;\n    ignoreIfExists?: boolean;\n    ignoreIfNotExists?: boolean;\n    recursive?: boolean;\n}\nexport interface FileOperation {\n    _type: 1;\n    from: URI | undefined;\n    to: URI | undefined;\n    options?: FileOperationOptions;\n}\n\nexport interface FileTextEdit {\n    _type: 2;\n    uri: URI;\n    edit: TextEdit;\n}\n\nexport class WorkspaceEdit implements theia.WorkspaceEdit {\n\n    private _edits = new Array<FileOperation | FileTextEdit | undefined>();\n\n    renameFile(from: theia.Uri, to: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }): void {\n        this._edits.push({ _type: 1, from, to, options });\n    }\n\n    createFile(uri: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }): void {\n        this._edits.push({ _type: 1, from: undefined, to: uri, options });\n    }\n\n    deleteFile(uri: theia.Uri, options?: { recursive?: boolean, ignoreIfNotExists?: boolean }): void {\n        this._edits.push({ _type: 1, from: uri, to: undefined, options });\n    }\n\n    replace(uri: URI, range: Range, newText: string): void {\n        this._edits.push({ _type: 2, uri, edit: new TextEdit(range, newText) });\n    }\n\n    insert(resource: URI, position: Position, newText: string): void {\n        this.replace(resource, new Range(position, position), newText);\n    }\n\n    delete(resource: URI, range: Range): void {\n        this.replace(resource, range, '');\n    }\n\n    has(uri: URI): boolean {\n        for (const edit of this._edits) {\n            if (edit && edit._type === 2 && edit.uri.toString() === uri.toString()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    set(uri: URI, edits: TextEdit[]): void {\n        if (!edits) {\n            // remove all text edits for `uri`\n            for (let i = 0; i < this._edits.length; i++) {\n                const element = this._edits[i];\n                if (element && element._type === 2 && element.uri.toString() === uri.toString()) {\n                    this._edits[i] = undefined;\n                }\n            }\n            this._edits = this._edits.filter(e => !!e);\n        } else {\n            // append edit to the end\n            for (const edit of edits) {\n                if (edit) {\n                    this._edits.push({ _type: 2, uri, edit });\n                }\n            }\n        }\n    }\n\n    get(uri: URI): TextEdit[] {\n        const res: TextEdit[] = [];\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2 && candidate.uri.toString() === uri.toString()) {\n                res.push(candidate.edit);\n            }\n        }\n        if (res.length === 0) {\n            return undefined!;\n        }\n        return res;\n    }\n\n    entries(): [URI, TextEdit[]][] {\n        const textEdits = new Map<string, [URI, TextEdit[]]>();\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2) {\n                let textEdit = textEdits.get(candidate.uri.toString());\n                if (!textEdit) {\n                    textEdit = [candidate.uri, []];\n                    textEdits.set(candidate.uri.toString(), textEdit);\n                }\n                textEdit[1].push(candidate.edit);\n            }\n        }\n        const result: [URI, TextEdit[]][] = [];\n        textEdits.forEach(v => result.push(v));\n        return result;\n    }\n\n    _allEntries(): ([URI, TextEdit[]] | [URI, URI, FileOperationOptions])[] {\n        const res: ([URI, TextEdit[]] | [URI, URI, FileOperationOptions])[] = [];\n        for (const edit of this._edits) {\n            if (!edit) {\n                continue;\n            }\n            if (edit._type === 1) {\n                res.push([edit.from!, edit.to!, edit.options!]);\n            } else {\n                res.push([edit.uri, [edit.edit]]);\n            }\n        }\n        return res;\n    }\n\n    get size(): number {\n        return this.entries().length;\n    }\n\n    // tslint:disable-next-line:no-any\n    toJSON(): any {\n        return this.entries();\n    }\n}\n\nexport class TreeItem {\n\n    label?: string | theia.TreeItemLabel;\n\n    id?: string;\n\n    iconPath?: string | URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n\n    resourceUri?: URI;\n\n    tooltip?: string | undefined;\n\n    command?: theia.Command;\n\n    contextValue?: string;\n\n    constructor(label: string | theia.TreeItemLabel, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(resourceUri: URI, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(arg1: string | theia.TreeItemLabel | URI, public collapsibleState: theia.TreeItemCollapsibleState = TreeItemCollapsibleState.None) {\n        if (arg1 instanceof URI) {\n            this.resourceUri = arg1;\n        } else {\n            this.label = arg1;\n        }\n    }\n}\n\nexport enum TreeItemCollapsibleState {\n    None = 0,\n    Collapsed = 1,\n    Expanded = 2\n}\n\nexport class SymbolInformation {\n\n    static validate(candidate: SymbolInformation): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n    }\n\n    name: string;\n    location: Location;\n    kind: SymbolKind;\n    containerName: undefined | string;\n    constructor(name: string, kind: SymbolKind, containerName: string, location: Location);\n    constructor(name: string, kind: SymbolKind, range: Range, uri?: URI, containerName?: string);\n    constructor(name: string, kind: SymbolKind, rangeOrContainer: string | Range, locationOrUri?: Location | URI, containerName?: string) {\n        this.name = name;\n        this.kind = kind;\n        this.containerName = containerName;\n\n        if (typeof rangeOrContainer === 'string') {\n            this.containerName = rangeOrContainer;\n        }\n\n        if (locationOrUri instanceof Location) {\n            this.location = locationOrUri;\n        } else if (rangeOrContainer instanceof Range) {\n            this.location = new Location(locationOrUri!, rangeOrContainer);\n        }\n\n        SymbolInformation.validate(this);\n    }\n\n    // tslint:disable-next-line:no-any\n    toJSON(): any {\n        return {\n            name: this.name,\n            kind: SymbolKind[this.kind],\n            location: this.location,\n            containerName: this.containerName\n        };\n    }\n}\n\nexport class DocumentSymbol {\n\n    static validate(candidate: DocumentSymbol): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n        if (!candidate.range.contains(candidate.selectionRange)) {\n            throw new Error('selectionRange must be contained in fullRange');\n        }\n        if (candidate.children) {\n            candidate.children.forEach(DocumentSymbol.validate);\n        }\n    }\n\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    range: Range;\n    selectionRange: Range;\n    children: DocumentSymbol[];\n\n    constructor(name: string, detail: string, kind: SymbolKind, range: Range, selectionRange: Range) {\n        this.name = name;\n        this.detail = detail;\n        this.kind = kind;\n        this.range = range;\n        this.selectionRange = selectionRange;\n        this.children = [];\n\n        DocumentSymbol.validate(this);\n    }\n}\n\nexport enum FileChangeType {\n    Changed = 1,\n    Created = 2,\n    Deleted = 3,\n}\n\nexport enum CommentThreadCollapsibleState {\n    Collapsed = 0,\n    Expanded = 1\n}\n\nexport interface QuickInputButton {\n    readonly iconPath: URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n    readonly tooltip?: string | undefined;\n}\n\nexport class QuickInputButtons {\n    static readonly Back: QuickInputButton = {\n        iconPath: {\n            id: 'Back'\n        },\n        tooltip: 'Back'\n    };\n}\n\nexport enum CommentMode {\n    Editing = 0,\n    Preview = 1\n}\n\nexport class FileSystemError extends Error {\n\n    static FileExists(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'EntryExists', FileSystemError.FileExists);\n    }\n    static FileNotFound(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'EntryNotFound', FileSystemError.FileNotFound);\n    }\n    static FileNotADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'EntryNotADirectory', FileSystemError.FileNotADirectory);\n    }\n    static FileIsADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'EntryIsADirectory', FileSystemError.FileIsADirectory);\n    }\n    static NoPermissions(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'NoPermissions', FileSystemError.NoPermissions);\n    }\n    static Unavailable(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, 'Unavailable', FileSystemError.Unavailable);\n    }\n\n    constructor(uriOrMessage?: string | URI, code?: string, terminator?: Function) {\n        super(URI.isUri(uriOrMessage) ? uriOrMessage.toString(true) : uriOrMessage);\n        this.name = code ? `${code} (FileSystemError)` : 'FileSystemError';\n\n        if (typeof Object.setPrototypeOf === 'function') {\n            Object.setPrototypeOf(this, FileSystemError.prototype);\n        }\n\n        if (typeof Error.captureStackTrace === 'function' && typeof terminator === 'function') {\n            Error.captureStackTrace(this, terminator);\n        }\n    }\n}\n\nexport enum FileType {\n    Unknown = 0,\n    File = 1,\n    Directory = 2,\n    SymbolicLink = 64\n}\n\nexport class ProgressOptions {\n    /**\n     * The location at which progress should show.\n     */\n    location: ProgressLocation;\n    /**\n     * A human-readable string which will be used to describe the\n     * operation.\n     */\n    title?: string;\n    /**\n     * Controls if a cancel button should show to allow the user to\n     * cancel the long running operation.  Note that currently only\n     * `ProgressLocation.Notification` is supporting to show a cancel\n     * button.\n     */\n    cancellable?: boolean;\n    constructor(location: ProgressLocation, title?: string, cancellable?: boolean) {\n        this.location = location;\n    }\n}\nexport class Progress<T> {\n    /**\n     * Report a progress update.\n     * @param value A progress item, like a message and/or an\n     * report on how much work finished\n     */\n    report(value: T): void {\n    }\n}\nexport enum ProgressLocation {\n    /**\n     * Show progress for the source control viewlet, as overlay for the icon and as progress bar\n     * inside the viewlet (when visible). Neither supports cancellation nor discrete progress.\n     */\n    SourceControl = 1,\n    /**\n     * Show progress in the status bar of the editor. Neither supports cancellation nor discrete progress.\n     */\n    Window = 10,\n    /**\n     * Show progress as notification with an optional cancel button. Supports to show infinite and discrete progress.\n     */\n    Notification = 15\n}\n\nexport class ProcessExecution {\n    private executionProcess: string;\n    private arguments: string[];\n    private executionOptions: theia.ProcessExecutionOptions | undefined;\n\n    constructor(process: string, options?: theia.ProcessExecutionOptions);\n    constructor(process: string, args: string[], options?: theia.ProcessExecutionOptions);\n    constructor(process: string, varg1?: string[] | theia.ProcessExecutionOptions, varg2?: theia.ProcessExecutionOptions) {\n        if (typeof process !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = process;\n        if (varg1 !== undefined) {\n            if (Array.isArray(varg1)) {\n                this.arguments = varg1;\n                this.executionOptions = varg2;\n            } else {\n                this.executionOptions = varg1;\n            }\n        }\n        if (this.arguments === undefined) {\n            this.arguments = [];\n        }\n    }\n\n    get process(): string {\n        return this.executionProcess;\n    }\n\n    set process(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = value;\n    }\n\n    get args(): string[] {\n        return this.arguments;\n    }\n\n    set args(value: string[]) {\n        if (!Array.isArray(value)) {\n            value = [];\n        }\n        this.arguments = value;\n    }\n\n    get options(): theia.ProcessExecutionOptions | undefined {\n        return this.executionOptions;\n    }\n\n    set options(value: theia.ProcessExecutionOptions | undefined) {\n        this.executionOptions = value;\n    }\n\n    public computeId(): string {\n        const hash = crypto.createHash('md5');\n        hash.update('process');\n        if (this.executionProcess !== undefined) {\n            hash.update(this.executionProcess);\n        }\n        if (this.arguments && this.arguments.length > 0) {\n            for (const arg of this.arguments) {\n                hash.update(arg);\n            }\n        }\n        return hash.digest('hex');\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution): boolean {\n        const candidate = value as ProcessExecution;\n        return candidate && !!candidate.process;\n    }\n}\n\nexport enum ShellQuoting {\n    Escape = 1,\n    Strong = 2,\n    Weak = 3\n}\n\nexport enum TaskPanelKind {\n    Shared = 1,\n    Dedicated = 2,\n    New = 3\n}\n\nexport enum TaskRevealKind {\n    Always = 1,\n    Silent = 2,\n    Never = 3\n}\n\nexport class ShellExecution {\n    private shellCommandLine: string;\n    private shellCommand: string | theia.ShellQuotedString;\n    private arguments: (string | theia.ShellQuotedString)[];\n    private shellOptions: theia.ShellExecutionOptions | undefined;\n\n    constructor(commandLine: string, options?: theia.ShellExecutionOptions);\n    constructor(command: string | theia.ShellQuotedString, args: (string | theia.ShellQuotedString)[], options?: theia.ShellExecutionOptions);\n\n    constructor(arg0: string | theia.ShellQuotedString, arg1?: theia.ShellExecutionOptions | (string | theia.ShellQuotedString)[], arg2?: theia.ShellExecutionOptions) {\n        if (Array.isArray(arg1) || typeof arg1 === 'string') {\n            if (!arg0) {\n                throw illegalArgument('command can\\'t be undefined or null');\n            }\n            if (typeof arg0 !== 'string' && typeof arg0.value !== 'string') {\n                throw illegalArgument('command');\n            }\n            this.shellCommand = arg0;\n            this.arguments = arg1 as (string | theia.ShellQuotedString)[];\n            this.shellOptions = arg2;\n        } else {\n            if (typeof arg0 !== 'string') {\n                throw illegalArgument('commandLine');\n            }\n            this.shellCommandLine = arg0;\n            this.shellOptions = arg1;\n        }\n    }\n\n    get commandLine(): string {\n        return this.shellCommandLine;\n    }\n\n    set commandLine(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('commandLine');\n        }\n        this.shellCommandLine = value;\n    }\n\n    get command(): string | theia.ShellQuotedString {\n        return this.shellCommand;\n    }\n\n    set command(value: string | theia.ShellQuotedString) {\n        if (typeof value !== 'string' && typeof value.value !== 'string') {\n            throw illegalArgument('command');\n        }\n        this.shellCommand = value;\n    }\n\n    get args(): (string | theia.ShellQuotedString)[] {\n        return this.arguments;\n    }\n\n    set args(value: (string | theia.ShellQuotedString)[]) {\n        this.arguments = value || [];\n    }\n\n    get options(): theia.ShellExecutionOptions | undefined {\n        return this.shellOptions;\n    }\n\n    set options(value: theia.ShellExecutionOptions | undefined) {\n        this.shellOptions = value;\n    }\n\n    public computeId(): string {\n        const hash = crypto.createHash('md5');\n        hash.update('shell');\n        if (this.shellCommandLine !== undefined) {\n            hash.update(this.shellCommandLine);\n        }\n        if (this.shellCommand !== undefined) {\n            hash.update(typeof this.shellCommand === 'string' ? this.shellCommand : this.shellCommand.value);\n        }\n        if (this.arguments && this.arguments.length > 0) {\n            for (const arg of this.arguments) {\n                hash.update(typeof arg === 'string' ? arg : arg.value);\n            }\n        }\n        return hash.digest('hex');\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution): boolean {\n        const candidate = value as ShellExecution;\n        return candidate && (!!candidate.commandLine || !!candidate.command);\n    }\n}\n\nexport class TaskGroup {\n    private groupId: string;\n\n    public static Clean: TaskGroup = new TaskGroup('clean', 'Clean');\n    public static Build: TaskGroup = new TaskGroup('build', 'Build');\n    public static Rebuild: TaskGroup = new TaskGroup('rebuild', 'Rebuild');\n    public static Test: TaskGroup = new TaskGroup('test', 'Test');\n\n    public static from(value: string): TaskGroup | undefined {\n        switch (value) {\n            case 'clean':\n                return TaskGroup.Clean;\n            case 'build':\n                return TaskGroup.Build;\n            case 'rebuild':\n                return TaskGroup.Rebuild;\n            case 'test':\n                return TaskGroup.Test;\n            default:\n                return undefined;\n        }\n    }\n\n    constructor(id: string, label: string) {\n        if (typeof id !== 'string') {\n            throw illegalArgument('id');\n        }\n        if (typeof label !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.groupId = id;\n    }\n\n    get id(): string {\n        return this.groupId;\n    }\n}\n\nexport enum TaskScope {\n    Global = 1,\n    Workspace = 2\n}\n\nexport class Task {\n    private taskDefinition: theia.TaskDefinition;\n    private taskScope: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined;\n    private taskName: string;\n    private taskExecution: ProcessExecution | ShellExecution | undefined;\n    private taskProblemMatchers: string[];\n    private hasTaskProblemMatchers: boolean;\n    private isTaskBackground: boolean;\n    private taskSource: string;\n    private taskGroup: TaskGroup | undefined;\n    private taskPresentationOptions: theia.TaskPresentationOptions | undefined;\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution,\n        problemMatchers?: string | string[]\n    );\n\n    // Deprecated constructor used by Jake vscode built-in\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution,\n        problemMatchers?: string | string[],\n    );\n\n    // tslint:disable-next-line:no-any\n    constructor(...args: any[]) {\n        let taskDefinition: theia.TaskDefinition;\n        let scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace | undefined;\n        let name: string;\n        let source: string;\n        let execution: ProcessExecution | ShellExecution | undefined;\n        let problemMatchers: string | string[] | undefined;\n\n        if (typeof args[1] === 'string') {\n            [\n                taskDefinition,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        } else {\n            [\n                taskDefinition,\n                scope,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        }\n\n        this.definition = taskDefinition;\n        this.scope = scope;\n        this.name = name;\n        this.source = source;\n        this.execution = execution;\n\n        if (typeof problemMatchers === 'string') {\n            this.taskProblemMatchers = [problemMatchers];\n            this.hasTaskProblemMatchers = true;\n        } else if (Array.isArray(problemMatchers)) {\n            this.taskProblemMatchers = problemMatchers;\n            this.hasTaskProblemMatchers = true;\n        } else {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n        }\n        this.isTaskBackground = false;\n    }\n\n    get definition(): theia.TaskDefinition {\n        return this.taskDefinition;\n    }\n\n    set definition(value: theia.TaskDefinition) {\n        if (value === undefined || value === null) {\n            throw illegalArgument('Kind can\\'t be undefined or null');\n        }\n        this.taskDefinition = value;\n    }\n\n    get scope(): theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined {\n        return this.taskScope;\n    }\n\n    set scope(value: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskScope = value;\n    }\n\n    get name(): string {\n        return this.taskName;\n    }\n\n    set name(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.taskName = value;\n    }\n\n    get execution(): ProcessExecution | ShellExecution | undefined {\n        return this.taskExecution;\n    }\n\n    set execution(value: ProcessExecution | ShellExecution | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskExecution = value;\n        this.updateDefinitionBasedOnExecution();\n    }\n\n    get problemMatchers(): string[] {\n        return this.taskProblemMatchers;\n    }\n\n    set problemMatchers(value: string[]) {\n        if (!Array.isArray(value)) {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n            return;\n        }\n        this.taskProblemMatchers = value;\n        this.hasTaskProblemMatchers = true;\n    }\n\n    get hasProblemMatchers(): boolean {\n        return this.hasTaskProblemMatchers;\n    }\n\n    get isBackground(): boolean {\n        return this.isTaskBackground;\n    }\n\n    set isBackground(value: boolean) {\n        if (value !== true && value !== false) {\n            value = false;\n        }\n        this.isTaskBackground = value;\n    }\n\n    get source(): string {\n        return this.taskSource;\n    }\n\n    set source(value: string) {\n        if (typeof value !== 'string' || value.length === 0) {\n            throw illegalArgument('source must be a string of length > 0');\n        }\n        this.taskSource = value;\n    }\n\n    get group(): TaskGroup | undefined {\n        return this.taskGroup;\n    }\n\n    set group(value: TaskGroup | undefined) {\n        if (value === undefined || value === null) {\n            this.taskGroup = undefined;\n            return;\n        }\n        this.taskGroup = value;\n    }\n\n    get presentationOptions(): theia.TaskPresentationOptions | undefined {\n        return this.taskPresentationOptions;\n    }\n\n    set presentationOptions(value: theia.TaskPresentationOptions | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskPresentationOptions = value;\n    }\n\n    private updateDefinitionBasedOnExecution(): void {\n        if (this.taskExecution instanceof ProcessExecution) {\n            Object.assign(this.taskDefinition, {\n                type: 'process',\n                id: this.taskExecution.computeId(),\n                taskType: this.taskDefinition!.type\n            });\n        } else if (this.taskExecution instanceof ShellExecution) {\n            Object.assign(this.taskDefinition, {\n                type: 'shell',\n                id: this.taskExecution.computeId(),\n                taskType: this.taskDefinition!.type\n            });\n        }\n    }\n}\n\nexport class DebugAdapterExecutable {\n    /**\n     * The command or path of the debug adapter executable.\n     * A command must be either an absolute path of an executable or the name of an command to be looked up via the PATH environment variable.\n     * The special value 'node' will be mapped to VS Code's built-in Node.js runtime.\n     */\n    readonly command: string;\n\n    /**\n     * The arguments passed to the debug adapter executable. Defaults to an empty array.\n     */\n    readonly args?: string[];\n\n    /**\n     * Optional options to be used when the debug adapter is started.\n     * Defaults to undefined.\n     */\n    readonly options?: theia.DebugAdapterExecutableOptions;\n\n    /**\n     * Creates a description for a debug adapter based on an executable program.\n     *\n     * @param command The command or executable path that implements the debug adapter.\n     * @param args Optional arguments to be passed to the command or executable.\n     * @param options Optional options to be used when starting the command or executable.\n     */\n    constructor(command: string, args?: string[], options?: theia.DebugAdapterExecutableOptions) {\n        this.command = command;\n        this.args = args;\n        this.options = options;\n    }\n}\n\n/**\n * Represents a debug adapter running as a socket based server.\n */\nexport class DebugAdapterServer {\n\n    /**\n     * The port.\n     */\n    readonly port: number;\n\n    /**\n     * The host.\n     */\n    readonly host?: string;\n\n    /**\n     * Create a description for a debug adapter running as a socket based server.\n     */\n    constructor(port: number, host?: string) {\n        this.port = port;\n        this.host = host;\n    }\n}\n\n/**\n * The base class of all breakpoint types.\n */\nexport class Breakpoint {\n    /**\n     * Is breakpoint enabled.\n     */\n    enabled: boolean;\n    /**\n     * An optional expression for conditional breakpoints.\n     */\n    condition?: string;\n    /**\n     * An optional expression that controls how many hits of the breakpoint are ignored.\n     */\n    hitCondition?: string;\n    /**\n     * An optional message that gets logged when this breakpoint is hit. Embedded expressions within {} are interpolated by the debug adapter.\n     */\n    logMessage?: string;\n\n    protected constructor(enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        this.enabled = enabled || false;\n        this.condition = condition;\n        this.hitCondition = hitCondition;\n        this.logMessage = logMessage;\n    }\n\n    private _id: string | undefined;\n    /**\n     * The unique ID of the breakpoint.\n     */\n    get id(): string {\n        if (!this._id) {\n            this._id = UUID.uuid4();\n        }\n        return this._id;\n    }\n\n}\n\n/**\n * A breakpoint specified by a source location.\n */\nexport class SourceBreakpoint extends Breakpoint {\n    /**\n     * The source and line position of this breakpoint.\n     */\n    location: Location;\n\n    /**\n     * Create a new breakpoint for a source location.\n     */\n    constructor(location: Location, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        super(enabled, condition, hitCondition, logMessage);\n        this.location = location;\n    }\n}\n\n/**\n * A breakpoint specified by a function name.\n */\nexport class FunctionBreakpoint extends Breakpoint {\n    /**\n     * The name of the function to which this breakpoint is attached.\n     */\n    functionName: string;\n\n    /**\n     * Create a new function breakpoint.\n     */\n    constructor(functionName: string, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string) {\n        super(enabled, condition, hitCondition, logMessage);\n        this.functionName = functionName;\n    }\n}\n\nexport class Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n\n    constructor(red: number, green: number, blue: number, alpha: number) {\n        this.red = red;\n        this.green = green;\n        this.blue = blue;\n        this.alpha = alpha;\n    }\n}\n\nexport class ColorInformation {\n    range: Range;\n    color: Color;\n\n    constructor(range: Range, color: Color) {\n        if (color && !(color instanceof Color)) {\n            throw illegalArgument('color');\n        }\n        if (!Range.isRange(range)) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.color = color;\n    }\n}\n\nexport class ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n\n    constructor(label: string) {\n        if (!label || typeof label !== 'string') {\n            throw illegalArgument('label');\n        }\n        this.label = label;\n    }\n}\n\nexport enum ColorFormat {\n    RGB = 0,\n    HEX = 1,\n    HSL = 2\n}\n\nexport class FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n\n    constructor(start: number, end: number, kind?: FoldingRangeKind) {\n        this.start = start;\n        this.end = end;\n        this.kind = kind;\n    }\n}\n\nexport enum FoldingRangeKind {\n    Comment = 1,\n    Imports = 2,\n    Region = 3\n}\n\n/**\n * Enumeration of the supported operating systems.\n */\nexport enum OperatingSystem {\n    Windows = 'Windows',\n    Linux = 'Linux',\n    OSX = 'OSX'\n}\n\n/** The areas of the application shell where webview panel can reside. */\nexport enum WebviewPanelTargetArea {\n    Main = 'main',\n    Left = 'left',\n    Right = 'right',\n    Bottom = 'bottom'\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* tslint:disable:no-any */\n\nimport { createProxyIdentifier, ProxyIdentifier, RPCProtocol } from './rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { PluginLifecycle, PluginModel, PluginMetadata, PluginPackage, IconUrl } from './plugin-protocol';\nimport { QueryParameters } from './env';\nimport { TextEditorCursorStyle } from './editor-options';\nimport {\n    TextEditorLineNumbersStyle,\n    EndOfLine,\n    OverviewRulerLane,\n    IndentAction,\n    FileOperationOptions,\n    QuickInputButton\n} from '../plugin/types-impl';\nimport { UriComponents } from './uri-components';\nimport { ConfigurationTarget } from '../plugin/types-impl';\nimport {\n    SerializedDocumentFilter,\n    CompletionContext,\n    MarkdownString,\n    Range,\n    Completion,\n    CompletionResultDto,\n    MarkerData,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    FormattingOptions,\n    Definition,\n    DefinitionLink,\n    DocumentLink,\n    CodeLensSymbol,\n    Command,\n    TextEdit,\n    DocumentSymbol,\n    ReferenceContext,\n    FileWatcherSubscriberOptions,\n    FileChangeEvent,\n    TextDocumentShowOptions,\n    WorkspaceRootsChangeEvent,\n    Location,\n    Breakpoint,\n    ColorPresentation,\n    RenameLocation,\n    FileMoveEvent,\n    FileWillMoveEvent,\n    SignatureHelpContext,\n    CodeAction,\n    CodeActionContext,\n    FoldingContext,\n    FoldingRange\n} from './plugin-api-rpc-model';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { SymbolInformation } from 'vscode-languageserver-types';\nimport { ArgumentProcessor } from '../plugin/command-registry';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport { QuickOpenItem, QuickOpenItemOptions } from '@theia/core/lib/common/quick-open-model';\nimport { QuickTitleButton } from '@theia/core/lib/common/quick-open-model';\n\nexport interface PreferenceData {\n    [scope: number]: any;\n}\n\nexport interface Plugin {\n    pluginPath: string;\n    pluginFolder: string;\n    model: PluginModel;\n    rawModel: PluginPackage;\n    lifecycle: PluginLifecycle;\n}\n\nexport interface ConfigStorage {\n    hostLogPath: string;\n    hostStoragePath?: string;\n    hostGlobalStoragePath?: string;\n}\n\nexport interface EnvInit {\n    queryParams: QueryParameters;\n    language: string;\n    shell: string;\n}\n\nexport interface PluginAPI {\n\n}\n\nexport interface PluginManager {\n    getAllPlugins(): Plugin[];\n    getPluginById(pluginId: string): Plugin | undefined;\n    getPluginExport(pluginId: string): PluginAPI | undefined;\n    isRunning(pluginId: string): boolean;\n    isActive(pluginId: string): boolean;\n    activatePlugin(pluginId: string): PromiseLike<void>;\n    onDidChange: theia.Event<void>;\n}\n\nexport interface PluginAPIFactory {\n    (plugin: Plugin): typeof theia;\n}\n\nexport const emptyPlugin: Plugin = {\n    lifecycle: {\n        startMethod: 'empty',\n        stopMethod: 'empty'\n    },\n    model: {\n        id: 'emptyPlugin',\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engine: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty',\n        entryPoint: {\n\n        }\n    },\n    pluginPath: 'empty',\n    pluginFolder: 'empty',\n    rawModel: {\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engines: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty'\n    }\n};\n\nexport interface PluginManagerInitializeParams {\n    preferences: PreferenceData\n    globalState: KeysToKeysToAnyValue\n    workspaceState: KeysToKeysToAnyValue\n    env: EnvInit\n    extApi?: ExtPluginApi[]\n    webview: WebviewInitData\n}\n\nexport interface PluginManagerStartParams {\n    plugins: PluginMetadata[]\n    configStorage: ConfigStorage\n    activationEvents: string[]\n}\n\nexport interface PluginManagerExt {\n\n    /** initialize the manager, should be called only once */\n    $init(params: PluginManagerInitializeParams): Promise<void>;\n\n    /** load and activate plugins */\n    $start(params: PluginManagerStartParams): Promise<void>;\n\n    /** deactivate the plugin */\n    $stop(pluginId: string): Promise<void>;\n\n    /** deactivate all plugins */\n    $stop(): Promise<void>;\n\n    $updateStoragePath(path: string | undefined): Promise<void>;\n\n    $activateByEvent(event: string): Promise<void>;\n}\n\nexport interface CommandRegistryMain {\n    $registerCommand(command: theia.CommandDescription): void;\n    $unregisterCommand(id: string): void;\n\n    $registerHandler(id: string): void;\n    $unregisterHandler(id: string): void;\n\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined>;\n    $getCommands(): PromiseLike<string[]>;\n    $getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined>;\n}\n\nexport interface CommandRegistryExt {\n    $executeCommand<T>(id: string, ...ars: any[]): PromiseLike<T | undefined>;\n    registerArgumentProcessor(processor: ArgumentProcessor): void;\n}\n\nexport interface TerminalServiceExt {\n    $terminalCreated(id: string, name: string): void;\n    $terminalNameChanged(id: string, name: string): void;\n    $terminalOpened(id: string, processId: number): void;\n    $terminalClosed(id: string): void;\n    $currentTerminalChanged(id: string | undefined): void;\n}\n\nexport interface OutputChannelRegistryExt {\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel\n}\n\nexport interface ConnectionMain {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>;\n    $sendMessage(id: string, message: string): void;\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>;\n}\n\nexport interface ConnectionExt {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>\n    $sendMessage(id: string, message: string): void;\n}\n\nexport interface TerminalServiceMain {\n    /**\n     * Create new Terminal with Terminal options.\n     * @param options - object with parameters to create new terminal.\n     */\n    $createTerminal(id: string, options: theia.TerminalOptions): Promise<string>;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendText(id: string, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $show(id: string, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal id.\n     */\n    $hide(id: string): void;\n\n    /**\n     * Distroy terminal.\n     * @param id - terminal id.\n     */\n    $dispose(id: string): void;\n}\n\nexport interface AutoFocus {\n    autoFocusFirstEntry?: boolean;\n    // TODO\n}\n\nexport interface PickOptions {\n    placeHolder?: string;\n    autoFocus?: AutoFocus;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    ignoreFocusLost?: boolean;\n    quickNavigationConfiguration?: {}; // TODO\n    contextKey?: string;\n    canSelectMany?: boolean;\n}\n\nexport interface PickOpenItem {\n    handle: number;\n    id?: string;\n    label: string;\n    description?: string;\n    detail?: string;\n    picked?: boolean;\n    groupLabel?: string;\n    showBorder?: boolean;\n}\n\nexport enum MainMessageType {\n    Error,\n    Warning,\n    Info\n}\n\nexport interface MainMessageOptions {\n    modal?: boolean\n    onCloseActionHandle?: number\n}\n\nexport interface MessageRegistryMain {\n    $showMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: string[]): PromiseLike<number | undefined>;\n}\n\nexport interface StatusBarMessageRegistryMain {\n    $setMessage(id: string,\n        text: string | undefined,\n        priority: number,\n        alignment: theia.StatusBarAlignment,\n        color: string | undefined,\n        tooltip: string | undefined,\n        command: string | undefined): PromiseLike<void>;\n    $update(id: string, message: string): void;\n    $dispose(id: string): void;\n}\n\nexport interface QuickOpenExt {\n    $onItemSelected(handle: number): void;\n    $validateInput(input: string): PromiseLike<string | undefined> | undefined;\n\n    $acceptOnDidAccept(quickInputNumber: number): Promise<void>;\n    $acceptDidChangeValue(quickInputNumber: number, changedValue: string): Promise<void>;\n    $acceptOnDidHide(quickInputNumber: number): Promise<void>;\n    $acceptOnDidTriggerButton(quickInputNumber: number, btn: QuickTitleButton): Promise<void>;\n    $acceptDidChangeActive(quickInputNumber: number, changedItems: QuickOpenItem<QuickOpenItemOptions>[]): Promise<void>;\n    $acceptDidChangeSelection(quickInputNumber: number, selection: string): Promise<void>;\n}\n\n/**\n * Options to configure the behaviour of a file open dialog.\n */\nexport interface OpenDialogOptionsMain {\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the open button.\n     */\n    openLabel?: string;\n\n    /**\n     * Allow to select files, defaults to `true`.\n     */\n    canSelectFiles?: boolean;\n\n    /**\n     * Allow to select folders, defaults to `false`.\n     */\n    canSelectFolders?: boolean;\n\n    /**\n     * Allow to select many files or folders.\n     */\n    canSelectMany?: boolean;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     * \t'Images': ['png', 'jpg']\n     * \t'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file save dialog.\n */\nexport interface SaveDialogOptionsMain {\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the save button.\n     */\n    saveLabel?: string;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     * \t'Images': ['png', 'jpg']\n     * \t'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file upload dialog.\n */\nexport interface UploadDialogOptionsMain {\n    /**\n     * The resource, where files should be uploaded.\n     */\n    defaultUri?: string;\n}\n\nexport interface FileUploadResultMain {\n    uploaded: string[]\n}\n\n/**\n * Options to configure the behaviour of the [workspace folder](#WorkspaceFolder) pick UI.\n */\nexport interface WorkspaceFolderPickOptionsMain {\n    /**\n     * An optional string to show as place holder in the input box to guide the user what to pick on.\n     */\n    placeHolder?: string;\n\n    /**\n     * Set to `true` to keep the picker open when focus moves to another part of the editor or to another window.\n     */\n    ignoreFocusOut?: boolean;\n}\n\nexport interface QuickInputTitleButtonHandle extends QuickTitleButton {\n    index: number; // index of where they are in buttons array if QuickInputButton or -1 if QuickInputButtons.Back\n}\n\nexport interface TransferQuickInput {\n    quickInputIndex: number;\n    title: string | undefined;\n    step: number | undefined;\n    totalSteps: number | undefined;\n    enabled: boolean;\n    busy: boolean;\n    ignoreFocusOut: boolean;\n}\n\nexport interface TransferInputBox extends TransferQuickInput {\n    value: string;\n    placeholder: string | undefined;\n    password: boolean;\n    buttons: ReadonlyArray<QuickInputButton>;\n    prompt: string | undefined;\n    validationMessage: string | undefined;\n    validateInput(value: string): MaybePromise<string | undefined>;\n}\n\nexport interface TransferQuickPick<T extends theia.QuickPickItem> extends TransferQuickInput {\n    value: string;\n    placeholder: string | undefined;\n    buttons: ReadonlyArray<QuickInputButton>;\n    items: PickOpenItem[];\n    canSelectMany: boolean;\n    matchOnDescription: boolean;\n    matchOnDetail: boolean;\n    activeItems: ReadonlyArray<T>;\n    selectedItems: ReadonlyArray<T>;\n}\n\nexport interface QuickOpenMain {\n    $show(options: PickOptions): Promise<number | number[]>;\n    $setItems(items: PickOpenItem[]): Promise<any>;\n    $setError(error: Error): Promise<any>;\n    $input(options: theia.InputBoxOptions, validateInput: boolean): Promise<string | undefined>;\n    $hide(): void;\n    $showInputBox(inputBox: TransferInputBox, validateInput: boolean): void;\n    $showCustomQuickPick<T extends theia.QuickPickItem>(inputBox: TransferQuickPick<T>): void;\n    $setQuickInputChanged(changed: object): void;\n    $refreshQuickInput(): void;\n}\n\nexport interface WorkspaceMain {\n    $pickWorkspaceFolder(options: WorkspaceFolderPickOptionsMain): Promise<theia.WorkspaceFolder | undefined>;\n    $startFileSearch(includePattern: string, includeFolder: string | undefined, excludePatternOrDisregardExcludes: string | false,\n        maxResults: number | undefined, token: theia.CancellationToken): PromiseLike<UriComponents[]>;\n    $registerTextDocumentContentProvider(scheme: string): Promise<void>;\n    $unregisterTextDocumentContentProvider(scheme: string): void;\n    $onTextDocumentContentChange(uri: string, content: string): void;\n    $registerFileSystemWatcher(options: FileWatcherSubscriberOptions): Promise<string>;\n    $unregisterFileSystemWatcher(watcherId: string): Promise<void>;\n    $updateWorkspaceFolders(start: number, deleteCount?: number, ...rootsToAdd: string[]): Promise<void>;\n}\n\nexport interface WorkspaceExt {\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void;\n    $provideTextDocumentContent(uri: string): Promise<string | undefined>;\n    $fileChanged(event: FileChangeEvent): void;\n    $onFileRename(event: FileMoveEvent): void;\n    $onWillRename(event: FileWillMoveEvent): Promise<any>;\n}\n\nexport interface DialogsMain {\n    $showOpenDialog(options: OpenDialogOptionsMain): Promise<string[] | undefined>;\n    $showSaveDialog(options: SaveDialogOptionsMain): Promise<string | undefined>;\n    $showUploadDialog(options: UploadDialogOptionsMain): Promise<string[] | undefined>;\n}\n\nexport interface TreeViewsMain {\n    $registerTreeDataProvider(treeViewId: string): void;\n    $unregisterTreeDataProvider(treeViewId: string): void;\n    $refresh(treeViewId: string): void;\n    $reveal(treeViewId: string, treeItemId: string): Promise<any>;\n}\n\nexport interface TreeViewsExt {\n    $getChildren(treeViewId: string, treeItemId: string | undefined): Promise<TreeViewItem[] | undefined>;\n    $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any>;\n    $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void>;\n    $setVisible(treeViewId: string, visible: boolean): Promise<void>;\n}\n\nexport interface TreeViewItem {\n\n    id: string;\n\n    label: string;\n\n    description?: string;\n\n    /* font-awesome icon for compatibility */\n    icon?: string;\n    iconUrl?: IconUrl;\n\n    themeIconId?: 'folder' | 'file';\n\n    resourceUri?: UriComponents;\n\n    tooltip?: string;\n\n    collapsibleState?: TreeViewItemCollapsibleState;\n\n    contextValue?: string;\n\n    command?: Command;\n\n}\n\nexport interface TreeViewSelection {\n    treeViewId: string\n    treeItemId: string\n}\nexport namespace TreeViewSelection {\n    export function is(arg: Object | any): arg is TreeViewSelection {\n        return !!arg && typeof arg === 'object' && 'treeViewId' in arg && 'treeItemId' in arg;\n    }\n}\n\n/**\n * Collapsible state of the tree item\n */\nexport enum TreeViewItemCollapsibleState {\n    /**\n     * Determines an item can be neither collapsed nor expanded. Implies it has no children.\n     */\n    None = 0,\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 1,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 2\n}\n\nexport interface WindowMain {\n    $openUri(uri: UriComponents): Promise<boolean>;\n    $asExternalUri(uri: UriComponents): Promise<UriComponents>;\n}\n\nexport interface WindowStateExt {\n    $onWindowStateChanged(focus: boolean): void;\n}\n\nexport interface NotificationExt {\n    withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): PromiseLike<R>;\n}\n\nexport interface ScmCommandArg {\n    sourceControlHandle: number\n    resourceGroupHandle?: number\n    resourceStateHandle?: number\n}\nexport namespace ScmCommandArg {\n    export function is(arg: Object | undefined): arg is ScmCommandArg {\n        return !!arg && typeof arg === 'object' && 'sourceControlHandle' in arg;\n    }\n}\n\nexport interface ScmExt {\n    createSourceControl(plugin: Plugin, id: string, label: string, rootUri?: theia.Uri): theia.SourceControl;\n    getLastInputBox(plugin: Plugin): theia.SourceControlInputBox | undefined;\n    $updateInputBox(sourceControlHandle: number, message: string): Promise<void>;\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, resourceHandle: number): Promise<void>;\n    $provideOriginalResource(sourceControlHandle: number, uri: string, token: CancellationToken): Promise<UriComponents | undefined>;\n    $setSourceControlSelection(sourceControlHandle: number, selected: boolean): Promise<void>;\n}\n\nexport interface DecorationsExt {\n    registerDecorationProvider(provider: theia.DecorationProvider): theia.Disposable\n    $provideDecoration(id: number, uri: string): Promise<DecorationData | undefined>\n}\n\nexport interface DecorationsMain {\n    $registerDecorationProvider(id: number, provider: DecorationProvider): Promise<number>;\n    $fireDidChangeDecorations(id: number, arg: undefined | string | string[]): Promise<void>;\n    $dispose(id: number): Promise<void>;\n}\n\nexport interface DecorationData {\n    letter?: string;\n    title?: string;\n    color?: ThemeColor;\n    priority?: number;\n    bubble?: boolean;\n    source?: string;\n}\n\nexport interface ScmMain {\n    $registerSourceControl(sourceControlHandle: number, id: string, label: string, rootUri?: string): Promise<void>\n    $updateSourceControl(sourceControlHandle: number, features: SourceControlProviderFeatures): Promise<void>;\n    $unregisterSourceControl(sourceControlHandle: number): Promise<void>;\n\n    $registerGroup(sourceControlHandle: number, groupHandle: number, id: string, label: string): Promise<void>;\n    $updateGroup(sourceControlHandle: number, groupHandle: number, features: SourceControlGroupFeatures): Promise<void>;\n    $updateGroupLabel(sourceControlHandle: number, groupHandle: number, label: string): Promise<void>;\n    $updateResourceState(sourceControlHandle: number, groupHandle: number, resources: SourceControlResourceState[]): Promise<void>;\n    $unregisterGroup(sourceControlHandle: number, groupHandle: number): Promise<void>;\n\n    $setInputBoxValue(sourceControlHandle: number, value: string): Promise<void>;\n    $setInputBoxPlaceholder(sourceControlHandle: number, placeholder: string): Promise<void>;\n}\n\nexport interface SourceControlProviderFeatures {\n    hasQuickDiffProvider?: boolean;\n    count?: number;\n    commitTemplate?: string;\n    acceptInputCommand?: Command;\n    statusBarCommands?: Command[];\n}\n\nexport interface SourceControlGroupFeatures {\n    hideWhenEmpty: boolean | undefined;\n}\n\nexport interface SourceControlResourceState {\n    readonly handle: number\n    /**\n     * The uri of the underlying resource inside the workspace.\n     */\n    readonly resourceUri: string;\n\n    /**\n     * The command which should be run when the resource\n     * state is open in the Source Control viewlet.\n     */\n    readonly command?: Command;\n\n    /**\n     * The decorations for this source control\n     * resource state.\n     */\n    readonly decorations?: SourceControlResourceDecorations;\n\n    readonly letter?: string;\n\n    readonly colorId?: string\n}\n\n/**\n * The decorations for a [source control resource state](#SourceControlResourceState).\n * Can be independently specified for light and dark themes.\n */\nexport interface SourceControlResourceDecorations {\n\n    /**\n     * Whether the source control resource state should be striked-through in the UI.\n     */\n    readonly strikeThrough?: boolean;\n\n    /**\n     * Whether the source control resource state should be faded in the UI.\n     */\n    readonly faded?: boolean;\n\n    /**\n     * The title for a specific source control resource state.\n     */\n    readonly tooltip?: string;\n\n    /**\n     * The icon path for a specific source control resource state.\n     */\n    readonly iconPath?: string;\n}\n\nexport interface DecorationProvider {\n    provideDecoration(uri: string): Promise<DecorationData | undefined>;\n}\n\nexport interface NotificationMain {\n    $startProgress(options: NotificationMain.StartProgressOptions): Promise<string>;\n    $stopProgress(id: string): void;\n    $updateProgress(id: string, report: NotificationMain.ProgressReport): void;\n}\nexport namespace NotificationMain {\n    export interface StartProgressOptions {\n        title: string;\n        location?: string;\n        cancellable?: boolean;\n    }\n    export interface ProgressReport {\n        message?: string;\n        increment?: number;\n        total?: number;\n    }\n}\n\nexport enum EditorPosition {\n    ONE = 0,\n    TWO = 1,\n    THREE = 2,\n    FOUR = 3,\n    FIVE = 4,\n    SIX = 5,\n    SEVEN = 6,\n    EIGHT = 7,\n    NINE = 8\n}\n\nexport interface Position {\n    readonly lineNumber: number;\n    readonly column: number;\n}\n\nexport interface Selection {\n    /**\n     * The line number on which the selection has started.\n     */\n    readonly selectionStartLineNumber: number;\n    /**\n     * The column on `selectionStartLineNumber` where the selection has started.\n     */\n    readonly selectionStartColumn: number;\n    /**\n     * The line number on which the selection has ended.\n     */\n    readonly positionLineNumber: number;\n    /**\n     * The column on `positionLineNumber` where the selection has ended.\n     */\n    readonly positionColumn: number;\n}\n\nexport interface TextEditorConfiguration {\n    tabSize: number;\n    insertSpaces: boolean;\n    cursorStyle: TextEditorCursorStyle;\n    lineNumbers: TextEditorLineNumbersStyle;\n}\n\nexport interface TextEditorConfigurationUpdate {\n    tabSize?: number | 'auto';\n    insertSpaces?: boolean | 'auto';\n    cursorStyle?: TextEditorCursorStyle;\n    lineNumbers?: TextEditorLineNumbersStyle;\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\nexport interface SelectionChangeEvent {\n    selections: Selection[];\n    source?: string;\n}\n\nexport interface EditorChangedPropertiesData {\n    options?: TextEditorConfiguration;\n    selections?: SelectionChangeEvent;\n    visibleRanges?: Range[];\n}\n\nexport interface TextEditorPositionData {\n    [id: string]: EditorPosition;\n}\n\nexport interface TextEditorsExt {\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void;\n    $acceptEditorPositionData(data: TextEditorPositionData): void;\n}\n\nexport interface SingleEditOperation {\n    range: Range;\n    text?: string;\n    forceMoveMarkers?: boolean;\n}\n\nexport interface UndoStopOptions {\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport interface ApplyEditsOptions extends UndoStopOptions {\n    setEndOfLine: EndOfLine;\n}\n\nexport interface ThemeColor {\n    id: string;\n}\n\n/**\n * Describes the behavior of decorations when typing/editing near their edges.\n */\nexport enum TrackedRangeStickiness {\n    AlwaysGrowsWhenTypingAtEdges = 0,\n    NeverGrowsWhenTypingAtEdges = 1,\n    GrowsOnlyWhenTypingBefore = 2,\n    GrowsOnlyWhenTypingAfter = 3,\n}\nexport interface ContentDecorationRenderOptions {\n    contentText?: string;\n    contentIconPath?: UriComponents;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    color?: string | ThemeColor;\n    backgroundColor?: string | ThemeColor;\n\n    margin?: string;\n    width?: string;\n    height?: string;\n}\n\nexport interface ThemeDecorationRenderOptions {\n    backgroundColor?: string | ThemeColor;\n\n    outline?: string;\n    outlineColor?: string | ThemeColor;\n    outlineStyle?: string;\n    outlineWidth?: string;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    borderRadius?: string;\n    borderSpacing?: string;\n    borderStyle?: string;\n    borderWidth?: string;\n\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    cursor?: string;\n    color?: string | ThemeColor;\n    opacity?: string;\n    letterSpacing?: string;\n\n    gutterIconPath?: UriComponents;\n    gutterIconSize?: string;\n\n    overviewRulerColor?: string | ThemeColor;\n\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationRenderOptions extends ThemeDecorationRenderOptions {\n    isWholeLine?: boolean;\n    rangeBehavior?: TrackedRangeStickiness;\n    overviewRulerLane?: OverviewRulerLane;\n\n    light?: ThemeDecorationRenderOptions;\n    dark?: ThemeDecorationRenderOptions;\n}\n\nexport interface ThemeDecorationInstanceRenderOptions {\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationInstanceRenderOptions extends ThemeDecorationInstanceRenderOptions {\n    light?: ThemeDecorationInstanceRenderOptions;\n    dark?: ThemeDecorationInstanceRenderOptions;\n}\n\nexport interface DecorationOptions {\n    range: Range;\n    hoverMessage?: MarkdownString | MarkdownString[];\n    renderOptions?: DecorationInstanceRenderOptions;\n}\n\nexport interface TextEditorsMain {\n    // $tryShowTextDocument(resource: UriComponents, options: TextDocumentShowOptions): Promise<string>;\n    $registerTextEditorDecorationType(key: string, options: DecorationRenderOptions): void;\n    $removeTextEditorDecorationType(key: string): void;\n    // $tryShowEditor(id: string, position: EditorPosition): Promise<void>;\n    // $tryHideEditor(id: string): Promise<void>;\n    $trySetOptions(id: string, options: TextEditorConfigurationUpdate): Promise<void>;\n    $trySetDecorations(id: string, key: string, ranges: DecorationOptions[]): Promise<void>;\n    $trySetDecorationsFast(id: string, key: string, ranges: number[]): Promise<void>;\n    $tryRevealRange(id: string, range: Range, revealType: TextEditorRevealType): Promise<void>;\n    $trySetSelections(id: string, selections: Selection[]): Promise<void>;\n    $tryApplyEdits(id: string, modelVersionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): Promise<boolean>;\n    $tryApplyWorkspaceEdit(workspaceEditDto: WorkspaceEditDto): Promise<boolean>;\n    $tryInsertSnippet(id: string, template: string, selections: Range[], opts: UndoStopOptions): Promise<boolean>;\n    $saveAll(includeUntitled?: boolean): Promise<boolean>;\n    // $getDiffInformation(id: string): Promise<editorCommon.ILineChange[]>;\n}\n\nexport interface ModelAddedData {\n    uri: UriComponents;\n    versionId: number;\n    lines: string[];\n    EOL: string;\n    modeId: string;\n    isDirty: boolean;\n}\n\nexport interface TextEditorAddData {\n    id: string;\n    documentUri: UriComponents;\n    options: TextEditorConfiguration;\n    selections: Selection[];\n    visibleRanges: Range[];\n    editorPosition?: EditorPosition;\n}\n\nexport interface EditorsAndDocumentsDelta {\n    removedDocuments?: UriComponents[];\n    addedDocuments?: ModelAddedData[];\n    removedEditors?: string[];\n    addedEditors?: TextEditorAddData[];\n    newActiveEditor?: string;\n}\n\nexport interface EditorsAndDocumentsExt {\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void;\n}\n\nexport interface ModelContentChange {\n    readonly range: Range;\n    readonly rangeOffset: number;\n    readonly rangeLength: number;\n    readonly text: string;\n}\nexport interface ModelChangedEvent {\n    readonly changes: ModelContentChange[];\n\n    readonly eol: string;\n\n    readonly versionId: number;\n}\n\nexport interface DocumentsExt {\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void;\n    $acceptModelSaved(strUrl: UriComponents): void;\n    $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]>;\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void;\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void;\n}\n\nexport interface DocumentsMain {\n    $tryCreateDocument(options?: { language?: string; content?: string; }): Promise<UriComponents>;\n    $tryShowDocument(uri: UriComponents, options?: TextDocumentShowOptions): Promise<void>;\n    $tryOpenDocument(uri: UriComponents): Promise<boolean>;\n    $trySaveDocument(uri: UriComponents): Promise<boolean>;\n    $tryCloseDocument(uri: UriComponents): Promise<boolean>;\n}\n\nexport interface EnvMain {\n    $getEnvVariable(envVarName: string): Promise<string | undefined>;\n    $getClientOperatingSystem(): Promise<theia.OperatingSystem>;\n}\n\nexport interface PreferenceRegistryMain {\n    $updateConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        value: any,\n        resource?: string\n    ): PromiseLike<void>;\n    $removeConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        resource?: string\n    ): PromiseLike<void>;\n}\n\nexport interface PreferenceChangeExt {\n    preferenceName: string,\n    newValue: any\n}\n\nexport interface TerminalOptionsExt {\n    attributes?: {\n        [key: string]: string;\n    }\n}\n\nexport interface PreferenceRegistryExt {\n    $acceptConfigurationChanged(data: { [key: string]: any }, eventData: PreferenceChangeExt[]): void;\n}\n\nexport interface OutputChannelRegistryMain {\n    $append(channelName: string, value: string, pluginInfo: PluginInfo): PromiseLike<void>;\n    $clear(channelName: string): PromiseLike<void>;\n    $dispose(channelName: string): PromiseLike<void>;\n    $reveal(channelName: string, preserveFocus: boolean): PromiseLike<void>;\n    $close(channelName: string): PromiseLike<void>;\n}\n\nexport type CharacterPair = [string, string];\n\nexport interface CommentRule {\n    lineComment?: string;\n    blockComment?: CharacterPair;\n}\n\nexport interface SerializedRegExp {\n    pattern: string;\n    flags?: string;\n}\n\nexport interface SerializedIndentationRule {\n    decreaseIndentPattern?: SerializedRegExp;\n    increaseIndentPattern?: SerializedRegExp;\n    indentNextLinePattern?: SerializedRegExp;\n    unIndentedLinePattern?: SerializedRegExp;\n}\n\nexport interface EnterAction {\n    indentAction: IndentAction;\n    outdentCurrentLine?: boolean;\n    appendText?: string;\n    removeText?: number;\n}\n\nexport interface SerializedOnEnterRule {\n    beforeText: SerializedRegExp;\n    afterText?: SerializedRegExp;\n    action: EnterAction;\n}\n\nexport interface SerializedLanguageConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    wordPattern?: SerializedRegExp;\n    indentationRules?: SerializedIndentationRule;\n    onEnterRules?: SerializedOnEnterRule[];\n}\n\nexport interface CodeActionDto {\n    title: string;\n    edit?: WorkspaceEditDto;\n    diagnostics?: MarkerData[];\n    command?: Command;\n    kind?: string;\n}\n\nexport interface ResourceFileEditDto {\n    oldUri: UriComponents;\n    newUri: UriComponents;\n    options: FileOperationOptions;\n}\n\nexport interface ResourceTextEditDto {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edits: TextEdit[];\n}\nexport namespace ResourceTextEditDto {\n    export function is(arg: Object): arg is ResourceTextEditDto {\n        return !!arg && typeof arg === 'object' && 'resource' in arg && 'edits' in arg;\n    }\n}\n\nexport interface WorkspaceEditDto {\n    edits: (ResourceFileEditDto | ResourceTextEditDto)[];\n    rejectReason?: string;\n}\n\nexport interface LanguagesContributionExt {\n    $start(languageServerInfo: theia.LanguageServerInfo): void;\n}\n\nexport interface LanguagesContributionMain {\n    $registerLanguageServerProvider(languageServerInfo: theia.LanguageServerInfo): void\n    $stop(id: string): void\n}\n\nexport interface CommandProperties {\n    command: string;\n    args?: string[];\n    options?: {\n        cwd?: string;\n        [key: string]: any\n    };\n}\n\nexport interface TaskDto {\n    type: string;\n    label: string;\n    source?: string;\n    scope?: string;\n    // tslint:disable-next-line:no-any\n    [key: string]: any;\n}\n\nexport interface TaskExecutionDto {\n    id: number;\n    task: TaskDto;\n}\n\nexport interface ProcessTaskDto extends TaskDto, CommandProperties {\n    windows?: CommandProperties;\n}\n\nexport interface PluginInfo {\n    id: string;\n    name: string;\n}\n\nexport interface LanguagesExt {\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: CancellationToken): Promise<CompletionResultDto | undefined>;\n    $resolveCompletionItem(handle: number, resource: UriComponents, position: Position, completion: Completion, token: CancellationToken): Promise<Completion>;\n    $releaseCompletionItems(handle: number, id: number): void;\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: CancellationToken): Promise<Location[] | undefined>;\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: CancellationToken\n    ): Promise<SignatureHelp | undefined>;\n    $releaseSignatureHelp(handle: number, id: number): void;\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Hover | undefined>;\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<DocumentHighlight[] | undefined>;\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideOnTypeFormattingEdits(\n        handle: number,\n        resource: UriComponents,\n        position: Position,\n        ch: string,\n        options: FormattingOptions,\n        token: CancellationToken\n    ): Promise<TextEdit[] | undefined>;\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentLink[] | undefined>;\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: CancellationToken): Promise<DocumentLink | undefined>;\n    $provideCodeLenses(handle: number, resource: UriComponents, token: CancellationToken): Promise<CodeLensSymbol[] | undefined>;\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: CancellationToken): Promise<CodeLensSymbol | undefined>;\n    $provideCodeActions(\n        handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: CancellationToken\n    ): Promise<CodeAction[] | undefined>;\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentSymbol[] | undefined>;\n    $provideWorkspaceSymbols(handle: number, query: string, token: CancellationToken): PromiseLike<SymbolInformation[]>;\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: CancellationToken): PromiseLike<SymbolInformation>;\n    $provideFoldingRange(\n        handle: number,\n        resource: UriComponents,\n        context: FoldingContext,\n        token: CancellationToken\n    ): PromiseLike<FoldingRange[] | undefined>;\n    $provideDocumentColors(handle: number, resource: UriComponents, token: CancellationToken): PromiseLike<RawColorInfo[]>;\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: CancellationToken): PromiseLike<ColorPresentation[]>;\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: CancellationToken): PromiseLike<WorkspaceEditDto | undefined>;\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): PromiseLike<RenameLocation | undefined>;\n}\n\nexport const LanguagesMainFactory = Symbol('LanguagesMainFactory');\nexport interface LanguagesMainFactory {\n    (proxy: RPCProtocol): LanguagesMain;\n}\n\nexport const OutputChannelRegistryFactory = Symbol('OutputChannelRegistryFactory');\nexport interface OutputChannelRegistryFactory {\n    (): OutputChannelRegistryMain;\n}\n\nexport interface LanguagesMain {\n    $getLanguages(): Promise<string[]>;\n    $changeLanguage(resource: UriComponents, languageId: string): Promise<void>;\n    $setLanguageConfiguration(handle: number, languageId: string, configuration: SerializedLanguageConfiguration): void;\n    $unregister(handle: number): void;\n    $registerCompletionSupport(handle: number, pluginInfo: PluginInfo,\n        selector: SerializedDocumentFilter[], triggerCharacters: string[], supportsResolveDetails: boolean): void;\n    $registerImplementationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerTypeDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDeclarationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerReferenceProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerSignatureHelpProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], metadata: theia.SignatureHelpProviderMetadata): void;\n    $registerHoverProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentHighlightProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerQuickFixProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], codeActionKinds?: string[]): void;\n    $clearDiagnostics(id: string): void;\n    $changeDiagnostics(id: string, delta: [string, MarkerData[]][]): void;\n    $registerDocumentFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRangeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerOnTypeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], autoFormatTriggerCharacters: string[]): void;\n    $registerDocumentLinkProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerCodeLensSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], eventHandle?: number): void;\n    $emitCodeLensEvent(eventHandle: number, event?: any): void;\n    $registerOutlineSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerWorkspaceSymbolProvider(handle: number, pluginInfo: PluginInfo): void;\n    $registerFoldingRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentColorProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRenameProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], supportsResoveInitialValues: boolean): void;\n}\n\nexport interface WebviewInitData {\n    webviewResourceRoot: string\n    webviewCspSource: string\n}\n\nexport interface WebviewPanelViewState {\n    readonly active: boolean;\n    readonly visible: boolean;\n    readonly position: number;\n}\n\nexport interface WebviewsExt {\n    $onMessage(handle: string, message: any): void;\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void;\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void>;\n    $deserializeWebviewPanel(newWebviewHandle: string,\n        viewType: string,\n        title: string,\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void>;\n}\n\nexport interface WebviewsMain {\n    $createWebviewPanel(handle: string,\n        viewType: string,\n        title: string,\n        showOptions: theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions): void;\n    $disposeWebview(handle: string): void;\n    $reveal(handle: string, showOptions: theia.WebviewPanelShowOptions): void;\n    $setTitle(handle: string, value: string): void;\n    $setIconPath(handle: string, value: IconUrl | undefined): void;\n    $setHtml(handle: string, value: string): void;\n    $setOptions(handle: string, options: theia.WebviewOptions): void;\n    $postMessage(handle: string, value: any): Thenable<boolean>;\n\n    $registerSerializer(viewType: string): void;\n    $unregisterSerializer(viewType: string): void;\n}\n\nexport interface StorageMain {\n    $set(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean>;\n    $get(key: string, isGlobal: boolean): Promise<KeysToAnyValues>;\n    $getAll(isGlobal: boolean): Promise<KeysToKeysToAnyValue>;\n}\n\nexport interface StorageExt {\n    $updatePluginsWorkspaceData(data: KeysToKeysToAnyValue): void;\n}\n\nexport interface DebugExt {\n    $onSessionCustomEvent(sessionId: string, event: string, body?: any): void;\n    $breakpointsDidChange(all: Breakpoint[], added: Breakpoint[], removed: Breakpoint[], changed: Breakpoint[]): void;\n    $sessionDidCreate(sessionId: string): void;\n    $sessionDidDestroy(sessionId: string): void;\n    $sessionDidChange(sessionId: string | undefined): void;\n    $provideDebugConfigurations(debugType: string, workspaceFolder: string | undefined): Promise<theia.DebugConfiguration[]>;\n    $resolveDebugConfigurations(debugConfiguration: theia.DebugConfiguration, workspaceFolder: string | undefined): Promise<theia.DebugConfiguration | undefined>;\n    $createDebugSession(debugConfiguration: theia.DebugConfiguration): Promise<string>;\n    $terminateDebugSession(sessionId: string): Promise<void>;\n    $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined>;\n}\n\nexport interface DebugMain {\n    $appendToDebugConsole(value: string): Promise<void>;\n    $appendLineToDebugConsole(value: string): Promise<void>;\n    $registerDebuggerContribution(description: DebuggerDescription): Promise<void>;\n    $unregisterDebuggerConfiguration(debugType: string): Promise<void>;\n    $addBreakpoints(breakpoints: Breakpoint[]): Promise<void>;\n    $removeBreakpoints(breakpoints: Breakpoint[]): Promise<void>;\n    $startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration): Promise<boolean>;\n    $customRequest(sessionId: string, command: string, args?: any): Promise<DebugProtocol.Response>;\n}\n\nexport interface FileSystemExt {\n    $readFile(handle: number, resource: UriComponents, options?: { encoding?: string }): Promise<string>;\n    $writeFile(handle: number, resource: UriComponents, content: string, options?: { encoding?: string }): Promise<void>;\n}\n\nexport interface FileSystemMain {\n    $registerFileSystemProvider(handle: number, scheme: string): void;\n    $unregisterProvider(handle: number): void;\n}\n\nexport interface ClipboardMain {\n    $readText(): Promise<string>;\n    $writeText(value: string): Promise<void>;\n}\n\nexport const PLUGIN_RPC_CONTEXT = {\n    COMMAND_REGISTRY_MAIN: <ProxyIdentifier<CommandRegistryMain>>createProxyIdentifier<CommandRegistryMain>('CommandRegistryMain'),\n    QUICK_OPEN_MAIN: createProxyIdentifier<QuickOpenMain>('QuickOpenMain'),\n    DIALOGS_MAIN: createProxyIdentifier<DialogsMain>('DialogsMain'),\n    WORKSPACE_MAIN: createProxyIdentifier<WorkspaceMain>('WorkspaceMain'),\n    MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<MessageRegistryMain>>createProxyIdentifier<MessageRegistryMain>('MessageRegistryMain'),\n    TEXT_EDITORS_MAIN: createProxyIdentifier<TextEditorsMain>('TextEditorsMain'),\n    DOCUMENTS_MAIN: createProxyIdentifier<DocumentsMain>('DocumentsMain'),\n    STATUS_BAR_MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<StatusBarMessageRegistryMain>>createProxyIdentifier<StatusBarMessageRegistryMain>('StatusBarMessageRegistryMain'),\n    ENV_MAIN: createProxyIdentifier<EnvMain>('EnvMain'),\n    NOTIFICATION_MAIN: createProxyIdentifier<NotificationMain>('NotificationMain'),\n    TERMINAL_MAIN: createProxyIdentifier<TerminalServiceMain>('TerminalServiceMain'),\n    TREE_VIEWS_MAIN: createProxyIdentifier<TreeViewsMain>('TreeViewsMain'),\n    PREFERENCE_REGISTRY_MAIN: createProxyIdentifier<PreferenceRegistryMain>('PreferenceRegistryMain'),\n    OUTPUT_CHANNEL_REGISTRY_MAIN: <ProxyIdentifier<OutputChannelRegistryMain>>createProxyIdentifier<OutputChannelRegistryMain>('OutputChannelRegistryMain'),\n    LANGUAGES_MAIN: createProxyIdentifier<LanguagesMain>('LanguagesMain'),\n    CONNECTION_MAIN: createProxyIdentifier<ConnectionMain>('ConnectionMain'),\n    WEBVIEWS_MAIN: createProxyIdentifier<WebviewsMain>('WebviewsMain'),\n    STORAGE_MAIN: createProxyIdentifier<StorageMain>('StorageMain'),\n    TASKS_MAIN: createProxyIdentifier<TasksMain>('TasksMain'),\n    LANGUAGES_CONTRIBUTION_MAIN: createProxyIdentifier<LanguagesContributionMain>('LanguagesContributionMain'),\n    DEBUG_MAIN: createProxyIdentifier<DebugMain>('DebugMain'),\n    FILE_SYSTEM_MAIN: createProxyIdentifier<FileSystemMain>('FileSystemMain'),\n    SCM_MAIN: createProxyIdentifier<ScmMain>('ScmMain'),\n    DECORATIONS_MAIN: createProxyIdentifier<DecorationsMain>('DecorationsMain'),\n    WINDOW_MAIN: createProxyIdentifier<WindowMain>('WindowMain'),\n    CLIPBOARD_MAIN: <ProxyIdentifier<ClipboardMain>>createProxyIdentifier<ClipboardMain>('ClipboardMain')\n};\n\nexport const MAIN_RPC_CONTEXT = {\n    HOSTED_PLUGIN_MANAGER_EXT: createProxyIdentifier<PluginManagerExt>('PluginManagerExt'),\n    COMMAND_REGISTRY_EXT: createProxyIdentifier<CommandRegistryExt>('CommandRegistryExt'),\n    QUICK_OPEN_EXT: createProxyIdentifier<QuickOpenExt>('QuickOpenExt'),\n    WINDOW_STATE_EXT: createProxyIdentifier<WindowStateExt>('WindowStateExt'),\n    NOTIFICATION_EXT: createProxyIdentifier<NotificationExt>('NotificationExt'),\n    WORKSPACE_EXT: createProxyIdentifier<WorkspaceExt>('WorkspaceExt'),\n    TEXT_EDITORS_EXT: createProxyIdentifier<TextEditorsExt>('TextEditorsExt'),\n    EDITORS_AND_DOCUMENTS_EXT: createProxyIdentifier<EditorsAndDocumentsExt>('EditorsAndDocumentsExt'),\n    DOCUMENTS_EXT: createProxyIdentifier<DocumentsExt>('DocumentsExt'),\n    TERMINAL_EXT: createProxyIdentifier<TerminalServiceExt>('TerminalServiceExt'),\n    OUTPUT_CHANNEL_REGISTRY_EXT: createProxyIdentifier<OutputChannelRegistryExt>('OutputChannelRegistryExt'),\n    TREE_VIEWS_EXT: createProxyIdentifier<TreeViewsExt>('TreeViewsExt'),\n    PREFERENCE_REGISTRY_EXT: createProxyIdentifier<PreferenceRegistryExt>('PreferenceRegistryExt'),\n    LANGUAGES_EXT: createProxyIdentifier<LanguagesExt>('LanguagesExt'),\n    CONNECTION_EXT: createProxyIdentifier<ConnectionExt>('ConnectionExt'),\n    WEBVIEWS_EXT: createProxyIdentifier<WebviewsExt>('WebviewsExt'),\n    STORAGE_EXT: createProxyIdentifier<StorageExt>('StorageExt'),\n    TASKS_EXT: createProxyIdentifier<TasksExt>('TasksExt'),\n    LANGUAGES_CONTRIBUTION_EXT: createProxyIdentifier<LanguagesContributionExt>('LanguagesContributionExt'),\n    DEBUG_EXT: createProxyIdentifier<DebugExt>('DebugExt'),\n    FILE_SYSTEM_EXT: createProxyIdentifier<FileSystemExt>('FileSystemExt'),\n    SCM_EXT: createProxyIdentifier<ScmExt>('ScmExt'),\n    DECORATIONS_EXT: createProxyIdentifier<DecorationsExt>('DecorationsExt')\n};\n\nexport interface TasksExt {\n    $provideTasks(handle: number, token?: CancellationToken): Promise<TaskDto[] | undefined>;\n    $resolveTask(handle: number, task: TaskDto, token?: CancellationToken): Promise<TaskDto | undefined>;\n    $onDidStartTask(execution: TaskExecutionDto): void;\n    $onDidEndTask(id: number): void;\n    $onDidStartTaskProcess(processId: number | undefined, execution: TaskExecutionDto): void;\n    $onDidEndTaskProcess(exitCode: number | undefined, taskId: number): void;\n}\n\nexport interface TasksMain {\n    $registerTaskProvider(handle: number, type: string): void;\n    $fetchTasks(taskVersion: string | undefined, taskType: string | undefined): Promise<TaskDto[]>;\n    $executeTask(taskDto: TaskDto): Promise<TaskExecutionDto | undefined>;\n    $taskExecutions(): Promise<TaskExecutionDto[]>;\n    $unregister(handle: number): void;\n    $terminateTask(id: number): void;\n}\n\nexport interface RawColorInfo {\n    color: [number, number, number, number];\n    range: Range;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Position as P, Range as R, SymbolInformation, SymbolKind as S } from 'vscode-languageserver-types';\nimport URI from 'vscode-uri';\nimport * as rpc from '../common/plugin-api-rpc';\nimport { DecorationOptions, EditorPosition, PickOpenItem, Plugin, Position, ResourceFileEditDto, ResourceTextEditDto, Selection, TaskDto, WorkspaceEditDto } from '../common/plugin-api-rpc';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { LanguageFilter, LanguageSelector, RelativePattern } from './languages';\nimport { isMarkdownString, MarkdownString } from './markdown-string';\nimport { Item } from './quick-open';\nimport * as types from './types-impl';\n\nconst SIDE_GROUP = -2;\nconst ACTIVE_GROUP = -1;\n\nexport function toViewColumn(ep?: EditorPosition): theia.ViewColumn | undefined {\n    if (typeof ep !== 'number') {\n        return undefined;\n    }\n\n    if (ep === EditorPosition.ONE) {\n        return <number>types.ViewColumn.One;\n    } else if (ep === EditorPosition.TWO) {\n        return <number>types.ViewColumn.Two;\n    } else if (ep === EditorPosition.THREE) {\n        return <number>types.ViewColumn.Three;\n    } else if (ep === EditorPosition.FOUR) {\n        return <number>types.ViewColumn.Four;\n    } else if (ep === EditorPosition.FIVE) {\n        return <number>types.ViewColumn.Five;\n    } else if (ep === EditorPosition.SIX) {\n        return <number>types.ViewColumn.Six;\n    } else if (ep === EditorPosition.SEVEN) {\n        return <number>types.ViewColumn.Seven;\n    } else if (ep === EditorPosition.EIGHT) {\n        return <number>types.ViewColumn.Eight;\n    } else if (ep === EditorPosition.NINE) {\n        return <number>types.ViewColumn.Nine;\n    }\n\n    return undefined;\n}\n\nexport function fromViewColumn(column?: theia.ViewColumn): number {\n    if (typeof column === 'number' && column >= types.ViewColumn.One) {\n        return column - 1;\n    }\n\n    if (column! === <number>types.ViewColumn.Beside) {\n        return SIDE_GROUP;\n    }\n\n    return ACTIVE_GROUP;\n}\n\nexport function toWebviewPanelShowOptions(options: theia.ViewColumn | theia.WebviewPanelShowOptions): theia.WebviewPanelShowOptions {\n    if (typeof options === 'object') {\n        const showOptions = options as theia.WebviewPanelShowOptions;\n        return {\n            area: showOptions.area ? showOptions.area : types.WebviewPanelTargetArea.Main,\n            viewColumn: showOptions.viewColumn ? fromViewColumn(showOptions.viewColumn) : undefined,\n            preserveFocus: showOptions.preserveFocus ? showOptions.preserveFocus : false\n        };\n    }\n\n    return {\n        area: types.WebviewPanelTargetArea.Main,\n        viewColumn: fromViewColumn(options as theia.ViewColumn),\n        preserveFocus: false\n    };\n}\n\nexport function toSelection(selection: Selection): types.Selection {\n    const { selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn } = selection;\n    const start = new types.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n    const end = new types.Position(positionLineNumber - 1, positionColumn - 1);\n    return new types.Selection(start, end);\n}\n\nexport function fromSelection(selection: types.Selection): Selection {\n    const { active, anchor } = selection;\n    return {\n        selectionStartLineNumber: anchor.line + 1,\n        selectionStartColumn: anchor.character + 1,\n        positionLineNumber: active.line + 1,\n        positionColumn: active.character + 1\n    };\n}\n\nexport function toRange(range: model.Range): types.Range {\n    // if (!range) {\n    //     return undefined;\n    // }\n\n    const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n    return new types.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n}\n\nexport function fromRange(range: undefined): undefined;\nexport function fromRange(range: theia.Range): model.Range;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined {\n    if (!range) {\n        return undefined;\n    }\n    const { start, end } = range;\n    return {\n        startLineNumber: start.line + 1,\n        startColumn: start.character + 1,\n        endLineNumber: end.line + 1,\n        endColumn: end.character + 1\n    };\n}\n\nexport function fromPosition(position: types.Position): Position {\n    return { lineNumber: position.line + 1, column: position.character + 1 };\n}\n\nexport function toPosition(position: Position): types.Position {\n    return new types.Position(position.lineNumber - 1, position.column - 1);\n}\n\n// tslint:disable-next-line:no-any\nfunction isDecorationOptions(something: any): something is theia.DecorationOptions {\n    return (typeof something.range !== 'undefined');\n}\n\nexport function isDecorationOptionsArr(something: theia.Range[] | theia.DecorationOptions[]): something is theia.DecorationOptions[] {\n    if (something.length === 0) {\n        return true;\n    }\n    return isDecorationOptions(something[0]) ? true : false;\n}\n\nexport function fromRangeOrRangeWithMessage(ranges: theia.Range[] | theia.DecorationOptions[]): DecorationOptions[] {\n\n    if (isDecorationOptionsArr(ranges)) {\n        return ranges.map(r => {\n            let hoverMessage;\n            if (Array.isArray(r.hoverMessage)) {\n                hoverMessage = fromManyMarkdown(r.hoverMessage);\n            } else if (r.hoverMessage) {\n                hoverMessage = fromMarkdown(r.hoverMessage);\n            } else {\n                hoverMessage = undefined;\n            }\n            return {\n                range: fromRange(r.range)!,\n                hoverMessage: hoverMessage,\n                // tslint:disable-next-line:no-any\n                renderOptions: <any> /* URI vs Uri */r.renderOptions\n            };\n        });\n    } else {\n        return ranges.map((r): DecorationOptions =>\n            ({\n                range: fromRange(r)!\n            }));\n    }\n}\n\nexport function fromManyMarkdown(markup: (theia.MarkdownString | theia.MarkedString)[]): model.MarkdownString[] {\n    return markup.map(fromMarkdown);\n}\n\ninterface Codeblock {\n    language: string;\n    value: string;\n}\n\n// tslint:disable-next-line:no-any\nfunction isCodeblock(thing: any): thing is Codeblock {\n    return thing && typeof thing === 'object'\n        && typeof (<Codeblock>thing).language === 'string'\n        && typeof (<Codeblock>thing).value === 'string';\n}\n\nexport function fromMarkdown(markup: theia.MarkdownString | theia.MarkedString): model.MarkdownString {\n    if (isCodeblock(markup)) {\n        const { language, value } = markup;\n        return { value: '```' + language + '\\n' + value + '\\n```\\n' };\n    } else if (isMarkdownString(markup)) {\n        return markup;\n    } else if (typeof markup === 'string') {\n        return { value: <string>markup };\n    } else {\n        return { value: '' };\n    }\n}\n\nexport function toMarkdown(value: model.MarkdownString): MarkdownString {\n    const ret = new MarkdownString(value.value);\n    ret.isTrusted = value.isTrusted;\n    return ret;\n}\n\nexport function fromDocumentSelector(selector: theia.DocumentSelector | undefined): LanguageSelector | undefined {\n    if (!selector) {\n        return undefined;\n    } else if (Array.isArray(selector)) {\n        return <LanguageSelector>selector.map(fromDocumentSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return {\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        } as LanguageFilter;\n    }\n\n}\n\nexport function fromGlobPattern(pattern: theia.GlobPattern): string | RelativePattern {\n    if (typeof pattern === 'string') {\n        return pattern;\n    }\n\n    if (isRelativePattern(pattern)) {\n        return new types.RelativePattern(pattern.base, pattern.pattern);\n    }\n\n    return pattern;\n}\n\nfunction isRelativePattern(obj: {}): obj is theia.RelativePattern {\n    const rp = obj as theia.RelativePattern;\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string';\n}\n\nexport function fromCompletionItemKind(kind?: types.CompletionItemKind): model.CompletionItemKind {\n    switch (kind) {\n        case types.CompletionItemKind.Method: return model.CompletionItemKind.Method;\n        case types.CompletionItemKind.Function: return model.CompletionItemKind.Function;\n        case types.CompletionItemKind.Constructor: return model.CompletionItemKind.Constructor;\n        case types.CompletionItemKind.Field: return model.CompletionItemKind.Field;\n        case types.CompletionItemKind.Variable: return model.CompletionItemKind.Variable;\n        case types.CompletionItemKind.Class: return model.CompletionItemKind.Class;\n        case types.CompletionItemKind.Interface: return model.CompletionItemKind.Interface;\n        case types.CompletionItemKind.Struct: return model.CompletionItemKind.Struct;\n        case types.CompletionItemKind.Module: return model.CompletionItemKind.Module;\n        case types.CompletionItemKind.Property: return model.CompletionItemKind.Property;\n        case types.CompletionItemKind.Unit: return model.CompletionItemKind.Unit;\n        case types.CompletionItemKind.Value: return model.CompletionItemKind.Value;\n        case types.CompletionItemKind.Constant: return model.CompletionItemKind.Constant;\n        case types.CompletionItemKind.Enum: return model.CompletionItemKind.Enum;\n        case types.CompletionItemKind.EnumMember: return model.CompletionItemKind.EnumMember;\n        case types.CompletionItemKind.Keyword: return model.CompletionItemKind.Keyword;\n        case types.CompletionItemKind.Snippet: return model.CompletionItemKind.Snippet;\n        case types.CompletionItemKind.Text: return model.CompletionItemKind.Text;\n        case types.CompletionItemKind.Color: return model.CompletionItemKind.Color;\n        case types.CompletionItemKind.File: return model.CompletionItemKind.File;\n        case types.CompletionItemKind.Reference: return model.CompletionItemKind.Reference;\n        case types.CompletionItemKind.Folder: return model.CompletionItemKind.Folder;\n        case types.CompletionItemKind.Event: return model.CompletionItemKind.Event;\n        case types.CompletionItemKind.Operator: return model.CompletionItemKind.Operator;\n        case types.CompletionItemKind.TypeParameter: return model.CompletionItemKind.TypeParameter;\n    }\n    return model.CompletionItemKind.Property;\n}\n\nexport function toCompletionItemKind(kind?: model.CompletionItemKind): types.CompletionItemKind {\n    switch (kind) {\n        case model.CompletionItemKind.Method: return types.CompletionItemKind.Method;\n        case model.CompletionItemKind.Function: return types.CompletionItemKind.Function;\n        case model.CompletionItemKind.Constructor: return types.CompletionItemKind.Constructor;\n        case model.CompletionItemKind.Field: return types.CompletionItemKind.Field;\n        case model.CompletionItemKind.Variable: return types.CompletionItemKind.Variable;\n        case model.CompletionItemKind.Class: return types.CompletionItemKind.Class;\n        case model.CompletionItemKind.Interface: return types.CompletionItemKind.Interface;\n        case model.CompletionItemKind.Struct: return types.CompletionItemKind.Struct;\n        case model.CompletionItemKind.Module: return types.CompletionItemKind.Module;\n        case model.CompletionItemKind.Property: return types.CompletionItemKind.Property;\n        case model.CompletionItemKind.Unit: return types.CompletionItemKind.Unit;\n        case model.CompletionItemKind.Value: return types.CompletionItemKind.Value;\n        case model.CompletionItemKind.Constant: return types.CompletionItemKind.Constant;\n        case model.CompletionItemKind.Enum: return types.CompletionItemKind.Enum;\n        case model.CompletionItemKind.EnumMember: return types.CompletionItemKind.EnumMember;\n        case model.CompletionItemKind.Keyword: return types.CompletionItemKind.Keyword;\n        case model.CompletionItemKind.Snippet: return types.CompletionItemKind.Snippet;\n        case model.CompletionItemKind.Text: return types.CompletionItemKind.Text;\n        case model.CompletionItemKind.Color: return types.CompletionItemKind.Color;\n        case model.CompletionItemKind.File: return types.CompletionItemKind.File;\n        case model.CompletionItemKind.Reference: return types.CompletionItemKind.Reference;\n        case model.CompletionItemKind.Folder: return types.CompletionItemKind.Folder;\n        case model.CompletionItemKind.Event: return types.CompletionItemKind.Event;\n        case model.CompletionItemKind.Operator: return types.CompletionItemKind.Operator;\n        case model.CompletionItemKind.TypeParameter: return types.CompletionItemKind.TypeParameter;\n    }\n    return types.CompletionItemKind.Property;\n}\n\nexport function fromTextEdit(edit: theia.TextEdit): model.TextEdit {\n    return {\n        text: edit.newText,\n        range: fromRange(edit.range)\n    };\n}\n\nexport function fromLanguageSelector(selector: undefined): undefined;\nexport function fromLanguageSelector(selector: theia.DocumentSelector): LanguageSelector;\nexport function fromLanguageSelector(selector: undefined | theia.DocumentSelector): undefined | LanguageSelector {\n    if (!selector) {\n        return undefined;\n    } else if (Array.isArray(selector)) {\n        return <LanguageSelector>selector.map(fromLanguageSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return <LanguageFilter>{\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        };\n    }\n}\n\nexport function convertDiagnosticToMarkerData(diagnostic: theia.Diagnostic): model.MarkerData {\n    return {\n        code: convertCode(diagnostic.code),\n        severity: convertSeverity(diagnostic.severity),\n        message: diagnostic.message,\n        source: diagnostic.source,\n        startLineNumber: diagnostic.range.start.line + 1,\n        startColumn: diagnostic.range.start.character + 1,\n        endLineNumber: diagnostic.range.end.line + 1,\n        endColumn: diagnostic.range.end.character + 1,\n        relatedInformation: convertRelatedInformation(diagnostic.relatedInformation),\n        tags: convertTags(diagnostic.tags)\n    };\n}\n\nfunction convertCode(code: string | number | undefined): string | undefined {\n    if (typeof code === 'number') {\n        return String(code);\n    } else {\n        return code;\n    }\n}\n\nfunction convertSeverity(severity: types.DiagnosticSeverity): types.MarkerSeverity {\n    switch (severity) {\n        case types.DiagnosticSeverity.Error: return types.MarkerSeverity.Error;\n        case types.DiagnosticSeverity.Warning: return types.MarkerSeverity.Warning;\n        case types.DiagnosticSeverity.Information: return types.MarkerSeverity.Info;\n        case types.DiagnosticSeverity.Hint: return types.MarkerSeverity.Hint;\n    }\n}\n\nfunction convertRelatedInformation(diagnosticsRelatedInformation: theia.DiagnosticRelatedInformation[] | undefined): model.RelatedInformation[] | undefined {\n    if (!diagnosticsRelatedInformation) {\n        return undefined;\n    }\n\n    const relatedInformation: model.RelatedInformation[] = [];\n    for (const item of diagnosticsRelatedInformation) {\n        relatedInformation.push({\n            resource: item.location.uri.toString(),\n            message: item.message,\n            startLineNumber: item.location.range.start.line + 1,\n            startColumn: item.location.range.start.character + 1,\n            endLineNumber: item.location.range.end.line + 1,\n            endColumn: item.location.range.end.character + 1\n        });\n    }\n    return relatedInformation;\n}\n\nfunction convertTags(tags: types.DiagnosticTag[] | undefined): types.MarkerTag[] | undefined {\n    if (!tags) {\n        return undefined;\n    }\n\n    const markerTags: types.MarkerTag[] = [];\n    for (const tag of tags) {\n        switch (tag) {\n            case types.DiagnosticTag.Unnecessary: markerTags.push(types.MarkerTag.Unnecessary);\n        }\n    }\n    return markerTags;\n}\n\nexport function fromHover(hover: theia.Hover): model.Hover {\n    return <model.Hover>{\n        range: fromRange(hover.range),\n        contents: fromManyMarkdown(hover.contents)\n    };\n}\n\nexport function fromLocation(location: theia.Location): model.Location {\n    return <model.Location>{\n        uri: location.uri,\n        range: fromRange(location.range)\n    };\n}\n\nexport function fromDefinitionLink(definitionLink: theia.DefinitionLink): model.DefinitionLink {\n    return <model.DefinitionLink>{\n        uri: definitionLink.targetUri,\n        range: fromRange(definitionLink.targetRange),\n        origin: definitionLink.originSelectionRange ? fromRange(definitionLink.originSelectionRange) : undefined,\n        selectionRange: definitionLink.targetSelectionRange ? fromRange(definitionLink.targetSelectionRange) : undefined\n    };\n}\n\nexport function fromDocumentLink(definitionLink: theia.DocumentLink): model.DocumentLink {\n    return <model.DocumentLink>{\n        range: fromRange(definitionLink.range),\n        url: definitionLink.target && definitionLink.target.toString()\n    };\n}\n\nexport function fromDocumentHighlightKind(kind?: theia.DocumentHighlightKind): model.DocumentHighlightKind | undefined {\n    switch (kind) {\n        case types.DocumentHighlightKind.Text: return model.DocumentHighlightKind.Text;\n        case types.DocumentHighlightKind.Read: return model.DocumentHighlightKind.Read;\n        case types.DocumentHighlightKind.Write: return model.DocumentHighlightKind.Write;\n    }\n    return model.DocumentHighlightKind.Text;\n}\n\nexport function fromDocumentHighlight(documentHighlight: theia.DocumentHighlight): model.DocumentHighlight {\n    return <model.DocumentHighlight>{\n        range: fromRange(documentHighlight.range),\n        kind: fromDocumentHighlightKind(documentHighlight.kind)\n    };\n}\n\nexport namespace ParameterInformation {\n    export function from(info: types.ParameterInformation): model.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined\n        };\n    }\n    export function to(info: model.ParameterInformation): types.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: isMarkdownString(info.documentation) ? toMarkdown(info.documentation) : info.documentation\n        };\n    }\n}\n\nexport namespace SignatureInformation {\n\n    export function from(info: types.SignatureInformation): model.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.from)\n        };\n    }\n\n    export function to(info: model.SignatureInformation): types.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: isMarkdownString(info.documentation) ? toMarkdown(info.documentation) : info.documentation,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.to)\n        };\n    }\n}\n\nexport namespace SignatureHelp {\n\n    export function from(id: number, help: types.SignatureHelp): model.SignatureHelp {\n        return {\n            id,\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.from)\n        };\n    }\n\n    export function to(help: model.SignatureHelp): types.SignatureHelp {\n        return {\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.to)\n        };\n    }\n}\n\n// tslint:disable-next-line:no-any\nexport function fromWorkspaceEdit(value: theia.WorkspaceEdit, documents?: any): WorkspaceEditDto {\n    const result: WorkspaceEditDto = {\n        edits: []\n    };\n    for (const entry of (value as types.WorkspaceEdit)._allEntries()) {\n        const [uri, uriOrEdits] = entry;\n        if (Array.isArray(uriOrEdits)) {\n            // text edits\n            const doc = documents ? documents.getDocument(uri.toString()) : undefined;\n            result.edits.push(<ResourceTextEditDto>{ resource: uri, modelVersionId: doc && doc.version, edits: uriOrEdits.map(fromTextEdit) });\n        } else {\n            // resource edits\n            result.edits.push(<ResourceFileEditDto>{ oldUri: uri, newUri: uriOrEdits, options: entry[2] });\n        }\n    }\n    return result;\n}\n\nexport namespace SymbolKind {\n    // tslint:disable-next-line:no-null-keyword\n    const fromMapping: { [kind: number]: model.SymbolKind } = Object.create(null);\n    fromMapping[model.SymbolKind.File] = model.SymbolKind.File;\n    fromMapping[model.SymbolKind.Module] = model.SymbolKind.Module;\n    fromMapping[model.SymbolKind.Namespace] = model.SymbolKind.Namespace;\n    fromMapping[model.SymbolKind.Package] = model.SymbolKind.Package;\n    fromMapping[model.SymbolKind.Class] = model.SymbolKind.Class;\n    fromMapping[model.SymbolKind.Method] = model.SymbolKind.Method;\n    fromMapping[model.SymbolKind.Property] = model.SymbolKind.Property;\n    fromMapping[model.SymbolKind.Field] = model.SymbolKind.Field;\n    fromMapping[model.SymbolKind.Constructor] = model.SymbolKind.Constructor;\n    fromMapping[model.SymbolKind.Enum] = model.SymbolKind.Enum;\n    fromMapping[model.SymbolKind.Interface] = model.SymbolKind.Interface;\n    fromMapping[model.SymbolKind.Function] = model.SymbolKind.Function;\n    fromMapping[model.SymbolKind.Variable] = model.SymbolKind.Variable;\n    fromMapping[model.SymbolKind.Constant] = model.SymbolKind.Constant;\n    fromMapping[model.SymbolKind.String] = model.SymbolKind.String;\n    fromMapping[model.SymbolKind.Number] = model.SymbolKind.Number;\n    fromMapping[model.SymbolKind.Boolean] = model.SymbolKind.Boolean;\n    fromMapping[model.SymbolKind.Array] = model.SymbolKind.Array;\n    fromMapping[model.SymbolKind.Object] = model.SymbolKind.Object;\n    fromMapping[model.SymbolKind.Key] = model.SymbolKind.Key;\n    fromMapping[model.SymbolKind.Null] = model.SymbolKind.Null;\n    fromMapping[model.SymbolKind.EnumMember] = model.SymbolKind.EnumMember;\n    fromMapping[model.SymbolKind.Struct] = model.SymbolKind.Struct;\n    fromMapping[model.SymbolKind.Event] = model.SymbolKind.Event;\n    fromMapping[model.SymbolKind.Operator] = model.SymbolKind.Operator;\n    fromMapping[model.SymbolKind.TypeParameter] = model.SymbolKind.TypeParameter;\n\n    export function fromSymbolKind(kind: theia.SymbolKind): model.SymbolKind {\n        return fromMapping[kind] || model.SymbolKind.Property;\n    }\n\n    export function toSymbolKind(kind: model.SymbolKind): theia.SymbolKind {\n        for (const k in fromMapping) {\n            if (fromMapping[k] === kind) {\n                return Number(k);\n            }\n        }\n        return model.SymbolKind.Property;\n    }\n}\n\nexport function fromDocumentSymbol(info: theia.DocumentSymbol): model.DocumentSymbol {\n    const result: model.DocumentSymbol = {\n        name: info.name,\n        detail: info.detail,\n        range: fromRange(info.range)!,\n        selectionRange: fromRange(info.selectionRange)!,\n        kind: SymbolKind.fromSymbolKind(info.kind)\n    };\n    if (info.children) {\n        result.children = info.children.map(fromDocumentSymbol);\n    }\n    return result;\n}\n\nexport function toDocumentSymbol(symbol: model.DocumentSymbol): theia.DocumentSymbol {\n    return {\n        name: symbol.name,\n        detail: symbol.detail,\n        range: toRange(symbol.range)!,\n        selectionRange: toRange(symbol.selectionRange)!,\n        children: symbol.children ? symbol.children.map(toDocumentSymbol) : [],\n        kind: SymbolKind.toSymbolKind(symbol.kind)\n    };\n}\n\nexport function toWorkspaceFolder(folder: model.WorkspaceFolder): theia.WorkspaceFolder {\n    return {\n        uri: URI.revive(folder.uri),\n        name: folder.name,\n        index: folder.index\n    };\n}\n\nexport function fromTask(task: theia.Task): TaskDto | undefined {\n    if (!task) {\n        return undefined;\n    }\n\n    const taskDto = {} as TaskDto;\n    taskDto.label = task.name;\n    taskDto.source = task.source;\n    taskDto.scope = typeof task.scope === 'object' ? task.scope.uri.toString() : undefined;\n\n    const taskDefinition = task.definition;\n    if (!taskDefinition) {\n        return taskDto;\n    }\n\n    taskDto.type = taskDefinition.type;\n    const { type, ...properties } = taskDefinition;\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDto[key] = properties[key];\n        }\n    }\n\n    const execution = task.execution;\n    if (!execution) {\n        return taskDto;\n    }\n\n    if (taskDefinition.type === 'shell' || types.ShellExecution.is(execution)) {\n        return fromShellExecution(<theia.ShellExecution>execution, taskDto);\n    }\n\n    if (taskDefinition.type === 'process' || types.ProcessExecution.is(execution)) {\n        return fromProcessExecution(<theia.ProcessExecution>execution, taskDto);\n    }\n\n    return taskDto;\n}\n\nexport function toTask(taskDto: TaskDto): theia.Task {\n    if (!taskDto) {\n        throw new Error('Task should be provided for converting');\n    }\n\n    const { type, label, source, scope, command, args, options, windows, ...properties } = taskDto;\n    const result = {} as theia.Task;\n    result.name = label;\n    result.source = source;\n    if (scope) {\n        const uri = URI.parse(scope);\n        result.scope = {\n            uri,\n            name: uri.toString(),\n            index: 0\n        };\n    }\n\n    const taskType = type;\n    const taskDefinition: theia.TaskDefinition = {\n        type: taskType\n    };\n\n    result.definition = taskDefinition;\n\n    if (taskType === 'process') {\n        result.execution = getProcessExecution(taskDto);\n    }\n\n    const execution = { command, args, options };\n    if (taskType === 'shell' || types.ShellExecution.is(execution)) {\n        result.execution = getShellExecution(taskDto);\n    }\n\n    if (!properties) {\n        return result;\n    }\n\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDefinition[key] = properties[key];\n        }\n    }\n\n    return result;\n}\n\nexport function fromProcessExecution(execution: theia.ProcessExecution, taskDto: TaskDto): TaskDto {\n    taskDto.command = execution.process;\n    taskDto.args = execution.args;\n\n    const options = execution.options;\n    if (options) {\n        taskDto.options = options;\n    }\n    return taskDto;\n}\n\nexport function fromShellExecution(execution: theia.ShellExecution, taskDto: TaskDto): TaskDto {\n    const options = execution.options;\n    if (options) {\n        taskDto.options = getShellExecutionOptions(options);\n    }\n\n    const commandLine = execution.commandLine;\n    if (commandLine) {\n        taskDto.command = commandLine;\n        return taskDto;\n    }\n\n    const command = execution.command;\n    if (typeof command === 'string') {\n        taskDto.command = command;\n        taskDto.args = getShellArgs(execution.args);\n        return taskDto;\n    } else {\n        throw new Error('Converting ShellQuotedString command is not implemented');\n    }\n}\n\nexport function getProcessExecution(taskDto: TaskDto): theia.ProcessExecution {\n    return new types.ProcessExecution(\n        taskDto.command,\n        taskDto.args || [],\n        taskDto.options || {});\n}\n\nexport function getShellExecution(taskDto: TaskDto): theia.ShellExecution {\n    if (taskDto.command && Array.isArray(taskDto.args) && taskDto.args.length !== 0) {\n        return new types.ShellExecution(\n            taskDto.command,\n            taskDto.args,\n            taskDto.options || {});\n    }\n    return new types.ShellExecution(\n        taskDto.command || taskDto.commandLine,\n        taskDto.options || {});\n}\n\nexport function getShellArgs(args: undefined | (string | theia.ShellQuotedString)[]): string[] {\n    if (!args || args.length === 0) {\n        return [];\n    }\n\n    const element = args[0];\n    if (typeof element === 'string') {\n        return args as string[];\n    }\n\n    const result: string[] = [];\n    const shellQuotedArgs = args as theia.ShellQuotedString[];\n\n    shellQuotedArgs.forEach(arg => {\n        result.push(arg.value);\n    });\n\n    return result;\n}\n\n// tslint:disable-next-line:no-any\nexport function getShellExecutionOptions(options: theia.ShellExecutionOptions): { [key: string]: any } {\n    // tslint:disable-next-line:no-any\n    const result = {} as { [key: string]: any };\n\n    const env = options.env;\n    if (env) {\n        result['env'] = env;\n    }\n\n    const executable = options.executable;\n    if (executable) {\n        result['executable'] = executable;\n    }\n\n    const shellQuoting = options.shellQuoting;\n    if (shellQuoting) {\n        result['shellQuoting'] = shellQuoting;\n    }\n\n    const shellArgs = options.shellArgs;\n    if (shellArgs) {\n        result['shellArgs'] = shellArgs;\n    }\n\n    const cwd = options.cwd;\n    if (cwd) {\n        Object.assign(result, { cwd });\n    }\n\n    return result;\n}\n\nexport function fromSymbolInformation(symbolInformation: theia.SymbolInformation): SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    if (symbolInformation.location && symbolInformation.location.range) {\n        const p1 = P.create(symbolInformation.location.range.start.line, symbolInformation.location.range.start.character);\n        const p2 = P.create(symbolInformation.location.range.end.line, symbolInformation.location.range.end.character);\n        return SymbolInformation.create(symbolInformation.name, symbolInformation.kind++ as S, R.create(p1, p2),\n            symbolInformation.location.uri.toString(), symbolInformation.containerName);\n    }\n\n    return <SymbolInformation>{\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind++ as S,\n        location: {\n            uri: symbolInformation.location.uri.toString()\n        }\n    };\n}\n\nexport function toSymbolInformation(symbolInformation: SymbolInformation): theia.SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    return <theia.SymbolInformation>{\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind,\n        location: {\n            uri: URI.parse(symbolInformation.location.uri),\n            range: symbolInformation.location.range\n        }\n    };\n}\n\nexport function fromFoldingRange(foldingRange: theia.FoldingRange): model.FoldingRange {\n    const range: model.FoldingRange = {\n        start: foldingRange.start + 1,\n        end: foldingRange.end + 1\n    };\n    if (foldingRange.kind) {\n        range.kind = fromFoldingRangeKind(foldingRange.kind);\n    }\n    return range;\n}\n\nexport function fromFoldingRangeKind(kind: theia.FoldingRangeKind | undefined): model.FoldingRangeKind | undefined {\n    if (kind) {\n        switch (kind) {\n            case types.FoldingRangeKind.Comment:\n                return model.FoldingRangeKind.Comment;\n            case types.FoldingRangeKind.Imports:\n                return model.FoldingRangeKind.Imports;\n            case types.FoldingRangeKind.Region:\n                return model.FoldingRangeKind.Region;\n        }\n    }\n    return undefined;\n}\n\nexport function fromColor(color: types.Color): [number, number, number, number] {\n    return [color.red, color.green, color.blue, color.alpha];\n}\n\nexport function toColor(color: [number, number, number, number]): types.Color {\n    return new types.Color(color[0], color[1], color[2], color[3]);\n}\n\nexport function fromColorPresentation(colorPresentation: theia.ColorPresentation): model.ColorPresentation {\n    return {\n        label: colorPresentation.label,\n        textEdit: colorPresentation.textEdit ? fromTextEdit(colorPresentation.textEdit) : undefined,\n        additionalTextEdits: colorPresentation.additionalTextEdits ? colorPresentation.additionalTextEdits.map(value => fromTextEdit(value)) : undefined\n    };\n}\n\nexport function quickPickItemToPickOpenItem(items: Item[]): PickOpenItem[] {\n    const pickItems: PickOpenItem[] = [];\n    for (let handle = 0; handle < items.length; handle++) {\n        const item = items[handle];\n        let label: string;\n        let description: string | undefined;\n        let detail: string | undefined;\n        let picked: boolean | undefined;\n        let groupLabel: string | undefined;\n        let showBorder: boolean | undefined;\n        if (typeof item === 'string') {\n            label = item;\n        } else {\n            ({ label, description, detail, picked, groupLabel, showBorder } = item);\n        }\n\n        pickItems.push({\n            label,\n            description,\n            handle,\n            detail,\n            picked,\n            groupLabel,\n            showBorder\n        });\n    }\n    return pickItems;\n}\n\nexport namespace DecorationRenderOptions {\n    export function from(options: theia.DecorationRenderOptions): rpc.DecorationRenderOptions {\n        return {\n            isWholeLine: options.isWholeLine,\n            rangeBehavior: options.rangeBehavior ? DecorationRangeBehavior.from(options.rangeBehavior) : undefined,\n            overviewRulerLane: options.overviewRulerLane,\n            light: options.light ? ThemableDecorationRenderOptions.from(options.light) : undefined,\n            dark: options.dark ? ThemableDecorationRenderOptions.from(options.dark) : undefined,\n\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace DecorationRangeBehavior {\n    export function from(value: types.DecorationRangeBehavior): rpc.TrackedRangeStickiness {\n        if (typeof value === 'undefined') {\n            return value;\n        }\n        switch (value) {\n            case types.DecorationRangeBehavior.OpenOpen:\n                return rpc.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.ClosedClosed:\n                return rpc.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.OpenClosed:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n            case types.DecorationRangeBehavior.ClosedOpen:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n        }\n    }\n}\n\nexport namespace ThemableDecorationRenderOptions {\n    export function from(options: theia.ThemableDecorationRenderOptions): rpc.ThemeDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace ThemableDecorationAttachmentRenderOptions {\n    export function from(options: theia.ThemableDecorationAttachmentRenderOptions): rpc.ContentDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            contentText: options.contentText,\n            contentIconPath: options.contentIconPath ? pathOrURIToURI(options.contentIconPath) : undefined,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            color: <string | types.ThemeColor>options.color,\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            margin: options.margin,\n            width: options.width,\n            height: options.height,\n        };\n    }\n}\n\nexport function pathOrURIToURI(value: string | URI): URI {\n    if (typeof value === 'undefined') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        return URI.file(value);\n    } else {\n        return value;\n    }\n}\n\nexport function pluginToPluginInfo(plugin: Plugin): rpc.PluginInfo {\n    return {\n        id: plugin.model.id,\n        name: plugin.model.name\n    };\n}\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// tslint:disable:no-any\n\nimport { Disposable } from './disposable';\nimport { MaybePromise } from './types';\n\n/**\n * Represents a typed event.\n */\nexport interface Event<T> {\n\n    /**\n     *\n     * @param listener The listener function will be call when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which a {{IDisposable}} will be added.\n     * @return a disposable to remove the listener again.\n     */\n    (listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]): Disposable;\n    /**\n     * An emitter will print a warning if more listeners are added for this event.\n     * The event.maxListeners allows the limit to be modified for this specific event.\n     * The value can be set to 0 to indicate an unlimited number of listener.\n     */\n    maxListeners: number\n}\n\nexport namespace Event {\n    const _disposable = { dispose(): void { } };\n    export const None: Event<any> = Object.assign(function (): { dispose(): void } { return _disposable; }, {\n        get maxListeners(): number { return 0; },\n        set maxListeners(maxListeners: number) { }\n    });\n\n    /**\n     * Given an event and a `map` function, returns another event which maps each element\n     * through the mapping function.\n     */\n    export function map<I, O>(event: Event<I>, mapFunc: (i: I) => O): Event<O> {\n        return Object.assign((listener: (e: O) => any, thisArgs?: any, disposables?: Disposable[]) =>\n            event(i => listener.call(thisArgs, mapFunc(i)), undefined, disposables)\n            , {\n                maxListeners: 0\n            }\n        );\n    }\n}\n\ntype Callback = (...args: any[]) => any;\nclass CallbackList implements Iterable<Callback> {\n\n    private _callbacks: Function[] | undefined;\n    private _contexts: any[] | undefined;\n\n    get length(): number {\n        return this._callbacks && this._callbacks.length || 0;\n    }\n\n    public add(callback: Function, context: any = undefined, bucket?: Disposable[]): void {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts!.push(context);\n\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n\n    public remove(callback: Function, context: any = undefined): void {\n        if (!this._callbacks) {\n            return;\n        }\n\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0; i < this._callbacks.length; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts![i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts!.splice(i, 1);\n                    return;\n                } else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n\n    // tslint:disable-next-line:typedef\n    public [Symbol.iterator]() {\n        if (!this._callbacks) {\n            return [][Symbol.iterator]();\n        }\n        const callbacks = this._callbacks.slice(0);\n        const contexts = this._contexts!.slice(0);\n\n        return callbacks.map((callback, i) =>\n            (...args: any[]) => callback.apply(contexts[i], args)\n        )[Symbol.iterator]();\n    }\n\n    public invoke(...args: any[]): any[] {\n        const ret: any[] = [];\n        for (const callback of this) {\n            try {\n                ret.push(callback(...args));\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        return ret;\n    }\n\n    public isEmpty(): boolean {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n\n    public dispose(): void {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\n\nexport interface EmitterOptions {\n    onFirstListenerAdd?: Function;\n    onLastListenerRemove?: Function;\n}\n\nexport class Emitter<T = any> {\n\n    private static _noop = function (): void { };\n\n    private _event: Event<T>;\n    private _callbacks: CallbackList | undefined;\n    private _disposed = false;\n\n    constructor(\n        private _options?: EmitterOptions\n    ) { }\n\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event(): Event<T> {\n        if (!this._event) {\n            this._event = Object.assign((listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                this.checkMaxListeners(this._event.maxListeners);\n\n                let result: Disposable;\n                result = {\n                    dispose: () => {\n                        result.dispose = Emitter._noop;\n                        if (!this._disposed) {\n                            this._callbacks!.remove(listener, thisArgs);\n                            result.dispose = Emitter._noop;\n                            if (this._options && this._options.onLastListenerRemove && this._callbacks!.isEmpty()) {\n                                this._options.onLastListenerRemove(this);\n                            }\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n\n                return result;\n            }, {\n                maxListeners: 30\n            }\n            );\n        }\n        return this._event;\n    }\n\n    protected checkMaxListeners(maxListeners: number): void {\n        if (maxListeners === 0 || !this._callbacks) {\n            return;\n        }\n        const count = this._callbacks.length;\n        if (count > maxListeners) {\n            console.warn(new Error(`Possible Emitter memory leak detected. ${count} listeners added. Use event.maxListeners to increase the limit (${maxListeners})`));\n        }\n    }\n\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event: T): any {\n        if (this._callbacks) {\n            this._callbacks.invoke(event);\n        }\n    }\n\n    /**\n     * Process each listener one by one.\n     * Return `false` to stop iterating over the listeners, `true` to continue.\n     */\n    async sequence(processor: (listener: (e: T) => any) => MaybePromise<boolean>): Promise<void> {\n        if (this._callbacks) {\n            for (const listener of this._callbacks) {\n                if (!await processor(listener)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    dispose(): void {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n        this._disposed = true;\n    }\n}\n\nexport interface WaitUntilEvent {\n    // tslint:disable:no-any\n    /**\n     * Allows to pause the event loop until the provided thenable resolved.\n     *\n     * *Note:* It can only be called during event dispatch and not in an asynchronous manner\n     *\n     * @param thenable A thenable that delays execution.\n     */\n    waitUntil(thenable: Promise<any>): void;\n    // tslint:enable:no-any\n}\nexport namespace WaitUntilEvent {\n    export async function fire<T extends WaitUntilEvent>(\n        emitter: Emitter<T>,\n        event: Pick<T, Exclude<keyof T, 'waitUntil'>>,\n        timeout: number | undefined = undefined\n    ): Promise<void> {\n        const waitables: Promise<void>[] = [];\n        const asyncEvent = Object.assign(event, {\n            // tslint:disable-next-line:no-any\n            waitUntil: (thenable: Promise<any>) => {\n                if (Object.isFrozen(waitables)) {\n                    throw new Error('waitUntil cannot be called asynchronously.');\n                }\n                waitables.push(thenable);\n            }\n        }) as T;\n        try {\n            emitter.fire(asyncEvent);\n            // Asynchronous calls to `waitUntil` should fail.\n            Object.freeze(waitables);\n        } finally {\n            delete asyncEvent['waitUntil'];\n        }\n        if (!waitables.length) {\n            return;\n        }\n        if (timeout !== undefined) {\n            await Promise.race([Promise.all(waitables), new Promise(resolve => setTimeout(resolve, timeout))]);\n        } else {\n            await Promise.all(waitables);\n        }\n    }\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!global[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = []\n  Object.defineProperty(global, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          retry()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      retry()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(global[gracefulQueue])\n      require('assert').equal(global[gracefulQueue].length, 0)\n    })\n  }\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  function readdir (path, options, cb) {\n    var args = [path]\n    if (typeof options !== 'function') {\n      args.push(options)\n    } else {\n      cb = options\n    }\n    args.push(go$readdir$cb)\n\n    return go$readdir(args)\n\n    function go$readdir$cb (err, files) {\n      if (files && files.sort)\n        files.sort()\n\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([go$readdir, [args]])\n\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    }\n  }\n\n  function go$readdir (args) {\n    return fs$readdir.apply(fs, args)\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  global[gracefulQueue].push(elem)\n}\n\nfunction retry () {\n  var elem = global[gracefulQueue].shift()\n  if (elem) {\n    debug('RETRY', elem[0].name, elem[1])\n    elem[0].apply(null, elem[1])\n  }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nvar _throwOnMissingSchema = true;\n/**\n * @internal\n */\nexport function setUriThrowOnMissingScheme(value) {\n    var old = _throwOnMissingSchema;\n    _throwOnMissingSchema = value;\n    return old;\n}\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme) {\n        if (_strict || _throwOnMissingSchema) {\n            throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n            // } else {\n            // \tconsole.warn(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${ret.authority}\", path: \"${ret.path}\", query: \"${ret.query}\", fragment: \"${ret.fragment}\"}`);\n        }\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (_strict || _throwOnMissingSchema) {\n        return scheme || _empty;\n    }\n    if (!scheme) {\n        // console.trace('BAD uri lacks scheme, falling back to file-scheme.');\n        scheme = 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport default URI;\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// tslint:disable-next-line:class-name\nvar _URI = (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\nvar _a;\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","'use strict'\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function () {\n    if (typeof arguments[arguments.length - 1] === 'function') fn.apply(this, arguments)\n    else {\n      return new Promise((resolve, reject) => {\n        arguments[arguments.length] = (err, res) => {\n          if (err) return reject(err)\n          resolve(res)\n        }\n        arguments.length++\n        fn.apply(this, arguments)\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function () {\n    const cb = arguments[arguments.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, arguments)\n    else fn.apply(this, arguments).then(r => cb(null, r), cb)\n  }, 'name', { value: fn.name })\n}\n","'use strict'\nconst u = require('universalify').fromCallback\nconst mkdirs = u(require('./mkdirs'))\nconst mkdirsSync = require('./mkdirs-sync')\n\nmodule.exports = {\n  mkdirs: mkdirs,\n  mkdirsSync: mkdirsSync,\n  // alias\n  mkdirp: mkdirs,\n  mkdirpSync: mkdirsSync,\n  ensureDir: mkdirs,\n  ensureDirSync: mkdirsSync\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Event, Emitter } from './event';\n\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    // tslint:disable-next-line:no-any\n    export function is(arg: any): arg is Disposable {\n        return !!arg && typeof arg === 'object' && 'dispose' in arg && typeof arg['dispose'] === 'function';\n    }\n    export function create(func: () => void): Disposable {\n        return {\n            dispose: func\n        };\n    }\n    export const NULL = create(() => { });\n}\n\nexport class DisposableCollection implements Disposable {\n\n    protected readonly disposables: Disposable[] = [];\n    protected readonly onDisposeEmitter = new Emitter<void>();\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    get onDispose(): Event<void> {\n        return this.onDisposeEmitter.event;\n    }\n\n    protected checkDisposed(): void {\n        if (this.disposed && !this.disposingElements) {\n            this.onDisposeEmitter.fire(undefined);\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    private disposingElements = false;\n    dispose(): void {\n        if (this.disposed || this.disposingElements) {\n            return;\n        }\n        this.disposingElements = true;\n        while (!this.disposed) {\n            try {\n                this.disposables.pop()!.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        this.disposingElements = false;\n        this.checkDisposed();\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        const originalDispose = disposable.dispose.bind(disposable);\n        const toRemove = Disposable.create(() => {\n            const index = disposables.indexOf(disposable);\n            if (index !== -1) {\n                disposables.splice(index, 1);\n            }\n            this.checkDisposed();\n        });\n        disposable.dispose = () => {\n            toRemove.dispose();\n            originalDispose();\n        };\n        return toRemove;\n    }\n\n    pushAll(disposables: Disposable[]): Disposable[] {\n        return disposables.map(disposable =>\n            this.push(disposable)\n        );\n    }\n\n}\n","'use strict'\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\n\nfunction pathExists (path) {\n  return fs.access(path).then(() => true).catch(() => false)\n}\n\nmodule.exports = {\n  pathExists: u(pathExists),\n  pathExistsSync: fs.existsSync\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/types.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/**\n * Returns `true` if the parameter has type \"object\" and not null, an array, a regexp, a date.\n */\n// tslint:disable-next-line:no-any\nexport function isObject(obj: any): boolean {\n    return typeof obj === 'object'\n        && obj !== null\n        && !Array.isArray(obj)\n        && !(obj instanceof RegExp)\n        && !(obj instanceof Date);\n}\n\n// tslint:disable-next-line:no-any\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n    if (!isObject(destination)) {\n        return source;\n    }\n\n    if (isObject(source)) {\n        Object.keys(source).forEach(key => {\n            if (key in destination) {\n                if (overwrite) {\n                    if (isObject(destination[key]) && isObject(source[key])) {\n                        mixin(destination[key], source[key], overwrite);\n                    } else {\n                        destination[key] = source[key];\n                    }\n                }\n            } else {\n                destination[key] = source[key];\n            }\n        });\n    }\n    return destination;\n}\n\nexport enum LogType {\n    Info,\n    Error\n}\n\nexport interface LogPart {\n    data: string;\n    type: LogType;\n}\n\n// tslint:disable-next-line:no-any\nexport interface KeysToAnyValues { [key: string]: any }\nexport interface KeysToKeysToAnyValue { [key: string]: KeysToAnyValues }\n\n// tslint:disable:no-any\n/** copied from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostTypes.ts#L18-L27 */\nexport function es5ClassCompat<T extends Function>(target: T): T {\n    /// @ts-ignore\n    function _(): any { return Reflect.construct(target, arguments, this.constructor); }\n    Object.defineProperty(_, 'name', Object.getOwnPropertyDescriptor(target, 'name')!);\n    Object.setPrototypeOf(_, target);\n    Object.setPrototypeOf(_.prototype, target.prototype);\n    return _ as unknown as T;\n}\n// tslint:enable:no-any\nconst _typeof = {\n    number: 'number',\n    string: 'string',\n    undefined: 'undefined',\n    object: 'object',\n    function: 'function'\n};\n// tslint:disable:no-any\n/**\n * @returns whether the provided parameter is a JavaScript Array or not.\n */\nexport function isArray(array: any): array is any[] {\n    if (Array.isArray) {\n        return Array.isArray(array);\n    }\n\n    if (array && typeof (array.length) === _typeof.number && array.constructor === Array) {\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: any): obj is undefined {\n    return typeof (obj) === _typeof.undefined;\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: any): obj is undefined | null {\n    return isUndefined(obj) || obj === null;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T> {\n    resolve: (value?: T) => void;\n    reject: (err?: any) => void; // tslint:disable-line\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    });\n}\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport * as types from '../types-impl';\n\n/* tslint:disable-next-line:no-any */\nexport function isLocationArray(array: any): array is types.Location[] {\n    return Array.isArray(array) && array.length > 0 && array[0] instanceof types.Location;\n}\n\n/* tslint:disable-next-line:no-any */\nexport function isDefinitionLinkArray(array: any): array is theia.DefinitionLink[] {\n    return Array.isArray(array) && array.length > 0 && array[0].hasOwnProperty('targetUri') && array[0].hasOwnProperty('targetRange');\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { UriComponents } from './uri-components';\nimport { FileStat } from '@theia/filesystem/lib/common';\nimport { SymbolInformation } from 'vscode-languageserver-types';\n\n// Should contains internal Plugin API types\n\n/**\n * Represents options to configure the behavior of showing a document in an editor.\n */\nexport interface TextDocumentShowOptions {\n    /**\n     * An optional selection to apply for the document in the editor.\n     */\n    selection?: Range;\n\n    /**\n     * An optional flag that when `true` will stop the editor from taking focus.\n     */\n    preserveFocus?: boolean;\n\n    /**\n     * An optional flag that controls if an editor-tab will be replaced\n     * with the next editor or if it will be kept.\n     */\n    preview?: boolean;\n\n    /**\n     * Denotes a location of an editor in the window. Editors can be arranged in a grid\n     * and each column represents one editor location in that grid by counting the editors\n     * in order of their appearance.\n     */\n    viewColumn?: theia.ViewColumn;\n}\n\nexport interface Range {\n    /**\n     * Line number on which the range starts (starts at 1).\n     */\n    readonly startLineNumber: number;\n    /**\n     * Column on which the range starts in line `startLineNumber` (starts at 1).\n     */\n    readonly startColumn: number;\n    /**\n     * Line number on which the range ends.\n     */\n    readonly endLineNumber: number;\n    /**\n     * Column on which the range ends in line `endLineNumber`.\n     */\n    readonly endColumn: number;\n}\n\nexport interface MarkdownString {\n    value: string;\n    isTrusted?: boolean;\n    uris?: {\n        [href: string]: UriComponents;\n    };\n}\n\nexport interface SerializedDocumentFilter {\n    $serialized: true;\n    language?: string;\n    scheme?: string;\n    pattern?: theia.GlobPattern;\n}\n\nexport interface FileWatcherSubscriberOptions {\n    globPattern: theia.GlobPattern;\n    ignoreCreateEvents?: boolean;\n    ignoreChangeEvents?: boolean;\n    ignoreDeleteEvents?: boolean;\n}\n\nexport interface FileChangeEvent {\n    subscriberId: string,\n    uri: UriComponents,\n    type: FileChangeEventType\n}\n\nexport interface FileMoveEvent {\n    subscriberId: string,\n    oldUri: UriComponents,\n    newUri: UriComponents\n}\n\nexport interface FileWillMoveEvent {\n    subscriberId: string,\n    oldUri: UriComponents,\n    newUri: UriComponents\n}\n\nexport type FileChangeEventType = 'created' | 'updated' | 'deleted';\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport interface CompletionContext {\n    triggerKind: CompletionTriggerKind;\n    triggerCharacter?: string;\n}\n\nexport enum CompletionItemInsertTextRule {\n    KeepWhitespace = 1,\n    InsertAsSnippet = 4\n}\n\nexport interface Completion {\n    label: string;\n    kind: CompletionItemKind;\n    detail?: string;\n    documentation?: string | MarkdownString;\n    sortText?: string;\n    filterText?: string;\n    preselect?: boolean;\n    insertText: string;\n    insertTextRules?: CompletionItemInsertTextRule;\n    range: Range;\n    commitCharacters?: string[];\n    additionalTextEdits?: SingleEditOperation[];\n    command?: Command;\n}\n\nexport interface SingleEditOperation {\n    range: Range;\n    text: string | null;\n    /**\n     * This indicates that this operation has \"insert\" semantics.\n     * i.e. forceMoveMarkers = true => if `range` is collapsed, all markers at the position will be moved.\n     */\n    forceMoveMarkers?: boolean;\n}\n\nexport interface Command {\n    id: string;\n    title: string;\n    tooltip?: string;\n    // tslint:disable-next-line:no-any\n    arguments?: any[];\n}\n\nexport enum CompletionItemKind {\n    Method = 0,\n    Function = 1,\n    Constructor = 2,\n    Field = 3,\n    Variable = 4,\n    Class = 5,\n    Struct = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Event = 10,\n    Operator = 11,\n    Unit = 12,\n    Value = 13,\n    Constant = 14,\n    Enum = 15,\n    EnumMember = 16,\n    Keyword = 17,\n    Text = 18,\n    Color = 19,\n    File = 20,\n    Reference = 21,\n    Customcolor = 22,\n    Folder = 23,\n    TypeParameter = 24,\n    Snippet = 25\n}\n\nexport class IdObject {\n    id?: number;\n}\nexport interface CompletionDto extends Completion {\n    id: number;\n    parentId: number;\n}\n\nexport interface CompletionResultDto extends IdObject {\n    id: number;\n    completions: CompletionDto[];\n    incomplete?: boolean;\n}\n\nexport interface MarkerData {\n    code?: string;\n    severity: MarkerSeverity;\n    message: string;\n    source?: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n    relatedInformation?: RelatedInformation[];\n    tags?: MarkerTag[];\n}\n\nexport interface RelatedInformation {\n    resource: string;\n    message: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n}\n\nexport interface ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownString;\n}\n\nexport interface SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n}\n\nexport interface SignatureHelp extends IdObject {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n}\n\nexport interface SignatureHelpContext {\n    triggerKind: theia.SignatureHelpTriggerKind;\n    triggerCharacter?: string;\n    isRetrigger: boolean;\n    activeSignatureHelp?: SignatureHelp;\n}\n\nexport interface Hover {\n    contents: MarkdownString[];\n    range?: Range;\n}\n\nexport interface HoverProvider {\n    provideHover(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Hover | undefined | Thenable<Hover | undefined>;\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\nexport interface DocumentHighlight {\n    range: Range;\n    kind?: DocumentHighlightKind;\n}\n\nexport interface DocumentHighlightProvider {\n    provideDocumentHighlights(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): DocumentHighlight[] | undefined;\n}\n\nexport interface FormattingOptions {\n    tabSize: number;\n    insertSpaces: boolean;\n}\n\nexport interface TextEdit {\n    range: Range;\n    text: string;\n    eol?: monaco.editor.EndOfLineSequence;\n}\n\nexport interface Location {\n    uri: UriComponents;\n    range: Range;\n}\n\nexport type Definition = Location | Location[];\n\nexport interface DefinitionLink {\n    uri: UriComponents;\n    range: Range;\n    origin?: Range;\n    selectionRange?: Range;\n}\n\nexport interface DefinitionProvider {\n    provideDefinition(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | DefinitionLink[] | undefined;\n}\n\nexport interface DeclarationProvider {\n    provideDeclaration(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | DefinitionLink[] | undefined;\n}\n\n/**\n * Value-object that contains additional information when\n * requesting references.\n */\nexport interface ReferenceContext {\n\n    /**\n     * Include the declaration of the current symbol.\n     */\n    includeDeclaration: boolean;\n}\n\nexport interface DocumentLink {\n    range: Range;\n    url?: UriComponents | string;\n    tooltip?: string;\n}\n\nexport interface DocumentLinkProvider {\n    provideLinks(model: monaco.editor.ITextModel, token: monaco.CancellationToken): DocumentLink[] | undefined | PromiseLike<DocumentLink[] | undefined>;\n    resolveLink?: (link: DocumentLink, token: monaco.CancellationToken) => DocumentLink | PromiseLike<DocumentLink[]>;\n}\n\nexport interface CodeLensSymbol {\n    range: Range;\n    command?: Command;\n}\n\nexport interface CodeAction {\n    title: string;\n    command?: Command;\n    edit?: WorkspaceEdit;\n    diagnostics?: MarkerData[];\n    kind?: string;\n}\n\nexport interface CodeActionContext {\n    only?: string;\n}\n\nexport interface CodeActionProvider {\n    provideCodeActions(\n        model: monaco.editor.ITextModel,\n        range: Range | Selection,\n        context: monaco.languages.CodeActionContext,\n        token: monaco.CancellationToken\n    ): CodeAction[] | PromiseLike<CodeAction[]>;\n\n    providedCodeActionKinds?: string[];\n}\n\nexport interface ResourceFileEdit {\n    oldUri: UriComponents;\n    newUri: UriComponents;\n    options: { overwrite?: boolean, ignoreIfNotExists?: boolean, ignoreIfExists?: boolean, recursive?: boolean };\n}\n\nexport interface ResourceTextEdit {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edits: TextEdit[];\n}\n\nexport interface WorkspaceEdit {\n    edits: Array<ResourceTextEdit | ResourceFileEdit>;\n    rejectReason?: string;\n}\n\nexport enum SymbolKind {\n    File = 0,\n    Module = 1,\n    Namespace = 2,\n    Package = 3,\n    Class = 4,\n    Method = 5,\n    Property = 6,\n    Field = 7,\n    Constructor = 8,\n    Enum = 9,\n    Interface = 10,\n    Function = 11,\n    Variable = 12,\n    Constant = 13,\n    String = 14,\n    Number = 15,\n    Boolean = 16,\n    Array = 17,\n    Object = 18,\n    Key = 19,\n    Null = 20,\n    EnumMember = 21,\n    Struct = 22,\n    Event = 23,\n    Operator = 24,\n    TypeParameter = 25\n}\n\nexport interface DocumentSymbol {\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    containerName?: string;\n    range: Range;\n    selectionRange: Range;\n    children?: DocumentSymbol[];\n}\n\nexport interface WorkspaceRootsChangeEvent {\n    roots: FileStat[];\n}\n\nexport interface WorkspaceFolder {\n    uri: UriComponents;\n    name: string;\n    index: number;\n}\n\nexport interface Breakpoint {\n    readonly id: string;\n    readonly enabled: boolean;\n    readonly condition?: string;\n    readonly hitCondition?: string;\n    readonly logMessage?: string;\n    readonly location?: Location;\n    readonly functionName?: string;\n}\n\nexport interface WorkspaceSymbolProvider {\n    provideWorkspaceSymbols(params: WorkspaceSymbolParams, token: monaco.CancellationToken): Thenable<SymbolInformation[]>;\n    resolveWorkspaceSymbol(symbol: SymbolInformation, token: monaco.CancellationToken): Thenable<SymbolInformation>\n}\n\nexport interface WorkspaceSymbolParams {\n    query: string\n}\n\nexport interface FoldingContext {\n}\n\nexport interface FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n}\n\nexport class FoldingRangeKind {\n    static readonly Comment = new FoldingRangeKind('comment');\n    static readonly Imports = new FoldingRangeKind('imports');\n    static readonly Region = new FoldingRangeKind('region');\n    public constructor(public value: string) { }\n}\n\nexport interface Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n}\n\nexport interface ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n}\n\nexport interface ColorInformation {\n    range: Range;\n    color: Color;\n}\n\nexport interface DocumentColorProvider {\n    provideDocumentColors(model: monaco.editor.ITextModel): PromiseLike<ColorInformation[]>;\n    provideColorPresentations(model: monaco.editor.ITextModel, colorInfo: ColorInformation): PromiseLike<ColorPresentation[]>;\n}\n\nexport interface Rejection {\n    rejectReason?: string;\n}\n\nexport interface RenameLocation {\n    range: Range;\n    text: string;\n}\n\nexport interface RenameProvider {\n    provideRenameEdits(model: monaco.editor.ITextModel, position: Position, newName: string): PromiseLike<WorkspaceEdit & Rejection>;\n    resolveRenameLocation?(model: monaco.editor.ITextModel, position: Position): PromiseLike<RenameLocation & Rejection>;\n}\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst rimraf = require('./rimraf')\n\nmodule.exports = {\n  remove: u(rimraf),\n  removeSync: rimraf.sync\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter } from './event';\n\nexport interface CancellationToken {\n    readonly isCancellationRequested: boolean;\n    /*\n\t * An event emitted when cancellation is requested\n\t * @event\n\t */\n    readonly onCancellationRequested: Event<void>;\n}\n\n// tslint:disable-next-line:no-any\nconst shortcutEvent: Event<void> = Object.freeze(Object.assign(function (callback: any, context?: any): any {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose(): void { clearTimeout(handle); } };\n}, { maxListeners: 0 }));\n\nexport namespace CancellationToken {\n\n    export const None: CancellationToken = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n\n    export const Cancelled: CancellationToken = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n}\n\nclass MutableToken implements CancellationToken {\n\n    private _isCancelled: boolean = false;\n    private _emitter: Emitter<void> | undefined;\n\n    public cancel(): void {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this._emitter = undefined;\n            }\n        }\n    }\n\n    get isCancellationRequested(): boolean {\n        return this._isCancelled;\n    }\n\n    get onCancellationRequested(): Event<void> {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter<void>();\n        }\n        return this._emitter.event;\n    }\n}\n\nexport class CancellationTokenSource {\n\n    private _token: CancellationToken;\n\n    get token(): CancellationToken {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n\n    cancel(): void {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        } else if (this._token !== CancellationToken.Cancelled) {\n            (<MutableToken>this._token).cancel();\n        }\n    }\n\n    dispose(): void {\n        this.cancel();\n    }\n}\n\nconst cancelledMessage = 'Cancelled';\n\nexport function cancelled(): Error {\n    return new Error(cancelledMessage);\n}\n\nexport function isCancelled(err: Error | undefined): boolean {\n    return !!err && err.message === cancelledMessage;\n}\n\nexport function checkCancelled(token?: CancellationToken): void {\n    if (!!token && token.isCancellationRequested) {\n        throw cancelled();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { JsonRpcServer } from '@theia/core/lib/common/messaging/proxy-factory';\nimport { RPCProtocol } from './rpc-protocol';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LogPart, KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CharacterPair, CommentRule, PluginAPIFactory, Plugin } from './plugin-api-rpc';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { IJSONSchema, IJSONSchemaSnippet } from '@theia/core/lib/common/json-schema';\nimport { RecursivePartial } from '@theia/core/lib/common/types';\nimport { PreferenceSchema, PreferenceSchemaProperties } from '@theia/core/lib/common/preferences/preference-schema';\nimport { ProblemMatcherContribution, ProblemPatternContribution, TaskDefinition } from '@theia/task/lib/common';\nimport { FileStat } from '@theia/filesystem/lib/common';\n\nexport const hostedServicePath = '/services/hostedPlugin';\n\n/**\n * Plugin engine (API) type, i.e. 'theiaPlugin', 'vscode', etc.\n */\nexport type PluginEngine = string;\n\n/**\n * This interface describes a package.json object.\n */\nexport interface PluginPackage {\n    name: string;\n    publisher: string;\n    version: string;\n    engines: {\n        [type in PluginEngine]: string;\n    };\n    theiaPlugin?: {\n        frontend?: string;\n        backend?: string;\n    };\n    main?: string;\n    displayName: string;\n    description: string;\n    contributes?: PluginPackageContribution;\n    packagePath: string;\n    activationEvents?: string[];\n    extensionDependencies?: string[];\n    extensionPack?: string[];\n}\nexport namespace PluginPackage {\n    export function toPluginUrl(pck: PluginPackage, relativePath: string): string {\n        return `hostedPlugin/${getPluginId(pck)}/${encodeURIComponent(relativePath)}`;\n    }\n}\n\n/**\n * This interface describes a package.json contribution section object.\n */\nexport interface PluginPackageContribution {\n    configuration?: RecursivePartial<PreferenceSchema> | RecursivePartial<PreferenceSchema>[];\n    configurationDefaults?: RecursivePartial<PreferenceSchemaProperties>;\n    languages?: PluginPackageLanguageContribution[];\n    grammars?: PluginPackageGrammarsContribution[];\n    viewsContainers?: { [location: string]: PluginPackageViewContainer[] };\n    views?: { [location: string]: PluginPackageView[] };\n    commands?: PluginPackageCommand | PluginPackageCommand[];\n    menus?: { [location: string]: PluginPackageMenu[] };\n    keybindings?: PluginPackageKeybinding | PluginPackageKeybinding[];\n    debuggers?: PluginPackageDebuggersContribution[];\n    snippets: PluginPackageSnippetsContribution[];\n    taskDefinitions?: PluginTaskDefinitionContribution[];\n    problemMatchers?: PluginProblemMatcherContribution[];\n    problemPatterns?: PluginProblemPatternContribution[];\n}\n\nexport interface PluginPackageViewContainer {\n    id: string;\n    title: string;\n    icon: string;\n}\n\nexport interface PluginPackageView {\n    id: string;\n    name: string;\n    when?: string;\n}\n\nexport interface PluginPackageCommand {\n    command: string;\n    title: string;\n    category?: string;\n    icon?: string | { light: string; dark: string; };\n}\n\nexport interface PluginPackageMenu {\n    command: string;\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\nexport interface PluginPackageKeybinding {\n    key?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n}\n\nexport interface PluginPackageGrammarsContribution {\n    language?: string;\n    scopeName: string;\n    path: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\nexport interface ScopeMap {\n    [scopeName: string]: string;\n}\n\nexport interface PluginPackageSnippetsContribution {\n    language?: string;\n    path?: string;\n}\n\nexport interface PlatformSpecificAdapterContribution {\n    program?: string;\n    args?: string[];\n    runtime?: string;\n    runtimeArgs?: string[];\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface PluginPackageDebuggersContribution extends PlatformSpecificAdapterContribution {\n    type: string;\n    label?: string;\n    languages?: string[];\n    enableBreakpointsFor?: { languageIds: string[] };\n    configurationAttributes: { [request: string]: IJSONSchema };\n    configurationSnippets: IJSONSchemaSnippet[];\n    variables?: ScopeMap;\n    adapterExecutableCommand?: string;\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\n/**\n * This interface describes a package.json languages contribution section object.\n */\nexport interface PluginPackageLanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: string;\n}\n\nexport interface PluginPackageLanguageContributionConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    autoClosingPairs?: (CharacterPair | AutoClosingPairConditional)[];\n    surroundingPairs?: (CharacterPair | AutoClosingPair)[];\n    wordPattern?: string;\n    indentationRules?: IndentationRules;\n    folding?: FoldingRules;\n}\n\nexport interface PluginTaskDefinitionContribution {\n    type: string;\n    required: string[];\n    properties?: {\n        [name: string]: {\n            type: string;\n            description?: string;\n            // tslint:disable-next-line:no-any\n            [additionalProperty: string]: any;\n        }\n    }\n}\n\nexport interface PluginProblemMatcherContribution extends ProblemMatcherContribution {\n    name: string;\n}\n\nexport interface PluginProblemPatternContribution extends ProblemPatternContribution {\n    name: string;\n}\n\nexport const PluginScanner = Symbol('PluginScanner');\n/**\n * This scanner process package.json object and returns plugin metadata objects.\n */\nexport interface PluginScanner {\n    /**\n     * The type of plugin's API (engine name)\n     */\n    apiType: PluginEngine;\n\n    /**\n     * Creates plugin's model.\n     *\n     * @param {PluginPackage} plugin\n     * @returns {PluginModel}\n     */\n    getModel(plugin: PluginPackage): PluginModel;\n\n    /**\n     * Creates plugin's lifecycle.\n     *\n     * @returns {PluginLifecycle}\n     */\n    getLifecycle(plugin: PluginPackage): PluginLifecycle;\n\n    getContribution(plugin: PluginPackage): PluginContribution | undefined;\n\n    /**\n     * A mapping between a dependency as its defined in package.json\n     * and its deployable form, e.g. `publisher.name` -> `vscode:extension/publisher.name`\n     */\n    getDependencies(plugin: PluginPackage): Map<string, string> | undefined;\n}\n\nexport const PluginDeployer = Symbol('PluginDeployer');\n\n/**\n * A plugin resolver is handling how to resolve a plugin link into a local resource.\n */\nexport const PluginDeployerResolver = Symbol('PluginDeployerResolver');\n/**\n * A resolver handle a set of resource\n */\nexport interface PluginDeployerResolver {\n\n    init?(pluginDeployerResolverInit: PluginDeployerResolverInit): void;\n\n    accept(pluginSourceId: string): boolean;\n\n    resolve(pluginResolverContext: PluginDeployerResolverContext): Promise<void>;\n\n}\n\nexport const PluginDeployerDirectoryHandler = Symbol('PluginDeployerDirectoryHandler');\nexport interface PluginDeployerDirectoryHandler {\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerDirectoryHandlerContext): Promise<void>;\n}\n\nexport const PluginDeployerFileHandler = Symbol('PluginDeployerFileHandler');\nexport interface PluginDeployerFileHandler {\n\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerFileHandlerContext): Promise<void>;\n}\n\nexport interface PluginDeployerResolverInit {\n\n}\n\nexport interface PluginDeployerResolverContext {\n\n    addPlugin(pluginId: string, path: string): void;\n\n    getPlugins(): PluginDeployerEntry[];\n\n    getOriginId(): string;\n\n}\n\nexport interface PluginDeployer {\n\n    start(): void;\n\n}\n\nexport enum PluginDeployerEntryType {\n\n    FRONTEND,\n\n    BACKEND\n}\n\nexport interface PluginDeployerEntry {\n\n    /**\n     * ID (before any resolution)\n     */\n    id(): string;\n\n    /**\n     * Original resolved path\n     */\n    originalPath(): string;\n\n    /**\n     * Local path on the filesystem\n     */\n    path(): string;\n\n    /**\n     * Get a specific entry\n     */\n    getValue<T>(key: string): T;\n\n    /**\n     * Store a value\n     */\n    storeValue<T>(key: string, value: T): void;\n\n    /**\n     * Update path\n     */\n    updatePath(newPath: string): void;\n\n    getChanges(): string[];\n\n    isFile(): boolean;\n\n    isDirectory(): boolean;\n\n    /**\n     * Resolved if a resolver has handle this plugin\n     */\n    isResolved(): boolean;\n\n    resolvedBy(): string;\n\n    /**\n     * Accepted when a handler is telling this location can go live\n     */\n    isAccepted(...types: PluginDeployerEntryType[]): boolean;\n\n    accept(...types: PluginDeployerEntryType[]): void;\n\n    hasError(): boolean;\n}\n\nexport interface PluginDeployerFileHandlerContext {\n\n    unzip(sourcePath: string, destPath: string): Promise<void>;\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\nexport interface PluginDeployerDirectoryHandlerContext {\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\n/**\n * This interface describes a plugin model object, which is populated from package.json.\n */\nexport interface PluginModel {\n    id: string;\n    name: string;\n    publisher: string;\n    version: string;\n    displayName: string;\n    description: string;\n    engine: {\n        type: PluginEngine;\n        version: string;\n    };\n    entryPoint: PluginEntryPoint;\n    packagePath: string;\n}\n\nexport interface PluginEntryPoint {\n    frontend?: string;\n    backend?: string;\n}\n\n/**\n * This interface describes some static plugin contributions.\n */\nexport interface PluginContribution {\n    activationEvents?: string[];\n    configuration?: PreferenceSchema[];\n    configurationDefaults?: PreferenceSchemaProperties;\n    languages?: LanguageContribution[];\n    grammars?: GrammarsContribution[];\n    viewsContainers?: { [location: string]: ViewContainer[] };\n    views?: { [location: string]: View[] };\n    commands?: PluginCommand[]\n    menus?: { [location: string]: Menu[] };\n    keybindings?: Keybinding[];\n    debuggers?: DebuggerContribution[];\n    snippets?: SnippetContribution[];\n    taskDefinitions?: TaskDefinition[];\n    problemMatchers?: ProblemMatcherContribution[];\n    problemPatterns?: ProblemPatternContribution[];\n}\n\nexport interface SnippetContribution {\n    uri: string\n    source: string\n    language?: string\n}\n\nexport interface GrammarsContribution {\n    format: 'json' | 'plist';\n    language?: string;\n    scope: string;\n    grammar?: string | object;\n    grammarLocation?: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\n/**\n * The language contribution\n */\nexport interface LanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: LanguageConfiguration;\n}\n\nexport interface LanguageConfiguration {\n    brackets?: CharacterPair[];\n    indentationRules?: IndentationRules;\n    surroundingPairs?: AutoClosingPair[];\n    autoClosingPairs?: AutoClosingPairConditional[];\n    comments?: CommentRule;\n    folding?: FoldingRules;\n    wordPattern?: string;\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface DebuggerContribution extends PlatformSpecificAdapterContribution {\n    type: string,\n    label?: string,\n    languages?: string[],\n    enableBreakpointsFor?: {\n        languageIds: string[]\n    },\n    configurationAttributes?: IJSONSchema[],\n    configurationSnippets?: IJSONSchemaSnippet[],\n    variables?: ScopeMap,\n    adapterExecutableCommand?: string\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\nexport interface IndentationRules {\n    increaseIndentPattern: string;\n    decreaseIndentPattern: string;\n    unIndentedLinePattern?: string;\n    indentNextLinePattern?: string;\n}\nexport interface AutoClosingPair {\n    close: string;\n    open: string;\n}\n\nexport interface AutoClosingPairConditional extends AutoClosingPair {\n    notIn?: string[];\n}\n\nexport interface FoldingMarkers {\n    start: string;\n    end: string;\n}\n\nexport interface FoldingRules {\n    offSide?: boolean;\n    markers?: FoldingMarkers;\n}\n\n/**\n * Views Containers contribution\n */\nexport interface ViewContainer {\n    id: string;\n    title: string;\n    iconUrl: string;\n}\n\n/**\n * View contribution\n */\nexport interface View {\n    id: string;\n    name: string;\n    when?: string;\n}\n\nexport interface PluginCommand {\n    command: string;\n    title: string;\n    category?: string;\n    iconUrl?: IconUrl;\n}\n\nexport type IconUrl = string | { light: string; dark: string; };\n\n/**\n * Menu contribution\n */\nexport interface Menu {\n    command: string;\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\n/**\n * Keybinding contribution\n */\nexport interface Keybinding {\n    keybinding?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n}\n\n/**\n * This interface describes a plugin lifecycle object.\n */\nexport interface PluginLifecycle {\n    startMethod: string;\n    stopMethod: string;\n    /**\n     * Frontend module name, frontend plugin should expose this name.\n     */\n    frontendModuleName?: string;\n    /**\n     * Path to the script which should do some initialization before frontend plugin is loaded.\n     */\n    frontendInitPath?: string;\n    /**\n     * Path to the script which should do some initialization before backend plugin is loaded.\n     */\n    backendInitPath?: string;\n}\n\n/**\n * The export function of initialization module of backend plugin.\n */\nexport interface BackendInitializationFn {\n    (apiFactory: PluginAPIFactory, plugin: Plugin): void;\n}\n\nexport interface BackendLoadingFn {\n    (rpc: RPCProtocol, plugin: Plugin): void;\n}\n\nexport interface PluginContext {\n    subscriptions: Disposable[];\n}\n\nexport interface ExtensionContext {\n    subscriptions: Disposable[];\n}\n\nexport interface PluginMetadata {\n    host: string;\n    model: PluginModel;\n    lifecycle: PluginLifecycle;\n}\n\nexport const MetadataProcessor = Symbol('MetadataProcessor');\nexport interface MetadataProcessor {\n    process(pluginMetadata: PluginMetadata): void;\n}\n\nexport function getPluginId(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport function buildFrontendModuleName(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport const HostedPluginClient = Symbol('HostedPluginClient');\nexport interface HostedPluginClient {\n    postMessage(message: string): Promise<void>;\n\n    log(logPart: LogPart): void;\n\n    onDidDeploy(): void;\n}\n\nexport interface PluginDependencies {\n    metadata: PluginMetadata\n    mapping?: Map<string, string>\n}\n\nexport const PluginDeployerHandler = Symbol('PluginDeployerHandler');\nexport interface PluginDeployerHandler {\n    deployFrontendPlugins(frontendPlugins: PluginDeployerEntry[]): Promise<void>;\n    deployBackendPlugins(backendPlugins: PluginDeployerEntry[]): Promise<void>;\n\n    getPluginDependencies(pluginToBeInstalled: PluginDeployerEntry): Promise<PluginDependencies | undefined>\n}\n\nexport interface GetDeployedPluginsParams {\n    pluginIds: string[]\n}\n\nexport interface DeployedPlugin {\n    metadata: PluginMetadata;\n    contributes?: PluginContribution;\n}\n\nexport const HostedPluginServer = Symbol('HostedPluginServer');\nexport interface HostedPluginServer extends JsonRpcServer<HostedPluginClient> {\n\n    getDeployedPluginIds(): Promise<string[]>;\n\n    getDeployedPlugins(params: GetDeployedPluginsParams): Promise<DeployedPlugin[]>;\n\n    getExtPluginAPI(): Promise<ExtPluginApi[]>;\n\n    onMessage(message: string): Promise<void>;\n\n}\n\nexport interface WorkspaceStorageKind {\n    workspace?: FileStat | undefined;\n    roots: FileStat[];\n}\nexport type GlobalStorageKind = undefined;\nexport type PluginStorageKind = GlobalStorageKind | WorkspaceStorageKind;\n\n/**\n * The JSON-RPC workspace interface.\n */\nexport const pluginServerJsonRpcPath = '/services/plugin-ext';\nexport const PluginServer = Symbol('PluginServer');\nexport interface PluginServer {\n\n    /**\n     * Deploy a plugin\n     */\n    deploy(pluginEntry: string): Promise<void>;\n\n    setStorageValue(key: string, value: KeysToAnyValues, kind: PluginStorageKind): Promise<boolean>;\n    getStorageValue(key: string, kind: PluginStorageKind): Promise<KeysToAnyValues>;\n    getAllStorageValues(kind: PluginStorageKind): Promise<KeysToKeysToAnyValue>;\n}\n\nexport const ServerPluginRunner = Symbol('ServerPluginRunner');\nexport interface ServerPluginRunner {\n    // tslint:disable-next-line:no-any\n    acceptMessage(jsonMessage: any): boolean;\n    // tslint:disable-next-line:no-any\n    onMessage(jsonMessage: any): void;\n    setClient(client: HostedPluginClient): void;\n    setDefault(defaultRunner: ServerPluginRunner): void;\n    clientClosed(): void;\n\n    /**\n     * Provides additional deployed plugins.\n     */\n    getExtraDeployedPlugins(): Promise<DeployedPlugin[]>;\n\n    /**\n     * Provides additional plugin ids.\n     */\n    getExtraDeployedPluginIds(): Promise<string[]>;\n\n}\n\nexport const PluginHostEnvironmentVariable = Symbol('PluginHostEnvironmentVariable');\nexport interface PluginHostEnvironmentVariable {\n    process(env: NodeJS.ProcessEnv): void;\n}\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * On POSIX:\n * \n *           dir             base    \n *                \n *  root                 name  ext \n * \"  /     home/user/dir / file  .txt \"\n * \n *\n * On Windows:\n * \n *            dir            base    \n *                \n *  root                 name  ext \n * \"  /c: / home/user/dir / file  .txt \"\n * \n */\nexport class Path {\n    static separator: '/' = '/';\n\n    static isDrive(segment: string): boolean {\n        return segment.endsWith(':');\n    }\n\n    /**\n     * vscode-uri always normalizes drive letters to lower case:\n     * https://github.com/Microsoft/vscode-uri/blob/b1d3221579f97f28a839b6f996d76fc45e9964d8/src/index.ts#L1025\n     * Theia path should be adjusted to this.\n     */\n    static normalizeDrive(path: string): string {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* '/' */ && path.charCodeAt(2) === 58 /* ':' */) {\n            const code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n            }\n        } else if (path.length >= 2 && path.charCodeAt(1) === 58 /* ':' */) {\n            const code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"/c:\".length === 3\n            }\n        }\n        return path;\n    }\n\n    readonly isAbsolute: boolean;\n    readonly isRoot: boolean;\n    readonly root: Path | undefined;\n    readonly base: string;\n    readonly name: string;\n    readonly ext: string;\n\n    private _dir: Path;\n    private readonly raw: string;\n\n    /**\n     * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n     */\n    constructor(\n        raw: string\n    ) {\n        this.raw = Path.normalizeDrive(raw);\n        const firstIndex = raw.indexOf(Path.separator);\n        const lastIndex = raw.lastIndexOf(Path.separator);\n        this.isAbsolute = firstIndex === 0;\n        this.base = lastIndex === -1 ? raw : raw.substr(lastIndex + 1);\n        this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n        this.root = this.computeRoot();\n\n        const extIndex = this.base.lastIndexOf('.');\n        this.name = extIndex === -1 ? this.base : this.base.substr(0, extIndex);\n        this.ext = extIndex === -1 ? '' : this.base.substr(extIndex);\n    }\n\n    protected computeRoot(): Path | undefined {\n        // '/' -> '/'\n        // '/c:' -> '/c:'\n        if (this.isRoot) {\n            return this;\n        }\n        // 'foo/bar' -> `undefined`\n        if (!this.isAbsolute) {\n            return undefined;\n        }\n        const index = this.raw.indexOf(Path.separator, Path.separator.length);\n        if (index === -1) {\n            // '/foo/bar' -> '/'\n            return new Path(Path.separator);\n        }\n        // '/c:/foo/bar' -> '/c:'\n        // '/foo/bar' -> '/'\n        return new Path(this.raw.substr(0, index)).root;\n    }\n\n    /**\n     * Returns the parent directory if it exists (`hasDir === true`) or `this` otherwise.\n     */\n    get dir(): Path {\n        if (this._dir === undefined) {\n            this._dir = this.computeDir();\n        }\n        return this._dir;\n    }\n\n    /**\n     * Returns `true` if this has a parent directory, `false` otherwise.\n     *\n     * _This implementation returns `true` if and only if this is not the root dir and\n     * there is a path separator in the raw path._\n     */\n    get hasDir(): boolean {\n        return !this.isRoot && this.raw.lastIndexOf(Path.separator) !== -1;\n    }\n\n    protected computeDir(): Path {\n        if (!this.hasDir) {\n            return this;\n        }\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        if (this.isAbsolute) {\n            const firstIndex = this.raw.indexOf(Path.separator);\n            if (firstIndex === lastIndex) {\n                return new Path(this.raw.substr(0, firstIndex + 1));\n            }\n        }\n        return new Path(this.raw.substr(0, lastIndex));\n    }\n\n    join(...paths: string[]): Path {\n        const relativePath = paths.filter(s => !!s).join(Path.separator);\n        if (!relativePath) {\n            return this;\n        }\n        if (this.raw.endsWith(Path.separator)) {\n            return new Path(this.raw + relativePath);\n        }\n        return new Path(this.raw + Path.separator + relativePath);\n    }\n\n    toString(): string {\n        return this.raw;\n    }\n\n    relative(path: Path): Path | undefined {\n        if (this.raw === path.raw) {\n            return new Path('');\n        }\n        if (!this.raw || !path.raw) {\n            return undefined;\n        }\n        const raw = this.base ? this.raw + Path.separator : this.raw;\n        if (!path.raw.startsWith(raw)) {\n            return undefined;\n        }\n        const relativePath = path.raw.substr(raw.length);\n        return new Path(relativePath);\n    }\n\n    isEqualOrParent(path: Path): boolean {\n        return !!this.relative(path);\n    }\n\n    relativity(path: Path): number {\n        const relative = this.relative(path);\n        if (relative) {\n            const relativeStr = relative.toString();\n            if (relativeStr === '') {\n                return 0;\n            }\n            return relativeStr.split(Path.separator).length;\n        }\n        return -1;\n    }\n\n    /*\n     * return a normalized Path, resolving '..' and '.' segments\n     */\n    normalize(): Path {\n        const trailingSlash = this.raw.endsWith('/');\n        const pathArray = this.toString().split('/');\n        const resultArray: string[] = [];\n        pathArray.forEach((value, index) => {\n            if (!value || value === '.') {\n                return;\n            }\n            if (value === '..') {\n                if (resultArray.length && resultArray[resultArray.length - 1] !== '..') {\n                    resultArray.pop();\n                } else if (!this.isAbsolute) {\n                    resultArray.push('..');\n                }\n            } else {\n                resultArray.push(value);\n            }\n        });\n        if (resultArray.length === 0) {\n            if (this.isRoot) {\n                return new Path('/');\n            } else {\n                return new Path('.');\n            }\n        }\n        return new Path((this.isAbsolute ? '/' : '') + resultArray.join('/') + (trailingSlash ? '/' : ''));\n    }\n}\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nvar random_1 = require(\"./random\");\n/**\n * The namespace for UUID related functionality.\n */\nvar UUID;\n(function (UUID) {\n    /**\n     * A function which generates UUID v4 identifiers.\n     *\n     * @returns A new UUID v4 string.\n     *\n     * #### Notes\n     * This implementation complies with RFC 4122.\n     *\n     * This uses `Random.getRandomValues()` for random bytes, which in\n     * turn will use the underlying `crypto` module of the platform if\n     * it is available. The fallback for randomness is `Math.random`.\n     */\n    UUID.uuid4 = (function () {\n        // Create a 16 byte array to hold the random values.\n        var bytes = new Uint8Array(16);\n        // Create a look up table from bytes to hex strings.\n        var lut = new Array(256);\n        // Pad the single character hex digits with a leading zero.\n        for (var i = 0; i < 16; ++i) {\n            lut[i] = '0' + i.toString(16);\n        }\n        // Populate the rest of the hex digits.\n        for (var i = 16; i < 256; ++i) {\n            lut[i] = i.toString(16);\n        }\n        // Return a function which generates the UUID.\n        return function uuid4() {\n            // Get a new batch of random values.\n            random_1.Random.getRandomValues(bytes);\n            // Set the UUID version number to 4.\n            bytes[6] = 0x40 | (bytes[6] & 0x0F);\n            // Set the clock sequence bit to the RFC spec.\n            bytes[8] = 0x80 | (bytes[8] & 0x3F);\n            // Assemble the UUID string.\n            return (lut[bytes[0]] +\n                lut[bytes[1]] +\n                lut[bytes[2]] +\n                lut[bytes[3]] +\n                '-' +\n                lut[bytes[4]] +\n                lut[bytes[5]] +\n                '-' +\n                lut[bytes[6]] +\n                lut[bytes[7]] +\n                '-' +\n                lut[bytes[8]] +\n                lut[bytes[9]] +\n                '-' +\n                lut[bytes[10]] +\n                lut[bytes[11]] +\n                lut[bytes[12]] +\n                lut[bytes[13]] +\n                lut[bytes[14]] +\n                lut[bytes[15]]);\n        };\n    })();\n})(UUID = exports.UUID || (exports.UUID = {}));\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/paths.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { startsWithIgnoreCase } from './strings';\nimport { isWindows } from '@theia/core/lib/common/os';\nimport { CharCode } from './char-code';\n\n/**\n * The forward slash path separator.\n */\nexport const sep = '/';\n\n/**\n * The native path separator depending on the OS.\n */\nexport const nativeSep = isWindows ? '\\\\' : '/';\n\nconst _posixBadPath = /(\\/\\.\\.?\\/)|(\\/\\.\\.?)$|^(\\.\\.?\\/)|(\\/\\/+)|(\\\\)/;\nconst _winBadPath = /(\\\\\\.\\.?\\\\)|(\\\\\\.\\.?)$|^(\\.\\.?\\\\)|(\\\\\\\\+)|(\\/)/;\n\nfunction _isNormal(path: string, win: boolean): boolean {\n    return win\n        ? !_winBadPath.test(path)\n        : !_posixBadPath.test(path);\n}\n\n/**\n * @returns the base name of a path.\n */\nexport function basename(path: string): string {\n    const idx = ~path.lastIndexOf('/') || ~path.lastIndexOf('\\\\');\n    if (idx === 0) {\n        return path;\n    } else if (~idx === path.length - 1) {\n        return basename(path.substring(0, path.length - 1));\n    } else {\n        return path.substr(~idx + 1);\n    }\n}\n\n/**\n * @returns `.far` from `boo.far` or the empty string.\n */\nexport function extname(path: string): string {\n    path = basename(path);\n    const idx = ~path.lastIndexOf('.');\n    return idx ? path.substring(~idx) : '';\n}\n\nexport function normalize(path: string, toOSPath?: boolean): string {\n\n    if (path === null || path === void 0) {\n        return path;\n    }\n\n    const len = path.length;\n    if (len === 0) {\n        return '.';\n    }\n\n    const wantsBackslash = isWindows && toOSPath;\n    if (_isNormal(path, wantsBackslash!)) {\n        return path;\n    }\n\n    // tslint:disable-next-line:no-shadowed-variable\n    const sep = wantsBackslash ? '\\\\' : '/';\n    const root = getRoot(path, sep);\n\n    // skip the root-portion of the path\n    let start = root.length;\n    let skip = false;\n    let res = '';\n\n    for (let end = root.length; end <= len; end++) {\n\n        // either at the end or at a path-separator character\n        if (end === len || path.charCodeAt(end) === CharCode.Slash || path.charCodeAt(end) === CharCode.Backslash) {\n\n            if (streql(path, start, end, '..')) {\n                // skip current and remove parent (if there is already something)\n                const prev_start = res.lastIndexOf(sep);\n                const prev_part = res.slice(prev_start + 1);\n                if ((root || prev_part.length > 0) && prev_part !== '..') {\n                    res = prev_start === -1 ? '' : res.slice(0, prev_start);\n                    skip = true;\n                }\n            } else if (streql(path, start, end, '.') && (root || res || end < len - 1)) {\n                // skip current (if there is already something or if there is more to come)\n                skip = true;\n            }\n\n            if (!skip) {\n                const part = path.slice(start, end);\n                if (res !== '' && res[res.length - 1] !== sep) {\n                    res += sep;\n                }\n                res += part;\n            }\n            start = end + 1;\n            skip = false;\n        }\n    }\n\n    return root + res;\n}\nfunction streql(value: string, start: number, end: number, other: string): boolean {\n    return start + other.length === end && value.indexOf(other, start) === start;\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\n// tslint:disable-next-line:no-shadowed-variable\nexport function getRoot(path: string, sep: string = '/'): string {\n\n    if (!path) {\n        return '';\n    }\n\n    const len = path.length;\n    let code = path.charCodeAt(0);\n    if (code === CharCode.Slash || code === CharCode.Backslash) {\n\n        code = path.charCodeAt(1);\n        if (code === CharCode.Slash || code === CharCode.Backslash) {\n            // UNC candidate \\\\localhost\\shares\\ddd\n            //               ^^^^^^^^^^^^^^^^^^^\n            code = path.charCodeAt(2);\n            if (code !== CharCode.Slash && code !== CharCode.Backslash) {\n                // tslint:disable-next-line:no-shadowed-variable\n                let pos = 3;\n                const start = pos;\n                for (; pos < len; pos++) {\n                    code = path.charCodeAt(pos);\n                    if (code === CharCode.Slash || code === CharCode.Backslash) {\n                        break;\n                    }\n                }\n                code = path.charCodeAt(pos + 1);\n                if (start !== pos && code !== CharCode.Slash && code !== CharCode.Backslash) {\n                    pos += 1;\n                    for (; pos < len; pos++) {\n                        code = path.charCodeAt(pos);\n                        if (code === CharCode.Slash || code === CharCode.Backslash) {\n                            return path.slice(0, pos + 1) // consume this separator\n                                .replace(/[\\\\/]/g, sep);\n                        }\n                    }\n                }\n            }\n        }\n\n        // /user/far\n        // ^\n        return sep;\n\n    } else if ((code >= CharCode.A && code <= CharCode.Z) || (code >= CharCode.a && code <= CharCode.z)) {\n        // check for windows drive letter c:\\ or c:\n\n        if (path.charCodeAt(1) === CharCode.Colon) {\n            code = path.charCodeAt(2);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                // C:\\fff\n                // ^^^\n                return path.slice(0, 2) + sep;\n            } else {\n                // C:\n                // ^^\n                return path.slice(0, 2);\n            }\n        }\n    }\n\n    // check for URI\n    // scheme://authority/path\n    // ^^^^^^^^^^^^^^^^^^^\n    let pos = path.indexOf('://');\n    if (pos !== -1) {\n        pos += 3; // 3 -> \"://\".length\n        for (; pos < len; pos++) {\n            code = path.charCodeAt(pos);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                return path.slice(0, pos + 1); // consume this separator\n            }\n        }\n    }\n\n    return '';\n}\n\nexport function isEqualOrParent(path: string, candidate: string, ignoreCase?: boolean): boolean {\n    if (path === candidate) {\n        return true;\n    }\n\n    if (!path || !candidate) {\n        return false;\n    }\n\n    if (candidate.length > path.length) {\n        return false;\n    }\n\n    if (ignoreCase) {\n        const beginsWith = startsWithIgnoreCase(path, candidate);\n        if (!beginsWith) {\n            return false;\n        }\n\n        if (candidate.length === path.length) {\n            return true; // same path, different casing\n        }\n\n        let sepOffset = candidate.length;\n        if (candidate.charAt(candidate.length - 1) === nativeSep) {\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n        }\n\n        return path.charAt(sepOffset) === nativeSep;\n    }\n\n    if (candidate.charAt(candidate.length - 1) !== nativeSep) {\n        candidate += nativeSep;\n    }\n\n    return path.indexOf(candidate) === 0;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/strings.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from './char-code';\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack: string, needle: string): boolean {\n    const diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.indexOf(needle, diff) === diff;\n    } else if (diff === 0) {\n        return haystack === needle;\n    } else {\n        return false;\n    }\n}\nexport function isLowerAsciiLetter(code: number): boolean {\n    return code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n    return code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n    const len1 = a ? a.length : 0;\n    const len2 = b ? b.length : 0;\n\n    if (len1 !== len2) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n    if (typeof a !== 'string' || typeof b !== 'string') {\n        return false;\n    }\n\n    for (let i = 0; i < stopAt; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n\n        if (codeA === codeB) {\n            continue;\n        }\n\n        // a-z A-Z\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n            const diff = Math.abs(codeA - codeB);\n            if (diff !== 0 && diff !== 32) {\n                return false;\n            }\n        }\n\n        // Any other charcode\n        // tslint:disable-next-line:one-line\n        else {\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MarkdownString as IMarkdownString } from '../common/plugin-api-rpc-model';\n\nexport class MarkdownString {\n\n    value: string;\n    isTrusted?: boolean;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(value: string): MarkdownString {\n        // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n        this.value += value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&');\n        return this;\n    }\n\n    appendMarkdown(value: string): MarkdownString {\n        this.value += value;\n        return this;\n    }\n\n    appendCodeblock(code: string, language: string = ''): MarkdownString {\n        this.value += '\\n```';\n        this.value += language;\n        this.value += '\\n';\n        this.value += code;\n        this.value += '\\n```\\n';\n        return this;\n    }\n}\n\n// tslint:disable-next-line:no-any\nexport function isMarkdownString(thing: any): thing is IMarkdownString {\n    if (thing instanceof MarkdownString) {\n        return true;\n    } else if (thing && typeof thing === 'object') {\n        return typeof (<MarkdownString>thing).value === 'string'\n            && (typeof (<MarkdownString>thing).isTrusted === 'boolean' || (<MarkdownString>thing).isTrusted === void 0);\n    }\n    return false;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","'use strict'\n\nconst u = require('universalify').fromCallback\nconst jsonFile = require('jsonfile')\n\nmodule.exports = {\n  // jsonfile exports\n  readJson: u(jsonFile.readFile),\n  readJsonSync: jsonFile.readFileSync,\n  writeJson: u(jsonFile.writeFile),\n  writeJsonSync: jsonFile.writeFileSync\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '@theia/core/lib/common/uri';\n\nexport interface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n    external?: string;\n}\n\n// some well known URI schemas\nexport namespace Schemes {\n    export const FILE = 'file';\n    export const UNTITLED = 'untitled';\n    export const HTTP: string = 'http';\n    export const HTTPS: string = 'https';\n    export const MAILTO: string = 'mailto';\n    export const DATA: string = 'data';\n    /**\n     * A schema is used for models that exist in memory\n     * only and that have no correspondence on a server or such.\n     */\n    export const IN_MEMORY: string = 'inmemory';\n    /** A schema is used for settings files. */\n    export const VSCODE: string = 'vscode';\n    /** A schema is used for internal private files. */\n    export const INTERNAL: string = 'private';\n    export const COMMAND: string = 'command';\n}\n\nexport function theiaUritoUriComponents(uri: URI): UriComponents {\n    return {\n        scheme: uri.scheme,\n        authority: uri.authority,\n        path: uri.path.toString(),\n        query: uri.query,\n        fragment: uri.fragment\n    };\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// tslint:disable-next-line:no-any\nexport function ok(val?: any, message?: string): void {\n    if (!val || val === null) {\n        throw new Error(message ? `Assertion failed (${message})` : 'Assertion failed');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // tslint:disable-next-line:no-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/extensions/node/rpcProtocol.ts\n// with small modifications\n\n/* tslint:disable:no-any */\n\nimport { Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport VSCodeURI from 'vscode-uri';\nimport URI from '@theia/core/lib/common/uri';\nimport { CancellationToken, CancellationTokenSource } from 'vscode-languageserver-protocol';\nimport { Range, Position } from '../plugin/types-impl';\n\nexport interface MessageConnection {\n    send(msg: {}): void;\n    onMessage: Event<{}>;\n}\n\nexport const RPCProtocol = Symbol('RPCProtocol');\nexport interface RPCProtocol extends Disposable {\n    /**\n     * Returns a proxy to an object addressable/named in the plugin process or in the main process.\n     */\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T;\n\n    /**\n     * Register manually created instance.\n     */\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R;\n\n}\n\nexport class ProxyIdentifier<T> {\n    public readonly id: string;\n    constructor(public readonly isMain: boolean, id: string | T) {\n        // TODO this is nasty, rewrite this\n        this.id = (id as any).toString();\n    }\n}\n\nexport function createProxyIdentifier<T>(identifier: string): ProxyIdentifier<T> {\n    return new ProxyIdentifier(false, identifier);\n}\n\nexport class RPCProtocolImpl implements RPCProtocol {\n\n    private readonly locals = new Map<string, any>();\n    private readonly proxies = new Map<string, any>();\n    private lastMessageId = 0;\n    private readonly cancellationTokenSources = new Map<string, CancellationTokenSource>();\n    private readonly pendingRPCReplies = new Map<string, Deferred<any>>();\n    private readonly multiplexor: RPCMultiplexer;\n    private messageToSendHostId: string | undefined;\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as no disposed */ })\n    );\n\n    constructor(connection: MessageConnection, readonly remoteHostID?: string) {\n        this.toDispose.push(\n            this.multiplexor = new RPCMultiplexer(connection, msg => this.receiveOneMessage(msg), remoteHostID)\n        );\n        this.toDispose.push(Disposable.create(() => {\n            this.proxies.clear();\n            for (const reply of this.pendingRPCReplies.values()) {\n                reply.reject(new Error('connection is closed'));\n            }\n            this.pendingRPCReplies.clear();\n        }));\n    }\n\n    private get isDisposed(): boolean {\n        return this.toDispose.disposed;\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T {\n        if (this.isDisposed) {\n            throw new Error('connection is closed');\n        }\n        let proxy = this.proxies.get(proxyId.id);\n        if (!proxy) {\n            proxy = this.createProxy(proxyId.id);\n            this.proxies.set(proxyId.id, proxy);\n        }\n        return proxy;\n    }\n\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R {\n        if (this.isDisposed) {\n            throw new Error('connection is closed');\n        }\n        this.locals.set(identifier.id, instance);\n        if (Disposable.is(instance)) {\n            this.toDispose.push(instance);\n        }\n        this.toDispose.push(Disposable.create(() => this.locals.delete(identifier.id)));\n        return instance;\n    }\n\n    private createProxy<T>(proxyId: string): T {\n        const handler = {\n            get: (target: any, name: string) => {\n                if (!target[name] && name.charCodeAt(0) === 36 /* CharCode.DollarSign */) {\n                    target[name] = (...myArgs: any[]) =>\n                        this.remoteCall(proxyId, name, myArgs);\n                }\n                return target[name];\n            }\n        };\n        // tslint:disable-next-line:no-null-keyword\n        return new Proxy(Object.create(null), handler);\n    }\n\n    private remoteCall(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        if (this.isDisposed) {\n            return Promise.reject(new Error('connection is closed'));\n        }\n        const cancellationToken: CancellationToken | undefined = args.length && CancellationToken.is(args[args.length - 1]) ? args.pop() : undefined;\n        if (cancellationToken && cancellationToken.isCancellationRequested) {\n            return Promise.reject(canceled());\n        }\n\n        const callId = String(++this.lastMessageId);\n        const result = new Deferred();\n\n        if (cancellationToken) {\n            args.push('add.cancellation.token');\n            cancellationToken.onCancellationRequested(() =>\n                this.multiplexor.send(MessageFactory.cancel(callId, this.messageToSendHostId))\n            );\n        }\n\n        this.pendingRPCReplies.set(callId, result);\n        this.multiplexor.send(MessageFactory.request(callId, proxyId, methodName, args, this.messageToSendHostId));\n        return result.promise;\n    }\n\n    private receiveOneMessage(rawmsg: string): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        const msg = <RPCMessage>JSON.parse(rawmsg, ObjectsTransferrer.reviver);\n\n        // handle message that sets the Host ID\n        if ((<any>msg).setHostID) {\n            this.messageToSendHostId = (<any>msg).setHostID;\n            return;\n        }\n\n        // skip message if not matching host\n        if (this.remoteHostID && (<any>msg).hostID && this.remoteHostID !== (<any>msg).hostID) {\n            return;\n        }\n\n        switch (msg.type) {\n            case MessageType.Request:\n                this.receiveRequest(msg);\n                break;\n            case MessageType.Reply:\n                this.receiveReply(msg);\n                break;\n            case MessageType.ReplyErr:\n                this.receiveReplyErr(msg);\n                break;\n            case MessageType.Cancel:\n                this.receiveCancel(msg);\n                break;\n        }\n    }\n\n    private receiveCancel(msg: CancelMessage): void {\n        const cancellationTokenSource = this.cancellationTokenSources.get(msg.id);\n        if (cancellationTokenSource) {\n            cancellationTokenSource.cancel();\n        }\n    }\n\n    private receiveRequest(msg: RequestMessage): void {\n        const callId = msg.id;\n        const proxyId = msg.proxyId;\n        // convert `null` to `undefined`, since we don't use `null` in internal plugin APIs\n        const args = msg.args.map(arg => arg === null ? undefined : arg);\n\n        const addToken = args.length && args[args.length - 1] === 'add.cancellation.token' ? args.pop() : false;\n        if (addToken) {\n            const tokenSource = new CancellationTokenSource();\n            this.cancellationTokenSources.set(callId, tokenSource);\n            args.push(tokenSource.token);\n        }\n        const invocation = this.invokeHandler(proxyId, msg.method, args);\n\n        invocation.then(result => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexor.send(MessageFactory.replyOK(callId, result, this.messageToSendHostId));\n        }, error => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexor.send(MessageFactory.replyErr(callId, error, this.messageToSendHostId));\n        });\n    }\n\n    private receiveReply(msg: ReplyMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n        pendingReply.resolve(msg.res);\n    }\n\n    private receiveReplyErr(msg: ReplyErrMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n\n        let err: Error | undefined = undefined;\n        if (msg.err && msg.err.$isError) {\n            err = new Error();\n            err.name = msg.err.name;\n            err.message = msg.err.message;\n            err.stack = msg.err.stack;\n        }\n        pendingReply.reject(err);\n    }\n\n    private invokeHandler(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        try {\n            return Promise.resolve(this.doInvokeHandler(proxyId, methodName, args));\n        } catch (err) {\n            return Promise.reject(err);\n        }\n    }\n\n    private doInvokeHandler(proxyId: string, methodName: string, args: any[]): any {\n        const actor = this.locals.get(proxyId);\n        if (!actor) {\n            throw new Error('Unknown actor ' + proxyId);\n        }\n        const method = actor[methodName];\n        if (typeof method !== 'function') {\n            throw new Error('Unknown method ' + methodName + ' on actor ' + proxyId);\n        }\n        return method.apply(actor, args);\n    }\n}\n\nfunction canceled(): Error {\n    const error = new Error('Canceled');\n    error.name = error.message;\n    return error;\n}\n\n/**\n * Sends/Receives multiple messages in one go:\n *  - multiple messages to be sent from one stack get sent in bulk at `process.nextTick`.\n *  - each incoming message is handled in a separate `process.nextTick`.\n */\nclass RPCMultiplexer implements Disposable {\n\n    private readonly connection: MessageConnection;\n    private readonly sendAccumulatedBound: () => void;\n\n    private messagesToSend: string[];\n\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(connection: MessageConnection, onMessage: (msg: string) => void, remoteHostId?: string) {\n        this.connection = connection;\n        this.sendAccumulatedBound = this.sendAccumulated.bind(this);\n\n        this.toDispose.push(Disposable.create(() => this.messagesToSend = []));\n        this.toDispose.push(this.connection.onMessage((data: string[]) => {\n            const len = data.length;\n            for (let i = 0; i < len; i++) {\n                onMessage(data[i]);\n            }\n        }));\n\n        this.messagesToSend = [];\n        if (remoteHostId) {\n            this.send(`{\"setHostID\":\"${remoteHostId}\"}`);\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    private sendAccumulated(): void {\n        const tmp = this.messagesToSend;\n        this.messagesToSend = [];\n        this.connection.send(tmp);\n    }\n\n    public send(msg: string): void {\n        if (this.toDispose.disposed) {\n            throw new Error('connection is closed');\n        }\n        if (this.messagesToSend.length === 0) {\n            if (typeof setImmediate !== 'undefined') {\n                setImmediate(this.sendAccumulatedBound);\n            } else {\n                setTimeout(this.sendAccumulatedBound, 0);\n            }\n        }\n        this.messagesToSend.push(msg);\n    }\n}\n\nclass MessageFactory {\n\n    static cancel(req: string, messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        return `{${prefix}\"type\":${MessageType.Cancel},\"id\":\"${req}\"}`;\n    }\n\n    public static request(req: string, rpcId: string, method: string, args: any[], messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        return `{${prefix}\"type\":${MessageType.Request},\"id\":\"${req}\",\"proxyId\":\"${rpcId}\",\"method\":\"${method}\",\"args\":${JSON.stringify(args, ObjectsTransferrer.replacer)}}`;\n    }\n\n    public static replyOK(req: string, res: any, messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        if (typeof res === 'undefined') {\n            return `{${prefix}\"type\":${MessageType.Reply},\"id\":\"${req}\"}`;\n        }\n        return `{${prefix}\"type\":${MessageType.Reply},\"id\":\"${req}\",\"res\":${JSON.stringify(res, ObjectsTransferrer.replacer)}}`;\n    }\n\n    public static replyErr(req: string, err: any, messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        err = typeof err === 'string' ? new Error(err) : err;\n        if (err instanceof Error) {\n            return `{${prefix}\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":${JSON.stringify(transformErrorForSerialization(err))}}`;\n        }\n        return `{${prefix}\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":null}`;\n    }\n}\n\n/**\n * These functions are responsible for correct transferring objects via rpc channel.\n *\n * To reach that some specific kind of objects is converteed to json in some custom way\n * and then, after receiving, revived to objects again,\n * so there is feeling that object was transferred via rpc channel.\n *\n * To distinguish between regular and altered objects, field $type is added to altered ones.\n * Also value of that field specifies kind of the object.\n */\nnamespace ObjectsTransferrer {\n\n    // tslint:disable-next-line:no-any\n    export function replacer(key: string | undefined, value: any): any {\n        if (value instanceof URI) {\n            return {\n                $type: SerializedObjectType.THEIA_URI,\n                data: value.toString()\n            } as SerializedObject;\n        } else if (value instanceof Range) {\n            const range = value as Range;\n            const serializedValue = {\n                start: {\n                    line: range.start.line,\n                    character: range.start.character\n                },\n                end: {\n                    line: range.end.line,\n                    character: range.end.character\n                }\n            };\n            return {\n                $type: SerializedObjectType.THEIA_RANGE,\n                data: JSON.stringify(serializedValue)\n            } as SerializedObject;\n        } else if (value && value['$mid'] === 1) {\n            // Given value is VSCode URI\n            // We cannot use instanceof here because VSCode URI has toJSON method which is invoked before this replacer.\n            const uri = VSCodeURI.revive(value);\n            return {\n                $type: SerializedObjectType.VSCODE_URI,\n                data: uri.toString()\n            } as SerializedObject;\n        }\n\n        return value;\n    }\n\n    // tslint:disable-next-line:no-any\n    export function reviver(key: string | undefined, value: any): any {\n        if (isSerializedObject(value)) {\n            switch (value.$type) {\n                case SerializedObjectType.THEIA_URI:\n                    return new URI(value.data);\n                case SerializedObjectType.VSCODE_URI:\n                    return VSCodeURI.parse(value.data);\n                case SerializedObjectType.THEIA_RANGE:\n                    // tslint:disable-next-line:no-any\n                    const obj: any = JSON.parse(value.data);\n                    const start = new Position(obj.start.line, obj.start.character);\n                    const end = new Position(obj.end.line, obj.end.character);\n                    return new Range(start, end);\n            }\n        }\n\n        return value;\n    }\n\n}\n\ninterface SerializedObject {\n    $type: SerializedObjectType;\n    data: string;\n}\n\nenum SerializedObjectType {\n    THEIA_URI,\n    VSCODE_URI,\n    THEIA_RANGE\n}\n\nfunction isSerializedObject(obj: any): obj is SerializedObject {\n    return obj && obj.$type !== undefined && obj.data !== undefined;\n}\n\nconst enum MessageType {\n    Request = 1,\n    Reply = 2,\n    ReplyErr = 3,\n    Cancel = 4\n}\n\nclass CancelMessage {\n    type: MessageType.Cancel;\n    id: string;\n}\n\nclass RequestMessage {\n    type: MessageType.Request;\n    id: string;\n    proxyId: string;\n    method: string;\n    args: any[];\n}\n\nclass ReplyMessage {\n    type: MessageType.Reply;\n    id: string;\n    res: any;\n}\n\nclass ReplyErrMessage {\n    type: MessageType.ReplyErr;\n    id: string;\n    err: SerializedError;\n}\n\ntype RPCMessage = RequestMessage | ReplyMessage | ReplyErrMessage | CancelMessage;\n\nexport interface SerializedError {\n    readonly $isError: true;\n    readonly name: string;\n    readonly message: string;\n    readonly stack: string;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError {\n    if (error instanceof Error) {\n        const { name, message } = error;\n        const stack: string = (<any>error).stacktrace || error.stack;\n        return {\n            $isError: true,\n            name,\n            message,\n            stack\n        };\n    }\n\n    // return as is\n    return error;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { setUriThrowOnMissingScheme } from 'vscode-uri';\nimport Uri from 'vscode-uri';\nimport { Path } from './path';\n\n// TODO: disable it because of #4487\nsetUriThrowOnMissingScheme(false);\n\nexport default class URI {\n\n    private readonly codeUri: Uri;\n    private _path: Path | undefined;\n\n    constructor(uri: string | Uri = '') {\n        if (uri instanceof Uri) {\n            this.codeUri = uri;\n        } else {\n            this.codeUri = Uri.parse(uri);\n        }\n    }\n\n    get displayName(): string {\n        const base = this.path.base;\n        if (base) {\n            return base;\n        }\n        if (this.path.isRoot) {\n            return this.path.toString();\n        }\n        return '';\n    }\n\n    /**\n     * Return all uri from the current to the top most.\n     */\n    get allLocations(): URI[] {\n        const locations = [];\n        let location: URI = this;\n        while (!location.path.isRoot && location.path.hasDir) {\n            locations.push(location);\n            location = location.parent;\n        }\n        locations.push(location);\n        return locations;\n    }\n\n    get parent(): URI {\n        if (this.path.isRoot) {\n            return this;\n        }\n        return this.withPath(this.path.dir);\n    }\n\n    relative(uri: URI): Path | undefined {\n        if (this.authority !== uri.authority || this.scheme !== uri.scheme) {\n            return undefined;\n        }\n        return this.path.relative(uri.path);\n    }\n\n    resolve(path: string | Path): URI {\n        return this.withPath(this.path.join(path.toString()));\n    }\n\n    /**\n     * return a new URI replacing the current with the given scheme\n     */\n    withScheme(scheme: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return a new URI replacing the current with the given authority\n     */\n    withAuthority(authority: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            authority\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a authority\n     */\n    withoutAuthority(): URI {\n        return this.withAuthority('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given path\n     */\n    withPath(path: string | Path): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            path: path.toString()\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a path\n     */\n    withoutPath(): URI {\n        return this.withPath('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given query\n     */\n    withQuery(query: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            query\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a query\n     */\n    withoutQuery(): URI {\n        return this.withQuery('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given fragment\n     */\n    withFragment(fragment: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            fragment\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a fragment\n     */\n    withoutFragment(): URI {\n        return this.withFragment('');\n    }\n\n    /**\n     * return a new URI replacing the current with its normalized path, resolving '..' and '.' segments\n     */\n    normalizePath(): URI {\n        return this.withPath(this.path.normalize());\n    }\n\n    get scheme(): string {\n        return this.codeUri.scheme;\n    }\n\n    get authority(): string {\n        return this.codeUri.authority;\n    }\n\n    get path(): Path {\n        if (this._path === undefined) {\n            this._path = new Path(this.codeUri.path);\n        }\n        return this._path;\n    }\n\n    get query(): string {\n        return this.codeUri.query;\n    }\n\n    get fragment(): string {\n        return this.codeUri.fragment;\n    }\n\n    toString(skipEncoding?: boolean): string {\n        return this.codeUri.toString(skipEncoding);\n    }\n\n    isEqualOrParent(uri: URI): boolean {\n        return this.authority === uri.authority && this.scheme === uri.scheme && this.path.isEqualOrParent(uri.path);\n    }\n\n    static getDistinctParents(uris: URI[]): URI[] {\n        const result: URI[] = [];\n        uris.forEach((uri, i) => {\n            if (!uris.some((otherUri, index) => index !== i && otherUri.isEqualOrParent(uri))) {\n                result.push(uri);\n            }\n        });\n        return result;\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest;\r\n        CallHierarchyIncomingCallsRequest.resultType = callHierarchy.CallHierarchyIncomingCallsRequest.resultType;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest;\r\n        CallHierarchyOutgoingCallsRequest.resultType = callHierarchy.CallHierarchyOutgoingCallsRequest.resultType;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function illegalArgument(message?: string): Error {\n    if (message) {\n        return new Error(`Illegal argument: ${message}`);\n    } else {\n        return new Error('Illegal argument');\n    }\n}\n\nexport function readonly(name?: string): Error {\n    if (name) {\n        return new Error(`readonly property '${name} cannot be changed'`);\n    } else {\n        return new Error('readonly property cannot be changed');\n    }\n}\n\nexport function disposed(what: string): Error {\n    const result = new Error(`${what} has been disposed`);\n    result.name = 'DISPOSED';\n    return result;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// file copied from https://github.com/wjordan/browser-path/blob/master/src/node_path.ts\n// Original license:\n/*\n====\n\nCopyright (c) 2015 John Vilk and other contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n====\n*/\n\nimport { sep } from './paths';\n\nconst replaceRegex = new RegExp('//+', 'g');\n\nexport function resolve(...paths: string[]): string {\n    let processed: string[] = [];\n    for (const p of paths) {\n        if (typeof p !== 'string') {\n            throw new TypeError('Invalid argument type to path.join: ' + (typeof p));\n        } else if (p !== '') {\n            if (p.charAt(0) === sep) {\n                processed = [];\n            }\n            processed.push(p);\n        }\n    }\n\n    const resolved = normalize(processed.join(sep));\n    if (resolved.length > 1 && resolved.charAt(resolved.length - 1) === sep) {\n        return resolved.substr(0, resolved.length - 1);\n    }\n\n    return resolved;\n}\n\nexport function relative(from: string, to: string): string {\n    let i: number;\n\n    from = resolve(from);\n    to = resolve(to);\n    const fromSegments = from.split(sep);\n    const toSegments = to.split(sep);\n\n    toSegments.shift();\n    fromSegments.shift();\n\n    let upCount = 0;\n    let downSegments: string[] = [];\n\n    for (i = 0; i < fromSegments.length; i++) {\n        const seg = fromSegments[i];\n        if (seg === toSegments[i]) {\n            continue;\n        }\n\n        upCount = fromSegments.length - i;\n        break;\n    }\n\n    downSegments = toSegments.slice(i);\n\n    if (fromSegments.length === 1 && fromSegments[0] === '') {\n        upCount = 0;\n    }\n\n    if (upCount > fromSegments.length) {\n        upCount = fromSegments.length;\n    }\n\n    let rv = '';\n    for (i = 0; i < upCount; i++) {\n        rv += '../';\n    }\n    rv += downSegments.join(sep);\n\n    if (rv.length > 1 && rv.charAt(rv.length - 1) === sep) {\n        rv = rv.substr(0, rv.length - 1);\n    }\n    return rv;\n}\nexport function normalize(p: string): string {\n\n    if (p === '') {\n        p = '.';\n    }\n\n    const absolute = p.charAt(0) === sep;\n\n    p = removeDuplicateSeparators(p);\n\n    const components = p.split(sep);\n    const goodComponents: string[] = [];\n    for (const c of components) {\n        if (c === '.') {\n            continue;\n        } else if (c === '..' && (absolute || (!absolute && goodComponents.length > 0 && goodComponents[0] !== '..'))) {\n            goodComponents.pop();\n        } else {\n            goodComponents.push(c);\n        }\n    }\n\n    if (!absolute && goodComponents.length < 2) {\n        switch (goodComponents.length) {\n            case 1:\n                if (goodComponents[0] === '') {\n                    goodComponents.unshift('.');\n                }\n                break;\n            default:\n                goodComponents.push('.');\n        }\n    }\n    p = goodComponents.join(sep);\n    if (absolute && p.charAt(0) !== sep) {\n        p = sep + p;\n    }\n    return p;\n}\n\nfunction removeDuplicateSeparators(p: string): string {\n    p = p.replace(replaceRegex, sep);\n    return p;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nfunction is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface Disposable {\n    dispose(): void;\n}\n\nexport function dispose<T extends Disposable>(disposable: T): T | undefined;\nexport function dispose<T extends Disposable>(...disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(first: T | T[], ...rest: T[]): T | T[] | undefined {\n    if (Array.isArray(first)) {\n        first.forEach(d => d && d.dispose());\n        return [];\n    } else if (rest.length === 0) {\n        if (first) {\n            first.dispose();\n            return first;\n        }\n        return undefined;\n    } else {\n        dispose(first);\n        dispose(rest);\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { StorageMain, StorageExt } from '../common/plugin-api-rpc';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from '../common/types';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\n\nexport class Memento implements theia.Memento {\n\n    private cache: KeysToAnyValues;\n\n    constructor(\n        private readonly pluginId: string,\n        private readonly isPluginGlobalData: boolean,\n        private readonly storage: KeyValueStorageProxy\n    ) {\n        this.cache = storage.getPerPluginData(pluginId, isPluginGlobalData);\n\n        if (!this.isPluginGlobalData) {\n            this.storage.storageDataChangedEvent((data: KeysToKeysToAnyValue) => {\n                this.cache = data[this.pluginId] ? data[this.pluginId] : {};\n            });\n        }\n    }\n\n    get<T>(key: string): T | undefined;\n    get<T>(key: string, defaultValue: T): T;\n    get<T>(key: string, defaultValue?: T): T | undefined {\n        if (key && this.cache.hasOwnProperty(key)) {\n            return this.cache[key];\n        } else {\n            return defaultValue;\n        }\n    }\n\n    // tslint:disable-next-line:no-any\n    update(key: string, value: any): Promise<void> {\n        this.cache[key] = value;\n        return this.storage.setPerPluginData(this.pluginId, this.cache, this.isPluginGlobalData).then(_ => undefined);\n    }\n}\n\n/**\n * Singleton.\n * Is used to proxy storage requests to main side.\n */\nexport class KeyValueStorageProxy implements StorageExt {\n\n    private storageDataChangedEmitter = new Emitter<KeysToKeysToAnyValue>();\n    public readonly storageDataChangedEvent: Event<KeysToKeysToAnyValue> = this.storageDataChangedEmitter.event;\n\n    private readonly proxy: StorageMain;\n\n    private globalDataCache: KeysToKeysToAnyValue;\n    private workspaceDataCache: KeysToKeysToAnyValue;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy<StorageMain>(PLUGIN_RPC_CONTEXT.STORAGE_MAIN);\n    }\n\n    init(initGlobalData: KeysToKeysToAnyValue, initWorkspaceData: KeysToKeysToAnyValue): void {\n        this.globalDataCache = initGlobalData;\n        this.workspaceDataCache = initWorkspaceData;\n    }\n\n    getPerPluginData(key: string, isGlobal: boolean): KeysToAnyValues {\n        if (isGlobal) {\n            const existed = this.globalDataCache[key];\n            return existed ? existed : {};\n        } else {\n            const existed = this.workspaceDataCache[key];\n            return existed ? existed : {};\n        }\n    }\n\n    setPerPluginData(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean> {\n        if (isGlobal) {\n            this.globalDataCache[key] = value;\n        } else {\n            this.workspaceDataCache[key] = value;\n        }\n\n        return this.proxy.$set(key, value, isGlobal);\n    }\n\n    $updatePluginsWorkspaceData(workspaceData: KeysToKeysToAnyValue): void {\n        this.workspaceDataCache = workspaceData;\n        this.storageDataChangedEmitter.fire(workspaceData);\n    }\n\n}\n","// This is adapted from https://github.com/normalize/mz\n// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\n\nconst api = [\n  'access',\n  'appendFile',\n  'chmod',\n  'chown',\n  'close',\n  'copyFile',\n  'fchmod',\n  'fchown',\n  'fdatasync',\n  'fstat',\n  'fsync',\n  'ftruncate',\n  'futimes',\n  'lchown',\n  'link',\n  'lstat',\n  'mkdir',\n  'mkdtemp',\n  'open',\n  'readFile',\n  'readdir',\n  'readlink',\n  'realpath',\n  'rename',\n  'rmdir',\n  'stat',\n  'symlink',\n  'truncate',\n  'unlink',\n  'utimes',\n  'writeFile'\n].filter(key => {\n  // Some commands are not available on some systems. Ex:\n  // fs.copyFile was added in Node.js v8.5.0\n  // fs.mkdtemp was added in Node.js v5.10.0\n  // fs.lchown is not available on at least some Linux\n  return typeof fs[key] === 'function'\n})\n\n// Export all keys:\nObject.keys(fs).forEach(key => {\n  exports[key] = fs[key]\n})\n\n// Universalify async methods:\napi.forEach(method => {\n  exports[method] = u(fs[method])\n})\n\n// We differ from mz/fs in that we still ship the old, broken, fs.exists()\n// since we are a drop-in replacement for the native module\nexports.exists = function (filename, callback) {\n  if (typeof callback === 'function') {\n    return fs.exists(filename, callback)\n  }\n  return new Promise(resolve => {\n    return fs.exists(filename, resolve)\n  })\n}\n\n// fs.read() & fs.write need special treatment due to multiple callback args\n\nexports.read = function (fd, buffer, offset, length, position, callback) {\n  if (typeof callback === 'function') {\n    return fs.read(fd, buffer, offset, length, position, callback)\n  }\n  return new Promise((resolve, reject) => {\n    fs.read(fd, buffer, offset, length, position, (err, bytesRead, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffer })\n    })\n  })\n}\n\n// Function signature can be\n// fs.write(fd, buffer[, offset[, length[, position]]], callback)\n// OR\n// fs.write(fd, string[, position[, encoding]], callback)\n// so we need to handle both cases\nexports.write = function (fd, buffer, a, b, c, callback) {\n  if (typeof arguments[arguments.length - 1] === 'function') {\n    return fs.write(fd, buffer, a, b, c, callback)\n  }\n\n  // Check for old, depricated fs.write(fd, string[, position[, encoding]], callback)\n  if (typeof buffer === 'string') {\n    return new Promise((resolve, reject) => {\n      fs.write(fd, buffer, a, b, (err, bytesWritten, buffer) => {\n        if (err) return reject(err)\n        resolve({ bytesWritten, buffer })\n      })\n    })\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.write(fd, buffer, a, b, c, (err, bytesWritten, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffer })\n    })\n  })\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","'use strict';\n\nvar objectAssign = require('object-assign');\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n// NB: The URL to the CommonJS spec is kept just for tradition.\n//     node-assert has evolved a lot since then, both in API and behavior.\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\n// Expose a strict only variant of assert\nfunction strict(value, message) {\n  if (!value) fail(value, true, message, '==', strict);\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","// imported from ncp (this is temporary, will rewrite)\n\nvar fs = require('graceful-fs')\nvar path = require('path')\nvar utimes = require('../util/utimes')\n\nfunction ncp (source, dest, options, callback) {\n  if (!callback) {\n    callback = options\n    options = {}\n  }\n\n  var basePath = process.cwd()\n  var currentPath = path.resolve(basePath, source)\n  var targetPath = path.resolve(basePath, dest)\n\n  var filter = options.filter\n  var transform = options.transform\n  var overwrite = options.overwrite\n  // If overwrite is undefined, use clobber, otherwise default to true:\n  if (overwrite === undefined) overwrite = options.clobber\n  if (overwrite === undefined) overwrite = true\n  var errorOnExist = options.errorOnExist\n  var dereference = options.dereference\n  var preserveTimestamps = options.preserveTimestamps === true\n\n  var started = 0\n  var finished = 0\n  var running = 0\n\n  var errored = false\n\n  startCopy(currentPath)\n\n  function startCopy (source) {\n    started++\n    if (filter) {\n      if (filter instanceof RegExp) {\n        console.warn('Warning: fs-extra: Passing a RegExp filter is deprecated, use a function')\n        if (!filter.test(source)) {\n          return doneOne(true)\n        }\n      } else if (typeof filter === 'function') {\n        if (!filter(source, dest)) {\n          return doneOne(true)\n        }\n      }\n    }\n    return getStats(source)\n  }\n\n  function getStats (source) {\n    var stat = dereference ? fs.stat : fs.lstat\n    running++\n    stat(source, function (err, stats) {\n      if (err) return onError(err)\n\n      // We need to get the mode from the stats object and preserve it.\n      var item = {\n        name: source,\n        mode: stats.mode,\n        mtime: stats.mtime, // modified time\n        atime: stats.atime, // access time\n        stats: stats // temporary\n      }\n\n      if (stats.isDirectory()) {\n        return onDir(item)\n      } else if (stats.isFile() || stats.isCharacterDevice() || stats.isBlockDevice()) {\n        return onFile(item)\n      } else if (stats.isSymbolicLink()) {\n        // Symlinks don't really need to know about the mode.\n        return onLink(source)\n      }\n    })\n  }\n\n  function onFile (file) {\n    var target = file.name.replace(currentPath, targetPath.replace('$', '$$$$')) // escapes '$' with '$$'\n    isWritable(target, function (writable) {\n      if (writable) {\n        copyFile(file, target)\n      } else {\n        if (overwrite) {\n          rmFile(target, function () {\n            copyFile(file, target)\n          })\n        } else if (errorOnExist) {\n          onError(new Error(target + ' already exists'))\n        } else {\n          doneOne()\n        }\n      }\n    })\n  }\n\n  function copyFile (file, target) {\n    var readStream = fs.createReadStream(file.name)\n    var writeStream = fs.createWriteStream(target, { mode: file.mode })\n\n    readStream.on('error', onError)\n    writeStream.on('error', onError)\n\n    if (transform) {\n      transform(readStream, writeStream, file)\n    } else {\n      writeStream.on('open', function () {\n        readStream.pipe(writeStream)\n      })\n    }\n\n    writeStream.once('close', function () {\n      fs.chmod(target, file.mode, function (err) {\n        if (err) return onError(err)\n        if (preserveTimestamps) {\n          utimes.utimesMillis(target, file.atime, file.mtime, function (err) {\n            if (err) return onError(err)\n            return doneOne()\n          })\n        } else {\n          doneOne()\n        }\n      })\n    })\n  }\n\n  function rmFile (file, done) {\n    fs.unlink(file, function (err) {\n      if (err) return onError(err)\n      return done()\n    })\n  }\n\n  function onDir (dir) {\n    var target = dir.name.replace(currentPath, targetPath.replace('$', '$$$$')) // escapes '$' with '$$'\n    isWritable(target, function (writable) {\n      if (writable) {\n        return mkDir(dir, target)\n      }\n      copyDir(dir.name)\n    })\n  }\n\n  function mkDir (dir, target) {\n    fs.mkdir(target, dir.mode, function (err) {\n      if (err) return onError(err)\n      // despite setting mode in fs.mkdir, doesn't seem to work\n      // so we set it here.\n      fs.chmod(target, dir.mode, function (err) {\n        if (err) return onError(err)\n        copyDir(dir.name)\n      })\n    })\n  }\n\n  function copyDir (dir) {\n    fs.readdir(dir, function (err, items) {\n      if (err) return onError(err)\n      items.forEach(function (item) {\n        startCopy(path.join(dir, item))\n      })\n      return doneOne()\n    })\n  }\n\n  function onLink (link) {\n    var target = link.replace(currentPath, targetPath)\n    fs.readlink(link, function (err, resolvedPath) {\n      if (err) return onError(err)\n      checkLink(resolvedPath, target)\n    })\n  }\n\n  function checkLink (resolvedPath, target) {\n    if (dereference) {\n      resolvedPath = path.resolve(basePath, resolvedPath)\n    }\n    isWritable(target, function (writable) {\n      if (writable) {\n        return makeLink(resolvedPath, target)\n      }\n      fs.readlink(target, function (err, targetDest) {\n        if (err) return onError(err)\n\n        if (dereference) {\n          targetDest = path.resolve(basePath, targetDest)\n        }\n        if (targetDest === resolvedPath) {\n          return doneOne()\n        }\n        return rmFile(target, function () {\n          makeLink(resolvedPath, target)\n        })\n      })\n    })\n  }\n\n  function makeLink (linkPath, target) {\n    fs.symlink(linkPath, target, function (err) {\n      if (err) return onError(err)\n      return doneOne()\n    })\n  }\n\n  function isWritable (path, done) {\n    fs.lstat(path, function (err) {\n      if (err) {\n        if (err.code === 'ENOENT') return done(true)\n        return done(false)\n      }\n      return done(false)\n    })\n  }\n\n  function onError (err) {\n    // ensure callback is defined & called only once:\n    if (!errored && callback !== undefined) {\n      errored = true\n      return callback(err)\n    }\n  }\n\n  function doneOne (skipped) {\n    if (!skipped) running--\n    finished++\n    if ((started === finished) && (running === 0)) {\n      if (callback !== undefined) {\n        return callback(null)\n      }\n    }\n  }\n}\n\nmodule.exports = ncp\n","'use strict'\n\nconst path = require('path')\n\n// get drive on windows\nfunction getRootPath (p) {\n  p = path.normalize(path.resolve(p)).split(path.sep)\n  if (p.length > 0) return p[0]\n  return null\n}\n\n// http://stackoverflow.com/a/62888/10333 contains more accurate\n// TODO: expand to include the rest\nconst INVALID_PATH_CHARS = /[<>:\"|?*]/\n\nfunction invalidWin32Path (p) {\n  const rp = getRootPath(p)\n  p = p.replace(rp, '')\n  return INVALID_PATH_CHARS.test(p)\n}\n\nmodule.exports = {\n  getRootPath,\n  invalidWin32Path\n}\n","module.exports = {\n  copySync: require('./copy-sync')\n}\n","/* eslint-disable node/no-deprecated-api */\nmodule.exports = function (size) {\n  if (typeof Buffer.allocUnsafe === 'function') {\n    try {\n      return Buffer.allocUnsafe(size)\n    } catch (e) {\n      return new Buffer(size)\n    }\n  }\n  return new Buffer(size)\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Range as R, Position as P, Location as L } from 'vscode-languageserver-types';\nimport URI from 'vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { cloneAndChange } from './objects';\nimport { Position, Range, Location } from '../plugin/types-impl';\nimport { fromPosition, fromRange, fromLocation } from '../plugin/type-converters';\n\n// Here is a mapping of VSCode commands to monaco commands with their conversions\nexport namespace KnownCommands {\n\n    /**\n     * Commands that you want to apply custom conversions to rather than pass through the automatic args converter.\n     * Would be useful in the case where theia provides some command and you need to provide custom conversions\n     */\n    // tslint:disable-next-line:no-any\n    const mappings: { [id: string]: [string, (args: any[] | undefined) => any[] | undefined] } = {};\n    mappings['editor.action.showReferences'] = ['textEditor.commands.showReferences', createConversionFunction(\n        (uri: URI) => uri.toString(),\n        fromPositionToP,\n        toArrayConversion(fromLocationToL))];\n\n    /**\n     * Mapping of all editor.action commands to their conversion function.\n     * executeCommand<T> inside of the plugin command registry will automatically convert\n     * incoming arguments from vscode api types to monaco types\n     */\n\n    // tslint:disable-next-line:no-any\n    const MONACO_CONVERSION_IDENTITY = (args: any[] | undefined) => {\n        if (!args) {\n            return args;\n        }\n        const argStack: ConversionFunction[] = [];\n        args.forEach(_ => {\n            // tslint:disable-next-line:no-any\n            argStack.push((arg: any) => monacoArgsConverter(arg));\n        });\n        if (args) {\n            return createConversionFunction(...argStack)(args);\n        }\n    };\n\n    mappings['editor.action.select.all'] = ['editor.action.select.all', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.toggleHighContrast'] = ['editor.action.toggleHighContrast', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.moveCarretLeftAction'] = ['editor.action.moveCarretLeftAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.moveCarretRightAction'] = ['editor.action.moveCarretRightAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.transposeLetters'] = ['editor.action.transposeLetters', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.clipboardCopyWithSyntaxHighlightingAction'] = ['editor.action.clipboardCopyWithSyntaxHighlightingAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.commentLine'] = ['editor.action.commentLine', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.addCommentLine'] = ['editor.action.addCommentLine', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.removeCommentLine'] = ['editor.action.removeCommentLine', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.blockComment'] = ['editor.action.blockComment', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.showContextMenu'] = ['editor.action.showContextMenu', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorUndo'] = ['cursorUndo', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.unfold'] = ['editor.unfold', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.unfoldRecursively'] = ['editor.unfoldRecursively', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.fold'] = ['editor.fold', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldRecursively'] = ['editor.foldRecursively', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldAll'] = ['editor.foldAll', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.unfoldAll'] = ['editor.unfoldAll', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldAllBlockComments'] = ['editor.foldAllBlockComments', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldAllMarkerRegions'] = ['editor.foldAllMarkerRegions', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.unfoldAllMarkerRegions'] = ['editor.unfoldAllMarkerRegions', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldLevel1'] = ['editor.foldLevel1', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldLevel2'] = ['editor.foldLevel2', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldLevel3'] = ['editor.foldLevel3', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldLevel4'] = ['editor.foldLevel4', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldLevel5'] = ['editor.foldLevel5', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldLevel6'] = ['editor.foldLevel6', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.foldLevel7'] = ['editor.foldLevel7', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.fontZoomIn'] = ['editor.action.fontZoomIn', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.fontZoomOut'] = ['editor.action.fontZoomOut', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.fontZoomReset'] = ['editor.action.fontZoomReset', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.formatDocument'] = ['editor.action.formatDocument', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.formatSelection'] = ['editor.action.formatSelection', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.copyLinesUpAction'] = ['editor.action.copyLinesUpAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.copyLinesDownAction'] = ['editor.action.copyLinesDownAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.moveLinesUpAction'] = ['editor.action.moveLinesUpAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.moveLinesDownAction'] = ['editor.action.moveLinesDownAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.sortLinesAscending'] = ['editor.action.sortLinesAscending', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.sortLinesDescending'] = ['editor.action.sortLinesDescending', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.trimTrailingWhitespace'] = ['editor.action.trimTrailingWhitespace', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.deleteLines'] = ['editor.action.deleteLines', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.indentLines'] = ['editor.action.indentLines', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.outdentLines'] = ['editor.action.outdentLines', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.insertLineBefore'] = ['editor.action.insertLineBefore', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.insertLineAfter'] = ['editor.action.insertLineAfter', MONACO_CONVERSION_IDENTITY];\n    mappings['deleteAllLeft'] = ['deleteAllLeft', MONACO_CONVERSION_IDENTITY];\n    mappings['deleteAllRight'] = ['deleteAllRight', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.joinLines'] = ['editor.action.joinLines', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.transpose'] = ['editor.action.transpose', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.transformToUppercase'] = ['editor.action.transformToUppercase', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.transformToLowercase'] = ['editor.action.transformToLowercase', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.transformToTitlecase'] = ['editor.action.transformToTitlecase', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.smartSelect.expand'] = ['editor.action.smartSelect.expand', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.smartSelect.shrink'] = ['editor.action.smartSelect.shrink', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.forceRetokenize'] = ['editor.action.forceRetokenize', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.toggleTabFocusMode'] = ['editor.action.toggleTabFocusMode', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.gotoLine'] = ['editor.action.gotoLine', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.quickOutline'] = ['editor.action.quickOutline', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.inPlaceReplace.up'] = ['editor.action.inPlaceReplace.up', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.inPlaceReplace.down'] = ['editor.action.inPlaceReplace.down', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.diffReview.next'] = ['editor.action.diffReview.next', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.diffReview.prev'] = ['editor.action.diffReview.prev', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.selectToBracket'] = ['editor.action.selectToBracket', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.jumpToBracket'] = ['editor.action.jumpToBracket', MONACO_CONVERSION_IDENTITY];\n    mappings['actions.findWithSelection'] = ['actions.findWithSelection', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.nextMatchFindAction'] = ['editor.action.nextMatchFindAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.previousMatchFindAction'] = ['editor.action.previousMatchFindAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.nextSelectionMatchFindAction'] = ['editor.action.nextSelectionMatchFindAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.previousSelectionMatchFindAction'] = ['editor.action.previousSelectionMatchFindAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.openLink'] = ['editor.action.openLink', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.quickFix'] = ['editor.action.quickFix', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.refactor'] = ['editor.action.refactor', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.sourceAction'] = ['editor.action.sourceAction', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.organizeImports'] = ['editor.action.organizeImports', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.autoFix'] = ['editor.action.autoFix', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.fixAll'] = ['editor.action.fixAll', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.rename'] = ['editor.action.rename', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.insertCursorAbove'] = ['editor.action.insertCursorAbove', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.insertCursorBelow'] = ['editor.action.insertCursorBelow', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.insertCursorAtEndOfEachLineSelected'] = ['editor.action.insertCursorAtEndOfEachLineSelected', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.addSelectionToNextFindMatch'] = ['editor.action.addSelectionToNextFindMatch', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.addSelectionToPreviousFindMatch'] = ['editor.action.addSelectionToPreviousFindMatch', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.moveSelectionToNextFindMatch'] = ['editor.action.moveSelectionToNextFindMatch', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.moveSelectionToPreviousFindMatch'] = ['editor.action.moveSelectionToPreviousFindMatch', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.selectHighlights'] = ['editor.action.selectHighlights', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.changeAll'] = ['editor.action.changeAll', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.addCursorsToBottom'] = ['editor.action.addCursorsToBottom', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.addCursorsToTop'] = ['editor.action.addCursorsToTop', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.triggerParameterHints'] = ['editor.action.triggerParameterHints', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.wordHighlight.next'] = ['editor.action.wordHighlight.next', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.wordHighlight.prev'] = ['editor.action.wordHighlight.prev', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.wordHighlight.trigger'] = ['editor.action.wordHighlight.trigger', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.showAccessibilityHelp'] = ['editor.action.showAccessibilityHelp', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.inspectTokens'] = ['editor.action.inspectTokens', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.marker.next'] = ['editor.action.marker.next', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.marker.prev'] = ['editor.action.marker.prev', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.marker.nextInFiles'] = ['editor.action.marker.nextInFiles', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.marker.prevInFiles'] = ['editor.action.marker.prevInFiles', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.showHover'] = ['editor.action.showHover', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.revealDefinition'] = ['editor.action.revealDefinition', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.revealDefinitionAside'] = ['editor.action.revealDefinitionAside', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.peekDefinition'] = ['editor.action.peekDefinition', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.revealDeclaration'] = ['editor.action.revealDeclaration', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.peekDeclaration'] = ['editor.action.peekDeclaration', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.goToImplementation'] = ['editor.action.goToImplementation', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.peekImplementation'] = ['editor.action.peekImplementation', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.goToTypeDefinition'] = ['editor.action.goToTypeDefinition', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.peekTypeDefinition'] = ['editor.action.peekTypeDefinition', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.referenceSearch.trigger'] = ['editor.action.referenceSearch.trigger', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.triggerSuggest'] = ['editor.action.triggerSuggest', MONACO_CONVERSION_IDENTITY];\n    mappings['closeReferenceSearchEditor'] = ['closeReferenceSearchEditor', MONACO_CONVERSION_IDENTITY];\n    mappings['cancelSelection'] = ['cancelSelection', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorBottom'] = ['cursorBottom', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorBottomSelect'] = ['cursorBottomSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorDown'] = ['cursorDown', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorDownSelect'] = ['cursorDownSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorEnd'] = ['cursorEnd', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorEndSelect'] = ['cursorEndSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorHome'] = ['cursorHome', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorHomeSelect'] = ['cursorHomeSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorLeft'] = ['cursorLeft', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorLeftSelect'] = ['cursorLeftSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorPageDown'] = ['cursorPageDown', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorPageDownSelect'] = ['cursorPageDownSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorPageUp'] = ['cursorPageUp', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorPageUpSelect'] = ['cursorPageUpSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorRight'] = ['cursorRight', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorRightSelect'] = ['cursorRightSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorTop'] = ['cursorTop', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorTopSelect'] = ['cursorTopSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorUp'] = ['cursorUp', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorUpSelect'] = ['cursorUpSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['deleteLeft'] = ['deleteLeft', MONACO_CONVERSION_IDENTITY];\n    mappings['deleteRight'] = ['deleteRight', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.selectAll'] = ['editor.action.selectAll', MONACO_CONVERSION_IDENTITY];\n    mappings['expandLineSelection'] = ['expandLineSelection', MONACO_CONVERSION_IDENTITY];\n    mappings['outdent'] = ['outdent', MONACO_CONVERSION_IDENTITY];\n    mappings['scrollLineDown'] = ['scrollLineDown', MONACO_CONVERSION_IDENTITY];\n    mappings['scrollLineUp'] = ['scrollLineUp', MONACO_CONVERSION_IDENTITY];\n    mappings['scrollPageDown'] = ['scrollPageDown', MONACO_CONVERSION_IDENTITY];\n    mappings['scrollPageUp'] = ['scrollPageUp', MONACO_CONVERSION_IDENTITY];\n    mappings['tab'] = ['tab', MONACO_CONVERSION_IDENTITY];\n    mappings['removeSecondaryCursors'] = ['removeSecondaryCursors', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorWordRight'] = ['cursorWordEndRight', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorWordEndRight'] = ['cursorWordEndRight', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorWordEndRightSelect'] = ['cursorWordEndRightSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorWordLeft'] = ['cursorWordStartLeft', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorWordStartLeft'] = ['cursorWordStartLeft', MONACO_CONVERSION_IDENTITY];\n    mappings['cursorWordStartLeftSelect'] = ['cursorWordStartLeftSelect', MONACO_CONVERSION_IDENTITY];\n    mappings['deleteWordLeft'] = ['deleteWordLeft', MONACO_CONVERSION_IDENTITY];\n    mappings['deleteWordRight'] = ['deleteWordRight', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.cancelOperation'] = ['editor.cancelOperation', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.gotoNextSymbolFromResult'] = ['editor.gotoNextSymbolFromResult', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.gotoNextSymbolFromResult.cancel'] = ['editor.gotoNextSymbolFromResult.cancel', MONACO_CONVERSION_IDENTITY];\n    mappings['openReferenceToSide'] = ['openReferenceToSide', MONACO_CONVERSION_IDENTITY];\n    mappings['toggleExplainMode'] = ['toggleExplainMode', MONACO_CONVERSION_IDENTITY];\n    mappings['closeFindWidget'] = ['closeFindWidget', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.replaceAll'] = ['editor.action.replaceAll', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.replaceOne'] = ['editor.action.replaceOne', MONACO_CONVERSION_IDENTITY];\n    mappings['editor.action.selectAllMatches'] = ['editor.action.selectAllMatches', MONACO_CONVERSION_IDENTITY];\n    mappings['toggleFindCaseSensitive'] = ['toggleFindCaseSensitive', MONACO_CONVERSION_IDENTITY];\n    mappings['toggleFindInSelection'] = ['toggleFindInSelection', MONACO_CONVERSION_IDENTITY];\n    mappings['toggleFindRegex'] = ['toggleFindRegex', MONACO_CONVERSION_IDENTITY];\n    mappings['toggleFindWholeWord'] = ['toggleFindWholeWord', MONACO_CONVERSION_IDENTITY];\n    mappings['jumpToNextSnippetPlaceholder'] = ['jumpToNextSnippetPlaceholder', MONACO_CONVERSION_IDENTITY];\n    mappings['jumpToPrevSnippetPlaceholder'] = ['jumpToPrevSnippetPlaceholder', MONACO_CONVERSION_IDENTITY];\n    mappings['leaveEditorMessage'] = ['leaveEditorMessage', MONACO_CONVERSION_IDENTITY];\n    mappings['leaveSnippet'] = ['leaveSnippet', MONACO_CONVERSION_IDENTITY];\n    mappings['closeMarkersNavigation'] = ['closeMarkersNavigation', MONACO_CONVERSION_IDENTITY];\n    mappings['goToNextReferenceFromEmbeddedEditor'] = ['goToNextReferenceFromEmbeddedEditor', MONACO_CONVERSION_IDENTITY];\n    mappings['goToPreviousReferenceFromEmbeddedEditor'] = ['goToPreviousReferenceFromEmbeddedEditor', MONACO_CONVERSION_IDENTITY];\n    mappings['closeParameterHints'] = ['closeParameterHints', MONACO_CONVERSION_IDENTITY];\n    mappings['showNextParameterHint'] = ['showNextParameterHint', MONACO_CONVERSION_IDENTITY];\n    mappings['showPrevParameterHint'] = ['showPrevParameterHint', MONACO_CONVERSION_IDENTITY];\n    mappings['acceptSelectedSuggestion'] = ['acceptSelectedSuggestion', MONACO_CONVERSION_IDENTITY];\n    mappings['acceptSelectedSuggestionOnEnter'] = ['acceptSelectedSuggestionOnEnter', MONACO_CONVERSION_IDENTITY];\n    mappings['hideSuggestWidget'] = ['hideSuggestWidget', MONACO_CONVERSION_IDENTITY];\n    mappings['insertBestCompletion'] = ['insertBestCompletion', MONACO_CONVERSION_IDENTITY];\n    mappings['insertNextSuggestion'] = ['insertNextSuggestion', MONACO_CONVERSION_IDENTITY];\n    mappings['insertPrevSuggestion'] = ['insertPrevSuggestion', MONACO_CONVERSION_IDENTITY];\n    mappings['selectNextPageSuggestion'] = ['selectNextPageSuggestion', MONACO_CONVERSION_IDENTITY];\n    mappings['selectNextSuggestion'] = ['selectNextSuggestion', MONACO_CONVERSION_IDENTITY];\n    mappings['selectPrevPageSuggestion'] = ['selectPrevPageSuggestion', MONACO_CONVERSION_IDENTITY];\n    mappings['selectPrevSuggestion'] = ['selectPrevSuggestion', MONACO_CONVERSION_IDENTITY];\n    mappings['toggleSuggestionDetails'] = ['toggleSuggestionDetails', MONACO_CONVERSION_IDENTITY];\n    mappings['toggleSuggestionFocus'] = ['toggleSuggestionFocus', MONACO_CONVERSION_IDENTITY];\n    mappings['acceptRenameInput'] = ['acceptRenameInput', MONACO_CONVERSION_IDENTITY];\n    mappings['cancelRenameInput'] = ['cancelRenameInput', MONACO_CONVERSION_IDENTITY];\n    mappings['closeAccessibilityHelp'] = ['closeAccessibilityHelp', MONACO_CONVERSION_IDENTITY];\n    mappings['history.showNext'] = ['history.showNext', MONACO_CONVERSION_IDENTITY];\n    mappings['history.showPrevious'] = ['history.showPrevious', MONACO_CONVERSION_IDENTITY];\n    mappings['closeReferenceSearch'] = ['closeReferenceSearch', MONACO_CONVERSION_IDENTITY];\n    mappings['goToNextReference'] = ['goToNextReference', MONACO_CONVERSION_IDENTITY];\n    mappings['goToPreviousReference'] = ['goToPreviousReference', MONACO_CONVERSION_IDENTITY];\n\n    // tslint:disable-next-line:no-any\n    export function map<T>(id: string, args: any[] | undefined, toDo: (mappedId: string, mappedArgs: any[] | undefined) => T): T {\n        if (mappings[id]) {\n            return toDo(mappings[id][0], mappings[id][1](args));\n        } else {\n            return toDo(id, args);\n        }\n    }\n\n    export function mapped(id: string): boolean {\n        return !!mappings[id];\n    }\n\n    // tslint:disable-next-line:no-any\n    type ConversionFunction = ((parameter: any) => any) | undefined;\n    // tslint:disable-next-line:no-any\n    function createConversionFunction(...conversions: ConversionFunction[]): (args: any[] | undefined) => any[] | undefined {\n        // tslint:disable-next-line:no-any\n        return function (args: any[] | undefined): any[] | undefined {\n            if (!args) {\n                return args;\n            }\n            // tslint:disable-next-line:no-any\n            return args.map(function (arg: any, index: number): any {\n                if (index < conversions.length) {\n                    const conversion = conversions[index];\n                    if (conversion) {\n                        return conversion(arg);\n                    }\n                }\n                return arg;\n            });\n        };\n    }\n\n    function fromPositionToP(p: theia.Position): P {\n        return P.create(p.line, p.character);\n    }\n\n    function fromRangeToR(r: theia.Range): R {\n        return R.create(fromPositionToP(r.start), fromPositionToP(r.end));\n    }\n\n    function fromLocationToL(l: theia.Location): L {\n        return L.create(l.uri.toString(), fromRangeToR(l.range));\n    }\n\n    // tslint:disable-next-line:no-any typedef\n    function monacoArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (Position.isPosition(value)) {\n                return fromPosition(value);\n            }\n            if (Range.isRange(value)) {\n                return fromRange(value);\n            }\n            if (Location.isLocation(value)) {\n                return fromLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n        });\n    }\n\n}\n\nfunction toArrayConversion<T, U>(f: (a: T) => U): (a: T[]) => U[] {\n    // tslint:disable-next-line:typedef\n    return function (a: T[]) {\n        return a.map(f);\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport function hookCancellationToken<T>(token: CancellationToken, promise: Promise<T>): PromiseLike<T> {\n    return new Promise<T>((resolve, reject) => {\n        const sub = token.onCancellationRequested(() => reject(new Error('This promise is cancelled')));\n        promise.then(value => {\n            sub.dispose();\n            resolve(value);\n        }).catch(err => {\n            sub.dispose();\n            reject(err);\n        });\n    });\n}\n\nexport function anyPromise<T>(promises: PromiseLike<T>[]): Promise<{ key: number; value: PromiseLike<T>; }> {\n    const result = new Deferred<{ key: number; value: PromiseLike<T>; }>();\n    if (promises.length === 0) {\n        result.resolve();\n    }\n\n    promises.forEach((val, key) => {\n        Promise.resolve(promises[key]).then(() => {\n            result.resolve({ key: key, value: promises[key] });\n        }, err => {\n            result.resolve({ key: key, value: promises[key] });\n        });\n    });\n    return result.promise;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { ModelChangedEvent, DocumentsMain } from '../common/plugin-api-rpc';\nimport { Range as ARange } from '../common/plugin-api-rpc-model';\nimport URI from 'vscode-uri';\nimport { ok } from '../common/assert';\nimport { Range, Position, EndOfLine } from './types-impl';\nimport { PrefixSumComputer } from './prefix-sum-computer';\nimport { getWordAtText, ensureValidWordDefinition } from './word-helper';\n\nconst _modeId2WordDefinition = new Map<string, RegExp | null>();\nexport function setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n    _modeId2WordDefinition.set(modeId, wordDefinition);\n}\nexport function getWordDefinitionFor(modeId: string): RegExp {\n    return _modeId2WordDefinition.get(modeId)!;\n}\n\nexport class DocumentDataExt {\n\n    private disposed = false;\n    private dirty: boolean;\n    private _document: theia.TextDocument;\n    private textLines = new Array<theia.TextLine>();\n    private lineStarts: PrefixSumComputer | undefined;\n\n    constructor(private proxy: DocumentsMain, private uri: URI, private lines: string[], private eol: string,\n        private languageId: string, private versionId: number, isDirty: boolean) {\n        this.dirty = isDirty;\n    }\n\n    dispose(): void {\n        ok(!this.disposed);\n        this.dirty = false;\n        this.disposed = true;\n    }\n\n    onEvents(e: ModelChangedEvent): void {\n        if (e.eol && e.eol !== this.eol) {\n            this.eol = e.eol;\n            this.lineStarts = undefined;\n        }\n\n        // Update my lines\n        const changes = e.changes;\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, len = changes.length; i < len; i++) {\n            const change = changes[i];\n            this.acceptDeleteRange(change.range);\n            this.acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n\n        this.versionId = e.versionId;\n    }\n    acceptIsDirty(isDirty: boolean): void {\n        ok(!this.disposed);\n        this.dirty = isDirty;\n    }\n    acceptLanguageId(langId: string): void {\n        ok(!this.disposed);\n        this.languageId = langId;\n    }\n    get document(): theia.TextDocument {\n        if (!this._document) {\n            const that = this;\n            this._document = {\n                get uri(): theia.Uri { return that.uri; },\n                get fileName(): string { return that.uri.fsPath; },\n                get isUntitled(): boolean { return that.uri.scheme === 'untitled'; },\n                get languageId(): string { return that.languageId; },\n                get version(): number { return that.versionId; },\n                get isClosed(): boolean { return that.disposed; },\n                get isDirty(): boolean { return that.dirty; },\n                save(): Promise<boolean> { return that.save(); },\n                getText(range?): string { return range ? that.getTextInRange(range) : that.getText(); },\n                get eol(): theia.EndOfLine { return that.eol === '\\n' ? EndOfLine.LF : EndOfLine.CRLF; },\n                get lineCount(): number { return that.lines.length; },\n                lineAt(lineOrPos: number | theia.Position): theia.TextLine { return that.lineAt(lineOrPos); },\n                offsetAt(pos): number { return that.offsetAt(pos); },\n                positionAt(offset): theia.Position { return that.positionAt(offset); },\n                validateRange(ran): theia.Range { return that.validateRange(ran); },\n                validatePosition(pos): theia.Position { return that.validatePosition(pos); },\n                getWordRangeAtPosition(pos, regexp?): theia.Range | undefined { return that.getWordRangeAtPosition(pos, regexp); }\n            };\n        }\n        return Object.freeze(this._document);\n    }\n\n    private acceptInsertText(position: Position, insertText: string): void {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = insertText.split(/\\r\\n|\\r|\\n/);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this.setLineText(position.line - 1,\n                this.lines[position.line - 1].substring(0, position.character - 1)\n                + insertLines[0]\n                + this.lines[position.line - 1].substring(position.character - 1)\n            );\n            return;\n        }\n\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this.lines[position.line - 1].substring(position.character - 1);\n\n        // Delete overflowing text from first line and insert text on first line\n        this.setLineText(position.line - 1,\n            this.lines[position.line - 1].substring(0, position.character - 1)\n            + insertLines[0]\n        );\n\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this.lines.splice(position.line + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this.eol.length;\n        }\n\n        if (this.lineStarts) {\n            // update prefix sum\n            this.lineStarts.insertValues(position.line, newLengths);\n        }\n    }\n\n    private acceptDeleteRange(range: ARange): void {\n\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this.setLineText(range.startLineNumber - 1,\n                this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this.lines[range.startLineNumber - 1].substring(range.endColumn - 1)\n            );\n            return;\n        }\n\n        // Take remaining text on last line and append it to remaining text on first line\n        this.setLineText(range.startLineNumber - 1,\n            this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this.lines[range.endLineNumber - 1].substring(range.endColumn - 1)\n        );\n\n        // Delete middle lines\n        this.lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this.lineStarts) {\n            this.lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n\n    private setLineText(lineIndex: number, newValue: string): void {\n        this.lines[lineIndex] = newValue;\n        if (this.lineStarts) {\n            this.lineStarts.changeValue(lineIndex, this.lines[lineIndex].length + this.eol.length);\n        }\n    }\n\n    private save(): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('Document is closed'));\n        }\n        return this.proxy.$trySaveDocument(this.uri);\n    }\n\n    private getTextInRange(_range: theia.Range): string {\n        const range = this.validateRange(_range);\n\n        if (range.isEmpty) {\n            return '';\n        }\n\n        if (range.isSingleLine) {\n            return this.lines[range.start.line].substring(range.start.character, range.end.character);\n        }\n\n        const lineEnding = this.eol;\n        const startLineIndex = range.start.line;\n        const endLineIndex = range.end.line;\n        const resultLines: string[] = [];\n\n        resultLines.push(this.lines[startLineIndex].substring(range.start.character));\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\n            resultLines.push(this.lines[i]);\n        }\n        resultLines.push(this.lines[endLineIndex].substring(0, range.end.character));\n\n        return resultLines.join(lineEnding);\n    }\n\n    private validateRange(range: theia.Range): theia.Range {\n        if (!(range instanceof Range)) {\n            throw new Error('Invalid argument');\n        }\n\n        const start = this.validatePosition(range.start);\n        const end = this.validatePosition(range.end);\n\n        if (start === range.start && end === range.end) {\n            return range;\n        }\n        return new Range(start.line, start.character, end.line, end.character);\n    }\n\n    private getText(): string {\n        return this.lines.join(this.eol);\n    }\n\n    private validatePosition(position: theia.Position): theia.Position {\n        if (!(position instanceof Position)) {\n            throw new Error('Invalid argument');\n        }\n\n        let { line, character } = position;\n        let hasChanged = false;\n\n        if (line < 0) {\n            line = 0;\n            character = 0;\n            hasChanged = true;\n        } else if (line >= this.lines.length) {\n            line = this.lines.length - 1;\n            character = this.lines[line].length;\n            hasChanged = true;\n        } else {\n            const maxCharacter = this.lines[line].length;\n            if (character < 0) {\n                character = 0;\n                hasChanged = true;\n            } else if (character > maxCharacter) {\n                character = maxCharacter;\n                hasChanged = true;\n            }\n        }\n\n        if (!hasChanged) {\n            return position;\n        }\n        return new Position(line, character);\n    }\n\n    private lineAt(lineOrPosition: number | theia.Position): theia.TextLine {\n\n        let line: number = -1;\n        if (lineOrPosition instanceof Position) {\n            line = lineOrPosition.line;\n        } else if (typeof lineOrPosition === 'number') {\n            line = lineOrPosition;\n        }\n\n        if (line < 0 || line >= this.lines.length) {\n            throw new Error('Illegal value for `line`');\n        }\n\n        let result = this.textLines[line];\n        if (!result || result.lineNumber !== line || result.text !== this.lines[line]) {\n\n            const text = this.lines[line];\n            const firstNonWhitespaceCharacterIndex = /^(\\s*)/.exec(text)![1].length;\n            const range = new Range(line, 0, line, text.length);\n            const rangeIncludingLineBreak = line < this.lines.length - 1\n                ? new Range(line, 0, line + 1, 0)\n                : range;\n\n            result = Object.freeze({\n                lineNumber: line,\n                range,\n                rangeIncludingLineBreak,\n                text,\n                firstNonWhitespaceCharacterIndex,\n                isEmptyOrWhitespace: firstNonWhitespaceCharacterIndex === text.length\n            });\n\n            this.textLines[line] = result;\n        }\n\n        return result;\n    }\n\n    private offsetAt(position: theia.Position): number {\n        position = this.validatePosition(position);\n        this.ensureLineStarts();\n        return this.lineStarts!.getAccumulatedValue(position.line - 1) + position.character;\n    }\n\n    private ensureLineStarts(): void {\n        if (!this.lineStarts) {\n            const eolLength = this.eol.length;\n            const linesLength = this.lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this.lines[i].length + eolLength;\n            }\n            this.lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n\n    private positionAt(offset: number): theia.Position {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n\n        this.ensureLineStarts();\n        const out = this.lineStarts!.getIndexOf(offset);\n\n        const lineLength = this.lines[out.index].length;\n\n        return new Position(out.index, Math.min(out.remainder, lineLength));\n    }\n\n    private getWordRangeAtPosition(_position: theia.Position, regexp?: RegExp): theia.Range | undefined {\n        const position = this.validatePosition(_position);\n\n        if (!regexp) {\n            // use default when custom-regexp isn't provided\n            regexp = getWordDefinitionFor(this.languageId);\n\n        } else if (regExpLeadsToEndlessLoop(regexp)) {\n            // use default when custom-regexp is bad\n            console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${regexp.source}' because it matches the empty string.`);\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n\n        const wordAtText = getWordAtText(\n            position.character + 1,\n            ensureValidWordDefinition(regexp),\n            this.lines[position.line],\n            0\n        );\n\n        if (wordAtText) {\n            return new Range(position.line, wordAtText.startColumn - 1, position.line, wordAtText.endColumn - 1);\n        }\n        return undefined;\n    }\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    const match = regexp.exec('');\n    // tslint:disable-next-line:no-any\n    return (match && <any>regexp.lastIndex === 0)!;\n}\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Here we expose types from @theia/plugin, so it becomes a direct dependency\nexport * from './plugin-protocol';\nexport * from './plugin-api-rpc';\nexport * from './plugin-ext-api-contribution';\nexport * from './known-commands';\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as path from 'path';\nimport Uri from 'vscode-uri';\nimport { IconUrl, PluginPackage } from '../common/plugin-protocol';\nimport { Plugin } from '../common/plugin-api-rpc';\n\nexport type PluginIconPath = string | Uri | {\n    light: string | Uri,\n    dark: string | Uri\n};\nexport namespace PluginIconPath {\n    export function toUrl(iconPath: PluginIconPath | undefined, plugin: Plugin): IconUrl | undefined {\n        if (!iconPath) {\n            return undefined;\n        }\n        if (typeof iconPath === 'object' && 'light' in iconPath) {\n            return {\n                light: asString(iconPath.light, plugin),\n                dark: asString(iconPath.dark, plugin)\n            };\n        }\n        return asString(iconPath, plugin);\n    }\n    export function asString(arg: string | Uri, plugin: Plugin): string {\n        arg = arg instanceof Uri && arg.scheme === 'file' ? arg.fsPath : arg;\n        if (typeof arg !== 'string') {\n            return arg.toString(true);\n        }\n        const { packagePath } = plugin.rawModel;\n        const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n        const normalizedPath = path.normalize(absolutePath);\n        const relativePath = path.relative(packagePath, normalizedPath);\n        return PluginPackage.toPluginUrl(plugin.rawModel, relativePath);\n    }\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nexport * from './socket';\nexport * from './reader';\nexport * from './writer';\nexport * from './connection';\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n\nimport { DataCallback, AbstractMessageReader } from \"vscode-jsonrpc/lib/messageReader\";\nimport { IWebSocket } from \"./socket\";\n\nexport class WebSocketMessageReader extends AbstractMessageReader {\n\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback: DataCallback | undefined;\n    protected readonly events: { message?: any, error?: any }[] = [];\n\n    constructor(protected readonly socket: IWebSocket) {\n        super();\n        this.socket.onMessage(message =>\n            this.readMessage(message)\n        );\n        this.socket.onError(error =>\n            this.fireError(error)\n        );\n        this.socket.onClose((code, reason) => {\n            if (code !== 1000) {\n                const error: Error = {\n                    name: '' + code,\n                    message: `Error during socket reconnect: code = ${code}, reason = ${reason}`\n                };\n                this.fireError(error);\n            }\n            this.fireClose();\n        });\n    }\n\n    listen(callback: DataCallback): void {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop()!;\n                if (event.message) {\n                    this.readMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            }\n        }\n    }\n\n    protected readMessage(message: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    protected fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    protected fireClose(): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n\nimport { Message } from \"vscode-jsonrpc/lib/messages\";\nimport { AbstractMessageWriter } from \"vscode-jsonrpc/lib/messageWriter\";\nimport { IWebSocket } from \"./socket\";\n\nexport class WebSocketMessageWriter extends AbstractMessageWriter {\n\n    protected errorCount = 0;\n\n    constructor(protected readonly socket: IWebSocket) {\n        super();\n    }\n\n    write(msg: Message): void {\n        try {\n            const content = JSON.stringify(msg);\n            this.socket.send(content);\n        } catch (e) {\n            this.errorCount++;\n            this.fireError(e, msg, this.errorCount);\n        }\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Logger } from \"vscode-jsonrpc\";\n\nexport class ConsoleLogger implements Logger {\n    public error(message: string): void {\n        console.error(message);\n    }\n\n    public warn(message: string): void {\n        console.warn(message);\n    }\n\n    public info(message: string): void {\n        console.info(message);\n    }\n\n    public log(message: string): void {\n        console.log(message);\n    }\n\n    public debug(message: string): void {\n        console.debug(message);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable } from './disposable-util';\nimport { PluginMessageReader } from './plugin-message-reader';\nimport { PluginMessageWriter } from './plugin-message-writer';\nimport { MessageReader, MessageWriter, Message } from 'vscode-jsonrpc';\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\n\n/**\n * The interface for describing the connection between plugins and main side.\n */\nexport interface Connection extends Disposable {\n    readonly reader: MessageReader;\n    readonly writer: MessageWriter;\n    /**\n     * Allows to forward messages to another connection.\n     *\n     * @param to the connection to forward messages\n     * @param map the function in which the message can be changed before forwarding\n     */\n    forward(to: Connection, map?: (message: Message) => Message): void;\n}\n\n/**\n * The container for message reader and writer which can be used to create connection between plugins and main side.\n */\nexport class PluginConnection implements Connection {\n    constructor(\n        readonly reader: PluginMessageReader,\n        readonly writer: PluginMessageWriter,\n        readonly dispose: () => void) {\n    }\n\n    forward(to: Connection, map: (message: Message) => Message = message => message): void {\n        this.reader.listen(input => {\n            const output = map(input);\n            to.writer.write(output);\n        });\n    }\n}\n\n/**\n * [IWebSocket](#IWebSocket) implementation over RPC.\n */\nexport class PluginWebSocketChannel implements IWebSocket {\n    constructor(protected readonly connection: PluginConnection) { }\n\n    send(content: string): void {\n        this.connection.writer.write(content);\n    }\n\n    // tslint:disable-next-line:no-any\n    onMessage(cb: (data: any) => void): void {\n        this.connection.reader.listen(cb);\n    }\n\n    // tslint:disable-next-line:no-any\n    onError(cb: (reason: any) => void): void {\n        this.connection.reader.onError(e => cb(e));\n    }\n\n    onClose(cb: (code: number, reason: string) => void): void {\n        this.connection.reader.onClose(() => cb(-1, 'closed'));\n    }\n\n    dispose(): void {\n        this.connection.dispose();\n    }\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocolImpl } from '../../../common/rpc-protocol';\nimport { PluginManagerExtImpl } from '../../../plugin/plugin-manager';\nimport { MAIN_RPC_CONTEXT, Plugin, emptyPlugin } from '../../../common/plugin-api-rpc';\nimport { createAPIFactory } from '../../../plugin/plugin-context';\nimport { getPluginId, PluginMetadata, PluginPackage } from '../../../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport { PreferenceRegistryExtImpl } from '../../../plugin/preference-registry';\nimport { ExtPluginApi } from '../../../common/plugin-ext-api-contribution';\nimport { createDebugExtStub } from './debug-stub';\nimport { EditorsAndDocumentsExtImpl } from '../../../plugin/editors-and-documents';\nimport { WorkspaceExtImpl } from '../../../plugin/workspace';\nimport { MessageRegistryExt } from '../../../plugin/message-registry';\nimport { WorkerEnvExtImpl } from './worker-env-ext';\nimport { ClipboardExt } from '../../../plugin/clipboard-ext';\nimport { KeyValueStorageProxy } from '../../../plugin/plugin-storage';\nimport { WebviewsExtImpl } from '../../../plugin/webviews';\n\n// tslint:disable-next-line:no-any\nconst ctx = self as any;\n\nconst pluginsApiImpl = new Map<string, typeof theia>();\nconst pluginsModulesNames = new Map<string, Plugin>();\n\nconst emitter = new Emitter();\nconst rpc = new RPCProtocolImpl({\n    onMessage: emitter.event,\n    send: (m: {}) => {\n        ctx.postMessage(m);\n    }\n});\n// tslint:disable-next-line:no-any\naddEventListener('message', (message: any) => {\n    emitter.fire(message.data);\n});\nfunction initialize(contextPath: string, pluginMetadata: PluginMetadata): void {\n    ctx.importScripts('/context/' + contextPath);\n}\nconst envExt = new WorkerEnvExtImpl(rpc);\nconst storageProxy = new KeyValueStorageProxy(rpc);\nconst editorsAndDocuments = new EditorsAndDocumentsExtImpl(rpc);\nconst messageRegistryExt = new MessageRegistryExt(rpc);\nconst workspaceExt = new WorkspaceExtImpl(rpc, editorsAndDocuments, messageRegistryExt);\nconst preferenceRegistryExt = new PreferenceRegistryExtImpl(rpc, workspaceExt);\nconst debugExt = createDebugExtStub(rpc);\nconst clipboardExt = new ClipboardExt(rpc);\nconst webviewExt = new WebviewsExtImpl(rpc, workspaceExt);\n\nconst pluginManager = new PluginManagerExtImpl({\n    // tslint:disable-next-line:no-any\n    loadPlugin(plugin: Plugin): any {\n        if (isElectron()) {\n            ctx.importScripts(plugin.pluginPath);\n        } else {\n            ctx.importScripts('/hostedPlugin/' + getPluginId(plugin.model) + '/' + plugin.pluginPath);\n        }\n\n        if (plugin.lifecycle.frontendModuleName) {\n            if (!ctx[plugin.lifecycle.frontendModuleName]) {\n                console.error(`WebWorker: Cannot start plugin \"${plugin.model.name}\". Frontend plugin not found: \"${plugin.lifecycle.frontendModuleName}\"`);\n                return;\n            }\n            return ctx[plugin.lifecycle.frontendModuleName];\n        }\n    },\n    init(rawPluginData: PluginMetadata[]): [Plugin[], Plugin[]] {\n        const result: Plugin[] = [];\n        const foreign: Plugin[] = [];\n        for (const plg of rawPluginData) {\n            const pluginModel = plg.model;\n            const pluginLifecycle = plg.lifecycle;\n            if (pluginModel.entryPoint!.frontend) {\n                let frontendInitPath = pluginLifecycle.frontendInitPath;\n                if (frontendInitPath) {\n                    initialize(frontendInitPath, plg);\n                } else {\n                    frontendInitPath = '';\n                }\n                const plugin: Plugin = {\n                    pluginPath: pluginModel.entryPoint.frontend!,\n                    pluginFolder: pluginModel.packagePath,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    get rawModel(): PluginPackage {\n                        throw new Error('not supported');\n                    }\n                };\n                result.push(plugin);\n                const apiImpl = apiFactory(plugin);\n                pluginsApiImpl.set(plugin.model.id, apiImpl);\n                pluginsModulesNames.set(plugin.lifecycle.frontendModuleName!, plugin);\n            } else {\n                foreign.push({\n                    pluginPath: pluginModel.entryPoint.backend!,\n                    pluginFolder: pluginModel.packagePath,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    get rawModel(): PluginPackage {\n                        throw new Error('not supported');\n                    }\n                });\n            }\n        }\n\n        return [result, foreign];\n    },\n    initExtApi(extApi: ExtPluginApi[]): void {\n        for (const api of extApi) {\n            try {\n                if (api.frontendExtApi) {\n                    ctx.importScripts(api.frontendExtApi.initPath);\n                    ctx[api.frontendExtApi.initVariable][api.frontendExtApi.initFunction](rpc, pluginsModulesNames);\n                }\n\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n}, envExt, storageProxy, preferenceRegistryExt, webviewExt, rpc);\n\nconst apiFactory = createAPIFactory(\n    rpc,\n    pluginManager,\n    envExt,\n    debugExt,\n    preferenceRegistryExt,\n    editorsAndDocuments,\n    workspaceExt,\n    messageRegistryExt,\n    clipboardExt,\n    webviewExt\n);\nlet defaultApi: typeof theia;\n\nconst handler = {\n    // tslint:disable-next-line:no-any\n    get: (target: any, name: string) => {\n        const plugin = pluginsModulesNames.get(name);\n        if (plugin) {\n            const apiImpl = pluginsApiImpl.get(plugin.model.id);\n            return apiImpl;\n        }\n\n        if (!defaultApi) {\n            defaultApi = apiFactory(emptyPlugin);\n        }\n\n        return defaultApi;\n    }\n};\n// tslint:disable-next-line:no-null-keyword\nctx['theia'] = new Proxy(Object.create(null), handler);\n\nrpc.set(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT, pluginManager);\nrpc.set(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT, editorsAndDocuments);\nrpc.set(MAIN_RPC_CONTEXT.WORKSPACE_EXT, workspaceExt);\nrpc.set(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT, preferenceRegistryExt);\nrpc.set(MAIN_RPC_CONTEXT.WEBVIEWS_EXT, webviewExt);\n\nfunction isElectron(): boolean {\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n    /** @deprecated Use CallHierarchyIncomingCallsRequest.type */\r\n    CallHierarchyIncomingCallsRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n    /** @deprecated Use CallHierarchyOutgoingCallsRequest.type */\r\n    CallHierarchyOutgoingCallsRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The namespace for random number related functionality.\n */\nvar Random;\n(function (Random) {\n    /**\n     * A function which generates random bytes.\n     *\n     * @param buffer - The `Uint8Array` to fill with random bytes.\n     *\n     * #### Notes\n     * A cryptographically strong random number generator will be used if\n     * available. Otherwise, `Math.random` will be used as a fallback for\n     * randomness.\n     *\n     * The following RNGs are supported, listed in order of precedence:\n     *   - `window.crypto.getRandomValues`\n     *   - `window.msCrypto.getRandomValues`\n     *   - `require('crypto').randomFillSync\n     *   - `require('crypto').randomBytes\n     *   - `Math.random`\n     */\n    Random.getRandomValues = (function () {\n        // Look up the crypto module if available.\n        var crypto = ((typeof window !== 'undefined' && (window.crypto || window.msCrypto)) ||\n            (typeof require !== 'undefined' && require('crypto')) || null);\n        // Modern browsers and IE 11\n        if (crypto && typeof crypto.getRandomValues === 'function') {\n            return function getRandomValues(buffer) {\n                return crypto.getRandomValues(buffer);\n            };\n        }\n        // Node 7+\n        if (crypto && typeof crypto.randomFillSync === 'function') {\n            return function getRandomValues(buffer) {\n                return crypto.randomFillSync(buffer);\n            };\n        }\n        // Node 0.10+\n        if (crypto && typeof crypto.randomBytes === 'function') {\n            return function getRandomValues(buffer) {\n                var bytes = crypto.randomBytes(buffer.length);\n                for (var i = 0, n = bytes.length; i < n; ++i) {\n                    buffer[i] = bytes[i];\n                }\n            };\n        }\n        // Fallback\n        return function getRandomValues(buffer) {\n            var value = 0;\n            for (var i = 0, n = buffer.length; i < n; ++i) {\n                if (i % 4 === 0) {\n                    value = Math.random() * 0xFFFFFFFF >>> 0;\n                }\n                buffer[i] = value & 0xFF;\n                value >>>= 8;\n            }\n        };\n    })();\n})(Random = exports.Random || (exports.Random = {}));\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    MainMessageType,\n    MessageRegistryMain,\n    PluginManagerExt,\n    PluginManager,\n    Plugin,\n    PluginAPI,\n    ConfigStorage,\n    PluginManagerInitializeParams,\n    PluginManagerStartParams\n} from '../common/plugin-api-rpc';\nimport { PluginMetadata } from '../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport { join } from 'path';\nimport { dispose } from '../common/disposable-util';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { EnvExtImpl } from './env';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { Memento, KeyValueStorageProxy } from './plugin-storage';\nimport { ExtPluginApi } from '../common/plugin-ext-api-contribution';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport * as os from 'os';\nimport * as fs from 'fs-extra';\nimport { WebviewsExtImpl } from './webviews';\n\nexport interface PluginHost {\n\n    // tslint:disable-next-line:no-any\n    loadPlugin(plugin: Plugin): any;\n\n    init(data: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> | [Plugin[], Plugin[]];\n\n    initExtApi(extApi: ExtPluginApi[]): void;\n\n    loadTests?(): Promise<void>;\n}\n\ninterface StopFn {\n    (): void;\n}\n\nclass ActivatedPlugin {\n    constructor(public readonly pluginContext: theia.PluginContext,\n        public readonly exports?: PluginAPI,\n        public readonly stopFn?: StopFn) {\n    }\n}\n\nexport class PluginManagerExtImpl implements PluginManagerExt, PluginManager {\n\n    static SUPPORTED_ACTIVATION_EVENTS = new Set([\n        '*',\n        'onLanguage',\n        'onCommand',\n        'onDebug', 'onDebugInitialConfigurations', 'onDebugResolve', 'onDebugAdapterProtocolTracker',\n        'workspaceContains',\n        'onView',\n        'onUri',\n        'onWebviewPanel'\n    ]);\n\n    private readonly registry = new Map<string, Plugin>();\n    private readonly activations = new Map<string, (() => Promise<void>)[] | undefined>();\n    /** promises to whether loading each plugin has been successful */\n    private readonly loadedPlugins = new Map<string, Promise<boolean>>();\n    private readonly activatedPlugins = new Map<string, ActivatedPlugin>();\n    private readonly pluginActivationPromises = new Map<string, Deferred<void>>();\n    private readonly pluginContextsMap = new Map<string, theia.PluginContext>();\n\n    private onDidChangeEmitter = new Emitter<void>();\n    private messageRegistryProxy: MessageRegistryMain;\n    protected fireOnDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    constructor(\n        private readonly host: PluginHost,\n        private readonly envExt: EnvExtImpl,\n        private readonly storageProxy: KeyValueStorageProxy,\n        private readonly preferencesManager: PreferenceRegistryExtImpl,\n        private readonly webview: WebviewsExtImpl,\n        private readonly rpc: RPCProtocol\n    ) {\n        this.messageRegistryProxy = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.MESSAGE_REGISTRY_MAIN);\n    }\n\n    async $stop(pluginId?: string): Promise<void> {\n        if (!pluginId) {\n            this.stopAll();\n            return;\n        }\n        this.registry.delete(pluginId);\n        this.pluginActivationPromises.delete(pluginId);\n        this.pluginContextsMap.delete(pluginId);\n        this.loadedPlugins.delete(pluginId);\n        const plugin = this.activatedPlugins.get(pluginId);\n        if (!plugin) {\n            return;\n        }\n        this.activatedPlugins.delete(pluginId);\n        this.stopPlugin(plugin);\n    }\n\n    protected stopAll(): void {\n        this.activatedPlugins.forEach(plugin => this.stopPlugin(plugin));\n\n        this.registry.clear();\n        this.loadedPlugins.clear();\n        this.activatedPlugins.clear();\n        this.pluginActivationPromises.clear();\n        this.pluginContextsMap.clear();\n    }\n\n    protected stopPlugin(plugin: ActivatedPlugin): void {\n        if (plugin.stopFn) {\n            plugin.stopFn();\n        }\n\n        // dispose any objects\n        const pluginContext = plugin.pluginContext;\n        if (pluginContext) {\n            dispose(pluginContext.subscriptions);\n        }\n    }\n\n    async $init(params: PluginManagerInitializeParams): Promise<void> {\n        this.storageProxy.init(params.globalState, params.workspaceState);\n\n        this.envExt.setQueryParameters(params.env.queryParams);\n        this.envExt.setLanguage(params.env.language);\n        this.envExt.setShell(params.env.shell);\n\n        this.preferencesManager.init(params.preferences);\n\n        if (params.extApi) {\n            this.host.initExtApi(params.extApi);\n        }\n\n        this.webview.init(params.webview);\n    }\n\n    async $start(params: PluginManagerStartParams): Promise<void> {\n        const [plugins, foreignPlugins] = await this.host.init(params.plugins);\n        // add foreign plugins\n        for (const plugin of foreignPlugins) {\n            this.registerPlugin(plugin, params.configStorage);\n        }\n        // add own plugins, before initialization\n        for (const plugin of plugins) {\n            this.registerPlugin(plugin, params.configStorage);\n        }\n\n        // run eager plugins\n        await this.$activateByEvent('*');\n        for (const activationEvent of params.activationEvents) {\n            await this.$activateByEvent(activationEvent);\n        }\n\n        if (this.host.loadTests) {\n            return this.host.loadTests();\n        }\n\n        this.fireOnDidChange();\n    }\n\n    protected registerPlugin(plugin: Plugin, configStorage: ConfigStorage): void {\n        this.registry.set(plugin.model.id, plugin);\n        if (plugin.pluginPath && Array.isArray(plugin.rawModel.activationEvents)) {\n            const activation = async () => {\n                await this.loadPlugin(plugin, configStorage);\n            };\n            // an internal activation event is a subject to change\n            this.setActivation(`onPlugin:${plugin.model.id}`, activation);\n            const unsupportedActivationEvents = plugin.rawModel.activationEvents.filter(e => !PluginManagerExtImpl.SUPPORTED_ACTIVATION_EVENTS.has(e.split(':')[0]));\n            if (unsupportedActivationEvents.length) {\n                console.warn(`Unsupported activation events: ${unsupportedActivationEvents.join(', ')}, please open an issue: https://github.com/eclipse-theia/theia/issues/new`);\n                console.warn(`${plugin.model.id} extension will be activated eagerly.`);\n                this.setActivation('*', activation);\n            } else {\n                for (let activationEvent of plugin.rawModel.activationEvents) {\n                    if (activationEvent === 'onUri') {\n                        activationEvent = `onUri:theia://${plugin.model.id}`;\n                    }\n                    this.setActivation(activationEvent, activation);\n                }\n            }\n        }\n    }\n    protected setActivation(activationEvent: string, activation: () => Promise<void>): void {\n        const activations = this.activations.get(activationEvent) || [];\n        activations.push(activation);\n        this.activations.set(activationEvent, activations);\n    }\n\n    protected async loadPlugin(plugin: Plugin, configStorage: ConfigStorage, visited = new Set<string>()): Promise<boolean> {\n        // in order to break cycles\n        if (visited.has(plugin.model.id)) {\n            return true;\n        }\n        visited.add(plugin.model.id);\n\n        let loading = this.loadedPlugins.get(plugin.model.id);\n        if (!loading) {\n            loading = (async () => {\n                if (plugin.rawModel.extensionDependencies) {\n                    for (const dependencyId of plugin.rawModel.extensionDependencies) {\n                        const dependency = this.registry.get(dependencyId.toLowerCase());\n                        const id = plugin.model.displayName || plugin.model.id;\n                        if (dependency) {\n                            const depId = dependency.model.displayName || dependency.model.id;\n                            const loadedSuccessfully = await this.loadPlugin(dependency, configStorage, visited);\n                            if (!loadedSuccessfully) {\n                                const message = `Cannot activate extension '${id}' because it depends on extension '${depId}', which failed to activate.`;\n                                this.messageRegistryProxy.$showMessage(MainMessageType.Error, message, {}, []);\n                                return false;\n                            }\n                        } else {\n                            const message = `Cannot activate the '${id}' extension because it depends on the '${dependencyId}' extension, which is not installed.`;\n                            this.messageRegistryProxy.$showMessage(MainMessageType.Error, message, {}, []);\n                            console.warn(message);\n                            return false;\n                        }\n                    }\n                }\n\n                let pluginMain = this.host.loadPlugin(plugin);\n                // see https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L372-L376\n                pluginMain = pluginMain || {};\n                return this.startPlugin(plugin, configStorage, pluginMain);\n            })();\n        }\n        this.loadedPlugins.set(plugin.model.id, loading);\n        return loading;\n    }\n\n    async $updateStoragePath(path: string | undefined): Promise<void> {\n        this.pluginContextsMap.forEach((pluginContext: theia.PluginContext, pluginId: string) => {\n            pluginContext.storagePath = path ? join(path, pluginId) : undefined;\n        });\n    }\n\n    async $activateByEvent(activationEvent: string): Promise<void> {\n        const activations = this.activations.get(activationEvent);\n        if (!activations) {\n            return;\n        }\n        this.activations.set(activationEvent, undefined);\n        while (activations.length) {\n            await activations.pop()!();\n        }\n    }\n\n    // tslint:disable-next-line:no-any\n    private async startPlugin(plugin: Plugin, configStorage: ConfigStorage, pluginMain: any): Promise<boolean> {\n        const subscriptions: theia.Disposable[] = [];\n        const asAbsolutePath = (relativePath: string): string => join(plugin.pluginFolder, relativePath);\n        const logPath = join(configStorage.hostLogPath, plugin.model.id); // todo check format\n        const storagePath = join(configStorage.hostStoragePath || '', plugin.model.id);\n        async function defaultGlobalStorage(): Promise<string> {\n            const globalStorage = join(os.homedir(), '.theia', 'globalStorage');\n            await fs.ensureDir(globalStorage);\n            return globalStorage;\n        }\n        const globalStoragePath = join(configStorage.hostGlobalStoragePath || (await defaultGlobalStorage()), plugin.model.id);\n        const pluginContext: theia.PluginContext = {\n            extensionPath: plugin.pluginFolder,\n            globalState: new Memento(plugin.model.id, true, this.storageProxy),\n            workspaceState: new Memento(plugin.model.id, false, this.storageProxy),\n            subscriptions: subscriptions,\n            asAbsolutePath: asAbsolutePath,\n            logPath: logPath,\n            storagePath: storagePath,\n            globalStoragePath: globalStoragePath\n        };\n        this.pluginContextsMap.set(plugin.model.id, pluginContext);\n\n        let stopFn = undefined;\n        if (typeof pluginMain[plugin.lifecycle.stopMethod] === 'function') {\n            stopFn = pluginMain[plugin.lifecycle.stopMethod];\n        }\n        const id = plugin.model.displayName || plugin.model.id;\n        if (typeof pluginMain[plugin.lifecycle.startMethod] === 'function') {\n            try {\n                const pluginExport = await pluginMain[plugin.lifecycle.startMethod].apply(getGlobal(), [pluginContext]);\n                this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginExport, stopFn));\n\n                // resolve activation promise\n                if (this.pluginActivationPromises.has(plugin.model.id)) {\n                    this.pluginActivationPromises.get(plugin.model.id)!.resolve();\n                    this.pluginActivationPromises.delete(plugin.model.id);\n                }\n            } catch (err) {\n                if (this.pluginActivationPromises.has(plugin.model.id)) {\n                    this.pluginActivationPromises.get(plugin.model.id)!.reject(err);\n                }\n                this.messageRegistryProxy.$showMessage(MainMessageType.Error, `Activating extension ${id} failed: ${err.message}.`, {}, []);\n                console.error(`Error on activation of ${plugin.model.name}`, err);\n                return false;\n            }\n        } else {\n            // https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L400-L401\n            console.log(`plugin ${id}, ${plugin.lifecycle.startMethod} method is undefined so the module is the extension's exports`);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginMain));\n        }\n        return true;\n    }\n\n    getAllPlugins(): Plugin[] {\n        return Array.from(this.registry.values());\n    }\n    getPluginExport(pluginId: string): PluginAPI | undefined {\n        const activePlugin = this.activatedPlugins.get(pluginId);\n        if (activePlugin) {\n            return activePlugin.exports;\n        }\n        return undefined;\n    }\n\n    getPluginById(pluginId: string): Plugin | undefined {\n        return this.registry.get(pluginId);\n    }\n\n    isRunning(pluginId: string): boolean {\n        return this.registry.has(pluginId);\n    }\n\n    isActive(pluginId: string): boolean {\n        return this.activatedPlugins.has(pluginId);\n    }\n\n    activatePlugin(pluginId: string): PromiseLike<void> {\n        if (this.pluginActivationPromises.has(pluginId)) {\n            return this.pluginActivationPromises.get(pluginId)!.promise;\n        }\n\n        const deferred = new Deferred<void>();\n\n        if (this.activatedPlugins.get(pluginId)) {\n            deferred.resolve();\n        }\n        this.pluginActivationPromises.set(pluginId, deferred);\n        return deferred.promise;\n    }\n\n    get onDidChange(): theia.Event<void> {\n        return this.onDidChangeEmitter.event;\n    }\n\n}\n\n// for electron\nfunction getGlobal(): Window | NodeJS.Global | null {\n    // tslint:disable-next-line:no-null-keyword\n    return typeof self === 'undefined' ? typeof global === 'undefined' ? null : global : self;\n}\n","'use strict'\n\nconst assign = require('./util/assign')\n\nconst fs = {}\n\n// Export graceful-fs:\nassign(fs, require('./fs'))\n// Export extra methods:\nassign(fs, require('./copy'))\nassign(fs, require('./copy-sync'))\nassign(fs, require('./mkdirs'))\nassign(fs, require('./remove'))\nassign(fs, require('./json'))\nassign(fs, require('./move'))\nassign(fs, require('./move-sync'))\nassign(fs, require('./empty'))\nassign(fs, require('./ensure'))\nassign(fs, require('./output'))\nassign(fs, require('./path-exists'))\n\nmodule.exports = fs\n","'use strict'\n\n// simple mutable assign\nfunction assign () {\n  const args = [].slice.call(arguments).filter(i => i)\n  const dest = args.shift()\n  args.forEach(src => {\n    Object.keys(src).forEach(key => {\n      dest[key] = src[key]\n    })\n  })\n\n  return dest\n}\n\nmodule.exports = assign\n","var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\nvar chdir = process.chdir\nprocess.chdir = function(d) {\n  cwd = null\n  chdir.call(process, d)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (!fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (!fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = (function (fs$rename) { return function (from, to, cb) {\n      var start = Date.now()\n      var backoff = 0;\n      fs$rename(from, to, function CB (er) {\n        if (er\n            && (er.code === \"EACCES\" || er.code === \"EPERM\")\n            && Date.now() - start < 60000) {\n          setTimeout(function() {\n            fs.stat(to, function (stater, st) {\n              if (stater && stater.code === \"ENOENT\")\n                fs$rename(from, to, CB);\n              else\n                cb(er)\n            })\n          }, backoff)\n          if (backoff < 100)\n            backoff += 10;\n          return;\n        }\n        if (cb) cb(er)\n      })\n    }})(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    read.__proto__ = fs$read\n    return read\n  })(fs.read)\n\n  fs.readSync = (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\")) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats.uid < 0) stats.uid += 0x100000000\n      if (stats.gid < 0) stats.gid += 0x100000000\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n","var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","module.exports = require('./lib/_stream_writable.js');\n","module.exports = require('./lib/_stream_duplex.js');\n","module.exports = require('./readable').Transform\n","module.exports = require('./readable').PassThrough\n","'use strict'\n\nmodule.exports = clone\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: obj.__proto__ }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","const u = require('universalify').fromCallback\nmodule.exports = {\n  copy: u(require('./copy'))\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst ncp = require('./ncp')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction copy (src, dest, options, callback) {\n  if (typeof options === 'function' && !callback) {\n    callback = options\n    options = {}\n  } else if (typeof options === 'function' || options instanceof RegExp) {\n    options = {filter: options}\n  }\n  callback = callback || function () {}\n  options = options || {}\n\n  // Warn about using preserveTimestamps on 32-bit node:\n  if (options.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  // don't allow src and dest to be the same\n  const basePath = process.cwd()\n  const currentPath = path.resolve(basePath, src)\n  const targetPath = path.resolve(basePath, dest)\n  if (currentPath === targetPath) return callback(new Error('Source and destination must not be the same.'))\n\n  fs.lstat(src, (err, stats) => {\n    if (err) return callback(err)\n\n    let dir = null\n    if (stats.isDirectory()) {\n      const parts = dest.split(path.sep)\n      parts.pop()\n      dir = parts.join(path.sep)\n    } else {\n      dir = path.dirname(dest)\n    }\n\n    pathExists(dir, (err, dirExists) => {\n      if (err) return callback(err)\n      if (dirExists) return ncp(src, dest, options, callback)\n      mkdir.mkdirs(dir, err => {\n        if (err) return callback(err)\n        ncp(src, dest, options, callback)\n      })\n    })\n  })\n}\n\nmodule.exports = copy\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst os = require('os')\nconst path = require('path')\n\n// HFS, ext{2,3}, FAT do not, Node.js v0.10 does not\nfunction hasMillisResSync () {\n  let tmpfile = path.join('millis-test-sync' + Date.now().toString() + Math.random().toString().slice(2))\n  tmpfile = path.join(os.tmpdir(), tmpfile)\n\n  // 550 millis past UNIX epoch\n  const d = new Date(1435410243862)\n  fs.writeFileSync(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141')\n  const fd = fs.openSync(tmpfile, 'r+')\n  fs.futimesSync(fd, d, d)\n  fs.closeSync(fd)\n  return fs.statSync(tmpfile).mtime > 1435410243000\n}\n\nfunction hasMillisRes (callback) {\n  let tmpfile = path.join('millis-test' + Date.now().toString() + Math.random().toString().slice(2))\n  tmpfile = path.join(os.tmpdir(), tmpfile)\n\n  // 550 millis past UNIX epoch\n  const d = new Date(1435410243862)\n  fs.writeFile(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141', err => {\n    if (err) return callback(err)\n    fs.open(tmpfile, 'r+', (err, fd) => {\n      if (err) return callback(err)\n      fs.futimes(fd, d, d, err => {\n        if (err) return callback(err)\n        fs.close(fd, err => {\n          if (err) return callback(err)\n          fs.stat(tmpfile, (err, stats) => {\n            if (err) return callback(err)\n            callback(null, stats.mtime > 1435410243000)\n          })\n        })\n      })\n    })\n  })\n}\n\nfunction timeRemoveMillis (timestamp) {\n  if (typeof timestamp === 'number') {\n    return Math.floor(timestamp / 1000) * 1000\n  } else if (timestamp instanceof Date) {\n    return new Date(Math.floor(timestamp.getTime() / 1000) * 1000)\n  } else {\n    throw new Error('fs-extra: timeRemoveMillis() unknown parameter type')\n  }\n}\n\nfunction utimesMillis (path, atime, mtime, callback) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  fs.open(path, 'r+', (err, fd) => {\n    if (err) return callback(err)\n    fs.futimes(fd, atime, mtime, futimesErr => {\n      fs.close(fd, closeErr => {\n        if (callback) callback(futimesErr || closeErr)\n      })\n    })\n  })\n}\n\nmodule.exports = {\n  hasMillisRes,\n  hasMillisResSync,\n  timeRemoveMillis,\n  utimesMillis\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst invalidWin32Path = require('./win32').invalidWin32Path\n\nconst o777 = parseInt('0777', 8)\n\nfunction mkdirs (p, opts, callback, made) {\n  if (typeof opts === 'function') {\n    callback = opts\n    opts = {}\n  } else if (!opts || typeof opts !== 'object') {\n    opts = { mode: opts }\n  }\n\n  if (process.platform === 'win32' && invalidWin32Path(p)) {\n    const errInval = new Error(p + ' contains invalid WIN32 path characters.')\n    errInval.code = 'EINVAL'\n    return callback(errInval)\n  }\n\n  let mode = opts.mode\n  const xfs = opts.fs || fs\n\n  if (mode === undefined) {\n    mode = o777 & (~process.umask())\n  }\n  if (!made) made = null\n\n  callback = callback || function () {}\n  p = path.resolve(p)\n\n  xfs.mkdir(p, mode, er => {\n    if (!er) {\n      made = made || p\n      return callback(null, made)\n    }\n    switch (er.code) {\n      case 'ENOENT':\n        if (path.dirname(p) === p) return callback(er)\n        mkdirs(path.dirname(p), opts, (er, made) => {\n          if (er) callback(er, made)\n          else mkdirs(p, opts, callback, made)\n        })\n        break\n\n      // In the case of any other error, just see if there's a dir\n      // there already.  If so, then hooray!  If not, then something\n      // is borked.\n      default:\n        xfs.stat(p, (er2, stat) => {\n          // if the stat fails, then that's super weird.\n          // let the original error be the failure reason.\n          if (er2 || !stat.isDirectory()) callback(er, made)\n          else callback(null, made)\n        })\n        break\n    }\n  })\n}\n\nmodule.exports = mkdirs\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst invalidWin32Path = require('./win32').invalidWin32Path\n\nconst o777 = parseInt('0777', 8)\n\nfunction mkdirsSync (p, opts, made) {\n  if (!opts || typeof opts !== 'object') {\n    opts = { mode: opts }\n  }\n\n  let mode = opts.mode\n  const xfs = opts.fs || fs\n\n  if (process.platform === 'win32' && invalidWin32Path(p)) {\n    const errInval = new Error(p + ' contains invalid WIN32 path characters.')\n    errInval.code = 'EINVAL'\n    throw errInval\n  }\n\n  if (mode === undefined) {\n    mode = o777 & (~process.umask())\n  }\n  if (!made) made = null\n\n  p = path.resolve(p)\n\n  try {\n    xfs.mkdirSync(p, mode)\n    made = made || p\n  } catch (err0) {\n    switch (err0.code) {\n      case 'ENOENT':\n        if (path.dirname(p) === p) throw err0\n        made = mkdirsSync(path.dirname(p), opts, made)\n        mkdirsSync(p, opts, made)\n        break\n\n      // In the case of any other error, just see if there's a dir\n      // there already.  If so, then hooray!  If not, then something\n      // is borked.\n      default:\n        let stat\n        try {\n          stat = xfs.statSync(p)\n        } catch (err1) {\n          throw err0\n        }\n        if (!stat.isDirectory()) throw err0\n        break\n    }\n  }\n\n  return made\n}\n\nmodule.exports = mkdirsSync\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copyFileSync = require('./copy-file-sync')\nconst mkdir = require('../mkdirs')\n\nfunction copySync (src, dest, options) {\n  if (typeof options === 'function' || options instanceof RegExp) {\n    options = {filter: options}\n  }\n\n  options = options || {}\n  options.recursive = !!options.recursive\n\n  // default to true for now\n  options.clobber = 'clobber' in options ? !!options.clobber : true\n  // overwrite falls back to clobber\n  options.overwrite = 'overwrite' in options ? !!options.overwrite : options.clobber\n  options.dereference = 'dereference' in options ? !!options.dereference : false\n  options.preserveTimestamps = 'preserveTimestamps' in options ? !!options.preserveTimestamps : false\n\n  options.filter = options.filter || function () { return true }\n\n  // Warn about using preserveTimestamps on 32-bit node:\n  if (options.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  const stats = (options.recursive && !options.dereference) ? fs.lstatSync(src) : fs.statSync(src)\n  const destFolder = path.dirname(dest)\n  const destFolderExists = fs.existsSync(destFolder)\n  let performCopy = false\n\n  if (options.filter instanceof RegExp) {\n    console.warn('Warning: fs-extra: Passing a RegExp filter is deprecated, use a function')\n    performCopy = options.filter.test(src)\n  } else if (typeof options.filter === 'function') performCopy = options.filter(src, dest)\n\n  if (stats.isFile() && performCopy) {\n    if (!destFolderExists) mkdir.mkdirsSync(destFolder)\n    copyFileSync(src, dest, {\n      overwrite: options.overwrite,\n      errorOnExist: options.errorOnExist,\n      preserveTimestamps: options.preserveTimestamps\n    })\n  } else if (stats.isDirectory() && performCopy) {\n    if (!fs.existsSync(dest)) mkdir.mkdirsSync(dest)\n    const contents = fs.readdirSync(src)\n    contents.forEach(content => {\n      const opts = options\n      opts.recursive = true\n      copySync(path.join(src, content), path.join(dest, content), opts)\n    })\n  } else if (options.recursive && stats.isSymbolicLink() && performCopy) {\n    const srcPath = fs.readlinkSync(src)\n    fs.symlinkSync(srcPath, dest)\n  }\n}\n\nmodule.exports = copySync\n","'use strict'\n\nconst fs = require('graceful-fs')\n\nconst BUF_LENGTH = 64 * 1024\nconst _buff = require('../util/buffer')(BUF_LENGTH)\n\nfunction copyFileSync (srcFile, destFile, options) {\n  const overwrite = options.overwrite\n  const errorOnExist = options.errorOnExist\n  const preserveTimestamps = options.preserveTimestamps\n\n  if (fs.existsSync(destFile)) {\n    if (overwrite) {\n      fs.unlinkSync(destFile)\n    } else if (errorOnExist) {\n      throw new Error(`${destFile} already exists`)\n    } else return\n  }\n\n  const fdr = fs.openSync(srcFile, 'r')\n  const stat = fs.fstatSync(fdr)\n  const fdw = fs.openSync(destFile, 'w', stat.mode)\n  let bytesRead = 1\n  let pos = 0\n\n  while (bytesRead > 0) {\n    bytesRead = fs.readSync(fdr, _buff, 0, BUF_LENGTH, pos)\n    fs.writeSync(fdw, _buff, 0, bytesRead)\n    pos += bytesRead\n  }\n\n  if (preserveTimestamps) {\n    fs.futimesSync(fdw, stat.atime, stat.mtime)\n  }\n\n  fs.closeSync(fdr)\n  fs.closeSync(fdw)\n}\n\nmodule.exports = copyFileSync\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst assert = require('assert')\n\nconst isWindows = (process.platform === 'win32')\n\nfunction defaults (options) {\n  const methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(m => {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n}\n\nfunction rimraf (p, options, cb) {\n  let busyTries = 0\n\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert.equal(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  rimraf_(p, options, function CB (er) {\n    if (er) {\n      if ((er.code === 'EBUSY' || er.code === 'ENOTEMPTY' || er.code === 'EPERM') &&\n          busyTries < options.maxBusyTries) {\n        busyTries++\n        let time = busyTries * 100\n        // try again, with the same exact callback as this one.\n        return setTimeout(() => rimraf_(p, options, CB), time)\n      }\n\n      // already gone\n      if (er.code === 'ENOENT') er = null\n    }\n\n    cb(er)\n  })\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nfunction rimraf_ (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, (er, st) => {\n    if (er && er.code === 'ENOENT') {\n      return cb(null)\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === 'EPERM' && isWindows) {\n      return fixWinEPERM(p, options, er, cb)\n    }\n\n    if (st && st.isDirectory()) {\n      return rmdir(p, options, er, cb)\n    }\n\n    options.unlink(p, er => {\n      if (er) {\n        if (er.code === 'ENOENT') {\n          return cb(null)\n        }\n        if (er.code === 'EPERM') {\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        }\n        if (er.code === 'EISDIR') {\n          return rmdir(p, options, er, cb)\n        }\n      }\n      return cb(er)\n    })\n  })\n}\n\nfunction fixWinEPERM (p, options, er, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n  if (er) {\n    assert(er instanceof Error)\n  }\n\n  options.chmod(p, 0o666, er2 => {\n    if (er2) {\n      cb(er2.code === 'ENOENT' ? null : er)\n    } else {\n      options.stat(p, (er3, stats) => {\n        if (er3) {\n          cb(er3.code === 'ENOENT' ? null : er)\n        } else if (stats.isDirectory()) {\n          rmdir(p, options, er, cb)\n        } else {\n          options.unlink(p, cb)\n        }\n      })\n    }\n  })\n}\n\nfunction fixWinEPERMSync (p, options, er) {\n  let stats\n\n  assert(p)\n  assert(options)\n  if (er) {\n    assert(er instanceof Error)\n  }\n\n  try {\n    options.chmodSync(p, 0o666)\n  } catch (er2) {\n    if (er2.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  try {\n    stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  if (stats.isDirectory()) {\n    rmdirSync(p, options, er)\n  } else {\n    options.unlinkSync(p)\n  }\n}\n\nfunction rmdir (p, options, originalEr, cb) {\n  assert(p)\n  assert(options)\n  if (originalEr) {\n    assert(originalEr instanceof Error)\n  }\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, er => {\n    if (er && (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM')) {\n      rmkids(p, options, cb)\n    } else if (er && er.code === 'ENOTDIR') {\n      cb(originalEr)\n    } else {\n      cb(er)\n    }\n  })\n}\n\nfunction rmkids (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, (er, files) => {\n    if (er) return cb(er)\n\n    let n = files.length\n    let errState\n\n    if (n === 0) return options.rmdir(p, cb)\n\n    files.forEach(f => {\n      rimraf(path.join(p, f), options, er => {\n        if (errState) {\n          return\n        }\n        if (er) return cb(errState = er)\n        if (--n === 0) {\n          options.rmdir(p, cb)\n        }\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nfunction rimrafSync (p, options) {\n  let st\n\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  try {\n    st = options.lstatSync(p)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er.code === 'EPERM' && isWindows) {\n      fixWinEPERMSync(p, options, er)\n    }\n  }\n\n  try {\n    // sunos lets the root user unlink directories, which is... weird.\n    if (st && st.isDirectory()) {\n      rmdirSync(p, options, null)\n    } else {\n      options.unlinkSync(p)\n    }\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    } else if (er.code === 'EPERM') {\n      return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n    } else if (er.code !== 'EISDIR') {\n      throw er\n    }\n    rmdirSync(p, options, er)\n  }\n}\n\nfunction rmdirSync (p, options, originalEr) {\n  assert(p)\n  assert(options)\n  if (originalEr) {\n    assert(originalEr instanceof Error)\n  }\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === 'ENOTDIR') {\n      throw originalEr\n    } else if (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM') {\n      rmkidsSync(p, options)\n    } else if (er.code !== 'ENOENT') {\n      throw er\n    }\n  }\n}\n\nfunction rmkidsSync (p, options) {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options))\n\n  // We only end up here once we got ENOTEMPTY at least once, and\n  // at this point, we are guaranteed to have removed all the kids.\n  // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n  // try really hard to delete stuff on windows, because it has a\n  // PROFOUNDLY annoying habit of not closing handles promptly when\n  // files are deleted, resulting in spurious ENOTEMPTY errors.\n  const retries = isWindows ? 100 : 1\n  let i = 0\n  do {\n    let threw = true\n    try {\n      const ret = options.rmdirSync(p, options)\n      threw = false\n      return ret\n    } finally {\n      if (++i < retries && threw) continue // eslint-disable-line\n    }\n  } while (true)\n}\n\nmodule.exports = rimraf\nrimraf.sync = rimrafSync\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst jsonFile = require('./jsonfile')\n\njsonFile.outputJson = u(require('./output-json'))\njsonFile.outputJsonSync = require('./output-json-sync')\n// aliases\njsonFile.outputJSON = jsonFile.outputJson\njsonFile.outputJSONSync = jsonFile.outputJsonSync\njsonFile.writeJSON = jsonFile.writeJson\njsonFile.writeJSONSync = jsonFile.writeJsonSync\njsonFile.readJSON = jsonFile.readJson\njsonFile.readJSONSync = jsonFile.readJsonSync\n\nmodule.exports = jsonFile\n","var _fs\ntry {\n  _fs = require('graceful-fs')\n} catch (_) {\n  _fs = require('fs')\n}\n\nfunction readFile (file, options, callback) {\n  if (callback == null) {\n    callback = options\n    options = {}\n  }\n\n  if (typeof options === 'string') {\n    options = {encoding: options}\n  }\n\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var shouldThrow = true\n  if ('throws' in options) {\n    shouldThrow = options.throws\n  }\n\n  fs.readFile(file, options, function (err, data) {\n    if (err) return callback(err)\n\n    data = stripBom(data)\n\n    var obj\n    try {\n      obj = JSON.parse(data, options ? options.reviver : null)\n    } catch (err2) {\n      if (shouldThrow) {\n        err2.message = file + ': ' + err2.message\n        return callback(err2)\n      } else {\n        return callback(null, null)\n      }\n    }\n\n    callback(null, obj)\n  })\n}\n\nfunction readFileSync (file, options) {\n  options = options || {}\n  if (typeof options === 'string') {\n    options = {encoding: options}\n  }\n\n  var fs = options.fs || _fs\n\n  var shouldThrow = true\n  if ('throws' in options) {\n    shouldThrow = options.throws\n  }\n\n  try {\n    var content = fs.readFileSync(file, options)\n    content = stripBom(content)\n    return JSON.parse(content, options.reviver)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = file + ': ' + err.message\n      throw err\n    } else {\n      return null\n    }\n  }\n}\n\nfunction stringify (obj, options) {\n  var spaces\n  var EOL = '\\n'\n  if (typeof options === 'object' && options !== null) {\n    if (options.spaces) {\n      spaces = options.spaces\n    }\n    if (options.EOL) {\n      EOL = options.EOL\n    }\n  }\n\n  var str = JSON.stringify(obj, options ? options.replacer : null, spaces)\n\n  return str.replace(/\\n/g, EOL) + EOL\n}\n\nfunction writeFile (file, obj, options, callback) {\n  if (callback == null) {\n    callback = options\n    options = {}\n  }\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var str = ''\n  try {\n    str = stringify(obj, options)\n  } catch (err) {\n    // Need to return whether a callback was passed or not\n    if (callback) callback(err, null)\n    return\n  }\n\n  fs.writeFile(file, str, options, callback)\n}\n\nfunction writeFileSync (file, obj, options) {\n  options = options || {}\n  var fs = options.fs || _fs\n\n  var str = stringify(obj, options)\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options)\n}\n\nfunction stripBom (content) {\n  // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified\n  if (Buffer.isBuffer(content)) content = content.toString('utf8')\n  content = content.replace(/^\\uFEFF/, '')\n  return content\n}\n\nvar jsonfile = {\n  readFile: readFile,\n  readFileSync: readFileSync,\n  writeFile: writeFile,\n  writeFileSync: writeFileSync\n}\n\nmodule.exports = jsonfile\n","'use strict'\n\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\nconst jsonFile = require('./jsonfile')\n\nfunction outputJson (file, data, options, callback) {\n  if (typeof options === 'function') {\n    callback = options\n    options = {}\n  }\n\n  const dir = path.dirname(file)\n\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return jsonFile.writeJson(file, data, options, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n      jsonFile.writeJson(file, data, options, callback)\n    })\n  })\n}\n\nmodule.exports = outputJson\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst jsonFile = require('./jsonfile')\n\nfunction outputJsonSync (file, data, options) {\n  const dir = path.dirname(file)\n\n  if (!fs.existsSync(dir)) {\n    mkdir.mkdirsSync(dir)\n  }\n\n  jsonFile.writeJsonSync(file, data, options)\n}\n\nmodule.exports = outputJsonSync\n","'use strict'\n\n// most of this code was written by Andrew Kelley\n// licensed under the BSD license: see\n// https://github.com/andrewrk/node-mv/blob/master/package.json\n\n// this needs a cleanup\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst ncp = require('../copy/ncp')\nconst path = require('path')\nconst remove = require('../remove').remove\nconst mkdirp = require('../mkdirs').mkdirs\n\nfunction move (src, dest, options, callback) {\n  if (typeof options === 'function') {\n    callback = options\n    options = {}\n  }\n\n  const overwrite = options.overwrite || options.clobber || false\n\n  isSrcSubdir(src, dest, (err, itIs) => {\n    if (err) return callback(err)\n    if (itIs) return callback(new Error(`Cannot move '${src}' to a subdirectory of itself, '${dest}'.`))\n    mkdirp(path.dirname(dest), err => {\n      if (err) return callback(err)\n      doRename()\n    })\n  })\n\n  function doRename () {\n    if (path.resolve(src) === path.resolve(dest)) {\n      fs.access(src, callback)\n    } else if (overwrite) {\n      fs.rename(src, dest, err => {\n        if (!err) return callback()\n\n        if (err.code === 'ENOTEMPTY' || err.code === 'EEXIST') {\n          remove(dest, err => {\n            if (err) return callback(err)\n            options.overwrite = false // just overwriteed it, no need to do it again\n            move(src, dest, options, callback)\n          })\n          return\n        }\n\n        // weird Windows shit\n        if (err.code === 'EPERM') {\n          setTimeout(() => {\n            remove(dest, err => {\n              if (err) return callback(err)\n              options.overwrite = false\n              move(src, dest, options, callback)\n            })\n          }, 200)\n          return\n        }\n\n        if (err.code !== 'EXDEV') return callback(err)\n        moveAcrossDevice(src, dest, overwrite, callback)\n      })\n    } else {\n      fs.link(src, dest, err => {\n        if (err) {\n          if (err.code === 'EXDEV' || err.code === 'EISDIR' || err.code === 'EPERM' || err.code === 'ENOTSUP') {\n            return moveAcrossDevice(src, dest, overwrite, callback)\n          }\n          return callback(err)\n        }\n        return fs.unlink(src, callback)\n      })\n    }\n  }\n}\n\nfunction moveAcrossDevice (src, dest, overwrite, callback) {\n  fs.stat(src, (err, stat) => {\n    if (err) return callback(err)\n\n    if (stat.isDirectory()) {\n      moveDirAcrossDevice(src, dest, overwrite, callback)\n    } else {\n      moveFileAcrossDevice(src, dest, overwrite, callback)\n    }\n  })\n}\n\nfunction moveFileAcrossDevice (src, dest, overwrite, callback) {\n  const flags = overwrite ? 'w' : 'wx'\n  const ins = fs.createReadStream(src)\n  const outs = fs.createWriteStream(dest, { flags })\n\n  ins.on('error', err => {\n    ins.destroy()\n    outs.destroy()\n    outs.removeListener('close', onClose)\n\n    // may want to create a directory but `out` line above\n    // creates an empty file for us: See #108\n    // don't care about error here\n    fs.unlink(dest, () => {\n      // note: `err` here is from the input stream errror\n      if (err.code === 'EISDIR' || err.code === 'EPERM') {\n        moveDirAcrossDevice(src, dest, overwrite, callback)\n      } else {\n        callback(err)\n      }\n    })\n  })\n\n  outs.on('error', err => {\n    ins.destroy()\n    outs.destroy()\n    outs.removeListener('close', onClose)\n    callback(err)\n  })\n\n  outs.once('close', onClose)\n  ins.pipe(outs)\n\n  function onClose () {\n    fs.unlink(src, callback)\n  }\n}\n\nfunction moveDirAcrossDevice (src, dest, overwrite, callback) {\n  const options = {\n    overwrite: false\n  }\n\n  if (overwrite) {\n    remove(dest, err => {\n      if (err) return callback(err)\n      startNcp()\n    })\n  } else {\n    startNcp()\n  }\n\n  function startNcp () {\n    ncp(src, dest, options, err => {\n      if (err) return callback(err)\n      remove(src, callback)\n    })\n  }\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// extract dest base dir and check if that is the same as src basename\nfunction isSrcSubdir (src, dest, cb) {\n  fs.stat(src, (err, st) => {\n    if (err) return cb(err)\n    if (st.isDirectory()) {\n      const baseDir = dest.split(path.dirname(src) + path.sep)[1]\n      if (baseDir) {\n        const destBasename = baseDir.split(path.sep)[0]\n        if (destBasename) return cb(null, src !== dest && dest.indexOf(src) > -1 && destBasename === path.basename(src))\n        return cb(null, false)\n      }\n      return cb(null, false)\n    }\n    return cb(null, false)\n  })\n}\n\nmodule.exports = {\n  move: u(move)\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copySync = require('../copy-sync').copySync\nconst removeSync = require('../remove').removeSync\nconst mkdirpSync = require('../mkdirs').mkdirsSync\nconst buffer = require('../util/buffer')\n\nfunction moveSync (src, dest, options) {\n  options = options || {}\n  const overwrite = options.overwrite || options.clobber || false\n\n  src = path.resolve(src)\n  dest = path.resolve(dest)\n\n  if (src === dest) return fs.accessSync(src)\n\n  if (isSrcSubdir(src, dest)) throw new Error(`Cannot move '${src}' into itself '${dest}'.`)\n\n  mkdirpSync(path.dirname(dest))\n  tryRenameSync()\n\n  function tryRenameSync () {\n    if (overwrite) {\n      try {\n        return fs.renameSync(src, dest)\n      } catch (err) {\n        if (err.code === 'ENOTEMPTY' || err.code === 'EEXIST' || err.code === 'EPERM') {\n          removeSync(dest)\n          options.overwrite = false // just overwriteed it, no need to do it again\n          return moveSync(src, dest, options)\n        }\n\n        if (err.code !== 'EXDEV') throw err\n        return moveSyncAcrossDevice(src, dest, overwrite)\n      }\n    } else {\n      try {\n        fs.linkSync(src, dest)\n        return fs.unlinkSync(src)\n      } catch (err) {\n        if (err.code === 'EXDEV' || err.code === 'EISDIR' || err.code === 'EPERM' || err.code === 'ENOTSUP') {\n          return moveSyncAcrossDevice(src, dest, overwrite)\n        }\n        throw err\n      }\n    }\n  }\n}\n\nfunction moveSyncAcrossDevice (src, dest, overwrite) {\n  const stat = fs.statSync(src)\n\n  if (stat.isDirectory()) {\n    return moveDirSyncAcrossDevice(src, dest, overwrite)\n  } else {\n    return moveFileSyncAcrossDevice(src, dest, overwrite)\n  }\n}\n\nfunction moveFileSyncAcrossDevice (src, dest, overwrite) {\n  const BUF_LENGTH = 64 * 1024\n  const _buff = buffer(BUF_LENGTH)\n\n  const flags = overwrite ? 'w' : 'wx'\n\n  const fdr = fs.openSync(src, 'r')\n  const stat = fs.fstatSync(fdr)\n  const fdw = fs.openSync(dest, flags, stat.mode)\n  let bytesRead = 1\n  let pos = 0\n\n  while (bytesRead > 0) {\n    bytesRead = fs.readSync(fdr, _buff, 0, BUF_LENGTH, pos)\n    fs.writeSync(fdw, _buff, 0, bytesRead)\n    pos += bytesRead\n  }\n\n  fs.closeSync(fdr)\n  fs.closeSync(fdw)\n  return fs.unlinkSync(src)\n}\n\nfunction moveDirSyncAcrossDevice (src, dest, overwrite) {\n  const options = {\n    overwrite: false\n  }\n\n  if (overwrite) {\n    removeSync(dest)\n    tryCopySync()\n  } else {\n    tryCopySync()\n  }\n\n  function tryCopySync () {\n    copySync(src, dest, options)\n    return removeSync(src)\n  }\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// extract dest base dir and check if that is the same as src basename\nfunction isSrcSubdir (src, dest) {\n  try {\n    return fs.statSync(src).isDirectory() &&\n           src !== dest &&\n           dest.indexOf(src) > -1 &&\n           dest.split(path.dirname(src) + path.sep)[1].split(path.sep)[0] === path.basename(src)\n  } catch (e) {\n    return false\n  }\n}\n\nmodule.exports = {\n  moveSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst remove = require('../remove')\n\nconst emptyDir = u(function emptyDir (dir, callback) {\n  callback = callback || function () {}\n  fs.readdir(dir, (err, items) => {\n    if (err) return mkdir.mkdirs(dir, callback)\n\n    items = items.map(item => path.join(dir, item))\n\n    deleteItem()\n\n    function deleteItem () {\n      const item = items.pop()\n      if (!item) return callback()\n      remove.remove(item, err => {\n        if (err) return callback(err)\n        deleteItem()\n      })\n    }\n  })\n})\n\nfunction emptyDirSync (dir) {\n  let items\n  try {\n    items = fs.readdirSync(dir)\n  } catch (err) {\n    return mkdir.mkdirsSync(dir)\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item)\n    remove.removeSync(item)\n  })\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n}\n","'use strict'\n\nconst file = require('./file')\nconst link = require('./link')\nconst symlink = require('./symlink')\n\nmodule.exports = {\n  // file\n  createFile: file.createFile,\n  createFileSync: file.createFileSync,\n  ensureFile: file.createFile,\n  ensureFileSync: file.createFileSync,\n  // link\n  createLink: link.createLink,\n  createLinkSync: link.createLinkSync,\n  ensureLink: link.createLink,\n  ensureLinkSync: link.createLinkSync,\n  // symlink\n  createSymlink: symlink.createSymlink,\n  createSymlinkSync: symlink.createSymlinkSync,\n  ensureSymlink: symlink.createSymlink,\n  ensureSymlinkSync: symlink.createSymlinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction createFile (file, callback) {\n  function makeFile () {\n    fs.writeFile(file, '', err => {\n      if (err) return callback(err)\n      callback()\n    })\n  }\n\n  fs.stat(file, (err, stats) => { // eslint-disable-line handle-callback-err\n    if (!err && stats.isFile()) return callback()\n    const dir = path.dirname(file)\n    pathExists(dir, (err, dirExists) => {\n      if (err) return callback(err)\n      if (dirExists) return makeFile()\n      mkdir.mkdirs(dir, err => {\n        if (err) return callback(err)\n        makeFile()\n      })\n    })\n  })\n}\n\nfunction createFileSync (file) {\n  let stats\n  try {\n    stats = fs.statSync(file)\n  } catch (e) {}\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n  if (!fs.existsSync(dir)) {\n    mkdir.mkdirsSync(dir)\n  }\n\n  fs.writeFileSync(file, '')\n}\n\nmodule.exports = {\n  createFile: u(createFile),\n  createFileSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction createLink (srcpath, dstpath, callback) {\n  function makeLink (srcpath, dstpath) {\n    fs.link(srcpath, dstpath, err => {\n      if (err) return callback(err)\n      callback(null)\n    })\n  }\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    fs.lstat(srcpath, (err, stat) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureLink')\n        return callback(err)\n      }\n\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return makeLink(srcpath, dstpath)\n        mkdir.mkdirs(dir, err => {\n          if (err) return callback(err)\n          makeLink(srcpath, dstpath)\n        })\n      })\n    })\n  })\n}\n\nfunction createLinkSync (srcpath, dstpath, callback) {\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  try {\n    fs.lstatSync(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst _mkdirs = require('../mkdirs')\nconst mkdirs = _mkdirs.mkdirs\nconst mkdirsSync = _mkdirs.mkdirsSync\n\nconst _symlinkPaths = require('./symlink-paths')\nconst symlinkPaths = _symlinkPaths.symlinkPaths\nconst symlinkPathsSync = _symlinkPaths.symlinkPathsSync\n\nconst _symlinkType = require('./symlink-type')\nconst symlinkType = _symlinkType.symlinkType\nconst symlinkTypeSync = _symlinkType.symlinkTypeSync\n\nconst pathExists = require('../path-exists').pathExists\n\nfunction createSymlink (srcpath, dstpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n\n  pathExists(dstpath, (err, destinationExists) => {\n    if (err) return callback(err)\n    if (destinationExists) return callback(null)\n    symlinkPaths(srcpath, dstpath, (err, relative) => {\n      if (err) return callback(err)\n      srcpath = relative.toDst\n      symlinkType(relative.toCwd, type, (err, type) => {\n        if (err) return callback(err)\n        const dir = path.dirname(dstpath)\n        pathExists(dir, (err, dirExists) => {\n          if (err) return callback(err)\n          if (dirExists) return fs.symlink(srcpath, dstpath, type, callback)\n          mkdirs(dir, err => {\n            if (err) return callback(err)\n            fs.symlink(srcpath, dstpath, type, callback)\n          })\n        })\n      })\n    })\n  })\n}\n\nfunction createSymlinkSync (srcpath, dstpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n\n  const destinationExists = fs.existsSync(dstpath)\n  if (destinationExists) return undefined\n\n  const relative = symlinkPathsSync(srcpath, dstpath)\n  srcpath = relative.toDst\n  type = symlinkTypeSync(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n  const exists = fs.existsSync(dir)\n  if (exists) return fs.symlinkSync(srcpath, dstpath, type)\n  mkdirsSync(dir)\n  return fs.symlinkSync(srcpath, dstpath, type)\n}\n\nmodule.exports = {\n  createSymlink: u(createSymlink),\n  createSymlinkSync\n}\n","'use strict'\n\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst pathExists = require('../path-exists').pathExists\n\n/**\n * Function that returns two types of paths, one relative to symlink, and one\n * relative to the current working directory. Checks if path is absolute or\n * relative. If the path is relative, this function checks if the path is\n * relative to symlink or relative to current working directory. This is an\n * initiative to find a smarter `srcpath` to supply when building symlinks.\n * This allows you to determine which path to use out of one of three possible\n * types of source paths. The first is an absolute path. This is detected by\n * `path.isAbsolute()`. When an absolute path is provided, it is checked to\n * see if it exists. If it does it's used, if not an error is returned\n * (callback)/ thrown (sync). The other two options for `srcpath` are a\n * relative url. By default Node's `fs.symlink` works by creating a symlink\n * using `dstpath` and expects the `srcpath` to be relative to the newly\n * created symlink. If you provide a `srcpath` that does not exist on the file\n * system it results in a broken symlink. To minimize this, the function\n * checks to see if the 'relative to symlink' source file exists, and if it\n * does it will use it. If it does not, it checks if there's a file that\n * exists that is relative to the current working directory, if does its used.\n * This preserves the expectations of the original fs.symlink spec and adds\n * the ability to pass in `relative to current working direcotry` paths.\n */\n\nfunction symlinkPaths (srcpath, dstpath, callback) {\n  if (path.isAbsolute(srcpath)) {\n    return fs.lstat(srcpath, (err, stat) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureSymlink')\n        return callback(err)\n      }\n      return callback(null, {\n        'toCwd': srcpath,\n        'toDst': srcpath\n      })\n    })\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    return pathExists(relativeToDst, (err, exists) => {\n      if (err) return callback(err)\n      if (exists) {\n        return callback(null, {\n          'toCwd': relativeToDst,\n          'toDst': srcpath\n        })\n      } else {\n        return fs.lstat(srcpath, (err, stat) => {\n          if (err) {\n            err.message = err.message.replace('lstat', 'ensureSymlink')\n            return callback(err)\n          }\n          return callback(null, {\n            'toCwd': srcpath,\n            'toDst': path.relative(dstdir, srcpath)\n          })\n        })\n      }\n    })\n  }\n}\n\nfunction symlinkPathsSync (srcpath, dstpath) {\n  let exists\n  if (path.isAbsolute(srcpath)) {\n    exists = fs.existsSync(srcpath)\n    if (!exists) throw new Error('absolute srcpath does not exist')\n    return {\n      'toCwd': srcpath,\n      'toDst': srcpath\n    }\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    exists = fs.existsSync(relativeToDst)\n    if (exists) {\n      return {\n        'toCwd': relativeToDst,\n        'toDst': srcpath\n      }\n    } else {\n      exists = fs.existsSync(srcpath)\n      if (!exists) throw new Error('relative srcpath does not exist')\n      return {\n        'toCwd': srcpath,\n        'toDst': path.relative(dstdir, srcpath)\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  symlinkPaths,\n  symlinkPathsSync\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\n\nfunction symlinkType (srcpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n  if (type) return callback(null, type)\n  fs.lstat(srcpath, (err, stats) => {\n    if (err) return callback(null, 'file')\n    type = (stats && stats.isDirectory()) ? 'dir' : 'file'\n    callback(null, type)\n  })\n}\n\nfunction symlinkTypeSync (srcpath, type) {\n  let stats\n\n  if (type) return type\n  try {\n    stats = fs.lstatSync(srcpath)\n  } catch (e) {\n    return 'file'\n  }\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nmodule.exports = {\n  symlinkType,\n  symlinkTypeSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction outputFile (file, data, encoding, callback) {\n  if (typeof encoding === 'function') {\n    callback = encoding\n    encoding = 'utf8'\n  }\n\n  const dir = path.dirname(file)\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return fs.writeFile(file, data, encoding, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n\n      fs.writeFile(file, data, encoding, callback)\n    })\n  })\n}\n\nfunction outputFileSync (file, data, encoding) {\n  const dir = path.dirname(file)\n  if (fs.existsSync(dir)) {\n    return fs.writeFileSync.apply(fs, arguments)\n  }\n  mkdir.mkdirsSync(dir)\n  fs.writeFileSync.apply(fs, arguments)\n}\n\nmodule.exports = {\n  outputFile: u(outputFile),\n  outputFileSync\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// tslint:disable:no-any\n\nimport * as theia from '@theia/plugin';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { QuickOpenExtImpl } from './quick-open';\nimport {\n    MAIN_RPC_CONTEXT,\n    Plugin as InternalPlugin,\n    PluginManager,\n    PluginAPIFactory,\n    MainMessageType\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageRegistryExt } from './message-registry';\nimport { StatusBarMessageRegistryExt } from './status-bar-message-registry';\nimport { WindowStateExtImpl } from './window-state';\nimport { WorkspaceExtImpl } from './workspace';\nimport { EnvExtImpl } from './env';\nimport { QueryParameters } from '../common/env';\nimport {\n    ConfigurationTarget,\n    Disposable,\n    Position,\n    Range,\n    Selection,\n    ViewColumn,\n    TextEditorSelectionChangeKind,\n    EndOfLine,\n    SnippetString,\n    ThemeColor,\n    ThemeIcon,\n    TextEditorRevealType,\n    TextEditorLineNumbersStyle,\n    DecorationRangeBehavior,\n    OverviewRulerLane,\n    StatusBarAlignment,\n    RelativePattern,\n    IndentAction,\n    CompletionItem,\n    CompletionItemKind,\n    CompletionList,\n    TextEdit,\n    CompletionTriggerKind,\n    Diagnostic,\n    DiagnosticRelatedInformation,\n    DiagnosticSeverity,\n    DiagnosticTag,\n    Location,\n    Progress,\n    ProgressOptions,\n    ProgressLocation,\n    ParameterInformation,\n    SignatureInformation,\n    SignatureHelp,\n    SignatureHelpTriggerKind,\n    Hover,\n    DocumentHighlightKind,\n    DocumentHighlight,\n    DocumentLink,\n    CodeLens,\n    CodeActionKind,\n    CodeActionTrigger,\n    TextDocumentSaveReason,\n    CodeAction,\n    TreeItem,\n    TreeItemCollapsibleState,\n    DocumentSymbol,\n    WorkspaceEdit,\n    SymbolInformation,\n    FileType,\n    FileChangeType,\n    ShellQuoting,\n    ShellExecution,\n    ProcessExecution,\n    TaskScope,\n    TaskPanelKind,\n    TaskRevealKind,\n    TaskGroup,\n    Task,\n    DebugAdapterExecutable,\n    DebugAdapterServer,\n    Breakpoint,\n    SourceBreakpoint,\n    FunctionBreakpoint,\n    FoldingRange,\n    FoldingRangeKind,\n    Color,\n    ColorInformation,\n    ColorPresentation,\n    OperatingSystem,\n    WebviewPanelTargetArea,\n    FileSystemError,\n    CommentThreadCollapsibleState,\n    QuickInputButtons,\n    CommentMode\n} from './types-impl';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorsExtImpl } from './text-editors';\nimport { DocumentsExtImpl } from './documents';\nimport Uri from 'vscode-uri';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { OutputChannelRegistryExtImpl } from './output-channel-registry';\nimport { TerminalServiceExtImpl, TerminalExtImpl } from './terminal-ext';\nimport { LanguagesExtImpl, score } from './languages';\nimport { fromDocumentSelector, pluginToPluginInfo } from './type-converters';\nimport { DialogsExtImpl } from './dialogs';\nimport { NotificationExtImpl } from './notification';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { MarkdownString } from './markdown-string';\nimport { TreeViewsExtImpl } from './tree/tree-views';\nimport { LanguagesContributionExtImpl } from './languages-contribution-ext';\nimport { ConnectionExtImpl } from './connection-ext';\nimport { TasksExtImpl } from './tasks/tasks';\nimport { DebugExtImpl } from './node/debug/debug';\nimport { FileSystemExtImpl } from './file-system';\nimport { QuickPick, QuickPickItem } from '@theia/plugin';\nimport { ScmExtImpl } from './scm';\nimport { DecorationProvider, LineChange } from '@theia/plugin';\nimport { DecorationsExtImpl } from './decorations';\nimport { TextEditorExt } from './text-editor';\nimport { ClipboardExt } from './clipboard-ext';\nimport { WebviewsExtImpl } from './webviews';\n\nexport function createAPIFactory(\n    rpc: RPCProtocol,\n    pluginManager: PluginManager,\n    envExt: EnvExtImpl,\n    debugExt: DebugExtImpl,\n    preferenceRegistryExt: PreferenceRegistryExtImpl,\n    editorsAndDocumentsExt: EditorsAndDocumentsExtImpl,\n    workspaceExt: WorkspaceExtImpl,\n    messageRegistryExt: MessageRegistryExt,\n    clipboard: ClipboardExt,\n    webviewExt: WebviewsExtImpl\n): PluginAPIFactory {\n\n    const commandRegistry = rpc.set(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT, new CommandRegistryImpl(rpc));\n    const quickOpenExt = rpc.set(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT, new QuickOpenExtImpl(rpc));\n    const dialogsExt = new DialogsExtImpl(rpc);\n    const windowStateExt = rpc.set(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT, new WindowStateExtImpl(rpc));\n    const notificationExt = rpc.set(MAIN_RPC_CONTEXT.NOTIFICATION_EXT, new NotificationExtImpl(rpc));\n    const editors = rpc.set(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT, new TextEditorsExtImpl(rpc, editorsAndDocumentsExt));\n    const documents = rpc.set(MAIN_RPC_CONTEXT.DOCUMENTS_EXT, new DocumentsExtImpl(rpc, editorsAndDocumentsExt));\n    const statusBarMessageRegistryExt = new StatusBarMessageRegistryExt(rpc);\n    const terminalExt = rpc.set(MAIN_RPC_CONTEXT.TERMINAL_EXT, new TerminalServiceExtImpl(rpc));\n    const outputChannelRegistryExt = rpc.set(MAIN_RPC_CONTEXT.OUTPUT_CHANNEL_REGISTRY_EXT, new OutputChannelRegistryExtImpl(rpc));\n    const languagesExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_EXT, new LanguagesExtImpl(rpc, documents, commandRegistry));\n    const treeViewsExt = rpc.set(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT, new TreeViewsExtImpl(rpc, commandRegistry));\n    const tasksExt = rpc.set(MAIN_RPC_CONTEXT.TASKS_EXT, new TasksExtImpl(rpc));\n    const connectionExt = rpc.set(MAIN_RPC_CONTEXT.CONNECTION_EXT, new ConnectionExtImpl(rpc));\n    const languagesContributionExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_CONTRIBUTION_EXT, new LanguagesContributionExtImpl(rpc, connectionExt));\n    const fileSystemExt = rpc.set(MAIN_RPC_CONTEXT.FILE_SYSTEM_EXT, new FileSystemExtImpl(rpc));\n    const scmExt = rpc.set(MAIN_RPC_CONTEXT.SCM_EXT, new ScmExtImpl(rpc, commandRegistry));\n    const decorationsExt = rpc.set(MAIN_RPC_CONTEXT.DECORATIONS_EXT, new DecorationsExtImpl(rpc));\n    rpc.set(MAIN_RPC_CONTEXT.DEBUG_EXT, debugExt);\n\n    return function (plugin: InternalPlugin): typeof theia {\n        const commands: typeof theia.commands = {\n            // tslint:disable-next-line:no-any\n            registerCommand(command: theia.CommandDescription, handler?: <T>(...args: any[]) => T | Thenable<T | undefined>, thisArg?: any): Disposable {\n                return commandRegistry.registerCommand(command, handler, thisArg);\n            },\n            // tslint:disable-next-line:no-any\n            executeCommand<T>(commandId: string, ...args: any[]): PromiseLike<T | undefined> {\n                return commandRegistry.executeCommand<T>(commandId, ...args);\n            },\n            registerTextEditorCommand(command: string, handler: (textEditor: theia.TextEditor, edit: theia.TextEditorEdit, ...arg: any[]) => void, thisArg?: any): Disposable {\n                return commandRegistry.registerCommand({ id: command }, (...args: any[]): any => {\n                    const activeTextEditor = editors.getActiveEditor();\n                    if (!activeTextEditor) {\n                        console.warn('Cannot execute ' + command + ' because there is no active text editor.');\n                        return undefined;\n                    }\n\n                    return activeTextEditor.edit((edit: theia.TextEditorEdit) => {\n                        args.unshift(activeTextEditor, edit);\n                        handler.apply(thisArg, args);\n                    }).then(result => {\n                        if (!result) {\n                            console.warn('Edits from command ' + command + ' were not applied.');\n                        }\n                    }, err => {\n                        console.warn('An error occurred while running command ' + command, err);\n                    });\n                });\n            },\n            // tslint:disable-next-line:no-any\n            registerHandler(commandId: string, handler: (...args: any[]) => any, thisArg?: any): Disposable {\n                return commandRegistry.registerHandler(commandId, handler, thisArg);\n            },\n            getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n                return commandRegistry.getKeyBinding(commandId);\n            },\n            getCommands(filterInternal: boolean = false): PromiseLike<string[]> {\n                return commandRegistry.getCommands(filterInternal);\n            },\n            registerDiffInformationCommand(command: string, callback: (diff: LineChange[], ...args: any[]) => any, thisArg?: any): Disposable {\n                // Dummy implementation.\n                return new Disposable(() => { });\n            }\n        };\n\n        const { onDidChangeActiveTerminal, onDidCloseTerminal, onDidOpenTerminal } = terminalExt;\n        const showInformationMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Info);\n        const showWarningMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Warning);\n        const showErrorMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Error);\n        const window: typeof theia.window = {\n\n            get activeTerminal(): TerminalExtImpl | undefined {\n                return terminalExt.activeTerminal;\n            },\n            get activeTextEditor(): TextEditorExt | undefined {\n                return editors.getActiveEditor();\n            },\n            get visibleTextEditors(): theia.TextEditor[] {\n                return editors.getVisibleTextEditors();\n            },\n            get terminals(): TerminalExtImpl[] {\n                return terminalExt.terminals;\n            },\n            onDidChangeActiveTerminal,\n            // tslint:disable-next-line:typedef\n            onDidChangeActiveTextEditor(listener, thisArg?, disposables?) {\n                return editors.onDidChangeActiveTextEditor(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidChangeVisibleTextEditors(listener, thisArg?, disposables?) {\n                return editors.onDidChangeVisibleTextEditors(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidChangeTextEditorSelection(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorSelection(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidChangeTextEditorOptions(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorOptions(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidChangeTextEditorViewColumn(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorViewColumn(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidChangeTextEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            async showTextDocument(documentArg: theia.TextDocument | Uri,\n                optionsArg?: theia.TextDocumentShowOptions | theia.ViewColumn,\n                preserveFocus?: boolean\n            ): Promise<theia.TextEditor> {\n                let documentOptions: theia.TextDocumentShowOptions | undefined;\n                const uri: Uri = documentArg instanceof Uri ? documentArg : documentArg.uri;\n                if (optionsArg) {\n                    // tslint:disable-next-line:no-any\n                    const optionsAny: any = optionsArg;\n                    if (optionsAny.preserveFocus || optionsAny.preview || optionsAny.selection || optionsAny.viewColumn) {\n                        documentOptions = optionsArg as theia.TextDocumentShowOptions;\n                    }\n                }\n                if (preserveFocus) {\n                    if (documentOptions) {\n                        documentOptions.preserveFocus = preserveFocus;\n                    } else {\n                        documentOptions = { preserveFocus };\n                    }\n                }\n                await documents.showDocument(uri, documentOptions);\n                const textEditor = editors.getVisibleTextEditors().find(editor => editor.document.uri.toString() === uri.toString());\n                if (textEditor) {\n                    return Promise.resolve(textEditor);\n                } else {\n                    throw new Error(`Failed to show text document ${documentArg.toString()}`);\n                }\n            },\n            // tslint:disable-next-line:no-any\n            showQuickPick(items: any, options: theia.QuickPickOptions, token?: theia.CancellationToken): any {\n                if (token) {\n                    const coreEvent = Object.assign(token.onCancellationRequested, { maxListeners: 0 });\n                    const coreCancellationToken = { isCancellationRequested: token.isCancellationRequested, onCancellationRequested: coreEvent };\n                    return quickOpenExt.showQuickPick(items, options, coreCancellationToken);\n                } else {\n                    return quickOpenExt.showQuickPick(items, options);\n                }\n            },\n            createQuickPick<T extends QuickPickItem>(): QuickPick<T> {\n                return quickOpenExt.createQuickPick(plugin);\n            },\n            showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n                return workspaceExt.pickWorkspaceFolder(options);\n            },\n            showInformationMessage,\n            showWarningMessage,\n            showErrorMessage,\n            showOpenDialog(options: theia.OpenDialogOptions): PromiseLike<Uri[] | undefined> {\n                return dialogsExt.showOpenDialog(options);\n            },\n            showSaveDialog(options: theia.SaveDialogOptions): PromiseLike<Uri | undefined> {\n                return dialogsExt.showSaveDialog(options);\n            },\n            showUploadDialog(options: theia.UploadDialogOptions): PromiseLike<Uri[] | undefined> {\n                return dialogsExt.showUploadDialog(options);\n            },\n            // tslint:disable-next-line:no-any\n            setStatusBarMessage(text: string, arg?: number | PromiseLike<any>): Disposable {\n                return statusBarMessageRegistryExt.setStatusBarMessage(text, arg);\n            },\n            showInputBox(options?: theia.InputBoxOptions, token?: theia.CancellationToken): PromiseLike<string | undefined> {\n                if (token) {\n                    const coreEvent = Object.assign(token.onCancellationRequested, { maxListeners: 0 });\n                    const coreCancellationToken = { isCancellationRequested: token.isCancellationRequested, onCancellationRequested: coreEvent };\n                    return quickOpenExt.showInput(options, coreCancellationToken);\n                } else {\n                    return quickOpenExt.showInput(options);\n                }\n            },\n            createStatusBarItem(alignment?: theia.StatusBarAlignment, priority?: number): theia.StatusBarItem {\n                return statusBarMessageRegistryExt.createStatusBarItem(alignment, priority);\n            },\n            createOutputChannel(name: string): theia.OutputChannel {\n                return outputChannelRegistryExt.createOutputChannel(name, pluginToPluginInfo(plugin));\n            },\n            createWebviewPanel(viewType: string,\n                title: string,\n                showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n                options: theia.WebviewPanelOptions & theia.WebviewOptions = {}): theia.WebviewPanel {\n                return webviewExt.createWebview(viewType, title, showOptions, options, plugin);\n            },\n            registerWebviewPanelSerializer(viewType: string, serializer: theia.WebviewPanelSerializer): theia.Disposable {\n                return webviewExt.registerWebviewPanelSerializer(viewType, serializer, plugin);\n            },\n            get state(): theia.WindowState {\n                return windowStateExt.getWindowState();\n            },\n            onDidChangeWindowState(listener, thisArg?, disposables?): theia.Disposable {\n                return windowStateExt.onDidChangeWindowState(listener, thisArg, disposables);\n            },\n            createTerminal(nameOrOptions: theia.TerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): theia.Terminal {\n                return terminalExt.createTerminal(nameOrOptions, shellPath, shellArgs);\n            },\n            onDidCloseTerminal,\n            onDidOpenTerminal,\n            createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n                return editors.createTextEditorDecorationType(options);\n            },\n            registerTreeDataProvider<T>(viewId: string, treeDataProvider: theia.TreeDataProvider<T>): Disposable {\n                return treeViewsExt.registerTreeDataProvider(plugin, viewId, treeDataProvider);\n            },\n            createTreeView<T>(viewId: string, options: { treeDataProvider: theia.TreeDataProvider<T> }): theia.TreeView<T> {\n                return treeViewsExt.createTreeView(plugin, viewId, options);\n            },\n            withProgress<R>(\n                options: ProgressOptions,\n                task: (progress: Progress<{ message?: string; increment?: number }>, token: theia.CancellationToken) => PromiseLike<R>\n            ): PromiseLike<R> {\n                return notificationExt.withProgress(options, task);\n            },\n            registerDecorationProvider(provider: DecorationProvider): theia.Disposable {\n                return decorationsExt.registerDecorationProvider(provider);\n            },\n            registerUriHandler(handler: theia.UriHandler): theia.Disposable {\n                // TODO ?\n                return new Disposable(() => { });\n            },\n            createInputBox(): theia.InputBox {\n                return quickOpenExt.createInputBox(plugin);\n            }\n        };\n\n        const workspace: typeof theia.workspace = {\n            get rootPath(): string | undefined {\n                return workspaceExt.rootPath;\n            },\n            get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n                return workspaceExt.workspaceFolders;\n            },\n            get name(): string | undefined {\n                return workspaceExt.name;\n            },\n            onDidChangeWorkspaceFolders(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidChangeWorkspaceFolders(listener, thisArg, disposables);\n            },\n            get textDocuments(): theia.TextDocument[] {\n                return documents.getAllDocumentData().map(data => data.document);\n            },\n            // tslint:disable-next-line:typedef\n            onDidChangeTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidChangeDocument(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidCloseTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidRemoveDocument(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidOpenTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidAddDocument(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onWillSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onWillSaveTextDocument(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidSaveTextDocument(listener, thisArg, disposables);\n            },\n            getConfiguration(section?, resource?): theia.WorkspaceConfiguration {\n                return preferenceRegistryExt.getConfiguration(section, resource);\n            },\n            onDidChangeConfiguration(listener, thisArgs?, disposables?): theia.Disposable {\n                return preferenceRegistryExt.onDidChangeConfiguration(listener, thisArgs, disposables);\n            },\n            async openTextDocument(uriOrFileNameOrOptions?: theia.Uri | string | { language?: string; content?: string; }): Promise<theia.TextDocument | undefined> {\n                const options = uriOrFileNameOrOptions as { language?: string; content?: string; };\n\n                let uri: Uri;\n                if (typeof uriOrFileNameOrOptions === 'string') {\n                    uri = Uri.file(uriOrFileNameOrOptions);\n\n                } else if (uriOrFileNameOrOptions instanceof Uri) {\n                    uri = uriOrFileNameOrOptions;\n\n                } else if (!options || typeof options === 'object') {\n                    uri = await documents.createDocumentData(options);\n\n                } else {\n                    return Promise.reject(new Error('illegal argument - uriOrFileNameOrOptions'));\n                }\n\n                const data = await documents.openDocument(uri);\n                return data && data.document;\n            },\n            createFileSystemWatcher(globPattern: theia.GlobPattern,\n                ignoreCreateEvents?: boolean,\n                ignoreChangeEvents?: boolean,\n                ignoreDeleteEvents?: boolean): theia.FileSystemWatcher {\n                return workspaceExt.createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n            },\n            findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number, token?: CancellationToken): PromiseLike<Uri[]> {\n                return workspaceExt.findFiles(include, exclude, maxResults, token);\n            },\n            saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n                return editors.saveAll(includeUntitled);\n            },\n            applyEdit(edit: theia.WorkspaceEdit): PromiseLike<boolean> {\n                return editors.applyWorkspaceEdit(edit);\n            },\n            registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n                return workspaceExt.registerTextDocumentContentProvider(scheme, provider);\n            },\n            registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider): theia.Disposable {\n                return fileSystemExt.registerFileSystemProvider(scheme, provider);\n            },\n            getWorkspaceFolder(uri: theia.Uri): theia.WorkspaceFolder | undefined {\n                return workspaceExt.getWorkspaceFolder(uri);\n            },\n            asRelativePath(pathOrUri: theia.Uri | string, includeWorkspace?: boolean): string | undefined {\n                return workspaceExt.getRelativePath(pathOrUri, includeWorkspace);\n            },\n            updateWorkspaceFolders: (index, deleteCount, ...workspaceFoldersToAdd) =>\n                workspaceExt.updateWorkspaceFolders(index, deleteCount || 0, ...workspaceFoldersToAdd)\n            ,\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasks.registerTaskProvider(type, provider);\n            },\n            // Experimental API https://github.com/eclipse-theia/theia/issues/4167\n            onDidRenameFile(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidRenameFile(listener, thisArg, disposables);\n            },\n            onWillRenameFile(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onWillRenameFile(listener, thisArg, disposables);\n            }\n        };\n\n        const env: typeof theia.env = Object.freeze({\n            get appName(): string { return envExt.appName; },\n            get appRoot(): string { return envExt.appRoot; },\n            get language(): string { return envExt.language; },\n            get machineId(): string { return envExt.machineId; },\n            get sessionId(): string { return envExt.sessionId; },\n            get uriScheme(): string { return envExt.uriScheme; },\n            get shell(): string { return envExt.shell; },\n            clipboard,\n            getEnvVariable(envVarName: string): PromiseLike<string | undefined> {\n                return envExt.getEnvVariable(envVarName);\n            },\n            getQueryParameter(queryParamName: string): string | string[] | undefined {\n                return envExt.getQueryParameter(queryParamName);\n            },\n            getQueryParameters(): QueryParameters {\n                return envExt.getQueryParameters();\n            },\n            getClientOperatingSystem(): PromiseLike<theia.OperatingSystem> {\n                return envExt.getClientOperatingSystem();\n            },\n            openExternal(uri: theia.Uri): PromiseLike<boolean> {\n                return windowStateExt.openUri(uri);\n            },\n            asExternalUri(target: theia.Uri): PromiseLike<theia.Uri> {\n                return windowStateExt.asExternalUri(target);\n            }\n        });\n\n        const languageServer: typeof theia.languageServer = {\n            registerLanguageServerProvider(languageServerInfo: theia.LanguageServerInfo): Disposable {\n                return languagesContributionExt.registerLanguageServerProvider(languageServerInfo);\n            },\n            stop(id: string): void {\n                languagesContributionExt.stop(id);\n            }\n        };\n\n        const languages: typeof theia.languages = {\n            getLanguages(): PromiseLike<string[]> {\n                return languagesExt.getLanguages();\n            },\n            setTextDocumentLanguage(document: theia.TextDocument, languageId: string): PromiseLike<theia.TextDocument> {\n                return languagesExt.changeLanguage(document.uri, languageId);\n            },\n            match(selector: theia.DocumentSelector, document: theia.TextDocument): number {\n                return score(fromDocumentSelector(selector), document.uri, document.languageId, true);\n            },\n            get onDidChangeDiagnostics(): theia.Event<theia.DiagnosticChangeEvent> {\n                return languagesExt.onDidChangeDiagnostics;\n            },\n            // tslint:disable-next-line:typedef\n            getDiagnostics(resource?: Uri) {\n                // tslint:disable-next-line:no-any\n                return <any>languagesExt.getDiagnostics(resource);\n            },\n            createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n                return languagesExt.createDiagnosticCollection(name);\n            },\n            setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n                return languagesExt.setLanguageConfiguration(language, configuration);\n            },\n            registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, ...triggerCharacters: string[]): theia.Disposable {\n                return languagesExt.registerCompletionItemProvider(selector, provider, triggerCharacters, pluginToPluginInfo(plugin));\n            },\n            registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider): theia.Disposable {\n                return languagesExt.registerDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider): theia.Disposable {\n                return languagesExt.registerDeclarationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSignatureHelpProvider(\n                selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, first?: string | theia.SignatureHelpProviderMetadata, ...remaining: string[]\n            ): theia.Disposable {\n                let metadata: theia.SignatureHelpProviderMetadata;\n                if (typeof first === 'object') {\n                    metadata = first;\n                } else {\n                    const triggerCharacters: string[] = [];\n                    metadata = { triggerCharacters, retriggerCharacters: [] };\n                    if (first) {\n                        triggerCharacters.push(first, ...remaining);\n                    }\n                }\n                return languagesExt.registerSignatureHelpProvider(selector, provider, metadata, pluginToPluginInfo(plugin));\n            },\n            registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider): theia.Disposable {\n                return languagesExt.registerTypeDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider): theia.Disposable {\n                return languagesExt.registerImplementationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider): theia.Disposable {\n                return languagesExt.registerHoverProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider): theia.Disposable {\n                return languagesExt.registerDocumentHighlightProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider): theia.Disposable {\n                return languagesExt.registerWorkspaceSymbolProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentRangeFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerOnTypeFormattingEditProvider(\n                selector: theia.DocumentSelector,\n                provider: theia.OnTypeFormattingEditProvider,\n                firstTriggerCharacter: string,\n                ...moreTriggerCharacters: string[]\n            ): theia.Disposable {\n                return languagesExt.registerOnTypeFormattingEditProvider(selector, provider, [firstTriggerCharacter].concat(moreTriggerCharacters), pluginToPluginInfo(plugin));\n            },\n            registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider): theia.Disposable {\n                return languagesExt.registerLinkProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerCodeActionsProvider(selector: theia.DocumentSelector, provider: theia.CodeActionProvider, metadata?: theia.CodeActionProviderMetadata): theia.Disposable {\n                return languagesExt.registerCodeActionsProvider(selector, provider, plugin.model, pluginToPluginInfo(plugin), metadata);\n            },\n            registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider): theia.Disposable {\n                return languagesExt.registerCodeLensProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider): theia.Disposable {\n                return languagesExt.registerReferenceProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider): theia.Disposable {\n                return languagesExt.registerDocumentSymbolProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider): theia.Disposable {\n                return languagesExt.registerColorProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider): theia.Disposable {\n                return languagesExt.registerFoldingRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider): theia.Disposable {\n                return languagesExt.registerRenameProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n        };\n\n        const plugins: typeof theia.plugins = {\n            // tslint:disable-next-line:no-any\n            get all(): theia.Plugin<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new Plugin(pluginManager, plg));\n            },\n            // tslint:disable-next-line:no-any\n            getPlugin(pluginId: string): theia.Plugin<any> | undefined {\n                const plg = pluginManager.getPluginById(pluginId.toLowerCase());\n                if (plg) {\n                    return new Plugin(pluginManager, plg);\n                }\n                return undefined;\n            },\n            get onDidChange(): theia.Event<void> {\n                return pluginManager.onDidChange;\n            }\n        };\n\n        const debuggersContributions = plugin.rawModel.contributes && plugin.rawModel.contributes.debuggers || [];\n        debugExt.assistedInject(connectionExt, commandRegistry);\n        debugExt.registerDebuggersContributions(plugin.pluginFolder, debuggersContributions);\n        const debug: typeof theia.debug = {\n            get activeDebugSession(): theia.DebugSession | undefined {\n                return debugExt.activeDebugSession;\n            },\n            get activeDebugConsole(): theia.DebugConsole {\n                return debugExt.activeDebugConsole;\n            },\n            get breakpoints(): theia.Breakpoint[] {\n                return debugExt.breakpoints;\n            },\n            get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n                return debugExt.onDidChangeActiveDebugSession;\n            },\n            get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidStartDebugSession;\n            },\n            get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n                return debugExt.onDidReceiveDebugSessionCustomEvent;\n            },\n            get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidTerminateDebugSession;\n            },\n            get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n                return debugExt.onDidChangeBreakpoints;\n            },\n            registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n                return debugExt.registerDebugAdapterDescriptorFactory(debugType, factory);\n            },\n            registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider): Disposable {\n                return debugExt.registerDebugConfigurationProvider(debugType, provider);\n            },\n            registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n                return debugExt.registerDebugAdapterTrackerFactory(debugType, factory);\n            },\n            startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration): Thenable<boolean> {\n                return debugExt.startDebugging(folder, nameOrConfiguration);\n            },\n            addBreakpoints(breakpoints: theia.Breakpoint[]): void {\n                debugExt.addBreakpoints(breakpoints);\n            },\n            removeBreakpoints(breakpoints: theia.Breakpoint[]): void {\n                debugExt.removeBreakpoints(breakpoints);\n            }\n        };\n\n        const tasks: typeof theia.tasks = {\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasksExt.registerTaskProvider(type, provider);\n            },\n\n            fetchTasks(filter?: theia.TaskFilter): Thenable<theia.Task[]> {\n                return tasksExt.fetchTasks(filter);\n            },\n\n            executeTask(task: theia.Task): Thenable<theia.TaskExecution> {\n                return tasksExt.executeTask(task);\n            },\n\n            get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n                return tasksExt.taskExecutions;\n            },\n            // tslint:disable-next-line:typedef\n            onDidStartTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTask(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidEndTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTask(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidStartTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTaskProcess(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:typedef\n            onDidEndTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTaskProcess(listener, thisArg, disposables);\n            }\n        };\n\n        const scm: typeof theia.scm = {\n            get inputBox(): theia.SourceControlInputBox {\n                const inputBox = scmExt.getLastInputBox(plugin);\n                if (inputBox) {\n                    return inputBox;\n                } else {\n                    throw new Error('Input box not found!');\n                }\n            },\n            createSourceControl(id: string, label: string, rootUri?: Uri): theia.SourceControl {\n                return scmExt.createSourceControl(plugin, id, label, rootUri);\n            }\n        };\n\n        const comment: typeof theia.comment = {\n            createCommentController(id: string, label: string): theia.CommentController {\n                return {\n                    id, label, inputBox: undefined,\n                    createCommentThread(commentId: string, resource: Uri, range: Range, comments: theia.Comment[]): theia.CommentThread {\n                        return {\n                            id: commentId,\n                            resource,\n                            range,\n                            comments,\n                            collapsibleState: 0,\n                            dispose(): void {\n                            }\n                        };\n                    },\n                    dispose(): void {\n                    }\n                };\n            }\n        };\n\n        return <typeof theia>{\n            version: require('../../package.json').version,\n            commands,\n            comment,\n            window,\n            workspace,\n            env,\n            languageServer,\n            languages,\n            plugins,\n            debug,\n            tasks,\n            scm,\n            // Types\n            StatusBarAlignment: StatusBarAlignment,\n            Disposable: Disposable,\n            EventEmitter: Emitter,\n            CancellationTokenSource: CancellationTokenSource,\n            MarkdownString,\n            Position: Position,\n            Range: Range,\n            Selection: Selection,\n            ViewColumn: ViewColumn,\n            TextEditorSelectionChangeKind: TextEditorSelectionChangeKind,\n            Uri: Uri,\n            EndOfLine,\n            TextEditorRevealType,\n            TextEditorCursorStyle,\n            TextEditorLineNumbersStyle,\n            ThemeColor,\n            ThemeIcon,\n            SnippetString,\n            DecorationRangeBehavior,\n            OverviewRulerLane,\n            ConfigurationTarget,\n            RelativePattern,\n            IndentAction,\n            CompletionItem,\n            CompletionItemKind,\n            CompletionList,\n            DiagnosticSeverity,\n            DiagnosticRelatedInformation,\n            Location,\n            DiagnosticTag,\n            Diagnostic,\n            CompletionTriggerKind,\n            TextEdit,\n            ProgressLocation,\n            ProgressOptions,\n            Progress,\n            ParameterInformation,\n            SignatureInformation,\n            SignatureHelp,\n            SignatureHelpTriggerKind,\n            Hover,\n            DocumentHighlightKind,\n            DocumentHighlight,\n            DocumentLink,\n            CodeLens,\n            CodeActionKind,\n            CodeActionTrigger,\n            TextDocumentSaveReason,\n            CodeAction,\n            TreeItem,\n            TreeItem2: TreeItem,\n            TreeItemCollapsibleState,\n            SymbolKind,\n            DocumentSymbol,\n            WorkspaceEdit,\n            SymbolInformation,\n            FileType,\n            FileChangeType,\n            ShellQuoting,\n            ShellExecution,\n            ProcessExecution,\n            TaskScope,\n            TaskRevealKind,\n            TaskPanelKind,\n            TaskGroup,\n            Task,\n            DebugAdapterExecutable,\n            DebugAdapterServer,\n            Breakpoint,\n            SourceBreakpoint,\n            FunctionBreakpoint,\n            Color,\n            ColorInformation,\n            ColorPresentation,\n            FoldingRange,\n            FoldingRangeKind,\n            OperatingSystem,\n            WebviewPanelTargetArea,\n            FileSystemError,\n            CommentThreadCollapsibleState,\n            QuickInputButtons,\n            CommentMode\n        };\n    };\n}\n\nclass Plugin<T> implements theia.Plugin<T> {\n    id: string;\n    pluginPath: string;\n    // tslint:disable-next-line:no-any\n    packageJSON: any;\n    pluginType: theia.PluginType;\n    constructor(private readonly pluginManager: PluginManager, plugin: InternalPlugin) {\n        this.id = plugin.model.id;\n        this.pluginPath = plugin.pluginFolder;\n        this.packageJSON = plugin.rawModel;\n        this.pluginType = plugin.model.entryPoint.frontend ? 'frontend' : 'backend';\n    }\n\n    get isActive(): boolean {\n        return this.pluginManager.isActive(this.id);\n    }\n\n    get exports(): T {\n        return <T>this.pluginManager.getPluginExport(this.id);\n    }\n\n    activate(): PromiseLike<T> {\n        return this.pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { CommandRegistryExt, PLUGIN_RPC_CONTEXT as Ext, CommandRegistryMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable } from './types-impl';\nimport { DisposableCollection } from '@theia/core';\nimport { KnownCommands } from '../common/known-commands';\n\n// tslint:disable-next-line:no-any\nexport type Handler = <T>(...args: any[]) => T | PromiseLike<T | undefined>;\n\nexport interface ArgumentProcessor {\n    // tslint:disable-next-line:no-any\n    processArgument(arg: any): any;\n}\n\nexport class CommandRegistryImpl implements CommandRegistryExt {\n\n    private proxy: CommandRegistryMain;\n    private readonly commands = new Set<string>();\n    private readonly handlers = new Map<string, Handler>();\n    private readonly argumentProcessors: ArgumentProcessor[];\n    private readonly commandsConverter: CommandsConverter;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.COMMAND_REGISTRY_MAIN);\n        this.argumentProcessors = [];\n        this.commandsConverter = new CommandsConverter(this);\n    }\n\n    get converter(): CommandsConverter {\n        return this.commandsConverter;\n    }\n\n    // tslint:disable-next-line:no-any\n    registerCommand(command: theia.CommandDescription, handler?: Handler, thisArg?: any): Disposable {\n        if (this.commands.has(command.id)) {\n            throw new Error(`Command ${command.id} already exist`);\n        }\n        this.commands.add(command.id);\n        this.proxy.$registerCommand(command);\n\n        const toDispose: Disposable[] = [];\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler, thisArg));\n        }\n        toDispose.push(Disposable.create(() => {\n            this.commands.delete(command.id);\n            this.proxy.$unregisterCommand(command.id);\n        }));\n        return Disposable.from(...toDispose);\n    }\n\n    // tslint:disable-next-line:no-any\n    registerHandler(commandId: string, handler: Handler, thisArg?: any): Disposable {\n        if (this.handlers.has(commandId)) {\n            throw new Error(`Command \"${commandId}\" already has handler`);\n        }\n        this.proxy.$registerHandler(commandId);\n        // tslint:disable-next-line:no-any\n        this.handlers.set(commandId, (...args: any[]) => handler.apply(thisArg, args));\n        return Disposable.create(() => {\n            this.handlers.delete(commandId);\n            this.proxy.$unregisterHandler(commandId);\n        });\n    }\n\n    dispose(): void {\n        throw new Error('Method not implemented.');\n    }\n\n    // tslint:disable-next-line:no-any\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else {\n            return Promise.reject(new Error(`Command: ${id} does not exist.`));\n        }\n    }\n\n    // tslint:disable:no-any\n    executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else if (KnownCommands.mapped(id)) {\n            // Using the KnownCommand exclusions, convert the commands manually\n            return KnownCommands.map(id, args, (mappedId: string, mappedArgs: any[] | undefined) =>\n                this.proxy.$executeCommand(mappedId, ...mappedArgs));\n        } else {\n            return this.proxy.$executeCommand(id, ...args);\n        }\n    }\n    // tslint:enable:no-any\n\n    getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n        return this.proxy.$getKeyBinding(commandId);\n    }\n\n    // tslint:disable-next-line:no-any\n    private async executeLocalCommand<T>(id: string, ...args: any[]): Promise<T | undefined> {\n        const handler = this.handlers.get(id);\n        if (handler) {\n            return handler<T>(...args.map(arg => this.argumentProcessors.reduce((r, p) => p.processArgument(r), arg)));\n        } else {\n            throw new Error(`Command ${id} doesn't exist`);\n        }\n    }\n\n    async getCommands(filterUnderscoreCommands: boolean = false): Promise<string[]> {\n        const result = await this.proxy.$getCommands();\n        if (filterUnderscoreCommands) {\n            return result.filter(command => command[0] !== '_');\n        }\n        return result;\n    }\n\n    registerArgumentProcessor(processor: ArgumentProcessor): void {\n        this.argumentProcessors.push(processor);\n    }\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.37.1/src/vs/workbench/api/common/extHostCommands.ts#L217-L259\nexport class CommandsConverter {\n\n    private readonly safeCommandId: string;\n    private readonly commands: CommandRegistryImpl;\n    private readonly commandsMap = new Map<number, theia.Command>();\n    private handle = 0;\n    private isSafeCommandRegistered: boolean;\n\n    constructor(commands: CommandRegistryImpl) {\n        this.safeCommandId = `theia_safe_cmd_${Date.now().toString()}`;\n        this.commands = commands;\n        this.isSafeCommandRegistered = false;\n    }\n\n    /**\n     * Convert to a command that can be safely passed over JSON-RPC.\n     */\n    toSafeCommand(command: undefined, disposables: DisposableCollection): undefined;\n    toSafeCommand(command: theia.Command, disposables: DisposableCollection): model.Command;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n        const result = this.toInternalCommand(command);\n        if (KnownCommands.mapped(result.id)) {\n            return result;\n        }\n\n        if (!this.isSafeCommandRegistered) {\n            this.commands.registerCommand({ id: this.safeCommandId }, this.executeSafeCommand, this);\n            this.isSafeCommandRegistered = true;\n        }\n\n        if (command.command && command.arguments && command.arguments.length > 0) {\n            const id = this.handle++;\n            this.commandsMap.set(id, command);\n            disposables.push(new Disposable(() => this.commandsMap.delete(id)));\n            result.id = this.safeCommandId;\n            result.arguments = [id];\n        }\n\n        return result;\n    }\n\n    protected toInternalCommand(external: theia.Command): model.Command {\n        // we're deprecating Command.id, so it has to be optional.\n        // Existing code will have compiled against a non - optional version of the field, so asserting it to exist is ok\n        // tslint:disable-next-line: no-any\n        return KnownCommands.map((external.command || external.id)!, external.arguments, (mappedId: string, mappedArgs: any[]) =>\n            ({\n                id: mappedId,\n                title: external.title || external.label || ' ',\n                tooltip: external.tooltip,\n                arguments: mappedArgs\n            }));\n    }\n\n    // tslint:disable-next-line:no-any\n    private executeSafeCommand<R>(...args: any[]): PromiseLike<R | undefined> {\n        const command = this.commandsMap.get(args[0]);\n        if (!command || !command.command) {\n            return Promise.reject('command NOT FOUND');\n        }\n        return this.commands.executeCommand(command.command, ...(command.arguments || []));\n    }\n\n}\n","// tslint:disable\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/objects.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\nimport { isUndefinedOrNull, isArray, isObject } from './types';\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n    return _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n    if (isUndefinedOrNull(obj)) {\n        return obj;\n    }\n\n    const changed = changer(obj);\n    if (typeof changed !== 'undefined') {\n        return changed;\n    }\n\n    if (isArray(obj)) {\n        const r1: any[] = [];\n        for (const e of obj) {\n            r1.push(_cloneAndChange(e, changer, seen));\n        }\n        return r1;\n    }\n\n    if (isObject(obj)) {\n        if (seen.has(obj)) {\n            throw new Error('Cannot clone recursive data-structure');\n        }\n        seen.add(obj);\n        const r2 = {};\n        for (let i2 in obj) {\n            if (_hasOwnProperty.call(obj, i2)) {\n                (r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n            }\n        }\n        seen.delete(obj);\n        return r2;\n    }\n\n    return obj;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { QuickOpenExt, PLUGIN_RPC_CONTEXT as Ext, QuickOpenMain, TransferInputBox, Plugin, TransferQuickPick, QuickInputTitleButtonHandle } from '../common/plugin-api-rpc';\nimport { QuickPickOptions, QuickPickItem, InputBoxOptions, InputBox, QuickPick, QuickInput } from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { anyPromise } from '../common/async-util';\nimport { hookCancellationToken } from '../common/async-util';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { QuickInputButtons, QuickInputButton, ThemeIcon } from './types-impl';\nimport URI from 'vscode-uri';\nimport * as path from 'path';\nimport { quickPickItemToPickOpenItem } from './type-converters';\nimport { QuickOpenItem, QuickOpenItemOptions } from '@theia/core/lib/browser/quick-open/quick-open-model';\nimport { PluginPackage } from '../common/plugin-protocol';\n\nexport type Item = string | QuickPickItem;\n\nexport class QuickOpenExtImpl implements QuickOpenExt {\n    private proxy: QuickOpenMain;\n    private selectItemHandler: undefined | ((handle: number) => void);\n    private validateInputHandler: undefined | ((input: string) => string | PromiseLike<string | undefined> | undefined);\n\n    private createdQuickInputs = new Map<number, QuickInputExt>(); // Each quickinput will have a number so that we know where to fire events\n    private currentQuickInputs = 0;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.QUICK_OPEN_MAIN);\n    }\n    $onItemSelected(handle: number): void {\n        if (this.selectItemHandler) {\n            this.selectItemHandler(handle);\n        }\n    }\n    $validateInput(input: string): PromiseLike<string | undefined> | undefined {\n        if (this.validateInputHandler) {\n            return Promise.resolve(this.validateInputHandler(input));\n        }\n        return undefined;\n    }\n\n    showQuickPick(promiseOrItems: QuickPickItem[] | PromiseLike<QuickPickItem[]>, options?: QuickPickOptions, token?: CancellationToken): PromiseLike<QuickPickItem | undefined>;\n    // tslint:disable-next-line:max-line-length\n    showQuickPick(promiseOrItems: QuickPickItem[] | PromiseLike<QuickPickItem[]>, options?: QuickPickOptions & { canSelectMany: true; }, token?: CancellationToken): PromiseLike<QuickPickItem[] | undefined>;\n    showQuickPick(promiseOrItems: string[] | PromiseLike<string[]>, options?: QuickPickOptions, token?: CancellationToken): PromiseLike<string | undefined>;\n    // tslint:disable-next-line:max-line-length\n    showQuickPick(promiseOrItems: Item[] | PromiseLike<Item[]>, options?: QuickPickOptions, token: CancellationToken = CancellationToken.None): PromiseLike<Item | Item[] | undefined> {\n        this.selectItemHandler = undefined;\n        const itemPromise = Promise.resolve(promiseOrItems);\n        const widgetPromise = this.proxy.$show({\n            canSelectMany: options && options.canPickMany,\n            placeHolder: options && options.placeHolder,\n            autoFocus: { autoFocusFirstEntry: true },\n            matchOnDescription: options && options.matchOnDescription,\n            matchOnDetail: options && options.matchOnDetail,\n            ignoreFocusLost: options && options.ignoreFocusOut\n        });\n\n        const promise = anyPromise(<PromiseLike<number | Item[]>[]>[widgetPromise, itemPromise]).then(values => {\n            if (values.key === 0) {\n                return undefined;\n            }\n            return itemPromise.then(items => {\n\n                const pickItems = quickPickItemToPickOpenItem(items);\n\n                if (options && typeof options.onDidSelectItem === 'function') {\n                    this.selectItemHandler = handle => {\n                        options.onDidSelectItem!(items[handle]);\n                    };\n                }\n\n                this.proxy.$setItems(pickItems);\n\n                return widgetPromise.then(handle => {\n                    if (typeof handle === 'number') {\n                        if (options && options.canPickMany) {\n                            return Array.of(items[handle]);\n                        } else {\n                            return items[handle];\n                        }\n\n                    } else if (Array.isArray(handle)) {\n                        return handle.map(h => items[h]);\n                    }\n                    return undefined;\n                });\n            }, err => {\n                this.proxy.$setError(err);\n                return Promise.reject(err);\n            });\n        });\n        return hookCancellationToken<Item | Item[] | undefined>(token, promise);\n    }\n\n    showCustomQuickPick<T extends QuickPickItem>(options: TransferQuickPick<T>): void {\n        this.proxy.$showCustomQuickPick(options);\n    }\n\n    createQuickPick<T extends QuickPickItem>(plugin: Plugin): QuickPick<T> {\n        const newQuickInput = new QuickPickExt<T>(this, this.proxy, plugin, this.currentQuickInputs);\n        this.createdQuickInputs.set(this.currentQuickInputs, newQuickInput);\n        this.currentQuickInputs += 1;\n        return newQuickInput;\n    }\n\n    showInput(options?: InputBoxOptions, token: CancellationToken = CancellationToken.None): PromiseLike<string | undefined> {\n        this.validateInputHandler = options && options.validateInput;\n\n        if (!options) {\n            options = {\n                placeHolder: ''\n            };\n        }\n\n        const promise = this.proxy.$input(options, typeof this.validateInputHandler === 'function');\n        return hookCancellationToken(token, promise);\n    }\n\n    hide(): void {\n        this.proxy.$hide();\n    }\n    showInputBox(options: TransferInputBox): void {\n        this.validateInputHandler = options && options.validateInput;\n        this.proxy.$showInputBox(options, typeof this.validateInputHandler === 'function');\n    }\n\n    createInputBox(plugin: Plugin): InputBox {\n        const newQuickInput = new InputBoxExt(this, this.proxy, plugin, this.currentQuickInputs);\n        this.createdQuickInputs.set(this.currentQuickInputs, newQuickInput);\n        this.currentQuickInputs += 1;\n        return newQuickInput;\n    }\n\n    async $acceptOnDidAccept(createdQuickInputNumber: number): Promise<void> {\n        const currentQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (currentQuickInput) {\n            currentQuickInput._fireAccept();\n        }\n    }\n\n    async $acceptDidChangeValue(createdQuickInputNumber: number, changedValue: string): Promise<void> {\n        const currentQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (currentQuickInput) {\n            currentQuickInput._fireChangedValue(changedValue);\n        }\n    }\n\n    async $acceptOnDidHide(createdQuickInputNumber: number): Promise<void> {\n        const currentQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (currentQuickInput) {\n            currentQuickInput._fireHide();\n        }\n    }\n\n    async $acceptOnDidTriggerButton(createdQuickInputNumber: number, btn: QuickInputTitleButtonHandle): Promise<void> {\n        const thisQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (thisQuickInput) {\n            if (btn.index === -1) {\n                thisQuickInput._fireButtonTrigger(QuickInputButtons.Back);\n            } else if (thisQuickInput && (thisQuickInput instanceof InputBoxExt || thisQuickInput instanceof QuickPickExt)) {\n                const btnFromIndex = thisQuickInput.buttons[btn.index];\n                thisQuickInput._fireButtonTrigger(btnFromIndex as QuickInputButton);\n            }\n        }\n    }\n\n    async $acceptDidChangeActive(createdQuickInputNumber: number, changedItems: QuickOpenItem<QuickOpenItemOptions>[]): Promise<void> {\n        const thisQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (thisQuickInput && thisQuickInput instanceof QuickPickExt) {\n            thisQuickInput._fireChangedActiveItem(changedItems);\n        }\n    }\n\n    async $acceptDidChangeSelection(createdQuickInputNumber: number, selection: string): Promise<void> {\n        const currentQuickInput = this.createdQuickInputs.get(createdQuickInputNumber);\n        if (currentQuickInput && currentQuickInput instanceof QuickPickExt) {\n            // Find the item that matches that particular label\n            const findMatchingItem = currentQuickInput.items.filter(x => x.label === selection);\n            currentQuickInput._fireChangedSelection(findMatchingItem);\n        }\n    }\n}\n\nexport class QuickInputExt implements QuickInput {\n\n    private _busy: boolean;\n    private _enabled: boolean;\n    private _ignoreFocusOut: boolean;\n    private _step: number | undefined;\n    private _title: string | undefined;\n    private _totalSteps: number | undefined;\n    private _value: string;\n\n    protected visible: boolean;\n\n    protected disposableCollection: DisposableCollection;\n\n    private onDidAcceptEmitter: Emitter<void>;\n    private onDidChangeValueEmitter: Emitter<string>;\n    private onDidHideEmitter: Emitter<void>;\n    private onDidTriggerButtonEmitter: Emitter<QuickInputButton>;\n\n    constructor(readonly quickOpen: QuickOpenExtImpl, readonly quickOpenMain: QuickOpenMain, readonly plugin: Plugin) {\n        this.title = undefined;\n        this.step = undefined;\n        this.totalSteps = undefined;\n        this.enabled = true;\n        this.busy = false;\n        this.ignoreFocusOut = false;\n        this.value = '';\n\n        this.visible = false;\n\n        this.disposableCollection = new DisposableCollection();\n        this.disposableCollection.push(this.onDidAcceptEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidChangeValueEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidHideEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidTriggerButtonEmitter = new Emitter());\n    }\n\n    get title(): string | undefined {\n        return this._title;\n    }\n\n    set title(title: string | undefined) {\n        this._title = title;\n        this.update({ title });\n    }\n\n    get step(): number | undefined {\n        return this._step;\n    }\n\n    set step(step: number | undefined) {\n        this._step = step;\n        this.update({ step });\n    }\n\n    get totalSteps(): number | undefined {\n        return this._totalSteps;\n    }\n\n    set totalSteps(totalSteps: number | undefined) {\n        this._totalSteps = totalSteps;\n        this.update({ totalSteps });\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        this._enabled = enabled;\n        this.update({ enabled });\n    }\n\n    get busy(): boolean {\n        return this._busy;\n    }\n\n    set busy(busy: boolean) {\n        this._busy = busy;\n        this.update({ busy });\n    }\n\n    get ignoreFocusOut(): boolean {\n        return this._ignoreFocusOut;\n    }\n\n    set ignoreFocusOut(ignoreFocusOut: boolean) {\n        this._ignoreFocusOut = ignoreFocusOut;\n        this.update({ ignoreFocusOut });\n    }\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this._value = value;\n        this.update({ value });\n    }\n\n    show(): void {\n        throw new Error('Method implementation must be provided by extenders');\n    }\n\n    dispose(): void {\n        this.disposableCollection.dispose();\n    }\n\n    protected update(changed: object): void {\n        /**\n         * The args are just going to be set when we call show for the first time.\n         * We return early when its invisible to avoid race condition\n         */\n        if (!this.visible || changed === undefined) {\n            return;\n        }\n\n        this.quickOpenMain.$setQuickInputChanged(changed);\n    }\n\n    hide(): void {\n        this.quickOpen.hide();\n        this.dispose();\n    }\n\n    protected convertURL(iconPath: URI | { light: string | URI; dark: string | URI } | ThemeIcon): URI | { light: string | URI; dark: string | URI } | ThemeIcon {\n        const toUrl = (arg: string | URI) => {\n            arg = arg instanceof URI && arg.scheme === 'file' ? arg.fsPath : arg;\n            if (typeof arg !== 'string') {\n                return arg.toString(true);\n            }\n            const { packagePath } = this.plugin.rawModel;\n            const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n            const normalizedPath = path.normalize(absolutePath);\n            const relativePath = path.relative(packagePath, normalizedPath);\n            return PluginPackage.toPluginUrl(this.plugin.rawModel, relativePath);\n        };\n        if ('id' in iconPath || iconPath instanceof ThemeIcon) {\n            return iconPath;\n        } else if (typeof iconPath === 'string' || iconPath instanceof URI) {\n            return URI.parse(toUrl(iconPath));\n        } else {\n            const { light, dark } = iconPath as { light: string | URI, dark: string | URI };\n            return {\n                light: toUrl(light),\n                dark: toUrl(dark)\n            };\n        }\n    }\n\n    _fireAccept(): void {\n        this.onDidAcceptEmitter.fire(undefined);\n    }\n\n    _fireChangedValue(changedValue: string): void {\n        this.onDidChangeValueEmitter.fire(changedValue);\n    }\n\n    _fireHide(): void {\n        this.onDidHideEmitter.fire(undefined);\n    }\n\n    _fireButtonTrigger(btn: QuickInputButton): void {\n        this.onDidTriggerButtonEmitter.fire(btn);\n    }\n\n    get onDidHide(): Event<void> {\n        return this.onDidHideEmitter.event;\n    }\n\n    get onDidAccept(): Event<void> {\n        return this.onDidAcceptEmitter.event;\n    }\n\n    get onDidChangeValue(): Event<string> {\n        return this.onDidChangeValueEmitter.event;\n    }\n\n    get onDidTriggerButton(): Event<QuickInputButton> {\n        return this.onDidTriggerButtonEmitter.event;\n    }\n}\n\n/**\n * Base implementation of {@link InputBox} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5109\n */\nexport class InputBoxExt extends QuickInputExt implements InputBox {\n\n    /**\n     * Input Box API Start\n     */\n    private _placeholder: string | undefined;\n    private _password: boolean;\n\n    private _buttons: ReadonlyArray<QuickInputButton>;\n    private _prompt: string | undefined;\n    private _validationMessage: string | undefined;\n    /**\n     * Input Box API End\n     */\n\n    constructor(readonly quickOpen: QuickOpenExtImpl,\n        readonly quickOpenMain: QuickOpenMain,\n        readonly plugin: Plugin,\n        readonly quickInputIndex: number) {\n\n        super(quickOpen, quickOpenMain, plugin);\n\n        this.buttons = [];\n        this.password = false;\n        this.value = '';\n    }\n\n    get buttons(): ReadonlyArray<QuickInputButton> {\n        return this._buttons;\n    }\n\n    set buttons(buttons: ReadonlyArray<QuickInputButton>) {\n        this._buttons = buttons;\n        this.update({ buttons });\n    }\n\n    get password(): boolean {\n        return this._password;\n    }\n\n    set password(password: boolean) {\n        this._password = password;\n        this.update({ password });\n    }\n\n    get placeholder(): string | undefined {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string | undefined) {\n        this._placeholder = placeholder;\n        this.update({ placeholder });\n    }\n\n    get prompt(): string | undefined {\n        return this._prompt;\n    }\n\n    set prompt(prompt: string | undefined) {\n        this._prompt = prompt;\n        this.update({ prompt });\n    }\n\n    get validationMessage(): string | undefined {\n        return this._validationMessage;\n    }\n\n    set validationMessage(validationMessage: string | undefined) {\n        if (this._validationMessage !== validationMessage) {\n            this._validationMessage = validationMessage;\n            this.update({ validationMessage });\n            this.quickOpenMain.$refreshQuickInput();\n        }\n    }\n\n    show(): void {\n        this.visible = true;\n        const update = (value: string) => {\n            this.value = value;\n            // this.onDidChangeValueEmitter.fire(value);\n            if (this.validationMessage && this.validationMessage.length > 0) {\n                return this.validationMessage;\n            }\n        };\n        this.quickOpen.showInputBox({\n            quickInputIndex: this.quickInputIndex,\n            busy: this.busy,\n            buttons: this.buttons.map(btn => ({\n                'iconPath': this.convertURL(btn.iconPath),\n                'tooltip': btn.tooltip\n            })),\n            enabled: this.enabled,\n            ignoreFocusOut: this.ignoreFocusOut,\n            password: this.password,\n            placeholder: this.placeholder,\n            prompt: this.prompt,\n            step: this.step,\n            title: this.title,\n            totalSteps: this.totalSteps,\n            validationMessage: this.validationMessage,\n            value: this.value,\n            validateInput(value: string): string | undefined {\n                if (value.length > 0) {\n                    return update(value);\n                }\n            }\n        });\n    }\n}\n\n/**\n * Base implementation of {@link QuickPick} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5059\n */\nexport class QuickPickExt<T extends QuickPickItem> extends QuickInputExt implements QuickPick<T> {\n\n    buttons: ReadonlyArray<QuickInputButton>;\n    canSelectMany: boolean;\n    matchOnDescription: boolean;\n    matchOnDetail: boolean;\n    selectedItems: ReadonlyArray<T>;\n    value: string;\n\n    private _items: T[];\n    private _activeItems: T[];\n    private _placeholder: string | undefined;\n    private readonly onDidChangeActiveEmitter: Emitter<T[]>;\n    private readonly onDidChangeSelectionEmitter: Emitter<T[]>;\n\n    constructor(readonly quickOpen: QuickOpenExtImpl,\n        readonly quickOpenMain: QuickOpenMain,\n        readonly plugin: Plugin,\n        readonly quickInputIndex: number) {\n\n        super(quickOpen, quickOpenMain, plugin);\n        this._items = [];\n        this._activeItems = [];\n        this._placeholder = '';\n        this.buttons = [];\n        this.value = '';\n\n        this.disposableCollection.push(this.onDidChangeActiveEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidChangeSelectionEmitter = new Emitter());\n    }\n\n    get items(): T[] {\n        return this._items;\n    }\n\n    set items(items: T[]) {\n        this._items = items;\n        this.update({ items });\n    }\n\n    get activeItems(): T[] {\n        return this._activeItems;\n    }\n\n    set activeItems(activeItems: T[]) {\n        this._activeItems = activeItems;\n        this.update({ activeItems });\n    }\n\n    get placeholder(): string | undefined {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string | undefined) {\n        this._placeholder = placeholder;\n        this.update({ placeholder });\n    }\n\n    _fireChangedSelection(selections: T[]): void {\n        this.onDidChangeSelectionEmitter.fire(selections);\n    }\n\n    _fireChangedActiveItem(changedItems: QuickOpenItem<QuickOpenItemOptions>[]): void {\n        this.onDidChangeActiveEmitter.fire(changedItems as unknown as T[]);\n    }\n\n    get onDidChangeActive(): Event<T[]> {\n        return this.onDidChangeActiveEmitter.event;\n    }\n\n    get onDidChangeSelection(): Event<T[]> {\n        return this.onDidChangeSelectionEmitter.event;\n    }\n\n    show(): void {\n        this.visible = true;\n        this.quickOpen.showCustomQuickPick({\n            quickInputIndex: this.quickInputIndex,\n            title: this.title,\n            step: this.step,\n            totalSteps: this.totalSteps,\n            enabled: this.enabled,\n            busy: this.busy,\n            ignoreFocusOut: this.ignoreFocusOut,\n            value: this.value,\n            placeholder: this.placeholder,\n            buttons: this.buttons.map(btn => ({\n                'iconPath': this.convertURL(btn.iconPath),\n                'tooltip': btn.tooltip\n            })),\n            items: quickPickItemToPickOpenItem(this.items),\n            canSelectMany: this.canSelectMany,\n            matchOnDescription: this.matchOnDescription,\n            matchOnDetail: this.matchOnDetail,\n            activeItems: this.activeItems,\n            selectedItems: this.selectedItems\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Disposable, StatusBarAlignment } from './types-impl';\nimport { StatusBarItem } from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, StatusBarMessageRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { StatusBarItemImpl } from './status-bar/status-bar-item';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class StatusBarMessageRegistryExt {\n\n    proxy: StatusBarMessageRegistryMain;\n\n    protected readonly statusMessage: StatusBarMessage;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.STATUS_BAR_MESSAGE_REGISTRY_MAIN);\n        this.statusMessage = new StatusBarMessage(this);\n    }\n\n    // copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L174\n    // tslint:disable-next-line:no-any\n    setStatusBarMessage(text: string, timeoutOrThenable?: number | PromiseLike<any>): Disposable {\n        const d = this.statusMessage.setMessage(text);\n        // tslint:disable-next-line:no-any\n        let handle: any;\n\n        if (typeof timeoutOrThenable === 'number') {\n            handle = setTimeout(() => d.dispose(), timeoutOrThenable);\n        } else if (typeof timeoutOrThenable !== 'undefined') {\n            timeoutOrThenable.then(() => d.dispose(), () => d.dispose());\n        }\n\n        return new Disposable(() => {\n            d.dispose();\n            clearTimeout(handle);\n        });\n\n    }\n\n    createStatusBarItem(alignment?: StatusBarAlignment, priority?: number): StatusBarItem {\n        return new StatusBarItemImpl(this.proxy, alignment, priority);\n    }\n}\n\n// copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L122\nclass StatusBarMessage {\n\n    private _item: StatusBarItem;\n    private _messages: { message: string }[] = [];\n\n    constructor(statusBar: StatusBarMessageRegistryExt) {\n        this._item = statusBar.createStatusBarItem(StatusBarAlignment.Left, Number.MIN_VALUE);\n    }\n\n    dispose(): void {\n        this._messages.length = 0;\n        this._item.dispose();\n    }\n\n    setMessage(message: string): Disposable {\n        const data: { message: string } = { message }; // use object to not confuse equal strings\n        this._messages.unshift(data);\n        this._update();\n\n        return new Disposable(() => {\n            const idx = this._messages.indexOf(data);\n            if (idx >= 0) {\n                this._messages.splice(idx, 1);\n                this._update();\n            }\n        });\n    }\n\n    private _update(): void {\n        if (this._messages.length > 0) {\n            this._item.text = this._messages[0].message;\n            this._item.show();\n        } else {\n            this._item.hide();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { ThemeColor, StatusBarAlignment } from '../types-impl';\nimport { StatusBarMessageRegistryMain } from '../../common/plugin-api-rpc';\nimport { VS_COLORS } from './vscolor-const';\nimport { UUID } from '@phosphor/coreutils/lib/uuid';\n\nexport class StatusBarItemImpl implements theia.StatusBarItem {\n\n    private readonly id = StatusBarItemImpl.nextId();\n\n    private _alignment: StatusBarAlignment;\n    private _priority: number;\n\n    private _text: string;\n    private _tooltip: string;\n    private _color: string | ThemeColor;\n    private _command: string;\n\n    private _isVisible: boolean;\n    private _timeoutHandle: NodeJS.Timer | undefined;\n\n    _proxy: StatusBarMessageRegistryMain;\n\n    constructor(_proxy: StatusBarMessageRegistryMain,\n        alignment: StatusBarAlignment = StatusBarAlignment.Left,\n        priority: number = 0) {\n        this._proxy = _proxy;\n        this._alignment = alignment;\n        this._priority = priority;\n    }\n\n    public get alignment(): theia.StatusBarAlignment {\n        return <theia.StatusBarAlignment>this._alignment;\n    }\n\n    public get priority(): number {\n        return this._priority;\n    }\n\n    public get text(): string {\n        return this._text;\n    }\n\n    public get tooltip(): string {\n        return this._tooltip;\n    }\n\n    public get color(): string | ThemeColor {\n        return this._color;\n    }\n\n    public get command(): string {\n        return this._command;\n    }\n\n    public set text(text: string) {\n        this._text = text;\n        this.update();\n    }\n\n    public set tooltip(tooltip: string) {\n        this._tooltip = tooltip;\n        this.update();\n    }\n\n    public set color(color: string | ThemeColor) {\n        this._color = color;\n        this.update();\n    }\n\n    public set command(command: string) {\n        this._command = command;\n        this.update();\n    }\n\n    public show(): void {\n        this._isVisible = true;\n        this.update();\n    }\n\n    public hide(): void {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        this._proxy.$dispose(this.id);\n        this._isVisible = false;\n    }\n\n    private update(): void {\n        if (!this._isVisible) {\n            return;\n        }\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        // Defer the update so that multiple changes to setters don't cause a redraw each\n        this._timeoutHandle = setTimeout(() => {\n            this._timeoutHandle = undefined;\n\n            // Set to status bar\n            this._proxy.$setMessage(this.id, this.text,\n                this.priority,\n                this.alignment,\n                this.getColor(),\n                this.tooltip,\n                this.command);\n        }, 0);\n    }\n\n    private getColor(): string | undefined {\n        if (typeof this.color !== 'string' && typeof this.color !== 'undefined') {\n            const colorId = (<ThemeColor>this.color).id;\n            return `var(${VS_COLORS[colorId] ? VS_COLORS[colorId] : colorId})`;\n        }\n        return this.color;\n    }\n\n    public dispose(): void {\n        this.hide();\n    }\n\n    static nextId(): string {\n        return StatusBarItemImpl.ID_PREFIX + ':' + UUID.uuid4();\n    }\n    static ID_PREFIX = 'plugin-status-bar-item';\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport const VS_COLORS: {[vsColorId: string]: string} = {\n    'statusBar.foreground': '--theia-layout-color4',\n    'editorOverviewRuler.errorForeground': '--theia-error-color0',\n    'editorOverviewRuler.warningForeground': '--theia-warn-color0',\n    'editorOverviewRuler.infoForeground': '--theia-info-color0'\n};\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri';\nimport { WindowState } from '@theia/plugin';\nimport { WindowStateExt, WindowMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Schemes } from '../common/uri-components';\n\nexport class WindowStateExtImpl implements WindowStateExt {\n\n    private windowStateCached: WindowState;\n\n    private windowStateChangedEmitter = new Emitter<WindowState>();\n    public readonly onDidChangeWindowState: Event<WindowState> = this.windowStateChangedEmitter.event;\n\n    private readonly proxy: WindowMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WINDOW_MAIN);\n        this.windowStateCached = { focused: true }; // supposed tab is active on start\n    }\n\n    getWindowState(): WindowState {\n        return this.windowStateCached;\n    }\n\n    $onWindowStateChanged(focused: boolean): void {\n        const state = { focused: focused };\n        if (state === this.windowStateCached) {\n            return;\n        }\n\n        this.windowStateCached = state;\n        this.windowStateChangedEmitter.fire(state);\n    }\n\n    openUri(uri: URI): Promise<boolean> {\n        return this.proxy.$openUri(uri);\n    }\n\n    async asExternalUri(target: URI): Promise<URI> {\n        if (!target.scheme.trim().length) {\n            throw new Error('Invalid scheme - cannot be empty');\n        }\n        if (Schemes.HTTP !== target.scheme && Schemes.HTTPS !== target.scheme) {\n            throw new Error(`Invalid scheme '${target.scheme}'`);\n        }\n\n        const uri = await this.proxy.$asExternalUri(target);\n        return URI.revive(uri);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TextEditorsExt, EditorChangedPropertiesData, TextEditorPositionData, TextEditorsMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorExt } from './text-editor';\nimport * as Converters from './type-converters';\nimport { TextEditorSelectionChangeKind } from './types-impl';\nimport { IdGenerator } from '../common/id-generator';\n\nexport class TextEditorsExtImpl implements TextEditorsExt {\n\n    private readonly _onDidChangeTextEditorSelection = new Emitter<theia.TextEditorSelectionChangeEvent>();\n    private readonly _onDidChangeTextEditorOptions = new Emitter<theia.TextEditorOptionsChangeEvent>();\n    private readonly _onDidChangeTextEditorVisibleRanges = new Emitter<theia.TextEditorVisibleRangesChangeEvent>();\n    private readonly _onDidChangeTextEditorViewColumn = new Emitter<theia.TextEditorViewColumnChangeEvent>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<theia.TextEditor | undefined>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<theia.TextEditor[]>();\n\n    readonly onDidChangeTextEditorSelection: Event<theia.TextEditorSelectionChangeEvent> = this._onDidChangeTextEditorSelection.event;\n    readonly onDidChangeTextEditorOptions = this._onDidChangeTextEditorOptions.event;\n    readonly onDidChangeTextEditorVisibleRanges = this._onDidChangeTextEditorVisibleRanges.event;\n    readonly onDidChangeTextEditorViewColumn = this._onDidChangeTextEditorViewColumn.event;\n    readonly onDidChangeActiveTextEditor = this._onDidChangeActiveTextEditor.event;\n    readonly onDidChangeVisibleTextEditors = this._onDidChangeVisibleTextEditors.event;\n\n    private proxy: TextEditorsMain;\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN);\n\n        this.editorsAndDocuments.onDidChangeActiveTextEditor(e => this._onDidChangeActiveTextEditor.fire(e));\n        this.editorsAndDocuments.onDidChangeVisibleTextEditors(e => this._onDidChangeVisibleTextEditors.fire(e));\n    }\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void {\n        const textEditor = this.editorsAndDocuments.getEditor(id);\n        if (!textEditor) {\n            return;\n        }\n\n        if (props.options) {\n            textEditor.acceptOptions(props.options);\n        }\n        if (props.selections) {\n            const selections = props.selections.selections.map(Converters.toSelection);\n            textEditor.acceptSelections(selections);\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            textEditor.acceptVisibleRanges(visibleRanges);\n        }\n\n        if (props.options) {\n            this._onDidChangeTextEditorOptions.fire({\n                textEditor,\n                options: props.options\n            });\n        }\n\n        if (props.selections) {\n            const kind = TextEditorSelectionChangeKind.fromValue(props.selections.source);\n            const selections = props.selections.selections.map(Converters.toSelection);\n            this._onDidChangeTextEditorSelection.fire({\n                textEditor,\n                selections,\n                kind\n            });\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            this._onDidChangeTextEditorVisibleRanges.fire({\n                textEditor,\n                visibleRanges\n            });\n        }\n    }\n    $acceptEditorPositionData(data: TextEditorPositionData): void {\n        for (const id in data) {\n            if (data.hasOwnProperty(id)) {\n                const textEditor = this.editorsAndDocuments.getEditor(id);\n                const viewColumn = Converters.toViewColumn(data[id]);\n                if (textEditor && viewColumn) {\n                    if (textEditor.viewColumn !== viewColumn) {\n                        textEditor.acceptViewColumn(viewColumn);\n                        this._onDidChangeTextEditorViewColumn.fire({ textEditor, viewColumn });\n                    }\n                }\n            }\n        }\n    }\n\n    getActiveEditor(): TextEditorExt | undefined {\n        return this.editorsAndDocuments.activeEditor();\n    }\n\n    getVisibleTextEditors(): theia.TextEditor[] {\n        return this.editorsAndDocuments.allEditors();\n    }\n\n    createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n        return new TextEditorDecorationType(this.proxy, options);\n    }\n\n    applyWorkspaceEdit(edit: theia.WorkspaceEdit): Promise<boolean> {\n        const dto = Converters.fromWorkspaceEdit(edit, this.editorsAndDocuments);\n        return this.proxy.$tryApplyWorkspaceEdit(dto);\n    }\n\n    saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n        return this.proxy.$saveAll(includeUntitled);\n    }\n\n}\n\nexport class TextEditorDecorationType implements theia.TextEditorDecorationType {\n\n    private static readonly Keys = new IdGenerator('TextEditorDecorationType');\n\n    private proxy: TextEditorsMain;\n    public key: string;\n\n    constructor(proxy: TextEditorsMain, options: theia.DecorationRenderOptions) {\n        this.key = TextEditorDecorationType.Keys.nextId();\n        this.proxy = proxy;\n        // tslint:disable-next-line:no-any\n        this.proxy.$registerTextEditorDecorationType(this.key, Converters.DecorationRenderOptions.from(options));\n    }\n\n    dispose(): void {\n        this.proxy.$removeTextEditorDecorationType(this.key);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport class IdGenerator {\n    private lastId: number;\n    constructor(private prefix: string) {\n        this.lastId = 0;\n    }\n\n    nextId(): string {\n        return this.prefix + (++this.lastId);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * based on https://github.com/Microsoft/vscode/blob/bf9a27ec01f2ef82fc45f69e0c946c7d74a57d3e/src/vs/workbench/api/node/extHostDocumentSaveParticipant.ts\n */\nimport { DocumentsExt, ModelChangedEvent, PLUGIN_RPC_CONTEXT, DocumentsMain, SingleEditOperation } from '../common/plugin-api-rpc';\nimport URI from 'vscode-uri';\nimport { UriComponents } from '../common/uri-components';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt, setWordDefinitionFor } from './document-data';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport * as Converter from './type-converters';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Range, TextDocumentShowOptions } from '../common/plugin-api-rpc-model';\nimport { TextEdit } from './types-impl';\n\nexport class DocumentsExtImpl implements DocumentsExt {\n    private toDispose = new DisposableCollection();\n    private _onDidAddDocument = new Emitter<theia.TextDocument>();\n    private _onDidRemoveDocument = new Emitter<theia.TextDocument>();\n    private _onDidChangeDocument = new Emitter<theia.TextDocumentChangeEvent>();\n    private _onDidSaveTextDocument = new Emitter<theia.TextDocument>();\n    private _onWillSaveTextDocument = new Emitter<theia.TextDocumentWillSaveEvent>();\n\n    readonly onDidAddDocument: Event<theia.TextDocument> = this._onDidAddDocument.event;\n    readonly onDidRemoveDocument: Event<theia.TextDocument> = this._onDidRemoveDocument.event;\n    readonly onDidChangeDocument: Event<theia.TextDocumentChangeEvent> = this._onDidChangeDocument.event;\n    readonly onDidSaveTextDocument: Event<theia.TextDocument> = this._onDidSaveTextDocument.event;\n    readonly onWillSaveTextDocument: Event<theia.TextDocumentWillSaveEvent> = this._onWillSaveTextDocument.event;\n\n    private proxy: DocumentsMain;\n    private loadingDocuments = new Map<string, Promise<DocumentDataExt | undefined>>();\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN);\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidAddDocuments(documents => {\n                for (const document of documents) {\n                    this._onDidAddDocument.fire(document.document);\n                }\n            })\n        );\n\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidRemoveDocuments(documents => {\n                for (const data of documents) {\n                    this._onDidRemoveDocument.fire(data.document);\n                }\n            })\n        );\n    }\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void {\n        const uri = URI.revive(startUrl);\n        const uriString = uri.toString();\n\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            this._onDidRemoveDocument.fire(data.document);\n            data.acceptLanguageId(newModeId);\n            this._onDidAddDocument.fire(data.document);\n        }\n    }\n    $acceptModelSaved(strUrl: UriComponents): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        this.$acceptDirtyStateChanged(strUrl, false);\n        if (data) {\n            this._onDidSaveTextDocument.fire(data.document);\n        }\n    }\n\n    async $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]> {\n        const uri = URI.revive(strUrl).toString();\n        const operations: SingleEditOperation[] = [];\n        let didTimeout = false;\n        // try to timeout early to squeeze edits at least from some save participants\n        const didTimeoutHandle = setTimeout(() => didTimeout = true, saveTimeout - 250);\n        try {\n            await this._onWillSaveTextDocument.sequence(async fireEvent => {\n                if (didTimeout) {\n                    return false;\n                }\n                try {\n                    const documentData = this.editorsAndDocuments.getDocument(uri);\n                    if (documentData) {\n                        const { document } = documentData;\n                        await this.fireTextDocumentWillSaveEvent({\n                            document, reason, fireEvent,\n                            accept: operation => operations.push(operation)\n                        });\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n                return !didTimeout;\n            });\n        } finally {\n            clearTimeout(didTimeoutHandle);\n        }\n        return operations;\n    }\n\n    // tslint:disable:no-any\n    protected async fireTextDocumentWillSaveEvent({\n        document, reason, fireEvent, accept\n    }: {\n            document: theia.TextDocument,\n            reason: theia.TextDocumentSaveReason,\n            fireEvent: (e: theia.TextDocumentWillSaveEvent) => any,\n            accept: (operation: SingleEditOperation) => void\n        }): Promise<void> {\n\n        const promises: PromiseLike<TextEdit[] | any>[] = [];\n        fireEvent(Object.freeze({\n            document, reason,\n            waitUntil(p: PromiseLike<TextEdit[] | any>): void {\n                if (Object.isFrozen(promises)) {\n                    throw new Error('waitUntil can not be called async');\n                }\n                promises.push(p);\n            }\n        }));\n        Object.freeze(promises);\n\n        await Promise.all(promises).then(allEdits => allEdits.forEach(edits => {\n            if (Array.isArray(edits)) {\n                edits.forEach(edit => {\n                    if (TextEdit.isTextEdit(edit)) {\n                        accept(Converter.fromTextEdit(edit));\n                    }\n                });\n            }\n        }));\n    }\n    // tslint:enable:no-any\n\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            data.acceptIsDirty(isDirty);\n            this._onDidChangeDocument.fire({\n                document: data.document,\n                contentChanges: []\n            });\n        }\n    }\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            data.acceptIsDirty(isDirty);\n            data.onEvents(e);\n            this._onDidChangeDocument.fire({\n                document: data.document,\n                contentChanges: e.changes.map(change =>\n                    ({\n                        range: Converter.toRange(change.range),\n                        rangeOffset: change.rangeOffset,\n                        rangeLength: change.rangeLength,\n                        text: change.text\n                    }))\n            });\n        }\n    }\n    getAllDocumentData(): DocumentDataExt[] {\n        return this.editorsAndDocuments.allDocuments();\n    }\n\n    getDocumentData(resource: theia.Uri): DocumentDataExt | undefined {\n        if (resource) {\n            return this.editorsAndDocuments.getDocument(resource.toString());\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Retrieve document and open it in the editor if need.\n     *\n     * @param uri path to the resource\n     * @param options if options exists, resource will be opened in editor, otherwise only document object is returned\n     */\n    async showDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        // Determine whether the document is already loading\n        const loadingDocument = this.loadingDocuments.get(uri.toString());\n        if (loadingDocument) {\n            // return the promise if document is already loading\n            return loadingDocument;\n        }\n\n        try {\n            // start opening document\n            const document = this.loadDocument(uri, options);\n            // add loader to the map\n            this.loadingDocuments.set(uri.toString(), document);\n            // wait the document being opened\n            await document;\n            // return opened document\n            return document;\n        } catch (error) {\n            return Promise.reject(error);\n        } finally {\n            // remove loader from the map\n            this.loadingDocuments.delete(uri.toString());\n        }\n    }\n\n    async openDocument(uri: URI): Promise<DocumentDataExt | undefined> {\n        const cached = this.editorsAndDocuments.getDocument(uri.toString());\n        if (cached) {\n            return cached;\n        }\n\n        await this.proxy.$tryOpenDocument(uri);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    private async loadDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        let documentOptions: TextDocumentShowOptions | undefined;\n        if (options) {\n            let selection: Range | undefined;\n            if (options.selection) {\n                const { start, end } = options.selection;\n                selection = {\n                    startLineNumber: start.line,\n                    startColumn: start.character,\n                    endLineNumber: end.line,\n                    endColumn: end.character\n                };\n            }\n            documentOptions = {\n                selection,\n                preserveFocus: options.preserveFocus,\n                preview: options.preview,\n                viewColumn: options.viewColumn\n            };\n        }\n        await this.proxy.$tryShowDocument(uri, documentOptions);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    async createDocumentData(options?: { language?: string; content?: string }): Promise<URI> {\n        return this.proxy.$tryCreateDocument(options).then(data => URI.revive(data));\n    }\n\n    setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n        setWordDefinitionFor(modeId, wordDefinition);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Copied from https://github.com/Microsoft/vscode/blob/master/src/vs/editor/common/viewModel/prefixSumComputer.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Max unsigned integer that fits on 32 bits.\n */\nconst MAX_UINT_32 = 4294967295; // 2^32 - 1\n\nexport function toUint32(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > MAX_UINT_32) {\n        return MAX_UINT_32;\n    }\n    return v | 0;\n}\n\nexport class PrefixSumIndexOfResult {\n    _prefixSumIndexOfResultBrand: void;\n\n    index: number;\n    remainder: number;\n\n    constructor(index: number, remainder: number) {\n        this.index = index;\n        this.remainder = remainder;\n    }\n}\n\nexport class PrefixSumComputer {\n\n    /**\n     * values[i] is the value at index i\n     */\n    private values: Uint32Array;\n\n    /**\n     * prefixSum[i] = SUM(heights[j]), 0 <= j <= i\n     */\n    private prefixSum: Uint32Array;\n\n    /**\n     * prefixSum[i], 0 <= i <= prefixSumValidIndex can be trusted\n     */\n    private prefixSumValidIndex: Int32Array;\n\n    constructor(values: Uint32Array) {\n        this.values = values;\n        this.prefixSum = new Uint32Array(values.length);\n        this.prefixSumValidIndex = new Int32Array(1);\n        this.prefixSumValidIndex[0] = -1;\n    }\n\n    public getCount(): number {\n        return this.values.length;\n    }\n\n    public insertValues(insertIndex: number, insertValues: Uint32Array): boolean {\n        insertIndex = toUint32(insertIndex);\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n        const insertValuesLen = insertValues.length;\n\n        if (insertValuesLen === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n        this.values.set(insertValues, insertIndex);\n\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = insertIndex - 1;\n        }\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public changeValue(index: number, value: number): boolean {\n        index = toUint32(index);\n        value = toUint32(value);\n\n        if (this.values[index] === value) {\n            return false;\n        }\n        this.values[index] = value;\n        if (index - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = index - 1;\n        }\n        return true;\n    }\n\n    public removeValues(startIndex: number, cnt: number): boolean {\n        startIndex = toUint32(startIndex);\n        cnt = toUint32(cnt);\n\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n\n        if (startIndex >= oldValues.length) {\n            return false;\n        }\n\n        const maxCnt = oldValues.length - startIndex;\n        if (cnt >= maxCnt) {\n            cnt = maxCnt;\n        }\n\n        if (cnt === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length - cnt);\n        this.values.set(oldValues.subarray(0, startIndex), 0);\n        this.values.set(oldValues.subarray(startIndex + cnt), startIndex);\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = startIndex - 1;\n        }\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public getTotalValue(): number {\n        if (this.values.length === 0) {\n            return 0;\n        }\n        return this._getAccumulatedValue(this.values.length - 1);\n    }\n\n    public getAccumulatedValue(index: number): number {\n        if (index < 0) {\n            return 0;\n        }\n\n        index = toUint32(index);\n        return this._getAccumulatedValue(index);\n    }\n\n    private _getAccumulatedValue(index: number): number {\n        if (index <= this.prefixSumValidIndex[0]) {\n            return this.prefixSum[index];\n        }\n\n        let startIndex = this.prefixSumValidIndex[0] + 1;\n        if (startIndex === 0) {\n            this.prefixSum[0] = this.values[0];\n            startIndex++;\n        }\n\n        if (index >= this.values.length) {\n            index = this.values.length - 1;\n        }\n\n        for (let i = startIndex; i <= index; i++) {\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n        }\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n        return this.prefixSum[index];\n    }\n\n    public getIndexOf(accumulatedValue: number): PrefixSumIndexOfResult {\n        accumulatedValue = Math.floor(accumulatedValue);\n\n        // Compute all sums (to get a fully valid prefixSum)\n        this.getTotalValue();\n\n        let low = 0;\n        let high = this.values.length - 1;\n        let mid: number;\n        let midStop: number;\n        let midStart: number;\n\n        while (low <= high) {\n            mid = low + ((high - low) / 2) | 0;\n\n            midStop = this.prefixSum[mid];\n            midStart = midStop - this.values[mid];\n\n            if (accumulatedValue < midStart) {\n                high = mid - 1;\n            } else if (accumulatedValue >= midStop) {\n                low = mid + 1;\n            } else {\n                break;\n            }\n        }\n\n        return new PrefixSumIndexOfResult(mid!, accumulatedValue - midStart!);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Word inside a model.\n */\nexport interface WordAtPosition {\n    /**\n     * The word.\n     */\n    readonly word: string;\n    /**\n     * The column where the word starts.\n     */\n    readonly startColumn: number;\n    /**\n     * The column where the word ends.\n     */\n    readonly endColumn: number;\n}\n\nexport const USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\n\n/**\n * Create a word definition regular expression based on default word separators.\n * Optionally provide allowed separators that should be included in words.\n *\n * The default would look like this:\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\n */\nfunction createWordRegExp(allowInWords: string = ''): RegExp {\n    let source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\n    for (let i = 0; i < USUAL_WORD_SEPARATORS.length; i++) {\n        if (allowInWords.indexOf(USUAL_WORD_SEPARATORS[i]) >= 0) {\n            continue;\n        }\n        source += '\\\\' + USUAL_WORD_SEPARATORS[i];\n    }\n    source += '\\\\s]+)';\n    return new RegExp(source, 'g');\n}\n\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\nexport const DEFAULT_WORD_REGEXP = createWordRegExp();\n\nexport function ensureValidWordDefinition(wordDefinition?: RegExp): RegExp {\n    let result: RegExp = DEFAULT_WORD_REGEXP;\n\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\n        if (!wordDefinition.global) {\n            let flags = 'g';\n            if (wordDefinition.ignoreCase) {\n                flags += 'i';\n            }\n            if (wordDefinition.multiline) {\n                flags += 'm';\n            }\n            result = new RegExp(wordDefinition.source, flags);\n        } else {\n            result = wordDefinition;\n        }\n    }\n\n    result.lastIndex = 0;\n\n    return result;\n}\n\nfunction getWordAtPosFast(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // find whitespace enclosed text around column and match from there\n\n    const pos = column - 1 - textOffset;\n    const start = text.lastIndexOf(' ', pos - 1) + 1;\n    let end = text.indexOf(' ', pos);\n    if (end === -1) {\n        end = text.length;\n    }\n\n    wordDefinition.lastIndex = start;\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n        if (match.index! <= pos && wordDefinition.lastIndex >= pos) {\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nfunction getWordAtPosSlow(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // matches all words starting at the beginning\n    // of the input until it finds a match that encloses\n    // the desired column. slow but correct\n\n    const pos = column - 1 - textOffset;\n    wordDefinition.lastIndex = 0;\n\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n\n        if (match.index! > pos) {\n            // |nW -> matched only after the pos\n            return undefined;\n\n        } else if (wordDefinition.lastIndex >= pos) {\n            // W|W -> match encloses pos\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nexport function getWordAtText(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n\n    // if `words` can contain whitespace character we have to use the slow variant\n    // otherwise we use the fast variant of finding a word\n    wordDefinition.lastIndex = 0;\n    const match = wordDefinition.exec(text);\n    if (!match) {\n        return undefined;\n    }\n    // todo@joh the `match` could already be the (first) word\n    const ret = match[0].indexOf(' ') >= 0\n        // did match a word which contains a space character -> use slow word find\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\n        // sane word definition -> use fast word find\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\n\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\n    // in an undefined state and to not confuse other users of the wordDefinition\n    // we reset the lastIndex\n    wordDefinition.lastIndex = 0;\n\n    return ret;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// enum copied from monaco.d.ts\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport enum TextEditorCursorStyle {\n    /**\n     * As a vertical line\n     */\n    Line = 1,\n\n    /**\n     * As a block\n     */\n    Block = 2,\n\n    /**\n     * As a horizontal line, under character\n     */\n    Underline = 3,\n\n    /**\n     * As a thin vertical line\n     */\n    LineThin = 4,\n\n    /**\n     * As an outlined block, on top of a character\n     */\n    BlockOutline = 5,\n\n    /**\n     * As a thin horizontal line, under a character\n     */\n    UnderlineThin = 6\n}\n\nexport function cursorStyleToString(cursorStyle: TextEditorCursorStyle): string {\n    switch (cursorStyle) {\n        case TextEditorCursorStyle.Line:\n            return 'line';\n        case TextEditorCursorStyle.Block:\n            return 'block';\n        case TextEditorCursorStyle.Underline:\n            return 'underline';\n        case TextEditorCursorStyle.LineThin:\n            return 'line-thin';\n        case TextEditorCursorStyle.BlockOutline:\n            return 'block-outline';\n        case TextEditorCursorStyle.UnderlineThin:\n            return 'underline-thin';\n        default:\n            throw new Error('cursorStyleToString: Unknown cursorStyle');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, OutputChannelRegistryMain, PluginInfo, OutputChannelRegistryExt\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { OutputChannelImpl } from './output-channel/output-channel-item';\n\nexport class OutputChannelRegistryExtImpl implements OutputChannelRegistryExt {\n\n    proxy: OutputChannelRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.OUTPUT_CHANNEL_REGISTRY_MAIN);\n    }\n\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel {\n        name = name.trim();\n        if (!name) {\n            throw new Error('illegal argument \\'name\\'. must not be falsy');\n        } else {\n            return new OutputChannelImpl(name, this.proxy, pluginInfo);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\n\nexport class OutputChannelImpl implements theia.OutputChannel {\n\n    private disposed: boolean;\n\n    constructor(readonly name: string, private proxy: OutputChannelRegistryMain, private readonly pluginInfo: PluginInfo) {\n    }\n\n    dispose(): void {\n        if (!this.disposed) {\n            this.proxy.$dispose(this.name).then(() => {\n                this.disposed = true;\n            });\n        }\n    }\n\n    append(value: string): void {\n        this.validate();\n        this.proxy.$append(this.name, value, this.pluginInfo);\n    }\n\n    appendLine(value: string): void {\n        this.validate();\n        this.append(value + '\\n');\n    }\n\n    clear(): void {\n        this.validate();\n        this.proxy.$clear(this.name);\n    }\n\n    show(preserveFocus: boolean | undefined): void {\n        this.validate();\n        this.proxy.$reveal(this.name, !!preserveFocus);\n    }\n\n    hide(): void {\n        this.validate();\n        this.proxy.$close(this.name);\n    }\n\n    private validate(): void {\n        if (this.disposed) {\n            throw new Error('Channel has been closed');\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { UUID } from '@phosphor/coreutils/lib/uuid';\nimport { Terminal, TerminalOptions } from '@theia/plugin';\nimport { TerminalServiceExt, TerminalServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport * as theia from '@theia/plugin';\n\n/**\n * Provides high level terminal plugin api to use in the Theia plugins.\n * This service allow(with help proxy) create and use terminal emulator.\n */\nexport class TerminalServiceExtImpl implements TerminalServiceExt {\n\n    private readonly proxy: TerminalServiceMain;\n\n    private readonly _terminals = new Map<string, TerminalExtImpl>();\n\n    private readonly onDidCloseTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidCloseTerminal: theia.Event<Terminal> = this.onDidCloseTerminalEmitter.event;\n\n    private readonly onDidOpenTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidOpenTerminal: theia.Event<Terminal> = this.onDidOpenTerminalEmitter.event;\n\n    private readonly onDidChangeActiveTerminalEmitter = new Emitter<Terminal | undefined>();\n    readonly onDidChangeActiveTerminal: theia.Event<Terminal | undefined> = this.onDidChangeActiveTerminalEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TERMINAL_MAIN);\n    }\n\n    get terminals(): TerminalExtImpl[] {\n        return [...this._terminals.values()];\n    }\n\n    createTerminal(nameOrOptions: TerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): Terminal {\n        let options: TerminalOptions;\n        if (typeof nameOrOptions === 'object') {\n            options = nameOrOptions;\n        } else {\n            options = {\n                name: nameOrOptions,\n                shellPath: shellPath,\n                shellArgs: shellArgs\n            };\n        }\n        const id = `plugin-terminal-${UUID.uuid4()}`;\n        this.proxy.$createTerminal(id, options);\n        return this.obtainTerminal(id, options.name || 'Terminal');\n    }\n\n    protected obtainTerminal(id: string, name: string): TerminalExtImpl {\n        let terminal = this._terminals.get(id);\n        if (!terminal) {\n            terminal = new TerminalExtImpl(this.proxy);\n            this._terminals.set(id, terminal);\n        }\n        terminal.name = name;\n        return terminal;\n    }\n\n    $terminalCreated(id: string, name: string): void {\n        const terminal = this.obtainTerminal(id, name);\n        terminal.id.resolve(id);\n        this.onDidOpenTerminalEmitter.fire(terminal);\n    }\n\n    $terminalNameChanged(id: string, name: string): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            terminal.name = name;\n        }\n    }\n\n    $terminalOpened(id: string, processId: number): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            // resolve for existing clients\n            terminal.deferredProcessId.resolve(processId);\n            // install new if terminal is reconnected\n            terminal.deferredProcessId = new Deferred<number>();\n            terminal.deferredProcessId.resolve(processId);\n        }\n    }\n\n    $terminalClosed(id: string): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            this.onDidCloseTerminalEmitter.fire(terminal);\n            this._terminals.delete(id);\n        }\n    }\n\n    private activeTerminalId: string | undefined;\n    get activeTerminal(): TerminalExtImpl | undefined {\n        return this.activeTerminalId && this._terminals.get(this.activeTerminalId) || undefined;\n    }\n    $currentTerminalChanged(id: string | undefined): void {\n        this.activeTerminalId = id;\n        this.onDidChangeActiveTerminalEmitter.fire(this.activeTerminal);\n    }\n\n}\n\nexport class TerminalExtImpl implements Terminal {\n\n    name: string;\n\n    readonly id = new Deferred<string>();\n\n    deferredProcessId = new Deferred<number>();\n    get processId(): Thenable<number> {\n        return this.deferredProcessId.promise;\n    }\n\n    constructor(private readonly proxy: TerminalServiceMain) { }\n\n    sendText(text: string, addNewLine: boolean = true): void {\n        this.id.promise.then(id => this.proxy.$sendText(id, text, addNewLine));\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.id.promise.then(id => this.proxy.$show(id, preserveFocus));\n    }\n\n    hide(): void {\n        this.id.promise.then(id => this.proxy.$hide(id));\n    }\n\n    dispose(): void {\n        this.id.promise.then(id => this.proxy.$dispose(id));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    LanguagesExt,\n    PLUGIN_RPC_CONTEXT,\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    SerializedRegExp,\n    SerializedOnEnterRule,\n    SerializedIndentationRule,\n    Position,\n    Selection,\n    RawColorInfo,\n    WorkspaceEditDto,\n    PluginInfo\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from './documents';\nimport { PluginModel } from '../common/plugin-protocol';\nimport { Disposable } from './types-impl';\nimport URI from 'vscode-uri/lib/umd';\nimport { match as matchGlobPattern } from '../common/glob';\nimport { UriComponents } from '../common/uri-components';\nimport {\n    CompletionContext,\n    CompletionResultDto,\n    Completion,\n    SerializedDocumentFilter,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    Range,\n    TextEdit,\n    FormattingOptions,\n    Definition,\n    DefinitionLink,\n    DocumentLink,\n    CodeLensSymbol,\n    DocumentSymbol,\n    ReferenceContext,\n    Location,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeActionContext,\n    CodeAction,\n    FoldingRange,\n} from '../common/plugin-api-rpc-model';\nimport { CompletionAdapter } from './languages/completion';\nimport { Diagnostics } from './languages/diagnostics';\nimport { SignatureHelpAdapter } from './languages/signature';\nimport { HoverAdapter } from './languages/hover';\nimport { DocumentHighlightAdapter } from './languages/document-highlight';\nimport { DocumentFormattingAdapter } from './languages/document-formatting';\nimport { RangeFormattingAdapter } from './languages/range-formatting';\nimport { OnTypeFormattingAdapter } from './languages/on-type-formatting';\nimport { DefinitionAdapter } from './languages/definition';\nimport { ImplementationAdapter } from './languages/implementation';\nimport { TypeDefinitionAdapter } from './languages/type-definition';\nimport { CodeActionAdapter } from './languages/code-action';\nimport { LinkProviderAdapter } from './languages/link-provider';\nimport { CodeLensAdapter } from './languages/lens';\nimport { OutlineAdapter } from './languages/outline';\nimport { ReferenceAdapter } from './languages/reference';\nimport { WorkspaceSymbolAdapter } from './languages/workspace-symbol';\nimport { SymbolInformation } from 'vscode-languageserver-types';\nimport { FoldingProviderAdapter } from './languages/folding';\nimport { ColorProviderAdapter } from './languages/color';\nimport { RenameAdapter } from './languages/rename';\nimport { Event } from '@theia/core/lib/common/event';\nimport { CommandRegistryImpl } from './command-registry';\nimport { DeclarationAdapter } from './languages/declaration';\n\ntype Adapter = CompletionAdapter |\n    SignatureHelpAdapter |\n    HoverAdapter |\n    DocumentHighlightAdapter |\n    DocumentFormattingAdapter |\n    RangeFormattingAdapter |\n    OnTypeFormattingAdapter |\n    DefinitionAdapter |\n    DeclarationAdapter |\n    ImplementationAdapter |\n    TypeDefinitionAdapter |\n    LinkProviderAdapter |\n    CodeLensAdapter |\n    CodeActionAdapter |\n    OutlineAdapter |\n    LinkProviderAdapter |\n    ReferenceAdapter |\n    WorkspaceSymbolAdapter |\n    FoldingProviderAdapter |\n    ColorProviderAdapter |\n    RenameAdapter;\n\nexport class LanguagesExtImpl implements LanguagesExt {\n\n    private proxy: LanguagesMain;\n\n    private diagnostics: Diagnostics;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, Adapter>();\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n        this.diagnostics = new Diagnostics(rpc);\n    }\n\n    get onDidChangeDiagnostics(): Event<theia.DiagnosticChangeEvent> {\n        return this.diagnostics.onDidChangeDiagnostics;\n    }\n\n    getLanguages(): Promise<string[]> {\n        return this.proxy.$getLanguages();\n    }\n\n    changeLanguage(uri: URI, languageId: string): Promise<theia.TextDocument> {\n        return this.proxy.$changeLanguage(uri, languageId).then(() => {\n            const doc = this.documents.getDocumentData(uri);\n            if (!doc) {\n                throw new Error('No document found by URI ' + uri.toString());\n            }\n            return doc.document;\n        });\n    }\n\n    setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n        const { wordPattern } = configuration;\n\n        if (wordPattern) {\n            this.documents.setWordDefinitionFor(language, wordPattern);\n        } else {\n            // tslint:disable-next-line:no-null-keyword\n            this.documents.setWordDefinitionFor(language, null);\n        }\n\n        const callId = this.nextCallId();\n\n        const config: SerializedLanguageConfiguration = {\n            brackets: configuration.brackets,\n            comments: configuration.comments,\n            onEnterRules: serializeEnterRules(configuration.onEnterRules),\n            wordPattern: serializeRegExp(configuration.wordPattern),\n            indentationRules: serializeIndentation(configuration.indentationRules)\n        };\n\n        this.proxy.$setLanguageConfiguration(callId, language, config);\n        return this.createDisposable(callId);\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    private addNewAdapter(adapter: Adapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    // tslint:disable-next-line:no-any\n    private withAdapter<A, R>(handle: number, ctor: { new(...args: any[]): A }, callback: (adapter: A) => Promise<R>): Promise<R> {\n        const adapter = this.adaptersMap.get(handle);\n        if (!(adapter instanceof ctor)) {\n            return Promise.reject(new Error('no adapter found'));\n        }\n        return callback(<A>adapter);\n    }\n\n    private transformDocumentSelector(selector: theia.DocumentSelector): SerializedDocumentFilter[] {\n        if (Array.isArray(selector)) {\n            return selector.map(sel => this.doTransformDocumentSelector(sel)!);\n        }\n\n        return [this.doTransformDocumentSelector(selector)!];\n    }\n\n    private doTransformDocumentSelector(selector: string | theia.DocumentFilter): SerializedDocumentFilter | undefined {\n        if (typeof selector === 'string') {\n            return {\n                $serialized: true,\n                language: selector\n            };\n        }\n\n        if (selector) {\n            return {\n                $serialized: true,\n                language: selector.language,\n                scheme: selector.scheme,\n                pattern: selector.pattern\n            };\n        }\n\n        return undefined;\n    }\n\n    // ### Completion begin\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token));\n    }\n\n    $resolveCompletionItem(handle: number, resource: UriComponents, position: Position, completion: Completion, token: theia.CancellationToken): Promise<Completion> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.resolveCompletionItem(URI.revive(resource), position, completion, token));\n    }\n\n    $releaseCompletionItems(handle: number, id: number): void {\n        this.withAdapter(handle, CompletionAdapter, async adapter => adapter.releaseCompletionItems(id));\n    }\n\n    registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, triggerCharacters: string[],\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CompletionAdapter(provider, this.documents, this.commands));\n        this.proxy.$registerCompletionSupport(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters, CompletionAdapter.hasResolveSupport(provider));\n        return this.createDisposable(callId);\n    }\n    // ### Completion end\n\n    // ### Definition provider begin\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token));\n    }\n\n    registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DefinitionAdapter(provider, this.documents));\n        this.proxy.$registerDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Definition provider end\n\n    // ### Declaration provider begin\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token));\n    }\n\n    registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DeclarationAdapter(provider, this.documents));\n        this.proxy.$registerDeclarationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Declaration provider end\n\n    // ### Signature help begin\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: theia.CancellationToken\n    ): Promise<SignatureHelp | undefined> {\n        return this.withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, token, context));\n    }\n\n    $releaseSignatureHelp(handle: number, id: number): void {\n        this.withAdapter(handle, SignatureHelpAdapter, async adapter => adapter.releaseSignatureHelp(id));\n    }\n\n    registerSignatureHelpProvider(selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, metadata: theia.SignatureHelpProviderMetadata,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SignatureHelpAdapter(provider, this.documents));\n        this.proxy.$registerSignatureHelpProvider(callId, pluginInfo, this.transformDocumentSelector(selector), metadata);\n        return this.createDisposable(callId);\n    }\n    // ### Signature help end\n\n    // ### Diagnostics begin\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        return this.diagnostics.getDiagnostics(resource!);\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        return this.diagnostics.createDiagnosticCollection(name);\n    }\n    // ### Diagnostics end\n\n    // ### Implementation provider begin\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token));\n    }\n\n    registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ImplementationAdapter(provider, this.documents));\n        this.proxy.$registerImplementationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Implementation provider end\n\n    // ### Type Definition provider begin\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token));\n    }\n\n    registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new TypeDefinitionAdapter(provider, this.documents));\n        this.proxy.$registerTypeDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Type Definition provider end\n\n    // ### Hover Provider begin\n    registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new HoverAdapter(provider, this.documents));\n        this.proxy.$registerHoverProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        return this.withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, token));\n    }\n    // ### Hover Provider end\n\n    // ### Document Highlight Provider begin\n    registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentHighlightAdapter(provider, this.documents));\n        this.proxy.$registerDocumentHighlightProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        return this.withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token));\n    }\n    // ### Document Highlight Provider end\n\n    // ### WorkspaceSymbol Provider begin\n    registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new WorkspaceSymbolAdapter(provider));\n        this.proxy.$registerWorkspaceSymbolProvider(callId, pluginInfo);\n        return this.createDisposable(callId);\n    }\n\n    $provideWorkspaceSymbols(handle: number, query: string, token: theia.CancellationToken): PromiseLike<SymbolInformation[]> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.provideWorkspaceSymbols(query, token));\n    }\n\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: theia.CancellationToken): PromiseLike<SymbolInformation> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token));\n    }\n    // ### WorkspaceSymbol Provider end\n\n    // ### Document Formatting Edit begin\n    registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentFormattingAdapter(provider, this.documents));\n        this.proxy.$registerDocumentFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token));\n    }\n    // ### Document Formatting Edit end\n\n    // ### Document Range Formatting Edit begin\n    registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RangeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerRangeFormattingProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token));\n    }\n    // ### Document Range Formatting Edit end\n\n    // ### On Type Formatting Edit begin\n    registerOnTypeFormattingEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.OnTypeFormattingEditProvider,\n        triggerCharacters: string[],\n        pluginInfo: PluginInfo\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new OnTypeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerOnTypeFormattingProvider(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters);\n        return this.createDisposable(callId);\n    }\n\n    $provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token));\n    }\n    // ### On Type Formatting Edit end\n\n    // ### Document Link Provider begin\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token));\n    }\n\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(link, token));\n    }\n\n    registerLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new LinkProviderAdapter(provider, this.documents));\n        this.proxy.$registerDocumentLinkProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Document Link Provider end\n\n    // ### Code Actions Provider begin\n    registerCodeActionsProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.CodeActionProvider,\n        pluginModel: PluginModel,\n        pluginInfo: PluginInfo,\n        metadata?: theia.CodeActionProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeActionAdapter(provider, this.documents, this.diagnostics, pluginModel ? pluginModel.id : '', this.commands));\n        this.proxy.$registerQuickFixProvider(\n            callId,\n            pluginInfo,\n            this.transformDocumentSelector(selector),\n            metadata && metadata.providedCodeActionKinds ? metadata.providedCodeActionKinds.map(kind => kind.value!) : undefined\n        );\n        return this.createDisposable(callId);\n    }\n\n    $provideCodeActions(handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: theia.CancellationToken\n    ): Promise<CodeAction[] | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeAction(URI.revive(resource), rangeOrSelection, context, token));\n    }\n    // ### Code Actions Provider end\n\n    // ### Code Lens Provider begin\n    registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeLensAdapter(provider, this.documents, this.commands));\n        const eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this.nextCallId() : undefined;\n        this.proxy.$registerCodeLensSupport(callId, pluginInfo, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined && provider.onDidChangeCodeLenses) {\n            const subscription = provider.onDidChangeCodeLenses(e => this.proxy.$emitCodeLensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideCodeLenses(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token));\n    }\n\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(URI.revive(resource), symbol, token));\n    }\n    // ### Code Lens Provider end\n\n    // ### Code Reference Provider begin\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        return this.withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token));\n    }\n\n    registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ReferenceAdapter(provider, this.documents));\n        this.proxy.$registerReferenceProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Code Reference Provider end\n\n    // ### Document Symbol Provider begin\n    registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new OutlineAdapter(this.documents, provider));\n        this.proxy.$registerOutlineSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        return this.withAdapter(handle, OutlineAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token));\n    }\n    // ### Document Symbol Provider end\n\n    // ### Color Provider begin\n    registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ColorProviderAdapter(this.documents, provider));\n        this.proxy.$registerDocumentColorProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentColors(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token));\n    }\n\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token));\n    }\n    // ### Color Provider end\n\n    // ### Folding Range Provider begin\n    registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new FoldingProviderAdapter(provider, this.documents));\n        this.proxy.$registerFoldingRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideFoldingRange(\n        callId: number,\n        resource: UriComponents,\n        context: theia.FoldingContext,\n        token: theia.CancellationToken\n    ): Promise<FoldingRange[] | undefined> {\n        return this.withAdapter(callId, FoldingProviderAdapter, adapter => adapter.provideFoldingRanges(URI.revive(resource), context, token));\n    }\n    // ### Folging Range Provider end\n\n    // ### Rename Provider begin\n    registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RenameAdapter(provider, this.documents));\n        this.proxy.$registerRenameProvider(callId, pluginInfo, this.transformDocumentSelector(selector), RenameAdapter.supportsResolving(provider));\n        return this.createDisposable(callId);\n    }\n\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token));\n    }\n\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<RenameLocation | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token));\n    }\n    // ### Rename Provider end\n}\n\nfunction serializeEnterRules(rules?: theia.OnEnterRule[]): SerializedOnEnterRule[] | undefined {\n    if (typeof rules === 'undefined' || rules === null) {\n        return undefined;\n    }\n\n    return rules.map(r =>\n        ({\n            action: r.action,\n            beforeText: serializeRegExp(r.beforeText),\n            afterText: serializeRegExp(r.afterText)\n        } as SerializedOnEnterRule));\n}\n\nfunction serializeRegExp(regexp?: RegExp): SerializedRegExp | undefined {\n    if (typeof regexp === 'undefined' || regexp === null) {\n        return undefined;\n    }\n\n    return {\n        pattern: regexp.source,\n        flags: (regexp.global ? 'g' : '') + (regexp.ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '')\n    };\n}\n\nfunction serializeIndentation(indentationRules?: theia.IndentationRule): SerializedIndentationRule | undefined {\n    if (typeof indentationRules === 'undefined' || indentationRules === null) {\n        return undefined;\n    }\n\n    return {\n        increaseIndentPattern: serializeRegExp(indentationRules.increaseIndentPattern),\n        decreaseIndentPattern: serializeRegExp(indentationRules.decreaseIndentPattern),\n        indentNextLinePattern: serializeRegExp(indentationRules.indentNextLinePattern),\n        unIndentedLinePattern: serializeRegExp(indentationRules.unIndentedLinePattern)\n    };\n}\n\nexport interface RelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\nexport interface LanguageFilter {\n    language?: string;\n    scheme?: string;\n    pattern?: string | RelativePattern;\n    hasAccessToAllModels?: boolean;\n}\nexport type LanguageSelector = string | LanguageFilter | (string | LanguageFilter)[];\n\nexport function score(selector: LanguageSelector | undefined, candidateUri: URI, candidateLanguage: string, candidateIsSynchronized: boolean): number {\n\n    if (Array.isArray(selector)) {\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, candidateUri, candidateLanguage, candidateIsSynchronized);\n            if (value === 10) {\n                return value;\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n\n    } else if (typeof selector === 'string') {\n\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n\n        if (selector === '*') {\n            return 5;\n        } else if (selector === candidateLanguage) {\n            return 10;\n        } else {\n            return 0;\n        }\n\n    } else if (selector) {\n        const { language, pattern, scheme, hasAccessToAllModels } = selector;\n\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n\n        let result = 0;\n\n        if (scheme) {\n            if (scheme === candidateUri.scheme) {\n                result = 10;\n            } else if (scheme === '*') {\n                result = 5;\n            } else {\n                return 0;\n            }\n        }\n\n        if (language) {\n            if (language === candidateLanguage) {\n                result = 10;\n            } else if (language === '*') {\n                result = Math.max(result, 5);\n            } else {\n                return 0;\n            }\n        }\n\n        if (pattern) {\n            if (pattern === candidateUri.fsPath || matchGlobPattern(pattern, candidateUri.fsPath)) {\n                result = 10;\n            } else {\n                return 0;\n            }\n        }\n\n        return result;\n\n    } else {\n        return 0;\n    }\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nvar _throwOnMissingSchema = true;\n/**\n * @internal\n */\nfunction setUriThrowOnMissingScheme(value) {\n    var old = _throwOnMissingSchema;\n    _throwOnMissingSchema = value;\n    return old;\n}\nexports.setUriThrowOnMissingScheme = setUriThrowOnMissingScheme;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme) {\n        if (_strict || _throwOnMissingSchema) {\n            throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n            // } else {\n            // \tconsole.warn(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${ret.authority}\", path: \"${ret.path}\", query: \"${ret.query}\", fragment: \"${ret.fragment}\"}`);\n        }\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (_strict || _throwOnMissingSchema) {\n        return scheme || _empty;\n    }\n    if (!scheme) {\n        // console.trace('BAD uri lacks scheme, falling back to file-scheme.');\n        scheme = 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexports.default = URI;\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// tslint:disable-next-line:class-name\nvar _URI = (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && ((uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122) /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\nvar _a;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/glob.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as strings from './strings';\nimport * as paths from './paths';\nimport { CharCode } from './char-code';\n/* tslint:disable:no-null-keyword no-shadowed-variable one-variable-per-declaration */\nexport interface IExpression {\n    // tslint:disable-next-line:no-any\n    [pattern: string]: boolean | SiblingClause | any;\n}\n\nexport interface IRelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport function getEmptyExpression(): IExpression {\n    return Object.create(null);\n}\n\nexport interface SiblingClause {\n    when: string;\n}\n\nconst GLOBSTAR = '**';\nconst GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]';        // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]';    // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\n\nfunction starsToRegExp(starCount: number): string {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}|${PATH_REGEX}${NO_PATH_REGEX}+)*?`;\n    }\n}\n\nexport function splitGlobAware(pattern: string, splitChar: string): string[] {\n    if (!pattern) {\n        return [];\n    }\n\n    const segments: string[] = [];\n\n    let inBraces = false;\n    let inBrackets = false;\n\n    let char: string;\n    let curVal = '';\n    for (let i = 0; i < pattern.length; i++) {\n        char = pattern[i];\n\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n\n        curVal += char;\n    }\n\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n\n    return segments;\n}\n\nfunction parseRegExp(pattern: string): string {\n    if (!pattern) {\n        return '';\n    }\n\n    let regEx = '';\n\n    // Split up into segments for each slash found\n    // tslint:disable-next-line:prefer-const\n    let segments = splitGlobAware(pattern, GLOB_SPLIT);\n\n    // Special case where we only have globstars\n    if (segments.every(s => s === GLOBSTAR)) {\n        regEx = '.*';\n    }\n\n    // Build regex over segments\n    // tslint:disable-next-line:one-line\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n\n            // Globstar is special\n            if (segment === GLOBSTAR) {\n\n                // if we have more than one globstar after another, just ignore it\n                if (!previousSegmentWasGlobStar) {\n                    regEx += starsToRegExp(2);\n                    previousSegmentWasGlobStar = true;\n                }\n\n                return;\n            }\n\n            // States\n            let inBraces = false;\n            let braceVal = '';\n\n            let inBrackets = false;\n            let bracketVal = '';\n\n            let char: string;\n            for (let i = 0; i < segment.length; i++) {\n                char = segment[i];\n\n                // Support brace expansion\n                if (char !== '}' && inBraces) {\n                    braceVal += char;\n                    continue;\n                }\n\n                // Support brackets\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                    let res: string;\n\n                    // range operator\n                    if (char === '-') {\n                        res = char;\n                    }\n\n                    // negation operator (only valid on first index in bracket)\n                    // tslint:disable-next-line:one-line\n                    else if ((char === '^' || char === '!') && !bracketVal) {\n                        res = '^';\n                    }\n\n                    // glob split matching is not allowed within character ranges\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\n                    // tslint:disable-next-line:one-line\n                    else if (char === GLOB_SPLIT) {\n                        res = '';\n                    }\n\n                    // anything else gets escaped\n                    // tslint:disable-next-line:one-line\n                    else {\n                        res = strings.escapeRegExpCharacters(char);\n                    }\n\n                    bracketVal += res;\n                    continue;\n                }\n\n                switch (char) {\n                    case '{':\n                        inBraces = true;\n                        continue;\n\n                    case '[':\n                        inBrackets = true;\n                        continue;\n\n                    case '}':\n                        // tslint:disable-next-line:prefer-const\n                        let choices = splitGlobAware(braceVal, ',');\n\n                        // Converts {foo,bar} => [foo|bar]\n                        // tslint:disable-next-line:prefer-const\n                        let braceRegExp = `(?:${choices.map(c => parseRegExp(c)).join('|')})`;\n\n                        regEx += braceRegExp;\n\n                        inBraces = false;\n                        braceVal = '';\n\n                        break;\n\n                    case ']':\n                        regEx += ('[' + bracketVal + ']');\n\n                        inBrackets = false;\n                        bracketVal = '';\n\n                        break;\n\n                    case '?':\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                        continue;\n\n                    case '*':\n                        regEx += starsToRegExp(1);\n                        continue;\n\n                    default:\n                        regEx += strings.escapeRegExpCharacters(char);\n                }\n            }\n\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\n            // a folder called \"something\" to match as well.\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behaviour\n            // is to match 0-N segments.\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\n                regEx += PATH_REGEX;\n            }\n\n            // reset state\n            previousSegmentWasGlobStar = false;\n        });\n    }\n\n    return regEx;\n}\n\n// regexes to check for trival glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/;                                        // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/;                                            // **/something\nconst T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/;     // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/;     // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/;                                        // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/;                                    // something/else\n\nexport type ParsedPattern = (path: string, basename?: string) => boolean;\n\n// The ParsedExpression returns a Promise iff hasSibling returns a Promise.\n// tslint:disable-next-line:max-line-length\nexport type ParsedExpression = (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>) => string | Promise<string> /* the matching pattern */;\n\nexport interface IGlobOptions {\n    /**\n     * Simplify patterns for use as exclusion filters during tree traversal to skip entire subtrees. Cannot be used outside of a tree traversal.\n     */\n    trimForExclusions?: boolean;\n}\n\ninterface ParsedStringPattern {\n    (path: string, basename: string): string | Promise<string> /* the matching pattern */;\n    basenames?: string[];\n    patterns?: string[];\n    allBasenames?: string[];\n    allPaths?: string[];\n}\ninterface ParsedExpressionPattern {\n    (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>): string | Promise<string> /* the matching pattern */;\n    requiresSiblings?: boolean;\n    allBasenames?: string[];\n    allPaths?: string[];\n}\n\nconst CACHE = new Map<string, ParsedStringPattern>();  // new LRUCache<string, ParsedStringPattern>(10000); // bounded to 10000 elements\n\nconst FALSE = function (): boolean {\n    return false;\n};\n\nconst NULL = function (): string {\n    return null!;\n};\n\nfunction parsePattern(arg1: string | IRelativePattern, options: IGlobOptions): ParsedStringPattern {\n    if (!arg1) {\n        return NULL;\n    }\n\n    // Handle IRelativePattern\n    let pattern: string;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    } else {\n        pattern = arg1;\n    }\n\n    // Whitespace trimming\n    pattern = pattern.trim();\n\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n\n    // Check for Trivias\n    let match: RegExpExecArray;\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\n        const base = pattern.substr(4); // '**/*'.length === 4\n        parsedPattern = function (path, basename): string {\n            return path && strings.endsWith(path, base) ? pattern : null!;\n        };\n    } else if (match = T2.exec(trimForExclusions(pattern, options))!) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    } else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    } else if (match = T4.exec(trimForExclusions(pattern, options))!) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\n    } else if (match = T5.exec(trimForExclusions(pattern, options))!) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n\n    // Otherwise convert to pattern\n    // tslint:disable-next-line:one-line\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n\n    return wrapRelativePattern(parsedPattern, arg1);\n}\n\nfunction wrapRelativePattern(parsedPattern: ParsedStringPattern, arg2: string | IRelativePattern): ParsedStringPattern {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n\n    return function (path, basename): string | Promise<string> {\n        if (!paths.isEqualOrParent(path, arg2.base)) {\n            return null!;\n        }\n\n        return parsedPattern(paths.normalize(arg2.pathToRelative(arg2.base, path)), basename);\n    };\n}\n\nfunction trimForExclusions(pattern: string, options: IGlobOptions): string {\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base: string, originalPattern: string): ParsedStringPattern {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (basename) {\n            return basename === base ? originalPattern : null!;\n        }\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null!;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [originalPattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n\n// repetition of common ppatterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern: string, options: IGlobOptions): ParsedStringPattern {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n    if (n === 1) {\n        return <ParsedStringPattern>parsedPatterns[0];\n    }\n    const parsedPattern: ParsedStringPattern = function (path: string, basename: string): string {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if ((<ParsedStringPattern>parsedPatterns[i])(path, basename)) {\n                return pattern;\n            }\n        }\n        return null!;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    // const withBasenames = arrays.first(parsedPatterns, pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(path: string, pattern: string, matchPathEnds: boolean): ParsedStringPattern {\n    const nativePath = paths.nativeSep !== paths.sep ? path.replace(ALL_FORWARD_SLASHES, paths.nativeSep) : path;\n    const nativePathEnd = paths.nativeSep + nativePath;\n    // tslint:disable-next-line:no-shadowed-variable\n    const parsedPattern: ParsedStringPattern = matchPathEnds ? function (path, basename): string {\n        return path && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null!;\n        // tslint:disable-next-line:no-shadowed-variable\n    } : function (path, basename): string {\n        return path && path === nativePath ? pattern : null!;\n    };\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\n    return parsedPattern;\n}\n\nfunction toRegExp(pattern: string): ParsedStringPattern {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path: string, basename: string): string {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return path && regExp.test(path) ? pattern : null!;\n        };\n    } catch (error) {\n        return NULL;\n    }\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function match(pattern: string | IRelativePattern, path: string): boolean;\nexport function match(expression: IExpression, path: string, hasSibling?: (name: string) => boolean): string /* the matching pattern */;\n// tslint:disable-next-line:no-any\nexport function match(arg1: string | IExpression | IRelativePattern, path: string, hasSibling?: (name: string) => boolean): any {\n    if (!arg1 || !path) {\n        return false;\n    }\n\n    return parse(<IExpression>arg1)(path, undefined, hasSibling);\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function parse(pattern: string | IRelativePattern, options?: IGlobOptions): ParsedPattern;\nexport function parse(expression: IExpression, options?: IGlobOptions): ParsedExpression;\n// tslint:disable-next-line:no-any\nexport function parse(arg1: string | IExpression | IRelativePattern, options: IGlobOptions = {}): any {\n    if (!arg1) {\n        return FALSE;\n    }\n\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1 as string | IRelativePattern, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path: string, basename: string): boolean {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            // tslint:disable-next-line:no-any\n            (<ParsedStringPattern><any>resultPattern).allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            // tslint:disable-next-line:no-any\n            (<ParsedStringPattern><any>resultPattern).allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n\n    // Glob with Expression\n    return parsedExpression(<IExpression>arg1, options);\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>): ((name: string) => Promise<boolean>) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Promise<Record<string, true>>;\n    return (name: string) => {\n        if (!siblings) {\n            siblings = (siblingsFn() || Promise.resolve([]))\n                .then(list => list ? listToMap(list) : {});\n        }\n        return siblings.then(map => !!map[name]);\n    };\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]): ((name: string) => boolean) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Record<string, true>;\n    return (name: string) => {\n        if (!siblings) {\n            const list = siblingsFn();\n            siblings = list ? listToMap(list) : {};\n        }\n        return !!siblings[name];\n    };\n}\n\nfunction listToMap(list: string[]): Record<string, true> {\n    const map: Record<string, true> = {};\n    for (const key of list) {\n        map[key] = true;\n    }\n    return map;\n}\n\n// tslint:disable-next-line:no-any\nexport function isRelativePattern(obj: any): obj is IRelativePattern {\n    const rp = obj as IRelativePattern;\n\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string' && typeof rp.pathToRelative === 'function';\n}\n\n/**\n * Same as `parse`, but the ParsedExpression is guaranteed to return a Promise\n */\nexport function parseToAsync(expression: IExpression, options?: IGlobOptions): ParsedExpression {\n    // tslint:disable-next-line:no-shadowed-variable\n    const parsedExpression = parse(expression, options);\n    return (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> => {\n        const result = parsedExpression(path, basename, hasSibling);\n        return result instanceof Promise ? result : Promise.resolve(result);\n    };\n}\n\nexport function getBasenameTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allBasenames || [];\n}\n\nexport function getPathTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allPaths || [];\n}\n\nfunction parsedExpression(expression: IExpression, options: IGlobOptions): ParsedExpression {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n\n    if (!parsedPatterns.some(parsedPattern => (<ParsedExpressionPattern>parsedPattern).requiresSiblings!)) {\n        if (n === 1) {\n            return <ParsedStringPattern>parsedPatterns[0];\n        }\n\n        // tslint:disable-next-line:no-shadowed-variable\n        const resultExpression: ParsedStringPattern = function (path: string, basename: string): string | Promise<string> {\n            // tslint:disable-next-line:no-shadowed-variable\n            // tslint:disable-next-line:one-variable-per-declaration\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                // Pattern matches path\n                const result = (<ParsedStringPattern>parsedPatterns[i])(path, basename);\n                if (result) {\n                    return result;\n                }\n            }\n\n            return null!;\n        };\n\n        // tslint:disable-next-line:no-shadowed-variable\n        const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n        }\n\n        // tslint:disable-next-line:no-shadowed-variable\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n\n        return resultExpression;\n    }\n\n    const resultExpression: ParsedStringPattern = function (path: string, basename: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> {\n        let name: string = null!;\n\n        // tslint:disable-next-line:no-shadowed-variable\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = (<ParsedExpressionPattern>parsedPatterns[i]);\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!basename) {\n                    basename = paths.basename(path);\n                }\n                if (!name) {\n                    name = basename.substr(0, basename.length - paths.extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, basename, name, hasSibling!);\n            if (result) {\n                return result;\n            }\n        }\n\n        return null!;\n    };\n\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n\n    return resultExpression;\n}\n\n// tslint:disable-next-line:no-any\nfunction parseExpressionPattern(pattern: string, value: any, options: IGlobOptions): (ParsedStringPattern | ParsedExpressionPattern) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = (<SiblingClause>value).when;\n        if (typeof when === 'string') {\n            const result: ParsedExpressionPattern = (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null!;\n                }\n\n                const clausePattern = when.replace('$(basename)', name);\n                const matched = hasSibling(clausePattern);\n                return matched instanceof Promise ?\n                    matched.then(m => m ? pattern : null!) :\n                    matched ? pattern : null!;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n\n    // Expression is Anything\n    return parsedPattern;\n}\n\nfunction aggregateBasenameMatches(parsedPatterns: (ParsedStringPattern | ParsedExpressionPattern)[], result?: string): (ParsedStringPattern | ParsedExpressionPattern)[] {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!(<ParsedStringPattern>parsedPattern).basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n\n    const basenames = basenamePatterns.reduce<string[]>((all, current) => all.concat((<ParsedStringPattern>current).basenames!), []);\n    let patterns: string[];\n    if (result) {\n        patterns = [];\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    } else {\n        patterns = basenamePatterns.reduce((all, current) => all.concat((<ParsedStringPattern>current).patterns!), <string[]>[]);\n    }\n    const aggregate: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (!basename) {\n            let i: number;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === CharCode.Slash || ch === CharCode.Backslash) {\n                    break;\n                }\n            }\n            basename = path.substr(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null!;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !(<ParsedStringPattern>parsedPattern).basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { CompletionList, Range, SnippetString } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { mixin } from '../../common/types';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { CompletionContext, CompletionResultDto, Completion, CompletionDto, CompletionItemInsertTextRule } from '../../common/plugin-api-rpc-model';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CompletionAdapter {\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CompletionItem[]>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly delegate: theia.CompletionItemProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCompletionItems(resource: URI, position: Position, context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const doc = document.document;\n\n        const pos = Converter.toPosition(position);\n        return Promise.resolve(this.delegate.provideCompletionItems(doc, pos, token, context)).then(value => {\n            const id = this.cacheId++;\n\n            const toDispose = new DisposableCollection();\n            this.disposables.set(id, toDispose);\n\n            const result: CompletionResultDto = {\n                id,\n                completions: [],\n            };\n\n            let list: CompletionList;\n            if (!value) {\n                return undefined;\n            } else if (Array.isArray(value)) {\n                list = new CompletionList(value);\n            } else {\n                list = value;\n                result.incomplete = list.isIncomplete;\n            }\n\n            const wordRangeBeforePos = (doc.getWordRangeAtPosition(pos) as Range || new Range(pos, pos))\n                .with({ end: pos });\n\n            for (let i = 0; i < list.items.length; i++) {\n                const suggestion = this.convertCompletionItem(list.items[i], pos, wordRangeBeforePos, i, id);\n                if (suggestion) {\n                    result.completions.push(suggestion);\n                }\n            }\n            this.cache.set(id, list.items);\n\n            return result;\n        });\n    }\n\n    resolveCompletionItem(resource: URI, position: Position, completion: Completion, token: theia.CancellationToken): Promise<Completion> {\n        if (typeof this.delegate.resolveCompletionItem !== 'function') {\n            return Promise.resolve(completion);\n        }\n\n        const { parentId, id } = (<CompletionDto>completion);\n        const item = this.cache.has(parentId) && this.cache.get(parentId)![id];\n        if (!item) {\n            return Promise.resolve(completion);\n        }\n\n        return Promise.resolve(this.delegate.resolveCompletionItem(item, token)).then(resolvedItem => {\n\n            if (!resolvedItem) {\n                return completion;\n            }\n\n            const doc = this.documents.getDocumentData(resource)!.document;\n            const pos = Converter.toPosition(position);\n            const wordRangeBeforePos = (doc.getWordRangeAtPosition(pos) as Range || new Range(pos, pos)).with({ end: pos });\n            const newCompletion = this.convertCompletionItem(resolvedItem, pos, wordRangeBeforePos, id, parentId);\n            if (newCompletion) {\n                mixin(completion, newCompletion, true);\n            }\n\n            return completion;\n        });\n    }\n\n    async releaseCompletionItems(id: number): Promise<void> {\n        this.cache.delete(id);\n        const toDispose = this.disposables.get(id);\n        if (toDispose) {\n            toDispose.dispose();\n            this.disposables.delete(id);\n        }\n    }\n\n    private convertCompletionItem(item: theia.CompletionItem, position: theia.Position, defaultRange: theia.Range, id: number, parentId: number): CompletionDto | undefined {\n        if (typeof item.label !== 'string' || item.label.length === 0) {\n            console.warn('Invalid Completion Item -> must have at least a label');\n            return undefined;\n        }\n\n        const toDispose = this.disposables.get(parentId);\n        if (!toDispose) {\n            throw Error('DisposableCollection is missing...');\n        }\n\n        const range = item.textEdit ? item.textEdit.range : item.range || defaultRange;\n        if (range && (!range.isSingleLine || range.start.line !== position.line)) {\n            console.warn('Invalid Completion Item -> must be single line and on the same line');\n            return undefined;\n        }\n\n        let insertText = item.label;\n        let insertTextRules = item.keepWhitespace ? CompletionItemInsertTextRule.KeepWhitespace : 0;\n        if (item.textEdit) {\n            insertText = item.textEdit.newText;\n        } else if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        } else if (item.insertText instanceof SnippetString) {\n            insertText = item.insertText.value;\n            insertTextRules |= CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n\n        return {\n            id,\n            parentId,\n            label: item.label,\n            kind: Converter.fromCompletionItemKind(item.kind),\n            detail: item.detail,\n            documentation: item.documentation,\n            filterText: item.filterText,\n            sortText: item.sortText,\n            preselect: item.preselect,\n            insertText,\n            insertTextRules,\n            range: Converter.fromRange(range),\n            additionalTextEdits: item.additionalTextEdits && item.additionalTextEdits.map(Converter.fromTextEdit),\n            command: this.commands.converter.toSafeCommand(item.command, toDispose),\n            commitCharacters: item.commitCharacters\n        };\n    }\n\n    static hasResolveSupport(provider: theia.CompletionItemProvider): boolean {\n        return typeof provider.resolveCompletionItem === 'function';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { convertDiagnosticToMarkerData } from '../type-converters';\nimport { DiagnosticSeverity, MarkerSeverity } from '../types-impl';\nimport { MarkerData } from '../../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMain } from '../../common/plugin-api-rpc';\nimport URI from 'vscode-uri';\nimport { v4 } from 'uuid';\n\nexport class DiagnosticCollection implements theia.DiagnosticCollection {\n    private static DIAGNOSTICS_PRIORITY = [\n        DiagnosticSeverity.Error, DiagnosticSeverity.Warning, DiagnosticSeverity.Information, DiagnosticSeverity.Hint\n    ];\n\n    private collectionName: string;\n    private diagnosticsLimitPerResource: number;\n    private proxy: LanguagesMain;\n    private onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>;\n\n    private diagnostics: Map<string, theia.Diagnostic[]>; // uri -> diagnostics\n    private isDisposed: boolean;\n    private onDisposeCallback: (() => void) | undefined;\n\n    constructor(name: string, maxCountPerFile: number, proxy: LanguagesMain, onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>) {\n        this.collectionName = name;\n        this.diagnosticsLimitPerResource = maxCountPerFile;\n        this.proxy = proxy;\n        this.onDidChangeDiagnosticsEmitter = onDidChangeDiagnosticsEmitter;\n\n        this.diagnostics = new Map<string, theia.Diagnostic[]>();\n        this.isDisposed = false;\n        this.onDisposeCallback = undefined;\n    }\n\n    get name(): string {\n        return this.collectionName;\n    }\n\n    set(uri: theia.Uri, diagnostics: theia.Diagnostic[] | undefined): void;\n    set(entries: [theia.Uri, theia.Diagnostic[] | undefined][]): void;\n    set(arg: theia.Uri | [theia.Uri, theia.Diagnostic[] | undefined][], diagnostics?: theia.Diagnostic[] | undefined): void {\n        this.ensureNotDisposed();\n\n        if (arg instanceof URI) {\n            this.setDiagnosticsForUri(arg, diagnostics);\n        } else if (!arg) {\n            this.clear();\n        } else if (arg instanceof Array) {\n            this.setDiagnostics(arg);\n        }\n    }\n\n    private setDiagnosticsForUri(uri: URI, diagnostics?: theia.Diagnostic[]): void {\n        if (!diagnostics) {\n            this.diagnostics.delete(uri.toString());\n        } else {\n            this.diagnostics.set(uri.toString(), diagnostics);\n        }\n        this.fireDiagnosticChangeEvent(uri);\n        this.sendChangesToEditor([uri]);\n    }\n\n    private setDiagnostics(entries: [URI, theia.Diagnostic[] | undefined][]): void {\n        const delta: URI[] = [];\n\n        // clear old diagnostics for given resources\n        for (const [uri] of entries) {\n            this.diagnostics.delete(uri.toString());\n        }\n\n        for (const [uri, diagnostics] of entries) {\n            const uriString = uri.toString();\n\n            if (!diagnostics) {\n                // clear existed\n                this.diagnostics.delete(uriString);\n                delta.push(uri);\n            } else {\n                // merge with existed if any\n                const existedDiagnostics = this.diagnostics.get(uriString);\n                if (existedDiagnostics) {\n                    existedDiagnostics.push(...diagnostics);\n                } else {\n                    this.diagnostics.set(uriString, diagnostics);\n                }\n            }\n\n            if (delta.indexOf(uri) === -1) {\n                delta.push(uri);\n            }\n        }\n\n        this.fireDiagnosticChangeEvent(delta);\n        this.sendChangesToEditor(delta);\n    }\n\n    delete(uri: URI): void {\n        if (this.has(uri)) {\n            this.fireDiagnosticChangeEvent(uri);\n            this.diagnostics.delete(uri.toString());\n            this.proxy.$changeDiagnostics(this.name, [[uri.toString(), []]]);\n        }\n    }\n\n    clear(): void {\n        this.ensureNotDisposed();\n        this.fireDiagnosticChangeEvent(this.getAllResourcesUris());\n        this.diagnostics.clear();\n        this.proxy.$clearDiagnostics(this.name);\n    }\n\n    // tslint:disable-next-line:no-any\n    forEach(callback: (uri: URI, diagnostics: theia.Diagnostic[], collection: theia.DiagnosticCollection) => any, thisArg?: any): void {\n        this.ensureNotDisposed();\n        this.diagnostics.forEach((diagnostics, uriString) => {\n            const uri = URI.parse(uriString);\n            callback.apply(thisArg, [uri, this.getDiagnosticsByUri(uri), this]);\n        });\n    }\n\n    get(uri: URI): theia.Diagnostic[] | undefined {\n        this.ensureNotDisposed();\n        return this.getDiagnosticsByUri(uri);\n    }\n\n    has(uri: URI): boolean {\n        this.ensureNotDisposed();\n        return (this.diagnostics.get(uri.toString()) instanceof Array);\n    }\n\n    dispose(): void {\n        if (!this.isDisposed) {\n            if (this.onDisposeCallback) {\n                this.onDisposeCallback();\n            }\n            this.clear();\n            this.isDisposed = true;\n        }\n    }\n\n    setOnDisposeCallback(onDisposeCallback: (() => void) | undefined): void {\n        this.onDisposeCallback = onDisposeCallback;\n    }\n\n    private ensureNotDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('Diagnostic collection with name \"' + this.name + '\" is already disposed.');\n        }\n    }\n\n    private getAllResourcesUris(): string[] {\n        const resourcesUris: string[] = [];\n        this.diagnostics.forEach((diagnostics, uri) => resourcesUris.push(uri));\n        return resourcesUris;\n    }\n\n    private getDiagnosticsByUri(uri: URI): theia.Diagnostic[] | undefined {\n        const diagnostics = this.diagnostics.get(uri.toString());\n        return (diagnostics instanceof Array) ? <theia.Diagnostic[]>Object.freeze(diagnostics) : undefined;\n    }\n\n    private fireDiagnosticChangeEvent(arg: string | string[] | URI | URI[]): void {\n        this.onDidChangeDiagnosticsEmitter.fire({ uris: this.toUrisArray(arg) });\n    }\n\n    private toUrisArray(arg: string | string[] | URI | URI[]): URI[] {\n        if (arg instanceof Array) {\n            if (arg.length === 0) {\n                return [];\n            }\n\n            if (arg[0] instanceof URI) {\n                return arg as URI[];\n            } else {\n                const result: URI[] = [];\n                for (const uriString of arg as string[]) {\n                    result.push(URI.parse(uriString));\n                }\n                return result;\n            }\n        } else {\n            if (arg instanceof URI) {\n                return [arg];\n            } else {\n                return [URI.parse(arg)];\n            }\n        }\n    }\n\n    private sendChangesToEditor(uris: URI[]): void {\n        const markers: [string, MarkerData[]][] = [];\n        nextUri:\n        for (const uri of uris) {\n            const uriMarkers: MarkerData[] = [];\n            const uriDiagnostics = this.diagnostics.get(uri.toString());\n            if (uriDiagnostics) {\n                if (uriDiagnostics.length > this.diagnosticsLimitPerResource) {\n                    for (const severity of DiagnosticCollection.DIAGNOSTICS_PRIORITY) {\n                        for (const diagnostic of uriDiagnostics) {\n                            if (severity === diagnostic.severity) {\n                                if (uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)) + 1 === this.diagnosticsLimitPerResource) {\n                                    const lastMarker = uriMarkers[uriMarkers.length - 1];\n                                    uriMarkers.push({\n                                        severity: MarkerSeverity.Info,\n                                        message: 'Limit of diagnostics is reached. ' + (uriDiagnostics.length - this.diagnosticsLimitPerResource) + ' items are hidden',\n                                        startLineNumber: lastMarker.startLineNumber,\n                                        startColumn: lastMarker.startColumn,\n                                        endLineNumber: lastMarker.endLineNumber,\n                                        endColumn: lastMarker.endColumn\n                                    });\n                                    markers.push([uri.toString(), uriMarkers]);\n                                    continue nextUri;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    uriDiagnostics.forEach(diagnostic => uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)));\n                    markers.push([uri.toString(), uriMarkers]);\n                }\n            } else {\n                markers.push([uri.toString(), []]);\n            }\n        }\n\n        this.proxy.$changeDiagnostics(this.name, markers);\n    }\n}\n\nexport class Diagnostics {\n    public static MAX_DIAGNOSTICS_PER_FILE = 1000;\n    private static GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX = '_generated_diagnostic_collection_name_#';\n\n    private proxy: LanguagesMain;\n    private diagnosticCollections: Map<string, DiagnosticCollection>; // id -> diagnostic colection\n\n    private diagnosticsChangedEmitter = new Emitter<theia.DiagnosticChangeEvent>();\n    public readonly onDidChangeDiagnostics: Event<theia.DiagnosticChangeEvent> = this.diagnosticsChangedEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n\n        this.diagnosticCollections = new Map<string, DiagnosticCollection>();\n    }\n\n    getDiagnostics(resource: theia.Uri): theia.Diagnostic[];\n    getDiagnostics(): [theia.Uri, theia.Diagnostic[]][];\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        if (resource) {\n            return this.getAllDiagnisticsForResource(resource);\n        } else {\n            return this.getAllDiagnostics();\n        }\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        if (!name) {\n            do {\n                name = Diagnostics.GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX + this.getNextId();\n            } while (this.diagnosticCollections.has(name));\n        } else if (this.diagnosticCollections.has(name)) {\n            console.warn(`Diagnostic collection with name '${name}' already exist.`);\n        }\n\n        const diagnosticCollection = new DiagnosticCollection(name, Diagnostics.MAX_DIAGNOSTICS_PER_FILE, this.proxy, this.diagnosticsChangedEmitter);\n        diagnosticCollection.setOnDisposeCallback(() => {\n            this.diagnosticCollections.delete(name!);\n        });\n        this.diagnosticCollections.set(name, diagnosticCollection);\n        return diagnosticCollection;\n    }\n\n    private getNextId(): string {\n        return v4();\n    }\n\n    private getAllDiagnisticsForResource(uri: URI): theia.Diagnostic[] {\n        let result: theia.Diagnostic[] = [];\n        this.diagnosticCollections.forEach(diagnosticCollection => {\n            const diagnostics = diagnosticCollection.get(uri);\n            if (diagnostics) {\n                result = result.concat(...diagnostics);\n            }\n        });\n        return result;\n    }\n\n    private getAllDiagnostics(): [URI, theia.Diagnostic[]][] {\n        const result: [URI, theia.Diagnostic[]][] = [];\n        // Holds uri index in result array of tuples.\n        const urisIndexes = new Map<string, number>();\n        let nextIndex = 0;\n        this.diagnosticCollections.forEach(diagnosticsCollection =>\n            diagnosticsCollection.forEach((uri, diagnostics) => {\n                let uriIndex = urisIndexes.get(uri.toString());\n                if (uriIndex === undefined) {\n                    uriIndex = nextIndex++;\n                    urisIndexes.set(uri.toString(), uriIndex);\n                    result.push([uri, [...diagnostics]]);\n                } else {\n                    result[uriIndex][1] = result[uriIndex][1].concat(...diagnostics);\n                }\n            })\n        );\n        return result;\n    }\n\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L771\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { SignatureHelp, SignatureHelpContext } from '../../common/plugin-api-rpc-model';\n\nexport class SignatureHelpAdapter {\n\n    private idSequence = 1;\n    private readonly cache = new Map<number, theia.SignatureHelp>();\n\n    constructor(\n        private readonly delegate: theia.SignatureHelpProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    async provideSignatureHelp(resource: URI, position: Position, token: theia.CancellationToken, context: SignatureHelpContext): Promise<SignatureHelp | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n        const pluginHelpContext = this.reviveContext(context);\n\n        const value = await this.delegate.provideSignatureHelp(document, zeroBasedPosition, token, pluginHelpContext);\n        if (!value) {\n            return undefined;\n        }\n        const id = this.idSequence++;\n        this.cache.set(id, value);\n        return Converter.SignatureHelp.from(id, value);\n    }\n\n    private reviveContext(context: SignatureHelpContext): theia.SignatureHelpContext {\n        let activeSignatureHelp: theia.SignatureHelp | undefined = undefined;\n        if (context.activeSignatureHelp) {\n            const revivedSignatureHelp = Converter.SignatureHelp.to(context.activeSignatureHelp);\n            const saved = typeof context.activeSignatureHelp.id === 'number' && this.cache.get(context.activeSignatureHelp.id);\n            if (saved) {\n                activeSignatureHelp = saved;\n                activeSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n                activeSignatureHelp.activeParameter = revivedSignatureHelp.activeParameter;\n            } else {\n                activeSignatureHelp = revivedSignatureHelp;\n            }\n        }\n        return { ...context, activeSignatureHelp };\n    }\n\n    releaseSignatureHelp(id: number): void {\n        this.cache.delete(id);\n    }\n\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { Hover } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Range } from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class HoverAdapter {\n\n    constructor(\n        private readonly provider: theia.HoverProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    public provideHover(resource: URI, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideHover(doc, pos, token)).then(value => {\n            /* tslint:disable-next-line:no-any */\n            if (!value || !Array.isArray(value.contents) || (value.contents as Array<any>).length === 0) {\n                return undefined;\n            }\n            if (!value.range) {\n                value.range = doc.getWordRangeAtPosition(pos);\n            }\n            if (!value.range) {\n                value.range = new Range(pos, pos);\n            }\n\n            return Converter.fromHover(value);\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { DocumentHighlight } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentHighlightAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentHighlightProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDocumentHighlights(resource: URI, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDocumentHighlights(document, zeroBasedPosition, token)).then(documentHighlights => {\n            if (!documentHighlights) {\n                return undefined;\n            }\n\n            if (this.isDocumentHighlightArray(documentHighlights)) {\n                const highlights: DocumentHighlight[] = [];\n\n                for (const highlight of documentHighlights) {\n                    highlights.push(Converter.fromDocumentHighlight(highlight));\n                }\n\n                return highlights;\n            }\n        });\n    }\n\n    /* tslint:disable-next-line:no-any */\n    private isDocumentHighlightArray(array: any): array is types.DocumentHighlight[] {\n        return Array.isArray(array) && array.length > 0 && array[0] instanceof types.DocumentHighlight;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentFormattingEdits(resource: URI, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        // tslint:disable-next-line:no-any\n        return Promise.resolve(this.provider.provideDocumentFormattingEdits(doc, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, TextEdit, Range } from '../../common/plugin-api-rpc-model';\n\nexport class RangeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentRangeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentRangeFormattingEdits(resource: URI, range: Range, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = Converter.toRange(range);\n\n        // tslint:disable-next-line:no-any\n        return Promise.resolve(this.provider.provideDocumentRangeFormattingEdits(doc, ran, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class OnTypeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.OnTypeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideOnTypeFormattingEdits(resource: URI, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        // tslint:disable-next-line:no-any\n        return Promise.resolve(this.provider.provideOnTypeFormattingEdits(doc, pos, ch, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, DefinitionLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DefinitionAdapter {\n\n    constructor(\n        private readonly delegate: theia.DefinitionProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.delegate.provideDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, DefinitionLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class ImplementationAdapter {\n\n    constructor(\n        private readonly provider: theia.ImplementationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideImplementation(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideImplementation(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, DefinitionLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class TypeDefinitionAdapter {\n\n    constructor(\n        private readonly provider: theia.TypeDefinitionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideTypeDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideTypeDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport URI from 'vscode-uri/lib/umd';\nimport { Selection } from '../../common/plugin-api-rpc';\nimport { Range, CodeActionContext, CodeAction } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { Diagnostics } from './diagnostics';\nimport { CodeActionKind } from '../types-impl';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CodeActionAdapter {\n\n    constructor(\n        private readonly provider: theia.CodeActionProvider,\n        private readonly document: DocumentsExtImpl,\n        private readonly diagnostics: Diagnostics,\n        private readonly pluginId: string,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    async provideCodeAction(resource: URI, rangeOrSelection: Range | Selection,\n        context: CodeActionContext, token: theia.CancellationToken): Promise<CodeAction[] | undefined> {\n        const document = this.document.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = CodeActionAdapter._isSelection(rangeOrSelection)\n            ? <theia.Selection>Converter.toSelection(rangeOrSelection)\n            : <theia.Range>Converter.toRange(rangeOrSelection);\n        const allDiagnostics: theia.Diagnostic[] = [];\n\n        for (const diagnostic of this.diagnostics.getDiagnostics(resource)) {\n            if (ran.intersection(diagnostic.range)) {\n                allDiagnostics.push(diagnostic);\n            }\n        }\n\n        const codeActionContext: theia.CodeActionContext = {\n            diagnostics: allDiagnostics,\n            only: context.only ? new CodeActionKind(context.only) : undefined\n        };\n\n        const commandsOrActions = await this.provider.provideCodeActions(doc, ran, codeActionContext, token);\n\n        if (!Array.isArray(commandsOrActions) || commandsOrActions.length === 0) {\n            return undefined;\n        }\n        // TODO cache toDispose and dispose it\n        const toDispose = new DisposableCollection();\n        const result: CodeAction[] = [];\n        for (const candidate of commandsOrActions) {\n            if (!candidate) {\n                continue;\n            }\n            if (CodeActionAdapter._isCommand(candidate)) {\n                result.push({\n                    title: candidate.title || '',\n                    command: this.commands.converter.toSafeCommand(candidate, toDispose)\n                });\n            } else {\n                if (codeActionContext.only) {\n                    if (!candidate.kind) {\n                        /* tslint:disable-next-line:max-line-length */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n                    } else if (!codeActionContext.only.contains(candidate.kind)) {\n                        /* tslint:disable-next-line:max-line-length */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code action.`);\n                    }\n                }\n\n                result.push({\n                    title: candidate.title,\n                    command: this.commands.converter.toSafeCommand(candidate.command, toDispose),\n                    diagnostics: candidate.diagnostics && candidate.diagnostics.map(Converter.convertDiagnosticToMarkerData),\n                    edit: candidate.edit && Converter.fromWorkspaceEdit(candidate.edit),\n                    kind: candidate.kind && candidate.kind.value\n                });\n            }\n        }\n\n        return result;\n    }\n\n    // tslint:disable-next-line:no-any\n    private static _isCommand(smth: any): smth is theia.Command {\n        return typeof (<theia.Command>smth).command === 'string' || typeof (<theia.Command>smth).id === 'string';\n    }\n\n    // tslint:disable-next-line:no-any\n    private static _isSelection(obj: any): obj is Selection {\n        return (\n            obj\n            && (typeof obj.selectionStartLineNumber === 'number')\n            && (typeof obj.selectionStartColumn === 'number')\n            && (typeof obj.positionLineNumber === 'number')\n            && (typeof obj.positionColumn === 'number')\n        );\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { DocumentLink } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\n\nexport class LinkProviderAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.DocumentLink>();\n\n    constructor(\n        private readonly provider: theia.DocumentLinkProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideLinks(resource: URI, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentLinks(doc, token)).then(links => {\n            if (!Array.isArray(links)) {\n                return undefined;\n            }\n            const result: DocumentLink[] = [];\n            for (const link of links) {\n                const data = Converter.fromDocumentLink(link);\n                const id = this.cacheId++;\n                ObjectIdentifier.mixin(data, id);\n                this.cache.set(id, link);\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveLink(link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        if (typeof this.provider.resolveDocumentLink !== 'function') {\n            return Promise.resolve(undefined);\n        }\n        const id = ObjectIdentifier.of(link);\n        const item = this.cache.get(id);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n        return Promise.resolve(this.provider.resolveDocumentLink(item, token)).then(value => {\n            if (value) {\n                return Converter.fromDocumentLink(value);\n            }\n            return undefined;\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { CodeLensSymbol } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\n/** Adapts the calls from main to extension thread for providing/resolving the code lenses. */\nexport class CodeLensAdapter {\n\n    private static readonly BAD_CMD: theia.Command = { command: 'missing', title: '<<MISSING COMMAND>>' };\n\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CodeLens>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly provider: theia.CodeLensProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCodeLenses(resource: URI, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideCodeLenses(doc, token)).then(lenses => {\n            if (Array.isArray(lenses)) {\n                return lenses.map(lens => {\n                    const cacheId = this.cacheId++;\n                    const toDispose = new DisposableCollection();\n                    const lensSymbol = ObjectIdentifier.mixin({\n                        range: Converter.fromRange(lens.range)!,\n                        command: this.commands.converter.toSafeCommand(lens.command, toDispose)\n                    }, cacheId);\n                    // TODO: invalidate caches and dispose command handlers\n                    this.cache.set(cacheId, lens);\n                    this.disposables.set(cacheId, toDispose);\n                    return lensSymbol;\n                });\n            }\n            return undefined;\n        });\n    }\n\n    async resolveCodeLens(resource: URI, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        const cacheId = ObjectIdentifier.of(symbol);\n        const lens = this.cache.get(cacheId);\n        if (!lens) {\n            return undefined;\n        }\n\n        let newLens: theia.CodeLens | undefined;\n        if (typeof this.provider.resolveCodeLens === 'function' && !lens.isResolved) {\n            newLens = await this.provider.resolveCodeLens(lens, token);\n            if (token.isCancellationRequested) {\n                return undefined;\n            }\n        }\n        newLens = newLens || lens;\n\n        const disposables = this.disposables.get(cacheId);\n        if (!disposables) {\n            // already been disposed of\n            return undefined;\n        }\n        symbol.command = this.commands.converter.toSafeCommand(newLens.command ? newLens.command : CodeLensAdapter.BAD_CMD, disposables);\n        return symbol;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { DocumentSymbol, Range } from '../../common/plugin-api-rpc-model';\nimport * as types from '../types-impl';\n\n/** Adapts the calls from main to extension thread for providing the document symbols. */\nexport class OutlineAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.DocumentSymbolProvider\n    ) { }\n\n    provideDocumentSymbols(resource: URI, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentSymbols(doc, token)).then(value => {\n            if (!value || value.length === 0) {\n                return undefined;\n            }\n            if (value[0] instanceof types.DocumentSymbol) {\n                return (<types.DocumentSymbol[]>value).map(Converter.fromDocumentSymbol);\n            } else {\n                return OutlineAdapter.asDocumentSymbolTree(resource, <types.SymbolInformation[]>value);\n            }\n        });\n    }\n\n    private static asDocumentSymbolTree(resource: URI, info: types.SymbolInformation[]): DocumentSymbol[] {\n        // first sort by start (and end) and then loop over all elements\n        // and build a tree based on containment.\n        info = info.slice(0).sort((a, b) => {\n            let r = a.location.range.start.compareTo(b.location.range.start);\n            if (r === 0) {\n                r = b.location.range.end.compareTo(a.location.range.end);\n            }\n            return r;\n        });\n        const res: DocumentSymbol[] = [];\n        const parentStack: DocumentSymbol[] = [];\n        for (let i = 0; i < info.length; i++) {\n            const element = <DocumentSymbol>{\n                name: info[i].name,\n                detail: '',\n                kind: Converter.SymbolKind.fromSymbolKind(info[i].kind),\n                containerName: info[i].containerName,\n                range: Converter.fromRange(info[i].location.range),\n                selectionRange: Converter.fromRange(info[i].location.range),\n                children: []\n            };\n\n            while (true) {\n                if (parentStack.length === 0) {\n                    parentStack.push(element);\n                    res.push(element);\n                    break;\n                }\n                const parent = parentStack[parentStack.length - 1];\n                if (OutlineAdapter.containsRange(parent.range, element.range) && !OutlineAdapter.equalsRange(parent.range, element.range)) {\n                    parent.children!.push(element);\n                    parentStack.push(element);\n                    break;\n                }\n                parentStack.pop();\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\n     */\n    private static containsRange(range: Range, otherRange: Range): boolean {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Test if range `a` equals `b`.\n     */\n    private static equalsRange(a: Range, b: Range): boolean {\n        return (\n            !!a &&\n            !!b &&\n            a.startLineNumber === b.startLineNumber &&\n            a.startColumn === b.startColumn &&\n            a.endLineNumber === b.endLineNumber &&\n            a.endColumn === b.endColumn\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { ReferenceContext, Location } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { isLocationArray } from './util';\n\nexport class ReferenceAdapter {\n\n    constructor(\n        private readonly provider: theia.ReferenceProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideReferences(resource: URI, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideReferences(document, zeroBasedPosition, context, token)).then(reference => {\n            if (!reference) {\n                return undefined;\n            }\n\n            if (isLocationArray(reference)) {\n                const locations: Location[] = [];\n\n                for (const location of reference) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SymbolInformation } from 'vscode-languageserver-types';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\n\nexport class WorkspaceSymbolAdapter {\n\n    constructor(\n        private readonly provider: theia.WorkspaceSymbolProvider\n    ) { }\n\n    provideWorkspaceSymbols(query: string, token: theia.CancellationToken): Promise<SymbolInformation[]> {\n        return Promise.resolve(this.provider.provideWorkspaceSymbols(query, token)).then(workspaceSymbols => {\n            if (!workspaceSymbols) {\n                return [];\n            }\n\n            const newSymbols: SymbolInformation[] = [];\n            for (const sym of workspaceSymbols) {\n                const convertedSymbol = Converter.fromSymbolInformation(sym);\n                if (convertedSymbol) {\n                    newSymbols.push(convertedSymbol);\n                }\n            }\n            return newSymbols;\n        });\n    }\n\n    resolveWorkspaceSymbol(symbol: SymbolInformation, token: theia.CancellationToken): Promise<SymbolInformation> {\n        if (this.provider.resolveWorkspaceSymbol && typeof this.provider.resolveWorkspaceSymbol === 'function') {\n            const theiaSymbol = Converter.toSymbolInformation(symbol);\n            if (!theiaSymbol) {\n                return Promise.resolve(symbol);\n            } else {\n                return Promise.resolve(this.provider.resolveWorkspaceSymbol(theiaSymbol, token)).then(workspaceSymbol => {\n                    if (!workspaceSymbol) {\n                        return symbol;\n                    }\n\n                    const converted = Converter.fromSymbolInformation(workspaceSymbol);\n                    if (converted) {\n                        return converted;\n                    }\n                    return symbol;\n                });\n            }\n        }\n        return Promise.resolve(symbol);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport URI from 'vscode-uri/lib/umd';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\n\nexport class FoldingProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.FoldingRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideFoldingRanges(resource: URI, context: model.FoldingContext, token: theia.CancellationToken): Promise<model.FoldingRange[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideFoldingRanges(doc, context, token)).then(ranges => {\n            if (!Array.isArray(ranges)) {\n                return undefined;\n            }\n\n            return ranges.map(Converter.fromFoldingRange);\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport URI from 'vscode-uri/lib/umd';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { RawColorInfo } from '../../common/plugin-api-rpc';\nimport { ColorPresentation } from '../../common/plugin-api-rpc-model';\n\nexport class ColorProviderAdapter {\n\n    constructor(\n        private documents: DocumentsExtImpl,\n        private provider: theia.DocumentColorProvider\n    ) { }\n\n    provideColors(resource: URI, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(\n            this.provider.provideDocumentColors(doc, token)\n        ).then(colors => {\n            if (!Array.isArray(colors)) {\n                return [];\n            }\n\n            const colorInfos: RawColorInfo[] = colors.map(colorInfo => ({\n                color: Converter.fromColor(colorInfo.color),\n                range: Converter.fromRange(colorInfo.range)!\n            }));\n\n            return colorInfos;\n        });\n    }\n\n    provideColorPresentations(resource: URI, raw: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const range = Converter.toRange(raw.range);\n        const color = Converter.toColor(raw.color);\n        return Promise.resolve(\n            this.provider.provideColorPresentations(color, { document: doc, range: range }, token)\n        ).then(value => {\n            if (!Array.isArray(value)) {\n                return [];\n            }\n\n            return value.map(Converter.fromColorPresentation);\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport { WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Range } from '../types-impl';\nimport { isObject } from '../../common/types';\n\nexport class RenameAdapter {\n\n    static supportsResolving(provider: theia.RenameProvider): boolean {\n        return typeof provider.prepareRename === 'function';\n    }\n\n    constructor(\n        private readonly provider: theia.RenameProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideRenameEdits(resource: URI, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.provideRenameEdits(doc, pos, newName, token)\n        ).then(value => {\n            if (!value) {\n                return undefined;\n            }\n\n            return Converter.fromWorkspaceEdit(value);\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return <WorkspaceEditDto>{\n                    rejectReason,\n                    edits: []\n                };\n            } else {\n                return Promise.reject<WorkspaceEditDto>(error);\n            }\n        });\n    }\n\n    resolveRenameLocation(resource: URI, position: Position, token: theia.CancellationToken): Promise<model.RenameLocation & model.Rejection | undefined> {\n        if (typeof this.provider.prepareRename !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.prepareRename(doc, pos, token)\n        ).then(rangeOrLocation => {\n\n            let range: theia.Range | undefined;\n            let text: string;\n            if (rangeOrLocation && Range.isRange(rangeOrLocation)) {\n                range = rangeOrLocation;\n                text = doc.getText(rangeOrLocation);\n            } else if (rangeOrLocation && isObject(rangeOrLocation)) {\n                range = rangeOrLocation.range;\n                text = rangeOrLocation.placeholder;\n            }\n\n            if (!range) {\n                return undefined;\n            }\n            if (range.start.line > pos.line || range.end.line < pos.line) {\n                console.warn('INVALID rename location: position line must be within range start/end lines');\n                return undefined;\n            }\n            return {\n                range: Converter.fromRange(range)!,\n                text: text!\n            };\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return Promise.resolve(<model.RenameLocation & model.Rejection>{\n                    rejectReason,\n                    range: undefined!,\n                    text: undefined!\n                });\n            } else {\n                return Promise.reject(error);\n            }\n        });\n    }\n\n    /* tslint:disable-next-line:no-any */\n    private static asMessage(err: any): string | undefined {\n        if (typeof err === 'string') {\n            return err;\n        } else if (err instanceof Error && typeof err.message === 'string') {\n            return err.message;\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, DefinitionLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DeclarationAdapter {\n\n    constructor(\n        private readonly provider: theia.DeclarationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDeclaration(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDeclaration(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { PLUGIN_RPC_CONTEXT as Ext, OpenDialogOptionsMain, DialogsMain, SaveDialogOptionsMain, UploadDialogOptionsMain } from '../common/plugin-api-rpc';\nimport { OpenDialogOptions, SaveDialogOptions, UploadDialogOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport Uri from 'vscode-uri';\n\nexport class DialogsExtImpl {\n    private proxy: DialogsMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DIALOGS_MAIN);\n    }\n\n    showOpenDialog(options: OpenDialogOptions): PromiseLike<Uri[] | undefined> {\n        const optionsMain = {\n            openLabel: options.openLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            canSelectFiles: options.canSelectFiles ? options.canSelectFiles : true,\n            canSelectFolders: options.canSelectFolders ? options.canSelectFolders : false,\n            canSelectMany: options.canSelectMany,\n            filters: options.filters\n        } as OpenDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showOpenDialog(optionsMain).then(result => {\n                if (result) {\n                    const uris = [];\n                    for (let i = 0; i < result.length; i++) {\n                        const uri = Uri.parse('file://' + result[i]);\n                        uris.push(uri);\n                    }\n                    resolve(uris);\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showSaveDialog(options: SaveDialogOptions): PromiseLike<Uri | undefined> {\n        const optionsMain = {\n            saveLabel: options.saveLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            filters: options.filters\n        } as SaveDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showSaveDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(Uri.parse('file://' + result));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showUploadDialog(options: UploadDialogOptions): PromiseLike<Uri[] | undefined> {\n        const optionsMain = {\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined\n        } as UploadDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showUploadDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(result.map(uri => Uri.parse(uri)));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { PLUGIN_RPC_CONTEXT, NotificationExt, NotificationMain } from '../common/plugin-api-rpc';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { ProgressLocation } from './types-impl';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport class NotificationExtImpl implements NotificationExt {\n    private readonly proxy: NotificationMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): Promise<R> {\n        const id = new Deferred<string>();\n        const tokenSource = new CancellationTokenSource();\n        const progress = task({ report: async item => this.proxy.$updateProgress(await id.promise, item)}, tokenSource.token);\n        const title = options.title ? options.title : '';\n        const location = this.mapLocation(options.location);\n        const cancellable = options.cancellable;\n        id.resolve(await this.proxy.$startProgress({ title, location, cancellable }));\n        const stop = async () => this.proxy.$stopProgress(await id.promise);\n        const promise = Promise.all([\n            progress,\n            new Promise(resolve => setTimeout(resolve, 250)) // try to show even if it's done immediately\n        ]);\n        promise.then(stop, stop);\n        return progress;\n    }\n\n    protected mapLocation(pluginLocation: ProgressLocation): string | undefined {\n        switch (pluginLocation) {\n            case ProgressLocation.Notification: return 'notification';\n            case ProgressLocation.SourceControl: return 'scm';\n            case ProgressLocation.Window: return 'window';\n            default: return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// tslint:disable:no-any\n\nimport {\n    TreeDataProvider, TreeView, TreeViewExpansionEvent, TreeItem2, TreeItemLabel,\n    TreeViewSelectionChangeEvent, TreeViewVisibilityChangeEvent\n} from '@theia/plugin';\n// TODO: extract `@theia/util` for event, disposable, cancellation and common types\n// don't use @theia/core directly from plugin host\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Disposable as PluginDisposable, ThemeIcon } from '../types-impl';\nimport { Plugin, PLUGIN_RPC_CONTEXT, TreeViewsExt, TreeViewsMain, TreeViewItem } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl, CommandsConverter } from '../command-registry';\nimport { TreeViewSelection } from '../../common';\nimport { PluginIconPath } from '../plugin-icon-path';\n\nexport class TreeViewsExtImpl implements TreeViewsExt {\n\n    private proxy: TreeViewsMain;\n\n    private treeViews: Map<string, TreeViewExtImpl<any>> = new Map<string, TreeViewExtImpl<any>>();\n\n    constructor(rpc: RPCProtocol, readonly commandRegistry: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN);\n        commandRegistry.registerArgumentProcessor({\n            processArgument: arg => {\n                if (!TreeViewSelection.is(arg)) {\n                    return arg;\n                }\n                const { treeViewId, treeItemId } = arg;\n                const treeView = this.treeViews.get(treeViewId);\n                return treeView && treeView.getTreeItem(treeItemId);\n            }\n        });\n    }\n\n    registerTreeDataProvider<T>(plugin: Plugin, treeViewId: string, treeDataProvider: TreeDataProvider<T>): PluginDisposable {\n        const treeView = this.createTreeView(plugin, treeViewId, { treeDataProvider });\n\n        return PluginDisposable.create(() => {\n            this.treeViews.delete(treeViewId);\n            treeView.dispose();\n        });\n    }\n\n    createTreeView<T>(plugin: Plugin, treeViewId: string, options: { treeDataProvider: TreeDataProvider<T> }): TreeView<T> {\n        if (!options || !options.treeDataProvider) {\n            throw new Error('Options with treeDataProvider is mandatory');\n        }\n\n        const treeView = new TreeViewExtImpl(plugin, treeViewId, options.treeDataProvider, this.proxy, this.commandRegistry.converter);\n        this.treeViews.set(treeViewId, treeView);\n\n        return {\n            // tslint:disable-next-line:typedef\n            get onDidExpandElement() {\n                return treeView.onDidExpandElement;\n            },\n            // tslint:disable-next-line:typedef\n            get onDidCollapseElement() {\n                return treeView.onDidCollapseElement;\n            },\n            // tslint:disable-next-line:typedef\n            get selection() {\n                return treeView.selectedElements;\n            },\n            // tslint:disable-next-line:typedef\n            get onDidChangeSelection() {\n                return treeView.onDidChangeSelection;\n            },\n            // tslint:disable-next-line:typedef\n            get visible() {\n                return treeView.visible;\n            },\n            // tslint:disable-next-line:typedef\n            get onDidChangeVisibility() {\n                return treeView.onDidChangeVisibility;\n            },\n            reveal: (element: T, selectionOptions: { select?: boolean }): Thenable<void> =>\n                treeView.reveal(element, selectionOptions),\n\n            dispose: () => {\n                this.treeViews.delete(treeViewId);\n                treeView.dispose();\n            }\n        };\n    }\n\n    async $getChildren(treeViewId: string, treeItemId: string): Promise<TreeViewItem[] | undefined> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n\n        return treeView.getChildren(treeItemId);\n    }\n\n    async $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n\n        if (expanded) {\n            return treeView.onExpanded(treeItemId);\n        } else {\n            return treeView.onCollapsed(treeItemId);\n        }\n    }\n\n    async $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n        treeView.setSelection(treeItemIds);\n    }\n\n    async $setVisible(treeViewId: string, isVisible: boolean): Promise<void> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n        treeView.setVisible(isVisible);\n    }\n\n}\n\ninterface TreeExtNode<T> extends Disposable {\n    id: string\n    value?: T\n    children?: TreeExtNode<T>[]\n}\n\nclass TreeViewExtImpl<T> implements Disposable {\n\n    private readonly onDidExpandElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidExpandElement = this.onDidExpandElementEmitter.event;\n\n    private readonly onDidCollapseElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidCollapseElement = this.onDidCollapseElementEmitter.event;\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<TreeViewSelectionChangeEvent<T>>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private readonly onDidChangeVisibilityEmitter = new Emitter<TreeViewVisibilityChangeEvent>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    private readonly nodes = new Map<string, TreeExtNode<T>>();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.clearAll()),\n        this.onDidExpandElementEmitter,\n        this.onDidCollapseElementEmitter,\n        this.onDidChangeSelectionEmitter,\n        this.onDidChangeVisibilityEmitter\n    );\n\n    constructor(\n        private plugin: Plugin,\n        private treeViewId: string,\n        private treeDataProvider: TreeDataProvider<T>,\n        private proxy: TreeViewsMain,\n        readonly commandsConverter: CommandsConverter) {\n\n        proxy.$registerTreeDataProvider(treeViewId);\n        this.toDispose.push(Disposable.create(() => this.proxy.$unregisterTreeDataProvider(treeViewId)));\n\n        if (treeDataProvider.onDidChangeTreeData) {\n            treeDataProvider.onDidChangeTreeData((e: T) => {\n                proxy.$refresh(treeViewId);\n            });\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async reveal(element: T, selectionOptions?: { select?: boolean }): Promise<void> {\n        // find element id in a cache\n        let elementId;\n        this.nodes.forEach((el, id) => {\n            if (Object.is(el, element)) {\n                elementId = id;\n            }\n        });\n\n        if (elementId) {\n            return this.proxy.$reveal(this.treeViewId, elementId);\n        }\n    }\n\n    getTreeItem(treeItemId: string): T | undefined {\n        const element = this.nodes.get(treeItemId);\n        return element && element.value;\n    }\n\n    async getChildren(parentId: string): Promise<TreeViewItem[] | undefined> {\n        const parentNode = this.nodes.get(parentId);\n        const parent = parentNode && parentNode.value;\n        if (parentId && !parent) {\n            console.error(`No tree item with id '${parentId}' found.`);\n            return [];\n        }\n        this.clearChildren(parentNode);\n\n        // ask data provider for children for cached element\n        const result = await this.treeDataProvider.getChildren(parent);\n        if (result) {\n            const treeItems: TreeViewItem[] = [];\n            const promises = result.map(async (value, index) => {\n\n                // Ask data provider for a tree item for the value\n                // Data provider must return theia.TreeItem\n                const treeItem: TreeItem2 = await this.treeDataProvider.getTreeItem(value);\n                // Convert theia.TreeItem to the TreeViewItem\n\n                // Take a label\n                let label: string | undefined;\n                const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n                if (typeof treeItemLabel === 'object' && typeof treeItemLabel.label === 'string') {\n                    label = treeItemLabel.label;\n                } else {\n                    label = treeItem.label;\n                }\n\n                // Use resource URI if label is not set\n                if (label === undefined && treeItem.resourceUri) {\n                    label = treeItem.resourceUri.path.toString();\n                    label = decodeURIComponent(label);\n                    if (label.indexOf('/') >= 0) {\n                        label = label.substring(label.lastIndexOf('/') + 1);\n                    }\n                }\n\n                // Generate the ID\n                // ID is used for caching the element\n                const id = treeItem.id || `${parentId}/${index}:${label}`;\n\n                // Use item ID if item label is still not set\n                if (label === undefined) {\n                    label = treeItem.id;\n                }\n\n                const toDisposeElement = new DisposableCollection();\n                const node: TreeExtNode<T> = {\n                    id,\n                    value,\n                    dispose: () => toDisposeElement.dispose()\n                };\n                if (parentNode) {\n                    const children = parentNode.children || [];\n                    children.push(node);\n                    parentNode.children = children;\n                }\n                this.nodes.set(id, node);\n\n                let icon;\n                let iconUrl;\n                let themeIconId;\n                const { iconPath } = treeItem;\n                if (typeof iconPath === 'string' && iconPath.indexOf('fa-') !== -1) {\n                    icon = iconPath;\n                } else if (iconPath instanceof ThemeIcon) {\n                    themeIconId = iconPath.id;\n                } else {\n                    iconUrl = PluginIconPath.toUrl(<PluginIconPath | undefined>iconPath, this.plugin);\n                }\n\n                const treeViewItem = {\n                    id,\n                    label,\n                    icon,\n                    iconUrl,\n                    themeIconId,\n                    description: treeItem.description,\n                    resourceUri: treeItem.resourceUri,\n                    tooltip: treeItem.tooltip,\n                    collapsibleState: treeItem.collapsibleState,\n                    contextValue: treeItem.contextValue,\n                    command: this.commandsConverter.toSafeCommand(treeItem.command, toDisposeElement)\n                } as TreeViewItem;\n\n                treeItems.push(treeViewItem);\n            });\n\n            await Promise.all(promises);\n            return treeItems;\n        } else {\n            return undefined;\n        }\n    }\n\n    private clearChildren(parentNode?: TreeExtNode<T>): void {\n        if (parentNode) {\n            if (parentNode.children) {\n                for (const child of parentNode.children) {\n                    this.clear(child);\n                }\n            }\n            delete parentNode['children'];\n        } else {\n            this.clearAll();\n        }\n    }\n\n    private clear(node: TreeExtNode<T>): void {\n        if (node.children) {\n            for (const child of node.children) {\n                this.clear(child);\n            }\n        }\n        this.nodes.delete(node.id);\n        node.dispose();\n    }\n\n    private clearAll(): void {\n        this.nodes.forEach(node => node.dispose());\n        this.nodes.clear();\n    }\n\n    async onExpanded(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getTreeItem(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidExpandElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async onCollapsed(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getTreeItem(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidCollapseElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    private selectedItemIds = new Set<string>();\n    get selectedElements(): T[] {\n        const items: T[] = [];\n        for (const id of this.selectedItemIds) {\n            const item = this.getTreeItem(id);\n            if (item) {\n                items.push(item);\n            }\n        }\n        return items;\n    }\n\n    setSelection(selectedItemIds: string[]): void {\n        const toDelete = new Set<string>(this.selectedItemIds);\n        for (const id of this.selectedItemIds) {\n            toDelete.delete(id);\n            if (!this.selectedItemIds.has(id)) {\n                this.doSetSelection(selectedItemIds);\n                return;\n            }\n        }\n        if (toDelete.size) {\n            this.doSetSelection(selectedItemIds);\n        }\n    }\n    protected doSetSelection(selectedItemIts: string[]): void {\n        this.selectedItemIds = new Set(selectedItemIts);\n        this.onDidChangeSelectionEmitter.fire(Object.freeze({ selection: this.selectedElements }));\n    }\n\n    private _visible = false;\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    setVisible(visible: boolean): void {\n        if (visible !== this._visible) {\n            this._visible = visible;\n            this.onDidChangeVisibilityEmitter.fire(Object.freeze({ visible: this._visible }));\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { RPCProtocol } from './rpc-protocol';\nimport { PluginManager, Plugin } from './plugin-api-rpc';\nimport { interfaces } from 'inversify';\n\nexport const ExtPluginApiProvider = 'extPluginApi';\n/**\n * Provider for extension API description\n */\nexport interface ExtPluginApiProvider {\n    /**\n     * Provide API description\n     */\n    provideApi(): ExtPluginApi;\n}\n\n/**\n * Plugin API extension description.\n * This interface describes scripts for both plugin runtimes: frontend(WebWorker) and backend(NodeJs)\n */\nexport interface ExtPluginApi {\n\n    /**\n     * Path to the script which should be loaded to provide api, module should export `provideApi` function with\n     * [ExtPluginApiBackendInitializationFn](#ExtPluginApiBackendInitializationFn) signature\n     */\n    backendInitPath?: string;\n\n    /**\n     * Initialization information for frontend part of Plugin API\n     */\n    frontendExtApi?: FrontendExtPluginApi;\n}\n\nexport interface ExtPluginApiFrontendInitializationFn {\n    (rpc: RPCProtocol, plugins: Map<string, Plugin>): void;\n}\n\nexport interface ExtPluginApiBackendInitializationFn {\n    (rpc: RPCProtocol, pluginManager: PluginManager): void;\n}\n\n/**\n * Interface contains information for frontend(WebWorker) Plugin API extension initialization\n */\nexport interface FrontendExtPluginApi {\n    /**\n     * path to js file\n     */\n    initPath: string;\n    /** global variable name */\n    initVariable: string;\n    /**\n     * init function name,\n     * function should have  [ExtPluginApiFrontendInitializationFn](#ExtPluginApiFrontendInitializationFn)\n     */\n    initFunction: string;\n}\n\nexport const MainPluginApiProvider = Symbol('mainPluginApi');\n\n/**\n * Implementation should contains main(Theia) part of new namespace in Plugin API.\n * [initialize](#initialize) will be called once per plugin runtime\n */\nexport interface MainPluginApiProvider {\n    initialize(rpc: RPCProtocol, container: interfaces.Container): void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    LanguagesContributionExt,\n    LanguagesContributionMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { ConnectionExtImpl } from './connection-ext';\nimport { ChildProcess, spawn, SpawnOptions } from 'child_process';\nimport { StreamMessageReader, StreamMessageWriter, Message } from 'vscode-jsonrpc';\nimport { Connection } from '../common/connection';\nimport { Disposable } from './types-impl';\nimport { InitializeRequest, InitializeParams } from 'vscode-languageserver-protocol';\nimport { isRequestMessage } from 'vscode-ws-jsonrpc';\n\n/**\n * Implementation of languages contribution system of the plugin API.\n * It allows to register new language contribution in main side and to start language server.\n */\nexport class LanguagesContributionExtImpl implements LanguagesContributionExt {\n    private proxy: LanguagesContributionMain;\n    private serverConnections = new Map<string, Connection>();\n\n    constructor(rpc: RPCProtocol,\n        protected readonly connectionExt: ConnectionExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_CONTRIBUTION_MAIN);\n    }\n\n    /**\n     * Says main side to register new language server.\n     *\n     * @param languageServerInfo information about new language server contribution\n     */\n    registerLanguageServerProvider(languageServerInfo: theia.LanguageServerInfo): Disposable {\n        this.proxy.$registerLanguageServerProvider(languageServerInfo);\n        return Disposable.create(() => {\n            this.stop(languageServerInfo.id);\n        });\n    }\n\n    /**\n     * Stops the language server.\n     *\n     * @param id language server's id\n     */\n    stop(id: string): void {\n        const connection = this.serverConnections.get(id);\n        if (!connection) {\n            return;\n        }\n        connection.dispose();\n        this.serverConnections.delete(id);\n\n        this.proxy.$stop(id);\n    }\n\n    /**\n     * Starts language server.\n     *\n     * @param languageContribution is information about language server contribution\n     */\n    async $start(languageServerInfo: theia.LanguageServerInfo): Promise<void> {\n        const clientConnection = await this.connectionExt.ensureConnection(languageServerInfo.id);\n\n        if (!languageServerInfo.command) {\n            throw new Error('The command to start language server has to be set');\n        }\n\n        const childProcess = this.spawnProcess(languageServerInfo.command, languageServerInfo.args);\n        const serverConnection = createConnection(childProcess);\n\n        this.serverConnections.set(languageServerInfo.id, serverConnection);\n\n        clientConnection.forward(serverConnection, this.map.bind(this));\n        serverConnection.forward(clientConnection, this.map.bind(this));\n    }\n\n    private spawnProcess(command: string, args: string[], options?: SpawnOptions): ChildProcess {\n        return spawn(command,\n            args,\n            options);\n    }\n\n    private map(message: Message): Message {\n        if (isRequestMessage(message)) {\n            if (message.method === InitializeRequest.type.method) {\n                const initializeParams = message.params as InitializeParams;\n                initializeParams.processId = process.pid;\n            }\n        }\n        return message;\n    }\n}\n\nexport function createConnection(childProcess: ChildProcess): Connection {\n    const reader = new StreamMessageReader(childProcess.stdout);\n    const writer = new StreamMessageWriter(childProcess.stdin);\n    return {\n        reader, writer,\n        forward(to: Connection, map: (message: Message) => Message = message => message): void {\n            reader.listen(input => {\n                const output = map(input);\n                to.writer.write(output);\n            });\n        },\n        dispose: () => {\n            childProcess.kill();\n            reader.dispose();\n            writer.dispose();\n        }\n    };\n}\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nexport * from 'vscode-jsonrpc';\nexport * from 'vscode-jsonrpc/lib/messages';\nexport * from './disposable';\nexport * from './socket';\nexport * from './logger';\nexport * from './connection';","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Disposable } from 'vscode-jsonrpc/lib/events';\n\nexport {\n    Disposable\n}\n\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n\n    dispose(): void {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop()!.dispose();\n        }\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose(): void {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        }\n    }\n\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MessageConnection, createMessageConnection, Logger } from \"vscode-jsonrpc\";\nimport { IWebSocket } from \"./socket\";\nimport { WebSocketMessageReader } from \"./reader\";\nimport { WebSocketMessageWriter } from \"./writer\";\n\nexport function createWebSocketConnection(socket: IWebSocket, logger: Logger): MessageConnection {\n    const messageReader = new WebSocketMessageReader(socket);\n    const messageWriter = new WebSocketMessageWriter(socket);\n    const connection = createMessageConnection(messageReader, messageWriter, logger);\n    connection.onClose(() => connection.dispose());\n    return connection;\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MessageConnection, Logger } from 'vscode-jsonrpc';\nimport { createWebSocketConnection, IWebSocket } from './socket';\nimport { ConsoleLogger } from './logger';\n\nexport function listen(options: {\n    webSocket: WebSocket;\n    logger?: Logger;\n    onConnection: (connection: MessageConnection) => void;\n}) {\n    const { webSocket, onConnection } = options;\n    const logger = options.logger || new ConsoleLogger();\n    webSocket.onopen = () => {\n        const socket = toSocket(webSocket);\n        const connection = createWebSocketConnection(socket, logger);\n        onConnection(connection);\n    };\n}\n\nexport function toSocket(webSocket: WebSocket): IWebSocket {\n    return {\n        send: content => webSocket.send(content),\n        onMessage: cb => webSocket.onmessage = event => cb(event.data),\n        onError: cb => webSocket.onerror = event => {\n            if ('message' in event) {\n                cb((event as any).message)\n            }\n        },\n        onClose: cb => webSocket.onclose = event => cb(event.code, event.reason),\n        dispose: () => webSocket.close()\n    }\n}","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ConnectionExt, PLUGIN_RPC_CONTEXT, ConnectionMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PluginConnection } from '../common/connection';\nimport { PluginMessageReader } from '../common/plugin-message-reader';\nimport { PluginMessageWriter } from '../common/plugin-message-writer';\n\n/**\n * Implementation of connection system of the plugin API.\n * It allows to communicate with main side to send and read messages.\n */\nexport class ConnectionExtImpl implements ConnectionExt {\n    private proxy: ConnectionMain;\n    private connections = new Map<string, PluginConnection>();\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CONNECTION_MAIN);\n    }\n\n    /**\n     * Gets the connection between plugin by id and sends string message to it.\n     *\n     * @param id connection's id\n     * @param message incoming message\n     */\n    async $sendMessage(id: string, message: string): Promise<void> {\n        if (this.connections.has(id)) {\n            this.connections.get(id)!.reader.readMessage(message);\n        } else {\n            console.warn('It is not possible to read message. Connection missed.');\n        }\n    }\n\n    /**\n     * Instantiates a new connection by the given id.\n     * @param id the connection id\n     */\n    async $createConnection(id: string): Promise<void> {\n        await this.doEnsureConnection(id);\n    }\n\n    /**\n     * Deletes a connection.\n     * @param id the connection id\n     */\n    async $deleteConnection(id: string): Promise<void> {\n        this.connections.delete(id);\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async ensureConnection(id: string): Promise<PluginConnection> {\n        const connection = await this.doEnsureConnection(id);\n        this.proxy.$createConnection(id);\n        return connection;\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async doEnsureConnection(id: string): Promise<PluginConnection> {\n        const connection = this.connections.get(id) || await this.doCreateConnection(id);\n        this.connections.set(id, connection);\n        return connection;\n    }\n\n    protected async doCreateConnection(id: string): Promise<PluginConnection> {\n        const reader = new PluginMessageReader();\n        const writer = new PluginMessageWriter(id, this.proxy);\n        return new PluginConnection(\n            reader,\n            writer,\n            () => {\n                this.connections.delete(id);\n                this.proxy.$deleteConnection(id);\n            });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { es5ClassCompat } from './types';\nimport { AbstractMessageReader, DataCallback } from 'vscode-jsonrpc/lib/messageReader';\n\n/**\n * Support for reading string message through RPC protocol.\n */\nexport class PluginMessageReader extends es5ClassCompat(AbstractMessageReader) {\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback: DataCallback | undefined;\n    // tslint:disable-next-line:no-any\n    protected readonly events: { message?: any, error?: any }[] = [];\n\n    constructor() {\n        super();\n    }\n\n    listen(callback: DataCallback): void {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop()!;\n                if (event.message) {\n                    this.readMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            }\n        }\n    }\n\n    readMessage(message: string): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    // tslint:disable-next-line:no-any\n    fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    fireClose(): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { es5ClassCompat } from './types';\nimport { AbstractMessageWriter, MessageWriter } from 'vscode-jsonrpc/lib/messageWriter';\nimport { ConnectionMain, ConnectionExt } from './plugin-api-rpc';\nimport { Message } from 'vscode-jsonrpc';\n\n/**\n * Support for writing string message through RPC protocol.\n */\nexport class PluginMessageWriter extends es5ClassCompat(AbstractMessageWriter) implements MessageWriter {\n    constructor(\n        protected readonly id: string,\n        protected readonly proxy: ConnectionMain | ConnectionExt) {\n        super();\n    }\n\n    write(message: string): void;\n    write(message: Message): void;\n    write(arg: string | Message): void {\n        const content = JSON.stringify(arg);\n        this.proxy.$sendMessage(this.id, content);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    TasksExt,\n    TasksMain,\n    TaskDto,\n    TaskExecutionDto\n} from '../../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport * as converter from '../type-converters';\nimport { Disposable } from '../types-impl';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { TaskProviderAdapter } from './task-provider';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\n\nexport class TasksExtImpl implements TasksExt {\n    private proxy: TasksMain;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, TaskProviderAdapter>();\n    private executions = new Map<number, theia.TaskExecution>();\n\n    private readonly onDidExecuteTask: Emitter<theia.TaskStartEvent> = new Emitter<theia.TaskStartEvent>();\n    private readonly onDidTerminateTask: Emitter<theia.TaskEndEvent> = new Emitter<theia.TaskEndEvent>();\n    private readonly onDidExecuteTaskProcess: Emitter<theia.TaskProcessStartEvent> = new Emitter<theia.TaskProcessStartEvent>();\n    private readonly onDidTerminateTaskProcess: Emitter<theia.TaskProcessEndEvent> = new Emitter<theia.TaskProcessEndEvent>();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TASKS_MAIN);\n        this.fetchTaskExecutions();\n    }\n\n    get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n        return [...this.executions.values()];\n    }\n\n    get onDidStartTask(): Event<theia.TaskStartEvent> {\n        return this.onDidExecuteTask.event;\n    }\n\n    $onDidStartTask(execution: TaskExecutionDto): void {\n        this.onDidExecuteTask.fire({\n            execution: this.getTaskExecution(execution)\n        });\n    }\n\n    get onDidEndTask(): Event<theia.TaskEndEvent> {\n        return this.onDidTerminateTask.event;\n    }\n\n    $onDidEndTask(id: number): void {\n        const taskExecution = this.executions.get(id);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${id} is not found`);\n        }\n\n        this.executions.delete(id);\n\n        this.onDidTerminateTask.fire({\n            execution: taskExecution\n        });\n    }\n\n    get onDidStartTaskProcess(): Event<theia.TaskProcessStartEvent> {\n        return this.onDidExecuteTaskProcess.event;\n    }\n\n    $onDidStartTaskProcess(processId: number, executionDto: TaskExecutionDto): void {\n        this.onDidExecuteTaskProcess.fire({\n            processId,\n            execution: this.getTaskExecution(executionDto)\n        });\n    }\n\n    get onDidEndTaskProcess(): Event<theia.TaskProcessEndEvent> {\n        return this.onDidTerminateTaskProcess.event;\n    }\n\n    $onDidEndTaskProcess(exitCode: number, taskId: number): void {\n        const taskExecution = this.executions.get(taskId);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${taskId} is not found`);\n        }\n\n        this.onDidTerminateTaskProcess.fire({\n            execution: taskExecution,\n            exitCode\n        });\n    }\n\n    registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new TaskProviderAdapter(provider));\n        this.proxy.$registerTaskProvider(callId, type);\n        return this.createDisposable(callId);\n    }\n\n    async fetchTasks(filter?: theia.TaskFilter): Promise<theia.Task[]> {\n        const taskVersion = filter ? filter.version : undefined;\n        const taskType = filter ? filter.type : undefined;\n        const taskDtos = await this.proxy.$fetchTasks(taskVersion, taskType);\n        return taskDtos.map(dto => converter.toTask(dto));\n    }\n\n    async executeTask(task: theia.Task): Promise<theia.TaskExecution> {\n        const taskDto = converter.fromTask(task);\n        if (taskDto) {\n            const executionDto = await this.proxy.$executeTask(taskDto);\n            if (executionDto) {\n                const taskExecution = this.getTaskExecution(executionDto);\n                return taskExecution;\n            }\n            throw new Error('Run task config does not return after being started');\n        }\n        throw new Error('Task was not successfully transformed into a task config');\n    }\n\n    $provideTasks(handle: number, token?: theia.CancellationToken): Promise<TaskDto[] | undefined> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.provideTasks(token);\n        } else {\n            return Promise.reject(new Error('No adapter found to provide tasks'));\n        }\n    }\n\n    $resolveTask(handle: number, task: TaskDto, token?: theia.CancellationToken): Promise<TaskDto | undefined> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.resolveTask(task, token);\n        } else {\n            return Promise.reject(new Error('No adapter found to resolve task'));\n        }\n    }\n\n    private addNewAdapter(adapter: TaskProviderAdapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    private async fetchTaskExecutions(): Promise<void> {\n        try {\n            const taskExecutions = await this.proxy.$taskExecutions();\n            taskExecutions.forEach(execution => this.getTaskExecution(execution));\n        } catch (error) {\n            console.error(`Can not fetch running tasks: ${error}`);\n        }\n    }\n\n    private getTaskExecution(execution: TaskExecutionDto): theia.TaskExecution {\n        const executionId = execution.id;\n        let result: theia.TaskExecution | undefined = this.executions.get(executionId);\n        if (result) {\n            return result;\n        }\n\n        result = {\n            task: converter.toTask(execution.task),\n            terminate: () => {\n                this.proxy.$terminateTask(executionId);\n            }\n        };\n        this.executions.set(executionId, result);\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { TaskDto } from '../../common';\n\nexport class TaskProviderAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.Task>();\n\n    constructor(private readonly provider: theia.TaskProvider) { }\n\n    provideTasks(token?: theia.CancellationToken): Promise<TaskDto[] | undefined> {\n        return Promise.resolve(this.provider.provideTasks(token)).then(tasks => {\n            if (!Array.isArray(tasks)) {\n                return undefined;\n            }\n            const result: TaskDto[] = [];\n            for (const task of tasks) {\n                const data = Converter.fromTask(task);\n                if (!data) {\n                    continue;\n                }\n\n                const id = this.cacheId++;\n                ObjectIdentifier.mixin(data, id);\n                this.cache.set(id, task);\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveTask(task: TaskDto, token?: theia.CancellationToken): Promise<TaskDto | undefined> {\n        if (typeof this.provider.resolveTask !== 'function') {\n            return Promise.resolve(undefined);\n        }\n        const id = ObjectIdentifier.of(task);\n        const cached = this.cache.get(id);\n        const item = cached ? cached : Converter.toTask(task);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n\n        return Promise.resolve(this.provider.resolveTask(item, token)).then(value => {\n            if (value) {\n                return Converter.fromTask(value);\n            }\n            return undefined;\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { PLUGIN_RPC_CONTEXT, FileSystemExt, FileSystemMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { UriComponents, Schemes } from '../common/uri-components';\nimport { Disposable } from './types-impl';\n\nexport class FileSystemExtImpl implements FileSystemExt {\n\n    private readonly proxy: FileSystemMain;\n    private readonly usedSchemes = new Set<string>();\n    private readonly fsProviders = new Map<number, theia.FileSystemProvider>();\n\n    private handlePool: number = 0;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.FILE_SYSTEM_MAIN);\n        this.usedSchemes.add(Schemes.FILE);\n        this.usedSchemes.add(Schemes.UNTITLED);\n        this.usedSchemes.add(Schemes.VSCODE);\n        this.usedSchemes.add(Schemes.IN_MEMORY);\n        this.usedSchemes.add(Schemes.INTERNAL);\n        this.usedSchemes.add(Schemes.HTTP);\n        this.usedSchemes.add(Schemes.HTTPS);\n        this.usedSchemes.add(Schemes.MAILTO);\n        this.usedSchemes.add(Schemes.DATA);\n        this.usedSchemes.add(Schemes.COMMAND);\n    }\n\n    registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider): theia.Disposable {\n        if (this.usedSchemes.has(scheme)) {\n            throw new Error(`A provider for the scheme '${scheme}' is already registered`);\n        }\n\n        const handle = this.handlePool++;\n        this.usedSchemes.add(scheme);\n        this.fsProviders.set(handle, provider);\n\n        this.proxy.$registerFileSystemProvider(handle, scheme);\n\n        return new Disposable(() => {\n            this.usedSchemes.delete(scheme);\n            this.fsProviders.delete(handle);\n            this.proxy.$unregisterProvider(handle);\n        });\n    }\n\n    private checkProviderExists(handle: number): void {\n        if (!this.fsProviders.has(handle)) {\n            const err = new Error();\n            err.name = 'ENOPRO';\n            err.message = 'no provider';\n            throw err;\n        }\n    }\n\n    // forwarding calls\n\n    $readFile(handle: number, resource: UriComponents, options?: { encoding?: string }): Promise<string> {\n        this.checkProviderExists(handle);\n\n        return Promise.resolve(this.fsProviders.get(handle)!.readFile(URI.revive(resource))).then(data => {\n            const buffer = Buffer.isBuffer(data) ? data : Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n            const encoding = options === null ? undefined : options && options.encoding;\n            return buffer.toString(encoding);\n        }\n        );\n    }\n\n    $writeFile(handle: number, resource: UriComponents, content: string, options?: { encoding?: string }): Promise<void> {\n        this.checkProviderExists(handle);\n\n        const uri = URI.revive(resource);\n        const encoding = options === null ? undefined : options && options.encoding;\n        const buffer = Buffer.from(content, encoding);\n        const opts = { create: true, overwrite: true };\n        return Promise.resolve(this.fsProviders.get(handle)!.writeFile(uri, buffer, opts));\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Plugin as InternalPlugin, PLUGIN_RPC_CONTEXT, ScmExt, ScmMain, ScmCommandArg } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { UriComponents } from '../common/uri-components';\nimport URI from '@theia/core/lib/common/uri';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Command } from '../common/plugin-api-rpc-model';\n\nexport class ScmExtImpl implements ScmExt {\n    private handle: number = 0;\n    private readonly proxy: ScmMain;\n    private readonly sourceControlMap = new Map<number, SourceControlImpl>();\n    private readonly sourceControlsByPluginMap: Map<string, theia.SourceControl[]> = new Map();\n\n    constructor(readonly rpc: RPCProtocol, private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SCM_MAIN);\n        commands.registerArgumentProcessor({\n            // tslint:disable-next-line:no-any\n            processArgument: (arg: any) => {\n                if (!ScmCommandArg.is(arg)) {\n                    return arg;\n                }\n                const sourceControl = this.sourceControlMap.get(arg.sourceControlHandle);\n                if (!sourceControl) {\n                    return undefined;\n                }\n                if (typeof arg.resourceGroupHandle !== 'number') {\n                    return sourceControl;\n                }\n                const resourceGroup = sourceControl.getResourceGroup(arg.resourceGroupHandle);\n                if (typeof arg.resourceStateHandle !== 'number') {\n                    return resourceGroup;\n                }\n                return resourceGroup && resourceGroup.getResourceState(arg.resourceStateHandle);\n            }\n        });\n    }\n\n    createSourceControl(plugin: InternalPlugin, id: string, label: string, rootUri?: theia.Uri): theia.SourceControl {\n        const sourceControl = new SourceControlImpl(this.proxy, this.commands, id, label, rootUri);\n        this.sourceControlMap.set(this.handle++, sourceControl);\n        const sourceControls = this.sourceControlsByPluginMap.get(plugin.model.id) || [];\n        sourceControls.push(sourceControl);\n        this.sourceControlsByPluginMap.set(plugin.model.id, sourceControls);\n        return sourceControl;\n    }\n\n    getLastInputBox(plugin: InternalPlugin): theia.SourceControlInputBox | undefined {\n        const sourceControls = this.sourceControlsByPluginMap.get(plugin.model.id);\n        const sourceControl = sourceControls && sourceControls[sourceControls.length - 1];\n        const inputBox = sourceControl && sourceControl.inputBox;\n        return inputBox;\n    }\n\n    async $executeResourceCommand(sourceControlHandle: number, groupHandle: number, resourceHandle: number): Promise<void> {\n        const sourceControl = this.sourceControlMap.get(sourceControlHandle);\n        if (sourceControl) {\n            const group = (sourceControl as SourceControlImpl).getResourceGroup(groupHandle);\n            if (group) {\n                (group as SourceControlResourceGroupImpl).executeResourceCommand(resourceHandle);\n            }\n        }\n    }\n\n    async $provideOriginalResource(sourceControlHandle: number, uri: string, token: CancellationToken): Promise<UriComponents | undefined> {\n        const sourceControl = this.sourceControlMap.get(sourceControlHandle);\n        console.log(sourceControl);\n        if (sourceControl && sourceControl.quickDiffProvider && sourceControl.quickDiffProvider.provideOriginalResource) {\n            // tslint:disable-next-line:no-any\n            const newUri: any = new URI(uri);\n            newUri.fsPath = uri;\n            return sourceControl.quickDiffProvider.provideOriginalResource(newUri, token);\n        }\n    }\n\n    async $updateInputBox(sourceControlHandle: number, value: string): Promise<void> {\n        const sourceControl = this.sourceControlMap.get(sourceControlHandle);\n        if (sourceControl) {\n            sourceControl.inputBox.$updateValue(value);\n        }\n    }\n\n    async $setSourceControlSelection(sourceControlHandle: number, selected: boolean): Promise<void> {\n        const sourceControl = this.sourceControlMap.get(sourceControlHandle);\n        if (sourceControl) {\n            sourceControl.selected = selected;\n        }\n    }\n}\n\nclass InputBoxImpl implements theia.SourceControlInputBox {\n    private _placeholder: string;\n    private _value: string;\n\n    constructor(private proxy: ScmMain, private sourceControlHandle: number) {\n    }\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this.$updateValue(value);\n        this.proxy.$setInputBoxValue(this.sourceControlHandle, value);\n    }\n\n    $updateValue(value: string): void {\n        this._value = value;\n    }\n\n    get placeholder(): string {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string) {\n        this._placeholder = placeholder;\n        this.proxy.$setInputBoxPlaceholder(this.sourceControlHandle, placeholder);\n    }\n}\n\nclass SourceControlImpl implements theia.SourceControl {\n    private static handle: number = 0;\n    private static resourceGroupHandle: number = 0;\n    private handle = SourceControlImpl.handle++;\n\n    private readonly resourceGroupsMap = new Map<number, SourceControlResourceGroupImpl>();\n\n    private readonly _inputBox: InputBoxImpl;\n    private _count: number | undefined;\n    private _quickDiffProvider: theia.QuickDiffProvider | undefined;\n    private _commitTemplate: string | undefined;\n    private _acceptInputCommand: theia.Command | undefined;\n    private _statusBarCommands: theia.Command[] | undefined;\n    private _selected: boolean = false;\n\n    private readonly toDispose = new DisposableCollection();\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<boolean>();\n    readonly onDidChangeSelection: theia.Event<boolean> = this.onDidChangeSelectionEmitter.event;\n\n    constructor(\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private _id: string,\n        private _label: string,\n        private _rootUri?: theia.Uri\n    ) {\n        this._inputBox = new InputBoxImpl(proxy, this.handle);\n        this.proxy.$registerSourceControl(this.handle, _id, _label, _rootUri ? _rootUri.path : undefined);\n        this.toDispose.push(Disposable.create(() => this.proxy.$unregisterSourceControl(this.handle)));\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get rootUri(): theia.Uri | undefined {\n        return this._rootUri;\n    }\n\n    createResourceGroup(id: string, label: string): theia.SourceControlResourceGroup {\n        const sourceControlResourceGroup = new SourceControlResourceGroupImpl(this.proxy, this.commands, this.handle, id, label);\n        this.resourceGroupsMap.set(SourceControlImpl.resourceGroupHandle++, sourceControlResourceGroup);\n        this.toDispose.push(sourceControlResourceGroup);\n        return sourceControlResourceGroup;\n    }\n\n    get inputBox(): InputBoxImpl {\n        return this._inputBox;\n    }\n\n    get count(): number | undefined {\n        return this._count;\n    }\n\n    set count(count: number | undefined) {\n        if (this._count !== count) {\n            this._count = count;\n            this.proxy.$updateSourceControl(this.handle, { count });\n        }\n    }\n\n    get quickDiffProvider(): theia.QuickDiffProvider | undefined {\n        return this._quickDiffProvider;\n    }\n\n    set quickDiffProvider(quickDiffProvider: theia.QuickDiffProvider | undefined) {\n        this._quickDiffProvider = quickDiffProvider;\n        this.proxy.$updateSourceControl(this.handle, { hasQuickDiffProvider: !!quickDiffProvider });\n    }\n\n    get commitTemplate(): string | undefined {\n        return this._commitTemplate;\n    }\n\n    set commitTemplate(commitTemplate: string | undefined) {\n        this._commitTemplate = commitTemplate;\n        this.proxy.$updateSourceControl(this.handle, { commitTemplate });\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected toDisposeOnAcceptInputCommand = new DisposableCollection();\n\n    get acceptInputCommand(): theia.Command | undefined {\n        return this._acceptInputCommand;\n    }\n\n    set acceptInputCommand(acceptInputCommand: theia.Command | undefined) {\n        this.toDisposeOnAcceptInputCommand.dispose();\n        this.toDispose.push(this.toDisposeOnAcceptInputCommand);\n\n        this._acceptInputCommand = acceptInputCommand;\n\n        this.proxy.$updateSourceControl(this.handle, {\n            acceptInputCommand: this.commands.converter.toSafeCommand(acceptInputCommand, this.toDisposeOnAcceptInputCommand)\n        });\n    }\n\n    protected toDisposeOnStatusBarCommands = new DisposableCollection();\n\n    get statusBarCommands(): theia.Command[] | undefined {\n        return this._statusBarCommands;\n    }\n\n    set statusBarCommands(statusBarCommands: theia.Command[] | undefined) {\n        this.toDisposeOnStatusBarCommands.dispose();\n        this.toDispose.push(this.toDisposeOnStatusBarCommands);\n\n        this._statusBarCommands = statusBarCommands;\n\n        let safeStatusBarCommands: Command[] | undefined;\n        if (statusBarCommands) {\n            safeStatusBarCommands = statusBarCommands.map(statusBarCommand => this.commands.converter.toSafeCommand(statusBarCommand, this.toDisposeOnStatusBarCommands));\n        }\n        this.proxy.$updateSourceControl(this.handle, {\n            statusBarCommands: safeStatusBarCommands\n        });\n    }\n\n    getResourceGroup(handle: number): SourceControlResourceGroupImpl | undefined {\n        return this.resourceGroupsMap.get(handle);\n    }\n\n    get selected(): boolean {\n        return this._selected;\n    }\n\n    set selected(selected: boolean) {\n        this._selected = selected;\n        this.onDidChangeSelectionEmitter.fire(selected);\n    }\n}\n\nclass SourceControlResourceGroupImpl implements theia.SourceControlResourceGroup {\n\n    private static handle: number = 0;\n    private static resourceHandle: number = 0;\n    private handle = SourceControlResourceGroupImpl.handle++;\n    private _hideWhenEmpty: boolean | undefined = undefined;\n    private _resourceStates: theia.SourceControlResourceState[] = [];\n    private resourceStatesMap: Map<number, theia.SourceControlResourceState> = new Map();\n\n    constructor(\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private sourceControlHandle: number,\n        private _id: string,\n        private _label: string,\n    ) {\n        this.proxy.$registerGroup(sourceControlHandle, this.handle, _id, _label);\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    set label(label: string) {\n        this._label = label;\n        this.proxy.$updateGroupLabel(this.sourceControlHandle, this.handle, label);\n    }\n\n    get hideWhenEmpty(): boolean | undefined {\n        return this._hideWhenEmpty;\n    }\n\n    set hideWhenEmpty(hideWhenEmpty: boolean | undefined) {\n        this._hideWhenEmpty = hideWhenEmpty;\n        this.proxy.$updateGroup(this.sourceControlHandle, this.handle, { hideWhenEmpty });\n    }\n\n    get resourceStates(): theia.SourceControlResourceState[] {\n        return this._resourceStates;\n    }\n\n    set resourceStates(resources: theia.SourceControlResourceState[]) {\n        this._resourceStates = resources;\n        this.resourceStatesMap.clear();\n        this.proxy.$updateResourceState(this.sourceControlHandle, this.handle, resources.map(resourceState => {\n            const handle = SourceControlResourceGroupImpl.resourceHandle++;\n            let resourceCommand;\n            let decorations;\n            if (resourceState.command) {\n                const { command, title, tooltip } = resourceState.command;\n                resourceCommand = { id: command ? command : '', title: title ? title : '', tooltip };\n            }\n            if (resourceState.decorations) {\n                const { strikeThrough, faded, tooltip, light, dark } = resourceState.decorations;\n                const theme = light || dark;\n                let iconPath;\n                if (theme && theme.iconPath) {\n                    iconPath = typeof theme.iconPath === 'string' ? theme.iconPath : theme.iconPath.path;\n                }\n                decorations = { strikeThrough, faded, tooltip, iconPath };\n            }\n            this.resourceStatesMap.set(handle, resourceState);\n            // tslint:disable-next-line:no-any\n            const resource: any = resourceState;\n            return { handle, resourceUri: resourceState.resourceUri.path, command: resourceCommand, decorations, letter: resource.letter, colorId: resource.color.id };\n        }));\n    }\n\n    async executeResourceCommand(stateHandle: number): Promise<void> {\n        const state = this.resourceStatesMap.get(stateHandle);\n        if (state && state.command) {\n            const command = state.command;\n            if (command.command) {\n                await this.commands.$executeCommand(command.command, ...command.arguments);\n            }\n        }\n    }\n\n    getResourceState(handle: number): theia.SourceControlResourceState | undefined {\n        return this.resourceStatesMap.get(handle);\n    }\n\n    dispose(): void {\n        this.proxy.$unregisterGroup(this.sourceControlHandle, this.handle);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport {\n    DecorationData,\n    DecorationProvider,\n    DecorationsExt,\n    DecorationsMain,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { Event } from '@theia/core/lib/common/event';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport URI from 'vscode-uri';\nimport { Disposable } from './types-impl';\n\nexport class DecorationsExtImpl implements DecorationsExt {\n    static PROVIDER_ID: number = 0;\n\n    private readonly providersMap: Map<number, DecorationProvider>;\n    private readonly proxy: DecorationsMain;\n\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DECORATIONS_MAIN);\n        this.providersMap = new Map();\n    }\n\n    registerDecorationProvider(provider: theia.DecorationProvider): Disposable {\n        const id = DecorationsExtImpl.PROVIDER_ID ++;\n        provider.onDidChangeDecorations(arg => {\n            let argument;\n            if (Array.isArray(arg)) {\n                argument = arg.map(uri => uri.toString());\n            } else if (arg) {\n                argument = arg.toString();\n            }\n            this.proxy.$fireDidChangeDecorations(id, argument);\n        });\n        const providerMain: DecorationProvider = {\n            async provideDecoration(uri: string): Promise<DecorationData | undefined> {\n                const res = await provider.provideDecoration(URI.parse(uri), new CancelationTokenImpl());\n                if (res) {\n                    let color;\n                    if (res.color) {\n                        // tslint:disable:no-any\n                        const ob: any = res.color;\n                        color = { id: ob.id };\n                    }\n                    return {\n                        letter: res.letter,\n                        title: res.title,\n                        color: color,\n                        priority: res.priority,\n                        bubble: res.bubble,\n                        source: res.source\n                    };\n                }\n            }\n        };\n        this.proxy.$registerDecorationProvider(id, providerMain);\n        this.providersMap.set(id, providerMain);\n        return new Disposable( () => {\n            this.proxy.$dispose(id);\n        });\n    }\n\n    async $provideDecoration(id: number, uri: string): Promise<DecorationData | undefined> {\n        const provider = this.providersMap.get(id);\n        if (provider) {\n            return provider.provideDecoration(uri);\n        }\n    }\n}\n\nclass CancelationTokenImpl implements theia.CancellationToken {\n    readonly isCancellationRequested: boolean;\n    readonly onCancellationRequested: Event<any>;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* tslint:disable:no-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT,\n    PreferenceRegistryExt,\n    PreferenceRegistryMain,\n    PreferenceData,\n    PreferenceChangeExt\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { isObject, mixin } from '../common/types';\nimport { Configuration, ConfigurationModel } from './preferences/configuration';\nimport { WorkspaceExtImpl } from './workspace';\nimport cloneDeep = require('lodash.clonedeep');\n\nenum ConfigurationTarget {\n    Global = 1,\n    Workspace = 2,\n    WorkspaceFolder = 3\n}\n\nenum PreferenceScope {\n    Default,\n    User,\n    Workspace,\n    Folder,\n}\n\ninterface ConfigurationInspect<T> {\n    key: string;\n    defaultValue?: T;\n    globalValue?: T;\n    workspaceValue?: T;\n    workspaceFolderValue?: T;\n}\n\n// tslint:disable-next-line:no-any\nfunction lookUp(tree: any, key: string): any {\n    if (!key) {\n        return;\n    }\n\n    const parts = key.split('.');\n    let node = tree;\n    for (let i = 0; node && i < parts.length; i++) {\n        node = node[parts[i]];\n    }\n    return node;\n}\n\nexport class PreferenceRegistryExtImpl implements PreferenceRegistryExt {\n    private proxy: PreferenceRegistryMain;\n    private _preferences: Configuration;\n    private readonly _onDidChangeConfiguration = new Emitter<theia.ConfigurationChangeEvent>();\n\n    readonly onDidChangeConfiguration: Event<theia.ConfigurationChangeEvent> = this._onDidChangeConfiguration.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN);\n    }\n\n    init(data: PreferenceData): void {\n        this._preferences = this.parse(data);\n    }\n\n    $acceptConfigurationChanged(data: PreferenceData, eventData: PreferenceChangeExt[]): void {\n        this.init(data);\n        this._onDidChangeConfiguration.fire(this.toConfigurationChangeEvent(eventData));\n    }\n\n    getConfiguration(section?: string, resource?: theia.Uri | null, extensionId?: string): theia.WorkspaceConfiguration {\n        resource = resource === null ? undefined : resource;\n        const preferences = this.toReadonlyValue(section\n            ? lookUp(this._preferences.getValue(undefined, this.workspace, resource), section)\n            : this._preferences.getValue(undefined, this.workspace, resource));\n\n        const configuration: theia.WorkspaceConfiguration = {\n            has(key: string): boolean {\n                return typeof lookUp(preferences, key) !== 'undefined';\n            },\n            get: <T>(key: string, defaultValue?: T) => {\n                const result = lookUp(preferences, key);\n                if (typeof result === 'undefined') {\n                    return defaultValue;\n                } else {\n                    let clonedConfig: any = undefined;\n                    const cloneOnWriteProxy = (target: any, accessor: string): any => {\n                        let clonedTarget: any = undefined;\n                        const cloneTarget = () => {\n                            clonedConfig = clonedConfig ? clonedConfig : cloneDeep(preferences);\n                            clonedTarget = clonedTarget ? cloneTarget : lookUp(clonedConfig, accessor);\n                        };\n\n                        if (!isObject(target)) {\n                            return target;\n                        }\n                        return new Proxy(target, {\n                            get: (targ: any, prop: string) => {\n                                if (typeof prop === 'string' && prop.toLowerCase() === 'tojson') {\n                                    cloneTarget();\n                                    return () => clonedTarget;\n                                }\n                                if (clonedConfig) {\n                                    clonedTarget = cloneTarget ? cloneTarget : lookUp(clonedConfig, accessor);\n                                    return clonedTarget[prop];\n                                }\n                                const res = targ[prop];\n                                if (typeof prop === 'string') {\n                                    return cloneOnWriteProxy(res, `${accessor}.${prop}`);\n                                }\n                                return res;\n                            },\n                            set: (targ: any, prop: string, val: any) => {\n                                cloneTarget();\n                                clonedTarget[prop] = val;\n                                return true;\n                            },\n                            deleteProperty: (targ: any, prop: string) => {\n                                cloneTarget();\n                                delete clonedTarget[prop];\n                                return true;\n                            },\n                            defineProperty: (targ: any, prop: string, descr: any) => {\n                                cloneTarget();\n                                Object.defineProperty(clonedTarget, prop, descr);\n                                return true;\n                            }\n                        });\n                    };\n                    return cloneOnWriteProxy(result, key);\n                }\n            },\n            update: (key: string, value: any, arg?: ConfigurationTarget | boolean): PromiseLike<void> => {\n                key = section ? `${section}.${key}` : key;\n                const resourceStr: string | undefined = resource ? resource.toString() : undefined;\n                if (typeof value !== 'undefined') {\n                    return this.proxy.$updateConfigurationOption(arg, key, value, resourceStr);\n                } else {\n                    return this.proxy.$removeConfigurationOption(arg, key, resourceStr);\n                }\n            },\n            inspect: <T>(key: string): ConfigurationInspect<T> | undefined => {\n                key = section ? `${section}.${key}` : key;\n                resource = resource === null ? undefined : resource;\n                const result = cloneDeep(this._preferences.inspect<T>(key, this.workspace, resource));\n\n                if (!result) {\n                    return undefined;\n                }\n\n                const configInspect: ConfigurationInspect<T> = { key };\n                if (typeof result.default !== 'undefined') {\n                    configInspect.defaultValue = result.default;\n                }\n                if (typeof result.user !== 'undefined') {\n                    configInspect.globalValue = result.user;\n                }\n                if (typeof result.workspace !== 'undefined') {\n                    configInspect.workspaceValue = result.workspace;\n                }\n                if (typeof result.workspaceFolder !== 'undefined') {\n                    configInspect.workspaceFolderValue = result.workspaceFolder;\n                }\n                return configInspect;\n            }\n        };\n\n        if (typeof preferences === 'object') {\n            mixin(configuration, preferences, false);\n        }\n\n        return Object.freeze(configuration);\n    }\n\n    private toReadonlyValue(data: any): any {\n        const readonlyProxy = (target: any): any => isObject(target)\n            ? new Proxy(target, {\n                get: (targ: any, prop: string) => readonlyProxy(targ[prop]),\n                set: (targ: any, prop: string, val: any) => {\n                    throw new Error(`TypeError: Cannot assign to read only property '${prop}' of object`);\n                },\n                deleteProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot delete read only property '${prop}' of object`);\n                },\n                defineProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot define property '${prop}' of a readonly object`);\n                },\n                setPrototypeOf: (targ: any) => {\n                    throw new Error('TypeError: Cannot set prototype for a readonly object');\n                },\n                isExtensible: () => false,\n                preventExtensions: () => true\n            })\n            : target;\n        return readonlyProxy(data);\n    }\n\n    private parse(data: PreferenceData): Configuration {\n        const defaultConfiguration = this.getConfigurationModel(data[PreferenceScope.Default]);\n        const userConfiguration = this.getConfigurationModel(data[PreferenceScope.User]);\n        const workspaceConfiguration = this.getConfigurationModel(data[PreferenceScope.Workspace]);\n        const folderConfigurations = {} as { [resource: string]: ConfigurationModel };\n        Object.keys(data[PreferenceScope.Folder]).forEach(resource => {\n            folderConfigurations[resource] = this.getConfigurationModel(data[PreferenceScope.Folder][resource]);\n        });\n        return new Configuration(defaultConfiguration, userConfiguration, workspaceConfiguration, folderConfigurations);\n    }\n\n    private getConfigurationModel(data: { [key: string]: any }): ConfigurationModel {\n        if (!data) {\n            return new ConfigurationModel();\n        }\n        return new ConfigurationModel(this.parseConfigurationData(data), Object.keys(data));\n    }\n\n    private readonly OVERRIDE_PROPERTY = '\\\\[(.*)\\\\]$';\n    private readonly OVERRIDE_PROPERTY_PATTERN = new RegExp(this.OVERRIDE_PROPERTY);\n\n    private parseConfigurationData(data: { [key: string]: any }): { [key: string]: any } {\n        return Object.keys(data).reduce((result: any, key: string) => {\n            const parts = key.split('.');\n            let branch = result;\n\n            for (let i = 0; i < parts.length; i++) {\n                if (i === parts.length - 1) {\n                    branch[parts[i]] = data[key];\n                    continue;\n                }\n                if (!branch[parts[i]]) {\n                    branch[parts[i]] = {};\n                }\n                branch = branch[parts[i]];\n\n                // overridden properties should be transformed into\n                // \"[overridden_identifier]\" : {\n                //              \"property1\" : \"value1\"\n                //              \"property2\" : \"value2\"\n                //  }\n                if (i === 0 && this.OVERRIDE_PROPERTY_PATTERN.test(parts[i])) {\n                    branch[key.substring(parts[0].length + 1)] = data[key];\n                    break;\n                }\n            }\n            return result;\n        }, {});\n    }\n\n    private toConfigurationChangeEvent(eventData: PreferenceChangeExt[]): theia.ConfigurationChangeEvent {\n        return Object.freeze({\n            affectsConfiguration: (section: string, uri?: theia.Uri): boolean => {\n                // TODO respect uri\n                // TODO respect scopes shadowing\n                for (const change of eventData) {\n                    const tree = change.preferenceName\n                        .split('.')\n                        .reverse()\n                        .reduce((prevValue: any, curValue: any) => ({ [curValue]: prevValue }), change.newValue);\n                    return typeof lookUp(tree, section) !== 'undefined';\n                }\n                return false;\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { WorkspaceExtImpl } from '../workspace';\nimport { isObject } from '../../common/types';\nimport cloneDeep = require('lodash.clonedeep');\nimport URI from 'vscode-uri';\n\n/* tslint:disable:no-any */\n\nexport class Configuration {\n\n    private combinedConfig: ConfigurationModel | undefined;\n    private folderCombinedConfigs: { [resource: string]: ConfigurationModel } = {};\n\n    constructor(\n        private defaultConfiguration: ConfigurationModel,\n        private userConfiguration: ConfigurationModel,\n        private workspaceConfiguration: ConfigurationModel = new ConfigurationModel(),\n        private folderConfigurations: { [resource: string]: ConfigurationModel } = {},\n    ) { }\n\n    getValue(section: string | undefined, workspace: WorkspaceExtImpl, resource?: URI): any {\n        return this.getCombinedResourceConfig(workspace, resource).getValue(section);\n    }\n\n    inspect<C>(key: string, workspace: WorkspaceExtImpl, resource?: URI): {\n        default: C,\n        user: C,\n        workspace: C | undefined,\n        workspaceFolder: C | undefined,\n        value: C,\n    } {\n        const combinedConfiguration = this.getCombinedResourceConfig(workspace, resource);\n        const folderConfiguration = this.getFolderResourceConfig(workspace, resource);\n        return {\n            default: this.defaultConfiguration.getValue(key),\n            user: this.userConfiguration.getValue(key),\n            workspace: workspace ? this.workspaceConfiguration.getValue(key) : void 0,\n            workspaceFolder: folderConfiguration ? folderConfiguration.getValue(key) : void 0,\n            value: combinedConfiguration.getValue(key)\n        };\n    }\n\n    private getCombinedResourceConfig(workspace: WorkspaceExtImpl, resource?: URI): ConfigurationModel {\n        const combinedConfig = this.getCombinedConfig();\n        if (!workspace || !resource) {\n            return combinedConfig;\n        }\n\n        const workspaceFolder = workspace.getWorkspaceFolder(resource);\n        if (!workspaceFolder) {\n            return combinedConfig;\n        }\n\n        return this.getFolderCombinedConfig(workspaceFolder.uri.toString()) || combinedConfig;\n    }\n\n    private getCombinedConfig(): ConfigurationModel {\n        if (!this.combinedConfig) {\n            this.combinedConfig = this.defaultConfiguration.merge(this.userConfiguration, this.workspaceConfiguration);\n        }\n        return this.combinedConfig;\n    }\n\n    private getFolderCombinedConfig(folder: string): ConfigurationModel | undefined {\n        if (this.folderCombinedConfigs[folder]) {\n            return this.folderCombinedConfigs[folder];\n        }\n\n        const combinedConfig = this.getCombinedConfig();\n        const folderConfig = this.folderConfigurations[folder];\n        if (!folderConfig) {\n            return combinedConfig;\n        }\n\n        const folderCombinedConfig = combinedConfig.merge(folderConfig);\n        this.folderCombinedConfigs[folder] = folderCombinedConfig;\n\n        return folderCombinedConfig;\n    }\n\n    private getFolderResourceConfig(workspace: WorkspaceExtImpl, resource?: URI): ConfigurationModel | undefined {\n        if (!workspace || !resource) {\n            return;\n        }\n\n        const workspaceFolder = workspace.getWorkspaceFolder(resource);\n        if (!workspaceFolder) {\n            return;\n        }\n        return this.folderConfigurations[workspaceFolder.uri.toString()];\n    }\n\n}\n\nexport class ConfigurationModel {\n\n    constructor(\n        private contents: any = {},\n        private keys: string[] = [],\n    ) { }\n\n    getValue(section?: string): any {\n        if (!section) {\n            return this.contents;\n        }\n\n        const path = section.split('.');\n        let current = this.contents;\n        for (let i = 0; i < path.length; i++) {\n            if (typeof current !== 'object' || current === null) {\n                return undefined;\n            }\n            current = current[path[i]];\n        }\n        return current;\n    }\n\n    merge(...others: ConfigurationModel[]): ConfigurationModel {\n        const contents = cloneDeep(this.contents);\n        const allKeys = [...this.keys];\n\n        for (const other of others) {\n            this.mergeContents(contents, other.contents);\n            this.mergeKeys(allKeys, other.keys);\n        }\n        return new ConfigurationModel(contents, allKeys);\n    }\n\n    private mergeContents(source: any, target: any): void {\n        for (const key of Object.keys(target)) {\n            if (key in source) {\n                if (isObject(source[key]) && isObject(target[key])) {\n                    this.mergeContents(source[key], target[key]);\n                    continue;\n                }\n            }\n            source[key] = cloneDeep(target[key]);\n        }\n    }\n\n    private mergeKeys(source: string[], target: string[]): void {\n        for (const key of target) {\n            if (source.indexOf(key) === -1) {\n                source.push(key);\n            }\n        }\n    }\n\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DebugExtImpl } from '../../../plugin/node/debug/debug';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n// tslint:disable:no-any\nexport function createDebugExtStub(rpc: RPCProtocol): DebugExtImpl {\n    return new Proxy(new DebugExtImpl(rpc), {\n        apply: function (target, that, args): void {\n            console.error('Debug API works only in plugin container');\n        }\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Path } from '@theia/core/lib/common/path';\nimport { CommunicationProvider } from '@theia/debug/lib/common/debug-model';\nimport * as theia from '@theia/plugin';\nimport URI from 'vscode-uri';\nimport { Breakpoint } from '../../../common/plugin-api-rpc-model';\nimport { DebugExt, DebugMain, PLUGIN_RPC_CONTEXT as Ext, TerminalOptionsExt } from '../../../common/plugin-api-rpc';\nimport { PluginPackageDebuggersContribution } from '../../../common/plugin-protocol';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\nimport { PluginWebSocketChannel } from '../../../common/connection';\nimport { CommandRegistryImpl } from '../../command-registry';\nimport { ConnectionExtImpl } from '../../connection-ext';\nimport { Disposable } from '../../types-impl';\nimport { resolveDebugAdapterExecutable } from './plugin-debug-adapter-executable-resolver';\nimport { PluginDebugAdapterSession } from './plugin-debug-adapter-session';\nimport { connectDebugAdapter, startDebugAdapter } from './plugin-debug-adapter-starter';\nimport { PluginDebugAdapterTracker } from './plugin-debug-adapter-tracker';\nimport uuid = require('uuid');\n\n// tslint:disable:no-any\n\n// TODO: rename file to `debug-ext.ts`\n\n/**\n * It is supposed to work at node only.\n */\nexport class DebugExtImpl implements DebugExt {\n    // debug sessions by sessionId\n    private sessions = new Map<string, PluginDebugAdapterSession>();\n\n    // providers by type\n    private configurationProviders = new Map<string, Set<theia.DebugConfigurationProvider>>();\n    /**\n     * Only use internally, don't send it to the frontend. It's expensive!\n     * It's already there as a part of the plugin metadata.\n     */\n    private debuggersContributions = new Map<string, PluginPackageDebuggersContribution>();\n    private descriptorFactories = new Map<string, theia.DebugAdapterDescriptorFactory>();\n    private trackerFactories: [string, theia.DebugAdapterTrackerFactory][] = [];\n    private contributionPaths = new Map<string, string>();\n\n    private connectionExt: ConnectionExtImpl;\n    private commandRegistryExt: CommandRegistryImpl;\n\n    private proxy: DebugMain;\n\n    private readonly onDidChangeBreakpointsEmitter = new Emitter<theia.BreakpointsChangeEvent>();\n    private readonly onDidChangeActiveDebugSessionEmitter = new Emitter<theia.DebugSession | undefined>();\n    private readonly onDidTerminateDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidStartDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidReceiveDebugSessionCustomEmitter = new Emitter<theia.DebugSessionCustomEvent>();\n\n    activeDebugSession: theia.DebugSession | undefined;\n    activeDebugConsole: theia.DebugConsole;\n    breakpoints: theia.Breakpoint[] = [];\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DEBUG_MAIN);\n        this.activeDebugConsole = {\n            append: (value: string) => this.proxy.$appendToDebugConsole(value),\n            appendLine: (value: string) => this.proxy.$appendLineToDebugConsole(value)\n        };\n    }\n\n    /**\n     * Sets dependencies.\n     */\n    assistedInject(connectionExt: ConnectionExtImpl, commandRegistryExt: CommandRegistryImpl): void {\n        this.connectionExt = connectionExt;\n        this.commandRegistryExt = commandRegistryExt;\n    }\n\n    /**\n     * Registers contributions.\n     * @param pluginFolder plugin folder path\n     * @param contributions available debuggers contributions\n     */\n    registerDebuggersContributions(pluginFolder: string, contributions: PluginPackageDebuggersContribution[]): void {\n        contributions.forEach(contribution => {\n            this.contributionPaths.set(contribution.type, pluginFolder);\n            this.debuggersContributions.set(contribution.type, contribution);\n            this.proxy.$registerDebuggerContribution({\n                type: contribution.type,\n                label: contribution.label || contribution.type\n            });\n            console.log(`Debugger contribution has been registered: ${contribution.type}`);\n        });\n    }\n\n    get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n        return this.onDidReceiveDebugSessionCustomEmitter.event;\n    }\n\n    get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n        return this.onDidChangeActiveDebugSessionEmitter.event;\n    }\n\n    get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidTerminateDebugSessionEmitter.event;\n    }\n\n    get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidStartDebugSessionEmitter.event;\n    }\n\n    get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n        return this.onDidChangeBreakpointsEmitter.event;\n    }\n\n    addBreakpoints(breakpoints: theia.Breakpoint[]): void {\n        this.proxy.$addBreakpoints(breakpoints);\n    }\n\n    removeBreakpoints(breakpoints: theia.Breakpoint[]): void {\n        this.proxy.$removeBreakpoints(breakpoints);\n    }\n\n    startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration): PromiseLike<boolean> {\n        return this.proxy.$startDebugging(folder, nameOrConfiguration);\n    }\n\n    registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n        if (this.descriptorFactories.has(debugType)) {\n            throw new Error(`Descriptor factory for ${debugType} has been already registered`);\n        }\n        this.descriptorFactories.set(debugType, factory);\n        return Disposable.create(() => this.descriptorFactories.delete(debugType));\n    }\n\n    registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n        if (!factory) {\n            return Disposable.create(() => { });\n        }\n\n        this.trackerFactories.push([debugType, factory]);\n        return Disposable.create(() => {\n            this.trackerFactories = this.trackerFactories.filter(tuple => tuple[1] !== factory);\n        });\n    }\n\n    registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider): Disposable {\n        console.log(`Debug configuration provider has been registered: ${debugType}`);\n        const providers = this.configurationProviders.get(debugType) || new Set<theia.DebugConfigurationProvider>();\n        this.configurationProviders.set(debugType, providers);\n        providers.add(provider);\n\n        return Disposable.create(() => {\n            // tslint:disable-next-line:no-shadowed-variable\n            const providers = this.configurationProviders.get(debugType);\n            if (providers) {\n                providers.delete(provider);\n                if (providers.size === 0) {\n                    this.configurationProviders.delete(debugType);\n                }\n            }\n        });\n    }\n\n    async $onSessionCustomEvent(sessionId: string, event: string, body?: any): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidReceiveDebugSessionCustomEmitter.fire({ event, body, session });\n        }\n    }\n\n    async $sessionDidCreate(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidStartDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidDestroy(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidTerminateDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidChange(sessionId: string | undefined): Promise<void> {\n        this.activeDebugSession = sessionId ? this.sessions.get(sessionId) : undefined;\n        this.onDidChangeActiveDebugSessionEmitter.fire(this.activeDebugSession);\n    }\n\n    async $breakpointsDidChange(all: Breakpoint[], added: Breakpoint[], removed: Breakpoint[], changed: Breakpoint[]): Promise<void> {\n        this.breakpoints = all;\n        this.onDidChangeBreakpointsEmitter.fire({ added, removed, changed });\n    }\n\n    async $createDebugSession(debugConfiguration: theia.DebugConfiguration): Promise<string> {\n        const sessionId = uuid.v4();\n\n        const theiaSession: theia.DebugSession = {\n            id: sessionId,\n            type: debugConfiguration.type,\n            name: debugConfiguration.name,\n            configuration: debugConfiguration,\n            customRequest: (command: string, args?: any) => this.proxy.$customRequest(sessionId, command, args)\n        };\n\n        const tracker = await this.createDebugAdapterTracker(theiaSession);\n        const communicationProvider = await this.createCommunicationProvider(theiaSession, debugConfiguration);\n\n        const debugAdapterSession = new PluginDebugAdapterSession(communicationProvider, tracker, theiaSession);\n        this.sessions.set(sessionId, debugAdapterSession);\n\n        const connection = await this.connectionExt!.ensureConnection(sessionId);\n        debugAdapterSession.start(new PluginWebSocketChannel(connection));\n\n        return sessionId;\n    }\n\n    async $terminateDebugSession(sessionId: string): Promise<void> {\n        const debugAdapterSession = this.sessions.get(sessionId);\n        if (debugAdapterSession) {\n            await debugAdapterSession.stop();\n            this.sessions.delete(sessionId);\n        }\n    }\n\n    async $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return this.doGetTerminalCreationOptions(debugType);\n    }\n\n    async doGetTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return undefined;\n    }\n\n    async $provideDebugConfigurations(debugType: string, workspaceFolderUri: string | undefined): Promise<theia.DebugConfiguration[]> {\n        let result: theia.DebugConfiguration[] = [];\n\n        const providers = this.configurationProviders.get(debugType);\n        if (providers) {\n            for (const provider of providers) {\n                if (provider.provideDebugConfigurations) {\n                    result = result.concat(await provider.provideDebugConfigurations(this.toWorkspaceFolder(workspaceFolderUri)) || []);\n                }\n            }\n        }\n\n        return result;\n    }\n\n    async $resolveDebugConfigurations(debugConfiguration: theia.DebugConfiguration, workspaceFolderUri: string | undefined): Promise<theia.DebugConfiguration | undefined> {\n        let current = debugConfiguration;\n\n        for (const providers of [this.configurationProviders.get(debugConfiguration.type), this.configurationProviders.get('*')]) {\n            if (providers) {\n                for (const provider of providers) {\n                    if (provider.resolveDebugConfiguration) {\n                        try {\n                            const next = await provider.resolveDebugConfiguration(this.toWorkspaceFolder(workspaceFolderUri), current);\n                            if (next) {\n                                current = next;\n                            } else {\n                                return current;\n                            }\n                        } catch (e) {\n                            console.error(e);\n                        }\n                    }\n                }\n            }\n        }\n\n        return current;\n    }\n\n    protected async createDebugAdapterTracker(session: theia.DebugSession): Promise<theia.DebugAdapterTracker> {\n        return PluginDebugAdapterTracker.create(session, this.trackerFactories);\n    }\n\n    protected async createCommunicationProvider(session: theia.DebugSession, debugConfiguration: theia.DebugConfiguration): Promise<CommunicationProvider> {\n        const executable = await this.resolveDebugAdapterExecutable(debugConfiguration);\n        const descriptorFactory = this.descriptorFactories.get(session.type);\n        if (descriptorFactory) {\n            // 'createDebugAdapterDescriptor' is called at the start of a debug session to provide details about the debug adapter to use.\n            // These details must be returned as objects of type [DebugAdapterDescriptor](#DebugAdapterDescriptor).\n            // Currently two types of debug adapters are supported:\n            // - a debug adapter executable is specified as a command path and arguments (see [DebugAdapterExecutable](#DebugAdapterExecutable)),\n            // - a debug adapter server reachable via a communication port (see [DebugAdapterServer](#DebugAdapterServer)).\n            // If the method is not implemented the default behavior is this:\n            //   createDebugAdapter(session: DebugSession, executable: DebugAdapterExecutable) {\n            //      if (typeof session.configuration.debugServer === 'number') {\n            //         return new DebugAdapterServer(session.configuration.debugServer);\n            //      }\n            //      return executable;\n            //   }\n            //  @param session The [debug session](#DebugSession) for which the debug adapter will be used.\n            //  @param executable The debug adapter's executable information as specified in the package.json (or undefined if no such information exists).\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if ('port' in descriptor) {\n                    return connectDebugAdapter(descriptor);\n                } else {\n                    return startDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        if ('debugServer' in debugConfiguration) {\n            return connectDebugAdapter({ port: debugConfiguration.debugServer });\n        } else {\n            if (!executable) {\n                throw new Error('It is not possible to provide debug adapter executable.');\n            }\n            return startDebugAdapter(executable);\n        }\n    }\n\n    protected async resolveDebugAdapterExecutable(debugConfiguration: theia.DebugConfiguration): Promise<theia.DebugAdapterExecutable | undefined> {\n        const { type } = debugConfiguration;\n        const contribution = this.debuggersContributions.get(type);\n        if (contribution) {\n            if (contribution.adapterExecutableCommand) {\n                const executable = await this.commandRegistryExt.executeCommand<theia.DebugAdapterExecutable>(contribution.adapterExecutableCommand);\n                if (executable) {\n                    return executable;\n                }\n            } else {\n                const contributionPath = this.contributionPaths.get(type);\n                if (contributionPath) {\n                    return resolveDebugAdapterExecutable(contributionPath, contribution);\n                }\n            }\n        }\n\n        throw new Error(`It is not possible to provide debug adapter executable for '${debugConfiguration.type}'.`);\n    }\n\n    private toWorkspaceFolder(folder: string | undefined): theia.WorkspaceFolder | undefined {\n        if (!folder) {\n            return undefined;\n        }\n\n        const uri = URI.parse(folder);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: 0\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as path from 'path';\nimport * as theia from '@theia/plugin';\nimport { PlatformSpecificAdapterContribution, PluginPackageDebuggersContribution } from '../../../common';\nimport { isWindows, isOSX } from '@theia/core/lib/common/os';\n\n/**\n * Resolves [DebugAdapterExecutable](#DebugAdapterExecutable) based on contribution.\n */\nexport async function resolveDebugAdapterExecutable(\n    pluginPath: string, debuggerContribution: PluginPackageDebuggersContribution): Promise<theia.DebugAdapterExecutable | undefined> {\n    const info = toPlatformInfo(debuggerContribution);\n    let program = (info && info.program || debuggerContribution.program);\n    if (!program) {\n        return undefined;\n    }\n    program = path.join(pluginPath, program);\n    const programArgs = info && info.args || debuggerContribution.args || [];\n    let runtime = info && info.runtime || debuggerContribution.runtime;\n    if (runtime && runtime.indexOf('./') === 0) {\n        runtime = path.join(pluginPath, runtime);\n    }\n    const runtimeArgs = info && info.runtimeArgs || debuggerContribution.runtimeArgs || [];\n    const command = runtime ? runtime : program;\n    const args = runtime ? [...runtimeArgs, program, ...programArgs] : programArgs;\n    return {\n        command,\n        args\n    };\n}\n\nfunction toPlatformInfo(executable: PluginPackageDebuggersContribution): PlatformSpecificAdapterContribution | undefined {\n    if (isWindows && !process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432')) {\n        return executable.winx86 || executable.win || executable.windows;\n    }\n    if (isWindows) {\n        return executable.win || executable.windows;\n    }\n    if (isOSX) {\n        return executable.osx;\n    }\n    return executable.linux;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { CommunicationProvider } from '@theia/debug/lib/common/debug-model';\nimport { DebugAdapterSessionImpl } from '@theia/debug/lib/node/debug-adapter-session';\nimport * as theia from '@theia/plugin';\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\n\n// tslint:disable: no-any\n\n/**\n * Server debug adapter session.\n */\nexport class PluginDebugAdapterSession extends DebugAdapterSessionImpl implements theia.DebugSession {\n    readonly type: string;\n    readonly name: string;\n    readonly configuration: theia.DebugConfiguration;\n\n    constructor(\n        protected readonly communicationProvider: CommunicationProvider,\n        protected readonly tracker: theia.DebugAdapterTracker,\n        protected readonly theiaSession: theia.DebugSession) {\n\n        super(theiaSession.id, communicationProvider);\n\n        this.type = theiaSession.type;\n        this.name = theiaSession.name;\n        this.configuration = theiaSession.configuration;\n    }\n\n    async start(channel: IWebSocket): Promise<void> {\n        if (this.tracker.onWillStartSession) {\n            this.tracker.onWillStartSession();\n        }\n        await super.start(channel);\n    }\n\n    async stop(): Promise<void> {\n        if (this.tracker.onWillStopSession) {\n            this.tracker.onWillStopSession();\n        }\n        await super.stop();\n    }\n\n    async customRequest(command: string, args?: any): Promise<any> {\n        return this.theiaSession.customRequest(command, args);\n    }\n\n    protected onDebugAdapterError(error: Error): void {\n        if (this.tracker.onError) {\n            this.tracker.onError(error);\n        }\n        super.onDebugAdapterError(error);\n    }\n\n    protected send(message: string): void {\n        try {\n            super.send(message);\n        } finally {\n            if (this.tracker.onDidSendMessage) {\n                this.tracker.onDidSendMessage(message);\n            }\n        }\n    }\n\n    protected write(message: string): void {\n        if (this.tracker.onWillReceiveMessage) {\n            this.tracker.onWillReceiveMessage(message);\n        }\n        super.write(message);\n    }\n\n    protected onDebugAdapterExit(exitCode: number, signal: string | undefined): void {\n        if (this.tracker.onExit) {\n            this.tracker.onExit(exitCode, signal);\n        }\n        super.onDebugAdapterExit(exitCode, signal);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Some entities copied and modified from https://github.com/Microsoft/vscode-debugadapter-node/blob/master/adapter/src/protocol.ts\n\nimport {\n    CommunicationProvider,\n    DebugAdapterSession,\n} from '../common/debug-model';\nimport { DebugProtocol } from 'vscode-debugprotocol';\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\n\n/**\n * [DebugAdapterSession](#DebugAdapterSession) implementation.\n */\nexport class DebugAdapterSessionImpl implements DebugAdapterSession {\n\n    private static TWO_CRLF = '\\r\\n\\r\\n';\n    private static CONTENT_LENGTH = 'Content-Length';\n\n    private readonly toDispose = new DisposableCollection();\n    private channel: IWebSocket | undefined;\n    private contentLength: number;\n    private buffer: Buffer;\n\n    constructor(\n        readonly id: string,\n        protected readonly communicationProvider: CommunicationProvider\n    ) {\n        this.contentLength = -1;\n        this.buffer = Buffer.alloc(0);\n        this.toDispose.pushAll([\n            this.communicationProvider,\n            Disposable.create(() => this.write(JSON.stringify({ seq: -1, type: 'request', command: 'disconnect' }))),\n            Disposable.create(() => this.write(JSON.stringify({ seq: -1, type: 'request', command: 'terminate' })))\n        ]);\n    }\n\n    async start(channel: IWebSocket): Promise<void> {\n        if (this.channel) {\n            throw new Error('The session has already been started, id: ' + this.id);\n        }\n        this.channel = channel;\n        this.channel.onMessage((message: string) => this.write(message));\n        this.channel.onClose(() => this.channel = undefined);\n\n        this.communicationProvider.output.on('data', (data: Buffer) => this.handleData(data));\n        this.communicationProvider.output.on('close', () => this.onDebugAdapterExit(1, undefined)); // FIXME pass a proper exit code\n        this.communicationProvider.output.on('error', error => this.onDebugAdapterError(error));\n        this.communicationProvider.input.on('error', error => this.onDebugAdapterError(error));\n    }\n\n    protected onDebugAdapterExit(exitCode: number, signal: string | undefined): void {\n        const event: DebugProtocol.ExitedEvent = {\n            type: 'event',\n            event: 'exited',\n            seq: -1,\n            body: {\n                exitCode\n            }\n        };\n        this.send(JSON.stringify(event));\n    }\n\n    protected onDebugAdapterError(error: Error): void {\n        const event: DebugProtocol.Event = {\n            type: 'event',\n            event: 'error',\n            seq: -1,\n            body: error\n        };\n        this.send(JSON.stringify(event));\n    }\n\n    protected handleData(data: Buffer): void {\n        this.buffer = Buffer.concat([this.buffer, data]);\n\n        while (true) {\n            if (this.contentLength >= 0) {\n                if (this.buffer.length >= this.contentLength) {\n                    const message = this.buffer.toString('utf8', 0, this.contentLength);\n                    this.buffer = this.buffer.slice(this.contentLength);\n                    this.contentLength = -1;\n\n                    if (message.length > 0) {\n                        this.send(message);\n                    }\n                    continue;\t// there may be more complete messages to process\n                }\n            } else {\n                let idx = this.buffer.indexOf(DebugAdapterSessionImpl.CONTENT_LENGTH);\n                if (idx > 0) {\n                    // log unrecognized output\n                    const output = this.buffer.slice(0, idx);\n                    console.log(output.toString('utf-8'));\n\n                    this.buffer = this.buffer.slice(idx);\n                }\n\n                idx = this.buffer.indexOf(DebugAdapterSessionImpl.TWO_CRLF);\n                if (idx !== -1) {\n                    const header = this.buffer.toString('utf8', 0, idx);\n                    const lines = header.split('\\r\\n');\n                    for (let i = 0; i < lines.length; i++) {\n                        const pair = lines[i].split(/: +/);\n                        if (pair[0] === DebugAdapterSessionImpl.CONTENT_LENGTH) {\n                            this.contentLength = +pair[1];\n                        }\n                    }\n                    this.buffer = this.buffer.slice(idx + DebugAdapterSessionImpl.TWO_CRLF.length);\n                    continue;\n                }\n            }\n            break;\n        }\n    }\n\n    protected send(message: string): void {\n        if (this.channel) {\n            this.channel.send(message);\n        }\n    }\n\n    protected write(message: string): void {\n        this.communicationProvider.input.write(`Content-Length: ${Buffer.byteLength(message, 'utf8')}\\r\\n\\r\\n${message}`, 'utf8');\n    }\n\n    async stop(): Promise<void> {\n        this.toDispose.dispose();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as net from 'net';\nimport * as theia from '@theia/plugin';\nimport { CommunicationProvider, DebugAdapterForkExecutable } from '@theia/debug/lib/common/debug-model';\nimport { ChildProcess, spawn, fork } from 'child_process';\n\n/**\n * Starts debug adapter process.\n */\nexport function startDebugAdapter(executable: theia.DebugAdapterExecutable): CommunicationProvider {\n    // tslint:disable-next-line: no-any\n    const options: any = { stdio: ['pipe', 'pipe', 2] };\n\n    if (executable.options) {\n        options.cwd = executable.options.cwd;\n\n        // The additional environment of the executed program or shell. If omitted\n        // the parent process' environment is used. If provided it is merged with\n        // the parent process' environment.\n        options.env = Object.assign({}, process.env);\n        Object.assign(options.env, executable.options.env);\n    }\n\n    let childProcess: ChildProcess;\n    if ('command' in executable) {\n        const { command, args } = executable;\n        childProcess = spawn(command, args, options);\n    } else if ('modulePath' in executable) {\n        const forkExecutable = <DebugAdapterForkExecutable>executable;\n        const { modulePath, args } = forkExecutable;\n        options.stdio.push('ipc');\n        childProcess = fork(modulePath, args, options);\n    } else {\n        throw new Error(`It is not possible to launch debug adapter with the command: ${JSON.stringify(executable)}`);\n    }\n\n    return {\n        input: childProcess.stdin,\n        output: childProcess.stdout,\n        dispose: () => childProcess.kill()\n    };\n}\n\n/**\n * Connects to a remote debug server.\n */\nexport function connectDebugAdapter(server: theia.DebugAdapterServer): CommunicationProvider {\n    const socket = net.createConnection(server.port, server.host);\n    return {\n        input: socket,\n        output: socket,\n        dispose: () => socket.end()\n    };\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// tslint:disable: no-any\n\nimport * as theia from '@theia/plugin';\n\nexport class PluginDebugAdapterTracker implements theia.DebugAdapterTracker {\n    constructor(protected readonly trackers: theia.DebugAdapterTracker[]) { }\n\n    static async create(session: theia.DebugSession, trackerFactories: [string, theia.DebugAdapterTrackerFactory][]): Promise<PluginDebugAdapterTracker> {\n        const trackers: theia.DebugAdapterTracker[] = [];\n\n        const factories = trackerFactories.filter(tuple => tuple[0] === '*' || tuple[0] === session.type).map(tuple => tuple[1]);\n        for (const factory of factories) {\n            const tracker = await factory.createDebugAdapterTracker(session);\n            if (tracker) {\n                trackers.push(tracker);\n            }\n        }\n\n        return new PluginDebugAdapterTracker(trackers);\n    }\n\n    onWillStartSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStartSession) {\n                tracker.onWillStartSession();\n            }\n        });\n    }\n\n    onWillReceiveMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillReceiveMessage) {\n                tracker.onWillReceiveMessage(message);\n            }\n        });\n    }\n\n    onDidSendMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onDidSendMessage) {\n                tracker.onDidSendMessage(message);\n            }\n        });\n    }\n\n    onWillStopSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStopSession) {\n                tracker.onWillStopSession();\n            }\n        });\n    }\n\n    onError(error: Error): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onError) {\n                tracker.onError(error);\n            }\n        });\n    }\n\n    onExit(code: number | undefined, signal: string | undefined): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onExit) {\n                tracker.onExit(code, signal);\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EditorsAndDocumentsExt, EditorsAndDocumentsDelta, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { TextEditorExt } from './text-editor';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DocumentDataExt } from './document-data';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\nimport { dispose } from '../common/disposable-util';\nimport URI from 'vscode-uri';\n\nexport class EditorsAndDocumentsExtImpl implements EditorsAndDocumentsExt {\n    private activeEditorId: string | undefined;\n\n    private readonly _onDidAddDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidRemoveDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<TextEditorExt[]>();\n    private readonly _onDidChangeActiveTextEditors = new Emitter<TextEditorExt | undefined>();\n\n    readonly onDidAddDocuments: Event<DocumentDataExt[]> = this._onDidAddDocuments.event;\n    readonly onDidRemoveDocuments: Event<DocumentDataExt[]> = this._onDidRemoveDocuments.event;\n    readonly onDidChangeVisibleTextEditors: Event<TextEditorExt[]> = this._onDidChangeVisibleTextEditors.event;\n    readonly onDidChangeActiveTextEditor: Event<TextEditorExt | undefined> = this._onDidChangeActiveTextEditors.event;\n\n    private readonly documents = new Map<string, DocumentDataExt>();\n    private readonly editors = new Map<string, TextEditorExt>();\n\n    constructor(private readonly rpc: RPCProtocol) {\n    }\n\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void {\n        const removedDocuments = new Array<DocumentDataExt>();\n        const addedDocuments = new Array<DocumentDataExt>();\n        const removedEditors = new Array<TextEditorExt>();\n\n        if (delta.removedDocuments) {\n            for (const uriComponent of delta.removedDocuments) {\n                const uri = URI.revive(uriComponent);\n                const id = uri.toString();\n                const data = this.documents.get(id);\n                this.documents.delete(id);\n                if (data) {\n                    removedDocuments.push(data);\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const data of delta.addedDocuments) {\n                const resource = URI.revive(data.uri);\n                ok(!this.documents.has(resource.toString()), `document '${resource}' already exists!`);\n                const documentData = new DocumentDataExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN),\n                    resource,\n                    data.lines,\n                    data.EOL,\n                    data.modeId,\n                    data.versionId,\n                    data.isDirty\n                );\n                this.documents.set(resource.toString(), documentData);\n                addedDocuments.push(documentData);\n            }\n        }\n\n        if (delta.removedEditors) {\n            for (const id of delta.removedEditors) {\n                const editor = this.editors.get(id);\n                this.editors.delete(id);\n                if (editor) {\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const data of delta.addedEditors) {\n                const resource = URI.revive(data.documentUri);\n                ok(this.documents.has(resource.toString()), `document '${resource}' doesn't exist`);\n                ok(!this.editors.has(data.id), `editor '${data.id}' already exists!`);\n\n                const documentData = this.documents.get(resource.toString());\n                const editor = new TextEditorExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN),\n                    data.id,\n                    documentData!,\n                    data.selections.map(Converter.toSelection),\n                    data.options,\n                    data.visibleRanges.map(Converter.toRange),\n                    Converter.toViewColumn(data.editorPosition)\n                );\n                this.editors.set(data.id, editor);\n            }\n        }\n\n        if (this.activeEditorId && delta.removedEditors && delta.removedEditors.indexOf(this.activeEditorId) !== -1 && this.editors.size !== 0) {\n            // to be compatible with VSCode, when active editor is closed onDidChangeActiveTextEditor\n            // should be trigerred with undefined before next editor, if any, become active.\n            this._onDidChangeActiveTextEditors.fire(undefined);\n        }\n\n        if (delta.removedDocuments) {\n            this._onDidRemoveDocuments.fire(removedDocuments);\n        }\n\n        dispose(removedDocuments);\n        dispose(removedEditors);\n\n        if (delta.addedDocuments) {\n            this._onDidAddDocuments.fire(addedDocuments);\n        }\n\n        if ((delta.removedEditors && delta.removedEditors.length > 0) || (delta.addedEditors && delta.addedEditors.length > 0)) {\n            this._onDidChangeVisibleTextEditors.fire(this.allEditors());\n        }\n\n        if (delta.newActiveEditor !== undefined) {\n            ok(delta.newActiveEditor === null || this.editors.has(delta.newActiveEditor), `active editor '${delta.newActiveEditor}' doesn't exist`);\n            // do not fire event if focus returns to the same editor\n            if (delta.newActiveEditor !== this.activeEditorId) {\n                this.activeEditorId = delta.newActiveEditor;\n                this._onDidChangeActiveTextEditors.fire(this.activeEditor());\n            }\n        } else if (this.editors.size === 0 && delta.removedEditors) {\n            this.activeEditorId = undefined;\n            this._onDidChangeActiveTextEditors.fire(undefined);\n        }\n    }\n\n    allEditors(): TextEditorExt[] {\n        const result = new Array<TextEditorExt>();\n        this.editors.forEach(editor => result.push(editor));\n        return result;\n    }\n\n    activeEditor(): TextEditorExt | undefined {\n        if (!this.activeEditorId) {\n            return undefined;\n        } else {\n            return this.editors.get(this.activeEditorId);\n        }\n    }\n\n    allDocuments(): DocumentDataExt[] {\n        const result = new Array<DocumentDataExt>();\n        this.documents.forEach(data => result.push(data));\n        return result;\n    }\n\n    getDocument(uri: string): DocumentDataExt | undefined {\n        return this.documents.get(uri);\n    }\n\n    getEditor(id: string): TextEditorExt | undefined {\n        return this.editors.get(id);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { TextEditorConfiguration, TextEditorsMain, TextEditorConfigurationUpdate, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { Range as ApiRange } from '../common/plugin-api-rpc-model';\nimport { Selection, Range, TextEditorLineNumbersStyle, SnippetString, Position, TextEditorRevealType, EndOfLine } from './types-impl';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt } from './document-data';\nimport { readonly, illegalArgument } from '../common/errors';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\n\nexport class TextEditorExt implements theia.TextEditor {\n    private _viewColumn: theia.ViewColumn | undefined;\n    private _document: DocumentDataExt;\n    private _options: TextEditorOptionsExt;\n    private disposed = false;\n    constructor(\n        private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        document: DocumentDataExt,\n        private _selections: Selection[],\n        options: TextEditorConfiguration,\n        private _visibleRanges: Range[],\n        viewColumn: theia.ViewColumn | undefined) {\n        this._options = new TextEditorOptionsExt(proxy, id, options);\n        this._viewColumn = viewColumn;\n        this._document = document;\n    }\n\n    get document(): theia.TextDocument {\n        return this._document.document;\n    }\n\n    set document(doc) {\n        throw readonly('Document');\n    }\n\n    acceptViewColumn(val: theia.ViewColumn): void {\n        this._viewColumn = val;\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n\n    get options(): theia.TextEditorOptions {\n        return this._options;\n    }\n\n    set options(val: theia.TextEditorOptions) {\n        if (!this.disposed) {\n            this._options.assign(val);\n        }\n    }\n\n    acceptOptions(options: TextEditorConfiguration): void {\n        ok(!this.disposed);\n        this._options.accept(options);\n    }\n\n    get selection(): Selection {\n        return this._selections && this._selections[0];\n    }\n\n    set selection(val: Selection) {\n        if (!(val instanceof Selection)) {\n            throw illegalArgument('selection');\n        }\n        this._selections = [val];\n        this.trySetSelection();\n    }\n\n    private trySetSelection(): Promise<theia.TextEditor | undefined> {\n        const selection = this._selections.map(Converter.fromSelection);\n        return this.runOnProxy(() => this.proxy.$trySetSelections(this.id, selection));\n    }\n\n    get selections(): Selection[] {\n        return this._selections;\n    }\n\n    set selections(val: Selection[]) {\n        if (!Array.isArray(val) || val.some(s => !(s instanceof Selection))) {\n            throw illegalArgument('selections');\n        }\n\n        this._selections = val;\n        this.trySetSelection();\n    }\n\n    acceptSelections(selections: Selection[]): void {\n        ok(!this.disposed);\n        this._selections = selections;\n    }\n\n    get visibleRanges(): Range[] {\n        return this._visibleRanges;\n    }\n\n    set visibleRanges(val: Range[]) {\n        throw readonly('visibleRanges');\n    }\n\n    acceptVisibleRanges(range: Range[]): void {\n        ok(!this.disposed);\n        this._visibleRanges = range;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        return this._viewColumn;\n    }\n\n    set viewColumn(value) {\n        throw readonly('viewColumn');\n    }\n\n    _acceptViewColumn(value: theia.ViewColumn): void {\n        ok(!this.disposed);\n        this._viewColumn = value;\n    }\n\n    // tslint:disable-next-line:max-line-length\n    edit(callback: (editBuilder: theia.TextEditorEdit) => void, options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#edit not possible on closed editor'));\n        }\n\n        const edit = new TextEditorEdit(this._document.document, options);\n        callback(edit);\n        return this.applyEdit(edit);\n    }\n    // tslint:disable-next-line:max-line-length\n    insertSnippet(snippet: SnippetString, location?: Position | Range | Position[] | Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#insertSnippet not possible on closed editors'));\n        }\n        let ranges: ApiRange[];\n\n        if (!location || (Array.isArray(location) && location.length === 0)) {\n            ranges = this._selections.map(s => Converter.fromRange(s)!);\n\n        } else if (location instanceof Position) {\n            const { lineNumber, column } = Converter.fromPosition(location);\n            ranges = [{ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column }];\n\n        } else if (location instanceof Range) {\n            ranges = [Converter.fromRange(location)!];\n        } else {\n            ranges = [];\n            for (const posOrRange of location) {\n                if (posOrRange instanceof Range) {\n                    ranges.push(Converter.fromRange(posOrRange)!);\n                } else {\n                    const { lineNumber, column } = Converter.fromPosition(posOrRange);\n                    ranges.push({ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column });\n                }\n            }\n        }\n\n        return this.proxy.$tryInsertSnippet(this.id, snippet.value, ranges, options);\n    }\n    setDecorations(decorationType: theia.TextEditorDecorationType, rangesOrOptions: Range[] | theia.DecorationOptions[]): void {\n        this.runOnProxy(() => {\n            if (Converter.isDecorationOptionsArr(rangesOrOptions)) {\n                return this.proxy.$trySetDecorations(\n                    this.id,\n                    decorationType.key,\n                    Converter.fromRangeOrRangeWithMessage(rangesOrOptions)\n                );\n            } else {\n                const ranges: number[] = new Array<number>(4 * rangesOrOptions.length);\n                const len = rangesOrOptions.length;\n                for (let i = 0; i < len; i++) {\n                    const range = rangesOrOptions[i];\n                    ranges[4 * i] = range.start.line + 1;\n                    ranges[4 * i + 1] = range.start.character + 1;\n                    ranges[4 * i + 2] = range.end.line + 1;\n                    ranges[4 * i + 3] = range.end.character + 1;\n                }\n                return this.proxy.$trySetDecorationsFast(\n                    this.id,\n                    decorationType.key,\n                    ranges\n                );\n            }\n        });\n    }\n\n    revealRange(range: Range, revealType?: theia.TextEditorRevealType): void {\n        this.runOnProxy(() => this.proxy.$tryRevealRange(this.id, Converter.fromRange(range)!, (revealType || TextEditorRevealType.Default)));\n    }\n\n    private applyEdit(edit: TextEditorEdit): Promise<boolean> {\n        const editData = edit.finalize();\n\n        const editRanges = editData.edits.map(e => e.range);\n\n        editRanges.sort((a, b) => {\n            if (a.end.line === b.end.line) {\n                if (a.end.character === b.end.character) {\n                    if (a.start.line === b.start.line) {\n                        return a.start.character - b.start.character;\n                    }\n                    return a.start.line - b.start.line;\n                }\n                return a.end.character - b.end.character;\n            }\n            return a.end.line - b.end.line;\n        });\n\n        const count = editRanges.length - 1;\n        for (let i = 0; i < count; i++) {\n            const rangeEnd = editRanges[i].end;\n            const nextRangeStart = editRanges[i + 1].start;\n\n            if (nextRangeStart.isBefore(rangeEnd)) {\n                return Promise.reject(\n                    new Error('Overlapping ranges are not allowed!')\n                );\n            }\n        }\n\n        // prepare data for serialization\n        const edits: SingleEditOperation[] = editData.edits.map(e =>\n            ({\n                range: Converter.fromRange(e.range)!,\n                text: e.text,\n                forceMoveMarkers: e.forceMoveMarkers\n            }));\n\n        return this.proxy.$tryApplyEdits(this.id, editData.documentVersionId, edits, {\n            setEndOfLine: editData.setEndOfLine,\n            undoStopBefore: editData.undoStopBefore,\n            undoStopAfter: editData.undoStopAfter\n        });\n    }\n\n    // tslint:disable-next-line:no-any\n    private runOnProxy(callback: () => Promise<any>): Promise<TextEditorExt | undefined> {\n        if (this.disposed) {\n            console.warn('TextEditor is disposed!');\n            return Promise.resolve(undefined);\n        }\n\n        return callback().then(() => this, err => {\n            if (!(err instanceof Error && err.name === 'DISPOSED')) {\n                console.warn(err);\n            }\n            return undefined;\n        });\n    }\n}\n\nexport class TextEditorOptionsExt implements theia.TextEditorOptions {\n    private _tabSize?: number;\n    private _insertSpace: boolean;\n    private _cursorStyle: TextEditorCursorStyle;\n    private _lineNumbers: TextEditorLineNumbersStyle;\n    constructor(private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        source: TextEditorConfiguration) {\n        this.accept(source);\n    }\n\n    accept(source: TextEditorConfiguration): void {\n        this._tabSize = source.tabSize;\n        this._insertSpace = source.insertSpaces;\n        this._cursorStyle = source.cursorStyle;\n        this._lineNumbers = source.lineNumbers;\n    }\n\n    get tabSize(): number | string | undefined {\n        return this._tabSize;\n    }\n\n    set tabSize(val: number | string | undefined) {\n        const tabSize = this.validateTabSize(val);\n        if (!tabSize) {\n            return; // ignore invalid values\n        }\n\n        if (typeof tabSize === 'number') {\n            if (this.tabSize === tabSize) {\n                return;\n            }\n            this.tabSize = tabSize;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, {\n            tabSize\n        }));\n    }\n\n    private validateTabSize(val: number | string | undefined): number | 'auto' | undefined {\n        if (val === 'auto') {\n            return 'auto';\n        }\n\n        if (typeof val === 'number') {\n            const r = Math.floor(val);\n            return r > 0 ? r : undefined;\n        }\n        if (typeof val === 'string') {\n            const r = parseInt(val, undefined);\n            if (isNaN(r)) {\n                return undefined;\n            }\n            return r > 0 ? r : undefined;\n        }\n        return undefined;\n    }\n\n    get insertSpaces(): boolean | string {\n        return this._insertSpace;\n    }\n\n    set insertSpaces(val: boolean | string) {\n        const insertSpaces = this.validateInsertSpaces(val);\n        if (typeof insertSpaces === 'boolean') {\n            if (this._insertSpace === insertSpaces) {\n                return;\n            }\n            this._insertSpace = insertSpaces;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, { insertSpaces }));\n    }\n\n    private validateInsertSpaces(val: boolean | string): boolean | 'auto' {\n        if (val === 'auto') {\n            return 'auto';\n        }\n        return val === 'false' ? false : Boolean(val);\n    }\n\n    get cursorStyle(): TextEditorCursorStyle {\n        return this._cursorStyle;\n    }\n\n    set cursorStyle(val: TextEditorCursorStyle) {\n        if (this._cursorStyle === val) {\n            return;\n        }\n        this._cursorStyle = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { cursorStyle: val }));\n    }\n\n    get lineNumbers(): TextEditorLineNumbersStyle {\n        return this._lineNumbers;\n    }\n    set lineNumbers(val: TextEditorLineNumbersStyle) {\n        if (this._lineNumbers === val) {\n            return;\n        }\n        this._lineNumbers = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { lineNumbers: val }));\n    }\n\n    public assign(newOptions: theia.TextEditorOptions): void {\n        const configurationUpdate: TextEditorConfigurationUpdate = {};\n        let hasUpdate = false;\n\n        if (typeof newOptions.tabSize !== 'undefined') {\n            const tabSize = this.validateTabSize(newOptions.tabSize);\n            if (tabSize === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            } else if (typeof tabSize === 'number' && this._tabSize !== tabSize) {\n                this._tabSize = tabSize;\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            }\n        }\n\n        if (typeof newOptions.insertSpaces !== 'undefined') {\n            const insertSpaces = this.validateInsertSpaces(newOptions.insertSpaces);\n            if (insertSpaces === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            } else if (this.insertSpaces !== insertSpaces) {\n                this.insertSpaces = insertSpaces;\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            }\n        }\n\n        if (typeof newOptions.cursorStyle !== 'undefined') {\n            if (this._cursorStyle !== newOptions.cursorStyle) {\n                this._cursorStyle = newOptions.cursorStyle;\n                hasUpdate = true;\n                configurationUpdate.cursorStyle = newOptions.cursorStyle;\n            }\n        }\n\n        if (typeof newOptions.lineNumbers !== 'undefined') {\n            if (this._lineNumbers !== newOptions.lineNumbers) {\n                this._lineNumbers = newOptions.lineNumbers;\n                hasUpdate = true;\n                configurationUpdate.lineNumbers = newOptions.lineNumbers;\n            }\n        }\n\n        if (hasUpdate) {\n            warnOnError(this.proxy.$trySetOptions(this.id, configurationUpdate));\n        }\n    }\n\n}\n\nexport interface TextEditOperation {\n    range: theia.Range;\n    text?: string;\n    forceMoveMarkers: boolean;\n}\n\nexport interface EditData {\n    documentVersionId: number;\n    edits: TextEditOperation[];\n    setEndOfLine: EndOfLine;\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport class TextEditorEdit {\n    private readonly documentVersionId: number;\n    private collectedEdits: TextEditOperation[];\n    private eol: EndOfLine;\n    private readonly undoStopBefore: boolean;\n    private readonly undoStopAfter: boolean;\n    constructor(private document: theia.TextDocument, options: { undoStopBefore: boolean; undoStopAfter: boolean }) {\n        this.documentVersionId = document.version;\n        this.collectedEdits = [];\n        this.eol = 0;\n        this.undoStopBefore = options.undoStopBefore;\n        this.undoStopAfter = options.undoStopAfter;\n    }\n\n    finalize(): EditData {\n        return {\n            documentVersionId: this.documentVersionId,\n            edits: this.collectedEdits,\n            setEndOfLine: this.eol,\n            undoStopAfter: this.undoStopAfter,\n            undoStopBefore: this.undoStopBefore\n        };\n    }\n\n    replace(location: Position | Range | Selection, val: string): void {\n        let range: Range;\n        if (location instanceof Position) {\n            range = new Range(location, location);\n        } else if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, val, false);\n    }\n\n    insert(location: Position, val: string): void {\n        this.addEdit(new Range(location, location), val, true);\n    }\n\n    delete(location: Range | Selection): void {\n        let range: Range;\n        if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, undefined, true);\n    }\n\n    setEndOfLine(endOfLine: EndOfLine): void {\n        if (endOfLine !== EndOfLine.CRLF && endOfLine !== EndOfLine.LF) {\n            throw illegalArgument('endOfLine');\n        }\n\n        this.eol = endOfLine;\n    }\n\n    private addEdit(range: Range, text: string | undefined, moveMarkers: boolean): void {\n        const validatedRange = this.document.validateRange(range);\n        this.collectedEdits.push({\n            range: validatedRange,\n            forceMoveMarkers: moveMarkers,\n            text: text\n        });\n    }\n}\n\n// tslint:disable-next-line:no-any\nfunction warnOnError(promise: Promise<any>): void {\n    promise.then(undefined, err => {\n        console.warn(err);\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/workspace/node/workspaceEditingService.ts\n\nimport * as paths from 'path';\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    WorkspaceExt,\n    WorkspaceFolderPickOptionsMain,\n    WorkspaceMain,\n    PLUGIN_RPC_CONTEXT as Ext,\n    MainMessageType\n} from '../common/plugin-api-rpc';\nimport { Path } from '@theia/core/lib/common/path';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { WorkspaceRootsChangeEvent, FileChangeEvent, FileMoveEvent, FileWillMoveEvent } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { InPluginFileSystemWatcherProxy } from './in-plugin-filesystem-watcher-proxy';\nimport URI from 'vscode-uri';\nimport { FileStat } from '@theia/filesystem/lib/common';\nimport { normalize } from '../common/paths';\nimport { relative } from '../common/paths-util';\nimport { Schemes } from '../common/uri-components';\nimport { toWorkspaceFolder } from './type-converters';\nimport { MessageRegistryExt } from './message-registry';\n\nexport class WorkspaceExtImpl implements WorkspaceExt {\n\n    private proxy: WorkspaceMain;\n    private fileSystemWatcherManager: InPluginFileSystemWatcherProxy;\n\n    private workspaceFoldersChangedEmitter = new Emitter<theia.WorkspaceFoldersChangeEvent>();\n    public readonly onDidChangeWorkspaceFolders: Event<theia.WorkspaceFoldersChangeEvent> = this.workspaceFoldersChangedEmitter.event;\n\n    private folders: theia.WorkspaceFolder[] | undefined;\n    private documentContentProviders = new Map<string, theia.TextDocumentContentProvider>();\n\n    constructor(rpc: RPCProtocol,\n        private editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private messageService: MessageRegistryExt) {\n        this.proxy = rpc.getProxy(Ext.WORKSPACE_MAIN);\n        this.fileSystemWatcherManager = new InPluginFileSystemWatcherProxy(this.proxy);\n    }\n\n    get rootPath(): string | undefined {\n        const folder = this.folders && this.folders[0];\n        return folder && folder.uri.fsPath;\n    }\n\n    get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n        return this.folders;\n    }\n\n    get name(): string | undefined {\n        if (this.workspaceFolders && this.workspaceFolders.length > 0) {\n            return new Path(this.workspaceFolders[0].uri.path).base;\n        }\n\n        return undefined;\n    }\n\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void {\n        const newRoots = event.roots || [];\n        const newFolders = newRoots.map((root, index) => this.toWorkspaceFolder(root, index));\n        const delta = this.deltaFolders(this.folders, newFolders);\n\n        this.folders = newFolders;\n\n        this.workspaceFoldersChangedEmitter.fire(delta);\n    }\n\n    private deltaFolders(currentFolders: theia.WorkspaceFolder[] = [], newFolders: theia.WorkspaceFolder[] = []): {\n        added: theia.WorkspaceFolder[]\n        removed: theia.WorkspaceFolder[]\n    } {\n        const added = this.foldersDiff(newFolders, currentFolders);\n        const removed = this.foldersDiff(currentFolders, newFolders);\n        return { added, removed };\n    }\n\n    private foldersDiff(folder1: theia.WorkspaceFolder[] = [], folder2: theia.WorkspaceFolder[] = []): theia.WorkspaceFolder[] {\n        const map = new Map();\n        folder1.forEach(folder => map.set(folder.uri.toString(), folder));\n        folder2.forEach(folder => map.delete(folder.uri.toString()));\n\n        return folder1.filter(folder => map.has(folder.uri.toString()));\n    }\n\n    private toWorkspaceFolder(root: FileStat, index: number): theia.WorkspaceFolder {\n        const uri = URI.parse(root.uri);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: index\n        };\n    }\n\n    pickWorkspaceFolder(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            const optionsMain: WorkspaceFolderPickOptionsMain = {\n                placeHolder: options && options.placeHolder ? options.placeHolder : undefined,\n                ignoreFocusOut: options && options.ignoreFocusOut\n            };\n\n            this.proxy.$pickWorkspaceFolder(optionsMain).then(value => {\n                resolve(value);\n            });\n        });\n    }\n\n    findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number,\n        token: CancellationToken = CancellationToken.None): PromiseLike<URI[]> {\n        let includePattern: string;\n        let includeFolderUri: string | undefined;\n        if (include) {\n            if (typeof include === 'string') {\n                includePattern = include;\n            } else {\n                includePattern = include.pattern;\n                includeFolderUri = URI.file(include.base).toString();\n            }\n        } else {\n            includePattern = '';\n        }\n\n        let excludePatternOrDisregardExcludes: string | false;\n        if (exclude === undefined) {\n            excludePatternOrDisregardExcludes = ''; // default excludes\n        } else if (exclude) {\n            if (typeof exclude === 'string') {\n                excludePatternOrDisregardExcludes = exclude;\n            } else {\n                excludePatternOrDisregardExcludes = exclude.pattern;\n            }\n        } else {\n            excludePatternOrDisregardExcludes = false; // no excludes\n        }\n\n        if (token && token.isCancellationRequested) {\n            return Promise.resolve([]);\n        }\n\n        return this.proxy.$startFileSearch(includePattern, includeFolderUri, excludePatternOrDisregardExcludes, maxResults, token)\n            .then(data => Array.isArray(data) ? data.map(uri => URI.revive(uri)) : []);\n    }\n\n    createFileSystemWatcher(globPattern: theia.GlobPattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): theia.FileSystemWatcher {\n        return this.fileSystemWatcherManager.createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n    }\n\n    $fileChanged(event: FileChangeEvent): void {\n        this.fileSystemWatcherManager.onFileSystemEvent(event.subscriberId, URI.revive(event.uri), event.type);\n    }\n\n    registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n        // `file` and `untitled` schemas are reserved by `workspace.openTextDocument` API:\n        // `file`-scheme for opening a file\n        // `untitled`-scheme for opening a new file that should be saved\n        if (scheme === Schemes.FILE || scheme === Schemes.UNTITLED || this.documentContentProviders.has(scheme)) {\n            throw new Error(`Text Content Document Provider for scheme '${scheme}' is already registered`);\n        }\n\n        this.documentContentProviders.set(scheme, provider);\n        this.proxy.$registerTextDocumentContentProvider(scheme);\n\n        let onDidChangeSubscription: theia.Disposable;\n        if (typeof provider.onDidChange === 'function') {\n            onDidChangeSubscription = provider.onDidChange(async uri => {\n                if (uri.scheme === scheme && this.editorsAndDocuments.getDocument(uri.toString())) {\n                    const content = await this.$provideTextDocumentContent(uri.toString());\n                    if (content) {\n                        this.proxy.$onTextDocumentContentChange(uri.toString(), content);\n                    }\n                }\n            });\n        }\n\n        const instance = this;\n        return {\n            dispose(): void {\n                if (instance.documentContentProviders.delete(scheme)) {\n                    instance.proxy.$unregisterTextDocumentContentProvider(scheme);\n                }\n\n                if (onDidChangeSubscription) {\n                    onDidChangeSubscription.dispose();\n                }\n            }\n        };\n    }\n\n    async $provideTextDocumentContent(documentURI: string): Promise<string | undefined> {\n        const uri = URI.parse(documentURI);\n        const provider = this.documentContentProviders.get(uri.scheme);\n        if (provider) {\n            return provider.provideTextDocumentContent(uri, CancellationToken.None);\n        }\n\n        return undefined;\n    }\n\n    getWorkspaceFolder(uri: theia.Uri, resolveParent?: boolean): theia.WorkspaceFolder | undefined {\n        if (!this.folders || !this.folders.length) {\n            return undefined;\n        }\n\n        function dirname(resource: URI): URI {\n            if (resource.scheme === 'file') {\n                return URI.file(paths.dirname(resource.fsPath));\n            }\n            return resource.with({\n                path: paths.dirname(resource.path)\n            });\n        }\n\n        if (resolveParent && this.hasFolder(uri)) {\n            uri = dirname(uri);\n        }\n\n        const resourcePath = uri.toString();\n\n        let workspaceFolder: theia.WorkspaceFolder | undefined;\n        for (let i = 0; i < this.folders.length; i++) {\n            const folder = this.folders[i];\n            const folderPath = folder.uri.toString();\n\n            if (resourcePath === folderPath) {\n                return toWorkspaceFolder(folder);\n            }\n\n            if (resourcePath.startsWith(folderPath)\n                && resourcePath[folderPath.length] === '/'\n                && (!workspaceFolder || folderPath.length > workspaceFolder.uri.toString().length)) {\n                workspaceFolder = folder;\n            }\n        }\n        return workspaceFolder;\n    }\n\n    private hasFolder(uri: URI): boolean {\n        if (!this.folders) {\n            return false;\n        }\n        return this.folders.some(folder => folder.uri.toString() === uri.toString());\n    }\n\n    getRelativePath(pathOrUri: string | theia.Uri, includeWorkspace?: boolean): string | undefined {\n        let path: string | undefined;\n        if (typeof pathOrUri === 'string') {\n            path = pathOrUri;\n        } else if (typeof pathOrUri !== 'undefined') {\n            path = pathOrUri.fsPath;\n        }\n\n        if (!path) {\n            return path;\n        }\n\n        const folder = this.getWorkspaceFolder(\n            typeof pathOrUri === 'string' ? URI.file(pathOrUri) : pathOrUri,\n            true\n        ) as theia.WorkspaceFolder;\n\n        if (!folder) {\n            return path;\n        }\n\n        if (typeof includeWorkspace === 'undefined') {\n            includeWorkspace = this.folders!.length > 1;\n        }\n\n        let result = relative(folder.uri.fsPath, path);\n        if (includeWorkspace) {\n            result = `${folder.name}/${result}`;\n        }\n        return normalize(result, true);\n    }\n\n    updateWorkspaceFolders(start: number, deleteCount: number, ...workspaceFoldersToAdd: { uri: theia.Uri, name?: string }[]): boolean {\n        const rootsToAdd = new Set<string>();\n        if (Array.isArray(workspaceFoldersToAdd)) {\n            workspaceFoldersToAdd.forEach(folderToAdd => {\n                const uri = URI.isUri(folderToAdd.uri) && folderToAdd.uri.toString();\n                if (uri && !rootsToAdd.has(uri)) {\n                    rootsToAdd.add(uri);\n                }\n            });\n        }\n\n        if ([start, deleteCount].some(i => typeof i !== 'number' || i < 0)) {\n            return false; // validate numbers\n        }\n\n        if (deleteCount === 0 && rootsToAdd.size === 0) {\n            return false; // nothing to delete or add\n        }\n\n        const currentWorkspaceFolders = this.workspaceFolders || [];\n        if (start + deleteCount > currentWorkspaceFolders.length) {\n            return false; // cannot delete more than we have\n        }\n\n        // Simulate the updateWorkspaceFolders method on our data to do more validation\n        const newWorkspaceFolders = currentWorkspaceFolders.slice(0);\n        newWorkspaceFolders.splice(start, deleteCount, ...[...rootsToAdd].map(uri => ({ uri: URI.parse(uri), name: undefined!, index: undefined! })));\n\n        for (let i = 0; i < newWorkspaceFolders.length; i++) {\n            const folder = newWorkspaceFolders[i];\n            if (newWorkspaceFolders.some((otherFolder, index) => index !== i && folder.uri.toString() === otherFolder.uri.toString())) {\n                return false; // cannot add the same folder multiple times\n            }\n        }\n\n        const { added, removed } = this.deltaFolders(currentWorkspaceFolders, newWorkspaceFolders);\n        if (added.length === 0 && removed.length === 0) {\n            return false; // nothing actually changed\n        }\n\n        // Trigger on main side\n        this.proxy.$updateWorkspaceFolders(start, deleteCount, ...rootsToAdd).then(undefined, error =>\n            this.messageService.showMessage(MainMessageType.Error, `Failed to update workspace folders: ${error}`)\n        );\n\n        return true;\n    }\n\n    // Experimental API https://github.com/eclipse-theia/theia/issues/4167\n    private workspaceWillRenameFileEmitter = new Emitter<theia.FileWillRenameEvent>();\n    private workspaceDidRenameFileEmitter = new Emitter<theia.FileRenameEvent>();\n\n    /**\n     * Adds a listener for an event that is emitted when a workspace file is going to be renamed.\n     */\n    public readonly onWillRenameFile: Event<theia.FileWillRenameEvent> = this.workspaceWillRenameFileEmitter.event;\n\n    /**\n     * Adds a listener for an event that is emitted when a workspace file is renamed.\n     */\n    public readonly onDidRenameFile: Event<theia.FileRenameEvent> = this.workspaceDidRenameFileEmitter.event;\n\n    $onFileRename(event: FileMoveEvent): void {\n        this.workspaceDidRenameFileEmitter.fire(Object.freeze({ oldUri: URI.revive(event.oldUri), newUri: URI.revive(event.newUri) }));\n    }\n\n    /* tslint:disable-next-line:no-any */\n    $onWillRename(event: FileWillMoveEvent): Promise<any> {\n        return this.workspaceWillRenameFileEmitter.fire({\n            oldUri: URI.revive(event.oldUri),\n            newUri: URI.revive(event.newUri),\n            waitUntil: (thenable: Promise<theia.WorkspaceEdit>): void => { }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { WorkspaceMain } from '../common/plugin-api-rpc';\nimport { FileWatcherSubscriberOptions, FileChangeEventType } from '../common/plugin-api-rpc-model';\nimport URI from 'vscode-uri';\n\n/**\n * This class is responsible for file watchers subscription registering and file system events proxying.\n * It contains no logic, only communicates with main side to add / remove subscription and\n * delivers file system events to corresponding subscribers.\n */\nexport class InPluginFileSystemWatcherProxy {\n\n    private proxy: WorkspaceMain;\n    private subscribers: Map<string, Emitter<FileSystemEvent>>;\n\n    constructor(proxy: WorkspaceMain) {\n        this.proxy = proxy;\n        this.subscribers = new Map<string, Emitter<FileSystemEvent>>();\n    }\n\n    createFileSystemWatcher(\n        globPattern: theia.GlobPattern,\n        ignoreCreateEvents?: boolean,\n        ignoreChangeEvents?: boolean,\n        ignoreDeleteEvents?: boolean): theia.FileSystemWatcher {\n\n        const perSubscriberEventEmitter = new Emitter<FileSystemEvent>();\n        const subscriberPrivateData: SubscriberData = {\n            event: perSubscriberEventEmitter.event\n        };\n        const fileWatcherSubscriberOptions: FileWatcherSubscriberOptions = { globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents };\n        // ids are generated by server side to be able handle several subscribers.\n        this.proxy.$registerFileSystemWatcher(fileWatcherSubscriberOptions).then((id: string) => {\n            // this is safe, because actual subscription happens on server side and response is\n            // sent right after actual subscription, so no events are possible in between.\n            this.subscribers.set(id, perSubscriberEventEmitter);\n            subscriberPrivateData.unsubscribe = () => this.proxy.$unregisterFileSystemWatcher(id);\n        });\n        return new FileSystemWatcher(subscriberPrivateData, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n    }\n\n    onFileSystemEvent(id: string, uri: URI, type: FileChangeEventType): void {\n        const perSubscriberEventEmitter: Emitter<FileSystemEvent> | undefined = this.subscribers.get(id);\n        if (perSubscriberEventEmitter) {\n            perSubscriberEventEmitter.fire({ uri, type });\n        } else {\n            // shouldn't happen\n            // if it happens then a message was lost, unsubscribe to make state consistent\n            this.proxy.$unregisterFileSystemWatcher(id);\n        }\n    }\n}\n\nclass FileSystemWatcher implements theia.FileSystemWatcher {\n    private subscriberData: SubscriberData;\n\n    private onDidCreateEmitter: Emitter<theia.Uri>;\n    private onDidChangeEmitter: Emitter<theia.Uri>;\n    private onDidDeleteEmitter: Emitter<theia.Uri>;\n\n    constructor(\n        subscriberData: SubscriberData,\n        private isIgnoreCreateEvents: boolean = false,\n        private isIgnoreChangeEvents: boolean = false,\n        private isIgnoreDeleteEvents: boolean = false\n    ) {\n        this.onDidCreateEmitter = new Emitter<theia.Uri>();\n        this.onDidChangeEmitter = new Emitter<theia.Uri>();\n        this.onDidDeleteEmitter = new Emitter<theia.Uri>();\n\n        this.subscriberData = subscriberData;\n        subscriberData.event((event: FileSystemEvent) => {\n            // Here ignore event flags are not analyzed because all the logic is\n            // moved to server side to avoid unneded data transfer via network.\n            // The flags are present just to be read only accesible for user.\n            switch (event.type) {\n                case 'updated':\n                    this.onDidChangeEmitter.fire(event.uri);\n                    break;\n                case 'created':\n                    this.onDidCreateEmitter.fire(event.uri);\n                    break;\n                case 'deleted':\n                    this.onDidDeleteEmitter.fire(event.uri);\n                    break;\n            }\n        });\n    }\n\n    get ignoreCreateEvents(): boolean {\n        return this.isIgnoreCreateEvents;\n    }\n\n    get ignoreChangeEvents(): boolean {\n        return this.isIgnoreChangeEvents;\n    }\n\n    get ignoreDeleteEvents(): boolean {\n        return this.isIgnoreDeleteEvents;\n    }\n\n    get onDidCreate(): Event<theia.Uri> {\n        return this.onDidCreateEmitter.event;\n    }\n\n    get onDidChange(): Event<theia.Uri> {\n        return this.onDidChangeEmitter.event;\n    }\n\n    get onDidDelete(): Event<theia.Uri> {\n        return this.onDidDeleteEmitter.event;\n    }\n\n    dispose(): void {\n        this.onDidCreateEmitter.dispose();\n        this.onDidChangeEmitter.dispose();\n        this.onDidDeleteEmitter.dispose();\n        if (this.subscriberData.unsubscribe) {\n            this.subscriberData.unsubscribe();\n        }\n    }\n\n}\n\ninterface FileSystemEvent {\n    uri: URI,\n    type: FileChangeEventType\n}\n\ninterface SubscriberData {\n    event: Event<FileSystemEvent>\n    unsubscribe?: () => void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, MessageRegistryMain, MainMessageOptions, MainMessageType\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageItem, MessageOptions } from '@theia/plugin';\n\nexport class MessageRegistryExt {\n\n    private proxy: MessageRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.MESSAGE_REGISTRY_MAIN);\n    }\n\n    async showMessage(type: MainMessageType, message: string,\n        optionsOrFirstItem?: MessageOptions | string | MessageItem,\n        ...rest: (string | MessageItem)[]): Promise<string | MessageItem | undefined> {\n        const options: MainMessageOptions = {};\n        const actions: string[] = [];\n        const items: (string | MessageItem)[] = [];\n        const pushItem = (item: string | MessageItem) => {\n            items.push(item);\n            if (typeof item === 'string') {\n                actions.push(item);\n            } else {\n                actions.push(item.title);\n                if (item.isCloseAffordance) {\n                    options.onCloseActionHandle = actions.length - 1;\n                }\n            }\n        };\n        if (optionsOrFirstItem) {\n            if (typeof optionsOrFirstItem === 'string' || 'title' in optionsOrFirstItem) {\n                pushItem(optionsOrFirstItem);\n            } else {\n                if ('modal' in optionsOrFirstItem) {\n                    options.modal = optionsOrFirstItem.modal;\n                }\n            }\n        }\n        for (const item of rest) {\n            pushItem(item);\n        }\n        const actionHandle = await this.proxy.$showMessage(type, message, options, actions);\n        return actionHandle !== undefined ? items[actionHandle] : undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EnvExtImpl } from '../../../plugin/env';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/**\n * Worker specific implementation not returning any FileSystem details\n * Extending the common class\n */\nexport class WorkerEnvExtImpl extends EnvExtImpl {\n\n    constructor(rpc: RPCProtocol) {\n        super(rpc);\n    }\n\n    /**\n     * Throw error for app-root as there is no filesystem in worker context\n     */\n    get appRoot(): string {\n        throw new Error('There is no app root in worker context');\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { EnvMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { QueryParameters } from '../common/env';\nimport { v4 } from 'uuid';\n\nexport abstract class EnvExtImpl {\n    private proxy: EnvMain;\n    private queryParameters: QueryParameters;\n    private lang: string;\n    private defaultShell: string;\n    private envMachineId: string;\n    private envSessionId: string;\n\n    public static readonly APP_NAME = 'Eclipse Theia';\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.ENV_MAIN);\n        this.envSessionId = v4();\n        this.envMachineId = v4();\n    }\n\n    getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.proxy.$getEnvVariable(envVarName).then(x => {\n            if (x === null) {\n                return undefined;\n            }\n            return x;\n        });\n    }\n\n    getQueryParameter(queryParamName: string): string | string[] | undefined {\n        return this.queryParameters[queryParamName];\n    }\n\n    getQueryParameters(): QueryParameters {\n        return this.queryParameters;\n    }\n\n    setQueryParameters(queryParams: QueryParameters): void {\n        this.queryParameters = queryParams;\n    }\n\n    setLanguage(lang: string): void {\n        this.lang = lang;\n    }\n\n    setShell(shell: string): void {\n        this.defaultShell = shell;\n    }\n\n    getClientOperatingSystem(): Promise<theia.OperatingSystem> {\n        return this.proxy.$getClientOperatingSystem();\n    }\n\n    get appName(): string {\n        return EnvExtImpl.APP_NAME;\n    }\n\n    abstract get appRoot(): string;\n\n    get language(): string {\n        return this.lang;\n    }\n    get machineId(): string {\n        return this.envMachineId;\n    }\n    get sessionId(): string {\n        return this.envSessionId;\n    }\n    get uriScheme(): string {\n        return 'theia';\n    }\n    get shell(): string {\n        return this.defaultShell;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 RedHat and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, ClipboardMain } from '../common';\n\nexport class ClipboardExt implements theia.Clipboard {\n\n    protected readonly proxy: ClipboardMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CLIPBOARD_MAIN);\n    }\n\n    readText(): Promise<string> {\n        return this.proxy.$readText();\n    }\n\n    writeText(value: string): Promise<void> {\n        return this.proxy.$writeText(value);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { v4 } from 'uuid';\nimport { WebviewsExt, WebviewPanelViewState, WebviewsMain, PLUGIN_RPC_CONTEXT, WebviewInitData, /* WebviewsMain, PLUGIN_RPC_CONTEXT  */ } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Plugin } from '../common/plugin-api-rpc';\nimport URI from 'vscode-uri';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { fromViewColumn, toViewColumn, toWebviewPanelShowOptions } from './type-converters';\nimport { Disposable, WebviewPanelTargetArea } from './types-impl';\nimport { WorkspaceExtImpl } from './workspace';\nimport { PluginIconPath } from './plugin-icon-path';\n\nexport class WebviewsExtImpl implements WebviewsExt {\n    private readonly proxy: WebviewsMain;\n    private readonly webviewPanels = new Map<string, WebviewPanelImpl>();\n    private readonly serializers = new Map<string, {\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    }>();\n    private initData: WebviewInitData | undefined;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl,\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEWS_MAIN);\n    }\n\n    init(initData: WebviewInitData): void {\n        this.initData = initData;\n    }\n\n    // tslint:disable-next-line:no-any\n    $onMessage(handle: string, message: any): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.webview.onMessageEmitter.fire(message);\n        }\n    }\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            const viewColumn = toViewColumn(newState.position);\n            if (panel.active !== newState.active || panel.visible !== newState.visible || panel.viewColumn !== viewColumn) {\n                panel.setActive(newState.active);\n                panel.setVisible(newState.visible);\n                panel.setViewColumn(viewColumn!);\n                panel.onDidChangeViewStateEmitter.fire({ webviewPanel: panel });\n            }\n        }\n    }\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void> {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.dispose();\n            this.webviewPanels.delete(handle);\n        }\n        return Promise.resolve();\n    }\n    $deserializeWebviewPanel(viewId: string,\n        viewType: string,\n        title: string,\n        // tslint:disable-next-line:no-any\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void> {\n        if (!this.initData) {\n            return Promise.reject(new Error('Webviews are not initialized'));\n        }\n        const entry = this.serializers.get(viewType);\n        if (!entry) {\n            return Promise.reject(new Error(`No serializer found for '${viewType}'`));\n        }\n        const { serializer, plugin } = entry;\n\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const revivedPanel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, toViewColumn(viewState.position)!, options, webview);\n        revivedPanel.setActive(viewState.active);\n        revivedPanel.setVisible(viewState.visible);\n        this.webviewPanels.set(viewId, revivedPanel);\n        return serializer.deserializeWebviewPanel(revivedPanel, state);\n    }\n\n    createWebview(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin\n    ): theia.WebviewPanel {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const viewId = v4();\n        this.proxy.$createWebviewPanel(viewId, viewType, title, webviewShowOptions, WebviewImpl.toWebviewOptions(options, this.workspace, plugin));\n\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const panel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, webviewShowOptions, options, webview);\n        this.webviewPanels.set(viewId, panel);\n        return panel;\n    }\n\n    registerWebviewPanelSerializer(\n        viewType: string,\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    ): theia.Disposable {\n        if (this.serializers.has(viewType)) {\n            throw new Error(`Serializer for '${viewType}' already registered`);\n        }\n\n        this.serializers.set(viewType, { serializer, plugin });\n        this.proxy.$registerSerializer(viewType);\n\n        return new Disposable(() => {\n            this.serializers.delete(viewType);\n            this.proxy.$unregisterSerializer(viewType);\n        });\n    }\n\n    private getWebviewPanel(viewId: string): WebviewPanelImpl | undefined {\n        if (this.webviewPanels.has(viewId)) {\n            return this.webviewPanels.get(viewId);\n        }\n        return undefined;\n    }\n}\n\nexport class WebviewImpl implements theia.Webview {\n    private isDisposed = false;\n    private _html: string;\n    private _options: theia.WebviewOptions;\n\n    // tslint:disable-next-line:no-any\n    public readonly onMessageEmitter = new Emitter<any>();\n\n    // tslint:disable-next-line:no-any\n    public readonly onDidReceiveMessage: Event<any> = this.onMessageEmitter.event;\n\n    constructor(\n        private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        options: theia.WebviewOptions,\n        private readonly initData: WebviewInitData,\n        private readonly workspace: WorkspaceExtImpl,\n        readonly plugin: Plugin\n    ) {\n        this._options = options;\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.onMessageEmitter.dispose();\n    }\n\n    asWebviewUri(resource: theia.Uri): theia.Uri {\n        const uri = this.initData.webviewResourceRoot\n            // Make sure we preserve the scheme of the resource but convert it into a normal path segment\n            // The scheme is important as we need to know if we are requesting a local or a remote resource.\n            .replace('{{resource}}', resource.scheme + resource.toString().replace(/^\\S+?:/, ''))\n            .replace('{{uuid}}', this.viewId);\n        return URI.parse(uri);\n    }\n\n    get cspSource(): string {\n        return this.initData.webviewCspSource.replace('{{uuid}}', this.viewId);\n    }\n\n    get html(): string {\n        this.checkIsDisposed();\n        return this._html;\n    }\n\n    set html(value: string) {\n        this.checkIsDisposed();\n        if (this._html !== value) {\n            this._html = value;\n            this.proxy.$setHtml(this.viewId, value);\n        }\n    }\n\n    get options(): theia.WebviewOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    set options(newOptions: theia.WebviewOptions) {\n        this.checkIsDisposed();\n        this.proxy.$setOptions(this.viewId, WebviewImpl.toWebviewOptions(newOptions, this.workspace, this.plugin));\n        this._options = newOptions;\n    }\n\n    // tslint:disable-next-line:no-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This Webview is disposed!');\n        }\n    }\n\n    static toWebviewOptions(options: theia.WebviewOptions, workspace: WorkspaceExtImpl, plugin: Plugin): theia.WebviewOptions {\n        return {\n            ...options,\n            localResourceRoots: options.localResourceRoots || [\n                ...(workspace.workspaceFolders || []).map(x => x.uri),\n                URI.file(plugin.pluginFolder)\n            ]\n        };\n    }\n}\n\nexport class WebviewPanelImpl implements theia.WebviewPanel {\n\n    private isDisposed = false;\n    private _active = true;\n    private _visible = true;\n    private _showOptions: theia.WebviewPanelShowOptions;\n    private _iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined;\n\n    readonly onDisposeEmitter = new Emitter<void>();\n    public readonly onDidDispose: Event<void> = this.onDisposeEmitter.event;\n\n    readonly onDidChangeViewStateEmitter = new Emitter<theia.WebviewPanelOnDidChangeViewStateEvent>();\n    public readonly onDidChangeViewState: Event<theia.WebviewPanelOnDidChangeViewStateEvent> = this.onDidChangeViewStateEmitter.event;\n\n    constructor(private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        private readonly _viewType: string,\n        private _title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        private readonly _options: theia.WebviewPanelOptions,\n        private readonly _webview: WebviewImpl\n    ) {\n        this._showOptions = typeof showOptions === 'object' ? showOptions : { viewColumn: showOptions as theia.ViewColumn };\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        this.isDisposed = true;\n        this.onDisposeEmitter.fire(void 0);\n\n        this.proxy.$disposeWebview(this.viewId);\n        this._webview.dispose();\n\n        this.onDisposeEmitter.dispose();\n        this.onDidChangeViewStateEmitter.dispose();\n    }\n\n    get viewType(): string {\n        this.checkIsDisposed();\n        return this._viewType;\n    }\n\n    get title(): string {\n        this.checkIsDisposed();\n        return this._title;\n    }\n\n    set title(newTitle: string) {\n        this.checkIsDisposed();\n        if (this._title !== newTitle) {\n            this._title = newTitle;\n            this.proxy.$setTitle(this.viewId, newTitle);\n        }\n    }\n\n    get iconPath(): theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined {\n        return this._iconPath;\n    }\n\n    set iconPath(iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined) {\n        this.checkIsDisposed();\n        if (this._iconPath !== iconPath) {\n            this._iconPath = iconPath;\n            this.proxy.$setIconPath(this.viewId, PluginIconPath.toUrl(iconPath, this._webview.plugin));\n        }\n    }\n\n    get webview(): WebviewImpl {\n        this.checkIsDisposed();\n        return this._webview;\n    }\n\n    get options(): theia.WebviewPanelOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        this.checkIsDisposed();\n        return this._showOptions.viewColumn;\n    }\n\n    setViewColumn(value: theia.ViewColumn | undefined): void {\n        this.checkIsDisposed();\n        this._showOptions.viewColumn = value;\n    }\n\n    get showOptions(): theia.WebviewPanelShowOptions {\n        this.checkIsDisposed();\n        return this._showOptions;\n    }\n\n    setShowOptions(value: theia.WebviewPanelShowOptions): void {\n        this.checkIsDisposed();\n        this._showOptions = value;\n    }\n\n    get active(): boolean {\n        this.checkIsDisposed();\n        return this._active;\n    }\n\n    setActive(value: boolean): void {\n        this.checkIsDisposed();\n        this._active = value;\n    }\n\n    get visible(): boolean {\n        this.checkIsDisposed();\n        return this._visible;\n    }\n\n    setVisible(value: boolean): void {\n        this.checkIsDisposed();\n        this._visible = value;\n    }\n\n    reveal(arg0?: theia.ViewColumn | WebviewPanelTargetArea, arg1?: theia.ViewColumn | boolean, arg2?: boolean): void {\n        let area: WebviewPanelTargetArea | undefined = undefined;\n        let viewColumn: theia.ViewColumn | undefined = undefined;\n        let preserveFocus: boolean | undefined = undefined;\n        if (typeof arg0 === 'number') {\n            viewColumn = arg0;\n        } else {\n            area = arg0;\n        }\n        if (typeof arg1 === 'number') {\n            viewColumn = arg1;\n        } else {\n            preserveFocus = arg1;\n        }\n        if (typeof arg2 === 'boolean') {\n            preserveFocus = arg2;\n        }\n        this.checkIsDisposed();\n        this.proxy.$reveal(this.viewId, {\n            area,\n            viewColumn: viewColumn ? fromViewColumn(viewColumn) : undefined,\n            preserveFocus\n        });\n    }\n\n    // tslint:disable-next-line:no-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This WebviewPanel is disposed!');\n        }\n    }\n}\n"],"sourceRoot":""}